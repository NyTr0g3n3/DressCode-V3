(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function E1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yv={exports:{}},Uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function eL(){if(Ww)return Uc;Ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Uc.Fragment=e,Uc.jsx=n,Uc.jsxs=n,Uc}var Qw;function tL(){return Qw||(Qw=1,yv.exports=eL()),yv.exports}var S=tL(),vv={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function nL(){if(Xw)return He;Xw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function b($){return $===null||typeof $!="object"?null:($=T&&$[T]||$["@@iterator"],typeof $=="function"?$:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function L($,Z,pe){this.props=$,this.context=Z,this.refs=D,this.updater=pe||C}L.prototype.isReactComponent={},L.prototype.setState=function($,Z){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Z,"setState")},L.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function k(){}k.prototype=L.prototype;function U($,Z,pe){this.props=$,this.context=Z,this.refs=D,this.updater=pe||C}var H=U.prototype=new k;H.constructor=U,N(H,L.prototype),H.isPureReactComponent=!0;var K=Array.isArray;function G(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function P($,Z,pe){var re=pe.ref;return{$$typeof:t,type:$,key:Z,ref:re!==void 0?re:null,props:pe}}function V($,Z){return P($.type,Z,$.props)}function F($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function q($){var Z={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(pe){return Z[pe]})}var z=/\/+/g;function xe($,Z){return typeof $=="object"&&$!==null&&$.key!=null?q(""+$.key):Z.toString(36)}function De($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(G,G):($.status="pending",$.then(function(Z){$.status==="pending"&&($.status="fulfilled",$.value=Z)},function(Z){$.status==="pending"&&($.status="rejected",$.reason=Z)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function ee($,Z,pe,re,fe){var Te=typeof $;(Te==="undefined"||Te==="boolean")&&($=null);var Ve=!1;if($===null)Ve=!0;else switch(Te){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch($.$$typeof){case t:case e:Ve=!0;break;case p:return Ve=$._init,ee(Ve($._payload),Z,pe,re,fe)}}if(Ve)return fe=fe($),Ve=re===""?"."+xe($,0):re,K(fe)?(pe="",Ve!=null&&(pe=Ve.replace(z,"$&/")+"/"),ee(fe,Z,pe,"",function(xn){return xn})):fe!=null&&(F(fe)&&(fe=V(fe,pe+(fe.key==null||$&&$.key===fe.key?"":(""+fe.key).replace(z,"$&/")+"/")+Ve)),Z.push(fe)),1;Ve=0;var Le=re===""?".":re+":";if(K($))for(var pt=0;pt<$.length;pt++)re=$[pt],Te=Le+xe(re,pt),Ve+=ee(re,Z,pe,Te,fe);else if(pt=b($),typeof pt=="function")for($=pt.call($),pt=0;!(re=$.next()).done;)re=re.value,Te=Le+xe(re,pt++),Ve+=ee(re,Z,pe,Te,fe);else if(Te==="object"){if(typeof $.then=="function")return ee(De($),Z,pe,re,fe);throw Z=String($),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function se($,Z,pe){if($==null)return $;var re=[],fe=0;return ee($,re,"","",function(Te){return Z.call(pe,Te,fe++)}),re}function me($){if($._status===-1){var Z=$._result;Z=Z(),Z.then(function(pe){($._status===0||$._status===-1)&&($._status=1,$._result=pe)},function(pe){($._status===0||$._status===-1)&&($._status=2,$._result=pe)}),$._status===-1&&($._status=0,$._result=Z)}if($._status===1)return $._result.default;throw $._result}var Ae=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Ce={map:se,forEach:function($,Z,pe){se($,function(){Z.apply(this,arguments)},pe)},count:function($){var Z=0;return se($,function(){Z++}),Z},toArray:function($){return se($,function(Z){return Z})||[]},only:function($){if(!F($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return He.Activity=v,He.Children=Ce,He.Component=L,He.Fragment=n,He.Profiler=r,He.PureComponent=U,He.StrictMode=i,He.Suspense=d,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,He.__COMPILER_RUNTIME={__proto__:null,c:function($){return I.H.useMemoCache($)}},He.cache=function($){return function(){return $.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function($,Z,pe){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var re=N({},$.props),fe=$.key;if(Z!=null)for(Te in Z.key!==void 0&&(fe=""+Z.key),Z)!R.call(Z,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Z.ref===void 0||(re[Te]=Z[Te]);var Te=arguments.length-2;if(Te===1)re.children=pe;else if(1<Te){for(var Ve=Array(Te),Le=0;Le<Te;Le++)Ve[Le]=arguments[Le+2];re.children=Ve}return P($.type,fe,re)},He.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},He.createElement=function($,Z,pe){var re,fe={},Te=null;if(Z!=null)for(re in Z.key!==void 0&&(Te=""+Z.key),Z)R.call(Z,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(fe[re]=Z[re]);var Ve=arguments.length-2;if(Ve===1)fe.children=pe;else if(1<Ve){for(var Le=Array(Ve),pt=0;pt<Ve;pt++)Le[pt]=arguments[pt+2];fe.children=Le}if($&&$.defaultProps)for(re in Ve=$.defaultProps,Ve)fe[re]===void 0&&(fe[re]=Ve[re]);return P($,Te,fe)},He.createRef=function(){return{current:null}},He.forwardRef=function($){return{$$typeof:c,render:$}},He.isValidElement=F,He.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:me}},He.memo=function($,Z){return{$$typeof:f,type:$,compare:Z===void 0?null:Z}},He.startTransition=function($){var Z=I.T,pe={};I.T=pe;try{var re=$(),fe=I.S;fe!==null&&fe(pe,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(G,Ae)}catch(Te){Ae(Te)}finally{Z!==null&&pe.types!==null&&(Z.types=pe.types),I.T=Z}},He.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},He.use=function($){return I.H.use($)},He.useActionState=function($,Z,pe){return I.H.useActionState($,Z,pe)},He.useCallback=function($,Z){return I.H.useCallback($,Z)},He.useContext=function($){return I.H.useContext($)},He.useDebugValue=function(){},He.useDeferredValue=function($,Z){return I.H.useDeferredValue($,Z)},He.useEffect=function($,Z){return I.H.useEffect($,Z)},He.useEffectEvent=function($){return I.H.useEffectEvent($)},He.useId=function(){return I.H.useId()},He.useImperativeHandle=function($,Z,pe){return I.H.useImperativeHandle($,Z,pe)},He.useInsertionEffect=function($,Z){return I.H.useInsertionEffect($,Z)},He.useLayoutEffect=function($,Z){return I.H.useLayoutEffect($,Z)},He.useMemo=function($,Z){return I.H.useMemo($,Z)},He.useOptimistic=function($,Z){return I.H.useOptimistic($,Z)},He.useReducer=function($,Z,pe){return I.H.useReducer($,Z,pe)},He.useRef=function($){return I.H.useRef($)},He.useState=function($){return I.H.useState($)},He.useSyncExternalStore=function($,Z,pe){return I.H.useSyncExternalStore($,Z,pe)},He.useTransition=function(){return I.H.useTransition()},He.version="19.2.0",He}var Zw;function w_(){return Zw||(Zw=1,vv.exports=nL()),vv.exports}var B=w_();const Dn=E1(B);var _v={exports:{}},Fc={},Tv={exports:{}},Ev={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA;function iL(){return eA||(eA=1,(function(t){function e(ee,se){var me=ee.length;ee.push(se);e:for(;0<me;){var Ae=me-1>>>1,Ce=ee[Ae];if(0<r(Ce,se))ee[Ae]=se,ee[me]=Ce,me=Ae;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var se=ee[0],me=ee.pop();if(me!==se){ee[0]=me;e:for(var Ae=0,Ce=ee.length,$=Ce>>>1;Ae<$;){var Z=2*(Ae+1)-1,pe=ee[Z],re=Z+1,fe=ee[re];if(0>r(pe,me))re<Ce&&0>r(fe,pe)?(ee[Ae]=fe,ee[re]=me,Ae=re):(ee[Ae]=pe,ee[Z]=me,Ae=Z);else if(re<Ce&&0>r(fe,me))ee[Ae]=fe,ee[re]=me,Ae=re;else break e}}return se}function r(ee,se){var me=ee.sortIndex-se.sortIndex;return me!==0?me:ee.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],f=[],p=1,v=null,T=3,b=!1,C=!1,N=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function H(ee){for(var se=n(f);se!==null;){if(se.callback===null)i(f);else if(se.startTime<=ee)i(f),se.sortIndex=se.expirationTime,e(d,se);else break;se=n(f)}}function K(ee){if(N=!1,H(ee),!C)if(n(d)!==null)C=!0,G||(G=!0,q());else{var se=n(f);se!==null&&De(K,se.startTime-ee)}}var G=!1,I=-1,R=5,P=-1;function V(){return D?!0:!(t.unstable_now()-P<R)}function F(){if(D=!1,G){var ee=t.unstable_now();P=ee;var se=!0;try{e:{C=!1,N&&(N=!1,k(I),I=-1),b=!0;var me=T;try{t:{for(H(ee),v=n(d);v!==null&&!(v.expirationTime>ee&&V());){var Ae=v.callback;if(typeof Ae=="function"){v.callback=null,T=v.priorityLevel;var Ce=Ae(v.expirationTime<=ee);if(ee=t.unstable_now(),typeof Ce=="function"){v.callback=Ce,H(ee),se=!0;break t}v===n(d)&&i(d),H(ee)}else i(d);v=n(d)}if(v!==null)se=!0;else{var $=n(f);$!==null&&De(K,$.startTime-ee),se=!1}}break e}finally{v=null,T=me,b=!1}se=void 0}}finally{se?q():G=!1}}}var q;if(typeof U=="function")q=function(){U(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,xe=z.port2;z.port1.onmessage=F,q=function(){xe.postMessage(null)}}else q=function(){L(F,0)};function De(ee,se){I=L(function(){ee(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var se=3;break;default:se=T}var me=T;T=se;try{return ee()}finally{T=me}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(ee,se){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var me=T;T=ee;try{return se()}finally{T=me}},t.unstable_scheduleCallback=function(ee,se,me){var Ae=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ae+me:Ae):me=Ae,ee){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=me+Ce,ee={id:p++,callback:se,priorityLevel:ee,startTime:me,expirationTime:Ce,sortIndex:-1},me>Ae?(ee.sortIndex=me,e(f,ee),n(d)===null&&ee===n(f)&&(N?(k(I),I=-1):N=!0,De(K,me-Ae))):(ee.sortIndex=Ce,e(d,ee),C||b||(C=!0,G||(G=!0,q()))),ee},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ee){var se=T;return function(){var me=T;T=se;try{return ee.apply(this,arguments)}finally{T=me}}}})(Ev)),Ev}var tA;function rL(){return tA||(tA=1,Tv.exports=iL()),Tv.exports}var Sv={exports:{}},Zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA;function sL(){if(nA)return Zn;nA=1;var t=w_();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:d,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},Zn.flushSync=function(d){var f=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=p,i.d.f()}},Zn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Zn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Zn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:b}):p==="script"&&i.d.X(d,{crossOrigin:v,integrity:T,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Zn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Zn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,v=c(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Zn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Zn.requestFormReset=function(d){i.d.r(d)},Zn.unstable_batchedUpdates=function(d,f){return d(f)},Zn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},Zn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Zn.version="19.2.0",Zn}var iA;function S1(){if(iA)return Sv.exports;iA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sv.exports=sL(),Sv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function oL(){if(rA)return Fc;rA=1;var t=rL(),e=w_(),n=S1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var _=u.return;if(_===null)break;var E=_.alternate;if(E===null){if(h=_.return,h!==null){u=h;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===u)return d(_),s;if(E===h)return d(_),a;E=E.sibling}throw Error(i(188))}if(u.return!==h.return)u=_,h=E;else{for(var A=!1,M=_.child;M;){if(M===u){A=!0,u=_,h=E;break}if(M===h){A=!0,h=_,u=E;break}M=M.sibling}if(!A){for(M=E.child;M;){if(M===u){A=!0,u=E,h=_;break}if(M===h){A=!0,h=E,u=_;break}M=M.sibling}if(!A)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=F&&s[F]||s["@@iterator"],typeof s=="function"?s:null)}var z=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===z?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case L:return"Profiler";case D:return"StrictMode";case K:return"Suspense";case G:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case U:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case H:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return a=s.displayName||null,a!==null?a:xe(s.type)||"Memo";case R:a=s._payload,s=s._init;try{return xe(s(a))}catch{}}return null}var De=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ae=[],Ce=-1;function $(s){return{current:s}}function Z(s){0>Ce||(s.current=Ae[Ce],Ae[Ce]=null,Ce--)}function pe(s,a){Ce++,Ae[Ce]=s.current,s.current=a}var re=$(null),fe=$(null),Te=$(null),Ve=$(null);function Le(s,a){switch(pe(Te,a),pe(fe,s),pe(re,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?_w(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=_w(a),s=Tw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(re),pe(re,s)}function pt(){Z(re),Z(fe),Z(Te)}function xn(s){s.memoizedState!==null&&pe(Ve,s);var a=re.current,u=Tw(a,s.type);a!==u&&(pe(fe,s),pe(re,u))}function bi(s){fe.current===s&&(Z(re),Z(fe)),Ve.current===s&&(Z(Ve),kc._currentValue=me)}var Cn,ui;function kn(s){if(Cn===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Cn=a&&a[1]||"",ui=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cn+s+ui}var In=!1;function Vn(s,a){if(!s||In)return"";In=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ne){var te=ne}Reflect.construct(s,[],le)}else{try{le.call()}catch(ne){te=ne}s.call(le.prototype)}}else{try{throw Error()}catch(ne){te=ne}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),A=E[0],M=E[1];if(A&&M){var j=A.split(`
`),X=M.split(`
`);for(_=h=0;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;for(;_<X.length&&!X[_].includes("DetermineComponentFrameRoot");)_++;if(h===j.length||_===X.length)for(h=j.length-1,_=X.length-1;1<=h&&0<=_&&j[h]!==X[_];)_--;for(;1<=h&&0<=_;h--,_--)if(j[h]!==X[_]){if(h!==1||_!==1)do if(h--,_--,0>_||j[h]!==X[_]){var oe=`
`+j[h].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=h&&0<=_);break}}}finally{In=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?kn(u):""}function Oi(s,a){switch(s.tag){case 26:case 27:case 5:return kn(s.type);case 16:return kn("Lazy");case 13:return s.child!==a&&a!==null?kn("Suspense Fallback"):kn("Suspense");case 19:return kn("SuspenseList");case 0:case 15:return Vn(s.type,!1);case 11:return Vn(s.type.render,!1);case 1:return Vn(s.type,!0);case 31:return kn("Activity");default:return""}}function Ui(s){try{var a="",u=null;do a+=Oi(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var wi=Object.prototype.hasOwnProperty,ci=t.unstable_scheduleCallback,di=t.unstable_cancelCallback,yn=t.unstable_shouldYield,Fi=t.unstable_requestPaint,wt=t.unstable_now,zt=t.unstable_getCurrentPriorityLevel,Ke=t.unstable_ImmediatePriority,At=t.unstable_UserBlockingPriority,xt=t.unstable_NormalPriority,Me=t.unstable_LowPriority,Bi=t.unstable_IdlePriority,Gr=t.log,ot=t.unstable_setDisableYieldValue,fi=null,tn=null;function ue(s){if(typeof Gr=="function"&&ot(s),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(fi,s)}catch{}}var be=Math.clz32?Math.clz32:Tt,Ee=Math.log,Ye=Math.LN2;function Tt(s){return s>>>=0,s===0?32:31-(Ee(s)/Ye|0)|0}var We=256,Xe=262144,tt=4194304;function nt(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ke(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var _=0,E=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var M=h&134217727;return M!==0?(h=M&~E,h!==0?_=nt(h):(A&=M,A!==0?_=nt(A):u||(u=M&~s,u!==0&&(_=nt(u))))):(M=h&~E,M!==0?_=nt(M):A!==0?_=nt(A):u||(u=h&~s,u!==0&&(_=nt(u)))),_===0?0:a!==0&&a!==_&&(a&E)===0&&(E=_&-_,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:_}function Ge(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function cn(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ai(){var s=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),s}function Ft(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ct(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function he(s,a,u,h,_,E){var A=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,j=s.expirationTimes,X=s.hiddenUpdates;for(u=A&~u;0<u;){var oe=31-be(u),le=1<<oe;M[oe]=0,j[oe]=-1;var te=X[oe];if(te!==null)for(X[oe]=null,oe=0;oe<te.length;oe++){var ne=te[oe];ne!==null&&(ne.lane&=-536870913)}u&=~le}h!==0&&Ie(s,h,0),E!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=E&~(A&~a))}function Ie(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-be(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function ze(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-be(u),_=1<<h;_&a|s[h]&a&&(s[h]|=a),u&=~_}}function Et(s,a){var u=a&-a;return u=(u&42)!==0?1:qn(u),(u&(s.suspendedLanes|a))!==0?0:u}function qn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Rn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Nn(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:Gw(s.type))}function zi(s,a){var u=se.p;try{return se.p=s,a()}finally{se.p=u}}var hi=Math.random().toString(36).slice(2),qt="__reactFiber$"+hi,dn="__reactProps$"+hi,qi="__reactContainer$"+hi,ir="__reactEvents$"+hi,Gi="__reactListeners$"+hi,ua="__reactHandles$"+hi,wr="__reactResources$"+hi,rr="__reactMarker$"+hi;function sr(s){delete s[qt],delete s[dn],delete s[ir],delete s[Gi],delete s[ua]}function xi(s){var a=s[qt];if(a)return a;for(var u=s.parentNode;u;){if(a=u[qi]||u[qt]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Cw(s);s!==null;){if(u=s[qt])return u;s=Cw(s)}return a}s=u,u=s.parentNode}return null}function or(s){if(s=s[qt]||s[qi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Hr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function pi(s){var a=s[wr];return a||(a=s[wr]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Wt(s){s[rr]=!0}var Ar=new Set,xr={};function mi(s,a){jr(s,a),jr(s+"Capture",a)}function jr(s,a){for(xr[s]=a,s=0;s<a.length;s++)Ar.add(a[s])}var vg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ju={},$u={};function yf(s){return wi.call($u,s)?!0:wi.call(ju,s)?!1:vg.test(s)?$u[s]=!0:(ju[s]=!0,!1)}function Ys(s,a,u){if(yf(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Js(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function ar(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function gi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function vf(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _g(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,E=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return _.call(this)},set:function(A){u=""+A,E.call(this,A)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function ll(s){if(!s._valueTracker){var a=vf(s)?"checked":"value";s._valueTracker=_g(s,a,""+s[a])}}function Ku(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=vf(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function ul(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var cs=/[\n"\\]/g;function nn(s){return s.replace(cs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ws(s,a,u,h,_,E,A,M){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+gi(a)):s.value!==""+gi(a)&&(s.value=""+gi(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?cl(s,A,gi(a)):u!=null?cl(s,A,gi(u)):h!=null&&s.removeAttribute("value"),_==null&&E!=null&&(s.defaultChecked=!!E),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+gi(M):s.removeAttribute("name")}function ca(s,a,u,h,_,E,A,M){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null)){ll(s);return}u=u!=null?""+gi(u):"",a=a!=null?""+gi(a):u,M||a===s.value||(s.value=a),s.defaultValue=a}h=h??_,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=M?s.checked:!!h,s.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),ll(s)}function cl(s,a,u){a==="number"&&ul(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function mt(s,a,u,h){if(s=s.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<s.length;u++)_=a.hasOwnProperty("$"+s[u].value),s[u].selected!==_&&(s[u].selected=_),_&&h&&(s[u].defaultSelected=!0)}else{for(u=""+gi(u),a=null,_=0;_<s.length;_++){if(s[_].value===u){s[_].selected=!0,h&&(s[_].defaultSelected=!0);return}a!==null||s[_].disabled||(a=s[_])}a!==null&&(a.selected=!0)}}function da(s,a,u){if(a!=null&&(a=""+gi(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+gi(u):""}function Qs(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(De(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=gi(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),ll(s)}function lr(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Tg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yu(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||Tg.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function _f(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var _ in a)h=a[_],a.hasOwnProperty(_)&&u[_]!==h&&Yu(s,_,h)}else for(var E in a)a.hasOwnProperty(E)&&Yu(s,E,a[E])}function Ju(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(s){return Sg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ln(){}var dl=null;function fl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ds=null,Hi=null;function Tf(s){var a=or(s);if(a&&(s=a.stateNode)){var u=s[dn]||null;e:switch(s=a.stateNode,a.type){case"input":if(Ws(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+nn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var _=h[dn]||null;if(!_)throw Error(i(90));Ws(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&Ku(h)}break e;case"textarea":da(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&mt(s,!!u.multiple,a,!1)}}}var Wu=!1;function Ef(s,a,u){if(Wu)return s(a,u);Wu=!0;try{var h=s(a);return h}finally{if(Wu=!1,(ds!==null||Hi!==null)&&(yh(),ds&&(a=ds,s=Hi,Hi=ds=null,Tf(a),s)))for(a=0;a<s.length;a++)Tf(s[a])}}function Ci(s,a){var u=s.stateNode;if(u===null)return null;var h=u[dn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qu=!1;if(Cr)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Qu=!1}var ji=null,hl=null,Yr=null;function Xs(){if(Yr)return Yr;var s,a=hl,u=a.length,h,_="value"in ji?ji.value:ji.textContent,E=_.length;for(s=0;s<u&&a[s]===_[s];s++);var A=u-s;for(h=1;h<=A&&a[u-h]===_[E-h];h++);return Yr=_.slice(s,1<h?1-h:void 0)}function fa(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Zs(){return!0}function Gt(){return!1}function Xn(s){function a(u,h,_,E,A){this._reactName=u,this._targetInst=_,this.type=h,this.nativeEvent=E,this.target=A,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(E):E[M]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Zs:Gt,this.isPropagationStopped=Gt,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),a}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Xn(fs),eo=v({},fs,{view:0,detail:0}),Sf=Xn(eo),to,pl,yi,pa=v({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:io,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yi&&(yi&&s.type==="mousemove"?(to=s.screenX-yi.screenX,pl=s.screenY-yi.screenY):pl=to=0,yi=s),to)},movementY:function(s){return"movementY"in s?s.movementY:pl}}),bf=Xn(pa),ma=v({},pa,{dataTransfer:0}),wf=Xn(ma),Xu=v({},eo,{relatedTarget:0}),no=Xn(Xu),Af=v({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),ml=Xn(Af),bg=v({},fs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),xf=Xn(bg),ga=v({},fs,{data:0}),Zu=Xn(ga),Cf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function If(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=tc[s])?!!a[s]:!1}function io(){return If}var Rf=v({},eo,{key:function(s){if(s.key){var a=Cf[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=fa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ec[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:io,charCode:function(s){return s.type==="keypress"?fa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?fa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Nf=Xn(Rf),hs=v({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=Xn(hs),Pf=v({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:io}),Df=Xn(Pf),Mf=v({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),gl=Xn(Mf),vi=v({},pa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kf=Xn(vi),Vf=v({},fs,{newState:0,oldState:0}),ro=Xn(Vf),g=[9,13,27,32],w=Cr&&"CompositionEvent"in window,x=null;Cr&&"documentMode"in document&&(x=document.documentMode);var O=Cr&&"TextEvent"in window&&!x,W=Cr&&(!w||x&&8<x&&11>=x),ie=" ",ge=!1;function It(s,a){switch(s){case"keyup":return g.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vn(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ze=!1;function On(s,a){switch(s){case"compositionend":return vn(a);case"keypress":return a.which!==32?null:(ge=!0,ie);case"textInput":return s=a.data,s===ie&&ge?null:s;default:return null}}function Un(s,a){if(Ze)return s==="compositionend"||!w&&It(s,a)?(s=Xs(),Yr=hl=ji=null,Ze=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return W&&a.locale!=="ko"?null:a.data;default:return null}}var so={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ii(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!so[s.type]:a==="textarea"}function ya(s,a,u,h){ds?Hi?Hi.push(h):Hi=[h]:ds=h,a=wh(a,"onChange"),0<a.length&&(u=new ha("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var ps=null,ic=null;function Ck(s){hw(s,0)}function Lf(s){var a=Hr(s);if(Ku(a))return s}function DE(s,a){if(s==="change")return a}var ME=!1;if(Cr){var wg;if(Cr){var Ag="oninput"in document;if(!Ag){var kE=document.createElement("div");kE.setAttribute("oninput","return;"),Ag=typeof kE.oninput=="function"}wg=Ag}else wg=!1;ME=wg&&(!document.documentMode||9<document.documentMode)}function VE(){ps&&(ps.detachEvent("onpropertychange",LE),ic=ps=null)}function LE(s){if(s.propertyName==="value"&&Lf(ic)){var a=[];ya(a,ic,s,fl(s)),Ef(Ck,a)}}function Ik(s,a,u){s==="focusin"?(VE(),ps=a,ic=u,ps.attachEvent("onpropertychange",LE)):s==="focusout"&&VE()}function Rk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Lf(ic)}function Nk(s,a){if(s==="click")return Lf(a)}function Pk(s,a){if(s==="input"||s==="change")return Lf(a)}function Dk(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var $i=typeof Object.is=="function"?Object.is:Dk;function rc(s,a){if($i(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var _=u[h];if(!wi.call(a,_)||!$i(s[_],a[_]))return!1}return!0}function OE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function UE(s,a){var u=OE(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=OE(u)}}function FE(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?FE(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function BE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ul(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=ul(s.document)}return a}function xg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Mk=Cr&&"documentMode"in document&&11>=document.documentMode,yl=null,Cg=null,sc=null,Ig=!1;function zE(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ig||yl==null||yl!==ul(h)||(h=yl,"selectionStart"in h&&xg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),sc&&rc(sc,h)||(sc=h,h=wh(Cg,"onSelect"),0<h.length&&(a=new ha("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=yl)))}function va(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var vl={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},Rg={},qE={};Cr&&(qE=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function _a(s){if(Rg[s])return Rg[s];if(!vl[s])return s;var a=vl[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in qE)return Rg[s]=a[u];return s}var GE=_a("animationend"),HE=_a("animationiteration"),jE=_a("animationstart"),kk=_a("transitionrun"),Vk=_a("transitionstart"),Lk=_a("transitioncancel"),$E=_a("transitionend"),KE=new Map,Ng="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ng.push("scrollEnd");function Ir(s,a){KE.set(s,a),mi(a,[s])}var Of=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ur=[],_l=0,Pg=0;function Uf(){for(var s=_l,a=Pg=_l=0;a<s;){var u=ur[a];ur[a++]=null;var h=ur[a];ur[a++]=null;var _=ur[a];ur[a++]=null;var E=ur[a];if(ur[a++]=null,h!==null&&_!==null){var A=h.pending;A===null?_.next=_:(_.next=A.next,A.next=_),h.pending=_}E!==0&&YE(u,_,E)}}function Ff(s,a,u,h){ur[_l++]=s,ur[_l++]=a,ur[_l++]=u,ur[_l++]=h,Pg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Dg(s,a,u,h){return Ff(s,a,u,h),Bf(s)}function Ta(s,a){return Ff(s,null,null,a),Bf(s)}function YE(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var _=!1,E=s.return;E!==null;)E.childLanes|=u,h=E.alternate,h!==null&&(h.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(_=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,_&&a!==null&&(_=31-be(u),s=E.hiddenUpdates,h=s[_],h===null?s[_]=[a]:h.push(a),a.lane=u|536870912),E):null}function Bf(s){if(50<Cc)throw Cc=0,zy=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Tl={};function Ok(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(s,a,u,h){return new Ok(s,a,u,h)}function Mg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ms(s,a){var u=s.alternate;return u===null?(u=Ki(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function JE(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function zf(s,a,u,h,_,E){var A=0;if(h=s,typeof s=="function")Mg(s)&&(A=1);else if(typeof s=="string")A=qV(s,u,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Ki(31,u,a,_),s.elementType=P,s.lanes=E,s;case N:return Ea(u.children,_,E,a);case D:A=8,_|=24;break;case L:return s=Ki(12,u,a,_|2),s.elementType=L,s.lanes=E,s;case K:return s=Ki(13,u,a,_),s.elementType=K,s.lanes=E,s;case G:return s=Ki(19,u,a,_),s.elementType=G,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case U:A=10;break e;case k:A=9;break e;case H:A=11;break e;case I:A=14;break e;case R:A=16,h=null;break e}A=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Ki(A,u,a,_),a.elementType=s,a.type=h,a.lanes=E,a}function Ea(s,a,u,h){return s=Ki(7,s,h,a),s.lanes=u,s}function kg(s,a,u){return s=Ki(6,s,null,a),s.lanes=u,s}function WE(s){var a=Ki(18,null,null,0);return a.stateNode=s,a}function Vg(s,a,u){return a=Ki(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var QE=new WeakMap;function cr(s,a){if(typeof s=="object"&&s!==null){var u=QE.get(s);return u!==void 0?u:(a={value:s,source:a,stack:Ui(a)},QE.set(s,a),a)}return{value:s,source:a,stack:Ui(a)}}var El=[],Sl=0,qf=null,oc=0,dr=[],fr=0,oo=null,Jr=1,Wr="";function gs(s,a){El[Sl++]=oc,El[Sl++]=qf,qf=s,oc=a}function XE(s,a,u){dr[fr++]=Jr,dr[fr++]=Wr,dr[fr++]=oo,oo=s;var h=Jr;s=Wr;var _=32-be(h)-1;h&=~(1<<_),u+=1;var E=32-be(a)+_;if(30<E){var A=_-_%5;E=(h&(1<<A)-1).toString(32),h>>=A,_-=A,Jr=1<<32-be(a)+_|u<<_|h,Wr=E+s}else Jr=1<<E|u<<_|h,Wr=s}function Lg(s){s.return!==null&&(gs(s,1),XE(s,1,0))}function Og(s){for(;s===qf;)qf=El[--Sl],El[Sl]=null,oc=El[--Sl],El[Sl]=null;for(;s===oo;)oo=dr[--fr],dr[fr]=null,Wr=dr[--fr],dr[fr]=null,Jr=dr[--fr],dr[fr]=null}function ZE(s,a){dr[fr++]=Jr,dr[fr++]=Wr,dr[fr++]=oo,Jr=a.id,Wr=a.overflow,oo=s}var Gn=null,Ht=null,dt=!1,ao=null,hr=!1,Ug=Error(i(519));function lo(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ac(cr(a,s)),Ug}function eS(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[qt]=s,a[dn]=h,u){case"dialog":rt("cancel",a),rt("close",a);break;case"iframe":case"object":case"embed":rt("load",a);break;case"video":case"audio":for(u=0;u<Rc.length;u++)rt(Rc[u],a);break;case"source":rt("error",a);break;case"img":case"image":case"link":rt("error",a),rt("load",a);break;case"details":rt("toggle",a);break;case"input":rt("invalid",a),ca(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":rt("invalid",a);break;case"textarea":rt("invalid",a),Qs(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||yw(a.textContent,u)?(h.popover!=null&&(rt("beforetoggle",a),rt("toggle",a)),h.onScroll!=null&&rt("scroll",a),h.onScrollEnd!=null&&rt("scrollend",a),h.onClick!=null&&(a.onclick=Ln),a=!0):a=!1,a||lo(s,!0)}function tS(s){for(Gn=s.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:Gn=Gn.return}}function bl(s){if(s!==Gn)return!1;if(!dt)return tS(s),dt=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||nv(s.type,s.memoizedProps)),u=!u),u&&Ht&&lo(s),tS(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ht=xw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ht=xw(s)}else a===27?(a=Ht,bo(s.type)?(s=av,av=null,Ht=s):Ht=a):Ht=Gn?mr(s.stateNode.nextSibling):null;return!0}function Sa(){Ht=Gn=null,dt=!1}function Fg(){var s=ao;return s!==null&&(Di===null?Di=s:Di.push.apply(Di,s),ao=null),s}function ac(s){ao===null?ao=[s]:ao.push(s)}var Bg=$(null),ba=null,ys=null;function uo(s,a,u){pe(Bg,a._currentValue),a._currentValue=u}function vs(s){s._currentValue=Bg.current,Z(Bg)}function zg(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function qg(s,a,u,h){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var E=_.dependencies;if(E!==null){var A=_.child;E=E.firstContext;e:for(;E!==null;){var M=E;E=_;for(var j=0;j<a.length;j++)if(M.context===a[j]){E.lanes|=u,M=E.alternate,M!==null&&(M.lanes|=u),zg(E.return,u,s),h||(A=null);break e}E=M.next}}else if(_.tag===18){if(A=_.return,A===null)throw Error(i(341));A.lanes|=u,E=A.alternate,E!==null&&(E.lanes|=u),zg(A,u,s),A=null}else A=_.child;if(A!==null)A.return=_;else for(A=_;A!==null;){if(A===s){A=null;break}if(_=A.sibling,_!==null){_.return=A.return,A=_;break}A=A.return}_=A}}function wl(s,a,u,h){s=null;for(var _=a,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var A=_.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var M=_.type;$i(_.pendingProps.value,A.value)||(s!==null?s.push(M):s=[M])}}else if(_===Ve.current){if(A=_.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(kc):s=[kc])}_=_.return}s!==null&&qg(a,s,u,h),a.flags|=262144}function Gf(s){for(s=s.firstContext;s!==null;){if(!$i(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function wa(s){ba=s,ys=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Hn(s){return nS(ba,s)}function Hf(s,a){return ba===null&&wa(s),nS(s,a)}function nS(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ys===null){if(s===null)throw Error(i(308));ys=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ys=ys.next=a;return u}var Uk=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},Fk=t.unstable_scheduleCallback,Bk=t.unstable_NormalPriority,_n={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gg(){return{controller:new Uk,data:new Map,refCount:0}}function lc(s){s.refCount--,s.refCount===0&&Fk(Bk,function(){s.controller.abort()})}var uc=null,Hg=0,Al=0,xl=null;function zk(s,a){if(uc===null){var u=uc=[];Hg=0,Al=Ky(),xl={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Hg++,a.then(iS,iS),a}function iS(){if(--Hg===0&&uc!==null){xl!==null&&(xl.status="fulfilled");var s=uc;uc=null,Al=0,xl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function qk(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(h.status="rejected",h.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),h}var rS=ee.S;ee.S=function(s,a){zb=wt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&zk(s,a),rS!==null&&rS(s,a)};var Aa=$(null);function jg(){var s=Aa.current;return s!==null?s:Ot.pooledCache}function jf(s,a){a===null?pe(Aa,Aa.current):pe(Aa,a.pool)}function sS(){var s=jg();return s===null?null:{parent:_n._currentValue,pool:s}}var Cl=Error(i(460)),$g=Error(i(474)),$f=Error(i(542)),Kf={then:function(){}};function oS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function aS(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Ln,Ln),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,uS(s),s;default:if(typeof a.status=="string")a.then(Ln,Ln);else{if(s=Ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=h}},function(h){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,uS(s),s}throw Ca=a,Cl}}function xa(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ca=u,Cl):u}}var Ca=null;function lS(){if(Ca===null)throw Error(i(459));var s=Ca;return Ca=null,s}function uS(s){if(s===Cl||s===$f)throw Error(i(483))}var Il=null,cc=0;function Yf(s){var a=cc;return cc+=1,Il===null&&(Il=[]),aS(Il,s,a)}function dc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Jf(s,a){throw a.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function cS(s){function a(J,Y){if(s){var Q=J.deletions;Q===null?(J.deletions=[Y],J.flags|=16):Q.push(Y)}}function u(J,Y){if(!s)return null;for(;Y!==null;)a(J,Y),Y=Y.sibling;return null}function h(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function _(J,Y){return J=ms(J,Y),J.index=0,J.sibling=null,J}function E(J,Y,Q){return J.index=Q,s?(Q=J.alternate,Q!==null?(Q=Q.index,Q<Y?(J.flags|=67108866,Y):Q):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function A(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function M(J,Y,Q,ae){return Y===null||Y.tag!==6?(Y=kg(Q,J.mode,ae),Y.return=J,Y):(Y=_(Y,Q),Y.return=J,Y)}function j(J,Y,Q,ae){var Ne=Q.type;return Ne===N?oe(J,Y,Q.props.children,ae,Q.key):Y!==null&&(Y.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===R&&xa(Ne)===Y.type)?(Y=_(Y,Q.props),dc(Y,Q),Y.return=J,Y):(Y=zf(Q.type,Q.key,Q.props,null,J.mode,ae),dc(Y,Q),Y.return=J,Y)}function X(J,Y,Q,ae){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Q.containerInfo||Y.stateNode.implementation!==Q.implementation?(Y=Vg(Q,J.mode,ae),Y.return=J,Y):(Y=_(Y,Q.children||[]),Y.return=J,Y)}function oe(J,Y,Q,ae,Ne){return Y===null||Y.tag!==7?(Y=Ea(Q,J.mode,ae,Ne),Y.return=J,Y):(Y=_(Y,Q),Y.return=J,Y)}function le(J,Y,Q){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=kg(""+Y,J.mode,Q),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return Q=zf(Y.type,Y.key,Y.props,null,J.mode,Q),dc(Q,Y),Q.return=J,Q;case C:return Y=Vg(Y,J.mode,Q),Y.return=J,Y;case R:return Y=xa(Y),le(J,Y,Q)}if(De(Y)||q(Y))return Y=Ea(Y,J.mode,Q,null),Y.return=J,Y;if(typeof Y.then=="function")return le(J,Yf(Y),Q);if(Y.$$typeof===U)return le(J,Hf(J,Y),Q);Jf(J,Y)}return null}function te(J,Y,Q,ae){var Ne=Y!==null?Y.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ne!==null?null:M(J,Y,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Q.key===Ne?j(J,Y,Q,ae):null;case C:return Q.key===Ne?X(J,Y,Q,ae):null;case R:return Q=xa(Q),te(J,Y,Q,ae)}if(De(Q)||q(Q))return Ne!==null?null:oe(J,Y,Q,ae,null);if(typeof Q.then=="function")return te(J,Y,Yf(Q),ae);if(Q.$$typeof===U)return te(J,Y,Hf(J,Q),ae);Jf(J,Q)}return null}function ne(J,Y,Q,ae,Ne){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return J=J.get(Q)||null,M(Y,J,""+ae,Ne);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case b:return J=J.get(ae.key===null?Q:ae.key)||null,j(Y,J,ae,Ne);case C:return J=J.get(ae.key===null?Q:ae.key)||null,X(Y,J,ae,Ne);case R:return ae=xa(ae),ne(J,Y,Q,ae,Ne)}if(De(ae)||q(ae))return J=J.get(Q)||null,oe(Y,J,ae,Ne,null);if(typeof ae.then=="function")return ne(J,Y,Q,Yf(ae),Ne);if(ae.$$typeof===U)return ne(J,Y,Q,Hf(Y,ae),Ne);Jf(Y,ae)}return null}function we(J,Y,Q,ae){for(var Ne=null,gt=null,Re=Y,Qe=Y=0,lt=null;Re!==null&&Qe<Q.length;Qe++){Re.index>Qe?(lt=Re,Re=null):lt=Re.sibling;var yt=te(J,Re,Q[Qe],ae);if(yt===null){Re===null&&(Re=lt);break}s&&Re&&yt.alternate===null&&a(J,Re),Y=E(yt,Y,Qe),gt===null?Ne=yt:gt.sibling=yt,gt=yt,Re=lt}if(Qe===Q.length)return u(J,Re),dt&&gs(J,Qe),Ne;if(Re===null){for(;Qe<Q.length;Qe++)Re=le(J,Q[Qe],ae),Re!==null&&(Y=E(Re,Y,Qe),gt===null?Ne=Re:gt.sibling=Re,gt=Re);return dt&&gs(J,Qe),Ne}for(Re=h(Re);Qe<Q.length;Qe++)lt=ne(Re,J,Qe,Q[Qe],ae),lt!==null&&(s&&lt.alternate!==null&&Re.delete(lt.key===null?Qe:lt.key),Y=E(lt,Y,Qe),gt===null?Ne=lt:gt.sibling=lt,gt=lt);return s&&Re.forEach(function(Io){return a(J,Io)}),dt&&gs(J,Qe),Ne}function Oe(J,Y,Q,ae){if(Q==null)throw Error(i(151));for(var Ne=null,gt=null,Re=Y,Qe=Y=0,lt=null,yt=Q.next();Re!==null&&!yt.done;Qe++,yt=Q.next()){Re.index>Qe?(lt=Re,Re=null):lt=Re.sibling;var Io=te(J,Re,yt.value,ae);if(Io===null){Re===null&&(Re=lt);break}s&&Re&&Io.alternate===null&&a(J,Re),Y=E(Io,Y,Qe),gt===null?Ne=Io:gt.sibling=Io,gt=Io,Re=lt}if(yt.done)return u(J,Re),dt&&gs(J,Qe),Ne;if(Re===null){for(;!yt.done;Qe++,yt=Q.next())yt=le(J,yt.value,ae),yt!==null&&(Y=E(yt,Y,Qe),gt===null?Ne=yt:gt.sibling=yt,gt=yt);return dt&&gs(J,Qe),Ne}for(Re=h(Re);!yt.done;Qe++,yt=Q.next())yt=ne(Re,J,Qe,yt.value,ae),yt!==null&&(s&&yt.alternate!==null&&Re.delete(yt.key===null?Qe:yt.key),Y=E(yt,Y,Qe),gt===null?Ne=yt:gt.sibling=yt,gt=yt);return s&&Re.forEach(function(ZV){return a(J,ZV)}),dt&&gs(J,Qe),Ne}function Vt(J,Y,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===N&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:e:{for(var Ne=Q.key;Y!==null;){if(Y.key===Ne){if(Ne=Q.type,Ne===N){if(Y.tag===7){u(J,Y.sibling),ae=_(Y,Q.props.children),ae.return=J,J=ae;break e}}else if(Y.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===R&&xa(Ne)===Y.type){u(J,Y.sibling),ae=_(Y,Q.props),dc(ae,Q),ae.return=J,J=ae;break e}u(J,Y);break}else a(J,Y);Y=Y.sibling}Q.type===N?(ae=Ea(Q.props.children,J.mode,ae,Q.key),ae.return=J,J=ae):(ae=zf(Q.type,Q.key,Q.props,null,J.mode,ae),dc(ae,Q),ae.return=J,J=ae)}return A(J);case C:e:{for(Ne=Q.key;Y!==null;){if(Y.key===Ne)if(Y.tag===4&&Y.stateNode.containerInfo===Q.containerInfo&&Y.stateNode.implementation===Q.implementation){u(J,Y.sibling),ae=_(Y,Q.children||[]),ae.return=J,J=ae;break e}else{u(J,Y);break}else a(J,Y);Y=Y.sibling}ae=Vg(Q,J.mode,ae),ae.return=J,J=ae}return A(J);case R:return Q=xa(Q),Vt(J,Y,Q,ae)}if(De(Q))return we(J,Y,Q,ae);if(q(Q)){if(Ne=q(Q),typeof Ne!="function")throw Error(i(150));return Q=Ne.call(Q),Oe(J,Y,Q,ae)}if(typeof Q.then=="function")return Vt(J,Y,Yf(Q),ae);if(Q.$$typeof===U)return Vt(J,Y,Hf(J,Q),ae);Jf(J,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,Y!==null&&Y.tag===6?(u(J,Y.sibling),ae=_(Y,Q),ae.return=J,J=ae):(u(J,Y),ae=kg(Q,J.mode,ae),ae.return=J,J=ae),A(J)):u(J,Y)}return function(J,Y,Q,ae){try{cc=0;var Ne=Vt(J,Y,Q,ae);return Il=null,Ne}catch(Re){if(Re===Cl||Re===$f)throw Re;var gt=Ki(29,Re,null,J.mode);return gt.lanes=ae,gt.return=J,gt}finally{}}}var Ia=cS(!0),dS=cS(!1),co=!1;function Kg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function fo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ho(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(St&2)!==0){var _=h.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),h.pending=a,a=Bf(s),YE(s,null,u),a}return Ff(s,h,a,u),Bf(s)}function fc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,ze(s,u)}}function Jg(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var _=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?_=E=A:E=E.next=A,u=u.next}while(u!==null);E===null?_=E=a:E=E.next=a}else _=E=a;u={baseState:h.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Wg=!1;function hc(){if(Wg){var s=xl;if(s!==null)throw s}}function pc(s,a,u,h){Wg=!1;var _=s.updateQueue;co=!1;var E=_.firstBaseUpdate,A=_.lastBaseUpdate,M=_.shared.pending;if(M!==null){_.shared.pending=null;var j=M,X=j.next;j.next=null,A===null?E=X:A.next=X,A=j;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==A&&(M===null?oe.firstBaseUpdate=X:M.next=X,oe.lastBaseUpdate=j))}if(E!==null){var le=_.baseState;A=0,oe=X=j=null,M=E;do{var te=M.lane&-536870913,ne=te!==M.lane;if(ne?(at&te)===te:(h&te)===te){te!==0&&te===Al&&(Wg=!0),oe!==null&&(oe=oe.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var we=s,Oe=M;te=a;var Vt=u;switch(Oe.tag){case 1:if(we=Oe.payload,typeof we=="function"){le=we.call(Vt,le,te);break e}le=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Oe.payload,te=typeof we=="function"?we.call(Vt,le,te):we,te==null)break e;le=v({},le,te);break e;case 2:co=!0}}te=M.callback,te!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=_.callbacks,ne===null?_.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?(X=oe=ne,j=le):oe=oe.next=ne,A|=te;if(M=M.next,M===null){if(M=_.shared.pending,M===null)break;ne=M,M=ne.next,ne.next=null,_.lastBaseUpdate=ne,_.shared.pending=null}}while(!0);oe===null&&(j=le),_.baseState=j,_.firstBaseUpdate=X,_.lastBaseUpdate=oe,E===null&&(_.shared.lanes=0),vo|=A,s.lanes=A,s.memoizedState=le}}function fS(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function hS(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)fS(u[s],a)}var Rl=$(null),Wf=$(0);function pS(s,a){s=Cs,pe(Wf,s),pe(Rl,a),Cs=s|a.baseLanes}function Qg(){pe(Wf,Cs),pe(Rl,Rl.current)}function Xg(){Cs=Wf.current,Z(Rl),Z(Wf)}var Yi=$(null),pr=null;function po(s){var a=s.alternate;pe(fn,fn.current&1),pe(Yi,s),pr===null&&(a===null||Rl.current!==null||a.memoizedState!==null)&&(pr=s)}function Zg(s){pe(fn,fn.current),pe(Yi,s),pr===null&&(pr=s)}function mS(s){s.tag===22?(pe(fn,fn.current),pe(Yi,s),pr===null&&(pr=s)):mo()}function mo(){pe(fn,fn.current),pe(Yi,Yi.current)}function Ji(s){Z(Yi),pr===s&&(pr=null),Z(fn)}var fn=$(0);function Qf(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||sv(u)||ov(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var _s=0,Je=null,Mt=null,Tn=null,Xf=!1,Nl=!1,Ra=!1,Zf=0,mc=0,Pl=null,Gk=0;function rn(){throw Error(i(321))}function ey(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!$i(s[u],a[u]))return!1;return!0}function ty(s,a,u,h,_,E){return _s=E,Je=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ee.H=s===null||s.memoizedState===null?XS:gy,Ra=!1,E=u(h,_),Ra=!1,Nl&&(E=yS(a,u,h,_)),gS(s),E}function gS(s){ee.H=vc;var a=Mt!==null&&Mt.next!==null;if(_s=0,Tn=Mt=Je=null,Xf=!1,mc=0,Pl=null,a)throw Error(i(300));s===null||En||(s=s.dependencies,s!==null&&Gf(s)&&(En=!0))}function yS(s,a,u,h){Je=s;var _=0;do{if(Nl&&(Pl=null),mc=0,Nl=!1,25<=_)throw Error(i(301));if(_+=1,Tn=Mt=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}ee.H=ZS,E=a(u,h)}while(Nl);return E}function Hk(){var s=ee.H,a=s.useState()[0];return a=typeof a.then=="function"?gc(a):a,s=s.useState()[0],(Mt!==null?Mt.memoizedState:null)!==s&&(Je.flags|=1024),a}function ny(){var s=Zf!==0;return Zf=0,s}function iy(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function ry(s){if(Xf){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Xf=!1}_s=0,Tn=Mt=Je=null,Nl=!1,mc=Zf=0,Pl=null}function _i(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Je.memoizedState=Tn=s:Tn=Tn.next=s,Tn}function hn(){if(Mt===null){var s=Je.alternate;s=s!==null?s.memoizedState:null}else s=Mt.next;var a=Tn===null?Je.memoizedState:Tn.next;if(a!==null)Tn=a,Mt=s;else{if(s===null)throw Je.alternate===null?Error(i(467)):Error(i(310));Mt=s,s={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Tn===null?Je.memoizedState=Tn=s:Tn=Tn.next=s}return Tn}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gc(s){var a=mc;return mc+=1,Pl===null&&(Pl=[]),s=aS(Pl,s,a),a=Je,(Tn===null?a.memoizedState:Tn.next)===null&&(a=a.alternate,ee.H=a===null||a.memoizedState===null?XS:gy),s}function th(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return gc(s);if(s.$$typeof===U)return Hn(s)}throw Error(i(438,String(s)))}function sy(s){var a=null,u=Je.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=Je.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=eh(),Je.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=V;return a.index++,u}function Ts(s,a){return typeof a=="function"?a(s):a}function nh(s){var a=hn();return oy(a,Mt,s)}function oy(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var _=s.baseQueue,E=h.pending;if(E!==null){if(_!==null){var A=_.next;_.next=E.next,E.next=A}a.baseQueue=_=E,h.pending=null}if(E=s.baseState,_===null)s.memoizedState=E;else{a=_.next;var M=A=null,j=null,X=a,oe=!1;do{var le=X.lane&-536870913;if(le!==X.lane?(at&le)===le:(_s&le)===le){var te=X.revertLane;if(te===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),le===Al&&(oe=!0);else if((_s&te)===te){X=X.next,te===Al&&(oe=!0);continue}else le={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(M=j=le,A=E):j=j.next=le,Je.lanes|=te,vo|=te;le=X.action,Ra&&u(E,le),E=X.hasEagerState?X.eagerState:u(E,le)}else te={lane:le,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(M=j=te,A=E):j=j.next=te,Je.lanes|=le,vo|=le;X=X.next}while(X!==null&&X!==a);if(j===null?A=E:j.next=M,!$i(E,s.memoizedState)&&(En=!0,oe&&(u=xl,u!==null)))throw u;s.memoizedState=E,s.baseState=A,s.baseQueue=j,h.lastRenderedState=E}return _===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function ay(s){var a=hn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,_=u.pending,E=a.memoizedState;if(_!==null){u.pending=null;var A=_=_.next;do E=s(E,A.action),A=A.next;while(A!==_);$i(E,a.memoizedState)||(En=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,h]}function vS(s,a,u){var h=Je,_=hn(),E=dt;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=a();var A=!$i((Mt||_).memoizedState,u);if(A&&(_.memoizedState=u,En=!0),_=_.queue,cy(ES.bind(null,h,_,s),[s]),_.getSnapshot!==a||A||Tn!==null&&Tn.memoizedState.tag&1){if(h.flags|=2048,Dl(9,{destroy:void 0},TS.bind(null,h,_,u,a),null),Ot===null)throw Error(i(349));E||(_s&127)!==0||_S(h,a,u)}return u}function _S(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Je.updateQueue,a===null?(a=eh(),Je.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function TS(s,a,u,h){a.value=u,a.getSnapshot=h,SS(a)&&bS(s)}function ES(s,a,u){return u(function(){SS(a)&&bS(s)})}function SS(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!$i(s,u)}catch{return!0}}function bS(s){var a=Ta(s,2);a!==null&&Mi(a,s,2)}function ly(s){var a=_i();if(typeof s=="function"){var u=s;if(s=u(),Ra){ue(!0);try{u()}finally{ue(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:s},a}function wS(s,a,u,h){return s.baseState=u,oy(s,Mt,typeof h=="function"?h:Ts)}function jk(s,a,u,h,_){if(sh(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){E.listeners.push(A)}};ee.T!==null?u(!0):E.isTransition=!1,h(E),u=a.pending,u===null?(E.next=a.pending=E,AS(a,E)):(E.next=u.next,a.pending=u.next=E)}}function AS(s,a){var u=a.action,h=a.payload,_=s.state;if(a.isTransition){var E=ee.T,A={};ee.T=A;try{var M=u(_,h),j=ee.S;j!==null&&j(A,M),xS(s,a,M)}catch(X){uy(s,a,X)}finally{E!==null&&A.types!==null&&(E.types=A.types),ee.T=E}}else try{E=u(_,h),xS(s,a,E)}catch(X){uy(s,a,X)}}function xS(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){CS(s,a,h)},function(h){return uy(s,a,h)}):CS(s,a,u)}function CS(s,a,u){a.status="fulfilled",a.value=u,IS(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,AS(s,u)))}function uy(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,IS(a),a=a.next;while(a!==h)}s.action=null}function IS(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function RS(s,a){return a}function NS(s,a){if(dt){var u=Ot.formState;if(u!==null){e:{var h=Je;if(dt){if(Ht){t:{for(var _=Ht,E=hr;_.nodeType!==8;){if(!E){_=null;break t}if(_=mr(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){Ht=mr(_.nextSibling),h=_.data==="F!";break e}}lo(h)}h=!1}h&&(a=u[0])}}return u=_i(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:RS,lastRenderedState:a},u.queue=h,u=JS.bind(null,Je,h),h.dispatch=u,h=ly(!1),E=my.bind(null,Je,!1,h.queue),h=_i(),_={state:a,dispatch:null,action:s,pending:null},h.queue=_,u=jk.bind(null,Je,_,E,u),_.dispatch=u,h.memoizedState=s,[a,u,!1]}function PS(s){var a=hn();return DS(a,Mt,s)}function DS(s,a,u){if(a=oy(s,a,RS)[0],s=nh(Ts)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=gc(a)}catch(A){throw A===Cl?$f:A}else h=a;a=hn();var _=a.queue,E=_.dispatch;return u!==a.memoizedState&&(Je.flags|=2048,Dl(9,{destroy:void 0},$k.bind(null,_,u),null)),[h,E,s]}function $k(s,a){s.action=a}function MS(s){var a=hn(),u=Mt;if(u!==null)return DS(a,u,s);hn(),a=a.memoizedState,u=hn();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function Dl(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=Je.updateQueue,a===null&&(a=eh(),Je.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function kS(){return hn().memoizedState}function ih(s,a,u,h){var _=_i();Je.flags|=s,_.memoizedState=Dl(1|a,{destroy:void 0},u,h===void 0?null:h)}function rh(s,a,u,h){var _=hn();h=h===void 0?null:h;var E=_.memoizedState.inst;Mt!==null&&h!==null&&ey(h,Mt.memoizedState.deps)?_.memoizedState=Dl(a,E,u,h):(Je.flags|=s,_.memoizedState=Dl(1|a,E,u,h))}function VS(s,a){ih(8390656,8,s,a)}function cy(s,a){rh(2048,8,s,a)}function Kk(s){Je.flags|=4;var a=Je.updateQueue;if(a===null)a=eh(),Je.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function LS(s){var a=hn().memoizedState;return Kk({ref:a,nextImpl:s}),function(){if((St&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function OS(s,a){return rh(4,2,s,a)}function US(s,a){return rh(4,4,s,a)}function FS(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function BS(s,a,u){u=u!=null?u.concat([s]):null,rh(4,4,FS.bind(null,a,s),u)}function dy(){}function zS(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&ey(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function qS(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&ey(a,h[1]))return h[0];if(h=s(),Ra){ue(!0);try{s()}finally{ue(!1)}}return u.memoizedState=[h,a],h}function fy(s,a,u){return u===void 0||(_s&1073741824)!==0&&(at&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=Gb(),Je.lanes|=s,vo|=s,u)}function GS(s,a,u,h){return $i(u,a)?u:Rl.current!==null?(s=fy(s,u,h),$i(s,a)||(En=!0),s):(_s&42)===0||(_s&1073741824)!==0&&(at&261930)===0?(En=!0,s.memoizedState=u):(s=Gb(),Je.lanes|=s,vo|=s,a)}function HS(s,a,u,h,_){var E=se.p;se.p=E!==0&&8>E?E:8;var A=ee.T,M={};ee.T=M,my(s,!1,a,u);try{var j=_(),X=ee.S;if(X!==null&&X(M,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var oe=qk(j,h);yc(s,a,oe,Xi(s))}else yc(s,a,h,Xi(s))}catch(le){yc(s,a,{then:function(){},status:"rejected",reason:le},Xi())}finally{se.p=E,A!==null&&M.types!==null&&(A.types=M.types),ee.T=A}}function Yk(){}function hy(s,a,u,h){if(s.tag!==5)throw Error(i(476));var _=jS(s).queue;HS(s,_,a,me,u===null?Yk:function(){return $S(s),u(h)})}function jS(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:me},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function $S(s){var a=jS(s);a.next===null&&(a=s.alternate.memoizedState),yc(s,a.next.queue,{},Xi())}function py(){return Hn(kc)}function KS(){return hn().memoizedState}function YS(){return hn().memoizedState}function Jk(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Xi();s=fo(u);var h=ho(a,s,u);h!==null&&(Mi(h,a,u),fc(h,a,u)),a={cache:Gg()},s.payload=a;return}a=a.return}}function Wk(s,a,u){var h=Xi();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},sh(s)?WS(a,u):(u=Dg(s,a,u,h),u!==null&&(Mi(u,s,h),QS(u,a,h)))}function JS(s,a,u){var h=Xi();yc(s,a,u,h)}function yc(s,a,u,h){var _={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(sh(s))WS(a,_);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var A=a.lastRenderedState,M=E(A,u);if(_.hasEagerState=!0,_.eagerState=M,$i(M,A))return Ff(s,a,_,0),Ot===null&&Uf(),!1}catch{}finally{}if(u=Dg(s,a,_,h),u!==null)return Mi(u,s,h),QS(u,a,h),!0}return!1}function my(s,a,u,h){if(h={lane:2,revertLane:Ky(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},sh(s)){if(a)throw Error(i(479))}else a=Dg(s,u,h,2),a!==null&&Mi(a,s,2)}function sh(s){var a=s.alternate;return s===Je||a!==null&&a===Je}function WS(s,a){Nl=Xf=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function QS(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,ze(s,u)}}var vc={readContext:Hn,use:th,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};vc.useEffectEvent=rn;var XS={readContext:Hn,use:th,useCallback:function(s,a){return _i().memoizedState=[s,a===void 0?null:a],s},useContext:Hn,useEffect:VS,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,ih(4194308,4,FS.bind(null,a,s),u)},useLayoutEffect:function(s,a){return ih(4194308,4,s,a)},useInsertionEffect:function(s,a){ih(4,2,s,a)},useMemo:function(s,a){var u=_i();a=a===void 0?null:a;var h=s();if(Ra){ue(!0);try{s()}finally{ue(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=_i();if(u!==void 0){var _=u(a);if(Ra){ue(!0);try{u(a)}finally{ue(!1)}}}else _=a;return h.memoizedState=h.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},h.queue=s,s=s.dispatch=Wk.bind(null,Je,s),[h.memoizedState,s]},useRef:function(s){var a=_i();return s={current:s},a.memoizedState=s},useState:function(s){s=ly(s);var a=s.queue,u=JS.bind(null,Je,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:dy,useDeferredValue:function(s,a){var u=_i();return fy(u,s,a)},useTransition:function(){var s=ly(!1);return s=HS.bind(null,Je,s.queue,!0,!1),_i().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=Je,_=_i();if(dt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),Ot===null)throw Error(i(349));(at&127)!==0||_S(h,a,u)}_.memoizedState=u;var E={value:u,getSnapshot:a};return _.queue=E,VS(ES.bind(null,h,E,s),[s]),h.flags|=2048,Dl(9,{destroy:void 0},TS.bind(null,h,E,u,a),null),u},useId:function(){var s=_i(),a=Ot.identifierPrefix;if(dt){var u=Wr,h=Jr;u=(h&~(1<<32-be(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Zf++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Gk++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:py,useFormState:NS,useActionState:NS,useOptimistic:function(s){var a=_i();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=my.bind(null,Je,!0,u),u.dispatch=a,[s,a]},useMemoCache:sy,useCacheRefresh:function(){return _i().memoizedState=Jk.bind(null,Je)},useEffectEvent:function(s){var a=_i(),u={impl:s};return a.memoizedState=u,function(){if((St&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},gy={readContext:Hn,use:th,useCallback:zS,useContext:Hn,useEffect:cy,useImperativeHandle:BS,useInsertionEffect:OS,useLayoutEffect:US,useMemo:qS,useReducer:nh,useRef:kS,useState:function(){return nh(Ts)},useDebugValue:dy,useDeferredValue:function(s,a){var u=hn();return GS(u,Mt.memoizedState,s,a)},useTransition:function(){var s=nh(Ts)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:gc(s),a]},useSyncExternalStore:vS,useId:KS,useHostTransitionStatus:py,useFormState:PS,useActionState:PS,useOptimistic:function(s,a){var u=hn();return wS(u,Mt,s,a)},useMemoCache:sy,useCacheRefresh:YS};gy.useEffectEvent=LS;var ZS={readContext:Hn,use:th,useCallback:zS,useContext:Hn,useEffect:cy,useImperativeHandle:BS,useInsertionEffect:OS,useLayoutEffect:US,useMemo:qS,useReducer:ay,useRef:kS,useState:function(){return ay(Ts)},useDebugValue:dy,useDeferredValue:function(s,a){var u=hn();return Mt===null?fy(u,s,a):GS(u,Mt.memoizedState,s,a)},useTransition:function(){var s=ay(Ts)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:gc(s),a]},useSyncExternalStore:vS,useId:KS,useHostTransitionStatus:py,useFormState:MS,useActionState:MS,useOptimistic:function(s,a){var u=hn();return Mt!==null?wS(u,Mt,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:sy,useCacheRefresh:YS};ZS.useEffectEvent=LS;function yy(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:v({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var vy={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Xi(),_=fo(h);_.payload=a,u!=null&&(_.callback=u),a=ho(s,_,h),a!==null&&(Mi(a,s,h),fc(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Xi(),_=fo(h);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=ho(s,_,h),a!==null&&(Mi(a,s,h),fc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Xi(),h=fo(u);h.tag=2,a!=null&&(h.callback=a),a=ho(s,h,u),a!==null&&(Mi(a,s,u),fc(a,s,u))}};function eb(s,a,u,h,_,E,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,E,A):a.prototype&&a.prototype.isPureReactComponent?!rc(u,h)||!rc(_,E):!0}function tb(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&vy.enqueueReplaceState(a,a.state,null)}function Na(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=v({},u));for(var _ in s)u[_]===void 0&&(u[_]=s[_])}return u}function nb(s){Of(s)}function ib(s){console.error(s)}function rb(s){Of(s)}function oh(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function sb(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function _y(s,a,u){return u=fo(u),u.tag=3,u.payload={element:null},u.callback=function(){oh(s,a)},u}function ob(s){return s=fo(s),s.tag=3,s}function ab(s,a,u,h){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var E=h.value;s.payload=function(){return _(E)},s.callback=function(){sb(a,u,h)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){sb(a,u,h),typeof _!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function Qk(s,a,u,h,_){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&wl(a,u,_,!0),u=Yi.current,u!==null){switch(u.tag){case 31:case 13:return pr===null?vh():u.alternate===null&&sn===0&&(sn=3),u.flags&=-257,u.flags|=65536,u.lanes=_,h===Kf?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),Hy(s,h,_)),!1;case 22:return u.flags|=65536,h===Kf?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),Hy(s,h,_)),!1}throw Error(i(435,u.tag))}return Hy(s,h,_),vh(),!1}if(dt)return a=Yi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,h!==Ug&&(s=Error(i(422),{cause:h}),ac(cr(s,u)))):(h!==Ug&&(a=Error(i(423),{cause:h}),ac(cr(a,u))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,h=cr(h,u),_=_y(s.stateNode,h,_),Jg(s,_),sn!==4&&(sn=2)),!1;var E=Error(i(520),{cause:h});if(E=cr(E,u),xc===null?xc=[E]:xc.push(E),sn!==4&&(sn=2),a===null)return!0;h=cr(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=_&-_,u.lanes|=s,s=_y(u.stateNode,h,s),Jg(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(_o===null||!_o.has(E))))return u.flags|=65536,_&=-_,u.lanes|=_,_=ob(_),ab(_,s,u,h),Jg(u,_),!1}u=u.return}while(u!==null);return!1}var Ty=Error(i(461)),En=!1;function jn(s,a,u,h){a.child=s===null?dS(a,null,u,h):Ia(a,s.child,u,h)}function lb(s,a,u,h,_){u=u.render;var E=a.ref;if("ref"in h){var A={};for(var M in h)M!=="ref"&&(A[M]=h[M])}else A=h;return wa(a),h=ty(s,a,u,A,E,_),M=ny(),s!==null&&!En?(iy(s,a,_),Es(s,a,_)):(dt&&M&&Lg(a),a.flags|=1,jn(s,a,h,_),a.child)}function ub(s,a,u,h,_){if(s===null){var E=u.type;return typeof E=="function"&&!Mg(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,cb(s,a,E,h,_)):(s=zf(u.type,null,h,a,a.mode,_),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!Iy(s,_)){var A=E.memoizedProps;if(u=u.compare,u=u!==null?u:rc,u(A,h)&&s.ref===a.ref)return Es(s,a,_)}return a.flags|=1,s=ms(E,h),s.ref=a.ref,s.return=a,a.child=s}function cb(s,a,u,h,_){if(s!==null){var E=s.memoizedProps;if(rc(E,h)&&s.ref===a.ref)if(En=!1,a.pendingProps=h=E,Iy(s,_))(s.flags&131072)!==0&&(En=!0);else return a.lanes=s.lanes,Es(s,a,_)}return Ey(s,a,u,h,_)}function db(s,a,u,h){var _=h.children,E=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(h=a.child=s.child,_=0;h!==null;)_=_|h.lanes|h.childLanes,h=h.sibling;h=_&~E}else h=0,a.child=null;return fb(s,a,E,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&jf(a,E!==null?E.cachePool:null),E!==null?pS(a,E):Qg(),mS(a);else return h=a.lanes=536870912,fb(s,a,E!==null?E.baseLanes|u:u,u,h)}else E!==null?(jf(a,E.cachePool),pS(a,E),mo(),a.memoizedState=null):(s!==null&&jf(a,null),Qg(),mo());return jn(s,a,_,u),a.child}function _c(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function fb(s,a,u,h,_){var E=jg();return E=E===null?null:{parent:_n._currentValue,pool:E},a.memoizedState={baseLanes:u,cachePool:E},s!==null&&jf(a,null),Qg(),mS(a),s!==null&&wl(s,a,h,!0),a.childLanes=_,null}function ah(s,a){return a=uh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function hb(s,a,u){return Ia(a,s.child,null,u),s=ah(a,a.pendingProps),s.flags|=2,Ji(a),a.memoizedState=null,s}function Xk(s,a,u){var h=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(dt){if(h.mode==="hidden")return s=ah(a,h),a.lanes=536870912,_c(null,s);if(Zg(a),(s=Ht)?(s=Aw(s,hr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:oo!==null?{id:Jr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},u=WE(s),u.return=a,a.child=u,Gn=a,Ht=null)):s=null,s===null)throw lo(a);return a.lanes=536870912,null}return ah(a,h)}var E=s.memoizedState;if(E!==null){var A=E.dehydrated;if(Zg(a),_)if(a.flags&256)a.flags&=-257,a=hb(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(En||wl(s,a,u,!1),_=(u&s.childLanes)!==0,En||_){if(h=Ot,h!==null&&(A=Et(h,u),A!==0&&A!==E.retryLane))throw E.retryLane=A,Ta(s,A),Mi(h,s,A),Ty;vh(),a=hb(s,a,u)}else s=E.treeContext,Ht=mr(A.nextSibling),Gn=a,dt=!0,ao=null,hr=!1,s!==null&&ZE(a,s),a=ah(a,h),a.flags|=4096;return a}return s=ms(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function lh(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function Ey(s,a,u,h,_){return wa(a),u=ty(s,a,u,h,void 0,_),h=ny(),s!==null&&!En?(iy(s,a,_),Es(s,a,_)):(dt&&h&&Lg(a),a.flags|=1,jn(s,a,u,_),a.child)}function pb(s,a,u,h,_,E){return wa(a),a.updateQueue=null,u=yS(a,h,u,_),gS(s),h=ny(),s!==null&&!En?(iy(s,a,E),Es(s,a,E)):(dt&&h&&Lg(a),a.flags|=1,jn(s,a,u,E),a.child)}function mb(s,a,u,h,_){if(wa(a),a.stateNode===null){var E=Tl,A=u.contextType;typeof A=="object"&&A!==null&&(E=Hn(A)),E=new u(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=vy,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},Kg(a),A=u.contextType,E.context=typeof A=="object"&&A!==null?Hn(A):Tl,E.state=a.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(yy(a,u,A,h),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(A=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),A!==E.state&&vy.enqueueReplaceState(E,E.state,null),pc(a,h,E,_),hc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){E=a.stateNode;var M=a.memoizedProps,j=Na(u,M);E.props=j;var X=E.context,oe=u.contextType;A=Tl,typeof oe=="object"&&oe!==null&&(A=Hn(oe));var le=u.getDerivedStateFromProps;oe=typeof le=="function"||typeof E.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,oe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M||X!==A)&&tb(a,E,h,A),co=!1;var te=a.memoizedState;E.state=te,pc(a,h,E,_),hc(),X=a.memoizedState,M||te!==X||co?(typeof le=="function"&&(yy(a,u,le,h),X=a.memoizedState),(j=co||eb(a,u,j,h,te,X,A))?(oe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=X),E.props=h,E.state=X,E.context=A,h=j):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,Yg(s,a),A=a.memoizedProps,oe=Na(u,A),E.props=oe,le=a.pendingProps,te=E.context,X=u.contextType,j=Tl,typeof X=="object"&&X!==null&&(j=Hn(X)),M=u.getDerivedStateFromProps,(X=typeof M=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==le||te!==j)&&tb(a,E,h,j),co=!1,te=a.memoizedState,E.state=te,pc(a,h,E,_),hc();var ne=a.memoizedState;A!==le||te!==ne||co||s!==null&&s.dependencies!==null&&Gf(s.dependencies)?(typeof M=="function"&&(yy(a,u,M,h),ne=a.memoizedState),(oe=co||eb(a,u,oe,h,te,ne,j)||s!==null&&s.dependencies!==null&&Gf(s.dependencies))?(X||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ne,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ne,j)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ne),E.props=h,E.state=ne,E.context=j,h=oe):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),h=!1)}return E=h,lh(s,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&h?(a.child=Ia(a,s.child,null,_),a.child=Ia(a,null,u,_)):jn(s,a,u,_),a.memoizedState=E.state,s=a.child):s=Es(s,a,_),s}function gb(s,a,u,h){return Sa(),a.flags|=256,jn(s,a,u,h),a.child}var Sy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function by(s){return{baseLanes:s,cachePool:sS()}}function wy(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Qi),s}function yb(s,a,u){var h=a.pendingProps,_=!1,E=(a.flags&128)!==0,A;if((A=E)||(A=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),A&&(_=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(dt){if(_?po(a):mo(),(s=Ht)?(s=Aw(s,hr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:oo!==null?{id:Jr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},u=WE(s),u.return=a,a.child=u,Gn=a,Ht=null)):s=null,s===null)throw lo(a);return ov(s)?a.lanes=32:a.lanes=536870912,null}var M=h.children;return h=h.fallback,_?(mo(),_=a.mode,M=uh({mode:"hidden",children:M},_),h=Ea(h,_,u,null),M.return=a,h.return=a,M.sibling=h,a.child=M,h=a.child,h.memoizedState=by(u),h.childLanes=wy(s,A,u),a.memoizedState=Sy,_c(null,h)):(po(a),Ay(a,M))}var j=s.memoizedState;if(j!==null&&(M=j.dehydrated,M!==null)){if(E)a.flags&256?(po(a),a.flags&=-257,a=xy(s,a,u)):a.memoizedState!==null?(mo(),a.child=s.child,a.flags|=128,a=null):(mo(),M=h.fallback,_=a.mode,h=uh({mode:"visible",children:h.children},_),M=Ea(M,_,u,null),M.flags|=2,h.return=a,M.return=a,h.sibling=M,a.child=h,Ia(a,s.child,null,u),h=a.child,h.memoizedState=by(u),h.childLanes=wy(s,A,u),a.memoizedState=Sy,a=_c(null,h));else if(po(a),ov(M)){if(A=M.nextSibling&&M.nextSibling.dataset,A)var X=A.dgst;A=X,h=Error(i(419)),h.stack="",h.digest=A,ac({value:h,source:null,stack:null}),a=xy(s,a,u)}else if(En||wl(s,a,u,!1),A=(u&s.childLanes)!==0,En||A){if(A=Ot,A!==null&&(h=Et(A,u),h!==0&&h!==j.retryLane))throw j.retryLane=h,Ta(s,h),Mi(A,s,h),Ty;sv(M)||vh(),a=xy(s,a,u)}else sv(M)?(a.flags|=192,a.child=s.child,a=null):(s=j.treeContext,Ht=mr(M.nextSibling),Gn=a,dt=!0,ao=null,hr=!1,s!==null&&ZE(a,s),a=Ay(a,h.children),a.flags|=4096);return a}return _?(mo(),M=h.fallback,_=a.mode,j=s.child,X=j.sibling,h=ms(j,{mode:"hidden",children:h.children}),h.subtreeFlags=j.subtreeFlags&65011712,X!==null?M=ms(X,M):(M=Ea(M,_,u,null),M.flags|=2),M.return=a,h.return=a,h.sibling=M,a.child=h,_c(null,h),h=a.child,M=s.child.memoizedState,M===null?M=by(u):(_=M.cachePool,_!==null?(j=_n._currentValue,_=_.parent!==j?{parent:j,pool:j}:_):_=sS(),M={baseLanes:M.baseLanes|u,cachePool:_}),h.memoizedState=M,h.childLanes=wy(s,A,u),a.memoizedState=Sy,_c(s.child,h)):(po(a),u=s.child,s=u.sibling,u=ms(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=u,a.memoizedState=null,u)}function Ay(s,a){return a=uh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function uh(s,a){return s=Ki(22,s,null,a),s.lanes=0,s}function xy(s,a,u){return Ia(a,s.child,null,u),s=Ay(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function vb(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),zg(s.return,a,u)}function Cy(s,a,u,h,_,E){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:_,treeForkCount:E}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=u,A.tailMode=_,A.treeForkCount=E)}function _b(s,a,u){var h=a.pendingProps,_=h.revealOrder,E=h.tail;h=h.children;var A=fn.current,M=(A&2)!==0;if(M?(A=A&1|2,a.flags|=128):A&=1,pe(fn,A),jn(s,a,h,u),h=dt?oc:0,!M&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vb(s,u,a);else if(s.tag===19)vb(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)s=u.alternate,s!==null&&Qf(s)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),Cy(a,!1,_,u,E,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(s=_.alternate,s!==null&&Qf(s)===null){a.child=_;break}s=_.sibling,_.sibling=u,u=_,_=s}Cy(a,!0,u,null,E,h);break;case"together":Cy(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Es(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),vo|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(wl(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=ms(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ms(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Iy(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Gf(s)))}function Zk(s,a,u){switch(a.tag){case 3:Le(a,a.stateNode.containerInfo),uo(a,_n,s.memoizedState.cache),Sa();break;case 27:case 5:xn(a);break;case 4:Le(a,a.stateNode.containerInfo);break;case 10:uo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Zg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(po(a),a.flags|=128,null):(u&a.child.childLanes)!==0?yb(s,a,u):(po(a),s=Es(s,a,u),s!==null?s.sibling:null);po(a);break;case 19:var _=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(wl(s,a,u,!1),h=(u&a.childLanes)!==0),_){if(h)return _b(s,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),pe(fn,fn.current),h)break;return null;case 22:return a.lanes=0,db(s,a,u,a.pendingProps);case 24:uo(a,_n,s.memoizedState.cache)}return Es(s,a,u)}function Tb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)En=!0;else{if(!Iy(s,u)&&(a.flags&128)===0)return En=!1,Zk(s,a,u);En=(s.flags&131072)!==0}else En=!1,dt&&(a.flags&1048576)!==0&&XE(a,oc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=xa(a.elementType),a.type=s,typeof s=="function")Mg(s)?(h=Na(s,h),a.tag=1,a=mb(null,a,s,h,u)):(a.tag=0,a=Ey(null,a,s,h,u));else{if(s!=null){var _=s.$$typeof;if(_===H){a.tag=11,a=lb(null,a,s,h,u);break e}else if(_===I){a.tag=14,a=ub(null,a,s,h,u);break e}}throw a=xe(s)||s,Error(i(306,a,""))}}return a;case 0:return Ey(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,_=Na(h,a.pendingProps),mb(s,a,h,_,u);case 3:e:{if(Le(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var E=a.memoizedState;_=E.element,Yg(s,a),pc(a,h,null,u);var A=a.memoizedState;if(h=A.cache,uo(a,_n,h),h!==E.cache&&qg(a,[_n],u,!0),hc(),h=A.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=gb(s,a,h,u);break e}else if(h!==_){_=cr(Error(i(424)),a),ac(_),a=gb(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ht=mr(s.firstChild),Gn=a,dt=!0,ao=null,hr=!0,u=dS(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Sa(),h===_){a=Es(s,a,u);break e}jn(s,a,h,u)}a=a.child}return a;case 26:return lh(s,a),s===null?(u=Pw(a.type,null,a.pendingProps,null))?a.memoizedState=u:dt||(u=a.type,s=a.pendingProps,h=Ah(Te.current).createElement(u),h[qt]=a,h[dn]=s,$n(h,u,s),Wt(h),a.stateNode=h):a.memoizedState=Pw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return xn(a),s===null&&dt&&(h=a.stateNode=Iw(a.type,a.pendingProps,Te.current),Gn=a,hr=!0,_=Ht,bo(a.type)?(av=_,Ht=mr(h.firstChild)):Ht=_),jn(s,a,a.pendingProps.children,u),lh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&dt&&((_=h=Ht)&&(h=RV(h,a.type,a.pendingProps,hr),h!==null?(a.stateNode=h,Gn=a,Ht=mr(h.firstChild),hr=!1,_=!0):_=!1),_||lo(a)),xn(a),_=a.type,E=a.pendingProps,A=s!==null?s.memoizedProps:null,h=E.children,nv(_,E)?h=null:A!==null&&nv(_,A)&&(a.flags|=32),a.memoizedState!==null&&(_=ty(s,a,Hk,null,null,u),kc._currentValue=_),lh(s,a),jn(s,a,h,u),a.child;case 6:return s===null&&dt&&((s=u=Ht)&&(u=NV(u,a.pendingProps,hr),u!==null?(a.stateNode=u,Gn=a,Ht=null,s=!0):s=!1),s||lo(a)),null;case 13:return yb(s,a,u);case 4:return Le(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Ia(a,null,h,u):jn(s,a,h,u),a.child;case 11:return lb(s,a,a.type,a.pendingProps,u);case 7:return jn(s,a,a.pendingProps,u),a.child;case 8:return jn(s,a,a.pendingProps.children,u),a.child;case 12:return jn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,uo(a,a.type,h.value),jn(s,a,h.children,u),a.child;case 9:return _=a.type._context,h=a.pendingProps.children,wa(a),_=Hn(_),h=h(_),a.flags|=1,jn(s,a,h,u),a.child;case 14:return ub(s,a,a.type,a.pendingProps,u);case 15:return cb(s,a,a.type,a.pendingProps,u);case 19:return _b(s,a,u);case 31:return Xk(s,a,u);case 22:return db(s,a,u,a.pendingProps);case 24:return wa(a),h=Hn(_n),s===null?(_=jg(),_===null&&(_=Ot,E=Gg(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=u),_=E),a.memoizedState={parent:h,cache:_},Kg(a),uo(a,_n,_)):((s.lanes&u)!==0&&(Yg(s,a),pc(a,null,null,u),hc()),_=s.memoizedState,E=a.memoizedState,_.parent!==h?(_={parent:h,cache:h},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),uo(a,_n,h)):(h=E.cache,uo(a,_n,h),h!==_.cache&&qg(a,[_n],u,!0))),jn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ss(s){s.flags|=4}function Ry(s,a,u,h,_){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(Kb())s.flags|=8192;else throw Ca=Kf,$g}else s.flags&=-16777217}function Eb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Lw(a))if(Kb())s.flags|=8192;else throw Ca=Kf,$g}function ch(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Ai():536870912,s.lanes|=a,Ll|=a)}function Tc(s,a){if(!dt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function jt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var _=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags&65011712,h|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags,h|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function eV(s,a,u){var h=a.pendingProps;switch(Og(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(a),null;case 1:return jt(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),vs(_n),pt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(bl(a)?Ss(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Fg())),jt(a),null;case 26:var _=a.type,E=a.memoizedState;return s===null?(Ss(a),E!==null?(jt(a),Eb(a,E)):(jt(a),Ry(a,_,null,h,u))):E?E!==s.memoizedState?(Ss(a),jt(a),Eb(a,E)):(jt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&Ss(a),jt(a),Ry(a,_,s,h,u)),null;case 27:if(bi(a),u=Te.current,_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return jt(a),null}s=re.current,bl(a)?eS(a):(s=Iw(_,h,u),a.stateNode=s,Ss(a))}return jt(a),null;case 5:if(bi(a),_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return jt(a),null}if(E=re.current,bl(a))eS(a);else{var A=Ah(Te.current);switch(E){case 1:E=A.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:E=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":E=A.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":E=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":E=A.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?A.createElement(_,{is:h.is}):A.createElement(_)}}E[qt]=a,E[dn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)E.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=E;e:switch($n(E,_,h),_){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ss(a)}}return jt(a),Ry(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Te.current,bl(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,_=Gn,_!==null)switch(_.tag){case 27:case 5:h=_.memoizedProps}s[qt]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||yw(s.nodeValue,u)),s||lo(a,!0)}else s=Ah(s).createTextNode(h),s[qt]=a,a.stateNode=s}return jt(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=bl(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[qt]=a}else Sa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jt(a),s=!1}else u=Fg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Ji(a),a):(Ji(a),null);if((a.flags&128)!==0)throw Error(i(558))}return jt(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=bl(a),h!==null&&h.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[qt]=a}else Sa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jt(a),_=!1}else _=Fg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(Ji(a),a):(Ji(a),null)}return Ji(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,_=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(_=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==_&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),ch(a,a.updateQueue),jt(a),null);case 4:return pt(),s===null&&Qy(a.stateNode.containerInfo),jt(a),null;case 10:return vs(a.type),jt(a),null;case 19:if(Z(fn),h=a.memoizedState,h===null)return jt(a),null;if(_=(a.flags&128)!==0,E=h.rendering,E===null)if(_)Tc(h,!1);else{if(sn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=Qf(s),E!==null){for(a.flags|=128,Tc(h,!1),s=E.updateQueue,a.updateQueue=s,ch(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)JE(u,s),u=u.sibling;return pe(fn,fn.current&1|2),dt&&gs(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&wt()>mh&&(a.flags|=128,_=!0,Tc(h,!1),a.lanes=4194304)}else{if(!_)if(s=Qf(E),s!==null){if(a.flags|=128,_=!0,s=s.updateQueue,a.updateQueue=s,ch(a,s),Tc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!dt)return jt(a),null}else 2*wt()-h.renderingStartTime>mh&&u!==536870912&&(a.flags|=128,_=!0,Tc(h,!1),a.lanes=4194304);h.isBackwards?(E.sibling=a.child,a.child=E):(s=h.last,s!==null?s.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=wt(),s.sibling=null,u=fn.current,pe(fn,_?u&1|2:u&1),dt&&gs(a,h.treeForkCount),s):(jt(a),null);case 22:case 23:return Ji(a),Xg(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(jt(a),a.subtreeFlags&6&&(a.flags|=8192)):jt(a),u=a.updateQueue,u!==null&&ch(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&Z(Aa),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),vs(_n),jt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function tV(s,a){switch(Og(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return vs(_n),pt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return bi(a),null;case 31:if(a.memoizedState!==null){if(Ji(a),a.alternate===null)throw Error(i(340));Sa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Ji(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Sa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Z(fn),null;case 4:return pt(),null;case 10:return vs(a.type),null;case 22:case 23:return Ji(a),Xg(),s!==null&&Z(Aa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return vs(_n),null;case 25:return null;default:return null}}function Sb(s,a){switch(Og(a),a.tag){case 3:vs(_n),pt();break;case 26:case 27:case 5:bi(a);break;case 4:pt();break;case 31:a.memoizedState!==null&&Ji(a);break;case 13:Ji(a);break;case 19:Z(fn);break;case 10:vs(a.type);break;case 22:case 23:Ji(a),Xg(),s!==null&&Z(Aa);break;case 24:vs(_n)}}function Ec(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var _=h.next;u=_;do{if((u.tag&s)===s){h=void 0;var E=u.create,A=u.inst;h=E(),A.destroy=h}u=u.next}while(u!==_)}}catch(M){Dt(a,a.return,M)}}function go(s,a,u){try{var h=a.updateQueue,_=h!==null?h.lastEffect:null;if(_!==null){var E=_.next;h=E;do{if((h.tag&s)===s){var A=h.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,_=a;var j=u,X=M;try{X()}catch(oe){Dt(_,j,oe)}}}h=h.next}while(h!==E)}}catch(oe){Dt(a,a.return,oe)}}function bb(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{hS(a,u)}catch(h){Dt(s,s.return,h)}}}function wb(s,a,u){u.props=Na(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Dt(s,a,h)}}function Sc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(_){Dt(s,a,_)}}function Qr(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(_){Dt(s,a,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){Dt(s,a,_)}else u.current=null}function Ab(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(_){Dt(s,s.return,_)}}function Ny(s,a,u){try{var h=s.stateNode;bV(h,s.type,u,a),h[dn]=a}catch(_){Dt(s,s.return,_)}}function xb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&bo(s.type)||s.tag===4}function Py(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||xb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&bo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Dy(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Ln));else if(h!==4&&(h===27&&bo(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(Dy(s,a,u),s=s.sibling;s!==null;)Dy(s,a,u),s=s.sibling}function dh(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&bo(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(dh(s,a,u),s=s.sibling;s!==null;)dh(s,a,u),s=s.sibling}function Cb(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);$n(a,h,u),a[qt]=s,a[dn]=u}catch(E){Dt(s,s.return,E)}}var bs=!1,Sn=!1,My=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function nV(s,a){if(s=s.containerInfo,ev=Dh,s=BE(s),xg(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var _=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var A=0,M=-1,j=-1,X=0,oe=0,le=s,te=null;t:for(;;){for(var ne;le!==u||_!==0&&le.nodeType!==3||(M=A+_),le!==E||h!==0&&le.nodeType!==3||(j=A+h),le.nodeType===3&&(A+=le.nodeValue.length),(ne=le.firstChild)!==null;)te=le,le=ne;for(;;){if(le===s)break t;if(te===u&&++X===_&&(M=A),te===E&&++oe===h&&(j=A),(ne=le.nextSibling)!==null)break;le=te,te=le.parentNode}le=ne}u=M===-1||j===-1?null:{start:M,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(tv={focusedElem:s,selectionRange:u},Dh=!1,Fn=a;Fn!==null;)if(a=Fn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Fn=s;else for(;Fn!==null;){switch(a=Fn,E=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)_=s[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,_=E.memoizedProps,E=E.memoizedState,h=u.stateNode;try{var we=Na(u.type,_);s=h.getSnapshotBeforeUpdate(we,E),h.__reactInternalSnapshotBeforeUpdate=s}catch(Oe){Dt(u,u.return,Oe)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)rv(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":rv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Fn=s;break}Fn=a.return}}function Rb(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:As(s,u),h&4&&Ec(5,u);break;case 1:if(As(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(A){Dt(u,u.return,A)}else{var _=Na(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(_,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){Dt(u,u.return,A)}}h&64&&bb(u),h&512&&Sc(u,u.return);break;case 3:if(As(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{hS(s,a)}catch(A){Dt(u,u.return,A)}}break;case 27:a===null&&h&4&&Cb(u);case 26:case 5:As(s,u),a===null&&h&4&&Ab(u),h&512&&Sc(u,u.return);break;case 12:As(s,u);break;case 31:As(s,u),h&4&&Db(s,u);break;case 13:As(s,u),h&4&&Mb(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=dV.bind(null,u),PV(s,u))));break;case 22:if(h=u.memoizedState!==null||bs,!h){a=a!==null&&a.memoizedState!==null||Sn,_=bs;var E=Sn;bs=h,(Sn=a)&&!E?xs(s,u,(u.subtreeFlags&8772)!==0):As(s,u),bs=_,Sn=E}break;case 30:break;default:As(s,u)}}function Nb(s){var a=s.alternate;a!==null&&(s.alternate=null,Nb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&sr(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Qt=null,Ri=!1;function ws(s,a,u){for(u=u.child;u!==null;)Pb(s,a,u),u=u.sibling}function Pb(s,a,u){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(fi,u)}catch{}switch(u.tag){case 26:Sn||Qr(u,a),ws(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Sn||Qr(u,a);var h=Qt,_=Ri;bo(u.type)&&(Qt=u.stateNode,Ri=!1),ws(s,a,u),Pc(u.stateNode),Qt=h,Ri=_;break;case 5:Sn||Qr(u,a);case 6:if(h=Qt,_=Ri,Qt=null,ws(s,a,u),Qt=h,Ri=_,Qt!==null)if(Ri)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(u.stateNode)}catch(E){Dt(u,a,E)}else try{Qt.removeChild(u.stateNode)}catch(E){Dt(u,a,E)}break;case 18:Qt!==null&&(Ri?(s=Qt,bw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Hl(s)):bw(Qt,u.stateNode));break;case 4:h=Qt,_=Ri,Qt=u.stateNode.containerInfo,Ri=!0,ws(s,a,u),Qt=h,Ri=_;break;case 0:case 11:case 14:case 15:go(2,u,a),Sn||go(4,u,a),ws(s,a,u);break;case 1:Sn||(Qr(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&wb(u,a,h)),ws(s,a,u);break;case 21:ws(s,a,u);break;case 22:Sn=(h=Sn)||u.memoizedState!==null,ws(s,a,u),Sn=h;break;default:ws(s,a,u)}}function Db(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Hl(s)}catch(u){Dt(a,a.return,u)}}}function Mb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Hl(s)}catch(u){Dt(a,a.return,u)}}function iV(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Ib),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Ib),a;default:throw Error(i(435,s.tag))}}function fh(s,a){var u=iV(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var _=fV.bind(null,s,h);h.then(_,_)}})}function Ni(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var _=u[h],E=s,A=a,M=A;e:for(;M!==null;){switch(M.tag){case 27:if(bo(M.type)){Qt=M.stateNode,Ri=!1;break e}break;case 5:Qt=M.stateNode,Ri=!1;break e;case 3:case 4:Qt=M.stateNode.containerInfo,Ri=!0;break e}M=M.return}if(Qt===null)throw Error(i(160));Pb(E,A,_),Qt=null,Ri=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)kb(a,s),a=a.sibling}var Rr=null;function kb(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ni(a,s),Pi(s),h&4&&(go(3,s,s.return),Ec(3,s),go(5,s,s.return));break;case 1:Ni(a,s),Pi(s),h&512&&(Sn||u===null||Qr(u,u.return)),h&64&&bs&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var _=Rr;if(Ni(a,s),Pi(s),h&512&&(Sn||u===null||Qr(u,u.return)),h&4){var E=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,_=_.ownerDocument||_;t:switch(h){case"title":E=_.getElementsByTagName("title")[0],(!E||E[rr]||E[qt]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(h),_.head.insertBefore(E,_.querySelector("head > title"))),$n(E,h,u),E[qt]=s,Wt(E),h=E;break e;case"link":var A=kw("link","href",_).get(h+(u.href||""));if(A){for(var M=0;M<A.length;M++)if(E=A[M],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(M,1);break t}}E=_.createElement(h),$n(E,h,u),_.head.appendChild(E);break;case"meta":if(A=kw("meta","content",_).get(h+(u.content||""))){for(M=0;M<A.length;M++)if(E=A[M],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(M,1);break t}}E=_.createElement(h),$n(E,h,u),_.head.appendChild(E);break;default:throw Error(i(468,h))}E[qt]=s,Wt(E),h=E}s.stateNode=h}else Vw(_,s.type,s.stateNode);else s.stateNode=Mw(_,h,s.memoizedProps);else E!==h?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,h===null?Vw(_,s.type,s.stateNode):Mw(_,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Ny(s,s.memoizedProps,u.memoizedProps)}break;case 27:Ni(a,s),Pi(s),h&512&&(Sn||u===null||Qr(u,u.return)),u!==null&&h&4&&Ny(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Ni(a,s),Pi(s),h&512&&(Sn||u===null||Qr(u,u.return)),s.flags&32){_=s.stateNode;try{lr(_,"")}catch(we){Dt(s,s.return,we)}}h&4&&s.stateNode!=null&&(_=s.memoizedProps,Ny(s,_,u!==null?u.memoizedProps:_)),h&1024&&(My=!0);break;case 6:if(Ni(a,s),Pi(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(we){Dt(s,s.return,we)}}break;case 3:if(Ih=null,_=Rr,Rr=xh(a.containerInfo),Ni(a,s),Rr=_,Pi(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Hl(a.containerInfo)}catch(we){Dt(s,s.return,we)}My&&(My=!1,Vb(s));break;case 4:h=Rr,Rr=xh(s.stateNode.containerInfo),Ni(a,s),Pi(s),Rr=h;break;case 12:Ni(a,s),Pi(s);break;case 31:Ni(a,s),Pi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,fh(s,h)));break;case 13:Ni(a,s),Pi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ph=wt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,fh(s,h)));break;case 22:_=s.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,X=bs,oe=Sn;if(bs=X||_,Sn=oe||j,Ni(a,s),Sn=oe,bs=X,Pi(s),h&8192)e:for(a=s.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||j||bs||Sn||Pa(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){j=u=a;try{if(E=j.stateNode,_)A=E.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=j.stateNode;var le=j.memoizedProps.style,te=le!=null&&le.hasOwnProperty("display")?le.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(we){Dt(j,j.return,we)}}}else if(a.tag===6){if(u===null){j=a;try{j.stateNode.nodeValue=_?"":j.memoizedProps}catch(we){Dt(j,j.return,we)}}}else if(a.tag===18){if(u===null){j=a;try{var ne=j.stateNode;_?ww(ne,!0):ww(j.stateNode,!1)}catch(we){Dt(j,j.return,we)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,fh(s,u))));break;case 19:Ni(a,s),Pi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,fh(s,h)));break;case 30:break;case 21:break;default:Ni(a,s),Pi(s)}}function Pi(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(xb(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,E=Py(s);dh(s,E,_);break;case 5:var A=u.stateNode;u.flags&32&&(lr(A,""),u.flags&=-33);var M=Py(s);dh(s,M,A);break;case 3:case 4:var j=u.stateNode.containerInfo,X=Py(s);Dy(s,X,j);break;default:throw Error(i(161))}}catch(oe){Dt(s,s.return,oe)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Vb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Vb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function As(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Rb(s,a.alternate,a),a=a.sibling}function Pa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:go(4,a,a.return),Pa(a);break;case 1:Qr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&wb(a,a.return,u),Pa(a);break;case 27:Pc(a.stateNode);case 26:case 5:Qr(a,a.return),Pa(a);break;case 22:a.memoizedState===null&&Pa(a);break;case 30:Pa(a);break;default:Pa(a)}s=s.sibling}}function xs(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,_=s,E=a,A=E.flags;switch(E.tag){case 0:case 11:case 15:xs(_,E,u),Ec(4,E);break;case 1:if(xs(_,E,u),h=E,_=h.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(X){Dt(h,h.return,X)}if(h=E,_=h.updateQueue,_!==null){var M=h.stateNode;try{var j=_.shared.hiddenCallbacks;if(j!==null)for(_.shared.hiddenCallbacks=null,_=0;_<j.length;_++)fS(j[_],M)}catch(X){Dt(h,h.return,X)}}u&&A&64&&bb(E),Sc(E,E.return);break;case 27:Cb(E);case 26:case 5:xs(_,E,u),u&&h===null&&A&4&&Ab(E),Sc(E,E.return);break;case 12:xs(_,E,u);break;case 31:xs(_,E,u),u&&A&4&&Db(_,E);break;case 13:xs(_,E,u),u&&A&4&&Mb(_,E);break;case 22:E.memoizedState===null&&xs(_,E,u),Sc(E,E.return);break;case 30:break;default:xs(_,E,u)}a=a.sibling}}function ky(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&lc(u))}function Vy(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&lc(s))}function Nr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Lb(s,a,u,h),a=a.sibling}function Lb(s,a,u,h){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Nr(s,a,u,h),_&2048&&Ec(9,a);break;case 1:Nr(s,a,u,h);break;case 3:Nr(s,a,u,h),_&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&lc(s)));break;case 12:if(_&2048){Nr(s,a,u,h),s=a.stateNode;try{var E=a.memoizedProps,A=E.id,M=E.onPostCommit;typeof M=="function"&&M(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(j){Dt(a,a.return,j)}}else Nr(s,a,u,h);break;case 31:Nr(s,a,u,h);break;case 13:Nr(s,a,u,h);break;case 23:break;case 22:E=a.stateNode,A=a.alternate,a.memoizedState!==null?E._visibility&2?Nr(s,a,u,h):bc(s,a):E._visibility&2?Nr(s,a,u,h):(E._visibility|=2,Ml(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),_&2048&&ky(A,a);break;case 24:Nr(s,a,u,h),_&2048&&Vy(a.alternate,a);break;default:Nr(s,a,u,h)}}function Ml(s,a,u,h,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var E=s,A=a,M=u,j=h,X=A.flags;switch(A.tag){case 0:case 11:case 15:Ml(E,A,M,j,_),Ec(8,A);break;case 23:break;case 22:var oe=A.stateNode;A.memoizedState!==null?oe._visibility&2?Ml(E,A,M,j,_):bc(E,A):(oe._visibility|=2,Ml(E,A,M,j,_)),_&&X&2048&&ky(A.alternate,A);break;case 24:Ml(E,A,M,j,_),_&&X&2048&&Vy(A.alternate,A);break;default:Ml(E,A,M,j,_)}a=a.sibling}}function bc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,_=h.flags;switch(h.tag){case 22:bc(u,h),_&2048&&ky(h.alternate,h);break;case 24:bc(u,h),_&2048&&Vy(h.alternate,h);break;default:bc(u,h)}a=a.sibling}}var wc=8192;function kl(s,a,u){if(s.subtreeFlags&wc)for(s=s.child;s!==null;)Ob(s,a,u),s=s.sibling}function Ob(s,a,u){switch(s.tag){case 26:kl(s,a,u),s.flags&wc&&s.memoizedState!==null&&GV(u,Rr,s.memoizedState,s.memoizedProps);break;case 5:kl(s,a,u);break;case 3:case 4:var h=Rr;Rr=xh(s.stateNode.containerInfo),kl(s,a,u),Rr=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=wc,wc=16777216,kl(s,a,u),wc=h):kl(s,a,u));break;default:kl(s,a,u)}}function Ub(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Ac(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Fn=h,Bb(h,s)}Ub(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Fb(s),s=s.sibling}function Fb(s){switch(s.tag){case 0:case 11:case 15:Ac(s),s.flags&2048&&go(9,s,s.return);break;case 3:Ac(s);break;case 12:Ac(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,hh(s)):Ac(s);break;default:Ac(s)}}function hh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Fn=h,Bb(h,s)}Ub(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:go(8,a,a.return),hh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,hh(a));break;default:hh(a)}s=s.sibling}}function Bb(s,a){for(;Fn!==null;){var u=Fn;switch(u.tag){case 0:case 11:case 15:go(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:lc(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Fn=h;else e:for(u=s;Fn!==null;){h=Fn;var _=h.sibling,E=h.return;if(Nb(h),h===u){Fn=null;break e}if(_!==null){_.return=E,Fn=_;break e}Fn=E}}}var rV={getCacheForType:function(s){var a=Hn(_n),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return Hn(_n).controller.signal}},sV=typeof WeakMap=="function"?WeakMap:Map,St=0,Ot=null,it=null,at=0,Pt=0,Wi=null,yo=!1,Vl=!1,Ly=!1,Cs=0,sn=0,vo=0,Da=0,Oy=0,Qi=0,Ll=0,xc=null,Di=null,Uy=!1,ph=0,zb=0,mh=1/0,gh=null,_o=null,Pn=0,To=null,Ol=null,Is=0,Fy=0,By=null,qb=null,Cc=0,zy=null;function Xi(){return(St&2)!==0&&at!==0?at&-at:ee.T!==null?Ky():Nn()}function Gb(){if(Qi===0)if((at&536870912)===0||dt){var s=Xe;Xe<<=1,(Xe&3932160)===0&&(Xe=262144),Qi=s}else Qi=536870912;return s=Yi.current,s!==null&&(s.flags|=32),Qi}function Mi(s,a,u){(s===Ot&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)&&(Ul(s,0),Eo(s,at,Qi,!1)),Ct(s,u),((St&2)===0||s!==Ot)&&(s===Ot&&((St&2)===0&&(Da|=u),sn===4&&Eo(s,at,Qi,!1)),Xr(s))}function Hb(s,a,u){if((St&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||Ge(s,a),_=h?lV(s,a):Gy(s,a,!0),E=h;do{if(_===0){Vl&&!h&&Eo(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!oV(u)){_=Gy(s,a,!1),E=!1;continue}if(_===2){if(E=a,s.errorRecoveryDisabledLanes&E)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var M=s;_=xc;var j=M.current.memoizedState.isDehydrated;if(j&&(Ul(M,A).flags|=256),A=Gy(M,A,!1),A!==2){if(Ly&&!j){M.errorRecoveryDisabledLanes|=E,Da|=E,_=4;break e}E=Di,Di=_,E!==null&&(Di===null?Di=E:Di.push.apply(Di,E))}_=A}if(E=!1,_!==2)continue}}if(_===1){Ul(s,0),Eo(s,a,0,!0);break}e:{switch(h=s,E=_,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Eo(h,a,Qi,!yo);break e;case 2:Di=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(_=ph+300-wt(),10<_)){if(Eo(h,a,Qi,!yo),ke(h,0,!0)!==0)break e;Is=a,h.timeoutHandle=Ew(jb.bind(null,h,u,Di,gh,Uy,a,Qi,Da,Ll,yo,E,"Throttled",-0,0),_);break e}jb(h,u,Di,gh,Uy,a,Qi,Da,Ll,yo,E,null,-0,0)}}break}while(!0);Xr(s)}function jb(s,a,u,h,_,E,A,M,j,X,oe,le,te,ne){if(s.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},Ob(a,E,le);var we=(E&62914560)===E?ph-wt():(E&4194048)===E?zb-wt():0;if(we=HV(le,we),we!==null){Is=E,s.cancelPendingCommit=we(Zb.bind(null,s,a,E,u,h,_,A,M,j,oe,le,null,te,ne)),Eo(s,E,A,!X);return}}Zb(s,a,E,u,h,_,A,M,j)}function oV(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var _=u[h],E=_.getSnapshot;_=_.value;try{if(!$i(E(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Eo(s,a,u,h){a&=~Oy,a&=~Da,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var _=a;0<_;){var E=31-be(_),A=1<<E;h[E]=-1,_&=~A}u!==0&&Ie(s,u,a)}function yh(){return(St&6)===0?(Ic(0),!1):!0}function qy(){if(it!==null){if(Pt===0)var s=it.return;else s=it,ys=ba=null,ry(s),Il=null,cc=0,s=it;for(;s!==null;)Sb(s.alternate,s),s=s.return;it=null}}function Ul(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,xV(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Is=0,qy(),Ot=s,it=u=ms(s.current,null),at=a,Pt=0,Wi=null,yo=!1,Vl=Ge(s,a),Ly=!1,Ll=Qi=Oy=Da=vo=sn=0,Di=xc=null,Uy=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var _=31-be(h),E=1<<_;a|=s[_],h&=~E}return Cs=a,Uf(),u}function $b(s,a){Je=null,ee.H=vc,a===Cl||a===$f?(a=lS(),Pt=3):a===$g?(a=lS(),Pt=4):Pt=a===Ty?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wi=a,it===null&&(sn=1,oh(s,cr(a,s.current)))}function Kb(){var s=Yi.current;return s===null?!0:(at&4194048)===at?pr===null:(at&62914560)===at||(at&536870912)!==0?s===pr:!1}function Yb(){var s=ee.H;return ee.H=vc,s===null?vc:s}function Jb(){var s=ee.A;return ee.A=rV,s}function vh(){sn=4,yo||(at&4194048)!==at&&Yi.current!==null||(Vl=!0),(vo&134217727)===0&&(Da&134217727)===0||Ot===null||Eo(Ot,at,Qi,!1)}function Gy(s,a,u){var h=St;St|=2;var _=Yb(),E=Jb();(Ot!==s||at!==a)&&(gh=null,Ul(s,a)),a=!1;var A=sn;e:do try{if(Pt!==0&&it!==null){var M=it,j=Wi;switch(Pt){case 8:qy(),A=6;break e;case 3:case 2:case 9:case 6:Yi.current===null&&(a=!0);var X=Pt;if(Pt=0,Wi=null,Fl(s,M,j,X),u&&Vl){A=0;break e}break;default:X=Pt,Pt=0,Wi=null,Fl(s,M,j,X)}}aV(),A=sn;break}catch(oe){$b(s,oe)}while(!0);return a&&s.shellSuspendCounter++,ys=ba=null,St=h,ee.H=_,ee.A=E,it===null&&(Ot=null,at=0,Uf()),A}function aV(){for(;it!==null;)Wb(it)}function lV(s,a){var u=St;St|=2;var h=Yb(),_=Jb();Ot!==s||at!==a?(gh=null,mh=wt()+500,Ul(s,a)):Vl=Ge(s,a);e:do try{if(Pt!==0&&it!==null){a=it;var E=Wi;t:switch(Pt){case 1:Pt=0,Wi=null,Fl(s,a,E,1);break;case 2:case 9:if(oS(E)){Pt=0,Wi=null,Qb(a);break}a=function(){Pt!==2&&Pt!==9||Ot!==s||(Pt=7),Xr(s)},E.then(a,a);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:oS(E)?(Pt=0,Wi=null,Qb(a)):(Pt=0,Wi=null,Fl(s,a,E,7));break;case 5:var A=null;switch(it.tag){case 26:A=it.memoizedState;case 5:case 27:var M=it;if(A?Lw(A):M.stateNode.complete){Pt=0,Wi=null;var j=M.sibling;if(j!==null)it=j;else{var X=M.return;X!==null?(it=X,_h(X)):it=null}break t}}Pt=0,Wi=null,Fl(s,a,E,5);break;case 6:Pt=0,Wi=null,Fl(s,a,E,6);break;case 8:qy(),sn=6;break e;default:throw Error(i(462))}}uV();break}catch(oe){$b(s,oe)}while(!0);return ys=ba=null,ee.H=h,ee.A=_,St=u,it!==null?0:(Ot=null,at=0,Uf(),sn)}function uV(){for(;it!==null&&!yn();)Wb(it)}function Wb(s){var a=Tb(s.alternate,s,Cs);s.memoizedProps=s.pendingProps,a===null?_h(s):it=a}function Qb(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=pb(u,a,a.pendingProps,a.type,void 0,at);break;case 11:a=pb(u,a,a.pendingProps,a.type.render,a.ref,at);break;case 5:ry(a);default:Sb(u,a),a=it=JE(a,Cs),a=Tb(u,a,Cs)}s.memoizedProps=s.pendingProps,a===null?_h(s):it=a}function Fl(s,a,u,h){ys=ba=null,ry(a),Il=null,cc=0;var _=a.return;try{if(Qk(s,_,a,u,at)){sn=1,oh(s,cr(u,s.current)),it=null;return}}catch(E){if(_!==null)throw it=_,E;sn=1,oh(s,cr(u,s.current)),it=null;return}a.flags&32768?(dt||h===1?s=!0:Vl||(at&536870912)!==0?s=!1:(yo=s=!0,(h===2||h===9||h===3||h===6)&&(h=Yi.current,h!==null&&h.tag===13&&(h.flags|=16384))),Xb(a,s)):_h(a)}function _h(s){var a=s;do{if((a.flags&32768)!==0){Xb(a,yo);return}s=a.return;var u=eV(a.alternate,a,Cs);if(u!==null){it=u;return}if(a=a.sibling,a!==null){it=a;return}it=a=s}while(a!==null);sn===0&&(sn=5)}function Xb(s,a){do{var u=tV(s.alternate,s);if(u!==null){u.flags&=32767,it=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){it=s;return}it=s=u}while(s!==null);sn=6,it=null}function Zb(s,a,u,h,_,E,A,M,j){s.cancelPendingCommit=null;do Th();while(Pn!==0);if((St&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=Pg,he(s,u,E,A,M,j),s===Ot&&(it=Ot=null,at=0),Ol=a,To=s,Is=u,Fy=E,By=_,qb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,hV(xt,function(){return rw(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,_=se.p,se.p=2,A=St,St|=4;try{nV(s,a,u)}finally{St=A,se.p=_,ee.T=h}}Pn=1,ew(),tw(),nw()}}function ew(){if(Pn===1){Pn=0;var s=To,a=Ol,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var h=se.p;se.p=2;var _=St;St|=4;try{kb(a,s);var E=tv,A=BE(s.containerInfo),M=E.focusedElem,j=E.selectionRange;if(A!==M&&M&&M.ownerDocument&&FE(M.ownerDocument.documentElement,M)){if(j!==null&&xg(M)){var X=j.start,oe=j.end;if(oe===void 0&&(oe=X),"selectionStart"in M)M.selectionStart=X,M.selectionEnd=Math.min(oe,M.value.length);else{var le=M.ownerDocument||document,te=le&&le.defaultView||window;if(te.getSelection){var ne=te.getSelection(),we=M.textContent.length,Oe=Math.min(j.start,we),Vt=j.end===void 0?Oe:Math.min(j.end,we);!ne.extend&&Oe>Vt&&(A=Vt,Vt=Oe,Oe=A);var J=UE(M,Oe),Y=UE(M,Vt);if(J&&Y&&(ne.rangeCount!==1||ne.anchorNode!==J.node||ne.anchorOffset!==J.offset||ne.focusNode!==Y.node||ne.focusOffset!==Y.offset)){var Q=le.createRange();Q.setStart(J.node,J.offset),ne.removeAllRanges(),Oe>Vt?(ne.addRange(Q),ne.extend(Y.node,Y.offset)):(Q.setEnd(Y.node,Y.offset),ne.addRange(Q))}}}}for(le=[],ne=M;ne=ne.parentNode;)ne.nodeType===1&&le.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<le.length;M++){var ae=le[M];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Dh=!!ev,tv=ev=null}finally{St=_,se.p=h,ee.T=u}}s.current=a,Pn=2}}function tw(){if(Pn===2){Pn=0;var s=To,a=Ol,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var h=se.p;se.p=2;var _=St;St|=4;try{Rb(s,a.alternate,a)}finally{St=_,se.p=h,ee.T=u}}Pn=3}}function nw(){if(Pn===4||Pn===3){Pn=0,Fi();var s=To,a=Ol,u=Is,h=qb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Pn=5:(Pn=0,Ol=To=null,iw(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(_o=null),Rn(u),a=a.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(fi,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=ee.T,_=se.p,se.p=2,ee.T=null;try{for(var E=s.onRecoverableError,A=0;A<h.length;A++){var M=h[A];E(M.value,{componentStack:M.stack})}}finally{ee.T=a,se.p=_}}(Is&3)!==0&&Th(),Xr(s),_=s.pendingLanes,(u&261930)!==0&&(_&42)!==0?s===zy?Cc++:(Cc=0,zy=s):Cc=0,Ic(0)}}function iw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,lc(a)))}function Th(){return ew(),tw(),nw(),rw()}function rw(){if(Pn!==5)return!1;var s=To,a=Fy;Fy=0;var u=Rn(Is),h=ee.T,_=se.p;try{se.p=32>u?32:u,ee.T=null,u=By,By=null;var E=To,A=Is;if(Pn=0,Ol=To=null,Is=0,(St&6)!==0)throw Error(i(331));var M=St;if(St|=4,Fb(E.current),Lb(E,E.current,A,u),St=M,Ic(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(fi,E)}catch{}return!0}finally{se.p=_,ee.T=h,iw(s,a)}}function sw(s,a,u){a=cr(u,a),a=_y(s.stateNode,a,2),s=ho(s,a,2),s!==null&&(Ct(s,2),Xr(s))}function Dt(s,a,u){if(s.tag===3)sw(s,s,u);else for(;a!==null;){if(a.tag===3){sw(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_o===null||!_o.has(h))){s=cr(u,s),u=ob(2),h=ho(a,u,2),h!==null&&(ab(u,h,a,s),Ct(h,2),Xr(h));break}}a=a.return}}function Hy(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new sV;var _=new Set;h.set(a,_)}else _=h.get(a),_===void 0&&(_=new Set,h.set(a,_));_.has(u)||(Ly=!0,_.add(u),s=cV.bind(null,s,a,u),a.then(s,s))}function cV(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Ot===s&&(at&u)===u&&(sn===4||sn===3&&(at&62914560)===at&&300>wt()-ph?(St&2)===0&&Ul(s,0):Oy|=u,Ll===at&&(Ll=0)),Xr(s)}function ow(s,a){a===0&&(a=Ai()),s=Ta(s,a),s!==null&&(Ct(s,a),Xr(s))}function dV(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),ow(s,u)}function fV(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,_=s.memoizedState;_!==null&&(u=_.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),ow(s,u)}function hV(s,a){return ci(s,a)}var Eh=null,Bl=null,jy=!1,Sh=!1,$y=!1,So=0;function Xr(s){s!==Bl&&s.next===null&&(Bl===null?Eh=Bl=s:Bl=Bl.next=s),Sh=!0,jy||(jy=!0,mV())}function Ic(s,a){if(!$y&&Sh){$y=!0;do for(var u=!1,h=Eh;h!==null;){if(s!==0){var _=h.pendingLanes;if(_===0)var E=0;else{var A=h.suspendedLanes,M=h.pingedLanes;E=(1<<31-be(42|s)+1)-1,E&=_&~(A&~M),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,cw(h,E))}else E=at,E=ke(h,h===Ot?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||Ge(h,E)||(u=!0,cw(h,E));h=h.next}while(u);$y=!1}}function pV(){aw()}function aw(){Sh=jy=!1;var s=0;So!==0&&AV()&&(s=So);for(var a=wt(),u=null,h=Eh;h!==null;){var _=h.next,E=lw(h,a);E===0?(h.next=null,u===null?Eh=_:u.next=_,_===null&&(Bl=u)):(u=h,(s!==0||(E&3)!==0)&&(Sh=!0)),h=_}Pn!==0&&Pn!==5||Ic(s),So!==0&&(So=0)}function lw(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,_=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var A=31-be(E),M=1<<A,j=_[A];j===-1?((M&u)===0||(M&h)!==0)&&(_[A]=cn(M,a)):j<=a&&(s.expiredLanes|=M),E&=~M}if(a=Ot,u=at,u=ke(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&di(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Ge(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&di(h),Rn(u)){case 2:case 8:u=At;break;case 32:u=xt;break;case 268435456:u=Bi;break;default:u=xt}return h=uw.bind(null,s),u=ci(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&di(h),s.callbackPriority=2,s.callbackNode=null,2}function uw(s,a){if(Pn!==0&&Pn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Th()&&s.callbackNode!==u)return null;var h=at;return h=ke(s,s===Ot?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Hb(s,h,a),lw(s,wt()),s.callbackNode!=null&&s.callbackNode===u?uw.bind(null,s):null)}function cw(s,a){if(Th())return null;Hb(s,a,!0)}function mV(){CV(function(){(St&6)!==0?ci(Ke,pV):aw()})}function Ky(){if(So===0){var s=Al;s===0&&(s=We,We<<=1,(We&261888)===0&&(We=256)),So=s}return So}function dw(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:$r(""+s)}function fw(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function gV(s,a,u,h,_){if(a==="submit"&&u&&u.stateNode===_){var E=dw((_[dn]||null).action),A=h.submitter;A&&(a=(a=A[dn]||null)?dw(a.formAction):A.getAttribute("formAction"),a!==null&&(E=a,A=null));var M=new ha("action","action",null,h,_);s.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(So!==0){var j=A?fw(_,A):new FormData(_);hy(u,{pending:!0,data:j,method:_.method,action:E},null,j)}}else typeof E=="function"&&(M.preventDefault(),j=A?fw(_,A):new FormData(_),hy(u,{pending:!0,data:j,method:_.method,action:E},E,j))},currentTarget:_}]})}}for(var Yy=0;Yy<Ng.length;Yy++){var Jy=Ng[Yy],yV=Jy.toLowerCase(),vV=Jy[0].toUpperCase()+Jy.slice(1);Ir(yV,"on"+vV)}Ir(GE,"onAnimationEnd"),Ir(HE,"onAnimationIteration"),Ir(jE,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(kk,"onTransitionRun"),Ir(Vk,"onTransitionStart"),Ir(Lk,"onTransitionCancel"),Ir($E,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_V=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function hw(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],_=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var A=h.length-1;0<=A;A--){var M=h[A],j=M.instance,X=M.currentTarget;if(M=M.listener,j!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=X;try{E(_)}catch(oe){Of(oe)}_.currentTarget=null,E=j}else for(A=0;A<h.length;A++){if(M=h[A],j=M.instance,X=M.currentTarget,M=M.listener,j!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=X;try{E(_)}catch(oe){Of(oe)}_.currentTarget=null,E=j}}}}function rt(s,a){var u=a[ir];u===void 0&&(u=a[ir]=new Set);var h=s+"__bubble";u.has(h)||(pw(a,s,2,!1),u.add(h))}function Wy(s,a,u){var h=0;a&&(h|=4),pw(u,s,h,a)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Qy(s){if(!s[bh]){s[bh]=!0,Ar.forEach(function(u){u!=="selectionchange"&&(_V.has(u)||Wy(u,!1,s),Wy(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[bh]||(a[bh]=!0,Wy("selectionchange",!1,a))}}function pw(s,a,u,h){switch(Gw(a)){case 2:var _=KV;break;case 8:_=YV;break;default:_=fv}u=_.bind(null,a,u,s),_=void 0,!Qu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),h?_!==void 0?s.addEventListener(a,u,{capture:!0,passive:_}):s.addEventListener(a,u,!0):_!==void 0?s.addEventListener(a,u,{passive:_}):s.addEventListener(a,u,!1)}function Xy(s,a,u,h,_){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var M=h.stateNode.containerInfo;if(M===_)break;if(A===4)for(A=h.return;A!==null;){var j=A.tag;if((j===3||j===4)&&A.stateNode.containerInfo===_)return;A=A.return}for(;M!==null;){if(A=xi(M),A===null)return;if(j=A.tag,j===5||j===6||j===26||j===27){h=E=A;continue e}M=M.parentNode}}h=h.return}Ef(function(){var X=E,oe=fl(u),le=[];e:{var te=KE.get(s);if(te!==void 0){var ne=ha,we=s;switch(s){case"keypress":if(fa(u)===0)break e;case"keydown":case"keyup":ne=Nf;break;case"focusin":we="focus",ne=no;break;case"focusout":we="blur",ne=no;break;case"beforeblur":case"afterblur":ne=no;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=wf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Df;break;case GE:case HE:case jE:ne=ml;break;case $E:ne=gl;break;case"scroll":case"scrollend":ne=Sf;break;case"wheel":ne=kf;break;case"copy":case"cut":case"paste":ne=xf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=nc;break;case"toggle":case"beforetoggle":ne=ro}var Oe=(a&4)!==0,Vt=!Oe&&(s==="scroll"||s==="scrollend"),J=Oe?te!==null?te+"Capture":null:te;Oe=[];for(var Y=X,Q;Y!==null;){var ae=Y;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||J===null||(ae=Ci(Y,J),ae!=null&&Oe.push(Nc(Y,ae,Q))),Vt)break;Y=Y.return}0<Oe.length&&(te=new ne(te,we,null,u,oe),le.push({event:te,listeners:Oe}))}}if((a&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",te&&u!==dl&&(we=u.relatedTarget||u.fromElement)&&(xi(we)||we[qi]))break e;if((ne||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(we=u.relatedTarget||u.toElement,ne=X,we=we?xi(we):null,we!==null&&(Vt=o(we),Oe=we.tag,we!==Vt||Oe!==5&&Oe!==27&&Oe!==6)&&(we=null)):(ne=null,we=X),ne!==we)){if(Oe=bf,ae="onMouseLeave",J="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=nc,ae="onPointerLeave",J="onPointerEnter",Y="pointer"),Vt=ne==null?te:Hr(ne),Q=we==null?te:Hr(we),te=new Oe(ae,Y+"leave",ne,u,oe),te.target=Vt,te.relatedTarget=Q,ae=null,xi(oe)===X&&(Oe=new Oe(J,Y+"enter",we,u,oe),Oe.target=Q,Oe.relatedTarget=Vt,ae=Oe),Vt=ae,ne&&we)t:{for(Oe=TV,J=ne,Y=we,Q=0,ae=J;ae;ae=Oe(ae))Q++;ae=0;for(var Ne=Y;Ne;Ne=Oe(Ne))ae++;for(;0<Q-ae;)J=Oe(J),Q--;for(;0<ae-Q;)Y=Oe(Y),ae--;for(;Q--;){if(J===Y||Y!==null&&J===Y.alternate){Oe=J;break t}J=Oe(J),Y=Oe(Y)}Oe=null}else Oe=null;ne!==null&&mw(le,te,ne,Oe,!1),we!==null&&Vt!==null&&mw(le,Vt,we,Oe,!0)}}e:{if(te=X?Hr(X):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var gt=DE;else if(Ii(te))if(ME)gt=Pk;else{gt=Rk;var Re=Ik}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?X&&Ju(X.elementType)&&(gt=DE):gt=Nk;if(gt&&(gt=gt(s,X))){ya(le,gt,u,oe);break e}Re&&Re(s,te,X),s==="focusout"&&X&&te.type==="number"&&X.memoizedProps.value!=null&&cl(te,"number",te.value)}switch(Re=X?Hr(X):window,s){case"focusin":(Ii(Re)||Re.contentEditable==="true")&&(yl=Re,Cg=X,sc=null);break;case"focusout":sc=Cg=yl=null;break;case"mousedown":Ig=!0;break;case"contextmenu":case"mouseup":case"dragend":Ig=!1,zE(le,u,oe);break;case"selectionchange":if(Mk)break;case"keydown":case"keyup":zE(le,u,oe)}var Qe;if(w)e:{switch(s){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Ze?It(s,u)&&(lt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(lt="onCompositionStart");lt&&(W&&u.locale!=="ko"&&(Ze||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Ze&&(Qe=Xs()):(ji=oe,hl="value"in ji?ji.value:ji.textContent,Ze=!0)),Re=wh(X,lt),0<Re.length&&(lt=new Zu(lt,s,null,u,oe),le.push({event:lt,listeners:Re}),Qe?lt.data=Qe:(Qe=vn(u),Qe!==null&&(lt.data=Qe)))),(Qe=O?On(s,u):Un(s,u))&&(lt=wh(X,"onBeforeInput"),0<lt.length&&(Re=new Zu("onBeforeInput","beforeinput",null,u,oe),le.push({event:Re,listeners:lt}),Re.data=Qe)),gV(le,s,X,u,oe)}hw(le,a)})}function Nc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function wh(s,a){for(var u=a+"Capture",h=[];s!==null;){var _=s,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=Ci(s,u),_!=null&&h.unshift(Nc(s,_,E)),_=Ci(s,a),_!=null&&h.push(Nc(s,_,E))),s.tag===3)return h;s=s.return}return[]}function TV(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function mw(s,a,u,h,_){for(var E=a._reactName,A=[];u!==null&&u!==h;){var M=u,j=M.alternate,X=M.stateNode;if(M=M.tag,j!==null&&j===h)break;M!==5&&M!==26&&M!==27||X===null||(j=X,_?(X=Ci(u,E),X!=null&&A.unshift(Nc(u,X,j))):_||(X=Ci(u,E),X!=null&&A.push(Nc(u,X,j)))),u=u.return}A.length!==0&&s.push({event:a,listeners:A})}var EV=/\r\n?/g,SV=/\u0000|\uFFFD/g;function gw(s){return(typeof s=="string"?s:""+s).replace(EV,`
`).replace(SV,"")}function yw(s,a){return a=gw(a),gw(s)===a}function kt(s,a,u,h,_,E){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||lr(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&lr(s,""+h);break;case"className":Js(s,"class",h);break;case"tabIndex":Js(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Js(s,u,h);break;case"style":_f(s,h,E);break;case"data":if(a!=="object"){Js(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=$r(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&kt(s,a,"name",_.name,_,null),kt(s,a,"formEncType",_.formEncType,_,null),kt(s,a,"formMethod",_.formMethod,_,null),kt(s,a,"formTarget",_.formTarget,_,null)):(kt(s,a,"encType",_.encType,_,null),kt(s,a,"method",_.method,_,null),kt(s,a,"target",_.target,_,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=$r(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Ln);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=$r(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":rt("beforetoggle",s),rt("toggle",s),Ys(s,"popover",h);break;case"xlinkActuate":ar(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ar(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ar(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ar(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ar(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ar(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ar(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ar(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ar(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ys(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Eg.get(u)||u,Ys(s,u,h))}}function Zy(s,a,u,h,_,E){switch(u){case"style":_f(s,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?lr(s,h):(typeof h=="number"||typeof h=="bigint")&&lr(s,""+h);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),E=s[dn]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,_),typeof h=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,_);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Ys(s,u,h)}}}function $n(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var h=!1,_=!1,E;for(E in u)if(u.hasOwnProperty(E)){var A=u[E];if(A!=null)switch(E){case"src":h=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:kt(s,a,E,A,u,null)}}_&&kt(s,a,"srcSet",u.srcSet,u,null),h&&kt(s,a,"src",u.src,u,null);return;case"input":rt("invalid",s);var M=E=A=_=null,j=null,X=null;for(h in u)if(u.hasOwnProperty(h)){var oe=u[h];if(oe!=null)switch(h){case"name":_=oe;break;case"type":A=oe;break;case"checked":j=oe;break;case"defaultChecked":X=oe;break;case"value":E=oe;break;case"defaultValue":M=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,a));break;default:kt(s,a,h,oe,u,null)}}ca(s,E,M,j,X,A,_,!1);return;case"select":rt("invalid",s),h=A=E=null;for(_ in u)if(u.hasOwnProperty(_)&&(M=u[_],M!=null))switch(_){case"value":E=M;break;case"defaultValue":A=M;break;case"multiple":h=M;default:kt(s,a,_,M,u,null)}a=E,u=A,s.multiple=!!h,a!=null?mt(s,!!h,a,!1):u!=null&&mt(s,!!h,u,!0);return;case"textarea":rt("invalid",s),E=_=h=null;for(A in u)if(u.hasOwnProperty(A)&&(M=u[A],M!=null))switch(A){case"value":h=M;break;case"defaultValue":_=M;break;case"children":E=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:kt(s,a,A,M,u,null)}Qs(s,h,_,E);return;case"option":for(j in u)if(u.hasOwnProperty(j)&&(h=u[j],h!=null))switch(j){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:kt(s,a,j,h,u,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(h=0;h<Rc.length;h++)rt(Rc[h],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(h=u[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:kt(s,a,X,h,u,null)}return;default:if(Ju(a)){for(oe in u)u.hasOwnProperty(oe)&&(h=u[oe],h!==void 0&&Zy(s,a,oe,h,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(h=u[M],h!=null&&kt(s,a,M,h,u,null))}function bV(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,A=null,M=null,j=null,X=null,oe=null;for(ne in u){var le=u[ne];if(u.hasOwnProperty(ne)&&le!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":j=le;default:h.hasOwnProperty(ne)||kt(s,a,ne,null,h,le)}}for(var te in h){var ne=h[te];if(le=u[te],h.hasOwnProperty(te)&&(ne!=null||le!=null))switch(te){case"type":E=ne;break;case"name":_=ne;break;case"checked":X=ne;break;case"defaultChecked":oe=ne;break;case"value":A=ne;break;case"defaultValue":M=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ne!==le&&kt(s,a,te,ne,h,le)}}Ws(s,A,M,j,X,oe,E,_);return;case"select":ne=A=M=te=null;for(E in u)if(j=u[E],u.hasOwnProperty(E)&&j!=null)switch(E){case"value":break;case"multiple":ne=j;default:h.hasOwnProperty(E)||kt(s,a,E,null,h,j)}for(_ in h)if(E=h[_],j=u[_],h.hasOwnProperty(_)&&(E!=null||j!=null))switch(_){case"value":te=E;break;case"defaultValue":M=E;break;case"multiple":A=E;default:E!==j&&kt(s,a,_,E,h,j)}a=M,u=A,h=ne,te!=null?mt(s,!!u,te,!1):!!h!=!!u&&(a!=null?mt(s,!!u,a,!0):mt(s,!!u,u?[]:"",!1));return;case"textarea":ne=te=null;for(M in u)if(_=u[M],u.hasOwnProperty(M)&&_!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:kt(s,a,M,null,h,_)}for(A in h)if(_=h[A],E=u[A],h.hasOwnProperty(A)&&(_!=null||E!=null))switch(A){case"value":te=_;break;case"defaultValue":ne=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==E&&kt(s,a,A,_,h,E)}da(s,te,ne);return;case"option":for(var we in u)if(te=u[we],u.hasOwnProperty(we)&&te!=null&&!h.hasOwnProperty(we))switch(we){case"selected":s.selected=!1;break;default:kt(s,a,we,null,h,te)}for(j in h)if(te=h[j],ne=u[j],h.hasOwnProperty(j)&&te!==ne&&(te!=null||ne!=null))switch(j){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:kt(s,a,j,te,h,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in u)te=u[Oe],u.hasOwnProperty(Oe)&&te!=null&&!h.hasOwnProperty(Oe)&&kt(s,a,Oe,null,h,te);for(X in h)if(te=h[X],ne=u[X],h.hasOwnProperty(X)&&te!==ne&&(te!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:kt(s,a,X,te,h,ne)}return;default:if(Ju(a)){for(var Vt in u)te=u[Vt],u.hasOwnProperty(Vt)&&te!==void 0&&!h.hasOwnProperty(Vt)&&Zy(s,a,Vt,void 0,h,te);for(oe in h)te=h[oe],ne=u[oe],!h.hasOwnProperty(oe)||te===ne||te===void 0&&ne===void 0||Zy(s,a,oe,te,h,ne);return}}for(var J in u)te=u[J],u.hasOwnProperty(J)&&te!=null&&!h.hasOwnProperty(J)&&kt(s,a,J,null,h,te);for(le in h)te=h[le],ne=u[le],!h.hasOwnProperty(le)||te===ne||te==null&&ne==null||kt(s,a,le,te,h,ne)}function vw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wV(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var _=u[h],E=_.transferSize,A=_.initiatorType,M=_.duration;if(E&&M&&vw(A)){for(A=0,M=_.responseEnd,h+=1;h<u.length;h++){var j=u[h],X=j.startTime;if(X>M)break;var oe=j.transferSize,le=j.initiatorType;oe&&vw(le)&&(j=j.responseEnd,A+=oe*(j<M?1:(M-X)/(j-X)))}if(--h,a+=8*(E+A)/(_.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var ev=null,tv=null;function Ah(s){return s.nodeType===9?s:s.ownerDocument}function _w(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function nv(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var iv=null;function AV(){var s=window.event;return s&&s.type==="popstate"?s===iv?!1:(iv=s,!0):(iv=null,!1)}var Ew=typeof setTimeout=="function"?setTimeout:void 0,xV=typeof clearTimeout=="function"?clearTimeout:void 0,Sw=typeof Promise=="function"?Promise:void 0,CV=typeof queueMicrotask=="function"?queueMicrotask:typeof Sw<"u"?function(s){return Sw.resolve(null).then(s).catch(IV)}:Ew;function IV(s){setTimeout(function(){throw s})}function bo(s){return s==="head"}function bw(s,a){var u=a,h=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(_),Hl(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Pc(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Pc(u);for(var E=u.firstChild;E;){var A=E.nextSibling,M=E.nodeName;E[rr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=A}}else u==="body"&&Pc(s.ownerDocument.body);u=_}while(u);Hl(a)}function ww(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function rv(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":rv(u),sr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function RV(s,a,u,h){for(;s.nodeType===1;){var _=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[rr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=mr(s.nextSibling),s===null)break}return null}function NV(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=mr(s.nextSibling),s===null))return null;return s}function Aw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=mr(s.nextSibling),s===null))return null;return s}function sv(s){return s.data==="$?"||s.data==="$~"}function ov(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function PV(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function mr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var av=null;function xw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return mr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function Cw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function Iw(s,a,u){switch(a=Ah(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Pc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);sr(s)}var gr=new Map,Rw=new Set;function xh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Rs=se.d;se.d={f:DV,r:MV,D:kV,C:VV,L:LV,m:OV,X:FV,S:UV,M:BV};function DV(){var s=Rs.f(),a=yh();return s||a}function MV(s){var a=or(s);a!==null&&a.tag===5&&a.type==="form"?$S(a):Rs.r(s)}var zl=typeof document>"u"?null:document;function Nw(s,a,u){var h=zl;if(h&&typeof a=="string"&&a){var _=nn(a);_='link[rel="'+s+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),Rw.has(_)||(Rw.add(_),s={rel:s,crossOrigin:u,href:a},h.querySelector(_)===null&&(a=h.createElement("link"),$n(a,"link",s),Wt(a),h.head.appendChild(a)))}}function kV(s){Rs.D(s),Nw("dns-prefetch",s,null)}function VV(s,a){Rs.C(s,a),Nw("preconnect",s,a)}function LV(s,a,u){Rs.L(s,a,u);var h=zl;if(h&&s&&a){var _='link[rel="preload"][as="'+nn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+nn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+nn(u.imageSizes)+'"]')):_+='[href="'+nn(s)+'"]';var E=_;switch(a){case"style":E=ql(s);break;case"script":E=Gl(s)}gr.has(E)||(s=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),gr.set(E,s),h.querySelector(_)!==null||a==="style"&&h.querySelector(Dc(E))||a==="script"&&h.querySelector(Mc(E))||(a=h.createElement("link"),$n(a,"link",s),Wt(a),h.head.appendChild(a)))}}function OV(s,a){Rs.m(s,a);var u=zl;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+nn(h)+'"][href="'+nn(s)+'"]',E=_;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Gl(s)}if(!gr.has(E)&&(s=v({rel:"modulepreload",href:s},a),gr.set(E,s),u.querySelector(_)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Mc(E)))return}h=u.createElement("link"),$n(h,"link",s),Wt(h),u.head.appendChild(h)}}}function UV(s,a,u){Rs.S(s,a,u);var h=zl;if(h&&s){var _=pi(h).hoistableStyles,E=ql(s);a=a||"default";var A=_.get(E);if(!A){var M={loading:0,preload:null};if(A=h.querySelector(Dc(E)))M.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},u),(u=gr.get(E))&&lv(s,u);var j=A=h.createElement("link");Wt(j),$n(j,"link",s),j._p=new Promise(function(X,oe){j.onload=X,j.onerror=oe}),j.addEventListener("load",function(){M.loading|=1}),j.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Ch(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:M},_.set(E,A)}}}function FV(s,a){Rs.X(s,a);var u=zl;if(u&&s){var h=pi(u).hoistableScripts,_=Gl(s),E=h.get(_);E||(E=u.querySelector(Mc(_)),E||(s=v({src:s,async:!0},a),(a=gr.get(_))&&uv(s,a),E=u.createElement("script"),Wt(E),$n(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function BV(s,a){Rs.M(s,a);var u=zl;if(u&&s){var h=pi(u).hoistableScripts,_=Gl(s),E=h.get(_);E||(E=u.querySelector(Mc(_)),E||(s=v({src:s,async:!0,type:"module"},a),(a=gr.get(_))&&uv(s,a),E=u.createElement("script"),Wt(E),$n(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function Pw(s,a,u,h){var _=(_=Te.current)?xh(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=ql(u.href),u=pi(_).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=ql(u.href);var E=pi(_).hoistableStyles,A=E.get(s);if(A||(_=_.ownerDocument||_,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,A),(E=_.querySelector(Dc(s)))&&!E._p&&(A.instance=E,A.state.loading=5),gr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},gr.set(s,u),E||zV(_,s,u,A.state))),a&&h===null)throw Error(i(528,""));return A}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Gl(u),u=pi(_).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ql(s){return'href="'+nn(s)+'"'}function Dc(s){return'link[rel="stylesheet"]['+s+"]"}function Dw(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function zV(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),$n(a,"link",u),Wt(a),s.head.appendChild(a))}function Gl(s){return'[src="'+nn(s)+'"]'}function Mc(s){return"script[async]"+s}function Mw(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+nn(u.href)+'"]');if(h)return a.instance=h,Wt(h),h;var _=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Wt(h),$n(h,"style",_),Ch(h,u.precedence,s),a.instance=h;case"stylesheet":_=ql(u.href);var E=s.querySelector(Dc(_));if(E)return a.state.loading|=4,a.instance=E,Wt(E),E;h=Dw(u),(_=gr.get(_))&&lv(h,_),E=(s.ownerDocument||s).createElement("link"),Wt(E);var A=E;return A._p=new Promise(function(M,j){A.onload=M,A.onerror=j}),$n(E,"link",h),a.state.loading|=4,Ch(E,u.precedence,s),a.instance=E;case"script":return E=Gl(u.src),(_=s.querySelector(Mc(E)))?(a.instance=_,Wt(_),_):(h=u,(_=gr.get(E))&&(h=v({},u),uv(h,_)),s=s.ownerDocument||s,_=s.createElement("script"),Wt(_),$n(_,"link",h),s.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Ch(h,u.precedence,s));return a.instance}function Ch(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=h.length?h[h.length-1]:null,E=_,A=0;A<h.length;A++){var M=h[A];if(M.dataset.precedence===a)E=M;else if(E!==_)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function lv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function uv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Ih=null;function kw(s,a,u){if(Ih===null){var h=new Map,_=Ih=new Map;_.set(u,h)}else _=Ih,h=_.get(u),h||(h=new Map,_.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),_=0;_<u.length;_++){var E=u[_];if(!(E[rr]||E[qt]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var A=E.getAttribute(a)||"";A=s+A;var M=h.get(A);M?M.push(E):h.set(A,[E])}}return h}function Vw(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function qV(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Lw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function GV(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=ql(h.href),E=a.querySelector(Dc(_));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Rh.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=E,Wt(E);return}E=a.ownerDocument||a,h=Dw(h),(_=gr.get(_))&&lv(h,_),E=E.createElement("link"),Wt(E);var A=E;A._p=new Promise(function(M,j){A.onload=M,A.onerror=j}),$n(E,"link",h),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Rh.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var cv=0;function HV(s,a){return s.stylesheets&&s.count===0&&Ph(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Ph(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+a);0<s.imgBytes&&cv===0&&(cv=62500*wV());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ph(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>cv?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(_)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ph(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Nh=null;function Ph(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Nh=new Map,a.forEach(jV,s),Nh=null,Rh.call(s))}function jV(s,a){if(!(a.state.loading&4)){var u=Nh.get(s);if(u)var h=u.get(null);else{u=new Map,Nh.set(s,u);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var A=_[E];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),h=A)}h&&u.set(null,h)}_=a.instance,A=_.getAttribute("data-precedence"),E=u.get(A)||h,E===h&&u.set(null,_),u.set(A,_),this.count++,h=Rh.bind(this),_.addEventListener("load",h),_.addEventListener("error",h),E?E.parentNode.insertBefore(_,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),a.state.loading|=4}}var kc={$$typeof:U,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function $V(s,a,u,h,_,E,A,M,j){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ft(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.hiddenUpdates=Ft(null),this.identifierPrefix=h,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Ow(s,a,u,h,_,E,A,M,j,X,oe,le){return s=new $V(s,a,u,A,j,X,oe,le,M),a=1,E===!0&&(a|=24),E=Ki(3,null,null,a),s.current=E,E.stateNode=s,a=Gg(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:u,cache:a},Kg(E),s}function Uw(s){return s?(s=Tl,s):Tl}function Fw(s,a,u,h,_,E){_=Uw(_),h.context===null?h.context=_:h.pendingContext=_,h=fo(a),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=ho(s,h,a),u!==null&&(Mi(u,s,a),fc(u,s,a))}function Bw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function dv(s,a){Bw(s,a),(s=s.alternate)&&Bw(s,a)}function zw(s){if(s.tag===13||s.tag===31){var a=Ta(s,67108864);a!==null&&Mi(a,s,67108864),dv(s,67108864)}}function qw(s){if(s.tag===13||s.tag===31){var a=Xi();a=qn(a);var u=Ta(s,a);u!==null&&Mi(u,s,a),dv(s,a)}}var Dh=!0;function KV(s,a,u,h){var _=ee.T;ee.T=null;var E=se.p;try{se.p=2,fv(s,a,u,h)}finally{se.p=E,ee.T=_}}function YV(s,a,u,h){var _=ee.T;ee.T=null;var E=se.p;try{se.p=8,fv(s,a,u,h)}finally{se.p=E,ee.T=_}}function fv(s,a,u,h){if(Dh){var _=hv(h);if(_===null)Xy(s,a,h,Mh,u),Hw(s,h);else if(WV(_,s,a,u,h))h.stopPropagation();else if(Hw(s,h),a&4&&-1<JV.indexOf(s)){for(;_!==null;){var E=or(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var A=nt(E.pendingLanes);if(A!==0){var M=E;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var j=1<<31-be(A);M.entanglements[1]|=j,A&=~j}Xr(E),(St&6)===0&&(mh=wt()+500,Ic(0))}}break;case 31:case 13:M=Ta(E,2),M!==null&&Mi(M,E,2),yh(),dv(E,2)}if(E=hv(h),E===null&&Xy(s,a,h,Mh,u),E===_)break;_=E}_!==null&&h.stopPropagation()}else Xy(s,a,h,null,u)}}function hv(s){return s=fl(s),pv(s)}var Mh=null;function pv(s){if(Mh=null,s=xi(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Mh=s,null}function Gw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zt()){case Ke:return 2;case At:return 8;case xt:case Me:return 32;case Bi:return 268435456;default:return 32}default:return 32}}var mv=!1,wo=null,Ao=null,xo=null,Vc=new Map,Lc=new Map,Co=[],JV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hw(s,a){switch(s){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":Vc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(a.pointerId)}}function Oc(s,a,u,h,_,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:E,targetContainers:[_]},a!==null&&(a=or(a),a!==null&&zw(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),s)}function WV(s,a,u,h,_){switch(a){case"focusin":return wo=Oc(wo,s,a,u,h,_),!0;case"dragenter":return Ao=Oc(Ao,s,a,u,h,_),!0;case"mouseover":return xo=Oc(xo,s,a,u,h,_),!0;case"pointerover":var E=_.pointerId;return Vc.set(E,Oc(Vc.get(E)||null,s,a,u,h,_)),!0;case"gotpointercapture":return E=_.pointerId,Lc.set(E,Oc(Lc.get(E)||null,s,a,u,h,_)),!0}return!1}function jw(s){var a=xi(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,zi(s.priority,function(){qw(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,zi(s.priority,function(){qw(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function kh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=hv(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);dl=h,u.target.dispatchEvent(h),dl=null}else return a=or(u),a!==null&&zw(a),s.blockedOn=u,!1;a.shift()}return!0}function $w(s,a,u){kh(s)&&u.delete(a)}function QV(){mv=!1,wo!==null&&kh(wo)&&(wo=null),Ao!==null&&kh(Ao)&&(Ao=null),xo!==null&&kh(xo)&&(xo=null),Vc.forEach($w),Lc.forEach($w)}function Vh(s,a){s.blockedOn===a&&(s.blockedOn=null,mv||(mv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,QV)))}var Lh=null;function Kw(s){Lh!==s&&(Lh=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Lh===s&&(Lh=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],_=s[a+2];if(typeof h!="function"){if(pv(h||u)===null)continue;break}var E=or(u);E!==null&&(s.splice(a,3),a-=3,hy(E,{pending:!0,data:_,method:u.method,action:h},h,_))}}))}function Hl(s){function a(j){return Vh(j,s)}wo!==null&&Vh(wo,s),Ao!==null&&Vh(Ao,s),xo!==null&&Vh(xo,s),Vc.forEach(a),Lc.forEach(a);for(var u=0;u<Co.length;u++){var h=Co[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Co.length&&(u=Co[0],u.blockedOn===null);)jw(u),u.blockedOn===null&&Co.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var _=u[h],E=u[h+1],A=_[dn]||null;if(typeof E=="function")A||Kw(u);else if(A){var M=null;if(E&&E.hasAttribute("formAction")){if(_=E,A=E[dn]||null)M=A.formAction;else if(pv(_)!==null)continue}else M=A.action;typeof M=="function"?u[h+1]=M:(u.splice(h,3),h-=3),Kw(u)}}}function Yw(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(A){return _=A})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function gv(s){this._internalRoot=s}Oh.prototype.render=gv.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=Xi();Fw(u,h,s,a,null,null)},Oh.prototype.unmount=gv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Fw(s.current,2,null,s,null,null),yh(),a[qi]=null}};function Oh(s){this._internalRoot=s}Oh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Nn();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Co.length&&a!==0&&a<Co[u].priority;u++);Co.splice(u,0,s),u===0&&jw(s)}};var Jw=e.version;if(Jw!=="19.2.0")throw Error(i(527,Jw,"19.2.0"));se.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var XV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{fi=Uh.inject(XV),tn=Uh}catch{}}return Fc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",_=nb,E=ib,A=rb;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=Ow(s,1,!1,null,null,u,h,null,_,E,A,Yw),s[qi]=a.current,Qy(s),new gv(a)},Fc.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,_="",E=nb,A=ib,M=rb,j=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.formState!==void 0&&(j=u.formState)),a=Ow(s,1,!0,a,u??null,h,_,j,E,A,M,Yw),a.context=Uw(null),u=a.current,h=Xi(),h=qn(h),_=fo(h),_.callback=null,ho(u,_,h),u=h,a.current.lanes=u,Ct(a,u),Xr(a),s[qi]=a.current,Qy(s),new Oh(a)},Fc.version="19.2.0",Fc}var sA;function aL(){if(sA)return _v.exports;sA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_v.exports=oL(),_v.exports}var lL=aL();const uL=E1(lL),Bc=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],cL=({onComplete:t})=>{const[e,n]=B.useState(0),i=()=>{e<Bc.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},r=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Bc[e];return S.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[S.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:S.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Bc.length*100}%`}})}),S.jsxs("div",{className:"p-8 text-center",children:[S.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),S.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),S.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),S.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Bc.map((l,c)=>S.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${c===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},c))}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),S.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Bc.length-1?"Suivant":"Commencer"})]})]})]})})},dL=()=>{};var oA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},fL=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},w1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,d=r+2<t.length,f=d?t[r+2]:0,p=o>>2,v=(o&3)<<4|c>>4;let T=(c&15)<<2|f>>6,b=f&63;d||(b=64,l||(T=64)),i.push(n[p],n[v],n[T],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||v==null)throw new hL;const T=o<<2|c>>4;if(i.push(T),f!==64){const b=c<<4&240|f>>2;if(i.push(b),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pL=function(t){const e=b1(t);return w1.encodeByteArray(e,!0)},Lp=function(t){return pL(t).replace(/\./g,"")},A1=function(t){try{return w1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=()=>mL().__FIREBASE_DEFAULTS__,yL=()=>{if(typeof process>"u"||typeof oA>"u")return;const t=oA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A1(t[1]);return e&&JSON.parse(e)},Nm=()=>{try{return dL()||gL()||yL()||vL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},x1=t=>{var e,n;return(n=(e=Nm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},A_=t=>{const e=x1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},C1=()=>{var t;return(t=Nm())===null||t===void 0?void 0:t.config},I1=t=>{var e;return(e=Nm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lp(JSON.stringify(n)),Lp(JSON.stringify(l)),""].join(".")}const ld={};function TL(){const t={prod:[],emulator:[]};for(const e of Object.keys(ld))ld[e]?t.emulator.push(e):t.prod.push(e);return t}function EL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let aA=!1;function Dm(t,e){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||ld[t]===e||ld[t]||aA)return;ld[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=TL().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{aA=!0,l()},T}function p(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=EL(i),b=n("text"),C=document.getElementById(b)||document.createElement("span"),N=n("learnmore"),D=document.getElementById(N)||document.createElement("a"),L=n("preprendIcon"),k=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const U=T.element;c(U),p(D,N);const H=f();d(k,L),U.append(k,C,D,H),document.body.appendChild(U)}o?(C.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(li())}function bL(){var t;const e=(t=Nm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CL(){const t=li();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IL(){return!bL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RL(){try{return typeof indexedDB=="object"}catch{return!1}}function NL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="FirebaseError";class Br extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=PL,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jd.prototype.create)}}class Jd{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?DL(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new Br(r,c,i)}}function DL(t,e){return t.replace(ML,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const ML=/\{\$([^}]+)}/g;function kL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ja(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(lA(o)&&lA(l)){if(!Ja(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function lA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Jc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Wc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VL(t,e){const n=new LL(t,e);return n.subscribe.bind(n)}class LL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");OL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=bv),r.error===void 0&&(r.error=bv),r.complete===void 0&&(r.complete=bv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(t){return t&&t._delegate?t._delegate:t}class Us{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new _L;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BL(e))try{this.getOrInitializeService({instanceIdentifier:Va})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Va){return this.instances.has(e)}getOptions(e=Va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Va){return this.component?this.component.multipleInstances?e:Va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FL(t){return t===Va?void 0:t}function BL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ut||(ut={}));const qL={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},GL=ut.INFO,HL={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},jL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=HL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class x_{constructor(e){this.name=e,this._logLevel=GL,this._logHandler=jL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const $L=(t,e)=>e.some(n=>t instanceof n);let uA,cA;function KL(){return uA||(uA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YL(){return cA||(cA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N1=new WeakMap,o0=new WeakMap,P1=new WeakMap,wv=new WeakMap,C_=new WeakMap;function JL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(zo(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&N1.set(n,t)}).catch(()=>{}),C_.set(e,t),e}function WL(t){if(o0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});o0.set(t,e)}let a0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return o0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||P1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QL(t){a0=t(a0)}function XL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Av(this),e,...n);return P1.set(i,e.sort?e.sort():[e]),zo(i)}:YL().includes(t)?function(...e){return t.apply(Av(this),e),zo(N1.get(this))}:function(...e){return zo(t.apply(Av(this),e))}}function ZL(t){return typeof t=="function"?XL(t):(t instanceof IDBTransaction&&WL(t),$L(t,KL())?new Proxy(t,a0):t)}function zo(t){if(t instanceof IDBRequest)return JL(t);if(wv.has(t))return wv.get(t);const e=ZL(t);return e!==t&&(wv.set(t,e),C_.set(e,t)),e}const Av=t=>C_.get(t);function eO(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=zo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(zo(l.result),d.oldVersion,d.newVersion,zo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const tO=["get","getKey","getAll","getAllKeys","count"],nO=["put","add","delete","clear"],xv=new Map;function dA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xv.get(e))return xv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=nO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||tO.includes(n)))return;const o=async function(l,...c){const d=this.transaction(l,r?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&d.done]))[0]};return xv.set(e,o),o}QL(t=>({...t,get:(e,n,i)=>dA(e,n)||t.get(e,n,i),has:(e,n)=>!!dA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rO(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function rO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const l0="@firebase/app",fA="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new x_("@firebase/app"),sO="@firebase/app-compat",oO="@firebase/analytics-compat",aO="@firebase/analytics",lO="@firebase/app-check-compat",uO="@firebase/app-check",cO="@firebase/auth",dO="@firebase/auth-compat",fO="@firebase/database",hO="@firebase/data-connect",pO="@firebase/database-compat",mO="@firebase/functions",gO="@firebase/functions-compat",yO="@firebase/installations",vO="@firebase/installations-compat",_O="@firebase/messaging",TO="@firebase/messaging-compat",EO="@firebase/performance",SO="@firebase/performance-compat",bO="@firebase/remote-config",wO="@firebase/remote-config-compat",AO="@firebase/storage",xO="@firebase/storage-compat",CO="@firebase/firestore",IO="@firebase/ai",RO="@firebase/firestore-compat",NO="firebase",PO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="[DEFAULT]",DO={[l0]:"fire-core",[sO]:"fire-core-compat",[aO]:"fire-analytics",[oO]:"fire-analytics-compat",[uO]:"fire-app-check",[lO]:"fire-app-check-compat",[cO]:"fire-auth",[dO]:"fire-auth-compat",[fO]:"fire-rtdb",[hO]:"fire-data-connect",[pO]:"fire-rtdb-compat",[mO]:"fire-fn",[gO]:"fire-fn-compat",[yO]:"fire-iid",[vO]:"fire-iid-compat",[_O]:"fire-fcm",[TO]:"fire-fcm-compat",[EO]:"fire-perf",[SO]:"fire-perf-compat",[bO]:"fire-rc",[wO]:"fire-rc-compat",[AO]:"fire-gcs",[xO]:"fire-gcs-compat",[CO]:"fire-fst",[RO]:"fire-fst-compat",[IO]:"fire-vertex","fire-js":"fire-js",[NO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=new Map,MO=new Map,c0=new Map;function hA(t,e){try{t.container.addComponent(e)}catch(n){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $o(t){const e=t.name;if(c0.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;c0.set(e,t);for(const n of Op.values())hA(n,t);for(const n of MO.values())hA(n,t);return!0}function Qd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ei(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qo=new Jd("app","Firebase",kO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=PO;function D1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:u0,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw qo.create("bad-app-name",{appName:String(r)});if(n||(n=C1()),!n)throw qo.create("no-options");const o=Op.get(r);if(o){if(Ja(n,o.options)&&Ja(i,o.config))return o;throw qo.create("duplicate-app",{appName:r})}const l=new zL(r);for(const d of c0.values())l.addComponent(d);const c=new VO(n,i,l);return Op.set(r,c),c}function Mm(t=u0){const e=Op.get(t);if(!e&&t===u0&&C1())return D1();if(!e)throw qo.create("no-app",{appName:t});return e}function Er(t,e,n){var i;let r=(i=DO[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(c.join(" "));return}$o(new Us(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="firebase-heartbeat-database",OO=1,Nd="firebase-heartbeat-store";let Cv=null;function M1(){return Cv||(Cv=eO(LO,OO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nd)}catch(n){console.warn(n)}}}}).catch(t=>{throw qo.create("idb-open",{originalErrorMessage:t.message})})),Cv}async function UO(t){try{const n=(await M1()).transaction(Nd),i=await n.objectStore(Nd).get(k1(t));return await n.done,i}catch(e){if(e instanceof Br)Fs.warn(e.message);else{const n=qo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(n.message)}}}async function pA(t,e){try{const i=(await M1()).transaction(Nd,"readwrite");await i.objectStore(Nd).put(e,k1(t)),await i.done}catch(n){if(n instanceof Br)Fs.warn(n.message);else{const i=qo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fs.warn(i.message)}}}function k1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=1024,BO=30;class zO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=mA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>BO){const l=HO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mA(),{heartbeatsToSend:i,unsentEntries:r}=qO(this._heartbeatsCache.heartbeats),o=Lp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fs.warn(n),""}}}function mA(){return new Date().toISOString().substring(0,10)}function qO(t,e=FO){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),gA(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),gA(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class GO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RL()?NL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return pA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return pA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gA(t){return Lp(JSON.stringify({version:2,heartbeats:t})).length}function HO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t){$o(new Us("platform-logger",e=>new iO(e),"PRIVATE")),$o(new Us("heartbeat",e=>new zO(e),"PRIVATE")),Er(l0,fA,t),Er(l0,fA,"esm2017"),Er("fire-js","")}jO("");function I_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function V1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $O=V1,L1=new Jd("auth","Firebase",V1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=new x_("@firebase/auth");function KO(t,...e){Up.logLevel<=ut.WARN&&Up.warn(`Auth (${il}): ${t}`,...e)}function pp(t,...e){Up.logLevel<=ut.ERROR&&Up.error(`Auth (${il}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,...e){throw N_(t,...e)}function Or(t,...e){return N_(t,...e)}function R_(t,e,n){const i=Object.assign(Object.assign({},$O()),{[e]:n});return new Jd("auth","Firebase",i).create(e,{appName:t.name})}function Vs(t){return R_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YO(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&br(t,"argument-error"),R_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function N_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return L1.create(t,...e)}function Fe(t,e,...n){if(!t)throw N_(e,...n)}function Ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pp(e),new Error(e)}function Bs(t,e){t||Ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JO(){return yA()==="http:"||yA()==="https:"}function yA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JO()||AL()||"connection"in navigator)?navigator.onLine:!0}function QO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bs(n>e,"Short delay should be less than long delay!"),this.isMobile=SL()||xL()}get(){return WO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t,e){Bs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],e4=new Xd(3e4,6e4);function na(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ia(t,e,n,i,r={}){return U1(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=Wd(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return wL()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&js(t.emulatorConfig.host)&&(f.credentials="include"),O1.fetch()(await F1(t,t.config.apiHost,n,c),f)})}async function U1(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},XO),e);try{const r=new n4(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Fh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Fh(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Fh(t,"user-disabled",l);const p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw R_(t,p,f);br(t,p)}}catch(r){if(r instanceof Br)throw r;br(t,"network-request-failed",{message:String(r)})}}async function Zd(t,e,n,i,r={}){const o=await ia(t,e,n,i,r);return"mfaPendingCredential"in o&&br(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function F1(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?P_(t.config,r):`${t.config.apiScheme}://${r}`;return ZO.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function t4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class n4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Or(this.auth,"network-request-failed")),e4.get())})}}function Fh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Or(t,e,i);return r.customData._tokenResponse=n,r}function vA(t){return t!==void 0&&t.enterprise!==void 0}class i4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return t4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function r4(t,e){return ia(t,"GET","/v2/recaptchaConfig",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e){return ia(t,"POST","/v1/accounts:delete",e)}async function Fp(t,e){return ia(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function o4(t,e=!1){const n=Ut(t),i=await n.getIdToken(e),r=D_(i);Fe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:ud(Iv(r.auth_time)),issuedAtTime:ud(Iv(r.iat)),expirationTime:ud(Iv(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Iv(t){return Number(t)*1e3}function D_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return pp("JWT malformed, contained fewer than 3 sections"),null;try{const r=A1(n);return r?JSON.parse(r):(pp("Failed to decode base64 JWT payload"),null)}catch(r){return pp("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function _A(t){const e=D_(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Br&&a4(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function a4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ud(this.lastLoginAt),this.creationTime=ud(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Pd(t,Fp(n,{idToken:i}));Fe(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?B1(o.providerUserInfo):[],c=c4(t.providerData,l),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new f0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function u4(t){const e=Ut(t);await Bp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function c4(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function B1(t){return t.map(e=>{var{providerId:n}=e,i=I_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t,e){const n=await U1(t,{},async()=>{const i=Wd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await F1(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&js(t.emulatorConfig.host)&&(d.credentials="include"),O1.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f4(t,e){return ia(t,"POST","/v2/accounts:revokeToken",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_A(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=_A(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await d4(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new lu;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Fe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lu,this.toJSON())}_performRefresh(){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=I_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new f0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Pd(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return o4(this,e)}reload(){return u4(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Bp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await Pd(this,s4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,d,f,p;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,D=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,L=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:U,emailVerified:H,isAnonymous:K,providerData:G,stsTokenManager:I}=n;Fe(U&&I,e,"internal-error");const R=lu.fromJSON(this.name,I);Fe(typeof U=="string",e,"internal-error"),Ro(v,e.name),Ro(T,e.name),Fe(typeof H=="boolean",e,"internal-error"),Fe(typeof K=="boolean",e,"internal-error"),Ro(b,e.name),Ro(C,e.name),Ro(N,e.name),Ro(D,e.name),Ro(L,e.name),Ro(k,e.name);const P=new kr({uid:U,auth:e,email:T,emailVerified:H,displayName:v,isAnonymous:K,photoURL:C,phoneNumber:b,tenantId:N,stsTokenManager:R,createdAt:L,lastLoginAt:k});return G&&Array.isArray(G)&&(P.providerData=G.map(V=>Object.assign({},V))),D&&(P._redirectEventId=D),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new lu;r.updateFromServerResponse(n);const o=new kr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Bp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Fe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?B1(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new lu;c.updateFromIdToken(i);const d=new kr({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new f0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new Map;function ks(t){Bs(t instanceof Function,"Expected a class definition");let e=TA.get(t);return e?(Bs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}z1.type="NONE";const EA=z1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t,e,n){return`firebase:${t}:${e}:${n}`}class uu{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=mp(this.userKey,r.apiKey,o),this.fullPersistenceKey=mp("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fp(this.auth,{idToken:e}).catch(()=>{});return n?kr._fromGetAccountInfoResponse(this.auth,n,e):null}return kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new uu(ks(EA),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||ks(EA);const l=mp(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(l);if(p){let v;if(typeof p=="string"){const T=await Fp(e,{idToken:p}).catch(()=>{});if(!T)break;v=await kr._fromGetAccountInfoResponse(e,T,p)}else v=kr._fromJSON(e,p);f!==o&&(c=v),o=f;break}}catch{}const d=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new uu(o,e,i):(o=d[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new uu(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K1(e))return"Blackberry";if(Y1(e))return"Webos";if(G1(e))return"Safari";if((e.includes("chrome/")||H1(e))&&!e.includes("edge/"))return"Chrome";if($1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function q1(t=li()){return/firefox\//i.test(t)}function G1(t=li()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H1(t=li()){return/crios\//i.test(t)}function j1(t=li()){return/iemobile/i.test(t)}function $1(t=li()){return/android/i.test(t)}function K1(t=li()){return/blackberry/i.test(t)}function Y1(t=li()){return/webos/i.test(t)}function M_(t=li()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function h4(t=li()){var e;return M_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p4(){return CL()&&document.documentMode===10}function J1(t=li()){return M_(t)||$1(t)||Y1(t)||K1(t)||/windows phone/i.test(t)||j1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e=[]){let n;switch(t){case"Browser":n=SA(li());break;case"Worker":n=`${SA(li())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${il}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const d=e(o);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(t,e={}){return ia(t,"GET","/v2/passwordPolicy",na(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=6;class v4{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:y4,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bA(this),this.idTokenSubscription=new bA(this),this.beforeStateQueue=new m4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ks(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await uu.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fp(this,{idToken:e}),i=await kr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ei(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ei(this.app))return Promise.reject(Vs(this));const n=e?Ut(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ei(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ks(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g4(this),n=new v4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jd("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await f4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ks(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await uu.create(this,[ks(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,r);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ra(t){return Ut(t)}class bA{constructor(e){this.auth=e,this.observer=null,this.addObserver=VL(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T4(t){km=t}function Q1(t){return km.loadJS(t)}function E4(){return km.recaptchaEnterpriseScript}function S4(){return km.gapiScript}function b4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class w4{constructor(){this.enterprise=new A4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class A4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const x4="recaptcha-enterprise",X1="NO_RECAPTCHA";class C4{constructor(e){this.type=x4,this.auth=ra(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{r4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new i4(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{c(d)})})}function r(o,l,c){const d=window.grecaptcha;vA(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(X1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w4().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&vA(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=E4();d.length!==0&&(d+=c),Q1(d).then(()=>{r(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function wA(t,e,n,i=!1,r=!1){const o=new C4(t);let l;if(r)l=X1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function h0(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await wA(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await wA(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t,e){const n=Qd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Ja(o,e??{}))return r;br(r,"already-initialized")}return n.initialize({options:e})}function R4(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ks);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function N4(t,e,n){const i=ra(t);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=Z1(e),{host:l,port:c}=P4(e),d=c===null?"":`:${c}`,f={url:`${o}//${l}${d}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(Ja(f,i.config.emulator)&&Ja(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,js(l)?(Pm(`${o}//${l}${d}`),Dm("Auth",!0)):D4()}function Z1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P4(t){const e=Z1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:AA(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:AA(l)}}}function AA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function D4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,n){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}async function M4(t,e){return ia(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e){return Zd(t,"POST","/v1/accounts:signInWithPassword",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",na(t,e))}async function L4(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends k_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Dd(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Dd(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h0(e,n,"signInWithPassword",k4);case"emailLink":return V4(e,{email:this._email,oobCode:this._password});default:br(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h0(e,i,"signUpPassword",M4);case"emailLink":return L4(e,{idToken:n,email:this._email,oobCode:this._password});default:br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(t,e){return Zd(t,"POST","/v1/accounts:signInWithIdp",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="http://localhost";class Wa extends k_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=I_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Wa(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return cu(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,cu(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cu(e,n)}buildRequest(){const e={requestUri:O4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function F4(t){const e=Jc(Wc(t)).link,n=e?Jc(Wc(e)).deep_link_id:null,i=Jc(Wc(t)).deep_link_id;return(i?Jc(Wc(i)).link:null)||i||n||e||t}class V_{constructor(e){var n,i,r,o,l,c;const d=Jc(Wc(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,p=(i=d.oobCode)!==null&&i!==void 0?i:null,v=U4((r=d.mode)!==null&&r!==void 0?r:null);Fe(f&&p&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=p,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=F4(e);try{return new V_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this.providerId=Pu.PROVIDER_ID}static credential(e,n){return Dd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=V_.parseLink(n);return Fe(i,"argument-error"),Dd._fromEmailAndCode(e,i.code,i.tenantId)}}Pu.PROVIDER_ID="password";Pu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends L_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends ef{constructor(){super("facebook.com")}static credential(e){return Wa._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.FACEBOOK_SIGN_IN_METHOD="facebook.com";Do.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends ef{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wa._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ds.credential(n,i)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends ef{constructor(){super("github.com")}static credential(e){return Wa._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.GITHUB_SIGN_IN_METHOD="github.com";Mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends ef{constructor(){super("twitter.com")}static credential(e,n){return Wa._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ko.credential(n,i)}catch{return null}}}ko.TWITTER_SIGN_IN_METHOD="twitter.com";ko.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(t,e){return Zd(t,"POST","/v1/accounts:signUp",na(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await kr._fromIdTokenResponse(e,i,r),l=xA(i);return new Qa({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=xA(i);return new Qa({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function xA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends Br{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,zp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new zp(e,n,i,r)}}function eN(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?zp._fromErrorAndOperation(t,o,e,i):o})}async function z4(t,e,n=!1){const i=await Pd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qa._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q4(t,e,n=!1){const{auth:i}=t;if(Ei(i.app))return Promise.reject(Vs(i));const r="reauthenticate";try{const o=await Pd(t,eN(i,r,e,t),n);Fe(o.idToken,i,"internal-error");const l=D_(o.idToken);Fe(l,i,"internal-error");const{sub:c}=l;return Fe(t.uid===c,i,"user-mismatch"),Qa._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&br(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e,n=!1){if(Ei(t.app))return Promise.reject(Vs(t));const i="signIn",r=await eN(t,i,e),o=await Qa._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function G4(t,e){return tN(ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t){const e=ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function H4(t,e,n){if(Ei(t.app))return Promise.reject(Vs(t));const i=ra(t),l=await h0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B4).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&nN(t),d}),c=await Qa._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function j4(t,e,n){return Ei(t.app)?Promise.reject(Vs(t)):G4(Ut(t),Pu.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&nN(t),i})}function $4(t,e,n,i){return Ut(t).onIdTokenChanged(e,n,i)}function K4(t,e,n){return Ut(t).beforeAuthStateChanged(e,n)}function Y4(t,e,n,i){return Ut(t).onAuthStateChanged(e,n,i)}function Rv(t){return Ut(t).signOut()}const qp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qp,"1"),this.storage.removeItem(qp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=1e3,W4=10;class rN extends iN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);p4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,W4):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},J4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rN.type="LOCAL";const Q4=rN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN extends iN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sN.type="SESSION";const oN=sN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Vm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(n.origin,o)),d=await X4(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,d)=>{const f=O_("",20);r.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const T=v;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(T.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function eU(t){ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function tU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iU(){return aN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="firebaseLocalStorageDb",rU=1,Gp="firebaseLocalStorage",uN="fbase_key";class tf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lm(t,e){return t.transaction([Gp],e?"readwrite":"readonly").objectStore(Gp)}function sU(){const t=indexedDB.deleteDatabase(lN);return new tf(t).toPromise()}function p0(){const t=indexedDB.open(lN,rU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Gp,{keyPath:uN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Gp)?e(i):(i.close(),await sU(),e(await p0()))})})}async function CA(t,e,n){const i=Lm(t,!0).put({[uN]:e,value:n});return new tf(i).toPromise()}async function oU(t,e){const n=Lm(t,!1).get(e),i=await new tf(n).toPromise();return i===void 0?null:i.value}function IA(t,e){const n=Lm(t,!0).delete(e);return new tf(n).toPromise()}const aU=800,lU=3;class cN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await p0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>lU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vm._getInstance(iU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tU(),!this.activeServiceWorker)return;this.sender=new Z4(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await p0();return await CA(e,qp,"1"),await IA(e,qp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>CA(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>oU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>IA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Lm(r,!1).getAll();return new tf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cN.type="LOCAL";const uU=cN;new Xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e){return e?ks(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_ extends k_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cU(t){return tN(t.auth,new U_(t),t.bypassAuthState)}function dU(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),q4(n,new U_(t),t.bypassAuthState)}async function fU(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),z4(n,new U_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cU;case"linkViaPopup":case"linkViaRedirect":return fU;case"reauthViaPopup":case"reauthViaRedirect":return dU;default:br(this.auth,"internal-error")}}resolve(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=new Xd(2e3,1e4);async function pU(t,e,n){if(Ei(t.app))return Promise.reject(Or(t,"operation-not-supported-in-this-environment"));const i=ra(t);YO(t,e,L_);const r=dN(i,n);return new Ba(i,"signInViaPopup",e,r).executeNotNull()}class Ba extends fN{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Bs(this.filter.length===1,"Popup operations only handle one event");const e=O_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hU.get())};e()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="pendingRedirect",gp=new Map;class gU extends fN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=gp.get(this.auth._key());if(!e){try{const i=await yU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}gp.set(this.auth._key(),e)}return this.bypassAuthState||gp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yU(t,e){const n=TU(e),i=_U(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function vU(t,e){gp.set(t._key(),e)}function _U(t){return ks(t._redirectPersistence)}function TU(t){return mp(mU,t.config.apiKey,t.name)}async function EU(t,e,n=!1){if(Ei(t.app))return Promise.reject(Vs(t));const i=ra(t),r=dN(i,e),l=await new gU(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=600*1e3;class bU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!hN(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Or(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SU&&this.cachedEventUids.clear(),this.cachedEventUids.has(RA(e))}saveEventToCache(e){this.cachedEventUids.add(RA(e)),this.lastProcessedEventTime=Date.now()}}function RA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e={}){return ia(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CU=/^https?/;async function IU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AU(t);for(const n of e)try{if(RU(n))return}catch{}br(t,"unauthorized-domain")}function RU(t){const e=d0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!CU.test(n))return!1;if(xU.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new Xd(3e4,6e4);function NA(){const t=ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PU(t){return new Promise((e,n)=>{var i,r,o;function l(){NA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NA(),n(Or(t,"network-request-failed"))},timeout:NU.get()})}if(!((r=(i=ts().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ts().gapi)===null||o===void 0)&&o.load)l();else{const c=b4("iframefcb");return ts()[c]=()=>{gapi.load?l():n(Or(t,"network-request-failed"))},Q1(`${S4()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw yp=null,e})}let yp=null;function DU(t){return yp=yp||PU(t),yp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU=new Xd(5e3,15e3),kU="__/auth/iframe",VU="emulator/auth/iframe",LU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UU(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?P_(e,VU):`https://${t.config.authDomain}/${kU}`,i={apiKey:e.apiKey,appName:t.name,v:il},r=OU.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Wd(i).slice(1)}`}async function FU(t){const e=await DU(t),n=ts().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:UU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LU,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Or(t,"network-request-failed"),c=ts().setTimeout(()=>{o(l)},MU.get());function d(){ts().clearTimeout(c),r(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zU=500,qU=600,GU="_blank",HU="http://localhost";class PA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jU(t,e,n,i=zU,r=qU){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},BU),{width:i.toString(),height:r.toString(),top:o,left:l}),f=li().toLowerCase();n&&(c=H1(f)?GU:n),q1(f)&&(e=e||HU,d.scrollbars="yes");const p=Object.entries(d).reduce((T,[b,C])=>`${T}${b}=${C},`,"");if(h4(f)&&c!=="_self")return $U(e||"",c),new PA(null);const v=window.open(e||"",c,p);Fe(v,t,"popup-blocked");try{v.focus()}catch{}return new PA(v)}function $U(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="__/auth/handler",YU="emulator/auth/handler",JU=encodeURIComponent("fac");async function DA(t,e,n,i,r,o){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:il,eventId:r};if(e instanceof L_){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",kL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof ef){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),f=d?`#${JU}=${encodeURIComponent(d)}`:"";return`${WU(t)}?${Wd(c).slice(1)}${f}`}function WU({config:t}){return t.emulator?P_(t,YU):`https://${t.authDomain}/${KU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="webStorageSupport";class QU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oN,this._completeRedirectFn=EU,this._overrideRedirectResult=vU}async _openPopup(e,n,i,r){var o;Bs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await DA(e,n,i,d0(),r);return jU(e,l,O_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await DA(e,n,i,d0(),r);return eU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Bs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await FU(e),i=new bU(e);return n.register("authEvent",r=>(Fe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nv,{type:Nv},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Nv];l!==void 0&&n(!!l),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J1()||G1()||M_()}}const XU=QU;var MA="@firebase/auth",kA="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t3(t){$o(new Us("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Fe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W1(t)},f=new _4(i,r,o,d);return R4(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),$o(new Us("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(i=>new ZU(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(MA,kA,e3(t)),Er(MA,kA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=300,i3=I1("authIdTokenMaxAge")||n3;let VA=null;const r3=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>i3)return;const r=n==null?void 0:n.token;VA!==r&&(VA=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function s3(t=Mm()){const e=Qd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=I4(t,{popupRedirectResolver:XU,persistence:[uU,Q4,oN]}),i=I1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=r3(o.toString());K4(n,l,()=>l(n.currentUser)),$4(n,c=>l(c))}}const r=x1("auth");return r&&N4(n,`http://${r}`),n}function o3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}T4({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Or("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",o3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t3("Browser");var a3="firebase",l3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(a3,l3,"app");var LA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Go,pN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function P(){}P.prototype=R.prototype,I.D=R.prototype,I.prototype=new P,I.prototype.constructor=I,I.C=function(V,F,q){for(var z=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)z[xe-2]=arguments[xe];return R.prototype[F].apply(V,z)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,R,P){P||(P=0);var V=Array(16);if(typeof R=="string")for(var F=0;16>F;++F)V[F]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(F=0;16>F;++F)V[F]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=I.g[0],P=I.g[1],F=I.g[2];var q=I.g[3],z=R+(q^P&(F^q))+V[0]+3614090360&4294967295;R=P+(z<<7&4294967295|z>>>25),z=q+(F^R&(P^F))+V[1]+3905402710&4294967295,q=R+(z<<12&4294967295|z>>>20),z=F+(P^q&(R^P))+V[2]+606105819&4294967295,F=q+(z<<17&4294967295|z>>>15),z=P+(R^F&(q^R))+V[3]+3250441966&4294967295,P=F+(z<<22&4294967295|z>>>10),z=R+(q^P&(F^q))+V[4]+4118548399&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(F^R&(P^F))+V[5]+1200080426&4294967295,q=R+(z<<12&4294967295|z>>>20),z=F+(P^q&(R^P))+V[6]+2821735955&4294967295,F=q+(z<<17&4294967295|z>>>15),z=P+(R^F&(q^R))+V[7]+4249261313&4294967295,P=F+(z<<22&4294967295|z>>>10),z=R+(q^P&(F^q))+V[8]+1770035416&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(F^R&(P^F))+V[9]+2336552879&4294967295,q=R+(z<<12&4294967295|z>>>20),z=F+(P^q&(R^P))+V[10]+4294925233&4294967295,F=q+(z<<17&4294967295|z>>>15),z=P+(R^F&(q^R))+V[11]+2304563134&4294967295,P=F+(z<<22&4294967295|z>>>10),z=R+(q^P&(F^q))+V[12]+1804603682&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(F^R&(P^F))+V[13]+4254626195&4294967295,q=R+(z<<12&4294967295|z>>>20),z=F+(P^q&(R^P))+V[14]+2792965006&4294967295,F=q+(z<<17&4294967295|z>>>15),z=P+(R^F&(q^R))+V[15]+1236535329&4294967295,P=F+(z<<22&4294967295|z>>>10),z=R+(F^q&(P^F))+V[1]+4129170786&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^F&(R^P))+V[6]+3225465664&4294967295,q=R+(z<<9&4294967295|z>>>23),z=F+(R^P&(q^R))+V[11]+643717713&4294967295,F=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(F^q))+V[0]+3921069994&4294967295,P=F+(z<<20&4294967295|z>>>12),z=R+(F^q&(P^F))+V[5]+3593408605&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^F&(R^P))+V[10]+38016083&4294967295,q=R+(z<<9&4294967295|z>>>23),z=F+(R^P&(q^R))+V[15]+3634488961&4294967295,F=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(F^q))+V[4]+3889429448&4294967295,P=F+(z<<20&4294967295|z>>>12),z=R+(F^q&(P^F))+V[9]+568446438&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^F&(R^P))+V[14]+3275163606&4294967295,q=R+(z<<9&4294967295|z>>>23),z=F+(R^P&(q^R))+V[3]+4107603335&4294967295,F=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(F^q))+V[8]+1163531501&4294967295,P=F+(z<<20&4294967295|z>>>12),z=R+(F^q&(P^F))+V[13]+2850285829&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^F&(R^P))+V[2]+4243563512&4294967295,q=R+(z<<9&4294967295|z>>>23),z=F+(R^P&(q^R))+V[7]+1735328473&4294967295,F=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(F^q))+V[12]+2368359562&4294967295,P=F+(z<<20&4294967295|z>>>12),z=R+(P^F^q)+V[5]+4294588738&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^F)+V[8]+2272392833&4294967295,q=R+(z<<11&4294967295|z>>>21),z=F+(q^R^P)+V[11]+1839030562&4294967295,F=q+(z<<16&4294967295|z>>>16),z=P+(F^q^R)+V[14]+4259657740&4294967295,P=F+(z<<23&4294967295|z>>>9),z=R+(P^F^q)+V[1]+2763975236&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^F)+V[4]+1272893353&4294967295,q=R+(z<<11&4294967295|z>>>21),z=F+(q^R^P)+V[7]+4139469664&4294967295,F=q+(z<<16&4294967295|z>>>16),z=P+(F^q^R)+V[10]+3200236656&4294967295,P=F+(z<<23&4294967295|z>>>9),z=R+(P^F^q)+V[13]+681279174&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^F)+V[0]+3936430074&4294967295,q=R+(z<<11&4294967295|z>>>21),z=F+(q^R^P)+V[3]+3572445317&4294967295,F=q+(z<<16&4294967295|z>>>16),z=P+(F^q^R)+V[6]+76029189&4294967295,P=F+(z<<23&4294967295|z>>>9),z=R+(P^F^q)+V[9]+3654602809&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^F)+V[12]+3873151461&4294967295,q=R+(z<<11&4294967295|z>>>21),z=F+(q^R^P)+V[15]+530742520&4294967295,F=q+(z<<16&4294967295|z>>>16),z=P+(F^q^R)+V[2]+3299628645&4294967295,P=F+(z<<23&4294967295|z>>>9),z=R+(F^(P|~q))+V[0]+4096336452&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~F))+V[7]+1126891415&4294967295,q=R+(z<<10&4294967295|z>>>22),z=F+(R^(q|~P))+V[14]+2878612391&4294967295,F=q+(z<<15&4294967295|z>>>17),z=P+(q^(F|~R))+V[5]+4237533241&4294967295,P=F+(z<<21&4294967295|z>>>11),z=R+(F^(P|~q))+V[12]+1700485571&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~F))+V[3]+2399980690&4294967295,q=R+(z<<10&4294967295|z>>>22),z=F+(R^(q|~P))+V[10]+4293915773&4294967295,F=q+(z<<15&4294967295|z>>>17),z=P+(q^(F|~R))+V[1]+2240044497&4294967295,P=F+(z<<21&4294967295|z>>>11),z=R+(F^(P|~q))+V[8]+1873313359&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~F))+V[15]+4264355552&4294967295,q=R+(z<<10&4294967295|z>>>22),z=F+(R^(q|~P))+V[6]+2734768916&4294967295,F=q+(z<<15&4294967295|z>>>17),z=P+(q^(F|~R))+V[13]+1309151649&4294967295,P=F+(z<<21&4294967295|z>>>11),z=R+(F^(P|~q))+V[4]+4149444226&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~F))+V[11]+3174756917&4294967295,q=R+(z<<10&4294967295|z>>>22),z=F+(R^(q|~P))+V[2]+718787259&4294967295,F=q+(z<<15&4294967295|z>>>17),z=P+(q^(F|~R))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(F+(z<<21&4294967295|z>>>11))&4294967295,I.g[2]=I.g[2]+F&4294967295,I.g[3]=I.g[3]+q&4294967295}i.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var P=R-this.blockSize,V=this.B,F=this.h,q=0;q<R;){if(F==0)for(;q<=P;)r(this,I,q),q+=this.blockSize;if(typeof I=="string"){for(;q<R;)if(V[F++]=I.charCodeAt(q++),F==this.blockSize){r(this,V),F=0;break}}else for(;q<R;)if(V[F++]=I[q++],F==this.blockSize){r(this,V),F=0;break}}this.h=F,this.o+=R},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var P=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=P&255,P/=256;for(this.u(I),I=Array(16),R=P=0;4>R;++R)for(var V=0;32>V;V+=8)I[P++]=this.g[R]>>>V&255;return I};function o(I,R){var P=c;return Object.prototype.hasOwnProperty.call(P,I)?P[I]:P[I]=R(I)}function l(I,R){this.h=R;for(var P=[],V=!0,F=I.length-1;0<=F;F--){var q=I[F]|0;V&&q==R||(P[F]=q,V=!1)}this.g=P}var c={};function d(I){return-128<=I&&128>I?o(I,function(R){return new l([R|0],0>R?-1:0)}):new l([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return D(f(-I));for(var R=[],P=1,V=0;I>=P;V++)R[V]=I/P|0,P*=4294967296;return new l(R,0)}function p(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return D(p(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=f(Math.pow(R,8)),V=v,F=0;F<I.length;F+=8){var q=Math.min(8,I.length-F),z=parseInt(I.substring(F,F+q),R);8>q?(q=f(Math.pow(R,q)),V=V.j(q).add(f(z))):(V=V.j(P),V=V.add(f(z)))}return V}var v=d(0),T=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(N(this))return-D(this).m();for(var I=0,R=1,P=0;P<this.g.length;P++){var V=this.i(P);I+=(0<=V?V:4294967296+V)*R,R*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(N(this))return"-"+D(this).toString(I);for(var R=f(Math.pow(I,6)),P=this,V="";;){var F=H(P,R).g;P=L(P,F.j(R));var q=((0<P.g.length?P.g[0]:P.h)>>>0).toString(I);if(P=F,C(P))return q+V;for(;6>q.length;)q="0"+q;V=q+V}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=L(this,I),N(I)?-1:C(I)?0:1};function D(I){for(var R=I.g.length,P=[],V=0;V<R;V++)P[V]=~I.g[V];return new l(P,~I.h).add(T)}t.abs=function(){return N(this)?D(this):this},t.add=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0,F=0;F<=R;F++){var q=V+(this.i(F)&65535)+(I.i(F)&65535),z=(q>>>16)+(this.i(F)>>>16)+(I.i(F)>>>16);V=z>>>16,q&=65535,z&=65535,P[F]=z<<16|q}return new l(P,P[P.length-1]&-2147483648?-1:0)};function L(I,R){return I.add(D(R))}t.j=function(I){if(C(this)||C(I))return v;if(N(this))return N(I)?D(this).j(D(I)):D(D(this).j(I));if(N(I))return D(this.j(D(I)));if(0>this.l(b)&&0>I.l(b))return f(this.m()*I.m());for(var R=this.g.length+I.g.length,P=[],V=0;V<2*R;V++)P[V]=0;for(V=0;V<this.g.length;V++)for(var F=0;F<I.g.length;F++){var q=this.i(V)>>>16,z=this.i(V)&65535,xe=I.i(F)>>>16,De=I.i(F)&65535;P[2*V+2*F]+=z*De,k(P,2*V+2*F),P[2*V+2*F+1]+=q*De,k(P,2*V+2*F+1),P[2*V+2*F+1]+=z*xe,k(P,2*V+2*F+1),P[2*V+2*F+2]+=q*xe,k(P,2*V+2*F+2)}for(V=0;V<R;V++)P[V]=P[2*V+1]<<16|P[2*V];for(V=R;V<2*R;V++)P[V]=0;return new l(P,0)};function k(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function U(I,R){this.g=I,this.h=R}function H(I,R){if(C(R))throw Error("division by zero");if(C(I))return new U(v,v);if(N(I))return R=H(D(I),R),new U(D(R.g),D(R.h));if(N(R))return R=H(I,D(R)),new U(D(R.g),R.h);if(30<I.g.length){if(N(I)||N(R))throw Error("slowDivide_ only works with positive integers.");for(var P=T,V=R;0>=V.l(I);)P=K(P),V=K(V);var F=G(P,1),q=G(V,1);for(V=G(V,2),P=G(P,2);!C(V);){var z=q.add(V);0>=z.l(I)&&(F=F.add(P),q=z),V=G(V,1),P=G(P,1)}return R=L(I,F.j(R)),new U(F,R)}for(F=v;0<=I.l(R);){for(P=Math.max(1,Math.floor(I.m()/R.m())),V=Math.ceil(Math.log(P)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),q=f(P),z=q.j(R);N(z)||0<z.l(I);)P-=V,q=f(P),z=q.j(R);C(q)&&(q=T),F=F.add(q),I=L(I,z)}return new U(F,I)}t.A=function(I){return H(this,I).h},t.and=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)&I.i(V);return new l(P,this.h&I.h)},t.or=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)|I.i(V);return new l(P,this.h|I.h)},t.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)^I.i(V);return new l(P,this.h^I.h)};function K(I){for(var R=I.g.length+1,P=[],V=0;V<R;V++)P[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(P,I.h)}function G(I,R){var P=R>>5;R%=32;for(var V=I.g.length-P,F=[],q=0;q<V;q++)F[q]=0<R?I.i(q+P)>>>R|I.i(q+P+1)<<32-R:I.i(q+P);return new l(F,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,pN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=p,Go=l}).apply(typeof LA<"u"?LA:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mN,Qc,gN,vp,m0,yN,vN,_N;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,x){return g==Array.prototype||g==Object.prototype||(g[w]=x.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var w=0;w<g.length;++w){var x=g[w];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(g,w){if(w)e:{var x=i;g=g.split(".");for(var O=0;O<g.length-1;O++){var W=g[O];if(!(W in x))break e;x=x[W]}g=g[g.length-1],O=x[g],w=w(O),w!=O&&w!=null&&e(x,g,{configurable:!0,writable:!0,value:w})}}function o(g,w){g instanceof String&&(g+="");var x=0,O=!1,W={next:function(){if(!O&&x<g.length){var ie=x++;return{value:w(ie,g[ie]),done:!1}}return O=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(g){return g||function(){return o(this,function(w,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function f(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function p(g,w,x){return g.call.apply(g.bind,arguments)}function v(g,w,x){if(!g)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,O),g.apply(w,W)}}return function(){return g.apply(w,arguments)}}function T(g,w,x){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,T.apply(null,arguments)}function b(g,w){var x=Array.prototype.slice.call(arguments,1);return function(){var O=x.slice();return O.push.apply(O,arguments),g.apply(this,O)}}function C(g,w){function x(){}x.prototype=w.prototype,g.aa=w.prototype,g.prototype=new x,g.prototype.constructor=g,g.Qb=function(O,W,ie){for(var ge=Array(arguments.length-2),It=2;It<arguments.length;It++)ge[It-2]=arguments[It];return w.prototype[W].apply(O,ge)}}function N(g){const w=g.length;if(0<w){const x=Array(w);for(let O=0;O<w;O++)x[O]=g[O];return x}return[]}function D(g,w){for(let x=1;x<arguments.length;x++){const O=arguments[x];if(d(O)){const W=g.length||0,ie=O.length||0;g.length=W+ie;for(let ge=0;ge<ie;ge++)g[W+ge]=O[ge]}else g.push(O)}}class L{constructor(w,x){this.i=w,this.j=x,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function k(g){return/^[\s\xa0]*$/.test(g)}function U(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function H(g){return H[" "](g),g}H[" "]=function(){};var K=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function G(g,w,x){for(const O in g)w.call(x,g[O],O,g)}function I(g,w){for(const x in g)w.call(void 0,g[x],x,g)}function R(g){const w={};for(const x in g)w[x]=g[x];return w}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,w){let x,O;for(let W=1;W<arguments.length;W++){O=arguments[W];for(x in O)g[x]=O[x];for(let ie=0;ie<P.length;ie++)x=P[ie],Object.prototype.hasOwnProperty.call(O,x)&&(g[x]=O[x])}}function F(g){var w=1;g=g.split(":");const x=[];for(;0<w&&g.length;)x.push(g.shift()),w--;return g.length&&x.push(g.join(":")),x}function q(g){c.setTimeout(()=>{throw g},0)}function z(){var g=Ae;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class xe{constructor(){this.h=this.g=null}add(w,x){const O=De.get();O.set(w,x),this.h?this.h.next=O:this.g=O,this.h=O}}var De=new L(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(w,x){this.h=w,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let se,me=!1,Ae=new xe,Ce=()=>{const g=c.Promise.resolve(void 0);se=()=>{g.then($)}};var $=()=>{for(var g;g=z();){try{g.h.call(g.g)}catch(x){q(x)}var w=De;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}me=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var re=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const x=()=>{};c.addEventListener("test",x,w),c.removeEventListener("test",x,w)}catch{}return g})();function fe(g,w){if(pe.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var x=this.type=g.type,O=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(K){e:{try{H(w.nodeName);var W=!0;break e}catch{}W=!1}W||(w=null)}}else x=="mouseover"?w=g.fromElement:x=="mouseout"&&(w=g.toElement);this.relatedTarget=w,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Te[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&fe.aa.h.call(this)}}C(fe,pe);var Te={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Le=0;function pt(g,w,x,O,W){this.listener=g,this.proxy=null,this.src=w,this.type=x,this.capture=!!O,this.ha=W,this.key=++Le,this.da=this.fa=!1}function xn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function bi(g){this.src=g,this.g={},this.h=0}bi.prototype.add=function(g,w,x,O,W){var ie=g.toString();g=this.g[ie],g||(g=this.g[ie]=[],this.h++);var ge=ui(g,w,O,W);return-1<ge?(w=g[ge],x||(w.fa=!1)):(w=new pt(w,this.src,ie,!!O,W),w.fa=x,g.push(w)),w};function Cn(g,w){var x=w.type;if(x in g.g){var O=g.g[x],W=Array.prototype.indexOf.call(O,w,void 0),ie;(ie=0<=W)&&Array.prototype.splice.call(O,W,1),ie&&(xn(w),g.g[x].length==0&&(delete g.g[x],g.h--))}}function ui(g,w,x,O){for(var W=0;W<g.length;++W){var ie=g[W];if(!ie.da&&ie.listener==w&&ie.capture==!!x&&ie.ha==O)return W}return-1}var kn="closure_lm_"+(1e6*Math.random()|0),In={};function Vn(g,w,x,O,W){if(Array.isArray(w)){for(var ie=0;ie<w.length;ie++)Vn(g,w[ie],x,O,W);return null}return x=zt(x),g&&g[Ve]?g.K(w,x,f(O)?!!O.capture:!1,W):Oi(g,w,x,!1,O,W)}function Oi(g,w,x,O,W,ie){if(!w)throw Error("Invalid event type");var ge=f(W)?!!W.capture:!!W,It=Fi(g);if(It||(g[kn]=It=new bi(g)),x=It.add(w,x,O,ge,ie),x.proxy)return x;if(O=Ui(),x.proxy=O,O.src=g,O.listener=x,g.addEventListener)re||(W=ge),W===void 0&&(W=!1),g.addEventListener(w.toString(),O,W);else if(g.attachEvent)g.attachEvent(di(w.toString()),O);else if(g.addListener&&g.removeListener)g.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ui(){function g(x){return w.call(g.src,g.listener,x)}const w=yn;return g}function wi(g,w,x,O,W){if(Array.isArray(w))for(var ie=0;ie<w.length;ie++)wi(g,w[ie],x,O,W);else O=f(O)?!!O.capture:!!O,x=zt(x),g&&g[Ve]?(g=g.i,w=String(w).toString(),w in g.g&&(ie=g.g[w],x=ui(ie,x,O,W),-1<x&&(xn(ie[x]),Array.prototype.splice.call(ie,x,1),ie.length==0&&(delete g.g[w],g.h--)))):g&&(g=Fi(g))&&(w=g.g[w.toString()],g=-1,w&&(g=ui(w,x,O,W)),(x=-1<g?w[g]:null)&&ci(x))}function ci(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[Ve])Cn(w.i,g);else{var x=g.type,O=g.proxy;w.removeEventListener?w.removeEventListener(x,O,g.capture):w.detachEvent?w.detachEvent(di(x),O):w.addListener&&w.removeListener&&w.removeListener(O),(x=Fi(w))?(Cn(x,g),x.h==0&&(x.src=null,w[kn]=null)):xn(g)}}}function di(g){return g in In?In[g]:In[g]="on"+g}function yn(g,w){if(g.da)g=!0;else{w=new fe(w,this);var x=g.listener,O=g.ha||g.src;g.fa&&ci(g),g=x.call(O,w)}return g}function Fi(g){return g=g[kn],g instanceof bi?g:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function zt(g){return typeof g=="function"?g:(g[wt]||(g[wt]=function(w){return g.handleEvent(w)}),g[wt])}function Ke(){Z.call(this),this.i=new bi(this),this.M=this,this.F=null}C(Ke,Z),Ke.prototype[Ve]=!0,Ke.prototype.removeEventListener=function(g,w,x,O){wi(this,g,w,x,O)};function At(g,w){var x,O=g.F;if(O)for(x=[];O;O=O.F)x.push(O);if(g=g.M,O=w.type||w,typeof w=="string")w=new pe(w,g);else if(w instanceof pe)w.target=w.target||g;else{var W=w;w=new pe(O,g),V(w,W)}if(W=!0,x)for(var ie=x.length-1;0<=ie;ie--){var ge=w.g=x[ie];W=xt(ge,O,!0,w)&&W}if(ge=w.g=g,W=xt(ge,O,!0,w)&&W,W=xt(ge,O,!1,w)&&W,x)for(ie=0;ie<x.length;ie++)ge=w.g=x[ie],W=xt(ge,O,!1,w)&&W}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var x=g.g[w],O=0;O<x.length;O++)xn(x[O]);delete g.g[w],g.h--}}this.F=null},Ke.prototype.K=function(g,w,x,O){return this.i.add(String(g),w,!1,x,O)},Ke.prototype.L=function(g,w,x,O){return this.i.add(String(g),w,!0,x,O)};function xt(g,w,x,O){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var W=!0,ie=0;ie<w.length;++ie){var ge=w[ie];if(ge&&!ge.da&&ge.capture==x){var It=ge.listener,vn=ge.ha||ge.src;ge.fa&&Cn(g.i,ge),W=It.call(vn,O)!==!1&&W}}return W&&!O.defaultPrevented}function Me(g,w,x){if(typeof g=="function")x&&(g=T(g,x));else if(g&&typeof g.handleEvent=="function")g=T(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(g,w||0)}function Bi(g){g.g=Me(()=>{g.g=null,g.i&&(g.i=!1,Bi(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class Gr extends Z{constructor(w,x){super(),this.m=w,this.l=x,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Bi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(g){Z.call(this),this.h=g,this.g={}}C(ot,Z);var fi=[];function tn(g){G(g.g,function(w,x){this.g.hasOwnProperty(x)&&ci(w)},g),g.g={}}ot.prototype.N=function(){ot.aa.N.call(this),tn(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=c.JSON.stringify,be=c.JSON.parse,Ee=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Ye(){}Ye.prototype.h=null;function Tt(g){return g.h||(g.h=g.i())}function We(){}var Xe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tt(){pe.call(this,"d")}C(tt,pe);function nt(){pe.call(this,"c")}C(nt,pe);var ke={},Ge=null;function cn(){return Ge=Ge||new Ke}ke.La="serverreachability";function Ai(g){pe.call(this,ke.La,g)}C(Ai,pe);function Ft(g){const w=cn();At(w,new Ai(w))}ke.STAT_EVENT="statevent";function Ct(g,w){pe.call(this,ke.STAT_EVENT,g),this.stat=w}C(Ct,pe);function he(g){const w=cn();At(w,new Ct(w,g))}ke.Ma="timingevent";function Ie(g,w){pe.call(this,ke.Ma,g),this.size=w}C(Ie,pe);function ze(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},w)}function Et(){this.g=!0}Et.prototype.xa=function(){this.g=!1};function qn(g,w,x,O,W,ie){g.info(function(){if(g.g)if(ie)for(var ge="",It=ie.split("&"),vn=0;vn<It.length;vn++){var Ze=It[vn].split("=");if(1<Ze.length){var On=Ze[0];Ze=Ze[1];var Un=On.split("_");ge=2<=Un.length&&Un[1]=="type"?ge+(On+"="+Ze+"&"):ge+(On+"=redacted&")}}else ge=null;else ge=ie;return"XMLHTTP REQ ("+O+") [attempt "+W+"]: "+w+`
`+x+`
`+ge})}function Rn(g,w,x,O,W,ie,ge){g.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+W+"]: "+w+`
`+x+`
`+ie+" "+ge})}function Nn(g,w,x,O){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+hi(g,x)+(O?" "+O:"")})}function zi(g,w){g.info(function(){return"TIMEOUT: "+w})}Et.prototype.info=function(){};function hi(g,w){if(!g.g)return w;if(!w)return null;try{var x=JSON.parse(w);if(x){for(g=0;g<x.length;g++)if(Array.isArray(x[g])){var O=x[g];if(!(2>O.length)){var W=O[1];if(Array.isArray(W)&&!(1>W.length)){var ie=W[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var ge=1;ge<W.length;ge++)W[ge]=""}}}}return ue(x)}catch{return w}}var qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qi;function ir(){}C(ir,Ye),ir.prototype.g=function(){return new XMLHttpRequest},ir.prototype.i=function(){return{}},qi=new ir;function Gi(g,w,x,O){this.j=g,this.i=w,this.l=x,this.R=O||1,this.U=new ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ua}function ua(){this.i=null,this.g="",this.h=!1}var wr={},rr={};function sr(g,w,x){g.L=1,g.v=da(nn(w)),g.m=x,g.P=!0,xi(g,null)}function xi(g,w){g.F=Date.now(),pi(g),g.A=nn(g.v);var x=g.A,O=g.R;Array.isArray(O)||(O=[String(O)]),ds(x.i,"t",O),g.C=0,x=g.j.J,g.h=new ua,g.g=Df(g.j,x?w:null,!g.m),0<g.O&&(g.M=new Gr(T(g.Y,g,g.g),g.O)),w=g.U,x=g.g,O=g.ca;var W="readystatechange";Array.isArray(W)||(W&&(fi[0]=W.toString()),W=fi);for(var ie=0;ie<W.length;ie++){var ge=Vn(x,W[ie],O||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=g.H?R(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),Ft(),qn(g.i,g.u,g.A,g.l,g.R,g.m)}Gi.prototype.ca=function(g){g=g.target;const w=this.M;w&&yi(g)==3?w.j():this.Y(g)},Gi.prototype.Y=function(g){try{if(g==this.g)e:{const Un=yi(this.g);var w=this.g.Ba();const so=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||pa(this.g)))){this.J||Un!=4||w==7||(w==8||0>=so?Ft(3):Ft(2)),Ar(this);var x=this.g.Z();this.X=x;t:if(or(this)){var O=pa(this.g);g="";var W=O.length,ie=yi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),xr(this);var ge="";break t}this.h.i=new c.TextDecoder}for(w=0;w<W;w++)this.h.h=!0,g+=this.h.i.decode(O[w],{stream:!(ie&&w==W-1)});O.length=0,this.h.g+=g,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=x==200,Rn(this.i,this.u,this.A,this.l,this.R,Un,x),this.o){if(this.T&&!this.K){t:{if(this.g){var It,vn=this.g;if((It=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(It)){var Ze=It;break t}}Ze=null}if(x=Ze)Nn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jr(this,x);else{this.o=!1,this.s=3,he(12),mi(this),xr(this);break e}}if(this.P){x=!0;let Ii;for(;!this.J&&this.C<ge.length;)if(Ii=Hr(this,ge),Ii==rr){Un==4&&(this.s=4,he(14),x=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ii==wr){this.s=4,he(15),Nn(this.i,this.l,ge,"[Invalid Chunk]"),x=!1;break}else Nn(this.i,this.l,Ii,null),jr(this,Ii);if(or(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||ge.length!=0||this.h.h||(this.s=1,he(16),x=!1),this.o=this.o&&x,!x)Nn(this.i,this.l,ge,"[Invalid Chunked Response]"),mi(this),xr(this);else if(0<ge.length&&!this.W){this.W=!0;var On=this.j;On.g==this&&On.ba&&!On.M&&(On.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),tc(On),On.M=!0,he(11))}}else Nn(this.i,this.l,ge,null),jr(this,ge);Un==4&&mi(this),this.o&&!this.J&&(Un==4?Rf(this.j,this):(this.o=!1,pi(this)))}else bf(this.g),x==400&&0<ge.indexOf("Unknown SID")?(this.s=3,he(12)):(this.s=0,he(13)),mi(this),xr(this)}}}catch{}finally{}};function or(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Hr(g,w){var x=g.C,O=w.indexOf(`
`,x);return O==-1?rr:(x=Number(w.substring(x,O)),isNaN(x)?wr:(O+=1,O+x>w.length?rr:(w=w.slice(O,O+x),g.C=O+x,w)))}Gi.prototype.cancel=function(){this.J=!0,mi(this)};function pi(g){g.S=Date.now()+g.I,Wt(g,g.I)}function Wt(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=ze(T(g.ba,g),w)}function Ar(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Gi.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(zi(this.i,this.A),this.L!=2&&(Ft(),he(17)),mi(this),this.s=2,xr(this)):Wt(this,this.S-g)};function xr(g){g.j.G==0||g.J||Rf(g.j,g)}function mi(g){Ar(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,tn(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function jr(g,w){try{var x=g.j;if(x.G!=0&&(x.g==g||Ys(x.h,g))){if(!g.K&&Ys(x.h,g)&&x.G==3){try{var O=x.Da.g.parse(w)}catch{O=null}if(Array.isArray(O)&&O.length==3){var W=O;if(W[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<g.F)io(x),no(x);else break e;ec(x),he(18)}}else x.za=W[1],0<x.za-x.T&&37500>W[2]&&x.F&&x.v==0&&!x.C&&(x.C=ze(T(x.Za,x),6e3));if(1>=yf(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else hs(x,11)}else if((g.K||x.g==g)&&io(x),!k(w))for(W=x.Da.g.parse(w),w=0;w<W.length;w++){let Ze=W[w];if(x.T=Ze[0],Ze=Ze[1],x.G==2)if(Ze[0]=="c"){x.K=Ze[1],x.ia=Ze[2];const On=Ze[3];On!=null&&(x.la=On,x.j.info("VER="+x.la));const Un=Ze[4];Un!=null&&(x.Aa=Un,x.j.info("SVER="+x.Aa));const so=Ze[5];so!=null&&typeof so=="number"&&0<so&&(O=1.5*so,x.L=O,x.j.info("backChannelRequestTimeoutMs_="+O)),O=x;const Ii=g.g;if(Ii){const ya=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var ie=O.h;ie.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Js(ie,ie.h),ie.h=null))}if(O.D){const ps=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;ps&&(O.ya=ps,mt(O.I,O.D,ps))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-g.F,x.j.info("Handshake RTT: "+x.R+"ms")),O=x;var ge=g;if(O.qa=Pf(O,O.J?O.ia:null,O.W),ge.K){ar(O.h,ge);var It=ge,vn=O.L;vn&&(It.I=vn),It.B&&(Ar(It),pi(It)),O.g=ge}else Cf(O);0<x.i.length&&ml(x)}else Ze[0]!="stop"&&Ze[0]!="close"||hs(x,7);else x.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?hs(x,7):Xu(x):Ze[0]!="noop"&&x.l&&x.l.ta(Ze),x.v=0)}}Ft(4)}catch{}}var vg=class{constructor(g,w){this.g=g,this.map=w}};function ju(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $u(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function yf(g){return g.h?1:g.g?g.g.size:0}function Ys(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function Js(g,w){g.g?g.g.add(w):g.h=w}function ar(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}ju.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function gi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const x of g.g.values())w=w.concat(x.D);return w}return N(g.i)}function vf(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(d(g)){for(var w=[],x=g.length,O=0;O<x;O++)w.push(g[O]);return w}w=[],x=0;for(O in g)w[x++]=g[O];return w}function _g(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(d(g)||typeof g=="string"){var w=[];g=g.length;for(var x=0;x<g;x++)w.push(x);return w}w=[],x=0;for(const O in g)w[x++]=O;return w}}}function ll(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(d(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var x=_g(g),O=vf(g),W=O.length,ie=0;ie<W;ie++)w.call(void 0,O[ie],x&&x[ie],g)}var Ku=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ul(g,w){if(g){g=g.split("&");for(var x=0;x<g.length;x++){var O=g[x].indexOf("="),W=null;if(0<=O){var ie=g[x].substring(0,O);W=g[x].substring(O+1)}else ie=g[x];w(ie,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function cs(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof cs){this.h=g.h,Ws(this,g.j),this.o=g.o,this.g=g.g,ca(this,g.s),this.l=g.l;var w=g.i,x=new $r;x.i=w.i,w.g&&(x.g=new Map(w.g),x.h=w.h),cl(this,x),this.m=g.m}else g&&(w=String(g).match(Ku))?(this.h=!1,Ws(this,w[1]||"",!0),this.o=Qs(w[2]||""),this.g=Qs(w[3]||"",!0),ca(this,w[4]),this.l=Qs(w[5]||"",!0),cl(this,w[6]||"",!0),this.m=Qs(w[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}cs.prototype.toString=function(){var g=[],w=this.j;w&&g.push(lr(w,Yu,!0),":");var x=this.g;return(x||w=="file")&&(g.push("//"),(w=this.o)&&g.push(lr(w,Yu,!0),"@"),g.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&g.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&g.push("/"),g.push(lr(x,x.charAt(0)=="/"?Ju:_f,!0))),(x=this.i.toString())&&g.push("?",x),(x=this.m)&&g.push("#",lr(x,Sg)),g.join("")};function nn(g){return new cs(g)}function Ws(g,w,x){g.j=x?Qs(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function ca(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function cl(g,w,x){w instanceof $r?(g.i=w,Tf(g.i,g.h)):(x||(w=lr(w,Eg)),g.i=new $r(w,g.h))}function mt(g,w,x){g.i.set(w,x)}function da(g){return mt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Qs(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function lr(g,w,x){return typeof g=="string"?(g=encodeURI(g).replace(w,Tg),x&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Tg(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Yu=/[#\/\?@]/g,_f=/[#\?:]/g,Ju=/[#\?]/g,Eg=/[#\?@]/g,Sg=/#/g;function $r(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function Ln(g){g.g||(g.g=new Map,g.h=0,g.i&&ul(g.i,function(w,x){g.add(decodeURIComponent(w.replace(/\+/g," ")),x)}))}t=$r.prototype,t.add=function(g,w){Ln(this),this.i=null,g=Hi(this,g);var x=this.g.get(g);return x||this.g.set(g,x=[]),x.push(w),this.h+=1,this};function dl(g,w){Ln(g),w=Hi(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function fl(g,w){return Ln(g),w=Hi(g,w),g.g.has(w)}t.forEach=function(g,w){Ln(this),this.g.forEach(function(x,O){x.forEach(function(W){g.call(w,W,O,this)},this)},this)},t.na=function(){Ln(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),x=[];for(let O=0;O<w.length;O++){const W=g[O];for(let ie=0;ie<W.length;ie++)x.push(w[O])}return x},t.V=function(g){Ln(this);let w=[];if(typeof g=="string")fl(this,g)&&(w=w.concat(this.g.get(Hi(this,g))));else{g=Array.from(this.g.values());for(let x=0;x<g.length;x++)w=w.concat(g[x])}return w},t.set=function(g,w){return Ln(this),this.i=null,g=Hi(this,g),fl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},t.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function ds(g,w,x){dl(g,w),0<x.length&&(g.i=null,g.g.set(Hi(g,w),N(x)),g.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var x=0;x<w.length;x++){var O=w[x];const ie=encodeURIComponent(String(O)),ge=this.V(O);for(O=0;O<ge.length;O++){var W=ie;ge[O]!==""&&(W+="="+encodeURIComponent(String(ge[O]))),g.push(W)}}return this.i=g.join("&")};function Hi(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function Tf(g,w){w&&!g.j&&(Ln(g),g.i=null,g.g.forEach(function(x,O){var W=O.toLowerCase();O!=W&&(dl(this,O),ds(this,W,x))},g)),g.j=w}function Wu(g,w){const x=new Et;if(c.Image){const O=new Image;O.onload=b(Ci,x,"TestLoadImage: loaded",!0,w,O),O.onerror=b(Ci,x,"TestLoadImage: error",!1,w,O),O.onabort=b(Ci,x,"TestLoadImage: abort",!1,w,O),O.ontimeout=b(Ci,x,"TestLoadImage: timeout",!1,w,O),c.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=g}else w(!1)}function Ef(g,w){const x=new Et,O=new AbortController,W=setTimeout(()=>{O.abort(),Ci(x,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:O.signal}).then(ie=>{clearTimeout(W),ie.ok?Ci(x,"TestPingServer: ok",!0,w):Ci(x,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(W),Ci(x,"TestPingServer: error",!1,w)})}function Ci(g,w,x,O,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),O(x)}catch{}}function Cr(){this.g=new Ee}function Qu(g,w,x){const O=x||"";try{ll(g,function(W,ie){let ge=W;f(W)&&(ge=ue(W)),w.push(O+ie+"="+encodeURIComponent(ge))})}catch(W){throw w.push(O+"type="+encodeURIComponent("_badmap")),W}}function Kr(g){this.l=g.Ub||null,this.j=g.eb||!1}C(Kr,Ye),Kr.prototype.g=function(){return new ji(this.l,this.j)},Kr.prototype.i=(function(g){return function(){return g}})({});function ji(g,w){Ke.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ji,Ke),t=ji.prototype,t.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,Xs(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hl(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function hl(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Yr(this):Xs(this),this.readyState==3&&hl(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Yr(this))},t.Qa=function(g){this.g&&(this.response=g,Yr(this))},t.ga=function(){this.g&&Yr(this)};function Yr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Xs(g)}t.setRequestHeader=function(g,w){this.u.append(g,w)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var x=w.next();!x.done;)x=x.value,g.push(x[0]+": "+x[1]),x=w.next();return g.join(`\r
`)};function Xs(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function fa(g){let w="";return G(g,function(x,O){w+=O,w+=":",w+=x,w+=`\r
`}),w}function Zs(g,w,x){e:{for(O in x){var O=!1;break e}O=!0}O||(x=fa(x),typeof g=="string"?x!=null&&encodeURIComponent(String(x)):mt(g,w,x))}function Gt(g){Ke.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Gt,Ke);var Xn=/^https?$/i,fs=["POST","PUT"];t=Gt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,w,x,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qi.g(),this.v=this.o?Tt(this.o):Tt(qi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(ie){ha(this,ie);return}if(g=x||"",x=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var W in O)x.set(W,O[W]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const ie of O.keys())x.set(ie,O.get(ie));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(x.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fs,w,void 0))||O||W||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ge]of x)this.g.setRequestHeader(ie,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pl(this),this.u=!0,this.g.send(g),this.u=!1}catch(ie){ha(this,ie)}};function ha(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,eo(g),to(g)}function eo(g){g.A||(g.A=!0,At(g,"complete"),At(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,At(this,"complete"),At(this,"abort"),to(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),Gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Sf(this):this.bb())},t.bb=function(){Sf(this)};function Sf(g){if(g.h&&typeof l<"u"&&(!g.v[1]||yi(g)!=4||g.Z()!=2)){if(g.u&&yi(g)==4)Me(g.Ea,0,g);else if(At(g,"readystatechange"),yi(g)==4){g.h=!1;try{const ge=g.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var x;if(!(x=w)){var O;if(O=ge===0){var W=String(g.D).match(Ku)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),O=!Xn.test(W?W.toLowerCase():"")}x=O}if(x)At(g,"complete"),At(g,"success");else{g.m=6;try{var ie=2<yi(g)?g.g.statusText:""}catch{ie=""}g.l=ie+" ["+g.Z()+"]",eo(g)}}finally{to(g)}}}}function to(g,w){if(g.g){pl(g);const x=g.g,O=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||At(g,"ready");try{x.onreadystatechange=O}catch{}}}function pl(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function yi(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<yi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),be(w)}};function pa(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function bf(g){const w={};g=(g.g&&2<=yi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<g.length;O++){if(k(g[O]))continue;var x=F(g[O]);const W=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ie=w[W]||[];w[W]=ie,ie.push(x)}I(w,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(g,w,x){return x&&x.internalChannelParams&&x.internalChannelParams[g]||w}function wf(g){this.Aa=0,this.i=[],this.j=new Et,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,g),this.cb=ma("retryDelaySeedMs",1e4,g),this.Wa=ma("forwardChannelMaxRetries",2,g),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new ju(g&&g.concurrentRequestLimit),this.Da=new Cr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wf.prototype,t.la=8,t.G=1,t.connect=function(g,w,x,O){he(0),this.W=g,this.H=w||{},x&&O!==void 0&&(this.H.OSID=x,this.H.OAID=O),this.F=this.X,this.I=Pf(this,null,this.W),ml(this)};function Xu(g){if(Af(g),g.G==3){var w=g.U++,x=nn(g.I);if(mt(x,"SID",g.K),mt(x,"RID",w),mt(x,"TYPE","terminate"),ga(g,x),w=new Gi(g,g.j,w),w.L=2,w.v=da(nn(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!x&&c.Image&&(new Image().src=w.v,x=!0),x||(w.g=Df(w.j,null),w.g.ea(w.v)),w.F=Date.now(),pi(w)}nc(g)}function no(g){g.g&&(tc(g),g.g.cancel(),g.g=null)}function Af(g){no(g),g.u&&(c.clearTimeout(g.u),g.u=null),io(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function ml(g){if(!$u(g.h)&&!g.s){g.s=!0;var w=g.Ga;se||Ce(),me||(se(),me=!0),Ae.add(w,g),g.B=0}}function bg(g,w){return yf(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=ze(T(g.Ga,g,w),Nf(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const W=new Gi(this,this.j,g);let ie=this.o;if(this.S&&(ie?(ie=R(ie),V(ie,this.S)):ie=this.S),this.m!==null||this.O||(W.H=ie,ie=null),this.P)e:{for(var w=0,x=0;x<this.i.length;x++){t:{var O=this.i[x];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(w+=O,4096<w){w=x;break e}if(w===4096||x===this.i.length-1){w=x+1;break e}}w=1e3}else w=1e3;w=Zu(this,W,w),x=nn(this.I),mt(x,"RID",g),mt(x,"CVER",22),this.D&&mt(x,"X-HTTP-Session-Id",this.D),ga(this,x),ie&&(this.O?w="headers="+encodeURIComponent(String(fa(ie)))+"&"+w:this.m&&Zs(x,this.m,ie)),Js(this.h,W),this.Ua&&mt(x,"TYPE","init"),this.P?(mt(x,"$req",w),mt(x,"SID","null"),W.T=!0,sr(W,x,null)):sr(W,x,w),this.G=2}}else this.G==3&&(g?xf(this,g):this.i.length==0||$u(this.h)||xf(this))};function xf(g,w){var x;w?x=w.l:x=g.U++;const O=nn(g.I);mt(O,"SID",g.K),mt(O,"RID",x),mt(O,"AID",g.T),ga(g,O),g.m&&g.o&&Zs(O,g.m,g.o),x=new Gi(g,g.j,x,g.B+1),g.m===null&&(x.H=g.o),w&&(g.i=w.D.concat(g.i)),w=Zu(g,x,1e3),x.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Js(g.h,x),sr(x,O,w)}function ga(g,w){g.H&&G(g.H,function(x,O){mt(w,O,x)}),g.l&&ll({},function(x,O){mt(w,O,x)})}function Zu(g,w,x){x=Math.min(g.i.length,x);var O=g.l?T(g.l.Na,g.l,g):null;e:{var W=g.i;let ie=-1;for(;;){const ge=["count="+x];ie==-1?0<x?(ie=W[0].g,ge.push("ofs="+ie)):ie=0:ge.push("ofs="+ie);let It=!0;for(let vn=0;vn<x;vn++){let Ze=W[vn].g;const On=W[vn].map;if(Ze-=ie,0>Ze)ie=Math.max(0,W[vn].g-100),It=!1;else try{Qu(On,ge,"req"+Ze+"_")}catch{O&&O(On)}}if(It){O=ge.join("&");break e}}}return g=g.i.splice(0,x),w.D=g,O}function Cf(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;se||Ce(),me||(se(),me=!0),Ae.add(w,g),g.v=0}}function ec(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=ze(T(g.Fa,g),Nf(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,If(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=ze(T(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,he(10),no(this),If(this))};function tc(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function If(g){g.g=new Gi(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=nn(g.qa);mt(w,"RID","rpc"),mt(w,"SID",g.K),mt(w,"AID",g.T),mt(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&mt(w,"TO",g.ja),mt(w,"TYPE","xmlhttp"),ga(g,w),g.m&&g.o&&Zs(w,g.m,g.o),g.L&&(g.g.I=g.L);var x=g.g;g=g.ia,x.L=1,x.v=da(nn(w)),x.m=null,x.P=!0,xi(x,g)}t.Za=function(){this.C!=null&&(this.C=null,no(this),ec(this),he(19))};function io(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function Rf(g,w){var x=null;if(g.g==w){io(g),tc(g),g.g=null;var O=2}else if(Ys(g.h,w))x=w.D,ar(g.h,w),O=1;else return;if(g.G!=0){if(w.o)if(O==1){x=w.m?w.m.length:0,w=Date.now()-w.F;var W=g.B;O=cn(),At(O,new Ie(O,x)),ml(g)}else Cf(g);else if(W=w.s,W==3||W==0&&0<w.X||!(O==1&&bg(g,w)||O==2&&ec(g)))switch(x&&0<x.length&&(w=g.h,w.i=w.i.concat(x)),W){case 1:hs(g,5);break;case 4:hs(g,10);break;case 3:hs(g,6);break;default:hs(g,2)}}}function Nf(g,w){let x=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(x*=2),x*w}function hs(g,w){if(g.j.info("Error code "+w),w==2){var x=T(g.fb,g),O=g.Xa;const W=!O;O=new cs(O||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ws(O,"https"),da(O),W?Wu(O.toString(),x):Ef(O.toString(),x)}else he(2);g.G=0,g.l&&g.l.sa(w),nc(g),Af(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),he(2)):(this.j.info("Failed to ping google.com"),he(1))};function nc(g){if(g.G=0,g.ka=[],g.l){const w=gi(g.h);(w.length!=0||g.i.length!=0)&&(D(g.ka,w),D(g.ka,g.i),g.h.i.length=0,N(g.i),g.i.length=0),g.l.ra()}}function Pf(g,w,x){var O=x instanceof cs?nn(x):new cs(x);if(O.g!="")w&&(O.g=w+"."+O.g),ca(O,O.s);else{var W=c.location;O=W.protocol,w=w?w+"."+W.hostname:W.hostname,W=+W.port;var ie=new cs(null);O&&Ws(ie,O),w&&(ie.g=w),W&&ca(ie,W),x&&(ie.l=x),O=ie}return x=g.D,w=g.ya,x&&w&&mt(O,x,w),mt(O,"VER",g.la),ga(g,O),O}function Df(g,w,x){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new Gt(new Kr({eb:x})):new Gt(g.pa),w.Ha(g.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mf(){}t=Mf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function gl(){}gl.prototype.g=function(g,w){return new vi(g,w)};function vi(g,w){Ke.call(this),this.g=new wf(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!k(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!k(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new ro(this)}C(vi,Ke),vi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vi.prototype.close=function(){Xu(this.g)},vi.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var x={};x.__data__=g,g=x}else this.u&&(x={},x.__data__=ue(g),g=x);w.i.push(new vg(w.Ya++,g)),w.G==3&&ml(w)},vi.prototype.N=function(){this.g.l=null,delete this.j,Xu(this.g),delete this.g,vi.aa.N.call(this)};function kf(g){tt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){e:{for(const x in w){g=x;break e}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}C(kf,tt);function Vf(){nt.call(this),this.status=1}C(Vf,nt);function ro(g){this.g=g}C(ro,Mf),ro.prototype.ua=function(){At(this.g,"a")},ro.prototype.ta=function(g){At(this.g,new kf(g))},ro.prototype.sa=function(g){At(this.g,new Vf)},ro.prototype.ra=function(){At(this.g,"b")},gl.prototype.createWebChannel=gl.prototype.g,vi.prototype.send=vi.prototype.o,vi.prototype.open=vi.prototype.m,vi.prototype.close=vi.prototype.close,_N=function(){return new gl},vN=function(){return cn()},yN=ke,m0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,vp=qt,dn.COMPLETE="complete",gN=dn,We.EventType=Xe,Xe.OPEN="a",Xe.CLOSE="b",Xe.ERROR="c",Xe.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,Qc=We,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,mN=Gt}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});const OA="@firebase/firestore",UA="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new x_("@firebase/firestore");function Wl(){return Xa.logLevel}function Se(t,...e){if(Xa.logLevel<=ut.DEBUG){const n=e.map(F_);Xa.debug(`Firestore (${Du}): ${t}`,...n)}}function zs(t,...e){if(Xa.logLevel<=ut.ERROR){const n=e.map(F_);Xa.error(`Firestore (${Du}): ${t}`,...n)}}function Ko(t,...e){if(Xa.logLevel<=ut.WARN){const n=e.map(F_);Xa.warn(`Firestore (${Du}): ${t}`,...n)}}function F_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,TN(t,i,n)}function TN(t,e,n){let i=`FIRESTORE (${Du}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw zs(i),new Error(i)}function Nt(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||TN(e,r,i)}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ri.UNAUTHENTICATED)))}shutdown(){}}class c3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class d3{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Nt(this.o===void 0,42304);let i=this.i;const r=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ho;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ho,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await r(this.currentUser)}))},c=d=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ho)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Nt(typeof i.accessToken=="string",31837,{l:i}),new EN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new ri(e)}}class f3{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=ri.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h3{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new f3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ri.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class FA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Nt(this.o===void 0,3512);const i=o=>{o.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new FA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new FA(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=m3(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function et(t,e){return t<e?-1:t>e?1:0}function g0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return et(i,r);{const o=SN(),l=g3(o.encode(BA(t,n)),o.encode(BA(e,n)));return l!==0?l:et(i,r)}}n+=i>65535?2:1}return et(t.length,e.length)}function BA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function g3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return et(t[n],e[n]);return et(t.length,e.length)}function _u(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="__name__";class es{constructor(e,n,i){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Be(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=es.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return et(e.length,n.length)}static compareSegments(e,n){const i=es.isNumericId(e),r=es.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?es.extractNumericId(e).compare(es.extractNumericId(n)):g0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Go.fromString(e.substring(4,e.length-2))}}class Bt extends es{construct(e,n,i){return new Bt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new Bt(n)}static emptyPath(){return new Bt([])}}const y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends es{construct(e,n,i){return new Wn(e,n,i)}static isValidIdentifier(e){return y3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zA}static keyField(){return new Wn([zA])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new _e(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[r+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new _e(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new _e(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(n)}static emptyPath(){return new Wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(Bt.fromString(e))}static fromName(e){return new Pe(Bt.fromString(e).popFirst(5))}static empty(){return new Pe(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e,n){if(!n)throw new _e(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v3(t,e,n,i){if(e===!0&&i===!0)throw new _e(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qA(t){if(!Pe.isDocumentKey(t))throw new _e(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GA(t){if(Pe.isDocumentKey(t))throw new _e(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Om(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Om(t);throw new _e(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,e){const n={typeString:t};return e&&(n.value=e),n}function nf(t,e){if(!wN(t))throw new _e(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new _e(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=-62135596800,jA=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*jA);return new Yt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<HA)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jA}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nf(e,Yt._jsonSchema))return new Yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:An("string",Yt._jsonSchemaVersion),seconds:An("number"),nanoseconds:An("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Yt(0,0))}static max(){return new qe(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=-1;function _3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=qe.fromTimestamp(i===1e9?new Yt(n+1,0):new Yt(n,i));return new Yo(r,Pe.empty(),e)}function T3(t){return new Yo(t.readTime,t.key,Md)}class Yo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Yo(qe.min(),Pe.empty(),Md)}static max(){return new Yo(qe.max(),Pe.empty(),Md)}}function E3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Pe.comparator(t.documentKey,e.documentKey),n!==0?n:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==S3)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,i)=>{n(e)}))}static reject(e){return new de(((n,i)=>{i(e)}))}static waitFor(e){return new de(((n,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&n()}),(d=>i(d)))})),l=!0,o===r&&n()}))}static or(e){let n=de.resolve(!1);for(const i of e)n=n.next((r=>r?de.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(e,n){return new de(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next((p=>{l[f]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,n){return new de(((i,r)=>{const o=()=>{e()===!0?n().next((()=>{o()}),r):i()};o()}))}}function w3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ku(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Um.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=-1;function Fm(t){return t==null}function Hp(t){return t===0&&1/t==-1/0}function A3(t){return typeof t=="number"&&Number.isInteger(t)&&!Hp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="";function x3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$A(e)),e=C3(t.get(n),e);return $A(e)}function C3(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case AN:n+="";break;default:n+=o}}return n}function $A(t){return t+AN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new en(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jn{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Jn.RED,this.left=r??Jn.EMPTY,this.right=o??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Jn(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Jn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YA(this.data.getIterator())}getIteratorFrom(e){return new YA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mn(this.comparator);return n.data=e,n}}class YA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new Zi([])}unionWith(e){let n=new Mn(Wn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _u(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CN("Invalid base64 string: "+o):o}})(e);return new Qn(n)}static fromUint8Array(e){const n=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new Qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const I3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(t){if(Nt(!!t,39018),typeof t=="string"){let e=0;const n=I3.exec(t);if(Nt(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wo(t){return typeof t=="string"?Qn.fromBase64String(t):Qn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="server_timestamp",RN="__type__",NN="__previous_value__",PN="__local_write_time__";function q_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[RN])===null||n===void 0?void 0:n.stringValue)===IN}function Bm(t){const e=t.mapValue.fields[NN];return q_(e)?Bm(e):e}function kd(t){const e=Jo(t.mapValue.fields[PN].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n,i,r,o,l,c,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const jp="(default)";class Vd{constructor(e,n){this.projectId=e,this.database=n||jp}static empty(){return new Vd("","")}get isDefaultDatabase(){return this.database===jp}isEqual(e){return e instanceof Vd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="__type__",N3="__max__",qh={mapValue:{}},MN="__vector__",$p="value";function Qo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?q_(t)?4:D3(t)?9007199254740991:P3(t)?10:11:Be(28295,{value:t})}function us(t,e){if(t===e)return!0;const n=Qo(t);if(n!==Qo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kd(t).isEqual(kd(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Jo(r.timestampValue),c=Jo(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,o){return Wo(r.bytesValue).isEqual(Wo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,o){return mn(r.geoPointValue.latitude)===mn(o.geoPointValue.latitude)&&mn(r.geoPointValue.longitude)===mn(o.geoPointValue.longitude)})(t,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return mn(r.integerValue)===mn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=mn(r.doubleValue),c=mn(o.doubleValue);return l===c?Hp(l)===Hp(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return _u(t.arrayValue.values||[],e.arrayValue.values||[],us);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(KA(l)!==KA(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!us(l[d],c[d])))return!1;return!0})(t,e);default:return Be(52216,{left:t})}}function Ld(t,e){return(t.values||[]).find((n=>us(n,e)))!==void 0}function Tu(t,e){if(t===e)return 0;const n=Qo(t),i=Qo(e);if(n!==i)return et(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=mn(o.integerValue||o.doubleValue),d=mn(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return JA(t.timestampValue,e.timestampValue);case 4:return JA(kd(t),kd(e));case 5:return g0(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=Wo(o),d=Wo(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),d=l.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=et(c[f],d[f]);if(p!==0)return p}return et(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=et(mn(o.latitude),mn(l.latitude));return c!==0?c:et(mn(o.longitude),mn(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return WA(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,d,f,p;const v=o.fields||{},T=l.fields||{},b=(c=v[$p])===null||c===void 0?void 0:c.arrayValue,C=(d=T[$p])===null||d===void 0?void 0:d.arrayValue,N=et(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:WA(b,C)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===qh.mapValue&&l===qh.mapValue)return 0;if(o===qh.mapValue)return 1;if(l===qh.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=l.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let v=0;v<d.length&&v<p.length;++v){const T=g0(d[v],p[v]);if(T!==0)return T;const b=Tu(c[d[v]],f[p[v]]);if(b!==0)return b}return et(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Be(23264,{le:n})}}function JA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const n=Jo(t),i=Jo(e),r=et(n.seconds,i.seconds);return r!==0?r:et(n.nanos,i.nanos)}function WA(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Tu(n[r],i[r]);if(o)return o}return et(n.length,i.length)}function Eu(t){return y0(t)}function y0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Jo(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Wo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Pe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=y0(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${y0(n.fields[l])}`;return r+"}"})(t.mapValue):Be(61005,{value:t})}function _p(t){switch(Qo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bm(t);return e?16+_p(e):16;case 5:return 2*t.stringValue.length;case 6:return Wo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+_p(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return sa(i.fields,((o,l)=>{r+=o.length+_p(l)})),r})(t.mapValue);default:throw Be(13486,{value:t})}}function QA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function v0(t){return!!t&&"integerValue"in t}function G_(t){return!!t&&"arrayValue"in t}function XA(t){return!!t&&"nullValue"in t}function ZA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tp(t){return!!t&&"mapValue"in t}function P3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[DN])===null||n===void 0?void 0:n.stringValue)===MN}function cd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=cd(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function D3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===N3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.value=e}static empty(){return new Vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Tp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cd(n)}setAll(e){let n=Wn.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=cd(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Tp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return us(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Tp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){sa(n,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Vi(cd(this.value))}}function kN(t){const e=[];return sa(t.fields,((n,i)=>{const r=new Wn([n]);if(Tp(i)){const o=kN(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new Zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new si(e,0,qe.min(),qe.min(),qe.min(),Vi.empty(),0)}static newFoundDocument(e,n,i,r){return new si(e,1,n,qe.min(),i,r,0)}static newNoDocument(e,n){return new si(e,2,n,qe.min(),qe.min(),Vi.empty(),0)}static newUnknownDocument(e,n){return new si(e,3,n,qe.min(),qe.min(),Vi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){this.position=e,this.inclusive=n}}function ex(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=Pe.comparator(Pe.fromName(l.referenceValue),n.key):i=Tu(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function tx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!us(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n="asc"){this.field=e,this.dir=n}}function M3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{}class wn extends VN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new V3(e,n,i):n==="array-contains"?new U3(e,i):n==="in"?new F3(e,i):n==="not-in"?new B3(e,i):n==="array-contains-any"?new z3(e,i):new wn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new L3(e,i):new O3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Tu(n,this.value)):n!==null&&Qo(this.value)===Qo(n)&&this.matchesComparison(Tu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends VN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Fr(e,n)}matches(e){return LN(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function LN(t){return t.op==="and"}function ON(t){return k3(t)&&LN(t)}function k3(t){for(const e of t.filters)if(e instanceof Fr)return!1;return!0}function _0(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+Eu(t.value);if(ON(t))return t.filters.map((e=>_0(e))).join(",");{const e=t.filters.map((n=>_0(n))).join(",");return`${t.op}(${e})`}}function UN(t,e){return t instanceof wn?(function(i,r){return r instanceof wn&&i.op===r.op&&i.field.isEqual(r.field)&&us(i.value,r.value)})(t,e):t instanceof Fr?(function(i,r){return r instanceof Fr&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&UN(l,r.filters[c])),!0):!1})(t,e):void Be(19439)}function FN(t){return t instanceof wn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Eu(n.value)}`})(t):t instanceof Fr?(function(n){return n.op.toString()+" {"+n.getFilters().map(FN).join(" ,")+"}"})(t):"Filter"}class V3 extends wn{constructor(e,n,i){super(e,n,i),this.key=Pe.fromName(i.referenceValue)}matches(e){const n=Pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class L3 extends wn{constructor(e,n){super(e,"in",n),this.keys=BN("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class O3 extends wn{constructor(e,n){super(e,"not-in",n),this.keys=BN("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function BN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Pe.fromName(i.referenceValue)))}class U3 extends wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return G_(n)&&Ld(n.arrayValue,this.value)}}class F3 extends wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ld(this.value.arrayValue,n)}}class B3 extends wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ld(this.value.arrayValue,n)}}class z3 extends wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!G_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ld(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function nx(t,e=null,n=[],i=[],r=null,o=null,l=null){return new q3(t,e,n,i,r,o,l)}function H_(t){const e=$e(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>_0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Eu(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Eu(i))).join(",")),e.Pe=n}return e.Pe}function j_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tx(t.startAt,e.startAt)&&tx(t.endAt,e.endAt)}function T0(t){return Pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function G3(t,e,n,i,r,o,l,c){return new rf(t,e,n,i,r,o,l,c)}function zm(t){return new rf(t)}function ix(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zN(t){return t.collectionGroup!==null}function dd(t){const e=$e(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Mn(Wn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Yp(o,i))})),n.has(Wn.keyField().canonicalString())||e.Te.push(new Yp(Wn.keyField(),i))}return e.Te}function is(t){const e=$e(t);return e.Ie||(e.Ie=H3(e,dd(t))),e.Ie}function H3(t,e){if(t.limitType==="F")return nx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Yp(r.field,o)}));const n=t.endAt?new Kp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Kp(t.startAt.position,t.startAt.inclusive):null;return nx(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function E0(t,e){const n=t.filters.concat([e]);return new rf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function S0(t,e,n){return new rf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qm(t,e){return j_(is(t),is(e))&&t.limitType===e.limitType}function qN(t){return`${H_(is(t))}|lt:${t.limitType}`}function Ql(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>FN(r))).join(", ")}]`),Fm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>Eu(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>Eu(r))).join(",")),`Target(${i})`})(is(t))}; limitType=${t.limitType})`}function Gm(t,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Pe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,r){for(const o of dd(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,d){const f=ex(l,c,d);return l.inclusive?f<=0:f<0})(i.startAt,dd(i),r)||i.endAt&&!(function(l,c,d){const f=ex(l,c,d);return l.inclusive?f>=0:f>0})(i.endAt,dd(i),r))})(t,e)}function j3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GN(t){return(e,n)=>{let i=!1;for(const r of dd(t)){const o=$3(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function $3(t,e,n){const i=t.field.isKeyField()?Pe.comparator(e.key,n.key):(function(o,l,c){const d=l.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Tu(d,f):Be(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,((n,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return xN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=new en(Pe.comparator);function qs(){return K3}const HN=new en(Pe.comparator);function Xc(...t){let e=HN;for(const n of t)e=e.insert(n.key,n);return e}function jN(t){let e=HN;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function za(){return fd()}function $N(){return fd()}function fd(){return new rl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Y3=new en(Pe.comparator),J3=new Mn(Pe.comparator);function ct(...t){let e=J3;for(const n of t)e=e.add(n);return e}const W3=new Mn(et);function Q3(){return W3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hp(e)?"-0":e}}function KN(t){return{integerValue:""+t}}function X3(t,e){return A3(e)?KN(e):$_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this._=void 0}}function Z3(t,e,n){return t instanceof Jp?(function(r,o){const l={fields:{[RN]:{stringValue:IN},[PN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&q_(o)&&(o=Bm(o)),o&&(l.fields[NN]=o),{mapValue:l}})(n,e):t instanceof Od?JN(t,e):t instanceof Ud?WN(t,e):(function(r,o){const l=YN(r,o),c=rx(l)+rx(r.Ee);return v0(l)&&v0(r.Ee)?KN(c):$_(r.serializer,c)})(t,e)}function e5(t,e,n){return t instanceof Od?JN(t,e):t instanceof Ud?WN(t,e):n}function YN(t,e){return t instanceof Wp?(function(i){return v0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Jp extends Hm{}class Od extends Hm{constructor(e){super(),this.elements=e}}function JN(t,e){const n=QN(e);for(const i of t.elements)n.some((r=>us(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Ud extends Hm{constructor(e){super(),this.elements=e}}function WN(t,e){let n=QN(e);for(const i of t.elements)n=n.filter((r=>!us(r,i)));return{arrayValue:{values:n}}}class Wp extends Hm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function rx(t){return mn(t.integerValue||t.doubleValue)}function QN(t){return G_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function t5(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof Od&&r instanceof Od||i instanceof Ud&&r instanceof Ud?_u(i.elements,r.elements,us):i instanceof Wp&&r instanceof Wp?us(i.Ee,r.Ee):i instanceof Jp&&r instanceof Jp})(t.transform,e.transform)}class n5{constructor(e,n){this.version=e,this.transformResults=n}}class Ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ep(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jm{}function XN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new K_(t.key,Ur.none()):new sf(t.key,t.data,Ur.none());{const n=t.data,i=Vi.empty();let r=new Mn(Wn.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new oa(t.key,i,new Zi(r.toArray()),Ur.none())}}function i5(t,e,n){t instanceof sf?(function(r,o,l){const c=r.value.clone(),d=ox(r.fieldTransforms,o,l.transformResults);c.setAll(d),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof oa?(function(r,o,l){if(!Ep(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=ox(r.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(ZN(r)),d.setAll(c),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function hd(t,e,n,i){return t instanceof sf?(function(o,l,c,d){if(!Ep(o.precondition,l))return c;const f=o.value.clone(),p=ax(o.fieldTransforms,d,l);return f.setAll(p),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,i):t instanceof oa?(function(o,l,c,d){if(!Ep(o.precondition,l))return c;const f=ax(o.fieldTransforms,d,l),p=l.data;return p.setAll(ZN(o)),p.setAll(f),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,i):(function(o,l,c){return Ep(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function r5(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=YN(i.transform,r||null);o!=null&&(n===null&&(n=Vi.empty()),n.set(i.field,o))}return n||null}function sx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&_u(i,r,((o,l)=>t5(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sf extends jm{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class oa extends jm{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ZN(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function ox(t,e,n){const i=new Map;Nt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,e5(l,c,n[r]))}return i}function ax(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,Z3(o,l,e))}return i}class K_ extends jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s5 extends jm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&i5(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=hd(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=hd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=$N();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const d=XN(l,c);d!==null&&i.set(r.key,d),l.isValidDocument()||l.convertToNoDocument(qe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ct())}isEqual(e){return this.batchId===e.batchId&&_u(this.mutations,e.mutations,((n,i)=>sx(n,i)))&&_u(this.baseMutations,e.baseMutations,((n,i)=>sx(n,i)))}}class Y_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Nt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return Y3})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Y_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,ht;function u5(t){switch(t){case ce.OK:return Be(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function eP(t){if(t===void 0)return zs("GRPC error has no .code"),ce.UNKNOWN;switch(t){case bn.OK:return ce.OK;case bn.CANCELLED:return ce.CANCELLED;case bn.UNKNOWN:return ce.UNKNOWN;case bn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case bn.INTERNAL:return ce.INTERNAL;case bn.UNAVAILABLE:return ce.UNAVAILABLE;case bn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case bn.NOT_FOUND:return ce.NOT_FOUND;case bn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case bn.ABORTED:return ce.ABORTED;case bn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case bn.DATA_LOSS:return ce.DATA_LOSS;default:return Be(39323,{code:t})}}(ht=bn||(bn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=new Go([4294967295,4294967295],0);function lx(t){const e=SN().encode(t),n=new pN;return n.update(e),new Uint8Array(n.digest())}function ux(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Go([n,i],0),new Go([r,o],0)]}class J_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Zc(`Invalid padding: ${n}`);if(i<0)throw new Zc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Go.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(Go.fromNumber(i)));return r.compare(c5)===1&&(r=new Go([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=lx(e),[i,r]=ux(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new J_(o,r,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=lx(e),[i,r]=ux(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,of.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new $m(qe.min(),r,new en(et),qs(),ct())}}class of{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new of(i,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class tP{constructor(e,n){this.targetId=e,this.De=n}}class nP{constructor(e,n,i=Qn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class cx{constructor(){this.ve=0,this.Ce=dx(),this.Fe=Qn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ct(),n=ct(),i=ct();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Be(38017,{changeType:o})}})),new of(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=dx()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class d5{constructor(e){this.We=e,this.Ge=new Map,this.ze=qs(),this.je=Gh(),this.Je=Gh(),this.He=new en(et)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,r)=>{this.nt(r)&&n(r)}))}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const o=r.target;if(T0(o))if(i===0){const l=new Pe(o.path);this.Xe(n,l,si.newNoDocument(l,qe.min()))}else Nt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,c;try{l=Wo(i).toUint8Array()}catch(d){if(d instanceof CN)return Ko("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new J_(l,r,o)}catch(d){return Ko(d instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),r++)})),r}Pt(e){const n=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&T0(c.target)){const d=new Pe(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,si.newNoDocument(d,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}}));let i=ct();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((d=>{const f=this.st(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new $m(e,n,this.He,this.ze,i);return this.ze=qs(),this.je=Gh(),this.Je=Gh(),this.He=new en(et),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new cx,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Mn(et),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Mn(et),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new cx),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Gh(){return new en(Pe.comparator)}function dx(){return new en(Pe.comparator)}const f5={asc:"ASCENDING",desc:"DESCENDING"},h5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p5={and:"AND",or:"OR"};class m5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function b0(t,e){return t.useProto3Json||Fm(e)?e:{value:e}}function Qp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function g5(t,e){return Qp(t,e.toTimestamp())}function rs(t){return Nt(!!t,49232),qe.fromTimestamp((function(n){const i=Jo(n);return new Yt(i.seconds,i.nanos)})(t))}function W_(t,e){return w0(t,e).canonicalString()}function w0(t,e){const n=(function(r){return new Bt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function rP(t){const e=Bt.fromString(t);return Nt(uP(e),10190,{key:e.toString()}),e}function A0(t,e){return W_(t.databaseId,e.path)}function Pv(t,e){const n=rP(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Pe(oP(n))}function sP(t,e){return W_(t.databaseId,e)}function y5(t){const e=rP(t);return e.length===4?Bt.emptyPath():oP(e)}function x0(t){return new Bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oP(t){return Nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fx(t,e,n){return{name:A0(t,e),fields:n.value.mapValue.fields}}function v5(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Be(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(f,p){return f.useProto3Json?(Nt(p===void 0||typeof p=="string",58123),Qn.fromBase64String(p||"")):(Nt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Qn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const p=f.code===void 0?ce.UNKNOWN:eP(f.code);return new _e(p,f.message||"")})(l);n=new nP(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Pv(t,i.document.name),o=rs(i.document.updateTime),l=i.document.createTime?rs(i.document.createTime):qe.min(),c=new Vi({mapValue:{fields:i.document.fields}}),d=si.newFoundDocument(r,o,l,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new Sp(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Pv(t,i.document),o=i.readTime?rs(i.readTime):qe.min(),l=si.newNoDocument(r,o),c=i.removedTargetIds||[];n=new Sp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Pv(t,i.document),o=i.removedTargetIds||[];n=new Sp([],o,r,null)}else{if(!("filter"in e))return Be(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new l5(r,o),c=i.targetId;n=new tP(c,l)}}return n}function _5(t,e){let n;if(e instanceof sf)n={update:fx(t,e.key,e.value)};else if(e instanceof K_)n={delete:A0(t,e.key)};else if(e instanceof oa)n={update:fx(t,e.key,e.data),updateMask:I5(e.fieldMask)};else{if(!(e instanceof s5))return Be(16599,{Rt:e.type});n={verify:A0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Jp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Od)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ud)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wp)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Be(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:g5(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Be(27497)})(t,e.precondition)),n}function T5(t,e){return t&&t.length>0?(Nt(e!==void 0,14353),t.map((n=>(function(r,o){let l=r.updateTime?rs(r.updateTime):rs(o);return l.isEqual(qe.min())&&(l=rs(o)),new n5(l,r.transformResults||[])})(n,e)))):[]}function E5(t,e){return{documents:[sP(t,e.path)]}}function S5(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=sP(t,r);const o=(function(f){if(f.length!==0)return lP(Fr.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((p=>(function(T){return{field:Xl(T.field),direction:A5(T.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=b0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:n,parent:r}}function b5(t){let e=y5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Nt(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(v){const T=aP(v);return T instanceof Fr&&ON(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(v){return v.map((T=>(function(C){return new Yp(Zl(C.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(v){let T;return T=typeof v=="object"?v.value:v,Fm(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(v){const T=!!v.before,b=v.values||[];return new Kp(b,T)})(n.startAt));let f=null;return n.endAt&&(f=(function(v){const T=!v.before,b=v.values||[];return new Kp(b,T)})(n.endAt)),G3(e,r,l,o,c,"F",d,f)}function w5(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Zl(n.unaryFilter.field);return wn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zl(n.unaryFilter.field);return wn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zl(n.unaryFilter.field);return wn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Zl(n.unaryFilter.field);return wn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return wn.create(Zl(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Fr.create(n.compositeFilter.filters.map((i=>aP(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(n.compositeFilter.op))})(t):Be(30097,{filter:t})}function A5(t){return f5[t]}function x5(t){return h5[t]}function C5(t){return p5[t]}function Xl(t){return{fieldPath:t.canonicalString()}}function Zl(t){return Wn.fromServerFormat(t.fieldPath)}function lP(t){return t instanceof wn?(function(n){if(n.op==="=="){if(ZA(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NAN"}};if(XA(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZA(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NOT_NAN"}};if(XA(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(n.field),op:x5(n.op),value:n.value}}})(t):t instanceof Fr?(function(n){const i=n.getFilters().map((r=>lP(r)));return i.length===1?i[0]:{compositeFilter:{op:C5(n.op),filters:i}}})(t):Be(54877,{filter:t})}function I5(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function uP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,i,r,o=qe.min(),l=qe.min(),c=Qn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.gt=e}}function N5(t){const e=b5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?S0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this.Dn=new D5}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Yo.min())}updateCollectionGroup(e,n,i){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class D5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Mn(Bt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Mn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cP=41943040;class ki{static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(cP,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Su(0)}static ur(){return new Su(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="LruGarbageCollector",M5=1048576;function mx([t,e],[n,i]){const r=et(t,n);return r===0?et(e,i):r}class k5{constructor(e){this.Tr=e,this.buffer=new Mn(mx),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();mx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Se(px,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ku(n)?Se(px,"Ignoring IndexedDB error during garbage collection: ",n):await Mu(n)}await this.Rr(3e5)}))}}class L5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Um.ue);const i=new k5(n);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(hx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hx):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,o,l,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r)))).next((v=>(i=v,c=Date.now(),this.removeTargets(e,i,n)))).next((v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(f=Date.now(),Wl()<=ut.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v}))))}}function O5(t,e){return new L5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(){this.changes=new rl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?de.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&hd(i.mutation,r,Zi.empty(),Yt.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ct()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ct()){const r=za();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((o=>{let l=Xc();return o.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=za();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ct())))}populateOverlays(e,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let o=qs();const l=fd(),c=(function(){return fd()})();return n.forEach(((d,f)=>{const p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof oa)?o=o.insert(f.key,f):p!==void 0?(l.set(f.key,p.mutation.getFieldMask()),hd(p.mutation,f,p.mutation.getFieldMask(),Yt.now())):l.set(f.key,Zi.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((f,p)=>l.set(f,p))),n.forEach(((f,p)=>{var v;return c.set(f,new F5(p,(v=l.get(f))!==null&&v!==void 0?v:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=fd();let r=new en(((l,c)=>l-c)),o=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let p=i.get(d)||Zi.empty();p=c.applyToLocalView(f,p),i.set(d,p);const v=(r.get(c.batchId)||ct()).add(d);r=r.insert(c.batchId,v)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,v=$N();p.forEach((T=>{if(!o.has(T)){const b=XN(n.get(T),i.get(T));b!==null&&v.set(T,b),o=o.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return de.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return Pe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):de.resolve(za());let c=Md,d=o;return l.next((f=>de.forEach(f,((p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(p)?de.resolve():this.remoteDocumentCache.getEntry(e,p).next((T=>{d=d.insert(p,T)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,d,f,ct()))).next((p=>({batchId:c,changes:jN(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pe(n)).next((i=>{let r=Xc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=Xc();return this.indexManager.getCollectionParents(e,o).next((c=>de.forEach(c,(d=>{const f=(function(v,T){return new rf(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((p=>{p.forEach(((v,T)=>{l=l.insert(v,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r)))).next((l=>{o.forEach(((d,f)=>{const p=f.getKey();l.get(p)===null&&(l=l.insert(p,si.newInvalidDocument(p)))}));let c=Xc();return l.forEach(((d,f)=>{const p=o.get(d);p!==void 0&&hd(p.mutation,f,Zi.empty(),Yt.now()),Gm(n,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:rs(r.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(r){return{name:r.name,query:N5(r.bundledQuery),readTime:rs(r.readTime)}})(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(){this.overlays=new en(Pe.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const i=za();return de.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,o)=>{this.wt(e,n,o)})),de.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),de.resolve()}getOverlaysForCollection(e,n,i){const r=za(),o=n.length+1,l=new Pe(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>i&&r.set(d.getKey(),d)}return de.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new en(((f,p)=>f-p));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=za(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=za(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,p)=>c.set(f,p))),!(c.size()>=r)););return de.resolve(c)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new a5(n,i));let o=this.kr.get(n);o===void 0&&(o=ct(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.qr=new Mn(zn.Qr),this.$r=new Mn(zn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new zn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new zn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Pe(new Bt([])),i=new zn(n,e),r=new zn(n,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Pe(new Bt([])),i=new zn(n,e),r=new zn(n,e+1);let o=ct();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new zn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class zn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Pe.comparator(e.key,n.key)||et(e.Hr,n.Hr)}static Ur(e,n){return et(e.Hr,n.Hr)||Pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Mn(zn.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new o5(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new zn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return de.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?z_:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new zn(n,0),r=new zn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),de.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Mn(et);return n.forEach((r=>{const o=new zn(r,0),l=new zn(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),de.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;Pe.isDocumentKey(o)||(o=o.child(""));const l=new zn(new Pe(o),0);let c=new Mn(et);return this.Yr.forEachWhile((d=>{const f=d.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(d.Hr)),!0)}),l),de.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Nt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return de.forEach(n.mutations,(r=>{const o=new zn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new zn(n,0),r=this.Yr.firstAfterOrEqual(i);return de.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.ni=e,this.docs=(function(){return new en(Pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return de.resolve(i?i.document.mutableCopy():si.newInvalidDocument(n))}getEntries(e,n){let i=qs();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():si.newInvalidDocument(r))})),de.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=qs();const l=n.path,c=new Pe(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||E3(T3(p),i)<=0||(r.has(p.key)||Gm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Be(9500)}ri(e,n){return de.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new $5(this)}getSize(e){return de.resolve(this.size)}}class $5 extends U5{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.persistence=e,this.ii=new rl((n=>H_(n)),j_),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.si=0,this.oi=new Q_,this.targetCount=0,this._i=Su.ar()}forEachTarget(e,n){return this.ii.forEach(((i,r)=>n(r))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Su(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),de.waitFor(o).next((()=>r))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return de.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),de.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),de.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return de.resolve(i)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n){this.ai={},this.overlays={},this.ui=new Um(0),this.ci=!1,this.ci=!0,this.li=new G5,this.referenceDelegate=e(this),this.hi=new K5(this),this.indexManager=new P5,this.remoteDocumentCache=(function(r){return new j5(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new R5(n),this.Ti=new z5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new q5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new H5(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){Se("MemoryPersistence","Starting transaction:",e);const r=new Y5(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,n){return de.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class Y5 extends b3{constructor(e){super(),this.currentSequenceNumber=e}}class X_{constructor(e){this.persistence=e,this.Ai=new Q_,this.Ri=null}static Vi(e){return new X_(e)}get mi(){if(this.Ri)return this.Ri;throw Be(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),de.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,(i=>{const r=Pe.fromPath(i);return this.fi(e,r).next((o=>{o||n.removeEntry(r,qe.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xp{constructor(e,n){this.persistence=e,this.gi=new rl((i=>x3(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=O5(this,n)}static Vi(e,n){return new Xp(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return de.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?de.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,o.removeEntry(l,qe.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_p(e.data.value)),n}Sr(e,n,i){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return de.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=ct(),r=ct();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Z_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return IL()?8:w3(li())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ps(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,n,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new J5;return this.ws(e,n,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>o.result))}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Wl()<=ut.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(Wl()<=ut.DEBUG&&Se("QueryEngine","Query:",Ql(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Wl()<=ut.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,is(n))):de.resolve())}ps(e,n){if(ix(n))return de.resolve(null);let i=is(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=S0(n,null,"F"),i=is(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=ct(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const f=this.bs(n,c);return this.Ds(n,f,l,d.readTime)?this.ps(e,S0(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ys(e,n,i,r){return ix(n)||r.isEqual(qe.min())?de.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(n,o);return this.Ds(n,l,i,r)?de.resolve(null):(Wl()<=ut.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ql(n)),this.vs(e,l,n,_3(r,Md)).next((c=>c)))}))}bs(e,n){let i=new Mn(GN(e));return n.forEach(((r,o)=>{Gm(e,o)&&(i=i.add(o))})),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,n,i){return Wl()<=ut.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Ql(n)),this.gs.getDocumentsMatchingQuery(e,n,Yo.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="LocalStore",Q5=3e8;class X5{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new en(et),this.Ms=new rl((o=>H_(o)),j_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B5(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function Z5(t,e,n,i){return new X5(t,e,n,i)}async function fP(t,e){const n=$e(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let d=ct();for(const f of r){l.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(i,d).next((f=>({Bs:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function e6(t,e){const n=$e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,p){const v=f.batch,T=v.keys();let b=de.resolve();return T.forEach((C=>{b=b.next((()=>p.getEntry(d,C))).next((N=>{const D=f.docVersions.get(C);Nt(D!==null,48541),N.version.compareTo(D)<0&&(v.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),p.addEntry(N)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,v)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=ct();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function hP(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function t6(t,e){const n=$e(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const c=[];e.targetChanges.forEach(((p,v)=>{const T=r.get(v);if(!T)return;c.push(n.hi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>n.hi.addMatchingKeys(o,p.addedDocuments,v))));let b=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Qn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,i)),r=r.insert(v,b),(function(N,D,L){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Q5?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(T,b,p)&&c.push(n.hi.updateTargetData(o,b))}));let d=qs(),f=ct();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push(n6(o,l,e.documentUpdates).next((p=>{d=p.Ls,f=p.ks}))),!i.isEqual(qe.min())){const p=n.hi.getLastRemoteSnapshotVersion(o).next((v=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return de.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,f))).next((()=>d))})).then((o=>(n.Fs=r,o)))}function n6(t,e,n){let i=ct(),r=ct();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let l=qs();return n.forEach(((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),d.isNoDocument()&&d.version.isEqual(qe.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):Se(eT,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{Ls:l,ks:r}}))}function i6(t,e){const n=$e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=z_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function r6(t,e){const n=$e(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.hi.getTargetData(i,e).next((o=>o?(r=o,de.resolve(r)):n.hi.allocateTargetId(i).next((l=>(r=new Fo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function C0(t,e,n){const i=$e(t),r=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!ku(l))throw l;Se(eT,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function gx(t,e,n){const i=$e(t);let r=qe.min(),o=ct();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,p){const v=$e(d),T=v.Ms.get(p);return T!==void 0?de.resolve(v.Fs.get(T)):v.hi.getTargetData(f,p)})(i,l,is(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{o=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?r:qe.min(),n?o:ct()))).next((c=>(s6(i,j3(e),c),{documents:c,qs:o})))))}function s6(t,e,n){let i=t.xs.get(e)||qe.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.xs.set(e,i)}class yx{constructor(){this.activeTargetIds=Q3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o6{constructor(){this.Fo=new yx,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new yx,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="ConnectivityMonitor";class _x{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Se(vx,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Se(vx,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function I0(){return Hh===null?Hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hh++,"0x"+Hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="RestConnection",l6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===jp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const l=I0(),c=this.Go(e,n.toUriEncodedString());Se(Dv,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,r,o);const{host:f}=new URL(c),p=js(f);return this.jo(e,c,d,i,p).then((v=>(Se(Dv,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Ko(Dv,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",i),v}))}Jo(e,n,i,r,o,l){return this.Wo(e,n,i,r,o)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Du})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,n){const i=l6[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="WebChannelConnection";class d6 extends u6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,o){const l=I0();return new Promise(((c,d)=>{const f=new mN;f.setWithCredentials(!0),f.listenOnce(gN.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case vp.NO_ERROR:const v=f.getResponseJson();Se(ei,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case vp.TIMEOUT:Se(ei,`RPC '${e}' ${l} timed out`),d(new _e(ce.DEADLINE_EXCEEDED,"Request time out"));break;case vp.HTTP_ERROR:const T=f.getStatus();if(Se(ei,`RPC '${e}' ${l} failed with status:`,T,"response text:",f.getResponseText()),T>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const N=(function(L){const k=L.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(k)>=0?k:ce.UNKNOWN})(C.status);d(new _e(N,C.message))}else d(new _e(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new _e(ce.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Se(ei,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);Se(ei,`RPC '${e}' ${l} sending request:`,r),f.send(n,"POST",p,i,15)}))}P_(e,n,i){const r=I0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=_N(),c=vN(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const p=o.join("");Se(ei,`Creating RPC '${e}' stream ${r}: ${p}`,d);const v=l.createWebChannel(p,d);this.T_(v);let T=!1,b=!1;const C=new c6({Ho:D=>{b?Se(ei,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(T||(Se(ei,`Opening RPC '${e}' stream ${r} transport.`),v.open(),T=!0),Se(ei,`RPC '${e}' stream ${r} sending:`,D),v.send(D))},Yo:()=>v.close()}),N=(D,L,k)=>{D.listen(L,(U=>{try{k(U)}catch(H){setTimeout((()=>{throw H}),0)}}))};return N(v,Qc.EventType.OPEN,(()=>{b||(Se(ei,`RPC '${e}' stream ${r} transport opened.`),C.s_())})),N(v,Qc.EventType.CLOSE,(()=>{b||(b=!0,Se(ei,`RPC '${e}' stream ${r} transport closed`),C.__(),this.I_(v))})),N(v,Qc.EventType.ERROR,(D=>{b||(b=!0,Ko(ei,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),C.__(new _e(ce.UNAVAILABLE,"The operation could not be completed")))})),N(v,Qc.EventType.MESSAGE,(D=>{var L;if(!b){const k=D.data[0];Nt(!!k,16349);const U=k,H=(U==null?void 0:U.error)||((L=U[0])===null||L===void 0?void 0:L.error);if(H){Se(ei,`RPC '${e}' stream ${r} received error:`,H);const K=H.status;let G=(function(P){const V=bn[P];if(V!==void 0)return eP(V)})(K),I=H.message;G===void 0&&(G=ce.INTERNAL,I="Unknown error status: "+K+" with message "+H.message),b=!0,C.__(new _e(G,I)),v.close()}else Se(ei,`RPC '${e}' stream ${r} received:`,k),C.a_(k)}})),N(c,yN.STAT_EVENT,(D=>{D.stat===m0.PROXY?Se(ei,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===m0.NOPROXY&&Se(ei,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{C.o_()}),0),C}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Mv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){return new m5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&Se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="PersistentStream";class mP{constructor(e,n,i,r,o,l,c,d){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new pP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(zs(n.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===n&&this.W_(i,r)}),(i=>{e((()=>{const r=new _e(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Se(Tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(Se(Tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class f6 extends mP{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=v5(this.serializer,e),i=(function(o){if(!("targetChange"in o))return qe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?qe.min():l.readTime?rs(l.readTime):qe.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=x0(this.serializer),n.addTarget=(function(o,l){let c;const d=l.target;if(c=T0(d)?{documents:E5(o,d)}:{query:S5(o,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=iP(o,l.resumeToken);const f=b0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(qe.min())>0){c.readTime=Qp(o,l.snapshotVersion.toTimestamp());const f=b0(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=w5(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=x0(this.serializer),n.removeTarget=e,this.k_(n)}}class h6 extends mP{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=T5(e.writeResults,e.commitTime),i=rs(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=x0(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>_5(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{}class m6 extends p6{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,w0(n,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ce.UNKNOWN,o.toString())}))}Jo(e,n,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,w0(n,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(ce.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class g6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zs(n),this._a=!1):Se("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="RemoteStore";class y6{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{sl(this)&&(Se(Za,"Restarting streams for network reachability change."),await(async function(d){const f=$e(d);f.Ia.add(4),await af(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Ym(f)})(this))}))})),this.Aa=new g6(i,r)}}async function Ym(t){if(sl(t))for(const e of t.da)await e(!0)}async function af(t){for(const e of t.da)await e(!1)}function gP(t,e){const n=$e(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),rT(n)?iT(n):Vu(n).x_()&&nT(n,e))}function tT(t,e){const n=$e(t),i=Vu(n);n.Ta.delete(e),i.x_()&&yP(n,e),n.Ta.size===0&&(i.x_()?i.B_():sl(n)&&n.Aa.set("Unknown"))}function nT(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vu(t).H_(e)}function yP(t,e){t.Ra.$e(e),Vu(t).Y_(e)}function iT(t){t.Ra=new d5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Vu(t).start(),t.Aa.aa()}function rT(t){return sl(t)&&!Vu(t).M_()&&t.Ta.size>0}function sl(t){return $e(t).Ia.size===0}function vP(t){t.Ra=void 0}async function v6(t){t.Aa.set("Online")}async function _6(t){t.Ta.forEach(((e,n)=>{nT(t,e)}))}async function T6(t,e){vP(t),rT(t)?(t.Aa.la(e),iT(t)):t.Aa.set("Unknown")}async function E6(t,e,n){if(t.Aa.set("Online"),e instanceof nP&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(t,e)}catch(i){Se(Za,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Zp(t,i)}else if(e instanceof Sp?t.Ra.Ye(e):e instanceof tP?t.Ra.it(e):t.Ra.et(e),!n.isEqual(qe.min()))try{const i=await hP(t.localStore);n.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ta.get(f);p&&o.Ta.set(f,p.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,f)=>{const p=o.Ta.get(d);if(!p)return;o.Ta.set(d,p.withResumeToken(Qn.EMPTY_BYTE_STRING,p.snapshotVersion)),yP(o,d);const v=new Fo(p.target,d,f,p.sequenceNumber);nT(o,v)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){Se(Za,"Failed to raise snapshot:",i),await Zp(t,i)}}async function Zp(t,e,n){if(!ku(e))throw e;t.Ia.add(1),await af(t),t.Aa.set("Offline"),n||(n=()=>hP(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Se(Za,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ym(t)}))}function _P(t,e){return e().catch((n=>Zp(t,n,e)))}async function Jm(t){const e=$e(t),n=Xo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:z_;for(;S6(e);)try{const r=await i6(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,b6(e,r)}catch(r){await Zp(e,r)}TP(e)&&EP(e)}function S6(t){return sl(t)&&t.Pa.length<10}function b6(t,e){t.Pa.push(e);const n=Xo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function TP(t){return sl(t)&&!Xo(t).M_()&&t.Pa.length>0}function EP(t){Xo(t).start()}async function w6(t){Xo(t).na()}async function A6(t){const e=Xo(t);for(const n of t.Pa)e.X_(n.mutations)}async function x6(t,e,n){const i=t.Pa.shift(),r=Y_.from(i,e,n);await _P(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Jm(t)}async function C6(t,e){e&&Xo(t).Z_&&await(async function(i,r){if((function(l){return u5(l)&&l!==ce.ABORTED})(r.code)){const o=i.Pa.shift();Xo(i).N_(),await _P(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Jm(i)}})(t,e),TP(t)&&EP(t)}async function Ex(t,e){const n=$e(t);n.asyncQueue.verifyOperationInProgress(),Se(Za,"RemoteStore received new credentials");const i=sl(n);n.Ia.add(3),await af(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ym(n)}async function I6(t,e){const n=$e(t);e?(n.Ia.delete(2),await Ym(n)):e||(n.Ia.add(2),await af(n),n.Aa.set("Unknown"))}function Vu(t){return t.Va||(t.Va=(function(n,i,r){const o=$e(n);return o.ia(),new f6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:v6.bind(null,t),e_:_6.bind(null,t),n_:T6.bind(null,t),J_:E6.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),rT(t)?iT(t):t.Aa.set("Unknown")):(await t.Va.stop(),vP(t))}))),t.Va}function Xo(t){return t.ma||(t.ma=(function(n,i,r){const o=$e(n);return o.ia(),new h6(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:w6.bind(null,t),n_:C6.bind(null,t),ea:A6.bind(null,t),ta:x6.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Jm(t)):(await t.ma.stop(),t.Pa.length>0&&(Se(Za,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new sT(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oT(t,e){if(zs("AsyncQueue",`${e}: ${t}`),ku(t))return new _e(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{static emptySet(e){return new du(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Pe.comparator(n.key,i.key):(n,i)=>Pe.comparator(n.key,i.key),this.keyedMap=Xc(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof du)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new du;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.fa=new en(Pe.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Be(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class bu{constructor(e,n,i,r,o,l,c,d,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new bu(e,n,du.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class N6{constructor(){this.queries=bx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=$e(n),o=r.queries;r.queries=bx(),o.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new _e(ce.ABORTED,"Firestore shutting down"))}}function bx(){return new rl((t=>qN(t)),qm)}async function SP(t,e){const n=$e(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new R6,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(r,!0);break;case 1:o.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const c=oT(l,`Initialization of query '${Ql(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&aT(n)}async function bP(t,e){const n=$e(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function P6(t,e){const n=$e(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&aT(n)}function D6(t,e,n){const i=$e(t),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(n);i.queries.delete(e)}function aT(t){t.Da.forEach((e=>{e.next()}))}var R0,wx;(wx=R0||(R0={})).Fa="default",wx.Cache="cache";class wP{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new bu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=bu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==R0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.key=e}}class xP{constructor(e){this.key=e}}class M6{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ct(),this.mutatedKeys=ct(),this.Xa=GN(e),this.eu=new du(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Sx,r=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const d=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,v)=>{const T=r.get(p),b=Gm(this.query,v)?v:null,C=!!T&&this.mutatedKeys.has(T.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let D=!1;T&&b?T.data.isEqual(b.data)?C!==N&&(i.track({type:3,doc:b}),D=!0):this.iu(T,b)||(i.track({type:2,doc:b}),D=!0,(d&&this.Xa(b,d)>0||f&&this.Xa(b,f)<0)&&(c=!0)):!T&&b?(i.track({type:0,doc:b}),D=!0):T&&!b&&(i.track({type:1,doc:T}),D=!0,(d||f)&&(c=!0)),D&&(b?(l=l.add(b),o=N?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((p,v)=>(function(b,C){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{At:D})}};return N(b)-N(C)})(p.type,v.type)||this.Xa(p.doc,v.doc))),this.su(i),r=r!=null&&r;const c=n&&!r?this.ou():[],d=this.Za.size===0&&this.current&&!r?1:0,f=d!==this.Ya;return this.Ya=d,l.length!==0||f?{snapshot:new bu(this.query,e.eu,o,l,e.mutatedKeys,d===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Sx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ct(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new xP(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new AP(i))})),n}uu(e){this.Ha=e.qs,this.Za=ct();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return bu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const lT="SyncEngine";class k6{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class V6{constructor(e){this.key=e,this.lu=!1}}class L6{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new rl((c=>qN(c)),qm),this.Tu=new Map,this.Iu=new Set,this.du=new en(Pe.comparator),this.Eu=new Map,this.Au=new Q_,this.Ru={},this.Vu=new Map,this.mu=Su.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function O6(t,e,n=!0){const i=DP(t);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await CP(i,e,n,!0),r}async function U6(t,e){const n=DP(t);await CP(n,e,!0,!1)}async function CP(t,e,n,i){const r=await r6(t.localStore,is(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await F6(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&gP(t.remoteStore,r),c}async function F6(t,e,n,i,r){t.gu=(v,T,b)=>(async function(N,D,L,k){let U=D.view.nu(L);U.Ds&&(U=await gx(N.localStore,D.query,!1).then((({documents:I})=>D.view.nu(I,U))));const H=k&&k.targetChanges.get(D.targetId),K=k&&k.targetMismatches.get(D.targetId)!=null,G=D.view.applyChanges(U,N.isPrimaryClient,H,K);return xx(N,D.targetId,G._u),G.snapshot})(t,v,T,b);const o=await gx(t.localStore,e,!0),l=new M6(e,o.qs),c=l.nu(o.documents),d=of.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=l.applyChanges(c,t.isPrimaryClient,d);xx(t,n,f._u);const p=new k6(e,n,l);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function B6(t,e,n){const i=$e(t),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!qm(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await C0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&tT(i.remoteStore,r.targetId),N0(i,r.targetId)})).catch(Mu)):(N0(i,r.targetId),await C0(i.localStore,r.targetId,!0))}async function z6(t,e){const n=$e(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),tT(n.remoteStore,i.targetId))}async function q6(t,e,n){const i=J6(t);try{const r=await(function(l,c){const d=$e(l),f=Yt.now(),p=c.reduce(((b,C)=>b.add(C.key)),ct());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let C=qs(),N=ct();return d.Os.getEntries(b,p).next((D=>{C=D,C.forEach(((L,k)=>{k.isValidDocument()||(N=N.add(L))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,C))).next((D=>{v=D;const L=[];for(const k of c){const U=r5(k,v.get(k.key).overlayedDocument);U!=null&&L.push(new oa(k.key,U,kN(U.value.mapValue),Ur.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,L,c)})).next((D=>{T=D;const L=D.applyToLocalDocumentSet(v,N);return d.documentOverlayCache.saveOverlays(b,D.batchId,L)}))})).then((()=>({batchId:T.batchId,changes:jN(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,d){let f=l.Ru[l.currentUser.toKey()];f||(f=new en(et)),f=f.insert(c,d),l.Ru[l.currentUser.toKey()]=f})(i,r.batchId,n),await lf(i,r.changes),await Jm(i.remoteStore)}catch(r){const o=oT(r,"Failed to persist write");n.reject(o)}}async function IP(t,e){const n=$e(t);try{const i=await t6(n.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=n.Eu.get(o);l&&(Nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?Nt(l.lu,14607):r.removedDocuments.size>0&&(Nt(l.lu,42227),l.lu=!1))})),await lf(n,i,e)}catch(i){await Mu(i)}}function Ax(t,e,n){const i=$e(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const d=$e(l);d.onlineState=c;let f=!1;d.queries.forEach(((p,v)=>{for(const T of v.wa)T.va(c)&&(f=!0)})),f&&aT(d)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function G6(t,e,n){const i=$e(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new en(Pe.comparator);l=l.insert(o,si.newNoDocument(o,qe.min()));const c=ct().add(o),d=new $m(qe.min(),new Map,new en(et),l,c);await IP(i,d),i.du=i.du.remove(o),i.Eu.delete(e),uT(i)}else await C0(i.localStore,e,!1).then((()=>N0(i,e,n))).catch(Mu)}async function H6(t,e){const n=$e(t),i=e.batch.batchId;try{const r=await e6(n.localStore,e);NP(n,i,null),RP(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await lf(n,r)}catch(r){await Mu(r)}}async function j6(t,e,n){const i=$e(t);try{const r=await(function(l,c){const d=$e(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next((v=>(Nt(v!==null,37113),p=v.keys(),d.mutationQueue.removeMutationBatch(f,v)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>d.localDocuments.getDocuments(f,p)))}))})(i.localStore,e);NP(i,e,n),RP(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await lf(i,r)}catch(r){await Mu(r)}}function RP(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function NP(t,e,n){const i=$e(t);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function N0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||PP(t,i)}))}function PP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(tT(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),uT(t))}function xx(t,e,n){for(const i of n)i instanceof AP?(t.Au.addReference(i.key,e),$6(t,i)):i instanceof xP?(Se(lT,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||PP(t,i.key)):Be(19791,{yu:i})}function $6(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(Se(lT,"New document in limbo: "+n),t.Iu.add(i),uT(t))}function uT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Pe(Bt.fromString(e)),i=t.mu.next();t.Eu.set(i,new V6(n)),t.du=t.du.insert(n,i),gP(t.remoteStore,new Fo(is(zm(n.path)),i,"TargetPurposeLimboResolution",Um.ue))}}async function lf(t,e,n){const i=$e(t),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((f=>{var p;if((f||n)&&i.isPrimaryClient){const v=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){r.push(f);const v=Z_.Es(d.targetId,f);o.push(v)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(d,f){const p=$e(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>de.forEach(f,(T=>de.forEach(T.Is,(b=>p.persistence.referenceDelegate.addReference(v,T.targetId,b))).next((()=>de.forEach(T.ds,(b=>p.persistence.referenceDelegate.removeReference(v,T.targetId,b)))))))))}catch(v){if(!ku(v))throw v;Se(eT,"Failed to update sequence numbers: "+v)}for(const v of f){const T=v.targetId;if(!v.fromCache){const b=p.Fs.get(T),C=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(C);p.Fs=p.Fs.insert(T,N)}}})(i.localStore,o))}async function K6(t,e){const n=$e(t);if(!n.currentUser.isEqual(e)){Se(lT,"User change. New user:",e.toKey());const i=await fP(n.localStore,e);n.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((d=>{d.reject(new _e(ce.CANCELLED,l))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await lf(n,i.Bs)}}function Y6(t,e){const n=$e(t),i=n.Eu.get(e);if(i&&i.lu)return ct().add(i.key);{let r=ct();const o=n.Tu.get(e);if(!o)return r;for(const l of o){const c=n.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function DP(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G6.bind(null,e),e.hu.J_=P6.bind(null,e.eventManager),e.hu.pu=D6.bind(null,e.eventManager),e}function J6(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j6.bind(null,e),e}class em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Km(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Z5(this.persistence,new W5,e.initialUser,this.serializer)}Du(e){return new dP(X_.Vi,this.serializer)}bu(e){return new o6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}em.provider={build:()=>new em};class W6 extends em{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Nt(this.persistence.referenceDelegate instanceof Xp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new V5(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new dP((i=>Xp.Vi(i,n)),this.serializer)}}class P0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ax(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=K6.bind(null,this.syncEngine),await I6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new N6})()}createDatastore(e){const n=Km(e.databaseInfo.databaseId),i=(function(o){return new d6(o)})(e.databaseInfo);return(function(o,l,c,d){return new m6(o,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,o,l,c){return new y6(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ax(this.syncEngine,n,0)),(function(){return _x.C()?new _x:new a6})())}createSyncEngine(e,n){return(function(r,o,l,c,d,f,p){const v=new L6(r,o,l,c,d,f);return p&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const o=$e(r);Se(Za,"RemoteStore shutting down."),o.Ia.add(5),await af(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}P0.provider={build:()=>new P0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="FirestoreClient";class Q6{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ri.UNAUTHENTICATED,this.clientId=B_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{Se(Zo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Se(Zo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=oT(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function kv(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Zo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await fP(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{Ko("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{Se("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{Ko("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),t._offlineComponents=e}async function Cx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await X6(t);Se(Zo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>Ex(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>Ex(e.remoteStore,r))),t._onlineComponents=e}async function X6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Zo,"Using user provided OfflineComponentProvider");try{await kv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ce.FAILED_PRECONDITION||r.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Ko("Error using user provided cache. Falling back to memory cache: "+n),await kv(t,new em)}}else Se(Zo,"Using default OfflineComponentProvider"),await kv(t,new W6(void 0));return t._offlineComponents}async function kP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Zo,"Using user provided OnlineComponentProvider"),await Cx(t,t._uninitializedComponentsProvider._online)):(Se(Zo,"Using default OnlineComponentProvider"),await Cx(t,new P0))),t._onlineComponents}function Z6(t){return kP(t).then((e=>e.syncEngine))}async function D0(t){const e=await kP(t),n=e.eventManager;return n.onListen=O6.bind(null,e.syncEngine),n.onUnlisten=B6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z6.bind(null,e.syncEngine),n}function eF(t,e,n={}){const i=new Ho;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,d,f){const p=new MP({next:T=>{p.Ou(),l.enqueueAndForget((()=>bP(o,v)));const b=T.docs.has(c);!b&&T.fromCache?f.reject(new _e(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&T.fromCache&&d&&d.source==="server"?f.reject(new _e(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),v=new wP(zm(c.path),p,{includeMetadataChanges:!0,ka:!0});return SP(o,v)})(await D0(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="firestore.googleapis.com",Rx=!0;class Nx{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LP,this.ssl=Rx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Rx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M5)throw new _e(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new u3;switch(i.type){case"firstParty":return new h3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Ix.get(n);i&&(Se("ComponentProvider","Removing Datastore"),Ix.delete(n),i.terminate())})(this),Promise.resolve()}}function tF(t,e,n,i={}){var r;t=ns(t,Wm);const o=js(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(Pm(`https://${d}`),Dm("Firestore",!0)),l.host!==LP&&l.host!==d&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:i});if(!Ja(f,c)&&(t._setSettings(f),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=ri.MOCK_USER;else{p=R1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new _e(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ri(T)}t._authCredentials=new c3(new EN(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lu(this.firestore,e,this._query)}}class gn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}toJSON(){return{type:gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(nf(n,gn._jsonSchema))return new gn(e,i||null,new Pe(Bt.fromString(n.referencePath)))}}gn._jsonSchemaVersion="firestore/documentReference/1.0",gn._jsonSchema={type:An("string",gn._jsonSchemaVersion),referencePath:An("string")};class jo extends Lu{constructor(e,n,i){super(e,n,zm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Pe(e))}withConverter(e){return new jo(this.firestore,e,this._path)}}function Ou(t,e,...n){if(t=Ut(t),bN("collection","path",e),t instanceof Wm){const i=Bt.fromString(e,...n);return GA(i),new jo(t,null,i)}{if(!(t instanceof gn||t instanceof jo))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Bt.fromString(e,...n));return GA(i),new jo(t.firestore,null,i)}}function Uu(t,e,...n){if(t=Ut(t),arguments.length===1&&(e=B_.newId()),bN("doc","path",e),t instanceof Wm){const i=Bt.fromString(e,...n);return qA(i),new gn(t,null,new Pe(i))}{if(!(t instanceof gn||t instanceof jo))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Bt.fromString(e,...n));return qA(i),new gn(t.firestore,t instanceof jo?t.converter:null,new Pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="AsyncQueue";class Dx{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new pP(this,"async_queue_retry"),this.oc=()=>{const i=Mv();i&&Se(Px,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Mv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Mv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Ho;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ku(e))throw e;Se(Px,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,zs("INTERNAL UNHANDLED ERROR: ",Mx(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=sT.createAndSchedule(this,e,n,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Be(47125,{hc:Mx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Mx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(t,["next","error","complete"])}class el extends Wm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Dx,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dx(e),this._firestoreClient=void 0,await e}}}function nF(t,e){const n=typeof t=="object"?t:Mm(),i=typeof t=="string"?t:jp,r=Qd(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=A_("firestore");o&&tF(r,...o)}return r}function cT(t){if(t._terminated)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iF(t),t._firestoreClient}function iF(t){var e,n,i;const r=t._freezeSettings(),o=(function(c,d,f,p){return new R3(c,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,VP(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Q6(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(Qn.fromBase64String(e))}catch(n){throw new _e(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nf(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:An("string",Tr._jsonSchemaVersion),bytes:An("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ss._jsonSchemaVersion}}static fromJSON(e){if(nf(e,ss._jsonSchema))return new ss(e.latitude,e.longitude)}}ss._jsonSchemaVersion="firestore/geoPoint/1.0",ss._jsonSchema={type:An("string",ss._jsonSchemaVersion),latitude:An("number"),longitude:An("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:os._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nf(e,os._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new os(e.vectorValues);throw new _e(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}os._jsonSchemaVersion="firestore/vectorValue/1.0",os._jsonSchema={type:An("string",os._jsonSchemaVersion),vectorValues:An("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=/^__.*__$/;class sF{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new oa(e,this.data,this.fieldMask,n,this.fieldTransforms):new sf(e,this.data,n,this.fieldTransforms)}}class OP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new oa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ec:t})}}class fT{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new fT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return tm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(UP(this.Ec)&&rF.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class oF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Km(e)}Dc(e,n,i,r=!1){return new fT({Ec:e,methodName:n,bc:i,path:Wn.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hT(t){const e=t._freezeSettings(),n=Km(t._databaseId);return new oF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aF(t,e,n,i,r,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,r);pT("Data must be an object, but it was:",l,i);const c=FP(i,l);let d,f;if(o.merge)d=new Zi(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const T=M0(e,v,n);if(!l.contains(T))throw new _e(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);zP(p,T)||p.push(T)}d=new Zi(p),f=l.fieldTransforms.filter((v=>d.covers(v.field)))}else d=null,f=l.fieldTransforms;return new sF(new Vi(c),d,f)}class Xm extends dT{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xm}}function lF(t,e,n,i){const r=t.Dc(1,e,n);pT("Data must be an object, but it was:",r,i);const o=[],l=Vi.empty();sa(i,((d,f)=>{const p=mT(e,d,n);f=Ut(f);const v=r.gc(p);if(f instanceof Xm)o.push(p);else{const T=uf(f,v);T!=null&&(o.push(p),l.set(p,T))}}));const c=new Zi(o);return new OP(l,c,r.fieldTransforms)}function uF(t,e,n,i,r,o){const l=t.Dc(1,e,n),c=[M0(e,i,n)],d=[r];if(o.length%2!=0)throw new _e(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)c.push(M0(e,o[T])),d.push(o[T+1]);const f=[],p=Vi.empty();for(let T=c.length-1;T>=0;--T)if(!zP(f,c[T])){const b=c[T];let C=d[T];C=Ut(C);const N=l.gc(b);if(C instanceof Xm)f.push(b);else{const D=uf(C,N);D!=null&&(f.push(b),p.set(b,D))}}const v=new Zi(f);return new OP(p,v,l.fieldTransforms)}function cF(t,e,n,i=!1){return uf(n,t.Dc(i?4:3,e))}function uf(t,e){if(BP(t=Ut(t)))return pT("Unsupported field value:",e,t),FP(t,e);if(t instanceof dT)return(function(i,r){if(!UP(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let d=uf(c,r.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}})(t,e)}return(function(i,r){if((i=Ut(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return X3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Yt.fromDate(i);return{timestampValue:Qp(r.serializer,o)}}if(i instanceof Yt){const o=new Yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Qp(r.serializer,o)}}if(i instanceof ss)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Tr)return{bytesValue:iP(r.serializer,i._byteString)};if(i instanceof gn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:W_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof os)return(function(l,c){return{mapValue:{fields:{[DN]:{stringValue:MN},[$p]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw c.wc("VectorValues must only contain numeric values.");return $_(c.serializer,f)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Om(i)}`)})(t,e)}function FP(t,e){const n={};return xN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,((i,r)=>{const o=uf(r,e.Vc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function BP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yt||t instanceof ss||t instanceof Tr||t instanceof gn||t instanceof dT||t instanceof os)}function pT(t,e,n){if(!BP(n)||!wN(n)){const i=Om(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function M0(t,e,n){if((e=Ut(e))instanceof Qm)return e._internalPath;if(typeof e=="string")return mT(t,e);throw tm("Field path arguments must be of type string or ",t,!1,void 0,n)}const dF=new RegExp("[~\\*/\\[\\]]");function mT(t,e,n){if(e.search(dF)>=0)throw tm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qm(...e.split("."))._internalPath}catch{throw tm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tm(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${r}`),d+=")"),new _e(ce.INVALID_ARGUMENT,c+t+d)}function zP(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(GP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fF extends qP{data(){return super.data()}}function GP(t,e){return typeof e=="string"?mT(t,e):e instanceof Qm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gT{}class pF extends gT{}function yT(t,e,...n){let i=[];e instanceof gT&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((d=>d instanceof _T)).length,c=o.filter((d=>d instanceof vT)).length;if(l>1||l>0&&c>0)throw new _e(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class vT extends pF{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new vT(e,n,i)}_apply(e){const n=this._parse(e);return HP(e._query,n),new Lu(e.firestore,e.converter,E0(e._query,n))}_parse(e){const n=hT(e.firestore);return(function(o,l,c,d,f,p,v){let T;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Lx(v,p);const C=[];for(const N of v)C.push(Vx(d,o,N));T={arrayValue:{values:C}}}else T=Vx(d,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Lx(v,p),T=cF(c,l,v,p==="in"||p==="not-in");return wn.create(f,p,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class _T extends gT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _T(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const d of c)HP(l,d),l=E0(l,d)})(e._query,n),new Lu(e.firestore,e.converter,E0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Vx(t,e,n){if(typeof(n=Ut(n))=="string"){if(n==="")throw new _e(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zN(e)&&n.indexOf("/")!==-1)throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Bt.fromString(n));if(!Pe.isDocumentKey(i))throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return QA(t,new Pe(i))}if(n instanceof gn)return QA(t,n._key);throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Om(n)}.`)}function Lx(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HP(t,e){const n=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class mF{convertValue(e,n="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return sa(e,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[$p].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>mn(l.doubleValue)));return new os(o)}convertGeoPoint(e){return new ss(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Bm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(kd(e));default:return null}}convertTimestamp(e){const n=Jo(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Bt.fromString(e);Nt(uP(i),9688,{name:e});const r=new Vd(i.get(1),i.get(3)),o=new Pe(i.popFirst(5));return r.isEqual(n)||zs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ed{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ga extends qP{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(GP("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ga._jsonSchema={type:An("string",Ga._jsonSchemaVersion),bundleSource:An("string","DocumentSnapshot"),bundleName:An("string"),bundle:An("string")};class bp extends Ga{data(e={}){return super.data(e)}}class fu{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ed(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new bp(this._firestore,this._userDataWriter,i.key,i,new ed(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const d=new bp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ed(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const d=new bp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ed(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,p=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:yF(c.type),doc:d,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=B_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t){t=ns(t,gn);const e=ns(t.firestore,el);return eF(cT(e),t._key).then((n=>$P(e,t,n)))}fu._jsonSchemaVersion="firestore/querySnapshot/1.0",fu._jsonSchema={type:An("string",fu._jsonSchemaVersion),bundleSource:An("string","QuerySnapshot"),bundleName:An("string"),bundle:An("string")};class jP extends mF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function _F(t,e,n,...i){t=ns(t,gn);const r=ns(t.firestore,el),o=hT(r);let l;return l=typeof(e=Ut(e))=="string"||e instanceof Qm?uF(o,"updateDoc",t._key,e,n,i):lF(o,"updateDoc",t._key,e),bT(r,[l.toMutation(t._key,Ur.exists(!0))])}function TT(t){return bT(ns(t.firestore,el),[new K_(t._key,Ur.none())])}function ET(t,e){const n=ns(t.firestore,el),i=Uu(t),r=gF(t.converter,e);return bT(n,[aF(hT(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ur.exists(!1))]).then((()=>i))}function ST(t,...e){var n,i,r;t=Ut(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||kx(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(kx(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let d,f,p;if(t instanceof gn)f=ns(t.firestore,el),p=zm(t._key.path),d={next:v=>{e[l]&&e[l]($P(f,t,v))},error:e[l+1],complete:e[l+2]};else{const v=ns(t,Lu);f=ns(v.firestore,el),p=v._query;const T=new jP(f);d={next:b=>{e[l]&&e[l](new fu(f,T,v,b))},error:e[l+1],complete:e[l+2]},hF(t._query)}return(function(T,b,C,N){const D=new MP(N),L=new wP(b,D,C);return T.asyncQueue.enqueueAndForget((async()=>SP(await D0(T),L))),()=>{D.Ou(),T.asyncQueue.enqueueAndForget((async()=>bP(await D0(T),L)))}})(cT(f),p,c,d)}function bT(t,e){return(function(i,r){const o=new Ho;return i.asyncQueue.enqueueAndForget((async()=>q6(await Z6(i),r,o))),o.promise})(cT(t),e)}function $P(t,e,n){const i=n.docs.get(e._key),r=new jP(t);return new Ga(t,r,e._key,i,new ed(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Du=r})(il),$o(new Us("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new el(new d3(i.getProvider("auth-internal")),new p3(l,i.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new _e(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(f.options.projectId,p)})(l,r),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),Er(OA,UA,e),Er(OA,UA,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebasestorage.googleapis.com",YP="storageBucket",TF=120*1e3,EF=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends Br{constructor(e,n,i=0){super(Vv(e),`Firebase Storage: ${n} (${Vv(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ln||(ln={}));function Vv(t){return"storage/"+t}function wT(){const t="An unknown error occurred, please check the error payload for server response.";return new un(ln.UNKNOWN,t)}function SF(t){return new un(ln.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function bF(t){return new un(ln.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new un(ln.UNAUTHENTICATED,t)}function AF(){return new un(ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xF(t){return new un(ln.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function CF(){return new un(ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IF(){return new un(ln.CANCELED,"User canceled the upload/download.")}function RF(t){return new un(ln.INVALID_URL,"Invalid URL '"+t+"'.")}function NF(t){return new un(ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function PF(){return new un(ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YP+"' property when initializing the app?")}function DF(){return new un(ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MF(){return new un(ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kF(t){return new un(ln.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function k0(t){return new un(ln.INVALID_ARGUMENT,t)}function JP(){return new un(ln.APP_DELETED,"The Firebase app was deleted.")}function VF(t){return new un(ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pd(t,e){return new un(ln.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zc(t){throw new un(ln.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=er.makeFromUrl(e,n)}catch{return new er(e,"")}if(i.path==="")return i;throw NF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),d={bucket:1,path:3};function f(H){H.path_=decodeURIComponent(H.path)}const p="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${p}/b/${r}/o${T}`,"i"),C={bucket:1,path:3},N=n===KP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",L=new RegExp(`^https?://${N}/${r}/${D}`,"i"),U=[{regex:c,indices:d,postModify:o},{regex:b,indices:C,postModify:f},{regex:L,indices:{bucket:1,path:2},postModify:f}];for(let H=0;H<U.length;H++){const K=U[H],G=K.regex.exec(e);if(G){const I=G[K.indices.bucket];let R=G[K.indices.path];R||(R=""),i=new er(I,R),K.postModify(i);break}}if(i==null)throw RF(e);return i}}class LF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function d(){return c===2}let f=!1;function p(...D){f||(f=!0,e.apply(null,D))}function v(D){r=setTimeout(()=>{r=null,t(b,d())},D)}function T(){o&&clearTimeout(o)}function b(D,...L){if(f){T();return}if(D){T(),p.call(null,D,...L);return}if(d()||l){T(),p.call(null,D,...L);return}i<64&&(i*=2);let U;c===1?(c=2,U=0):U=(i+Math.random())*1e3,v(U)}let C=!1;function N(D){C||(C=!0,T(),!f&&(r!==null?(D||(c=2),clearTimeout(r),v(0)):D||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function UF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t){return t!==void 0}function BF(t){return typeof t=="object"&&!Array.isArray(t)}function AT(t){return typeof t=="string"||t instanceof String}function Ox(t){return xT()&&t instanceof Blob}function xT(){return typeof Blob<"u"}function Ux(t,e,n,i){if(i<e)throw k0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw k0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function WP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ha;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ha||(Ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,n,i,r,o,l,c,d,f,p,v,T=!0,b=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,N)=>{this.resolve_=C,this.reject_=N,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new jh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Ha.NO_ERROR,d=o.getStatus();if(!c||zF(d,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===Ha.ABORT;i(!1,new jh(!1,null,p));return}const f=this.successCodes_.indexOf(d)!==-1;i(!0,new jh(f,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());FF(d)?o(d):o()}catch(d){l(d)}else if(c!==null){const d=wT();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(r.canceled){const d=this.appDelete_?JP():IF();l(d)}else{const d=CF();l(d)}};this.canceled_?n(!1,new jh(!1,null,!0)):this.backoffId_=OF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function GF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $F(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function KF(t,e,n,i,r,o,l=!0,c=!1){const d=WP(t.urlParams),f=t.url+d,p=Object.assign({},t.headers);return jF(p,e),GF(p,n),HF(p,o),$F(p,i),new qF(f,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JF(...t){const e=YF();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(xT())return new Blob(t);throw new un(ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(t){if(typeof atob>"u")throw kF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lv{constructor(e,n){this.data=e,this.contentType=n||null}}function QP(t,e){switch(t){case Vr.RAW:return new Lv(XP(e));case Vr.BASE64:case Vr.BASE64URL:return new Lv(ZP(t,e));case Vr.DATA_URL:return new Lv(ZF(e),eB(e))}throw wT()}function XP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function XF(t){let e;try{e=decodeURIComponent(t)}catch{throw pd(Vr.DATA_URL,"Malformed data URL.")}return XP(e)}function ZP(t,e){switch(t){case Vr.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw pd(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Vr.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw pd(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=QF(e)}catch(r){throw r.message.includes("polyfill")?r:pd(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class eD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw pd(Vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=tB(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function ZF(t){const e=new eD(t);return e.base64?ZP(Vr.BASE64,e.rest):XF(e.rest)}function eB(t){return new eD(t).contentType}function tB(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){let i=0,r="";Ox(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ox(this.data_)){const i=this.data_,r=WF(i,e,n);return r===null?null:new Vo(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Vo(i,!0)}}static getBlob(...e){if(xT()){const n=e.map(i=>i instanceof Vo?i.data_:i);return new Vo(JF.apply(null,n))}else{const n=e.map(l=>AT(l)?QP(Vr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new Vo(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){let e;try{e=JSON.parse(t)}catch{return null}return BF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function iB(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function nD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t,e){return e}class Ti{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||rB}}let $h=null;function sB(t){return!AT(t)||t.length<2?t:nD(t)}function iD(){if($h)return $h;const t=[];t.push(new Ti("bucket")),t.push(new Ti("generation")),t.push(new Ti("metageneration")),t.push(new Ti("name","fullPath",!0));function e(o,l){return sB(l)}const n=new Ti("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new Ti("size");return r.xform=i,t.push(r),t.push(new Ti("timeCreated")),t.push(new Ti("updated")),t.push(new Ti("md5Hash",null,!0)),t.push(new Ti("cacheControl",null,!0)),t.push(new Ti("contentDisposition",null,!0)),t.push(new Ti("contentEncoding",null,!0)),t.push(new Ti("contentLanguage",null,!0)),t.push(new Ti("contentType",null,!0)),t.push(new Ti("metadata","customMetadata",!0)),$h=t,$h}function oB(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new er(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function aB(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return oB(i,t),i}function rD(t,e,n){const i=tD(e);return i===null?null:aB(t,i,n)}function lB(t,e,n,i){const r=tD(e);if(r===null||!AT(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const p=t.bucket,v=t.fullPath,T="/b/"+l(p)+"/o/"+l(v),b=CT(T,n,i),C=WP({alt:"media",token:f});return b+C})[0]}function uB(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class sD{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(!t)throw wT()}function cB(t,e){function n(i,r){const o=rD(t,r,e);return oD(o!==null),o}return n}function dB(t,e){function n(i,r){const o=rD(t,r,e);return oD(o!==null),lB(o,r,t.host,t._protocol)}return n}function aD(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=AF():r=wF():n.getStatus()===402?r=bF(t.bucket):n.getStatus()===403?r=xF(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function fB(t){const e=aD(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=SF(t.path)),o.serverResponse=r.serverResponse,o}return n}function hB(t,e,n){const i=e.fullServerUrl(),r=CT(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new sD(r,o,dB(t,n),l);return c.errorHandler=fB(e),c}function pB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function mB(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=pB(null,e)),i}function gB(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let U="";for(let H=0;H<2;H++)U=U+Math.random().toString().slice(2);return U}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const f=mB(e,i,r),p=uB(f,n),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,T=`\r
--`+d+"--",b=Vo.getBlob(v,i,T);if(b===null)throw DF();const C={name:f.fullPath},N=CT(o,t.host,t._protocol),D="POST",L=t.maxUploadRetryTime,k=new sD(N,D,cB(t,n),L);return k.urlParams=C,k.headers=l,k.body=b.uploadData(),k.errorHandler=aD(e),k}class yB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw zc("cannot .send() more than once");if(js(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class vB extends yB{initXhr(){this.xhr_.responseType="text"}}function lD(){return new vB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this._service=e,n instanceof er?this._location=n:this._location=er.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new tl(e,n)}get root(){const e=new er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nD(this._location.path)}get storage(){return this._service}get parent(){const e=nB(this._location.path);if(e===null)return null;const n=new er(this._location.bucket,e);return new tl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw VF(e)}}function uD(t,e,n){t._throwIfRoot("uploadBytes");const i=gB(t.storage,t._location,iD(),new Vo(e,!0),n);return t.storage.makeRequestWithTokens(i,lD).then(r=>({metadata:r,ref:t}))}function _B(t,e,n=Vr.RAW,i){t._throwIfRoot("uploadString");const r=QP(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),uD(t,r.data,o)}function TB(t){t._throwIfRoot("getDownloadURL");const e=hB(t.storage,t._location,iD());return t.storage.makeRequestWithTokens(e,lD).then(n=>{if(n===null)throw MF();return n})}function EB(t,e){const n=iB(t._location.path,e),i=new er(t._location.bucket,n);return new tl(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t){return/^[A-Za-z]+:\/\//.test(t)}function bB(t,e){return new tl(t,e)}function cD(t,e){if(t instanceof IT){const n=t;if(n._bucket==null)throw PF();const i=new tl(n,n._bucket);return e!=null?cD(i,e):i}else return e!==void 0?EB(t,e):t}function wB(t,e){if(e&&SB(e)){if(t instanceof IT)return bB(t,e);throw k0("To use ref(service, url), the first argument must be a Storage instance.")}else return cD(t,e)}function Fx(t,e){const n=e==null?void 0:e[YP];return n==null?null:er.makeFromBucketSpec(n,t)}function AB(t,e,n,i={}){t.host=`${e}:${n}`;const r=js(e);r&&(Pm(`https://${t.host}/b`),Dm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:R1(o,t.app.options.projectId))}class IT{constructor(e,n,i,r,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=KP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TF,this._maxUploadRetryTime=EF,this._requests=new Set,r!=null?this._bucket=er.makeFromBucketSpec(r,this._host):this._bucket=Fx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=er.makeFromBucketSpec(this._url,e):this._bucket=Fx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ux("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ux("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tl(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new LF(JP());{const l=KF(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Bx="@firebase/storage",zx="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="storage";function xB(t,e,n){return t=Ut(t),uD(t,e,n)}function CB(t,e,n,i){return t=Ut(t),_B(t,e,n,i)}function fD(t){return t=Ut(t),TB(t)}function hD(t,e){return t=Ut(t),wB(t,e)}function IB(t=Mm(),e){t=Ut(t);const i=Qd(t,dD).getImmediate({identifier:e}),r=A_("storage");return r&&RB(i,...r),i}function RB(t,e,n,i={}){AB(t,e,n,i)}function NB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new IT(n,i,r,e,il)}function PB(){$o(new Us(dD,NB,"PUBLIC").setMultipleInstances(!0)),Er(Bx,zx,""),Er(Bx,zx,"esm2017")}PB();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="type.googleapis.com/google.protobuf.Int64Value",MB="type.googleapis.com/google.protobuf.UInt64Value";function pD(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function nm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>nm(e));if(typeof t=="function"||typeof t=="object")return pD(t,e=>nm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function wu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case DB:case MB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>wu(e)):typeof t=="function"||typeof t=="object"?pD(t,e=>wu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Li extends Br{constructor(e,n,i){super(`${RT}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Li.prototype)}}function kB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function im(t,e){let n=kB(t),i=n,r;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!qx[l])return new Li("internal","internal");n=qx[l],i=l}const c=o.message;typeof c=="string"&&(i=c),r=o.details,r!==void 0&&(r=wu(r))}}catch{}return n==="ok"?null:new Li(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ei(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="us-central1",LB=/^data: (.*?)(?:\n|$)/;function OB(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Li("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class UB{constructor(e,n,i,r,o=V0,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new VB(e,n,i,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=V0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function FB(t,e,n){const i=js(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Pm(t.emulatorOrigin),Dm("Functions",!0))}function BB(t,e,n){const i=r=>qB(t,e,r,{});return i.stream=(r,o)=>HB(t,e,r,o),i}async function zB(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await r.json()}catch{}return{status:r.status,json:o}}async function mD(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function qB(t,e,n,i){const r=t._url(e);return GB(t,r,n,i)}async function GB(t,e,n,i){n=nm(n);const r={data:n},o=await mD(t,i),l=i.timeout||7e4,c=OB(l),d=await Promise.race([zB(e,r,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!d)throw new Li("cancelled","Firebase Functions instance was deleted.");const f=im(d.status,d.json);if(f)throw f;if(!d.json)throw new Li("internal","Response is not valid JSON object.");let p=d.json.data;if(typeof p>"u"&&(p=d.json.result),typeof p>"u")throw new Li("internal","Response is missing data field.");return{data:wu(p)}}function HB(t,e,n,i){const r=t._url(e);return jB(t,r,n,i||{})}async function jB(t,e,n,i){var r;n=nm(n);const o={data:n},l=await mD(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i==null?void 0:i.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const N=new Li("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const C=im(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let d,f;const p=new Promise((b,C)=>{d=b,f=C});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const b=new Li("cancelled","Request was cancelled.");f(b)});const v=c.body.getReader(),T=$B(v,d,f,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const b=T.getReader();return{async next(){const{value:C,done:N}=await b.read();return{value:C,done:N}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:p}}function $B(t,e,n,i){const r=(l,c)=>{const d=l.match(LB);if(!d)return;const f=d[1];try{const p=JSON.parse(f);if("result"in p){e(wu(p.result));return}if("message"in p){c.enqueue(wu(p.message));return}if("error"in p){const v=im(0,p);c.error(v),n(v);return}}catch(p){if(p instanceof Li){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return d();async function d(){if(i!=null&&i.aborted){const f=new Li("cancelled","Request was cancelled");return l.error(f),n(f),Promise.resolve()}try{const{value:f,done:p}=await t.read();if(p){c.trim()&&r(c.trim(),l),l.close();return}if(i!=null&&i.aborted){const T=new Li("cancelled","Request was cancelled");l.error(T),n(T),await t.cancel();return}c+=o.decode(f,{stream:!0});const v=c.split(`
`);c=v.pop()||"";for(const T of v)T.trim()&&r(T.trim(),l);return d()}catch(f){const p=f instanceof Li?f:im(0,null);l.error(p),n(p)}}},cancel(){return t.cancel()}})}const Gx="@firebase/functions",Hx="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="auth-internal",YB="app-check-internal",JB="messaging-internal";function WB(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),o=n.getProvider(KB),l=n.getProvider(JB),c=n.getProvider(YB);return new UB(r,o,l,c,i)};$o(new Us(RT,e,"PUBLIC").setMultipleInstances(!0)),Er(Gx,Hx,t),Er(Gx,Hx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(t=Mm(),e=V0){const i=Qd(Ut(t),RT).getImmediate({identifier:e}),r=A_("functions");return r&&XB(i,...r),i}function XB(t,e,n){FB(Ut(t),e,n)}function ZB(t,e,n){return BB(Ut(t),e)}WB();const e9={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Zm=D1(e9),La=s3(Zm),t9=new Ds,zr=nF(Zm),gD=IB(Zm),n9=QB(Zm,"us-central1");/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let i9,r9;function s9(){return{geminiUrl:i9,vertexUrl:r9}}function o9(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const l=s9();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $s{}function ve(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let f=0;f<d.length;f++){const p=d[f];y(p,e.slice(o+1),n[f])}else for(const f of d)y(f,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];y(d[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function a9(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let d=0;d<r.length;d++)if(r[d]==="*"){c=d;break}if(c!==-1&&o.length>c)for(let d=c;d<o.length;d++){const f=o[d];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}L0(t,r,o,0,l)}}function L0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])L0(d,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!r.has(f)),d={};for(const f of c)d[f]=l[f];for(const[f,p]of Object.entries(d)){const v=[];for(const T of n.slice(i))T==="*"?v.push(f):v.push(T);y(l,v,p)}for(const f of c)delete l[f]}}else{const l=t;o in l&&L0(l[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l9(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function u9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],d9(l)),e}function c9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],f9(l)),e}function d9(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>h9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function f9(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>p9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function h9(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],T9(n)),e}function p9(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],E9(n)),e}function m9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function g9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function y9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],v9(l)),e}function v9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function yD(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],_9(l)),e}function _9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function T9(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],NT(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function E9(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],NT(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jx;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jx||(jx={}));var $x;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})($x||($x={}));var Kx;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Kx||(Kx={}));var je;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(je||(je={}));var Yx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Yx||(Yx={}));var Jx;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jx||(Jx={}));var Wx;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Wx||(Wx={}));var Qx;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Qx||(Qx={}));var Xx;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Xx||(Xx={}));var Zx;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Zx||(Zx={}));var eC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(eC||(eC={}));var tC;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(tC||(tC={}));var nC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(nC||(nC={}));var iC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(iC||(iC={}));var rC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(rC||(rC={}));var sC;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sC||(sC={}));var oC;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(oC||(oC={}));var aC;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(aC||(aC={}));var lC;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(lC||(lC={}));var rm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(rm||(rm={}));var uC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uC||(uC={}));var cC;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cC||(cC={}));var dC;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dC||(dC={}));var O0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(O0||(O0={}));var fC;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(fC||(fC={}));var hC;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hC||(hC={}));var pC;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(pC||(pC={}));var mC;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(mC||(mC={}));var gC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gC||(gC={}));var yC;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(yC||(yC={}));var vC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(vC||(vC={}));var _C;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_C||(_C={}));var TC;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(TC||(TC={}));var EC;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(EC||(EC={}));var SC;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(SC||(SC={}));var bC;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bC||(bC={}));var wC;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wC||(wC={}));var AC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(AC||(AC={}));var xC;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(xC||(xC={}));var CC;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(CC||(CC={}));var IC;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(IC||(IC={}));var RC;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(RC||(RC={}));var NC;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(NC||(NC={}));var PC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(PC||(PC={}));var DC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(DC||(DC={}));var MC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(MC||(MC={}));var kC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(kC||(kC={}));var VC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(VC||(VC={}));var LC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LC||(LC={}));var OC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(OC||(OC={}));var UC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(UC||(UC={}));var FC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(FC||(FC={}));var BC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(BC||(BC={}));var zC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(zC||(zC={}));var tu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(tu||(tu={}));class U0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class qc{get text(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const v=[];for(const T of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[b,C]of Object.entries(T))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(C!==null||C!==void 0)&&v.push(b);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;p=!0,f+=T.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const v of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,b]of Object.entries(v))T!=="inlineData"&&(b!==null||b!==void 0)&&p.push(T);v.inlineData&&typeof v.inlineData.data=="string"&&(f+=atob(v.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,r,o,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,r,o,l,c,d,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class qC{}class GC{}class S9{}class b9{}class w9{}class A9{}class HC{}class jC{}class $C{}class x9{}class sm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new sm;let r;const o=e;return n?r=c9(o):r=u9(o),Object.assign(i,r),i}}class KC{}class YC{}class JC{}class C9{}class I9{}class R9{}class PT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new PT,o=y9(e);return Object.assign(i,o),i}}class N9{}class P9{}class D9{}class WC{}class M9{get text(){var e,n,i;let r="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(c))d!=="text"&&d!=="thought"&&f!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class k9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class DT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new DT,o=yD(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _t(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vD(t,e){const n=_t(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _D(t){return Array.isArray(t)?t.map(e=>om(e)):[om(t)]}function om(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function TD(t){const e=om(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ED(t){const e=om(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function SD(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>QC(e)):[QC(t)]}function F0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function XC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ZC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function oi(t){if(t==null)throw new Error("ContentUnion is required");return F0(t)?t:{role:"user",parts:SD(t)}}function MT(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=oi(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=oi(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>oi(n)):[oi(e)]}function Sr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(XC(t)||ZC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[oi(t)]}const e=[],n=[],i=F0(t[0]);for(const r of t){const o=F0(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(XC(r)||ZC(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:SD(n)}),e}function V9(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(je).includes(n[0].toUpperCase())?n[0].toUpperCase():je.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(je).includes(i.toUpperCase())?i.toUpperCase():je.TYPE_UNSPECIFIED})}}function hu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&V9(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(je).includes(c.toUpperCase())?c.toUpperCase():je.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=hu(c);else if(i.includes(l)){const d=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}d.push(hu(f))}e[l]=d}else if(r.includes(l)){const d={};for(const[f,p]of Object.entries(c))d[f]=hu(p);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function kT(t){return hu(t)}function VT(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function LT(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fu(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=hu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=hu(e.response));return t}function Bu(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function L9(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ks(t,e){if(typeof e!="string")throw new Error("name must be a string");return L9(t,e,"cachedContents")}function bD(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function aa(t){return NT(t)}function O9(t){return t!=null&&typeof t=="object"&&"name"in t}function U9(t){return t!=null&&typeof t=="object"&&"video"in t}function F9(t){return t!=null&&typeof t=="object"&&"uri"in t}function wD(t){var e;let n;if(O9(t)&&(n=t.name),!(F9(t)&&(n=t.uri,n===void 0))&&!(U9(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function AD(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function xD(t){for(const e of["models","tunedModels","publisherModels"])if(B9(t,e))return t[e];return[]}function B9(t,e){return t!==null&&typeof t=="object"&&e in t}function z9(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function q9(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=z9(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function CD(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function G9(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ID(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function zu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function RD(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H9(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>wz(l))),y(e,["inlinedResponses"],o)}const r=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function j9(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function $9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wp(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["metadata","state"]);r!=null&&y(e,["state"],RD(r));const o=m(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=m(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const d=m(t,["metadata","model"]);d!=null&&y(e,["model"],d);const f=m(t,["metadata","output"]);return f!=null&&y(e,["dest"],H9(ID(f))),e}function B0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["state"]);r!=null&&y(e,["state"],RD(r));const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(e,["startTime"],c);const d=m(t,["endTime"]);d!=null&&y(e,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(e,["updateTime"],f);const p=m(t,["model"]);p!=null&&y(e,["model"],p);const v=m(t,["inputConfig"]);v!=null&&y(e,["src"],K9(v));const T=m(t,["outputConfig"]);T!=null&&y(e,["dest"],j9(ID(T)));const b=m(t,["completionStats"]);return b!=null&&y(e,["completionStats"],b),e}function K9(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function Y9(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(n,["fileName"],i);const r=m(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>bz(t,l))),y(n,["requests","requests"],o)}return n}function J9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function W9(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Q9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function X9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function Z9(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],ez(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function ez(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function ND(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Pz(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function tz(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function nz(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],$9(G9(r))),n}function eI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],Y9(t,CD(t,r)));const o=m(e,["config"]);return o!=null&&tz(o,n),n}function iz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],_t(t,i));const r=m(e,["src"]);r!=null&&y(n,["inputConfig"],J9(CD(t,r)));const o=m(e,["config"]);return o!=null&&nz(o,n),n}function rz(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function sz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],fz(t,r));const o=m(e,["config"]);return o!=null&&rz(o,n),n}function oz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function az(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function lz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function uz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function cz(t,e){const n={},i=m(e,["contents"]);if(i!=null){let o=MT(t,i);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["requests[]","request","content"],o)}const r=m(e,["config"]);return r!=null&&(y(n,["_self"],dz(r,n)),a9(n,{"requests[].*":"requests[].request.*"})),n}function dz(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function fz(t,e){const n={},i=m(e,["fileName"]);i!=null&&y(n,["file_name"],i);const r=m(e,["inlinedRequests"]);return r!=null&&y(n,["requests"],cz(t,r)),n}function hz(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function pz(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mz(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gz(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],ND(oi(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const L=m(e,["responseSchema"]);L!=null&&y(i,["responseSchema"],kT(L));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=m(e,["safetySettings"]);if(n!==void 0&&U!=null){let q=U;Array.isArray(q)&&(q=q.map(z=>Dz(z))),y(n,["safetySettings"],q)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let q=Bu(H);Array.isArray(q)&&(q=q.map(z=>kz(Fu(z)))),y(n,["tools"],q)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],Mz(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=m(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],Ks(t,G));const I=m(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const R=m(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],VT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=m(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const F=m(e,["imageConfig"]);return F!=null&&y(i,["imageConfig"],Sz(F)),i}function yz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>Z9(f))),y(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function vz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function _z(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],zu(t,i)),n}function Tz(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Ez(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Sz(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function bz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["request","model"],_t(t,i));const r=m(e,["contents"]);if(r!=null){let c=Sr(r);Array.isArray(c)&&(c=c.map(d=>ND(d))),y(n,["request","contents"],c)}const o=m(e,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(e,["config"]);return l!=null&&y(n,["request","generationConfig"],gz(t,l,m(n,["request"],{}))),n}function wz(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],yz(n));const i=m(t,["error"]);return i!=null&&y(e,["error"],i),e}function Az(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function xz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function Cz(t){const e={},n=m(t,["config"]);return n!=null&&Az(n,e),e}function Iz(t){const e={},n=m(t,["config"]);return n!=null&&xz(n,e),e}function Rz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>wp(l))),y(e,["batchJobs"],o)}return e}function Nz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>B0(l))),y(e,["batchJobs"],o)}return e}function Pz(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],hz(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],pz(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],W9(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Dz(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function Mz(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],mz(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function kz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Tz(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Ez(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Gs||(Gs={}));class ol{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vz extends $s{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new ol(Gs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=eI(this.apiClient,e),i=n._url,r=ve("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,f=[];for(const p of d){const v=Object.assign({},p);if(v.systemInstruction){const T=v.systemInstruction;delete v.systemInstruction;const b=v.request;b.systemInstruction=T,v.request=b}f.push(v)}return c.requests=f,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=iz(this.apiClient,e);return c=ve("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>B0(p))}else{const f=eI(this.apiClient,e);return c=ve("{model}:batchGenerateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>wp(p))}}async createEmbeddingsInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=sz(this.apiClient,e);return o=ve("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>wp(d))}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=_z(this.apiClient,e);return c=ve("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>B0(p))}else{const f=vz(this.apiClient,e);return c=ve("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>wp(p))}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=X9(this.apiClient,e);l=ve("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=Q9(this.apiClient,e);l=ve("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Iz(e);return c=ve("batchPredictionJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Nz(p),T=new WC;return Object.assign(T,v),T})}else{const f=Cz(e);return c=ve("batches",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Rz(p),T=new WC;return Object.assign(T,v),T})}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=az(this.apiClient,e);return c=ve("batchPredictionJobs/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>uz(p))}else{const f=oz(this.apiClient,e);return c=ve("batches/{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>lz(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lz(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function tI(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>sq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Oz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=Sr(l);Array.isArray(p)&&(p=p.map(v=>tI(v))),y(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],tI(oi(c)));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(v=>aq(v))),y(e,["tools"],p)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&y(e,["toolConfig"],oq(f)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Uz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let v=Sr(l);Array.isArray(v)&&(v=v.map(T=>T)),y(e,["contents"],v)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],oi(c));const d=m(t,["tools"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(T=>lq(T))),y(e,["tools"],v)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&y(e,["toolConfig"],f);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),n}function Fz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],vD(t,i));const r=m(e,["config"]);return r!=null&&Oz(r,n),n}function Bz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],vD(t,i));const r=m(e,["config"]);return r!=null&&Uz(r,n),n}function zz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function qz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Gz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Hz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function jz(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function $z(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Kz(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Yz(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function Jz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Wz(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Ks(t,i)),n}function Qz(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Xz(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Zz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function eq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function tq(t){const e={},n=m(t,["config"]);return n!=null&&Zz(n,e),e}function nq(t){const e={},n=m(t,["config"]);return n!=null&&eq(n,e),e}function iq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function rq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function sq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],jz(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],$z(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Lz(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function oq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Kz(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function aq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Qz(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Xz(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function lq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>Yz(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function uq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function cq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function dq(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Ks(t,i));const r=m(e,["config"]);return r!=null&&uq(r,n),n}function fq(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Ks(t,i));const r=m(e,["config"]);return r!=null&&cq(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hq extends $s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ol(Gs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Bz(this.apiClient,e);return c=ve("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Fz(this.apiClient,e);return c=ve("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=Wz(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=Jz(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=qz(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Hz(p),T=new YC;return Object.assign(T,v),T})}else{const f=zz(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Gz(p),T=new YC;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=fq(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=dq(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=nq(e);return c=ve("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=rq(p),T=new JC;return Object.assign(T,v),T})}else{const f=tq(e);return c=ve("cachedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=iq(p),T=new JC;return Object.assign(T,v),T})}}}function nI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(t){return this instanceof Kt?(this.v=t,this):new Kt(t)}function pu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(b){return function(C){return Promise.resolve(C).then(b,v)}}function c(b,C){i[b]&&(r[b]=function(N){return new Promise(function(D,L){o.push([b,N,D,L])>1||d(b,N)})},C&&(r[b]=C(r[b])))}function d(b,C){try{f(i[b](C))}catch(N){T(o[0][3],N)}}function f(b){b.value instanceof Kt?Promise.resolve(b.value.v).then(p,v):T(o[0][2],b)}function p(b){d("next",b)}function v(b){d("throw",b)}function T(b,C){b(C),o.shift(),o.length&&d(o[0][0],o[0][1])}}function md(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof nI=="function"?nI(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),r(c,d,l.done,l.value)})}}function r(o,l,c,d){Promise.resolve(d).then(function(f){o({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pq(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:PD(n)}function PD(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function mq(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iI(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!PD(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class gq{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new yq(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class yq{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),mq(o)}async sendMessage(e){var n;await this.sendPromise;const i=oi(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await r,f=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=d.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let T=[];p!=null&&(T=(c=p.slice(v))!==null&&c!==void 0?c:[]);const b=f?[f]:[];this.recordHistory(i,b,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=oi(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?iI(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return pu(this,arguments,function*(){var l,c,d,f;const p=[];try{for(var v=!0,T=md(e),b;b=yield Kt(T.next()),l=b.done,!l;v=!0){f=b.value,v=!1;const C=f;if(pq(C)){const N=(r=(i=C.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;N!==void 0&&p.push(N)}yield yield Kt(C)}}catch(C){c={error:C}}finally{try{!v&&!l&&(d=T.return)&&(yield Kt(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...iI(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eg extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,eg.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vq(t){const e={},n=m(t,["file"]);return n!=null&&y(e,["file"],n),e}function _q(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Tq(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],wD(n)),e}function Eq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Sq(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],wD(n)),e}function bq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function wq(t){const e={},n=m(t,["config"]);return n!=null&&bq(n,e),e}function Aq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xq extends $s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ol(Gs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=wq(e);return o=ve("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Aq(d),p=new N9;return Object.assign(p,f),p})}}async createInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=vq(e);return o=ve("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=_q(d),p=new P9;return Object.assign(p,f),p})}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Sq(e);return o=ve("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Tq(e);return o=ve("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Eq(d),p=new D9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ap(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Cq(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Gq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Iq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Rq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Nq(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function Pq(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const C=m(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const D=m(t,["routingConfig"]);D!=null&&y(e,["routingConfig"],D);const L=m(t,["seed"]);L!=null&&y(e,["seed"],L);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],DD(k));const U=m(t,["stopSequences"]);U!=null&&y(e,["stopSequences"],U);const H=m(t,["temperature"]);H!=null&&y(e,["temperature"],H);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const G=m(t,["topK"]);G!=null&&y(e,["topK"],G);const I=m(t,["topP"]);if(I!=null&&y(e,["topP"],I),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Dq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Mq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function kq(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],LT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],Cq(oi(C)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let G=Bu(N);Array.isArray(G)&&(G=G.map(I=>jq(Fu(I)))),y(e,["setup","tools"],G)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],Hq(D));const L=m(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&y(e,["setup","inputAudioTranscription"],L);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const U=m(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&y(e,["setup","realtimeInputConfig"],U);const H=m(t,["contextWindowCompression"]);e!==void 0&&H!=null&&y(e,["setup","contextWindowCompression"],H);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Vq(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],Pq(i));const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],DD(LT(v)));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],oi(C));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let G=Bu(N);Array.isArray(G)&&(G=G.map(I=>$q(Fu(I)))),y(e,["setup","tools"],G)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],D);const L=m(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&y(e,["setup","inputAudioTranscription"],L);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const U=m(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&y(e,["setup","realtimeInputConfig"],U);const H=m(t,["contextWindowCompression"]);e!==void 0&&H!=null&&y(e,["setup","contextWindowCompression"],H);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Lq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],_t(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],kq(r,n)),n}function Oq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],_t(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Vq(r,n)),n}function Uq(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function Fq(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["weightedPrompts"],i)}return e}function Bq(t){const e={},n=m(t,["media"]);if(n!=null){let f=_D(n);Array.isArray(f)&&(f=f.map(p=>Ap(p))),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],Ap(ED(i)));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],Ap(TD(o)));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function zq(t){const e={},n=m(t,["media"]);if(n!=null){let f=_D(n);Array.isArray(f)&&(f=f.map(p=>p)),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],ED(i));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],TD(o));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=m(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function qq(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const r=m(t,["toolCall"]);r!=null&&y(e,["toolCall"],r);const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=m(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],Kq(l));const c=m(t,["goAway"]);c!=null&&y(e,["goAway"],c);const d=m(t,["sessionResumptionUpdate"]);return d!=null&&y(e,["sessionResumptionUpdate"],d),e}function Gq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],Iq(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],Rq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Ap(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Hq(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function jq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Dq(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],Mq(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function $q(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>Nq(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function Kq(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const r=m(t,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=m(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const d=m(t,["promptTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["promptTokensDetails"],b)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["cacheTokensDetails"],b)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["responseTokensDetails"],b)}const v=m(t,["toolUsePromptTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>C)),y(e,["toolUsePromptTokensDetails"],b)}const T=m(t,["trafficType"]);return T!=null&&y(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yq(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Jq(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],Wq(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=m(t,["index"]);d!=null&&y(e,["index"],d);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function Wq(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function Qq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["contents"]);if(r!=null){let o=Sr(r);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["contents"],o)}return n}function Xq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["tokensInfo"],r)}return e}function Zq(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&y(e,["statistics"],e8(i)),e}function e8(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function tg(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>uG(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function t8(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function n8(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function i8(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],oi(i));const r=m(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>OD(c))),y(e,["tools"],l)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],Y8(o)),n}function r8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["contents"]);if(r!=null){let l=Sr(r);Array.isArray(l)&&(l=l.map(c=>tg(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&n8(o),n}function s8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["contents"]);if(r!=null){let l=Sr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&i8(o,n),n}function o8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const r=m(t,["cachedContentTokenCount"]);return r!=null&&y(e,["cachedContentTokenCount"],r),e}function a8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function l8(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],_t(t,i)),n}function u8(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],_t(t,i)),n}function c8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function d8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function f8(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const C=m(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const D=m(t,["addWatermark"]);e!==void 0&&D!=null&&y(e,["parameters","addWatermark"],D);const L=m(t,["labels"]);e!==void 0&&L!=null&&y(e,["labels"],L);const k=m(t,["editMode"]);e!==void 0&&k!=null&&y(e,["parameters","editMode"],k);const U=m(t,["baseSteps"]);return e!==void 0&&U!=null&&y(e,["parameters","editConfig","baseSteps"],U),n}function h8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>mG(d))),y(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&f8(l,n),n}function p8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>ng(o))),y(e,["generatedImages"],r)}return e}function m8(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function g8(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["instances[]","title"],r);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function y8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["contents"]);if(r!=null){let c=MT(t,r);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["requests[]","content"],c)}const o=m(e,["config"]);o!=null&&m8(o,n);const l=m(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],_t(t,l)),n}function v8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["contents"]);if(r!=null){let l=MT(t,r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const o=m(e,["config"]);return o!=null&&g8(o,n),n}function _8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function T8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Zq(l))),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function E8(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function S8(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function b8(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function w8(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function A8(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function x8(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],tg(oi(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const L=m(e,["responseSchema"]);L!=null&&y(i,["responseSchema"],kT(L));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=m(e,["safetySettings"]);if(n!==void 0&&U!=null){let q=U;Array.isArray(q)&&(q=q.map(z=>gG(z))),y(n,["safetySettings"],q)}const H=m(e,["tools"]);if(n!==void 0&&H!=null){let q=Bu(H);Array.isArray(q)&&(q=q.map(z=>bG(Fu(z)))),y(n,["tools"],q)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],SG(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=m(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],Ks(t,G));const I=m(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const R=m(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],VT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=m(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const F=m(e,["imageConfig"]);return F!=null&&y(i,["imageConfig"],Z8(F)),i}function C8(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],oi(r));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const d=m(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const C=m(e,["frequencyPenalty"]);C!=null&&y(i,["frequencyPenalty"],C);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const L=m(e,["responseSchema"]);L!=null&&y(i,["responseSchema"],kT(L));const k=m(e,["responseJsonSchema"]);k!=null&&y(i,["responseJsonSchema"],k);const U=m(e,["routingConfig"]);U!=null&&y(i,["routingConfig"],U);const H=m(e,["modelSelectionConfig"]);H!=null&&y(i,["modelConfig"],H);const K=m(e,["safetySettings"]);if(n!==void 0&&K!=null){let ee=K;Array.isArray(ee)&&(ee=ee.map(se=>se)),y(n,["safetySettings"],ee)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let ee=Bu(G);Array.isArray(ee)&&(ee=ee.map(se=>OD(Fu(se)))),y(n,["tools"],ee)}const I=m(e,["toolConfig"]);n!==void 0&&I!=null&&y(n,["toolConfig"],I);const R=m(e,["labels"]);n!==void 0&&R!=null&&y(n,["labels"],R);const P=m(e,["cachedContent"]);n!==void 0&&P!=null&&y(n,["cachedContent"],Ks(t,P));const V=m(e,["responseModalities"]);V!=null&&y(i,["responseModalities"],V);const F=m(e,["mediaResolution"]);F!=null&&y(i,["mediaResolution"],F);const q=m(e,["speechConfig"]);q!=null&&y(i,["speechConfig"],LD(VT(q)));const z=m(e,["audioTimestamp"]);z!=null&&y(i,["audioTimestamp"],z);const xe=m(e,["thinkingConfig"]);xe!=null&&y(i,["thinkingConfig"],xe);const De=m(e,["imageConfig"]);return De!=null&&y(i,["imageConfig"],eG(De)),i}function rI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["contents"]);if(r!=null){let l=Sr(r);Array.isArray(l)&&(l=l.map(c=>tg(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],x8(t,o,n)),n}function sI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["contents"]);if(r!=null){let l=Sr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],C8(t,o,n)),n}function oI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>Jq(f))),y(e,["candidates"],d)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function aI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["candidates"],f)}const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const o=m(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=m(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function I8(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=m(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&y(e,["parameters","includeRaiReason"],f);const p=m(t,["language"]);e!==void 0&&p!=null&&y(e,["parameters","language"],p);const v=m(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const T=m(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=m(t,["imageSize"]);if(e!==void 0&&b!=null&&y(e,["parameters","sampleImageSize"],b),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function R8(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const C=m(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const D=m(t,["addWatermark"]);e!==void 0&&D!=null&&y(e,["parameters","addWatermark"],D);const L=m(t,["labels"]);e!==void 0&&L!=null&&y(e,["labels"],L);const k=m(t,["imageSize"]);e!==void 0&&k!=null&&y(e,["parameters","sampleImageSize"],k);const U=m(t,["enhancePrompt"]);return e!==void 0&&U!=null&&y(e,["parameters","enhancePrompt"],U),n}function N8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&I8(o,n),n}function P8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&R8(o,n),n}function D8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>H8(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],kD(r)),e}function M8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>ng(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],VD(r)),e}function k8(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=m(t,["durationSeconds"]);if(e!==void 0&&r!=null&&y(e,["parameters","durationSeconds"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=m(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=m(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const f=m(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&y(e,["parameters","enhancePrompt"],f),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&y(e,["instances[0]","lastFrame"],ig(p));const v=m(t,["referenceImages"]);if(e!==void 0&&v!=null){let T=v;Array.isArray(T)&&(T=T.map(b=>LG(b))),y(e,["instances[0]","referenceImages"],T)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function V8(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=m(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const f=m(t,["resolution"]);e!==void 0&&f!=null&&y(e,["parameters","resolution"],f);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["pubsubTopic"]);e!==void 0&&v!=null&&y(e,["parameters","pubsubTopic"],v);const T=m(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const b=m(t,["enhancePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","enhancePrompt"],b);const C=m(t,["generateAudio"]);e!==void 0&&C!=null&&y(e,["parameters","generateAudio"],C);const N=m(t,["lastFrame"]);e!==void 0&&N!=null&&y(e,["instances[0]","lastFrame"],qr(N));const D=m(t,["referenceImages"]);if(e!==void 0&&D!=null){let U=D;Array.isArray(U)&&(U=U.map(H=>OG(H))),y(e,["instances[0]","referenceImages"],U)}const L=m(t,["mask"]);e!==void 0&&L!=null&&y(e,["instances[0]","mask"],VG(L));const k=m(t,["compressionQuality"]);return e!==void 0&&k!=null&&y(e,["parameters","compressionQuality"],k),n}function L8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],B8(l)),e}function O8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],z8(l)),e}function U8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],ig(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],UD(l));const c=m(e,["source"]);c!=null&&q8(c,n);const d=m(e,["config"]);return d!=null&&k8(d,n),n}function F8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],qr(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],FD(l));const c=m(e,["source"]);c!=null&&G8(c,n);const d=m(e,["config"]);return d!=null&&V8(d,n),n}function B8(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>$8(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function z8(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>K8(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function q8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],ig(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],UD(o)),n}function G8(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],qr(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],FD(o)),n}function H8(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],tG(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);return r!=null&&y(e,["safetyAttributes"],kD(r)),e}function ng(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],MD(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);r!=null&&y(e,["safetyAttributes"],VD(r));const o=m(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function j8(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],MD(n));const i=m(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["labels"],r)}return e}function $8(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],MG(n)),e}function K8(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],kG(n)),e}function Y8(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=m(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const C=m(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const D=m(t,["routingConfig"]);D!=null&&y(e,["routingConfig"],D);const L=m(t,["seed"]);L!=null&&y(e,["seed"],L);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],LD(k));const U=m(t,["stopSequences"]);U!=null&&y(e,["stopSequences"],U);const H=m(t,["temperature"]);H!=null&&y(e,["temperature"],H);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const G=m(t,["topK"]);G!=null&&y(e,["topK"],G);const I=m(t,["topP"]);if(I!=null&&y(e,["topP"],I),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function J8(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],_t(t,i)),n}function W8(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],_t(t,i)),n}function Q8(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function X8(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function Z8(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function eG(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);i!=null&&y(e,["imageSize"],i);const r=m(t,["outputMimeType"]);r!=null&&y(e,["imageOutputOptions","mimeType"],r);const o=m(t,["outputCompressionQuality"]);return o!=null&&y(e,["imageOutputOptions","compressionQuality"],o),e}function tG(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],aa(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function MD(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function ig(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],aa(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function qr(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function nG(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],AD(t,c)),i}function iG(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],AD(t,c)),i}function rG(t,e){const n={},i=m(e,["config"]);return i!=null&&nG(t,i,n),n}function sG(t,e){const n={},i=m(e,["config"]);return i!=null&&iG(t,i,n),n}function oG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=xD(r);Array.isArray(o)&&(o=o.map(l=>z0(l))),y(e,["models"],o)}return e}function aG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=xD(r);Array.isArray(o)&&(o=o.map(l=>q0(l))),y(e,["models"],o)}return e}function lG(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const r=m(t,["maskDilation"]);return r!=null&&y(e,["dilation"],r),e}function z0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["version"]);o!=null&&y(e,["version"],o);const l=m(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],wG(l));const c=m(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const d=m(t,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const f=m(t,["supportedGenerationMethods"]);f!=null&&y(e,["supportedActions"],f);const p=m(t,["temperature"]);p!=null&&y(e,["temperature"],p);const v=m(t,["maxTemperature"]);v!=null&&y(e,["maxTemperature"],v);const T=m(t,["topP"]);T!=null&&y(e,["topP"],T);const b=m(t,["topK"]);b!=null&&y(e,["topK"],b);const C=m(t,["thinking"]);return C!=null&&y(e,["thinking"],C),e}function q0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["versionId"]);o!=null&&y(e,["version"],o);const l=m(t,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>E8(T))),y(e,["endpoints"],v)}const c=m(t,["labels"]);c!=null&&y(e,["labels"],c);const d=m(t,["_self"]);d!=null&&y(e,["tunedModelInfo"],AG(d));const f=m(t,["defaultCheckpointId"]);f!=null&&y(e,["defaultCheckpointId"],f);const p=m(t,["checkpoints"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>T)),y(e,["checkpoints"],v)}return e}function uG(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],S8(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],b8(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],Yq(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function cG(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],qr(n)),e}function dG(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["baseSteps"]);e!==void 0&&r!=null&&y(e,["parameters","baseSteps"],r);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=m(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const f=m(t,["addWatermark"]);e!==void 0&&f!=null&&y(e,["parameters","addWatermark"],f);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const v=m(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v);const T=m(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const b=m(t,["labels"]);return e!==void 0&&b!=null&&y(e,["labels"],b),n}function fG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["source"]);r!=null&&pG(r,n);const o=m(e,["config"]);return o!=null&&dG(o,n),n}function hG(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ng(r))),y(e,["generatedImages"],i)}return e}function pG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["personImage"]);e!==void 0&&r!=null&&y(e,["instances[0]","personImage","image"],qr(r));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>cG(c))),y(e,["instances[0]","productImages"],l)}return n}function mG(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],qr(n));const i=m(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const r=m(t,["referenceType"]);r!=null&&y(e,["referenceType"],r);const o=m(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],lG(o));const l=m(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],t8(l));const c=m(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const d=m(t,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function kD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function VD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function gG(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function yG(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],qr(n)),e}function vG(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const r=m(t,["maxPredictions"]);e!==void 0&&r!=null&&y(e,["parameters","maxPredictions"],r);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const d=m(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),n}function _G(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["source"]);r!=null&&EG(r,n);const o=m(e,["config"]);return o!=null&&vG(o,n),n}function TG(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>j8(r))),y(e,["generatedMasks"],i)}return e}function EG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],qr(r));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],yG(o)),n}function LD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function SG(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],w8(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function bG(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Q8(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],X8(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function OD(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>A8(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],d);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function wG(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function AG(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function xG(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function CG(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function IG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","name"],_t(t,i));const r=m(e,["config"]);return r!=null&&xG(r,n),n}function RG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["config"]);return r!=null&&CG(r,n),n}function NG(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&y(e,["parameters","safetySetting"],r);const o=m(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const l=m(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=m(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const d=m(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const f=m(t,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const p=m(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const b=m(t,["mode"]);return e!==void 0&&b!=null&&y(e,["parameters","mode"],b),n}function PG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],_t(t,i));const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],qr(r));const o=m(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=m(e,["config"]);return l!=null&&NG(l,n),n}function DG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>ng(o))),y(e,["generatedImages"],r)}return e}function MG(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],aa(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function kG(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function VG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],qr(n));const i=m(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function LG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],ig(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function OG(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],qr(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function UD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["encoding"],r),e}function FD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],aa(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UG="Content-Type",FG="X-Server-Timeout",BG="User-Agent",G0="x-goog-api-client",zG="1.30.0",qG=`google-genai-sdk/${zG}`,GG="v1beta1",HG="v1beta",lI=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class jG{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:GG,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:HG,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&$G(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await uI(r),new U0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await uI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return pu(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield Kt(r.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(d,{stream:!0});try{const v=JSON.parse(f);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),b=T.status,C=T.code,N=`got status: ${b}. ${JSON.stringify(v)}`;if(C>=400&&C<600)throw new eg({message:N,status:C})}}catch(v){if(v.name==="ApiError")throw v}l+=f;let p=l.match(lI);for(;p;){const v=p[1];try{const T=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Kt(new U0(T)),l=l.slice(p[0].length),p=l.match(lI)}catch(T){throw new Error(`exception parsing stream chunk ${v}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=qG+" "+this.clientOptions.userAgentExtra;return e[BG]=n,e[G0]=n,e[UG]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(FG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const d={file:r},f=this.getFileName(e),p=ve("upload/v1beta/files",d._url),v=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,f,d,n==null?void 0:n.httpOptions);return o.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),d=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),v={};i!=null&&i.customMetadata&&(v.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(v.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(f,c,d,p,v,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=f==null?void 0:f.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function uI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new eg({message:r,status:n}):new Error(r)}}function $G(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const f=l[d],p=c[d];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?c[d]=i(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),c[d]=f)}return c}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KG="mcp_used/unknown";let YG=!1;function BD(t){for(const e of t)if(JG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return YG}function zD(t){var e;const n=(e=t[G0])!==null&&e!==void 0?e:"";t[G0]=(n+` ${KG}`).trimStart()}function JG(t){return t!==null&&typeof t=="object"&&t instanceof OT}function WG(t,e=100){return pu(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield Kt(t.listTools({cursor:i}));for(const l of o.tools)yield yield Kt(l),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class OT{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new OT(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var c=!0,d=(n=void 0,md(WG(p))),f;f=await d.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const v=r;l.push(v);const T=v.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=p}}catch(v){n={error:v}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),q9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QG(t,e,n){const i=new k9;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class XG{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=tH(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const p=new Promise(U=>{f=U}),v=e.callbacks,T=function(){f({})},b=this.apiClient,C={onopen:T,onmessage:U=>{QG(b,v.onmessage,U)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(U){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(U){}},N=this.webSocketFactory.create(d,eH(l),C);N.connect(),await p;const k={setup:{model:_t(this.apiClient,e.model)}};return N.send(JSON.stringify(k)),new ZG(N,this.apiClient)}}class ZG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Fq(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Uq(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(tu.PLAY)}pause(){this.sendPlaybackControl(tu.PAUSE)}stop(){this.sendPlaybackControl(tu.STOP)}resetContext(){this.sendPlaybackControl(tu.RESET_CONTEXT)}close(){this.conn.close()}}function eH(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function tH(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nH="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function iH(t,e,n){const i=new M9;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const l=qq(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class rH{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new XG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&BD(e.config.tools)&&zD(v);const T=lH(v);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,p);else{const P=this.apiClient.getApiKey();let V="BidiGenerateContent",F="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",F="access_token"),p=`${d}/ws/google.ai.generativelanguage.${f}.GenerativeService.${V}?${F}=${P}`}let b=()=>{};const C=new Promise(P=>{b=P}),N=e.callbacks,D=function(){var P;(P=N==null?void 0:N.onopen)===null||P===void 0||P.call(N),b({})},L=this.apiClient,k={onopen:D,onmessage:P=>{iH(L,N.onmessage,P)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=N==null?void 0:N.onclose)!==null&&i!==void 0?i:function(P){}},U=this.webSocketFactory.create(p,aH(T),k);U.connect(),await C;let H=_t(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const P=this.apiClient.getProject(),V=this.apiClient.getLocation();H=`projects/${P}/locations/${V}/`+H}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[rm.AUDIO]}:e.config.responseModalities=[rm.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],I=[];for(const P of G)if(this.isCallableTool(P)){const V=P;I.push(await V.tool())}else I.push(P);I.length>0&&(e.config.tools=I);const R={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=Oq(this.apiClient,R):K=Lq(this.apiClient,R),delete K.config,U.send(JSON.stringify(K)),new oH(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const sH={turnComplete:!0};class oH{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Sr(n.turns),e.isVertexAI()||(i=i.map(r=>tg(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(nH)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},sH),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:zq(e)}:n={realtimeInput:Bq(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function aH(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function lH(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cI=10;function dI(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(mu(l)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function mu(t){return"callTool"in t&&typeof t.callTool=="function"}function uH(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>mu(r)))!==null&&i!==void 0?i:!1}function fI(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(mu(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function hI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cH extends $s{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!uH(n)||dI(n.config))return await this.generateContentInternal(d);const f=fI(n);if(f.length>0){const N=f.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,v;const T=Sr(d.contents),b=(o=(r=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:cI;let C=0;for(;C<b&&(p=await this.generateContentInternal(d),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,D=[];for(const L of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(mu(L)){const U=await L.callTool(p.functionCalls);D.push(...U)}C++,v={role:"user",parts:D},d.contents=Sr(d.contents),d.contents.push(N),d.contents.push(v),hI(d.config)&&(T.push(N),T.push(v))}return hI(d.config)&&(p.automaticFunctionCallingHistory=T),p},this.generateContentStream=async n=>{var i,r,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),dI(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const d=fI(n);if(d.length>0){const v=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((r=d==null?void 0:d.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new ol(Gs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async d=>mu(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&BD(e.config.tools)){const d=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},d);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),zD(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(mu(l)){const c=l,d=await c.tool();for(const f of(r=d.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,c)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:cI;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(f,p,v){var T,b;return pu(this,arguments,function*(){for(var C,N,D,L;c<o;){l&&(c++,l=!1);const K=yield Kt(f.processParamsMaybeAddMcpUsage(v)),G=yield Kt(f.generateContentStreamInternal(K)),I=[],R=[];try{for(var k=!0,U=(N=void 0,md(G)),H;H=yield Kt(U.next()),C=H.done,!C;k=!0){L=H.value,k=!1;const P=L;if(yield yield Kt(P),P.candidates&&(!((T=P.candidates[0])===null||T===void 0)&&T.content)){R.push(P.candidates[0].content);for(const V of(b=P.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(c<o&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(V.functionCall.name)){const F=yield Kt(p.get(V.functionCall.name).callTool([V.functionCall]));I.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(P){N={error:P}}finally{try{!k&&!C&&(D=U.return)&&(yield Kt(D.call(U)))}finally{if(N)throw N.error}}if(I.length>0){l=!0;const P=new qc;P.candidates=[{content:{role:"user",parts:I}}],yield yield Kt(P);const V=[];V.push(...R),V.push({role:"user",parts:I});const F=Sr(v.contents).concat(V);v.contents=F}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=sI(this.apiClient,e);return c=ve("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=aI(p),T=new qc;return Object.assign(T,v),T})}else{const f=rI(this.apiClient,e);return c=ve("{model}:generateContent",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=oI(p),T=new qc;return Object.assign(T,v),T})}}async generateContentStreamInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=sI(this.apiClient,e);return c=ve("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return pu(this,arguments,function*(){var T,b,C,N;try{for(var D=!0,L=md(v),k;k=yield Kt(L.next()),T=k.done,!T;D=!0){N=k.value,D=!1;const U=N,H=aI(yield Kt(U.json()));H.sdkHttpResponse={headers:U.headers};const K=new qc;Object.assign(K,H),yield yield Kt(K)}}catch(U){b={error:U}}finally{try{!D&&!T&&(C=L.return)&&(yield Kt(C.call(L)))}finally{if(b)throw b.error}}})})}else{const f=rI(this.apiClient,e);return c=ve("{model}:streamGenerateContent?alt=sse",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(v){return pu(this,arguments,function*(){var T,b,C,N;try{for(var D=!0,L=md(v),k;k=yield Kt(L.next()),T=k.done,!T;D=!0){N=k.value,D=!1;const U=N,H=oI(yield Kt(U.json()));H.sdkHttpResponse={headers:U.headers};const K=new qc;Object.assign(K,H),yield yield Kt(K)}}catch(U){b={error:U}}finally{try{!D&&!T&&(C=L.return)&&(yield Kt(C.call(L)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=v8(this.apiClient,e);return c=ve("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=T8(p),T=new qC;return Object.assign(T,v),T})}else{const f=y8(this.apiClient,e);return c=ve("{model}:batchEmbedContents",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=_8(p),T=new qC;return Object.assign(T,v),T})}}async generateImagesInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=P8(this.apiClient,e);return c=ve("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=M8(p),T=new GC;return Object.assign(T,v),T})}else{const f=N8(this.apiClient,e);return c=ve("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=D8(p),T=new GC;return Object.assign(T,v),T})}}async editImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=h8(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=p8(d),p=new S9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=PG(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=DG(d),p=new b9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=fG(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=hG(d),p=new w9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=_G(this.apiClient,e);return o=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=TG(d),p=new A9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=W8(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>q0(p))}else{const f=J8(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>z0(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=sG(this.apiClient,e);return c=ve("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=aG(p),T=new HC;return Object.assign(T,v),T})}else{const f=rG(this.apiClient,e);return c=ve("{models_url}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=oG(p),T=new HC;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=RG(this.apiClient,e);return c=ve("{model}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>q0(p))}else{const f=IG(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>z0(p))}}async delete(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=u8(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=d8(p),T=new jC;return Object.assign(T,v),T})}else{const f=l8(this.apiClient,e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=c8(p),T=new jC;return Object.assign(T,v),T})}}async countTokens(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=s8(this.apiClient,e);return c=ve("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=a8(p),T=new $C;return Object.assign(T,v),T})}else{const f=r8(this.apiClient,e);return c=ve("{model}:countTokens",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=o8(p),T=new $C;return Object.assign(T,v),T})}}async computeTokens(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Qq(this.apiClient,e);return o=ve("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>{const f=Xq(d),p=new x9;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=F8(this.apiClient,e);return c=ve("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const v=O8(p),T=new sm;return Object.assign(T,v),T})}else{const f=U8(this.apiClient,e);return c=ve("{model}:predictLongRunning",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const v=L8(p),T=new sm;return Object.assign(T,v),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dH extends $s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=g9(e);return c=ve("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const f=m9(e);return c=ve("{operationName}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=l9(e);return o=ve("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fH(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function hH(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>SH(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function pH(t,e,n){const i={},r=m(e,["expireTime"]);n!==void 0&&r!=null&&y(n,["expireTime"],r);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const l=m(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],EH(t,c));const d=m(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&y(n,["fieldMask"],d),i}function mH(t,e){const n={},i=m(e,["config"]);return i!=null&&y(n,["config"],pH(t,i,n)),n}function gH(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function yH(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vH(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function _H(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function TH(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=m(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],LT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=m(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],hH(oi(C)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let G=Bu(N);Array.isArray(G)&&(G=G.map(I=>wH(Fu(I)))),y(e,["setup","tools"],G)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],bH(D));const L=m(t,["inputAudioTranscription"]);e!==void 0&&L!=null&&y(e,["setup","inputAudioTranscription"],L);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const U=m(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&y(e,["setup","realtimeInputConfig"],U);const H=m(t,["contextWindowCompression"]);e!==void 0&&H!=null&&y(e,["setup","contextWindowCompression"],H);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function EH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],_t(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],TH(r,n)),n}function SH(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],gH(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],yH(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],fH(d));const f=m(t,["text"]);f!=null&&y(e,["text"],f);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function bH(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wH(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],vH(c));const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],_H(d));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AH(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function xH(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=AH(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(f=>l.includes(f)?`generationConfig.${f}`:f));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class CH extends $s{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=mH(this.apiClient,e);o=ve("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=xH(c,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IH(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function RH(t){const e={},n=m(t,["config"]);return n!=null&&IH(n,e),e}function NH(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function PH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&NH(i,e),e}function DH(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function MH(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const r=m(t,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),n}function kH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],LH(l)),e}function VH(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&y(e,["fileName"],i);const r=m(t,["config"]);return r!=null&&MH(r,e),e}function LH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function OH(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function UH(t){const e={},n=m(t,["config"]);return n!=null&&OH(n,e),e}function FH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function BH(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const l=m(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function zH(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&BH(i,e),e}function qH(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GH(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function HH(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&GH(i,e),e}function jH(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function $H(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function KH(t){const e={},n=m(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&$H(i,e),e}function YH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JH extends $s{constructor(e){super(),this.apiClient=e,this.list=async n=>new ol(Gs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=jH(e);return o=ve("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=HH(e);r=ve("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KH(e);return o=ve("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=YH(d),p=new C9;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WH extends $s{constructor(e,n=new JH(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new ol(Gs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=RH(e);return o=ve("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=DH(e);return o=ve("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=PH(e);r=ve("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=UH(e);return o=ve("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=FH(d),p=new I9;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=zH(e);return o=ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=qH(d),p=new R9;return Object.assign(p,f),p})}}async importFile(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=VH(e);return o=ve("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const f=kH(d),p=new PT;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QH(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function XH(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function ZH(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=m(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=m(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const d=m(t,["learningRate"]);if(e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","learningRate"],d),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function e7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec"],pI(b))}else if(r==="PREFERENCE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec"],pI(b))}const o=m(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=m(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=m(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(c==="PREFERENCE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(d==="PREFERENCE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(f==="PREFERENCE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let p=m(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(p==="PREFERENCE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["beta"]);return e!==void 0&&T!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function t7(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&f7(o);const l=m(t,["config"]);return l!=null&&ZH(l,n),n}function n7(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&h7(o,n,e);const l=m(t,["config"]);return l!=null&&e7(l,n,e),n}function i7(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function r7(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function s7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function o7(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function a7(t,e){const n={},i=m(t,["config"]);return i!=null&&s7(i,n),n}function l7(t,e){const n={},i=m(t,["config"]);return i!=null&&o7(i,n),n}function u7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>qD(c))),y(n,["tuningJobs"],l)}return n}function c7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>H0(c))),y(n,["tuningJobs"],l)}return n}function d7(t,e){const n={},i=m(t,["name"]);i!=null&&y(n,["model"],i);const r=m(t,["name"]);return r!=null&&y(n,["endpoint"],r),n}function f7(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(n,["examples","examples"],r)}return n}function h7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function qD(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],bD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const d=m(t,["tuningTask","completeTime"]);d!=null&&y(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=m(t,["description"]);p!=null&&y(n,["description"],p);const v=m(t,["baseModel"]);v!=null&&y(n,["baseModel"],v);const T=m(t,["_self"]);return T!=null&&y(n,["tunedModel"],d7(T)),n}function H0(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],bD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(n,["startTime"],c);const d=m(t,["endTime"]);d!=null&&y(n,["endTime"],d);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=m(t,["error"]);p!=null&&y(n,["error"],p);const v=m(t,["description"]);v!=null&&y(n,["description"],v);const T=m(t,["baseModel"]);T!=null&&y(n,["baseModel"],T);const b=m(t,["tunedModel"]);b!=null&&y(n,["tunedModel"],b);const C=m(t,["preTunedModel"]);C!=null&&y(n,["preTunedModel"],C);const N=m(t,["supervisedTuningSpec"]);N!=null&&y(n,["supervisedTuningSpec"],N);const D=m(t,["preferenceOptimizationSpec"]);D!=null&&y(n,["preferenceOptimizationSpec"],D);const L=m(t,["tuningDataStats"]);L!=null&&y(n,["tuningDataStats"],L);const k=m(t,["encryptionSpec"]);k!=null&&y(n,["encryptionSpec"],k);const U=m(t,["partnerModelTuningSpec"]);U!=null&&y(n,["partnerModelTuningSpec"],U);const H=m(t,["customBaseModel"]);H!=null&&y(n,["customBaseModel"],H);const K=m(t,["experiment"]);K!=null&&y(n,["experiment"],K);const G=m(t,["labels"]);G!=null&&y(n,["labels"],G);const I=m(t,["outputUri"]);I!=null&&y(n,["outputUri"],I);const R=m(t,["pipelineJob"]);R!=null&&y(n,["pipelineJob"],R);const P=m(t,["serviceAccount"]);P!=null&&y(n,["serviceAccount"],P);const V=m(t,["tunedModelDisplayName"]);V!=null&&y(n,["tunedModelDisplayName"],V);const F=m(t,["veoTuningSpec"]);return F!=null&&y(n,["veoTuningSpec"],F),n}function p7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(t,["done"]);l!=null&&y(n,["done"],l);const c=m(t,["error"]);return c!=null&&y(n,["error"],c),n}function pI(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const r=m(t,["vertexDatasetResource"]);return r!=null&&y(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m7 extends $s{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ol(Gs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:O0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=r7(e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>H0(p))}else{const f=i7(e);return c=ve("{name}",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>qD(p))}}async listInternal(e){var n,i,r,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const f=l7(e);return c=ve("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=c7(p),T=new KC;return Object.assign(T,v),T})}else{const f=a7(e);return c=ve("tunedModels",f._url),d=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=u7(p),T=new KC;return Object.assign(T,v),T})}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=XH(e);l=ve("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=QH(e);l=ve("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=n7(e,e);return o=ve("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>H0(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=t7(e);return o=ve("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:d.headers},p})),r.then(d=>p7(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const y7=1024*1024*8,v7=3,_7=1e3,T7=2,am="x-goog-upload-status";async function E7(t,e,n){var i;const r=await GD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[am])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function S7(t,e,n){var i;const r=await GD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[am])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=yD(o),c=new DT;return Object.assign(c,l),c}async function GD(t,e,n){var i,r;let o=0,l=0,c=new U0(new Response),d="upload";for(o=t.size;l<o;){const f=Math.min(y7,o-l),p=t.slice(l,l+f);l+f>=o&&(d+=", finalize");let v=0,T=_7;for(;v<v7&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[am]));)v++,await w7(T),T=T*T7;if(l+=f,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[am])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function b7(t){return{size:t.size,type:t.type}}function w7(t){return new Promise(e=>setTimeout(e,t))}class A7{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await E7(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await b7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x7{create(e,n,i){return new C7(e,n,i)}}class C7{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mI="x-goog-api-key";class I7{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(mI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(mI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R7="gl-node/";class N7{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=o9(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new I7(this.apiKey);this.apiClient=new jG({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:R7+"web",uploader:new A7,downloader:new g7}),this.models=new cH(this.apiClient),this.live=new rH(this.apiClient,r,new x7),this.batches=new Vz(this.apiClient),this.chats=new gq(this.models,this.apiClient),this.caches=new hq(this.apiClient),this.files=new xq(this.apiClient),this.operations=new dH(this.apiClient),this.authTokens=new CH(this.apiClient),this.tunings=new m7(this.apiClient),this.fileSearchStores=new WH(this.apiClient)}}const HD={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},cf=new N7({apiKey:HD.geminiApiKey});function rg(t){try{if(typeof t.text=="function")return t.text();if(t.candidates&&t.candidates.length>0){const e=t.candidates[0];if(e.content&&e.content.parts&&e.content.parts.length>0)return e.content.parts[0].text||"{}"}return"{}"}catch(e){return console.error("Erreur lors de l'extraction du texte Gemini:",e),"{}"}}async function P7(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets.`},n=t.map(r=>({inlineData:{data:r,mimeType:"image/jpeg"}})),i=await cf.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{items:{type:je.ARRAY,items:{type:je.OBJECT,properties:{analysis:{type:je.STRING},category:{type:je.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:je.STRING},material:{type:je.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const r=rg(i),o=JSON.parse(r),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items?(o.items.forEach(c=>{l.includes(c.category)||(c.category="Accessoires")}),o.items):[]}catch(r){throw console.error("Erreur parsing Gemini:",r),new Error("L'IA a renvoy une rponse malforme.")}}async function D7(t,e,n,i){const r=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!r.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category}, Matire: ${T.material})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),f=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",p=`Tu es un styliste expert reconnu pour ton got impeccable. Cre 3 tenues compltes et harmonieuses bases sur le contexte : "${n}".
    
Vtements disponibles :
${d}
${f}

**RGLES CRITIQUES** :

1. **BASE** : Utilise UNIQUEMENT les articles lists. Chaque tenue doit tre complte (Haut + Bas + Chaussures).

2. **ACCESSOIRES** : Chaque tenue DOIT tre accompagne d'une montre (si disponible).

3. **SUPERPOSITION (LAYERING)** :
   - **Pull col V**  OBLIGATOIREMENT avec une chemise en dessous
   - **Pull col camionneur/zipp**  OBLIGATOIREMENT avec un t-shirt ou chemise en dessous
   - **Veste/Blazer**  Peut aller sur t-shirt, chemise, ou pull fin

4. **LOGIQUE THERMIQUE (CRITIQUE)** :
   - Analyse la mto mentionne dans le contexte.
   
   | Temprature | Rgle |
   |-------------|-------|
   | **< 10C (FROID)** | Layering OBLIGATOIRE : T-shirt + Pull + Manteau. JAMAIS une chemise seule sous un manteau. |
   | **10-20C (DOUX)** | Pull, sweat ou veste lgre suffisent. |
   | **> 20C (CHAUD)** | Une seule couche lgre (t-shirt OU chemise). JAMAIS de pull ni veste. |
   | **> 30C (TRS CHAUD)** | Vtements trs lgers uniquement. INTERDITS : jeans pais, matires synthtiques. |

5. **INTERDICTIONS THERMIQUES ABSOLUES** :
   -  Doudoune/veste d'hiver si > 15C
   -  Short si < 12C
   -  Sandales si < 15C
   -  Pull en laine si > 22C

6. **MATIRES ADAPTES** :
   - **Chaud (> 25C)** : Privilgier coton lger, lin, matires respirantes
   - **Froid (< 10C)** : Privilgier laine, polaire, matires chaudes
   
7. **HARMONIE DES COULEURS & MOTIFS** :
   - **Rgle des 3 couleurs** : Maximum 3 couleurs diffrentes par tenue
   - **quilibre motifs** : Si le haut est  motifs  bas UNI. Jamais 2 motifs diffrents ensemble.
   - **Contraste** : viter les tons trop proches (bleu marine + noir) sauf choix dlibr

8. **VARIT** : Les 3 tenues doivent tre VISUELLEMENT diffrentes. vite de rpter le mme pantalon 3 fois.

**SORTIE** : Renvoie l'ID EXACT et la description pour chaque article slectionn.`,v=await cf.models.generateContent({model:"gemini-2.5-flash",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{tenues:{type:je.ARRAY,items:{type:je.OBJECT,properties:{titre:{type:je.STRING},description:{type:je.STRING},vetements:{type:je.ARRAY,items:{type:je.OBJECT,properties:{id:{type:je.STRING},description:{type:je.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{const T=rg(v);return JSON.parse(T).tenues}catch(T){throw console.error("Erreur parsing Gemini:",T),new Error("Rponse malforme.")}}async function jD(t,e){return t.map(i=>`${i.category}: ${i.analysis}`).join(`
`),await cf.models.generateContent({model:"gemini-2.5-flash",contents:"Analyse cette garde-robe et suggre des achats.",config:{responseMimeType:"application/json"}}),{summary:"Analyse gnre",strengths:[],gaps:[],suggestions:[]}}async function M7(t,e){const n=t.map(l=>`${l.category}: ${l.analysis}`).join(`
`),i=`Analyse cette garde-robe (${t.length} pices) et suggre 3-5 achats stratgiques. Garde-robe : ${n}`,r=await cf.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{summary:{type:je.STRING},strengths:{type:je.ARRAY,items:{type:je.STRING}},gaps:{type:je.ARRAY,items:{type:je.STRING}},suggestions:{type:je.ARRAY,items:{type:je.OBJECT,properties:{category:{type:je.STRING},description:{type:je.STRING},reason:{type:je.STRING},priority:{type:je.STRING,enum:["high","medium","low"]},estimatedPrice:{type:je.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}}),o=rg(r);return JSON.parse(o)}jD=M7;async function k7(t,e,n,i,r){const o=new Set((e||[]).flatMap(C=>C.itemIds)),c=t.filter(C=>!o.has(C.id)).map(C=>`- ${C.analysis} (ID: ${C.id}, Cat: ${C.category}, Couleur: ${C.color}, Matire: ${C.material})`).join(`
`),d=e.map(C=>`- ${C.name} (Ensemble, ID: ${C.id})`).join(`
`),f=[c,d].filter(Boolean).join(`
`),p=r?`
**CONTRAINTE POIDS** : Le poids total NE DOIT PAS dpasser ${r} kg. Estime le poids moyen (t-shirt ~150g, jean ~600g, pull ~400g, chaussures ~800g).`:"",v=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${i}

**PRINCIPE CAPSULE WARDROBE** : Slectionner peu de pices qui se combinent TOUTES entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :
   
   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** :
   -  Doudoune/veste ski/polaire paisse si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **HARMONIE CAPSULE (pour que tout se combine)** :
   - **Palette de couleurs** : Maximum 4-5 couleurs qui vont ensemble (ex: bleu marine, blanc, beige, une couleur d'accent)
   - **Motifs** : Maximum 2 pices  motifs dans toute la valise, le reste UNI
   - **Neutralit** : Au moins 50% de pices en couleurs neutres (noir, blanc, gris, beige, marine)

5. **QUANTITS RECOMMANDES pour ${n} jours** :
   - Hauts : ${Math.min(n+1,7)} pices max (on peut reporter un t-shirt)
   - Bas : ${Math.min(Math.ceil(n/2)+1,4)} pices max
   - Chaussures : 2-3 paires max
   - Accessoires : selon besoin

6. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

${p}

**VTEMENTS DISPONIBLES** :
${f}

**SORTIE** : 
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- La liste des articles avec leur ID exact`,T=await cf.models.generateContent({model:"gemini-2.5-flash",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:je.OBJECT,properties:{titre:{type:je.STRING},resume:{type:je.STRING},valise:{type:je.ARRAY,items:{type:je.OBJECT,properties:{id:{type:je.STRING},description:{type:je.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}}),b=rg(T);return JSON.parse(b)}const V7=ZB(n9,"generateVisualOutfit");async function L7(t,e){console.log(" Prparation du Virtual Try-On...");const n=t[0];if(!n||!n.imageSrc)throw new Error("Aucun vtement valide trouv pour l'essayage.");try{const r=(await V7({garmentUrl:n.imageSrc,category:n.category,description:n.analysis,humanImageUrl:e})).data;if(!r||!r.imageUrl)throw new Error("Pas d'image retourne par le serveur.");return console.log(" Image reue de Replicate !"),r.imageUrl}catch(i){throw console.error(" Erreur lors de l'appel Cloud Function :",i),i}}const O7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),U7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),lm=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),UT=({className:t="h-8 w-8 text-gold"})=>S.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Fd=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),sg=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),gI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),$D=()=>S.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),F7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),B7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),z7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),q7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),um=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),FT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),og=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),BT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),G7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),KD=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),S.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),zT=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Bd=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),H7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]}),YD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),JD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),j7=({theme:t,toggleTheme:e,children:n,isModalOpen:i=!1})=>S.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${i?"z-10":"z-50"}`,children:S.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[S.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsxs("div",{className:"flex items-center gap-4",children:[n,S.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?S.jsx(U7,{}):S.jsx(O7,{})})]})]})}),$7="DRESSMEUP2025",yI=({user:t})=>{var H,K,G;const[e,n]=B.useState(""),[i,r]=B.useState(""),[o,l]=B.useState(""),[c,d]=B.useState(!1),[f,p]=B.useState(!1),[v,T]=B.useState(null),[b,C]=B.useState(!1),N=B.useRef(null);B.useEffect(()=>{const I=R=>{N.current&&!N.current.contains(R.target)&&p(!1)};return f&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[f]);const D=async I=>{try{return(await vF(Uu(zr,"allowedEmails",I.toLowerCase()))).exists()}catch(R){return console.error("Erreur vrification email:",R),!1}},L=async()=>{C(!0),T(null);try{const R=(await pU(La,t9)).user.email;if(!R){await Rv(La),T("Impossible de rcuprer l'email du compte Google.");return}if(!await D(R)){await Rv(La),T("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(I){console.error("Erreur de connexion Google:",I),T(I.message||"Erreur de connexion")}finally{C(!1)}},k=async I=>{I.preventDefault(),C(!0),T(null);try{if(c){if(o!==$7){T("Code d'invitation invalide."),C(!1);return}if(!await D(e)){T("Votre email n'est pas dans la liste des beta testeurs."),C(!1);return}await H4(La,e,i)}else{if(!await D(e)){T("Votre email n'est pas autoris  accder  la beta."),C(!1);return}await j4(La,e,i)}}catch(R){console.error("Erreur d'authentification:",R),R.code==="auth/user-not-found"?T("Aucun compte trouv avec cet email."):R.code==="auth/wrong-password"?T("Mot de passe incorrect."):R.code==="auth/email-already-in-use"?T("Cet email est dj utilis."):R.code==="auth/weak-password"?T("Le mot de passe doit contenir au moins 6 caractres."):T(R.message||"Erreur d'authentification")}finally{C(!1)}},U=async()=>{try{await Rv(La)}catch(I){console.error("Erreur de dconnexion:",I)}};return t?S.jsxs("div",{className:"relative",ref:N,children:[S.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((H=t.displayName)==null?void 0:H[0])||((K=t.email)==null?void 0:K[0])||"U").toUpperCase()}),S.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((G=t.email)==null?void 0:G.split("@")[0])})]}),f&&S.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[S.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),S.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),S.jsxs("button",{onClick:U,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c?"Rejoindre la beta":"Bienvenue"}),S.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:S.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),v&&S.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:v}),S.jsx("button",{onClick:L,disabled:b,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),S.jsxs("div",{className:"relative my-6",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),S.jsxs("form",{onSubmit:k,className:"space-y-4",children:[S.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:I=>n(I.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),S.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:I=>r(I.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),c&&S.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:I=>l(I.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),S.jsx("button",{type:"submit",disabled:b,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c?"Rejoindre la beta":"Se connecter"})]}),S.jsx("button",{onClick:()=>{d(!c),T(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:c?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},qT=B.createContext({});function GT(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const ag=B.createContext(null),HT=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class K7 extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Y7({children:t,isPresent:e}){const n=B.useId(),i=B.useRef(null),r=B.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=B.useContext(HT);return B.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:f}=r.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${d}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),S.jsx(K7,{isPresent:e,childRef:i,sizeRef:r,children:B.cloneElement(t,{ref:i})})}const J7=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l})=>{const c=GT(W7),d=B.useId(),f=B.useCallback(v=>{c.set(v,!0);for(const T of c.values())if(!T)return;i&&i()},[c,i]),p=B.useMemo(()=>({id:d,initial:e,isPresent:n,custom:r,onExitComplete:f,register:v=>(c.set(v,!1),()=>c.delete(v))}),o?[Math.random(),f]:[n,f]);return B.useMemo(()=>{c.forEach((v,T)=>c.set(T,!1))},[n]),B.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=S.jsx(Y7,{isPresent:n,children:t})),S.jsx(ag.Provider,{value:p,children:t})};function W7(){return new Map}function WD(t=!0){const e=B.useContext(ag);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=B.useId();B.useEffect(()=>{t&&r(o)},[t]);const l=B.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const Kh=t=>t.key||"";function vI(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const jT=typeof window<"u",QD=jT?B.useLayoutEffect:B.useEffect,Q7=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1})=>{const[c,d]=WD(l),f=B.useMemo(()=>vI(t),[t]),p=l&&!c?[]:f.map(Kh),v=B.useRef(!0),T=B.useRef(f),b=GT(()=>new Map),[C,N]=B.useState(f),[D,L]=B.useState(f);QD(()=>{v.current=!1,T.current=f;for(let H=0;H<D.length;H++){const K=Kh(D[H]);p.includes(K)?b.delete(K):b.get(K)!==!0&&b.set(K,!1)}},[D,p.length,p.join("-")]);const k=[];if(f!==C){let H=[...f];for(let K=0;K<D.length;K++){const G=D[K],I=Kh(G);p.includes(I)||(H.splice(K,0,G),k.push(G))}o==="wait"&&k.length&&(H=k),L(vI(H)),N(f);return}const{forceRender:U}=B.useContext(qT);return S.jsx(S.Fragment,{children:D.map(H=>{const K=Kh(H),G=l&&!c?!1:f===D||p.includes(K),I=()=>{if(b.has(K))b.set(K,!0);else return;let R=!0;b.forEach(P=>{P||(R=!1)}),R&&(U==null||U(),L(T.current),l&&(d==null||d()),i&&i())};return S.jsx(J7,{isPresent:G,initial:!v.current||n?void 0:!1,custom:G?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:G?void 0:I,children:H},K)})})},tr=t=>t;let XD=tr;function $T(t){let e;return()=>(e===void 0&&(e=t()),e)}const Au=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Ls=t=>t*1e3,Os=t=>t/1e3,X7={useManualTiming:!1};function Z7(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){o.has(f)&&(d.schedule(f),t()),f(l)}const d={schedule:(f,p=!1,v=!1)=>{const b=v&&i?e:n;return p&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(l=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(c),e.clear(),i=!1,r&&(r=!1,d.process(f))}};return d}const Yh=["read","resolveKeyframes","update","preRender","render","postRender"],ej=40;function ZD(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Yh.reduce((L,k)=>(L[k]=Z7(o),L),{}),{read:c,resolveKeyframes:d,update:f,preRender:p,render:v,postRender:T}=l,b=()=>{const L=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(L-r.timestamp,ej),1),r.timestamp=L,r.isProcessing=!0,c.process(r),d.process(r),f.process(r),p.process(r),v.process(r),T.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(b))},C=()=>{n=!0,i=!0,r.isProcessing||t(b)};return{schedule:Yh.reduce((L,k)=>{const U=l[k];return L[k]=(H,K=!1,G=!1)=>(n||C(),U.schedule(H,K,G)),L},{}),cancel:L=>{for(let k=0;k<Yh.length;k++)l[Yh[k]].cancel(L)},state:r,steps:l}}const{schedule:Jt,cancel:ea,state:Yn,steps:Ov}=ZD(typeof requestAnimationFrame<"u"?requestAnimationFrame:tr,!0),eM=B.createContext({strict:!1}),_I={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xu={};for(const t in _I)xu[t]={isEnabled:e=>_I[t].some(n=>!!e[n])};function tj(t){for(const e in t)xu[e]={...xu[e],...t[e]}}const nj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nj.has(t)}let tM=t=>!cm(t);function ij(t){t&&(tM=e=>e.startsWith("on")?!cm(e):t(e))}try{ij(require("@emotion/is-prop-valid").default)}catch{}function rj(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(tM(r)||n===!0&&cm(r)||!e&&!cm(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function sj(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const lg=B.createContext({});function zd(t){return typeof t=="string"||Array.isArray(t)}function ug(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const KT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],YT=["initial",...KT];function cg(t){return ug(t.animate)||YT.some(e=>zd(t[e]))}function nM(t){return!!(cg(t)||t.variants)}function oj(t,e){if(cg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||zd(n)?n:void 0,animate:zd(i)?i:void 0}}return t.inherit!==!1?e:{}}function aj(t){const{initial:e,animate:n}=oj(t,B.useContext(lg));return B.useMemo(()=>({initial:e,animate:n}),[TI(e),TI(n)])}function TI(t){return Array.isArray(t)?t.join(" "):t}const lj=Symbol.for("motionComponentSymbol");function nu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function uj(t,e,n){return B.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):nu(n)&&(n.current=i))},[e])}const JT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cj="framerAppearId",iM="data-"+JT(cj),{schedule:WT}=ZD(queueMicrotask,!1),rM=B.createContext({});function dj(t,e,n,i,r){var o,l;const{visualElement:c}=B.useContext(lg),d=B.useContext(eM),f=B.useContext(ag),p=B.useContext(HT).reducedMotion,v=B.useRef(null);i=i||d.renderer,!v.current&&i&&(v.current=i(t,{visualState:e,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const T=v.current,b=B.useContext(rM);T&&!T.projection&&r&&(T.type==="html"||T.type==="svg")&&fj(v.current,n,r,b);const C=B.useRef(!1);B.useInsertionEffect(()=>{T&&C.current&&T.update(n,f)});const N=n[iM],D=B.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return QD(()=>{T&&(C.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),WT.render(T.render),D.current&&T.animationState&&T.animationState.animateChanges())}),B.useEffect(()=>{T&&(!D.current&&T.animationState&&T.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)===null||L===void 0||L.call(window,N)}),D.current=!1))}),T}function fj(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:sM(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&nu(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:f})}function sM(t){if(t)return t.options.allowProjection!==!1?t.projection:sM(t.parent)}function hj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,l;t&&tj(t);function c(f,p){let v;const T={...B.useContext(HT),...f,layoutId:pj(f)},{isStatic:b}=T,C=aj(f),N=i(f,b);if(!b&&jT){mj();const D=gj(T);v=D.MeasureLayout,C.visualElement=dj(r,N,T,e,D.ProjectionNode)}return S.jsxs(lg.Provider,{value:C,children:[v&&C.visualElement?S.jsx(v,{visualElement:C.visualElement,...T}):null,n(r,f,uj(N,C.visualElement,p),N,b,C.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(l=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&l!==void 0?l:""})`}`;const d=B.forwardRef(c);return d[lj]=r,d}function pj({layoutId:t}){const e=B.useContext(qT).id;return e&&t!==void 0?e+"-"+t:t}function mj(t,e){B.useContext(eM).strict}function gj(t){const{drag:e,layout:n}=xu;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const yj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function QT(t){return typeof t!="string"||t.includes("-")?!1:!!(yj.indexOf(t)>-1||/[A-Z]/u.test(t))}function EI(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function XT(t,e,n,i){if(typeof e=="function"){const[r,o]=EI(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=EI(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const j0=t=>Array.isArray(t),vj=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),_j=t=>j0(t)?t[t.length-1]||0:t,ai=t=>!!(t&&t.getVelocity);function xp(t){const e=ai(t)?t.get():t;return vj(e)?e.toValue():e}function Tj({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const l={latestValues:Ej(i,r,o,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const oM=t=>(e,n)=>{const i=B.useContext(lg),r=B.useContext(ag),o=()=>Tj(t,e,i,r);return n?o():GT(o)};function Ej(t,e,n,i){const r={},o=i(t,{});for(const T in o)r[T]=xp(o[T]);let{initial:l,animate:c}=t;const d=cg(t),f=nM(t);e&&f&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const v=p?c:l;if(v&&typeof v!="boolean"&&!ug(v)){const T=Array.isArray(v)?v:[v];for(let b=0;b<T.length;b++){const C=XT(t,T[b]);if(C){const{transitionEnd:N,transition:D,...L}=C;for(const k in L){let U=L[k];if(Array.isArray(U)){const H=p?U.length-1:0;U=U[H]}U!==null&&(r[k]=U)}for(const k in N)r[k]=N[k]}}}return r}const qu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],al=new Set(qu),aM=t=>e=>typeof e=="string"&&e.startsWith(t),lM=aM("--"),Sj=aM("var(--"),ZT=t=>Sj(t)?bj.test(t.split("/*")[0].trim()):!1,bj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hs=(t,e,n)=>n>e?e:n<t?t:n,Gu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qd={...Gu,transform:t=>Hs(0,1,t)},Jh={...Gu,default:1},df=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Po=df("deg"),as=df("%"),Ue=df("px"),wj=df("vh"),Aj=df("vw"),SI={...as,parse:t=>as.parse(t)/100,transform:t=>as.transform(t*100)},xj={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,backgroundPositionX:Ue,backgroundPositionY:Ue},Cj={rotate:Po,rotateX:Po,rotateY:Po,rotateZ:Po,scale:Jh,scaleX:Jh,scaleY:Jh,scaleZ:Jh,skew:Po,skewX:Po,skewY:Po,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:qd,originX:SI,originY:SI,originZ:Ue},bI={...Gu,transform:Math.round},eE={...xj,...Cj,zIndex:bI,size:Ue,fillOpacity:qd,strokeOpacity:qd,numOctaves:bI},Ij={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Rj=qu.length;function Nj(t,e,n){let i="",r=!0;for(let o=0;o<Rj;o++){const l=qu[o],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const f=uM(c,eE[l]);if(!d){r=!1;const p=Ij[l]||l;i+=`${p}(${f}) `}n&&(e[l]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function tE(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const d in e){const f=e[d];if(al.has(d)){l=!0;continue}else if(lM(d)){r[d]=f;continue}else{const p=uM(f,eE[d]);d.startsWith("origin")?(c=!0,o[d]=p):i[d]=p}}if(e.transform||(l||n?i.transform=Nj(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${d} ${f} ${p}`}}const Pj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Dj={offset:"strokeDashoffset",array:"strokeDasharray"};function Mj(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?Pj:Dj;t[o.offset]=Ue.transform(-i);const l=Ue.transform(e),c=Ue.transform(n);t[o.array]=`${l} ${c}`}function wI(t,e,n){return typeof t=="string"?t:Ue.transform(e+n*t)}function kj(t,e,n){const i=wI(e,t.x,t.width),r=wI(n,t.y,t.height);return`${i} ${r}`}function nE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...f},p,v){if(tE(t,f,v),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:b,dimensions:C}=t;T.transform&&(C&&(b.transform=T.transform),delete T.transform),C&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=kj(C,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),l!==void 0&&Mj(T,l,c,d,!1)}const iE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),cM=()=>({...iE(),attrs:{}}),rE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dM(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const fM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hM(t,e,n,i){dM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(fM.has(r)?r:JT(r),e.attrs[r])}const dm={};function Vj(t){Object.assign(dm,t)}function pM(t,{layout:e,layoutId:n}){return al.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!dm[t]||t==="opacity")}function sE(t,e,n){var i;const{style:r}=t,o={};for(const l in r)(ai(r[l])||e.style&&ai(e.style[l])||pM(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[l]=r[l]);return o}function mM(t,e,n){const i=sE(t,e,n);for(const r in t)if(ai(t[r])||ai(e[r])){const o=qu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function Lj(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const AI=["x","y","width","height","cx","cy","r"],Oj={useVisualState:oM({scrapeMotionValuesFromProps:mM,createRenderState:cM,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const c in r)if(al.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<AI.length;c++){const d=AI[c];t[d]!==e[d]&&(l=!0)}l&&Jt.read(()=>{Lj(n,i),Jt.render(()=>{nE(i,r,rE(n.tagName),t.transformTemplate),hM(n,i)})})}})},Uj={useVisualState:oM({scrapeMotionValuesFromProps:sE,createRenderState:iE})};function gM(t,e,n){for(const i in e)!ai(e[i])&&!pM(i,n)&&(t[i]=e[i])}function Fj({transformTemplate:t},e){return B.useMemo(()=>{const n=iE();return tE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Bj(t,e){const n=t.style||{},i={};return gM(i,n,t),Object.assign(i,Fj(t,e)),i}function zj(t,e){const n={},i=Bj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function qj(t,e,n,i){const r=B.useMemo(()=>{const o=cM();return nE(o,e,rE(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};gM(o,t.style,t),r.style={...o,...r.style}}return r}function Gj(t=!1){return(n,i,r,{latestValues:o},l)=>{const d=(QT(n)?qj:zj)(i,o,l,n),f=rj(i,typeof n=="string",t),p=n!==B.Fragment?{...f,...d,ref:r}:{},{children:v}=i,T=B.useMemo(()=>ai(v)?v.get():v,[v]);return B.createElement(n,{...p,children:T})}}function Hj(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...QT(i)?Oj:Uj,preloadedFeatures:t,useRender:Gj(r),createVisualElement:e,Component:i};return hj(l)}}function yM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function dg(t,e,n){const i=t.getProps();return XT(i,e,n!==void 0?n:i.custom,t)}const jj=$T(()=>window.ScrollTimeline!==void 0);class $j{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(jj()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Kj extends $j{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function oE(t,e){return t?t[e]||t.default||t:void 0}const $0=2e4;function vM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<$0;)e+=n,i=t.next(e);return e>=$0?1/0:e}function aE(t){return typeof t=="function"}function xI(t,e){t.timeline=e,t.onfinish=null}const lE=t=>Array.isArray(t)&&typeof t[0]=="number",Yj={linearEasing:void 0};function Jj(t,e){const n=$T(t);return()=>{var i;return(i=Yj[e])!==null&&i!==void 0?i:n()}}const fm=Jj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_M=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(Au(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function TM(t){return!!(typeof t=="function"&&fm()||!t||typeof t=="string"&&(t in K0||fm())||lE(t)||Array.isArray(t)&&t.every(TM))}const td=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,K0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:td([0,.65,.55,1]),circOut:td([.55,0,1,.45]),backIn:td([.31,.01,.66,-.59]),backOut:td([.33,1.53,.69,.99])};function EM(t,e){if(t)return typeof t=="function"&&fm()?_M(t,e):lE(t)?td(t):Array.isArray(t)?t.map(n=>EM(n,e)||K0.easeOut):K0[t]}const Pr={x:!1,y:!1};function SM(){return Pr.x||Pr.y}function Wj(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function bM(t,e){const n=Wj(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function CI(t){return e=>{e.pointerType==="touch"||SM()||t(e)}}function Qj(t,e,n={}){const[i,r,o]=bM(t,n),l=CI(c=>{const{target:d}=c,f=e(c);if(typeof f!="function"||!d)return;const p=CI(v=>{f(v),d.removeEventListener("pointerleave",p)});d.addEventListener("pointerleave",p,r)});return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const wM=(t,e)=>e?t===e?!0:wM(t,e.parentElement):!1,uE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Xj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Zj(t){return Xj.has(t.tagName)||t.tabIndex!==-1}const nd=new WeakSet;function II(t){return e=>{e.key==="Enter"&&t(e)}}function Uv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const e$=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=II(()=>{if(nd.has(n))return;Uv(n,"down");const r=II(()=>{Uv(n,"up")}),o=()=>Uv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function RI(t){return uE(t)&&!SM()}function t$(t,e,n={}){const[i,r,o]=bM(t,n),l=c=>{const d=c.currentTarget;if(!RI(c)||nd.has(d))return;nd.add(d);const f=e(c),p=(b,C)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",T),!(!RI(b)||!nd.has(d))&&(nd.delete(d),typeof f=="function"&&f(b,{success:C}))},v=b=>{p(b,n.useGlobalTarget||wM(d,b.target))},T=b=>{p(b,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",T,r)};return i.forEach(c=>{!Zj(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),c.addEventListener("focus",f=>e$(f,r),r)}),o}function n$(t){return t==="x"||t==="y"?Pr[t]?null:(Pr[t]=!0,()=>{Pr[t]=!1}):Pr.x||Pr.y?null:(Pr.x=Pr.y=!0,()=>{Pr.x=Pr.y=!1})}const AM=new Set(["width","height","top","left","right","bottom",...qu]);let Cp;function i$(){Cp=void 0}const ls={now:()=>(Cp===void 0&&ls.set(Yn.isProcessing||X7.useManualTiming?Yn.timestamp:performance.now()),Cp),set:t=>{Cp=t,queueMicrotask(i$)}};function cE(t,e){t.indexOf(e)===-1&&t.push(e)}function dE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class fE{constructor(){this.subscriptions=[]}add(e){return cE(this.subscriptions,e),()=>dE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function xM(t,e){return e?t*(1e3/e):0}const NI=30,r$=t=>!isNaN(parseFloat(t));class s${constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=ls.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ls.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=r$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new fE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ls.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>NI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,NI);return xM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gd(t,e){return new s$(t,e)}function o$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Gd(n))}function a$(t,e){const n=dg(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=_j(o[l]);o$(t,l,c)}}function l$(t){return!!(ai(t)&&t.add)}function Y0(t,e){const n=t.getValue("willChange");if(l$(n))return n.add(e)}function CM(t){return t.props[iM]}const IM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,u$=1e-7,c$=12;function d$(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=IM(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>u$&&++c<c$);return l}function ff(t,e,n,i){if(t===e&&n===i)return tr;const r=o=>d$(o,0,1,t,n);return o=>o===0||o===1?o:IM(r(o),e,i)}const RM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,NM=t=>e=>1-t(1-e),PM=ff(.33,1.53,.69,.99),hE=NM(PM),DM=RM(hE),MM=t=>(t*=2)<1?.5*hE(t):.5*(2-Math.pow(2,-10*(t-1))),pE=t=>1-Math.sin(Math.acos(t)),kM=NM(pE),VM=RM(pE),LM=t=>/^0[^.\s]+$/u.test(t);function f$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LM(t):!0}const gd=t=>Math.round(t*1e5)/1e5,mE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function h$(t){return t==null}const p$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gE=(t,e)=>n=>!!(typeof n=="string"&&p$.test(n)&&n.startsWith(t)||e&&!h$(n)&&Object.prototype.hasOwnProperty.call(n,e)),OM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(mE);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},m$=t=>Hs(0,255,t),Fv={...Gu,transform:t=>Math.round(m$(t))},qa={test:gE("rgb","red"),parse:OM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Fv.transform(t)+", "+Fv.transform(e)+", "+Fv.transform(n)+", "+gd(qd.transform(i))+")"};function g$(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const J0={test:gE("#"),parse:g$,transform:qa.transform},iu={test:gE("hsl","hue"),parse:OM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+as.transform(gd(e))+", "+as.transform(gd(n))+", "+gd(qd.transform(i))+")"},ni={test:t=>qa.test(t)||J0.test(t)||iu.test(t),parse:t=>qa.test(t)?qa.parse(t):iu.test(t)?iu.parse(t):J0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?qa.transform(t):iu.transform(t)},y$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function v$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(mE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(y$))===null||n===void 0?void 0:n.length)||0)>0}const UM="number",FM="color",_$="var",T$="var(",PI="${}",E$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(E$,d=>(ni.test(d)?(i.color.push(o),r.push(FM),n.push(ni.parse(d))):d.startsWith(T$)?(i.var.push(o),r.push(_$),n.push(d)):(i.number.push(o),r.push(UM),n.push(parseFloat(d))),++o,PI)).split(PI);return{values:n,split:c,indexes:i,types:r}}function BM(t){return Hd(t).values}function zM(t){const{split:e,types:n}=Hd(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===UM?o+=gd(r[l]):c===FM?o+=ni.transform(r[l]):o+=r[l]}return o}}const S$=t=>typeof t=="number"?0:t;function b$(t){const e=BM(t);return zM(t)(e.map(S$))}const ta={test:v$,parse:BM,createTransformer:zM,getAnimatableNone:b$},w$=new Set(["brightness","contrast","saturate","opacity"]);function A$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(mE)||[];if(!i)return t;const r=n.replace(i,"");let o=w$.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const x$=/\b([a-z-]*)\(.*?\)/gu,W0={...ta,getAnimatableNone:t=>{const e=t.match(x$);return e?e.map(A$).join(" "):t}},C$={...eE,color:ni,backgroundColor:ni,outlineColor:ni,fill:ni,stroke:ni,borderColor:ni,borderTopColor:ni,borderRightColor:ni,borderBottomColor:ni,borderLeftColor:ni,filter:W0,WebkitFilter:W0},yE=t=>C$[t];function qM(t,e){let n=yE(t);return n!==W0&&(n=ta),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const I$=new Set(["auto","none","0"]);function R$(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!I$.has(o)&&Hd(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=qM(n,r)}const DI=t=>t===Gu||t===Ue,MI=(t,e)=>parseFloat(t.split(", ")[e]),kI=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return MI(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?MI(o[1],t):0}},N$=new Set(["x","y","z"]),P$=qu.filter(t=>!N$.has(t));function D$(t){const e=[];return P$.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Cu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:kI(4,13),y:kI(5,14)};Cu.translateX=Cu.x;Cu.translateY=Cu.y;const ja=new Set;let Q0=!1,X0=!1;function GM(){if(X0){const t=Array.from(ja).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=D$(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{var c;(c=i.getValue(o))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}X0=!1,Q0=!1,ja.forEach(t=>t.complete()),ja.clear()}function HM(){ja.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(X0=!0)})}function M$(){HM(),GM()}class vE{constructor(e,n,i,r,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ja.add(this),Q0||(Q0=!0,Jt.read(HM),Jt.resolveKeyframes(GM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=r==null?void 0:r.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const d=i.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),r&&l===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ja.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ja.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const jM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),k$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function V$(t){const e=k$.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function $M(t,e,n=1){const[i,r]=V$(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return jM(l)?parseFloat(l):l}return ZT(r)?$M(r,e,n+1):r}const KM=t=>e=>e.test(t),L$={test:t=>t==="auto",parse:t=>t},YM=[Gu,Ue,as,Po,Aj,wj,L$],VI=t=>YM.find(KM(t));class JM extends vE{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),ZT(f))){const p=$M(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!AM.has(i)||e.length!==2)return;const[r,o]=e,l=VI(r),c=VI(o);if(l!==c)if(DI(l)&&DI(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)f$(e[r])&&i.push(r);i.length&&R$(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=Cu[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,f])=>{n.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const LI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ta.test(t)||t==="0")&&!t.startsWith("url("));function O$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function U$(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=LI(r,e),c=LI(o,e);return!l||!c?!1:O$(t)||(n==="spring"||aE(n))&&i}const F$=t=>t!==null;function fg(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(F$),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const B$=40;class WM{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ls.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>B$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&M$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ls.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:l,onComplete:c,onUpdate:d,isGenerator:f}=this.options;if(!f&&!U$(e,i,r,o))if(l)this.options.duration=0;else{d&&d(fg(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Zt=(t,e,n)=>t+(e-t)*n;function Bv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function z$({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;r=Bv(d,c,t+1/3),o=Bv(d,c,t),l=Bv(d,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function hm(t,e){return n=>n>0?e:t}const zv=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},q$=[J0,qa,iu],G$=t=>q$.find(e=>e.test(t));function OI(t){const e=G$(t);if(!e)return!1;let n=e.parse(t);return e===iu&&(n=z$(n)),n}const UI=(t,e)=>{const n=OI(t),i=OI(e);if(!n||!i)return hm(t,e);const r={...n};return o=>(r.red=zv(n.red,i.red,o),r.green=zv(n.green,i.green,o),r.blue=zv(n.blue,i.blue,o),r.alpha=Zt(n.alpha,i.alpha,o),qa.transform(r))},H$=(t,e)=>n=>e(t(n)),hf=(...t)=>t.reduce(H$),Z0=new Set(["none","hidden"]);function j$(t,e){return Z0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function $$(t,e){return n=>Zt(t,e,n)}function _E(t){return typeof t=="number"?$$:typeof t=="string"?ZT(t)?hm:ni.test(t)?UI:J$:Array.isArray(t)?QM:typeof t=="object"?ni.test(t)?UI:K$:hm}function QM(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>_E(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function K$(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=_E(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function Y$(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][r[l]],d=(n=t.values[c])!==null&&n!==void 0?n:0;i[o]=d,r[l]++}return i}const J$=(t,e)=>{const n=ta.createTransformer(e),i=Hd(t),r=Hd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Z0.has(t)&&!r.values.length||Z0.has(e)&&!i.values.length?j$(t,e):hf(QM(Y$(i,r),r.values),n):hm(t,e)};function XM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Zt(t,e,n):_E(t)(t,e)}const W$=5;function ZM(t,e,n){const i=Math.max(e-W$,0);return xM(n-t(i),e-i)}const an={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qv=.001;function Q$({duration:t=an.duration,bounce:e=an.bounce,velocity:n=an.velocity,mass:i=an.mass}){let r,o,l=1-e;l=Hs(an.minDamping,an.maxDamping,l),t=Hs(an.minDuration,an.maxDuration,Os(t)),l<1?(r=f=>{const p=f*l,v=p*t,T=p-n,b=e_(f,l),C=Math.exp(-v);return qv-T/b*C},o=f=>{const v=f*l*t,T=v*n+n,b=Math.pow(l,2)*Math.pow(f,2)*t,C=Math.exp(-v),N=e_(Math.pow(f,2),l);return(-r(f)+qv>0?-1:1)*((T-b)*C)/N}):(r=f=>{const p=Math.exp(-f*t),v=(f-n)*t+1;return-qv+p*v},o=f=>{const p=Math.exp(-f*t),v=(n-f)*(t*t);return p*v});const c=5/t,d=Z$(r,o,c);if(t=Ls(t),isNaN(d))return{stiffness:an.stiffness,damping:an.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:l*2*Math.sqrt(i*f),duration:t}}}const X$=12;function Z$(t,e,n){let i=n;for(let r=1;r<X$;r++)i=i-t(i)/e(i);return i}function e_(t,e){return t*Math.sqrt(1-e*e)}const eK=["duration","bounce"],tK=["stiffness","damping","mass"];function FI(t,e){return e.some(n=>t[n]!==void 0)}function nK(t){let e={velocity:an.velocity,stiffness:an.stiffness,damping:an.damping,mass:an.mass,isResolvedFromDuration:!1,...t};if(!FI(t,tK)&&FI(t,eK))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Hs(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:an.mass,stiffness:r,damping:o}}else{const n=Q$(t);e={...e,...n,mass:an.mass},e.isResolvedFromDuration=!0}return e}function e2(t=an.visualDuration,e=an.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:v,velocity:T,isResolvedFromDuration:b}=nK({...n,velocity:-Os(n.velocity||0)}),C=T||0,N=f/(2*Math.sqrt(d*p)),D=l-o,L=Os(Math.sqrt(d/p)),k=Math.abs(D)<5;i||(i=k?an.restSpeed.granular:an.restSpeed.default),r||(r=k?an.restDelta.granular:an.restDelta.default);let U;if(N<1){const K=e_(L,N);U=G=>{const I=Math.exp(-N*L*G);return l-I*((C+N*L*D)/K*Math.sin(K*G)+D*Math.cos(K*G))}}else if(N===1)U=K=>l-Math.exp(-L*K)*(D+(C+L*D)*K);else{const K=L*Math.sqrt(N*N-1);U=G=>{const I=Math.exp(-N*L*G),R=Math.min(K*G,300);return l-I*((C+N*L*D)*Math.sinh(R)+K*D*Math.cosh(R))/K}}const H={calculatedDuration:b&&v||null,next:K=>{const G=U(K);if(b)c.done=K>=v;else{let I=0;N<1&&(I=K===0?Ls(C):ZM(U,K,G));const R=Math.abs(I)<=i,P=Math.abs(l-G)<=r;c.done=R&&P}return c.value=c.done?l:G,c},toString:()=>{const K=Math.min(vM(H),$0),G=_M(I=>H.next(K*I).value,K,30);return K+"ms "+G}};return H}function BI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:f=.5,restSpeed:p}){const v=t[0],T={done:!1,value:v},b=R=>c!==void 0&&R<c||d!==void 0&&R>d,C=R=>c===void 0?d:d===void 0||Math.abs(c-R)<Math.abs(d-R)?c:d;let N=n*e;const D=v+N,L=l===void 0?D:l(D);L!==D&&(N=L-v);const k=R=>-N*Math.exp(-R/i),U=R=>L+k(R),H=R=>{const P=k(R),V=U(R);T.done=Math.abs(P)<=f,T.value=T.done?L:V};let K,G;const I=R=>{b(T.value)&&(K=R,G=e2({keyframes:[T.value,C(T.value)],velocity:ZM(U,R,T.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return I(0),{calculatedDuration:null,next:R=>{let P=!1;return!G&&K===void 0&&(P=!0,H(R),I(R)),K!==void 0&&R>=K?G.next(R-K):(!P&&H(R),T)}}}const iK=ff(.42,0,1,1),rK=ff(0,0,.58,1),t2=ff(.42,0,.58,1),sK=t=>Array.isArray(t)&&typeof t[0]!="number",oK={linear:tr,easeIn:iK,easeInOut:t2,easeOut:rK,circIn:pE,circInOut:VM,circOut:kM,backIn:hE,backInOut:DM,backOut:PM,anticipate:MM},zI=t=>{if(lE(t)){XD(t.length===4);const[e,n,i,r]=t;return ff(e,n,i,r)}else if(typeof t=="string")return oK[t];return t};function aK(t,e,n){const i=[],r=n||XM,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||tr:e;c=hf(d,c)}i.push(c)}return i}function lK(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(XD(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=aK(e,i,r),d=c.length,f=p=>{if(l&&p<t[0])return e[0];let v=0;if(d>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const T=Au(t[v],t[v+1],p);return c[v](T)};return n?p=>f(Hs(t[0],t[o-1],p)):f}function uK(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Au(0,e,i);t.push(Zt(n,1,r))}}function cK(t){const e=[0];return uK(e,t.length-1),e}function dK(t,e){return t.map(n=>n*e)}function fK(t,e){return t.map(()=>e||t2).splice(0,t.length-1)}function pm({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=sK(i)?i.map(zI):zI(i),o={done:!1,value:e[0]},l=dK(n&&n.length===e.length?n:cK(e),t),c=lK(l,e,{ease:Array.isArray(r)?r:fK(e,r)});return{calculatedDuration:t,next:d=>(o.value=c(d),o.done=d>=t,o)}}const hK=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Jt.update(e,!0),stop:()=>ea(e),now:()=>Yn.isProcessing?Yn.timestamp:ls.now()}},pK={decay:BI,inertia:BI,tween:pm,keyframes:pm,spring:e2},mK=t=>t/100;class TE extends WM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,l=(r==null?void 0:r.KeyframeResolver)||vE,c=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(o,c,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=this.options,c=aE(n)?n:pK[n]||pm;let d,f;c!==pm&&typeof e[0]!="number"&&(d=hf(mK,XM(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});o==="mirror"&&(f=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=vM(p));const{calculatedDuration:v}=p,T=v+r,b=T*(i+1)-r;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:T,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:f,totalDuration:p,resolvedDuration:v}=i;if(this.startTime===null)return o.next(0);const{delay:T,repeat:b,repeatType:C,repeatDelay:N,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const L=this.currentTime-T*(this.speed>=0?1:-1),k=this.speed>=0?L<0:L>p;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let U=this.currentTime,H=o;if(b){const R=Math.min(this.currentTime,p)/v;let P=Math.floor(R),V=R%1;!V&&R>=1&&(V=1),V===1&&P--,P=Math.min(P,b+1),!!(P%2)&&(C==="reverse"?(V=1-V,N&&(V-=N/v)):C==="mirror"&&(H=l)),U=Hs(0,1,V)*v}const K=k?{done:!1,value:d[0]}:H.next(U);c&&(K.value=c(K.value));let{done:G}=K;!k&&f!==null&&(G=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return I&&r!==void 0&&(K.value=fg(d,this.options,r)),D&&D(K.value),I&&this.finish(),K}get duration(){const{resolved:e}=this;return e?Os(e.calculatedDuration):0}get time(){return Os(this.currentTime)}set time(e){e=Ls(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Os(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=hK,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const gK=new Set(["opacity","clipPath","filter","transform"]);function yK(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:d}={}){const f={[e]:n};d&&(f.offset=d);const p=EM(c,r);return Array.isArray(p)&&(f.easing=p),t.animate(f,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const vK=$T(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),mm=10,_K=2e4;function TK(t){return aE(t.type)||t.type==="spring"||!TM(t.ease)}function EK(t,e){const n=new TE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<_K;)i=n.sample(o),r.push(i.value),o+=mm;return{times:void 0,keyframes:r,duration:o-mm,ease:"linear"}}const n2={anticipate:MM,backInOut:DM,circInOut:VM};function SK(t){return t in n2}class qI extends WM{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new JM(o,(l,c)=>this.onKeyframesResolved(l,c),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:l,motionValue:c,name:d,startTime:f}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&fm()&&SK(o)&&(o=n2[o]),TK(this.options)){const{onComplete:v,onUpdate:T,motionValue:b,element:C,...N}=this.options,D=EK(e,N);e=D.keyframes,e.length===1&&(e[1]=e[0]),i=D.duration,r=D.times,o=D.ease,l="keyframes"}const p=yK(c.owner.current,d,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(xI(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:v}=this.options;c.set(fg(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Os(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Os(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Ls(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return tr;const{animation:i}=n;xI(i,e)}return tr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:v,element:T,...b}=this.options,C=new TE({...b,keyframes:i,duration:r,type:o,ease:l,times:c,isGenerator:!0}),N=Ls(this.time);f.setWithVelocity(C.sample(N-mm).value,C.sample(N).value,mm)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=n.owner.getProps();return vK()&&i&&gK.has(i)&&!d&&!f&&!r&&o!=="mirror"&&l!==0&&c!=="inertia"}}const bK={type:"spring",stiffness:500,damping:25,restSpeed:10},wK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),AK={type:"keyframes",duration:.8},xK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CK=(t,{keyframes:e})=>e.length>2?AK:al.has(t)?t.startsWith("scale")?wK(e[1]):bK:xK;function IK({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const EE=(t,e,n,i={},r,o)=>l=>{const c=oE(i,t)||{},d=c.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Ls(d);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:T=>{e.set(T),c.onUpdate&&c.onUpdate(T)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};IK(c)||(p={...p,...CK(t,p)}),p.duration&&(p.duration=Ls(p.duration)),p.repeatDelay&&(p.repeatDelay=Ls(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const T=fg(p.keyframes,c);if(T!==void 0)return Jt.update(()=>{p.onUpdate(T),p.onComplete()}),new Kj([])}return!o&&qI.supports(p)?new qI(p):new TE(p)};function RK({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function i2(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;i&&(l=i);const f=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const v in d){const T=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),b=d[v];if(b===void 0||p&&RK(p,v))continue;const C={delay:n,...oE(l||{},v)};let N=!1;if(window.MotionHandoffAnimation){const L=CM(t);if(L){const k=window.MotionHandoffAnimation(L,v,Jt);k!==null&&(C.startTime=k,N=!0)}}Y0(t,v),T.start(EE(v,T,b,t.shouldReduceMotion&&AM.has(v)?{type:!1}:C,t,N));const D=T.animation;D&&f.push(D)}return c&&Promise.all(f).then(()=>{Jt.update(()=>{c&&a$(t,c)})}),f}function t_(t,e,n={}){var i;const r=dg(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const l=r?()=>Promise.all(i2(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:T}=o;return NK(t,e,p+f,v,T,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,p]=d==="beforeChildren"?[l,c]:[c,l];return f().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function NK(t,e,n=0,i=0,r=1,o){const l=[],c=(t.variantChildren.size-1)*i,d=r===1?(f=0)=>f*i:(f=0)=>c-f*i;return Array.from(t.variantChildren).sort(PK).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(t_(f,e,{...o,delay:n+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function PK(t,e){return t.sortNodePosition(e)}function DK(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>t_(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=t_(t,e,n);else{const r=typeof e=="function"?dg(t,e,n.custom):e;i=Promise.all(i2(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const MK=YT.length;function r2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?r2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<MK;n++){const i=YT[n],r=t.props[i];(zd(r)||r===!1)&&(e[i]=r)}return e}const kK=[...KT].reverse(),VK=KT.length;function LK(t){return e=>Promise.all(e.map(({animation:n,options:i})=>DK(t,n,i)))}function OK(t){let e=LK(t),n=GI(),i=!0;const r=d=>(f,p)=>{var v;const T=dg(t,p,d==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(T){const{transition:b,transitionEnd:C,...N}=T;f={...f,...N,...C}}return f};function o(d){e=d(t)}function l(d){const{props:f}=t,p=r2(t.parent)||{},v=[],T=new Set;let b={},C=1/0;for(let D=0;D<VK;D++){const L=kK[D],k=n[L],U=f[L]!==void 0?f[L]:p[L],H=zd(U),K=L===d?k.isActive:null;K===!1&&(C=D);let G=U===p[L]&&U!==f[L]&&H;if(G&&i&&t.manuallyAnimateOnMount&&(G=!1),k.protectedKeys={...b},!k.isActive&&K===null||!U&&!k.prevProp||ug(U)||typeof U=="boolean")continue;const I=UK(k.prevProp,U);let R=I||L===d&&k.isActive&&!G&&H||D>C&&H,P=!1;const V=Array.isArray(U)?U:[U];let F=V.reduce(r(L),{});K===!1&&(F={});const{prevResolvedValues:q={}}=k,z={...q,...F},xe=se=>{R=!0,T.has(se)&&(P=!0,T.delete(se)),k.needsAnimating[se]=!0;const me=t.getValue(se);me&&(me.liveStyle=!1)};for(const se in z){const me=F[se],Ae=q[se];if(b.hasOwnProperty(se))continue;let Ce=!1;j0(me)&&j0(Ae)?Ce=!yM(me,Ae):Ce=me!==Ae,Ce?me!=null?xe(se):T.add(se):me!==void 0&&T.has(se)?xe(se):k.protectedKeys[se]=!0}k.prevProp=U,k.prevResolvedValues=F,k.isActive&&(b={...b,...F}),i&&t.blockInitialAnimation&&(R=!1),R&&(!(G&&I)||P)&&v.push(...V.map(se=>({animation:se,options:{type:L}})))}if(T.size){const D={};T.forEach(L=>{const k=t.getBaseTarget(L),U=t.getValue(L);U&&(U.liveStyle=!0),D[L]=k??null}),v.push({animation:D})}let N=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(v):Promise.resolve()}function c(d,f){var p;if(n[d].isActive===f)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(d,f)}),n[d].isActive=f;const v=l(d);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=GI(),i=!0}}}function UK(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!yM(e,t):!1}function Ma(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GI(){return{animate:Ma(!0),whileInView:Ma(),whileHover:Ma(),whileTap:Ma(),whileDrag:Ma(),whileFocus:Ma(),exit:Ma()}}class la{constructor(e){this.isMounted=!1,this.node=e}update(){}}class FK extends la{constructor(e){super(e),e.animationState||(e.animationState=OK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ug(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let BK=0;class zK extends la{constructor(){super(...arguments),this.id=BK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const qK={animation:{Feature:FK},exit:{Feature:zK}};function jd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function pf(t){return{point:{x:t.pageX,y:t.pageY}}}const GK=t=>e=>uE(e)&&t(e,pf(e));function yd(t,e,n,i){return jd(t,e,GK(n),i)}const HI=(t,e)=>Math.abs(t-e);function HK(t,e){const n=HI(t.x,e.x),i=HI(t.y,e.y);return Math.sqrt(n**2+i**2)}class s2{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Hv(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,b=HK(v.offset,{x:0,y:0})>=3;if(!T&&!b)return;const{point:C}=v,{timestamp:N}=Yn;this.history.push({...C,timestamp:N});const{onStart:D,onMove:L}=this.handlers;T||(D&&D(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,v)},this.handlePointerMove=(v,T)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Gv(T,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(v,T)=>{this.end();const{onEnd:b,onSessionEnd:C,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=Hv(v.type==="pointercancel"?this.lastMoveEventInfo:Gv(T,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,D),C&&C(v,D)},!uE(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=pf(e),c=Gv(l,this.transformPagePoint),{point:d}=c,{timestamp:f}=Yn;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,Hv(c,this.history)),this.removeListeners=hf(yd(this.contextWindow,"pointermove",this.handlePointerMove),yd(this.contextWindow,"pointerup",this.handlePointerUp),yd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ea(this.updatePoint)}}function Gv(t,e){return e?{point:e(t.point)}:t}function jI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Hv({point:t},e){return{point:t,delta:jI(t,o2(e)),offset:jI(t,jK(e)),velocity:$K(e,.1)}}function jK(t){return t[0]}function o2(t){return t[t.length-1]}function $K(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=o2(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ls(e)));)n--;if(!i)return{x:0,y:0};const o=Os(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const a2=1e-4,KK=1-a2,YK=1+a2,l2=.01,JK=0-l2,WK=0+l2;function nr(t){return t.max-t.min}function QK(t,e,n){return Math.abs(t-e)<=n}function $I(t,e,n,i=.5){t.origin=i,t.originPoint=Zt(e.min,e.max,t.origin),t.scale=nr(n)/nr(e),t.translate=Zt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=KK&&t.scale<=YK||isNaN(t.scale))&&(t.scale=1),(t.translate>=JK&&t.translate<=WK||isNaN(t.translate))&&(t.translate=0)}function vd(t,e,n,i){$I(t.x,e.x,n.x,i?i.originX:void 0),$I(t.y,e.y,n.y,i?i.originY:void 0)}function KI(t,e,n){t.min=n.min+e.min,t.max=t.min+nr(e)}function XK(t,e,n){KI(t.x,e.x,n.x),KI(t.y,e.y,n.y)}function YI(t,e,n){t.min=e.min-n.min,t.max=t.min+nr(e)}function _d(t,e,n){YI(t.x,e.x,n.x),YI(t.y,e.y,n.y)}function ZK(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Zt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Zt(n,t,i.max):Math.min(t,n)),t}function JI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function eY(t,{top:e,left:n,bottom:i,right:r}){return{x:JI(t.x,n,r),y:JI(t.y,e,i)}}function WI(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function tY(t,e){return{x:WI(t.x,e.x),y:WI(t.y,e.y)}}function nY(t,e){let n=.5;const i=nr(t),r=nr(e);return r>i?n=Au(e.min,e.max-i,t.min):i>r&&(n=Au(t.min,t.max-r,e.min)),Hs(0,1,n)}function iY(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const n_=.35;function rY(t=n_){return t===!1?t=0:t===!0&&(t=n_),{x:QI(t,"left","right"),y:QI(t,"top","bottom")}}function QI(t,e,n){return{min:XI(t,e),max:XI(t,n)}}function XI(t,e){return typeof t=="number"?t:t[e]||0}const ZI=()=>({translate:0,scale:1,origin:0,originPoint:0}),ru=()=>({x:ZI(),y:ZI()}),eR=()=>({min:0,max:0}),pn=()=>({x:eR(),y:eR()});function vr(t){return[t("x"),t("y")]}function u2({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function sY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function oY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function jv(t){return t===void 0||t===1}function i_({scale:t,scaleX:e,scaleY:n}){return!jv(t)||!jv(e)||!jv(n)}function Oa(t){return i_(t)||c2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function c2(t){return tR(t.x)||tR(t.y)}function tR(t){return t&&t!=="0%"}function gm(t,e,n){const i=t-n,r=e*i;return n+r}function nR(t,e,n,i,r){return r!==void 0&&(t=gm(t,r,i)),gm(t,n,i)+e}function r_(t,e=0,n=1,i,r){t.min=nR(t.min,e,n,i,r),t.max=nR(t.max,e,n,i,r)}function d2(t,{x:e,y:n}){r_(t.x,e.translate,e.scale,e.originPoint),r_(t.y,n.translate,n.scale,n.originPoint)}const iR=.999999999999,rR=1.0000000000001;function aY(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ou(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,d2(t,l)),i&&Oa(o.latestValues)&&ou(t,o.latestValues))}e.x<rR&&e.x>iR&&(e.x=1),e.y<rR&&e.y>iR&&(e.y=1)}function su(t,e){t.min=t.min+e,t.max=t.max+e}function sR(t,e,n,i,r=.5){const o=Zt(t.min,t.max,r);r_(t,e,n,o,i)}function ou(t,e){sR(t.x,e.x,e.scaleX,e.scale,e.originX),sR(t.y,e.y,e.scaleY,e.scale,e.originY)}function f2(t,e){return u2(oY(t.getBoundingClientRect(),e))}function lY(t,e,n){const i=f2(t,n),{scroll:r}=e;return r&&(su(i.x,r.offset.x),su(i.y,r.offset.y)),i}const h2=({current:t})=>t?t.ownerDocument.defaultView:null,uY=new WeakMap;class cY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pf(p).point)},o=(p,v)=>{const{drag:T,dragPropagation:b,onDragStart:C}=this.getProps();if(T&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=n$(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vr(D=>{let L=this.getAxisMotionValue(D).get()||0;if(as.test(L)){const{projection:k}=this.visualElement;if(k&&k.layout){const U=k.layout.layoutBox[D];U&&(L=nr(U)*(parseFloat(L)/100))}}this.originPoint[D]=L}),C&&Jt.postRender(()=>C(p,v)),Y0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(p,v)=>{const{dragPropagation:T,dragDirectionLock:b,onDirectionLock:C,onDrag:N}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:D}=v;if(b&&this.currentDirection===null){this.currentDirection=dY(D),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",v.point,D),this.updateAxis("y",v.point,D),this.visualElement.render(),N&&N(p,v)},c=(p,v)=>this.stop(p,v),d=()=>vr(p=>{var v;return this.getAnimationState(p)==="paused"&&((v=this.getAxisMotionValue(p).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new s2(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:h2(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&Jt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Wh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=ZK(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&nu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=eY(r.layoutBox,n):this.constraints=!1,this.elastic=rY(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=iY(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=lY(i,r.root,this.visualElement.getTransformPagePoint());let l=tY(r.layout.layoutBox,o);if(n){const c=n(sY(l));this.hasMutatedConstraints=!!c,c&&(l=u2(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=vr(p=>{if(!Wh(p,n,this.currentDirection))return;let v=d&&d[p]||{};l&&(v={min:0,max:0});const T=r?200:1e6,b=r?40:1e7,C={type:"inertia",velocity:i?e[p]:0,bounceStiffness:T,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(p,C)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Y0(this.visualElement,e),i.start(EE(e,i,0,n,this.visualElement,!1))}stopAnimation(){vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vr(n=>{const{drag:i}=this.getProps();if(!Wh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-Zt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!nu(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};vr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();r[l]=nY({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vr(l=>{if(!Wh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];c.set(Zt(d,f,r[l]))})}addListeners(){if(!this.visualElement.current)return;uY.set(this.visualElement,this);const e=this.visualElement.current,n=yd(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();nu(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Jt.read(i);const l=jd(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(vr(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=d[p].translate,v.set(v.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=n_,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Wh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function dY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class fY extends la{constructor(e){super(e),this.removeGroupControls=tr,this.removeListeners=tr,this.controls=new cY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const oR=t=>(e,n)=>{t&&Jt.postRender(()=>t(e,n))};class hY extends la{constructor(){super(...arguments),this.removePointerDownListener=tr}onPointerDown(e){this.session=new s2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:h2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:oR(e),onStart:oR(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&Jt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=yd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ip={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function aR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Gc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ue.test(t))t=parseFloat(t);else return t;const n=aR(t,e.target.x),i=aR(t,e.target.y);return`${n}% ${i}%`}},pY={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ta.parse(t);if(r.length>5)return i;const o=ta.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=d;const f=Zt(c,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=f),typeof r[3+l]=="number"&&(r[3+l]/=f),o(r)}};class mY extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;Vj(gY),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ip.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,l=i.projection;return l&&(l.isPresent=o,r||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Jt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),WT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function p2(t){const[e,n]=WD(),i=B.useContext(qT);return S.jsx(mY,{...t,layoutGroup:i,switchLayoutGroup:B.useContext(rM),isPresent:e,safeToRemove:n})}const gY={borderRadius:{...Gc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gc,borderTopRightRadius:Gc,borderBottomLeftRadius:Gc,borderBottomRightRadius:Gc,boxShadow:pY};function yY(t,e,n){const i=ai(t)?t:Gd(t);return i.start(EE("",i,e,n)),i.animation}function vY(t){return t instanceof SVGElement&&t.tagName!=="svg"}const _Y=(t,e)=>t.depth-e.depth;class TY{constructor(){this.children=[],this.isDirty=!1}add(e){cE(this.children,e),this.isDirty=!0}remove(e){dE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_Y),this.isDirty=!1,this.children.forEach(e)}}function EY(t,e){const n=ls.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(ea(i),t(o-e))};return Jt.read(i,!0),()=>ea(i)}const m2=["TopLeft","TopRight","BottomLeft","BottomRight"],SY=m2.length,lR=t=>typeof t=="string"?parseFloat(t):t,uR=t=>typeof t=="number"||Ue.test(t);function bY(t,e,n,i,r,o){r?(t.opacity=Zt(0,n.opacity!==void 0?n.opacity:1,wY(i)),t.opacityExit=Zt(e.opacity!==void 0?e.opacity:1,0,AY(i))):o&&(t.opacity=Zt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<SY;l++){const c=`border${m2[l]}Radius`;let d=cR(e,c),f=cR(n,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||uR(d)===uR(f)?(t[c]=Math.max(Zt(lR(d),lR(f),i),0),(as.test(f)||as.test(d))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=Zt(e.rotate||0,n.rotate||0,i))}function cR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const wY=g2(0,.5,kM),AY=g2(.5,.95,tr);function g2(t,e,n){return i=>i<t?0:i>e?1:n(Au(t,e,i))}function dR(t,e){t.min=e.min,t.max=e.max}function yr(t,e){dR(t.x,e.x),dR(t.y,e.y)}function fR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function hR(t,e,n,i,r){return t-=e,t=gm(t,1/n,i),r!==void 0&&(t=gm(t,1/r,i)),t}function xY(t,e=0,n=1,i=.5,r,o=t,l=t){if(as.test(e)&&(e=parseFloat(e),e=Zt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Zt(o.min,o.max,i);t===o&&(c-=e),t.min=hR(t.min,e,n,c,r),t.max=hR(t.max,e,n,c,r)}function pR(t,e,[n,i,r],o,l){xY(t,e[n],e[i],e[r],e.scale,o,l)}const CY=["x","scaleX","originX"],IY=["y","scaleY","originY"];function mR(t,e,n,i){pR(t.x,e,CY,n?n.x:void 0,i?i.x:void 0),pR(t.y,e,IY,n?n.y:void 0,i?i.y:void 0)}function gR(t){return t.translate===0&&t.scale===1}function y2(t){return gR(t.x)&&gR(t.y)}function yR(t,e){return t.min===e.min&&t.max===e.max}function RY(t,e){return yR(t.x,e.x)&&yR(t.y,e.y)}function vR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function v2(t,e){return vR(t.x,e.x)&&vR(t.y,e.y)}function _R(t){return nr(t.x)/nr(t.y)}function TR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class NY{constructor(){this.members=[]}add(e){cE(this.members,e),e.scheduleRender()}remove(e){if(dE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function PY(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:v,rotateY:T,skewX:b,skewY:C}=n;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),T&&(i+=`rotateY(${T}deg) `),b&&(i+=`skewX(${b}deg) `),C&&(i+=`skewY(${C}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const Ua={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},id=typeof window<"u"&&window.MotionDebug!==void 0,$v=["","X","Y","Z"],DY={visibility:"hidden"},ER=1e3;let MY=0;function Kv(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function _2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=CM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Jt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&_2(i)}function T2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e==null?void 0:e()){this.id=MY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,id&&(Ua.totalNodes=Ua.resolvedTargetDeltas=Ua.recalculatedProjection=0),this.nodes.forEach(LY),this.nodes.forEach(zY),this.nodes.forEach(qY),this.nodes.forEach(OY),id&&window.MotionDebug.record(Ua)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new TY)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new fE),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vY(l),this.instance=l;const{layoutId:d,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||d)&&(this.isLayoutDirty=!0),t){let v;const T=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=EY(T,250),Ip.hasAnimatedSinceResize&&(Ip.hasAnimatedSinceResize=!1,this.nodes.forEach(bR))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||f)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:T,hasRelativeTargetChanged:b,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||KY,{onLayoutAnimationStart:D,onLayoutAnimationComplete:L}=p.getProps(),k=!this.targetLayout||!v2(this.targetLayout,C)||b,U=!T&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||U||T&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,U);const H={...oE(N,"layout"),onPlay:D,onComplete:L};(p.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H)}else T||bR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ea(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GY),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SR);return}this.isUpdating||this.nodes.forEach(FY),this.isUpdating=!1,this.nodes.forEach(BY),this.nodes.forEach(kY),this.nodes.forEach(VY),this.clearAllSnapshots();const c=ls.now();Yn.delta=Hs(0,1e3/60,c-Yn.timestamp),Yn.timestamp=c,Yn.isProcessing=!0,Ov.update.process(Yn),Ov.preRender.process(Yn),Ov.render.process(Yn),Yn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,WT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(UY),this.sharedNodes.forEach(HY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!y2(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&(c||Oa(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),YY(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return pn();const d=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(JY))){const{scroll:p}=this.root;p&&(su(d.x,p.offset.x),su(d.y,p.offset.y))}return d}removeElementScroll(l){var c;const d=pn();if(yr(d,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:v,options:T}=p;p!==this.root&&v&&T.layoutScroll&&(v.wasRoot&&yr(d,l),su(d.x,v.offset.x),su(d.y,v.offset.y))}return d}applyTransform(l,c=!1){const d=pn();yr(d,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&ou(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Oa(p.latestValues)&&ou(d,p.latestValues)}return Oa(this.latestValues)&&ou(d,this.latestValues),d}removeTransform(l){const c=pn();yr(c,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Oa(f.latestValues))continue;i_(f.latestValues)&&f.updateSnapshot();const p=pn(),v=f.measurePageBox();yr(p,v),mR(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Oa(this.latestValues)&&mR(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:T}=this.options;if(!(!this.layout||!(v||T))){if(this.resolvedRelativeTargetAt=Yn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),_d(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),d2(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),_d(this.relativeTargetOrigin,this.target,b.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}id&&Ua.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||i_(this.parent.latestValues)||c2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Yn.timestamp&&(f=!1),f)return;const{layout:p,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||v))return;yr(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,b=this.treeScale.y;aY(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=pn());const{target:C}=c;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fR(this.prevProjectionDelta.x,this.projectionDelta.x),fR(this.prevProjectionDelta.y,this.projectionDelta.y)),vd(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==b||!TR(this.projectionDelta.x,this.prevProjectionDelta.x)||!TR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),id&&Ua.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ru(),this.projectionDelta=ru(),this.projectionDeltaWithTransform=ru()}setAnimationOrigin(l,c=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},v=ru();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const T=pn(),b=d?d.source:void 0,C=this.layout?this.layout.source:void 0,N=b!==C,D=this.getStack(),L=!D||D.members.length<=1,k=!!(N&&!L&&this.options.crossfade===!0&&!this.path.some($Y));this.animationProgress=0;let U;this.mixTargetDelta=H=>{const K=H/1e3;wR(v.x,l.x,K),wR(v.y,l.y,K),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_d(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jY(this.relativeTarget,this.relativeTargetOrigin,T,K),U&&RY(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=pn()),yr(U,this.relativeTarget)),N&&(this.animationValues=p,bY(p,f,this.latestValues,K,k,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ea(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{Ip.hasAnimatedSinceResize=!0,this.currentAnimation=yY(0,ER,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ER),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:p}=l;if(!(!c||!d||!f)){if(this!==l&&this.layout&&f&&E2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||pn();const v=nr(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const T=nr(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+T}yr(c,d),ou(c,p),vd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new NY),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&Kv("z",l,f,this.animationValues);for(let p=0;p<$v.length;p++)Kv(`rotate${$v[p]}`,l,f,this.animationValues),Kv(`skew${$v[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return DY;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=xp(l==null?void 0:l.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=xp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Oa(this.latestValues)&&(N.transform=p?p({},""):"none",this.hasProjected=!1),N}const T=v.animationValues||v.latestValues;this.applyTransformsToTarget(),f.transform=PY(this.projectionDeltaWithTransform,this.treeScale,T),p&&(f.transform=p(T,f.transform));const{x:b,y:C}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${C.origin*100}% 0`,v.animationValues?f.opacity=v===this?(d=(c=T.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:f.opacity=v===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const N in dm){if(T[N]===void 0)continue;const{correct:D,applyTo:L}=dm[N],k=f.transform==="none"?T[N]:D(T[N],v);if(L){const U=L.length;for(let H=0;H<U;H++)f[L[H]]=k}else f[N]=k}return this.options.layoutId&&(f.pointerEvents=v===this?xp(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(SR),this.root.sharedNodes.clear()}}}function kY(t){t.updateLayout()}function VY(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?vr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=nr(T);T.min=i[v].min,T.max=T.min+b}):E2(o,n.layoutBox,i)&&vr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=nr(i[v]);T.max=T.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+b)});const c=ru();vd(c,i,n.layoutBox);const d=ru();l?vd(d,t.applyTransform(r,!0),n.measuredBox):vd(d,i,n.layoutBox);const f=!y2(c);let p=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:T,layout:b}=v;if(T&&b){const C=pn();_d(C,n.layoutBox,T.layoutBox);const N=pn();_d(N,i,b.layoutBox),v2(C,N)||(p=!0),v.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=C,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function LY(t){id&&Ua.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function OY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function UY(t){t.clearSnapshot()}function SR(t){t.clearMeasurements()}function FY(t){t.isLayoutDirty=!1}function BY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zY(t){t.resolveTargetDelta()}function qY(t){t.calcProjection()}function GY(t){t.resetSkewAndRotation()}function HY(t){t.removeLeadSnapshot()}function wR(t,e,n){t.translate=Zt(e.translate,0,n),t.scale=Zt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AR(t,e,n,i){t.min=Zt(e.min,n.min,i),t.max=Zt(e.max,n.max,i)}function jY(t,e,n,i){AR(t.x,e.x,n.x,i),AR(t.y,e.y,n.y,i)}function $Y(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const KY={duration:.45,ease:[.4,0,.1,1]},xR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),CR=xR("applewebkit/")&&!xR("chrome/")?Math.round:tr;function IR(t){t.min=CR(t.min),t.max=CR(t.max)}function YY(t){IR(t.x),IR(t.y)}function E2(t,e,n){return t==="position"||t==="preserve-aspect"&&!QK(_R(e),_R(n),.2)}function JY(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const WY=T2({attachResizeListener:(t,e)=>jd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yv={current:void 0},S2=T2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yv.current){const t=new WY({});t.mount(window),t.setOptions({layoutScroll:!0}),Yv.current=t}return Yv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),QY={pan:{Feature:hY},drag:{Feature:fY,ProjectionNode:S2,MeasureLayout:p2}};function RR(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Jt.postRender(()=>o(e,pf(e)))}class XY extends la{mount(){const{current:e}=this.node;e&&(this.unmount=Qj(e,n=>(RR(this.node,n,"Start"),i=>RR(this.node,i,"End"))))}unmount(){}}class ZY extends la{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hf(jd(this.node.current,"focus",()=>this.onFocus()),jd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NR(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Jt.postRender(()=>o(e,pf(e)))}class eJ extends la{mount(){const{current:e}=this.node;e&&(this.unmount=t$(e,n=>(NR(this.node,n,"Start"),(i,{success:r})=>NR(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const s_=new WeakMap,Jv=new WeakMap,tJ=t=>{const e=s_.get(t.target);e&&e(t)},nJ=t=>{t.forEach(tJ)};function iJ({root:t,...e}){const n=t||document;Jv.has(n)||Jv.set(n,{});const i=Jv.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(nJ,{root:t,...e})),i[r]}function rJ(t,e,n){const i=iJ(e);return s_.set(t,n),i.observe(t),()=>{s_.delete(t),i.unobserve(t)}}const sJ={some:0,all:1};class oJ extends la{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:sJ[r]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),T=f?p:v;T&&T(d)};return rJ(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(aJ(e,n))&&this.startObserver()}unmount(){}}function aJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const lJ={inView:{Feature:oJ},tap:{Feature:eJ},focus:{Feature:ZY},hover:{Feature:XY}},uJ={layout:{ProjectionNode:S2,MeasureLayout:p2}},o_={current:null},b2={current:!1};function cJ(){if(b2.current=!0,!!jT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>o_.current=t.matches;t.addListener(e),e()}else o_.current=!1}const dJ=[...YM,ni,ta],fJ=t=>dJ.find(KM(t)),PR=new WeakMap;function hJ(t,e,n){for(const i in e){const r=e[i],o=n[i];if(ai(r))t.addValue(i,r);else if(ai(o))t.addValue(i,Gd(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,Gd(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const DR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pJ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=ls.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Jt.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:p}=l;this.onUpdate=p,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=cg(n),this.isVariantNode=nM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in T){const C=T[b];d[b]!==void 0&&ai(C)&&C.set(d[b],!1)}}mount(e){this.current=e,PR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),b2.current||cJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:o_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){PR.delete(this.current),this.projection&&this.projection.unmount(),ea(this.notifyUpdate),ea(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=al.has(e),r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xu){const n=xu[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<DR.length;i++){const r=DR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=hJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Gd(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(jM(r)||LM(r))?r=parseFloat(r):!fJ(r)&&ta.test(n)&&(r=qM(e,n)),this.setBaseTarget(e,ai(r)?r.get():r)),ai(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=XT(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!ai(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new fE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class w2 extends pJ{constructor(){super(...arguments),this.KeyframeResolver=JM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ai(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function mJ(t){return window.getComputedStyle(t)}class gJ extends w2{constructor(){super(...arguments),this.type="html",this.renderInstance=dM}readValueFromInstance(e,n){if(al.has(n)){const i=yE(n);return i&&i.default||0}else{const i=mJ(e),r=(lM(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return f2(e,n)}build(e,n,i){tE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return sE(e,n,i)}}class yJ extends w2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(al.has(n)){const i=yE(n);return i&&i.default||0}return n=fM.has(n)?n:JT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return mM(e,n,i)}build(e,n,i){nE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){hM(e,n,i,r)}mount(e){this.isSVGTag=rE(e.tagName),super.mount(e)}}const vJ=(t,e)=>QT(t)?new yJ(e):new gJ(e,{allowProjection:t!==B.Fragment}),_J=Hj({...qK,...lJ,...QY,...uJ},vJ),Ns=sj(_J),TJ=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),EJ=({onGetStarted:t})=>{const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},n={animate:{transition:{staggerChildren:.1}}};return S.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow overflow-x-hidden",children:[S.jsxs("nav",{className:"absolute top-0 w-full p-6 flex justify-between items-center z-50",children:[S.jsxs("div",{className:"text-2xl font-serif font-bold",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("button",{onClick:t,className:"text-sm font-semibold hover:text-gold transition-colors bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20",children:"Se connecter"})]}),S.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center text-center px-4 pt-20",children:[S.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-gold/10 rounded-full blur-[100px] pointer-events-none"}),S.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/5 rounded-full blur-[100px] pointer-events-none"}),S.jsxs(Ns.div,{initial:"initial",animate:"animate",variants:n,className:"max-w-4xl mx-auto z-10",children:[S.jsxs(Ns.div,{variants:e,className:"mb-6 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gold/10 border border-gold/20 text-gold text-xs font-bold uppercase tracking-wider",children:[S.jsx(Fd,{}),S.jsx("span",{children:"Assistant Mode IA  Beta Prive"})]}),S.jsxs(Ns.h1,{variants:e,className:"text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 leading-tight",children:["Votre style, ",S.jsx("br",{}),S.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-600",children:"rinvent par l'IA."})]}),S.jsxs(Ns.p,{variants:e,className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:[`Fini le "Je n'ai rien  me mettre". `,S.jsx("strong",{children:"Dress Me Up!"})," analyse votre garde-robe, cre des tenues sur-mesure et prpare vos valises en un clic."]}),S.jsxs(Ns.div,{variants:e,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[S.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-gold text-onyx text-lg font-bold rounded-full overflow-hidden shadow-lg shadow-gold/20 hover:shadow-gold/40 transition-all hover:scale-105 active:scale-95",children:[S.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Commencer l'exprience ",S.jsx(TJ,{})]}),S.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]}),S.jsx("p",{className:"text-xs text-gray-400 mt-2 sm:mt-0",children:"*Aucune carte bancaire requise"})]})]}),S.jsx(Ns.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,duration:1},className:"absolute left-4 md:left-20 bottom-20 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-4 rounded-xl shadow-2xl border border-white/10 rotate-[-6deg] max-w-xs backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[S.jsx("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center text-onyx",children:""}),S.jsx("div",{className:"text-xs font-medium",children:"Suggestion IA"})]}),S.jsx("p",{className:"text-sm font-serif italic",children:'"Pour ce soir  Rome, opte pour la chemise en lin blanc et le pantalon beige."'})]})}),S.jsx(Ns.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1,duration:1},className:"absolute right-4 md:right-20 top-40 hidden lg:block",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black p-3 rounded-xl shadow-2xl border border-white/10 rotate-[6deg] backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[S.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center text-4xl",children:""}),S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Manteau Laine"}),S.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})]})})]}),S.jsx("section",{className:"py-24 px-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:S.jsxs("div",{className:"max-w-6xl mx-auto",children:[S.jsxs("div",{className:"text-center mb-16",children:[S.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-4",children:"Votre dressing intelligent"}),S.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"Une suite d'outils puissants pour digitaliser et optimiser votre style au quotidien."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsx(Wv,{icon:S.jsx(lm,{}),title:"Digitalisez en un clair",description:"Prenez une photo, l'IA dtecte automatiquement la catgorie, la couleur et la matire. Votre garde-robe dans votre poche."}),S.jsx(Wv,{icon:S.jsx(Fd,{}),title:"Styliste Personnel",description:"Une runion ? Un date ? Demandez  l'IA de crer la tenue parfaite en fonction de la mto et de l'occasion."}),S.jsx(Wv,{icon:S.jsx(KD,{}),title:"Valise Optimise",description:"Partez l'esprit lger. Gnrez une liste de vtements optimise pour la dure et la destination de votre voyage."})]})]})}),S.jsx("section",{className:"py-20 px-4 text-center",children:S.jsxs("div",{className:"max-w-3xl mx-auto",children:[S.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold mb-8",children:"Prt  upgrader votre style ?"}),S.jsx("button",{onClick:t,className:"px-10 py-4 bg-raisin-black dark:bg-snow text-snow dark:text-onyx font-bold rounded-full text-lg hover:opacity-90 transition-opacity transform hover:scale-105 duration-200",children:"Rejoindre maintenant"}),S.jsx("p",{className:"mt-8 text-sm text-gray-500",children:" 2025 Dress Me Up! - Fait avec  & IA."})]})})]})},Wv=({icon:t,title:e,description:n})=>S.jsxs(Ns.div,{whileHover:{y:-5},className:"p-8 rounded-2xl bg-white dark:bg-raisin-black border border-black/5 dark:border-white/5 shadow-xl shadow-black/5 dark:shadow-black/20",children:[S.jsx("div",{className:"w-12 h-12 bg-gold/10 text-gold rounded-xl flex items-center justify-center mb-6",children:S.jsx("div",{className:"w-6 h-6",children:t})}),S.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:n})]}),SJ=({onAnalyze:t,isAnalyzing:e})=>{const n=B.useRef(null),[i,r]=B.useState([]),[o,l]=B.useState(!1),[c,d]=B.useState(!1);B.useEffect(()=>{const k=()=>d(window.innerWidth<1024);return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),B.useEffect(()=>()=>{i.forEach(k=>URL.revokeObjectURL(k.preview))},[i]);const f=k=>{const U=k.map(H=>({id:`${H.name}-${H.lastModified}-${Math.random()}`,file:H,preview:URL.createObjectURL(H)}));r(H=>[...H,...U])},p=k=>{k.target.files&&(f(Array.from(k.target.files)),k.target.value="")},v=()=>{var k;e||(k=n.current)==null||k.click()},T=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!0))},b=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1))},C=k=>{c||(k.preventDefault(),k.stopPropagation())},N=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1),k.dataTransfer.files&&k.dataTransfer.files.length>0&&(f(Array.from(k.dataTransfer.files)),k.dataTransfer.clearData()))},D=k=>{const U=i.find(H=>H.id===k);U&&URL.revokeObjectURL(U.preview),r(H=>H.filter(K=>K.id!==k))},L=()=>{i.length>0&&!e&&(t(i.map(k=>k.file)),r([]))};return S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:b,onDragOver:C,onDrop:N,children:[S.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),S.jsxs("div",{onClick:v,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[S.jsx("input",{type:"file",ref:n,onChange:p,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),S.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?S.jsxs(S.Fragment,{children:[S.jsx(UT,{}),S.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:S.jsx(lm,{})}),S.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",S.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!c&&S.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[S.jsx("div",{className:"text-black transform-gpu scale-110",children:S.jsx(lm,{})}),S.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(k=>S.jsxs("div",{className:"relative group aspect-square",children:[S.jsx("img",{src:k.preview,alt:k.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),S.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),S.jsx("button",{onClick:()=>D(k.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:S.jsx(sg,{})})]},k.id))}),S.jsxs("button",{onClick:L,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Fd,{}),"Analyser les ",i.length," article(s)"]})]})]})},bJ=()=>S.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),wJ=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:r,isSet:o,isFavorite:l})=>S.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[S.jsx("img",{src:t,alt:e,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),S.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${r?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(BT,{})}):l?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Bd,{className:"w-4 h-4"})}):o?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(og,{})}):null,S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:S.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),S.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:S.jsx(sg,{})})]}),AJ={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},xJ=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:i,onDeleteItem:r,onCreateSet:o})=>{var Z,pe;const[l,c]=B.useState("Hauts"),[d,f]=B.useState(AJ),[p,v]=B.useState(""),[T,b]=B.useState("favorites"),[C,N]=B.useState(!1),[D,L]=B.useState(new Set),k=B.useMemo(()=>n||[],[n]),U=B.useMemo(()=>new Set(k.flatMap(re=>re.itemIds||[])),[k]),H=t.length,K=[{name:"Hauts",icon:S.jsx(F7,{})},{name:"Bas",icon:S.jsx(B7,{})},{name:"Chaussures",icon:S.jsx(z7,{})},{name:"Accessoires",icon:S.jsx(q7,{})}],G=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],I=re=>{C?L(fe=>{const Te=new Set(fe);return Te.has(re.id)?Te.delete(re.id):Te.add(re.id),Te}):i(re)},R=(re,fe)=>{re.stopPropagation(),D.has(fe)&&L(Te=>{const Ve=new Set(Te);return Ve.delete(fe),Ve}),r(fe)},P=re=>[...re].sort((fe,Te)=>{switch(T){case"favorites":return(Te.isFavorite?1:0)-(fe.isFavorite?1:0);case"newest":return(Te.createdAt||0)-(fe.createdAt||0);case"oldest":return(fe.createdAt||0)-(Te.createdAt||0);case"color":return fe.color.localeCompare(Te.color);case"category":return fe.category.localeCompare(Te.category);default:return 0}}),V=B.useMemo(()=>{if(!p.trim())return t;const re=p.toLowerCase();return t.filter(fe=>fe.analysis.toLowerCase().includes(re)||fe.color.toLowerCase().includes(re)||fe.material.toLowerCase().includes(re)||fe.category.toLowerCase().includes(re))},[t,p]),F=B.useMemo(()=>{if(!l)return[];const re=V.filter(Te=>Te.category===l),fe=d[l];return fe?re.filter(Te=>{const Ve=fe.color==="Toutes"||Te.color===fe.color,Le=fe.material==="Toutes"||Te.material===fe.material;return Ve&&Le}):re},[V,l,(Z=d[l])==null?void 0:Z.color,(pe=d[l])==null?void 0:pe.material]),q=B.useMemo(()=>P(F),[F,T]),z=B.useMemo(()=>K.reduce((re,{name:fe})=>(re[fe]=V.filter(Te=>Te.category===fe).length,re),{}),[V]),xe=B.useMemo(()=>{if(!l)return[];const re=V.filter(fe=>fe.category===l).map(fe=>fe.color);return["Toutes",...Array.from(new Set(re))]},[V,l]),De=B.useMemo(()=>{if(!l)return[];const re=V.filter(fe=>fe.category===l).map(fe=>fe.material);return["Toutes",...Array.from(new Set(re))]},[V,l]),ee=re=>{l&&f(fe=>({...fe,[l]:{...fe[l],color:re}}))},se=re=>{l&&f(fe=>({...fe,[l]:{...fe[l],material:re}}))},me=re=>{c(l===re?null:re)},Ae=()=>{N(!C),L(new Set)},Ce=()=>{if(D.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const re=window.prompt("Donnez un nom  cet ensemble :");re&&(o(re,Array.from(D)),Ae())},$=()=>{v("")};return e?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[S.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),S.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((re,fe)=>S.jsx(bJ,{},fe))})]}):H===0?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[S.jsx(gI,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),S.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(gI,{className:"w-8 h-8 text-gold"}),S.jsxs("div",{children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[H," vtement",H>1?"s":""]})]})]}),C?S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[S.jsx("button",{onClick:Ae,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),S.jsxs("button",{onClick:Ce,disabled:D.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",D.size,")"]})]}):S.jsxs("button",{onClick:Ae,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[S.jsx(og,{}),"Crer un ensemble"]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx(YD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:p,onChange:re=>v(re.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),p&&S.jsx("button",{onClick:$,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:S.jsx(sg,{})})]}),S.jsxs("div",{className:"relative sm:w-48",children:[S.jsx(JD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsx("select",{value:T,onChange:re=>b(re.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:G.map(re=>S.jsx("option",{value:re.value,children:re.label},re.value))}),S.jsx(um,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),p&&S.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[V.length," rsultat",V.length>1?"s":"",' pour "',p,'"']}),C&&S.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[S.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),S.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),S.jsx("div",{className:"space-y-6",children:K.map(({name:re,icon:fe})=>{const Te=z[re]||0,Ve=l===re;return S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>me(re),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("span",{className:"w-5 h-5 text-gold",children:fe}),S.jsx("span",{className:"font-semibold text-lg",children:re}),S.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",Te,")"]})]}),S.jsx(um,{className:`w-5 h-5 transition-transform ${Ve?"rotate-180":""}`})]}),Ve&&S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),S.jsx("select",{value:d[re].color,onChange:Le=>ee(Le.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:xe.map(Le=>S.jsx("option",{value:Le,children:Le},Le))})]}),S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),S.jsx("select",{value:d[re].material,onChange:Le=>se(Le.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:De.map(Le=>S.jsx("option",{value:Le,children:Le},Le))})]})]}),q.length>0?S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:S.jsx(Q7,{mode:"popLayout",children:q.map((Le,pt)=>S.jsx(Ns.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:pt*.05,type:"spring",bounce:.3},children:S.jsx(wJ,{imageSrc:Le.imageSrc,analysis:Le.analysis,onClick:()=>I(Le),onRemove:xn=>R(xn,Le.id),isSelected:D.has(Le.id),isSet:U.has(Le.id),isFavorite:Le.isFavorite})},Le.id))})}):S.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},re)})})]})},A2=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:r,weatherError:o})=>{const[l,c]=Dn.useState(""),d=p=>{p.preventDefault(),n(l||"Casual")},f=["Casual","Soire chic","Travail (formel)"];return S.jsxs("div",{children:[S.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[r&&S.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",r," "]}),o&&S.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!r&&!o&&S.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),S.jsx("form",{onSubmit:d,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),S.jsx("div",{className:"flex justify-center gap-2 mb-4",children:f.map(p=>S.jsx("button",{type:"button",onClick:()=>c(p),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===p?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:p},p))}),S.jsx("input",{id:"occasion",type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),S.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(Fd,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},CJ=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:r,onGenerateVisual:o,generatingVisualFor:l,selectedOutfit:c,onSelectOutfit:d})=>{const[f,p]=B.useState(null);B.useEffect(()=>{if(!f)return;const T=b=>{b.key==="Escape"&&p(null)};return window.addEventListener("keydown",T),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",T),document.body.style.overflow="auto"}},[f]);const v=T=>{const{id:b,description:C}=T,N=b?b.trim():"",D=C?C.trim().toLowerCase():"";let L=e.find(U=>U.id===N);if(L)return L;let k=n.find(U=>U.id===N);if(k)return k;if(N&&(L=e.find(U=>U.analysis.toLowerCase().includes(N.toLowerCase())),L)||D&&(L=e.find(U=>{const H=U.analysis.toLowerCase();return H.includes(D)||D.includes(H)}),L))return L};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mt-10 space-y-8",children:t.map((T,b)=>{const C=i.some(L=>L.titre===T.titre&&L.description===T.description),N=l===T.titre,D=(c==null?void 0:c.titre)===T.titre&&(c==null?void 0:c.description)===T.description;return S.jsxs("div",{className:`bg-snow dark:bg-onyx border-2 rounded-lg p-5 transition-all duration-300 hover:shadow-lg relative ${D?"border-gold shadow-gold/30 shadow-lg":"border-black/10 dark:border-white/10 hover:border-gold/50"}`,children:[D&&S.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gold to-gold-dark text-onyx px-4 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1.5",children:[S.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Tenue choisie"]}),S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:T.titre}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>d(T),className:`p-1.5 transition-colors ${D?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"}`,"aria-label":D?"Dslectionner cette tenue":"Choisir cette tenue",title:D?"Dslectionner cette tenue":"Choisir cette tenue",children:S.jsx("svg",{className:"w-6 h-6",fill:D?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),S.jsx("button",{onClick:()=>o(T),disabled:N,className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors disabled:cursor-not-allowed","aria-label":"Gnrer un rendu visuel",title:"Gnrer un rendu visuel",children:N?S.jsx(UT,{className:"h-5 w-5"}):S.jsx(H7,{})}),S.jsx("button",{onClick:()=>r(T),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":C?"Retirer des favoris":"Ajouter aux favoris",children:C?S.jsx(Bd,{className:"w-6 h-6 text-gold"}):S.jsx(zT,{className:"w-6 h-6"})})]})]}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:T.description}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:T.vetements.map((L,k)=>{const U=v(L),H=U?U.imageSrc:null;return S.jsx("button",{onClick:()=>H&&p(H),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!H,"aria-label":`Agrandir l'image de : ${L.description}`,title:L.description,children:H?S.jsx("img",{src:H,alt:L.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx($D,{})})},k)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:T.vetements.map((L,k)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:L.description},k))})]},b)})}),f&&S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>p(null),role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"relative",onClick:T=>T.stopPropagation(),children:[S.jsx("img",{src:f,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),S.jsx("button",{onClick:()=>p(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:S.jsx(FT,{})})]})})]})},ym=B.memo(CJ),IJ=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:r,onRemoveSet:o,onDelete:l})=>{const[c,d]=B.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[f,p]=B.useState(!1),v=e.find(D=>D.itemIds.includes(t.id));B.useEffect(()=>{d({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),B.useEffect(()=>{const D=U=>{U.key==="Escape"&&n()};document.body.style.overflow="hidden",window.addEventListener("keydown",D);const L=document.querySelector('[role="dialog"]'),k=L==null?void 0:L.querySelector("button, input, textarea, select");return k==null||k.focus(),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",D)}},[n]);const T=D=>{const{name:L,value:k}=D.target;d(U=>({...U,[L]:k}))},b=D=>{D.preventDefault(),i({...t,...c}),p(!0),setTimeout(()=>{p(!1)},2e3)},C=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},N=D=>{D.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:D=>D.stopPropagation(),children:[S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),S.jsx("button",{onClick:N,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Bd,{className:"w-6 h-6 text-red-500"}):S.jsx(zT,{className:"w-6 h-6"})}),S.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:S.jsx(FT,{})})]}),S.jsxs("form",{onSubmit:b,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[S.jsxs("div",{className:"space-y-4 flex-grow",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),S.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),S.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(D=>S.jsx("option",{value:D,children:D},D))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),S.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),S.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),v&&S.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),S.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:v.name,children:v.name})]}),S.jsxs("button",{type:"button",onClick:()=>{o(v.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[S.jsx(G7,{}),S.jsx("span",{children:"Dissocier"})]})]})]}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[S.jsxs("button",{type:"button",onClick:C,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[S.jsx(sg,{}),"Supprimer"]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsxs("button",{type:"button",onClick:()=>r(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[S.jsx(Fd,{}),"Crer une tenue"]}),S.jsx("button",{type:"submit",disabled:f,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${f?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:f?S.jsxs(S.Fragment,{children:[S.jsx(BT,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},x2=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[r,o]=B.useState(3),[l,c]=B.useState(""),[d,f]=B.useState(""),p=v=>{v.preventDefault();const T=l||"",b=d?parseFloat(d):void 0;T.trim()&&r>0&&n(r,T,b)};return S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),S.jsx("input",{id:"days",type:"number",value:r,onChange:v=>o(parseInt(v.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{id:"weight",type:"number",value:d,onChange:v=>f(v.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i}),S.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),S.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),S.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||r<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(KD,{}),i?"Analyse du poids...":"Gnrer la valise"]})]})},C2=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=r=>{const{id:o,description:l}=r;let c=e.find(f=>f.id===o);if(c)return c;let d=n.find(f=>f.id===o);if(d)return d;if(c=e.find(f=>f.analysis===o),c||(c=e.find(f=>f.analysis===l),c))return c};return S.jsx("div",{className:"mt-10",children:S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((r,o)=>{const l=i(r),c=l?l.imageSrc:null;return S.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:r.description,children:[c?S.jsx("img",{src:c,alt:r.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx($D,{})}),S.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:S.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:r.description})})]},o)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((r,o)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:r.description},o))})]})})},Ps={light:()=>{"vibrate"in navigator&&navigator.vibrate(10)},medium:()=>{"vibrate"in navigator&&navigator.vibrate(20)},success:()=>{"vibrate"in navigator&&navigator.vibrate([10,50,10])},error:()=>{"vibrate"in navigator&&navigator.vibrate([50,30,50])}},RJ=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,r]=B.useState(!1),o=B.useRef(null),l=B.useRef(null),c=v=>{const T=Array.from(v.target.files||[]);T.length>0&&(Ps.success(),t(T),r(!1)),v.target.value=""},d=()=>{Ps.medium(),r(!i)},f=()=>{var v;(v=o.current)==null||v.click()},p=()=>{var v;(v=l.current)==null||v.click()};return n?null:S.jsxs(S.Fragment,{children:[S.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:c,className:"hidden"}),S.jsx("input",{ref:l,type:"file",accept:"image/*",multiple:!0,onChange:c,className:"hidden"}),i&&S.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>r(!1)}),S.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[S.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[S.jsxs("button",{type:"button",onClick:f,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:S.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),S.jsxs("button",{type:"button",onClick:p,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),S.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),S.jsx("button",{onClick:d,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${i?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":i?"Fermer le menu":"Ajouter un vtement",children:e?S.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},NJ=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:r,isAnalyzingWardrobe:o,clothingCount:l,favoriteOutfitCount:c})=>S.jsxs("div",{className:"space-y-4 pb-24",children:[S.jsxs("div",{className:"text-center py-6",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),S.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&S.jsx("button",{onClick:t,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?S.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),S.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),S.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),S.jsx("div",{className:"px-4 pt-6",children:S.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[S.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),S.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[S.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),S.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),S.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-green-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),S.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),S.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsxs("div",{className:"text-red-500",children:[S.jsx(zT,{})," "]}),S.jsx("p",{className:"text-2xl font-bold",children:c}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),PJ=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return S.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:S.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(r=>{const o=t===r.id;return S.jsxs("button",{onClick:()=>{Ps.light(),e(r.id)},className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[S.jsxs("div",{className:"relative",children:[r.icon,r.count!==null&&r.count>0&&S.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:r.count})]}),S.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:r.label})]},r.id)})})})},DJ=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),S.jsx("div",{className:"grid gap-2",children:t.strengths.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-green-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),S.jsx("div",{className:"grid gap-2",children:t.gaps.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[S.jsx("span",{children:""})," Pices recommandes"]}),S.jsx("div",{className:"grid gap-4",children:t.suggestions.map((r,o)=>S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[S.jsxs("div",{className:"flex justify-between items-start mb-3",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-lg",children:r.description}),S.jsx("p",{className:"text-sm text-gray-500",children:r.category})]}),S.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[r.priority]}`,children:i[r.priority]})]}),S.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[S.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",r.reason]}),r.estimatedPrice&&S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.estimatedPrice]})]},o))})]})]})]})})};var MJ=kJ()?B.useLayoutEffect:B.useEffect;function kJ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function VJ(){var t=B.useState(Object.create(null)),e=t[1];return B.useCallback(function(){e(Object.create(null))},[])}var LJ=S1(),OJ=function(e){var n=e.children,i=e.type,r=i===void 0?"reach-portal":i,o=B.useRef(null),l=B.useRef(null),c=VJ();return MJ(function(){if(o.current){var d=o.current.ownerDocument;return l.current=d==null?void 0:d.createElement(r),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[r,c]),l.current?LJ.createPortal(n,l.current):B.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ye=function(){return ye=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ye.apply(this,arguments)};function SE(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ft(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o}function $t(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var Lt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Lt||(Lt={}));var Iu;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Iu||(Iu={}));var a_=Lt.Start,bE=Lt.Stop,mf=Lt.Raise,hg=Lt.Send,I2=Lt.Cancel,UJ=Lt.NullEvent,wE=Lt.Assign;Lt.After;Lt.DoneState;var R2=Lt.Log,FJ=Lt.Init,l_=Lt.Invoke;Lt.ErrorExecution;var MR=Lt.ErrorPlatform,BJ=Lt.ErrorCustom,N2=Lt.Update,zJ=Lt.Choose,qJ=Lt.Pure,P2=".",kR={},u_="xstate.guard",GJ="",Qh;function AE(t,e,n){n===void 0&&(n=P2);var i=Td(t,n),r=Td(e,n);return Rt(r)?Rt(i)?r===i:!1:Rt(i)?i in r:Object.keys(i).every(function(o){return o in r?AE(i[o],r[o]):!1})}function D2(t){try{return Rt(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function c_(t,e){try{return Hu(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function HJ(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Td(t,e){if(HJ(t))return t.value;if(Hu(t))return vm(t);if(typeof t!="string")return t;var n=c_(t,e);return vm(n)}function vm(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function rd(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function VR(t,e,n){var i,r,o={};try{for(var l=ft(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];n(f)&&(o[d]=e(f,d,t))}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}var jJ=function(t){return function(e){var n,i,r=e;try{for(var o=ft(t),l=o.next();!l.done;l=o.next()){var c=l.value;r=r[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}};function $J(t,e){return function(n){var i,r,o=n;try{for(var l=ft(t),c=l.next();!c.done;c=l.next()){var d=c.value;o=o[e][d]}}catch(f){i={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}}function Rp(t){if(!t)return[[]];if(Rt(t))return[[t]];var e=Xt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:Rp(t[n]).map(function(r){return[n].concat(r)})}));return e}function Xt(t){var e;return(e=[]).concat.apply(e,$t([],vt(t),!1))}function M2(t){return Hu(t)?t:[t]}function Dr(t){return t===void 0?[]:M2(t)}function _m(t,e,n){var i,r;if(bt(t))return t(e,n.data);var o={};try{for(var l=ft(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,f=t[d];bt(f)?o[d]=f(e,n.data):o[d]=f}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}function KJ(t){return/^(done|error)\./.test(t)}function LR(t){return!!(t instanceof Promise||t!==null&&(bt(t)||typeof t=="object")&&bt(t.then))}function YJ(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function JJ(t,e){var n,i,r=vt([[],[]],2),o=r[0],l=r[1];try{for(var c=ft(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}function k2(t,e){return rd(t.states,function(n,i){if(n){var r=(Rt(e)?void 0:e[i])||(n?n.current:void 0);if(r)return{current:r,states:k2(n,r)}}})}function WJ(t,e){return{current:e,states:k2(t,e)}}function OR(t,e,n,i){var r=t&&n.reduce(function(o,l){var c,d,f=l.assignment,p={state:i,action:l,_event:e},v={};if(bt(f))v=f(o,e.data,p);else try{for(var T=ft(Object.keys(f)),b=T.next();!b.done;b=T.next()){var C=b.value,N=f[C];v[C]=bt(N)?N(o,e.data,p):N}}catch(D){c={error:D}}finally{try{b&&!b.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},o,v)},t);return r}var QJ=function(){};function Hu(t){return Array.isArray(t)}function bt(t){return typeof t=="function"}function Rt(t){return typeof t=="string"}function V2(t,e){if(t)return Rt(t)?{type:u_,name:t,predicate:e?e[t]:void 0}:bt(t)?{type:u_,name:t.name,predicate:t}:t}function XJ(t){try{return"subscribe"in t&&bt(t.subscribe)}catch{return!1}}var Lo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Qh={},Qh[Lo]=function(){return this},Qh[Symbol.observable]=function(){return this};function Ru(t){return!!t&&"__xstatenode"in t}function ZJ(t){return!!t&&typeof t.send=="function"}function pg(t,e){return Rt(t)||typeof t=="number"?ye({type:t},e):t}function Kn(t,e){if(!Rt(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=pg(t);return ye({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function jl(t,e){var n=M2(e).map(function(i){return typeof i>"u"||typeof i=="string"||Ru(i)?{target:i,event:t}:ye(ye({},i),{event:t})});return n}function eW(t){if(!(t===void 0||t===GJ))return Dr(t)}function L2(t,e,n,i,r){var o=t.options.guards,l={state:r,cond:e,_event:i};if(e.type===u_)return((o==null?void 0:o[e.name])||e.predicate)(n,i.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function O2(t){return typeof t=="string"?{type:t}:t}function Np(t,e,n){var i=function(){},r=typeof t=="object",o=r?t:null;return{next:((r?t.next:t)||i).bind(o),error:((r?t.error:e)||i).bind(o),complete:((r?t.complete:n)||i).bind(o)}}function Xh(t,e){return"".concat(t,":invocation[").concat(e,"]")}function d_(t){return(t.type===mf||t.type===hg&&t.to===Iu.Internal)&&typeof t.delay!="number"}var gu=Kn({type:FJ});function f_(t,e){return e&&e[t]||void 0}function $d(t,e){var n;if(Rt(t)||typeof t=="number"){var i=f_(t,e);bt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(bt(t))n={type:t.name||t.toString(),exec:t};else{var i=f_(t.type,e);if(bt(i))n=ye(ye({},t),{exec:i});else if(i){var r=i.type||t.type;n=ye(ye(ye({},i),t),{type:r})}else n=t}return n}var Oo=function(t,e){if(!t)return[];var n=Hu(t)?t:[t];return n.map(function(i){return $d(i,e)})};function xE(t){var e=$d(t);return ye(ye({id:Rt(t)?t:e.id},e),{type:e.type})}function tW(t,e){return{type:mf,event:typeof t=="function"?t:pg(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function nW(t,e,n,i){var r={_event:n},o=Kn(bt(t.event)?t.event(e,n.data,r):t.event),l;if(Rt(t.delay)){var c=i&&i[t.delay];l=bt(c)?c(e,n.data,r):c}else l=bt(t.delay)?t.delay(e,n.data,r):t.delay;return ye(ye({},t),{type:mf,_event:o,delay:l})}function iW(t,e){return{to:e?e.to:void 0,type:hg,event:bt(t)?t:pg(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:bt(t)?t.name:D2(t)}}function rW(t,e,n,i){var r={_event:n},o=Kn(bt(t.event)?t.event(e,n.data,r):t.event),l;if(Rt(t.delay)){var c=i&&i[t.delay];l=bt(c)?c(e,n.data,r):c}else l=bt(t.delay)?t.delay(e,n.data,r):t.delay;var d=bt(t.to)?t.to(e,n.data,r):t.to;return ye(ye({},t),{to:d,_event:o,event:o.data,delay:l})}var sW=function(t,e,n){return ye(ye({},t),{value:Rt(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},oW=function(t){return{type:I2,sendId:t}};function aW(t){var e=xE(t);return{type:Lt.Start,activity:e,exec:void 0}}function lW(t){var e=bt(t)?t:xE(t);return{type:Lt.Stop,activity:e,exec:void 0}}function uW(t,e,n){var i=bt(t.activity)?t.activity(e,n.data):t.activity,r=typeof i=="string"?{id:i}:i,o={type:Lt.Stop,activity:r};return o}var cW=function(t){return{type:wE,assignment:t}};function dW(t,e){var n=e?"#".concat(e):"";return"".concat(Lt.After,"(").concat(t,")").concat(n)}function Zh(t,e){var n="".concat(Lt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function Pp(t,e){var n="".concat(Lt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function sd(t,e){var n="".concat(Lt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var fW=function(t){var e,n,i=[];try{for(var r=ft(t),o=r.next();!o.done;o=r.next())for(var l=o.value,c=0;c<l.actions.length;){if(l.actions[c].type===wE){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i};function Tm(t,e,n,i,r,o,l){l===void 0&&(l=!1);var c=l?[]:fW(r),d=c.length?OR(n,i,c,e):n,f=l?[n]:void 0,p=[];function v(C,N){var D;switch(N.type){case mf:{var L=nW(N,d,i,t.options.delays);return o&&typeof L.delay=="number"&&o(L,d,i),L}case hg:var k=rW(N,d,i,t.options.delays);return o&&k.to!==Iu.Internal&&(C==="entry"?p.push(k):o(k,d,i)),k;case R2:{var U=sW(N,d,i);return o==null||o(U,d,i),U}case zJ:{var H=N,K=(D=H.conds.find(function(ee){var se=V2(ee.cond,t.options.guards);return!se||L2(t,se,d,i,o?void 0:e)}))===null||D===void 0?void 0:D.actions;if(!K)return[];var G=vt(Tm(t,e,d,i,[{type:C,actions:Oo(Dr(K),t.options.actions)}],o,l),2),I=G[0],R=G[1];return d=R,f==null||f.push(d),I}case qJ:{var K=N.get(d,i.data);if(!K)return[];var P=vt(Tm(t,e,d,i,[{type:C,actions:Oo(Dr(K),t.options.actions)}],o,l),2),V=P[0],F=P[1];return d=F,f==null||f.push(d),V}case bE:{var U=uW(N,d,i);return o==null||o(U,n,i),U}case wE:{d=OR(d,i,[N],o?void 0:e),f==null||f.push(d);break}default:var q=$d(N,t.options.actions),z=q.exec;if(o)o(q,d,i);else if(z&&f){var xe=f.length-1,De=ye(ye({},q),{exec:function(ee){for(var se=[],me=1;me<arguments.length;me++)se[me-1]=arguments[me];z.apply(void 0,$t([f[xe]],vt(se),!1))}});q=De}return q}}function T(C){var N,D,L=[];try{for(var k=ft(C.actions),U=k.next();!U.done;U=k.next()){var H=U.value,K=v(C.type,H);K&&(L=L.concat(K))}}catch(G){N={error:G}}finally{try{U&&!U.done&&(D=k.return)&&D.call(k)}finally{if(N)throw N.error}}return p.forEach(function(G){o(G,d,i)}),p.length=0,L}var b=Xt(r.map(T));return[b,d]}var eu=function(t,e){var n=e(t);return n};function U2(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Lo]=function(){return this},e}function hW(t,e,n,i){var r,o=O2(t.src),l=(r=e==null?void 0:e.options.services)===null||r===void 0?void 0:r[o.type],c=t.data?_m(t.data,n,i):void 0,d=l?F2(l,t.id,c):U2(t.id);return d.meta=t,d}function F2(t,e,n){var i=U2(e);if(i.deferred=!0,Ru(t)){var r=i.state=eu(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return r}}return i}function pW(t){try{return typeof t.send=="function"}catch{return!1}}function mW(t){return pW(t)&&"id"in t}function gW(t){var e;return ye((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Lo]=function(){return this},e),t)}var Em=function(t){return t.type==="atomic"||t.type==="final"};function B2(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Kd(t){return B2(t).filter(function(e){return e.type!=="history"})}function z2(t){var e=[t];return Em(t)?e:e.concat(Xt(Kd(t).map(z2)))}function od(t,e){var n,i,r,o,l,c,d,f,p=new Set(t),v=h_(p),T=new Set(e);try{for(var b=ft(T),C=b.next();!C.done;C=b.next())for(var N=C.value,D=N.parent;D&&!T.has(D);)T.add(D),D=D.parent}catch(P){n={error:P}}finally{try{C&&!C.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}var L=h_(T);try{for(var k=ft(T),U=k.next();!U.done;U=k.next()){var N=U.value;if(N.type==="compound"&&(!L.get(N)||!L.get(N).length))v.get(N)?v.get(N).forEach(function(V){return T.add(V)}):N.initialStateNodes.forEach(function(V){return T.add(V)});else if(N.type==="parallel")try{for(var H=(l=void 0,ft(Kd(N))),K=H.next();!K.done;K=H.next()){var G=K.value;T.has(G)||(T.add(G),v.get(G)?v.get(G).forEach(function(V){return T.add(V)}):G.initialStateNodes.forEach(function(V){return T.add(V)}))}}catch(V){l={error:V}}finally{try{K&&!K.done&&(c=H.return)&&c.call(H)}finally{if(l)throw l.error}}}}catch(P){r={error:P}}finally{try{U&&!U.done&&(o=k.return)&&o.call(k)}finally{if(r)throw r.error}}try{for(var I=ft(T),R=I.next();!R.done;R=I.next())for(var N=R.value,D=N.parent;D&&!T.has(D);)T.add(D),D=D.parent}catch(P){d={error:P}}finally{try{R&&!R.done&&(f=I.return)&&f.call(I)}finally{if(d)throw d.error}}return T}function q2(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Em(i))return i.key}else return{}}var r={};return n.forEach(function(o){r[o.key]=q2(o,e)}),r}function h_(t){var e,n,i=new Map;try{for(var r=ft(t),o=r.next();!o.done;o=r.next()){var l=o.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function yW(t,e){var n=od([t],e);return q2(t,h_(n))}function ad(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function vW(t){return $t([],vt(new Set(Xt($t([],vt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Dp(t,e){return e.type==="compound"?Kd(e).some(function(n){return n.type==="final"&&ad(t,n)}):e.type==="parallel"?Kd(e).every(function(n){return Dp(t,n)}):!1}function _W(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function UR(t){return new Set(Xt(t.map(function(e){return e.tags})))}function G2(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Rt(t)||Rt(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(r){return G2(t[r],e[r])})}function TW(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function EW(t,e){var n=t.exec,i=ye(ye({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var _r=(function(){function t(e){var n=this,i;this.actions=[],this.activities=kR,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||kR,this.meta=_W(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return vW(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=gu;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=gu;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),Rt(e))return[e];var r=Object.keys(e);return r.concat.apply(r,$t([],vt(r.map(function(o){return i.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=SE(e,["configuration","transitions","tags","machine"]);return ye(ye({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return AE(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;QJ(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(r){return r.target!==void 0||r.actions.length})},t})(),SW={deferEvents:!1},FR=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ye(ye({},SW),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),Qv=new Map,bW=0,Hc={bookId:function(){return"x:".concat(bW++)},register:function(t,e){return Qv.set(t,e),t},get:function(t){return Qv.get(t)},free:function(t){Qv.delete(t)}};function CE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function wW(){var t=CE();if(t&&"__xstate__"in t)return t.__xstate__}function AW(t){if(CE()){var e=wW();e&&e.register(t)}}function xW(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,r=[],o=!1,l=function(){if(!o){for(o=!0;r.length>0;){var f=r.shift();n=t.transition(n,f,d),i.forEach(function(p){return p.next(n)})}o=!1}},c=gW({id:e.id,send:function(f){r.push(f),l()},getSnapshot:function(){return n},subscribe:function(f,p,v){var T=Np(f,p,v);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var CW={sync:!1,autoForward:!1},Bn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Bn||(Bn={}));var IW=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Bn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(p,v){if(Hu(p))return i.batch(p),i.state;var T=Kn(pg(p,v));if(i.status===Bn.Stopped)return i.state;if(i.status!==Bn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var b=i._nextState(T);i.update(b,T)}),i._state},this.sendTo=function(p,v,T){var b=i.parent&&(v===Iu.Parent||i.parent.id===v),C=b?i.parent:Rt(v)?v===Iu.Internal?i:i.children.get(v)||Hc.get(v):ZJ(v)?v:void 0;if(!C){if(!b)throw new Error("Unable to send event to child '".concat(v,"' from service '").concat(i.id,"'."));return}if("machine"in C){if(i.status!==Bn.Stopped||i.parent!==C||i.state.done){var N=ye(ye({},p),{name:p.name===BJ?"".concat(sd(i.id)):p.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([C,N]):C.send(N)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([C,p.data]):C.send(p.data)},this._exec=function(p,v,T,b){b===void 0&&(b=i.machine.options.actions);var C=p.exec||f_(p.type,b),N=bt(C)?C:C?C.exec:p.exec;if(N)try{return N(v,T.data,i.machine.config.predictableActionArguments?{action:p,_event:T}:{action:p,state:i.state,_event:T})}catch(xe){throw i.parent&&i.parent.send({type:"xstate.error",data:xe}),xe}switch(p.type){case mf:{var D=p;i.defer(D);break}case hg:var L=p;if(typeof L.delay=="number"){i.defer(L);return}else L.to?i.sendTo(L._event,L.to,T===gu):i.send(L._event);break;case I2:i.cancel(p.sendId);break;case a_:{if(i.status!==Bn.Running)return;var k=p.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[k.id||k.type])break;if(k.type===Lt.Invoke){var U=O2(k.src),H=i.machine.options.services?i.machine.options.services[U.type]:void 0,K=k.id,G=k.data,I="autoForward"in k?k.autoForward:!!k.forward;if(!H)return;var R=G?_m(G,v,T):void 0;if(typeof H=="string")return;var P=bt(H)?H(v,T.data,{data:R,src:U,meta:k.meta}):H;if(!P)return;var V=void 0;Ru(P)&&(P=R?P.withContext(R):P,V={autoForward:I}),i.spawn(P,K,V)}else i.spawnActivity(k);break}case bE:{i.stopChild(p.activity.id);break}case R2:var F=p,q=F.label,z=F.value;q?i.logger(q,z):i.logger(z);break}};var r=ye(ye({},t.defaultOptions),n),o=r.clock,l=r.logger,c=r.parent,d=r.id,f=d!==void 0?d:e.id;this.id=f,this.logger=l,this.clock=o,this.parent=c,this.options=r,this.scheduler=new FR({deferEvents:this.options.deferEvents}),this.sessionId=Hc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:eu(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,r;try{for(var o=ft(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,r,o,l,c,d,f,p,v=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===gu)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(P){v.state.children[P.id]=P}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var b=ft(this.eventListeners),C=b.next();!C.done;C=b.next()){var N=C.value;N(e.event)}}catch(P){i={error:P}}finally{try{C&&!C.done&&(r=b.return)&&r.call(b)}finally{if(i)throw i.error}}try{for(var D=ft(this.listeners),L=D.next();!L.done;L=D.next()){var N=L.value;N(e,e.event)}}catch(P){o={error:P}}finally{try{L&&!L.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}try{for(var k=ft(this.contextListeners),U=k.next();!U.done;U=k.next()){var H=U.value;H(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(P){c={error:P}}finally{try{U&&!U.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(this.state.done){var K=e.configuration.find(function(P){return P.type==="final"&&P.parent===v.machine}),G=K&&K.doneData?_m(K.doneData,e.context,n):void 0;this._doneEvent=Pp(this.id,G);try{for(var I=ft(this.doneListeners),R=I.next();!R.done;R=I.next()){var N=R.value;N(this._doneEvent)}}catch(P){f={error:P}}finally{try{R&&!R.done&&(p=I.return)&&p.call(I)}finally{if(f)throw f.error}}this._stop(),this._stopChildren(),Hc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Bn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var r=this,o=Np(e,n,i);this.listeners.add(o.next),this.status!==Bn.NotStarted&&o.next(this.state);var l=function(){r.doneListeners.delete(l),r.stopListeners.delete(l),o.complete()};return this.status===Bn.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){r.listeners.delete(o.next),r.doneListeners.delete(l),r.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Bn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Bn.Running)return this;this.machine._init(),Hc.register(this.sessionId,this),this.initialized=!0,this.status=Bn.Running;var i=e===void 0?this.initialState:eu(this,function(){return TW(e)?n.machine.resolveState(e):n.machine.resolveState(_r.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,gu)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){bt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,r,o,l,c,d,f,p;try{for(var v=ft(this.listeners),T=v.next();!T.done;T=v.next()){var b=T.value;this.listeners.delete(b)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}try{for(var C=ft(this.stopListeners),N=C.next();!N.done;N=C.next()){var b=N.value;b(),this.stopListeners.delete(b)}}catch(I){i={error:I}}finally{try{N&&!N.done&&(r=C.return)&&r.call(C)}finally{if(i)throw i.error}}try{for(var D=ft(this.contextListeners),L=D.next();!L.done;L=D.next()){var b=L.value;this.contextListeners.delete(b)}}catch(I){o={error:I}}finally{try{L&&!L.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}try{for(var k=ft(this.doneListeners),U=k.next();!U.done;U=k.next()){var b=U.value;this.doneListeners.delete(b)}}catch(I){c={error:I}}finally{try{U&&!U.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Bn.Stopped,this._initialState=void 0;try{for(var H=ft(Object.keys(this.delayedEventsMap)),K=H.next();!K.done;K=H.next()){var G=K.value;this.clock.clearTimeout(this.delayedEventsMap[G])}}catch(I){f={error:I}}finally{try{K&&!K.done&&(p=H.return)&&p.call(H)}finally{if(f)throw f.error}}this.scheduler.clear(),this.scheduler=new FR({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var r=Kn({type:"xstate.stop"}),o=eu(e,function(){var l=Xt($t([],vt(e.state.configuration),!1).sort(function(v,T){return T.order-v.order}).map(function(v){return Oo(v.onExit,e.machine.options.actions)})),c=vt(Tm(e.machine,e.state,e.state.context,r,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],f=c[1],p=new _r({value:e.state.value,context:f,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(v){return!d_(v)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return p.changed=!0,p});e.update(o,r),e._stopChildren(),Hc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Bn.NotStarted&&this.options.deferEvents)){if(this.status!==Bn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var r,o,l=n.state,c=!1,d=[],f=function(b){var C=Kn(b);n.forward(C),l=eu(n,function(){return n.machine.transition(l,C,void 0,i||void 0)}),d.push.apply(d,$t([],vt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(N){return EW(N,l)})),!1)),c=c||!!l.changed};try{for(var p=ft(e),v=p.next();!v.done;v=p.next()){var T=v.value;f(T)}}catch(b){r={error:b}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}l.changed=c,l.actions=d,n.update(l,Kn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var r=Kn(e);if(r.name.indexOf(MR)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(MR)===0}))throw r.data.data;var o=eu(this,function(){return i.machine.transition(i.state,r,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var r=ft(this.forwardTo),o=r.next();!o.done;o=r.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),bt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Bn.Running)return F2(e,n);if(LR(e))return this.spawnPromise(Promise.resolve(e),n);if(bt(e))return this.spawnCallback(e,n);if(mW(e))return this.spawnActor(e,n);if(XJ(e))return this.spawnObservable(e,n);if(Ru(e))return this.spawnMachine(e,ye(ye({},i),{id:n}));if(YJ(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var r=new t(e,ye(ye({},this.options),{parent:this,id:n.id||e.id})),o=ye(ye({},CW),n);o.sync&&r.onTransition(function(c){i.send(N2,{state:c,id:r.id})});var l=r;return this.children.set(r.id,l),o.autoForward&&this.forwardTo.add(r.id),r.onDone(function(c){i.removeChild(r.id),i.send(Kn(c,{origin:r.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=xW(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,r=this,o=!1,l;e.then(function(d){o||(l=d,r.removeChild(n),r.send(Kn(Pp(n,d),{origin:n})))},function(d){if(!o){r.removeChild(n);var f=sd(n,d);try{r.send(Kn(f,{origin:n}))}catch{r.devTools&&r.devTools.send(f,r.state),r.machine.strict&&r.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,f,p){var v=Np(d,f,p),T=!1;return e.then(function(b){T||(v.next(b),!T&&v.complete())},function(b){T||v.error(b)}),{unsubscribe:function(){return T=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[Lo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,r=this,o=!1,l=new Set,c=new Set,d,f=function(T){d=T,c.forEach(function(b){return b(T)}),!o&&r.send(Kn(T,{origin:n}))},p;try{p=e(f,function(T){l.add(T)})}catch(T){this.send(sd(n,T))}if(LR(p))return this.spawnPromise(p,n);var v=(i={id:n,send:function(T){return l.forEach(function(b){return b(T)})},subscribe:function(T){var b=Np(T);return c.add(b.next),{unsubscribe:function(){c.delete(b.next)}}},stop:function(){o=!0,bt(p)&&p()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[Lo]=function(){return this},i);return this.children.set(n,v),v},t.prototype.spawnObservable=function(e,n){var i,r=this,o,l=e.subscribe(function(d){o=d,r.send(Kn(d,{origin:n}))},function(d){r.removeChild(n),r.send(Kn(sd(n,d),{origin:n}))},function(){r.removeChild(n),r.send(Kn(Pp(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,f,p){return e.subscribe(d,f,p)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},i[Lo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[Lo]=function(){return this},i))},t.prototype.attachDev=function(){var e=CE();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ye(ye({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ye({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}AW(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Lo]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Bn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=H2,t})();function H2(t,e){var n=new IW(t,e);return n}function RW(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function ep(t){return ye(ye({type:l_},t),{toJSON:function(){t.onDone,t.onError;var e=SE(t,["onDone","onError"]);return ye(ye({},e),{type:l_,src:RW(t.src)})}})}var tp="",p_="#",Xv="*",$l={},Kl=function(t){return t[0]===p_},NW=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},PW=(function(){function t(e,n,i,r){i===void 0&&(i="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(NW(),n),this.parent=r==null?void 0:r.parent,this.key=this.config.key||(r==null?void 0:r.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:P2),this.id=this.config.id||$t([this.machine.key],vt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?rd(this.config.states,function(f,p){var v,T=new t(f,{},void 0,{parent:o,key:p});return Object.assign(o.idMap,ye((v={},v[T.id]=T,v),T.idMap)),T}):$l;var c=0;function d(f){var p,v;f.order=c++;try{for(var T=ft(B2(f)),b=T.next();!b.done;b=T.next()){var C=b.value;d(C)}}catch(N){p={error:N}}finally{try{b&&!b.done&&(v=T.return)&&v.call(T)}finally{if(p)throw p.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(f){var p=f.event;return p===tp}):tp in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Dr(this.config.entry||this.config.onEntry).map(function(f){return $d(f)}),this.onExit=Dr(this.config.exit||this.config.onExit).map(function(f){return $d(f)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Dr(this.config.invoke).map(function(f,p){var v,T;if(Ru(f)){var b=Xh(o.id,p);return o.machine.options.services=ye((v={},v[b]=f,v),o.machine.options.services),ep({src:b,id:b})}else if(Rt(f.src)){var b=f.id||Xh(o.id,p);return ep(ye(ye({},f),{id:b,src:f.src}))}else if(Ru(f.src)||bt(f.src)){var b=f.id||Xh(o.id,p);return o.machine.options.services=ye((T={},T[b]=f.src,T),o.machine.options.services),ep(ye(ye({id:b},f),{src:b}))}else{var C=f.src;return ep(ye(ye({id:Xh(o.id,p)},f),{src:C}))}}),this.activities=Dr(this.config.activities).concat(this.invoke).map(function(f){return xE(f)}),this.transition=this.transition.bind(this),this.tags=Dr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||z2(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,r=i.actions,o=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:ye(ye({},r),e.actions),activities:ye(ye({},o),e.activities),guards:ye(ye({},l),e.guards),services:ye(ye({},c),e.services),delays:ye(ye({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return bt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:rd(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===tp,i=this.transitions.filter(function(r){var o=r.eventType===e;return n?o:o||r.eventType===Xv});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(o,l){var c=bt(o)?"".concat(e.id,":delay[").concat(l,"]"):o,d=dW(c,e.id);return e.onEntry.push(iW(d,{delay:o})),e.onExit.push(oW(d)),d},r=Hu(n)?n.map(function(o,l){var c=i(o.delay,l);return ye(ye({},o),{event:c})}):Xt(Object.keys(n).map(function(o,l){var c=n[o],d=Rt(c)?{target:c}:c,f=isNaN(+o)?o:+o,p=i(f,l);return Dr(d).map(function(v){return ye(ye({},v),{event:p,delay:f})})}));return r.map(function(o){var l=o.delay;return ye(ye({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var r=e instanceof _r?e.value:Td(e,this.delimiter);if(Rt(r)){var o=this.getStateNode(r).initial;return o!==void 0?this.getStateNodes((n={},n[r]=o,n)):[this,this.states[r]]}var l=Object.keys(r),c=[this];return c.push.apply(c,$t([],vt(Xt(l.map(function(d){return i.getStateNode(d).getStateNodes(r[d])}))),!1)),c},t.prototype.handles=function(e){var n=D2(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof _r?e:_r.create(e),i=Array.from(od([],this.getStateNodes(n.value)));return new _r(ye(ye({},n),{value:this.resolve(n.value),configuration:i,done:Dp(i,this),tags:UR(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var r=this.getStateNode(e),o=r.next(n,i);return!o||!o.transitions.length?this.next(n,i):o},t.prototype.transitionCompoundNode=function(e,n,i){var r=Object.keys(e),o=this.getStateNode(r[0]),l=o._transition(e[r[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var r,o,l={};try{for(var c=ft(Object.keys(e)),d=c.next();!d.done;d=c.next()){var f=d.value,p=e[f];if(p){var v=this.getStateNode(f),T=v._transition(p,n,i);T&&(l[f]=T)}}}catch(L){r={error:L}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}var b=Object.keys(l).map(function(L){return l[L]}),C=Xt(b.map(function(L){return L.transitions})),N=b.some(function(L){return L.transitions.length>0});if(!N)return this.next(n,i);var D=Xt(Object.keys(l).map(function(L){return l[L].configuration}));return{transitions:C,exitSet:Xt(b.map(function(L){return L.exitSet})),configuration:D,source:n,actions:Xt(Object.keys(l).map(function(L){return l[L].actions}))}},t.prototype._transition=function(e,n,i){return Rt(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Kn(n))},t.prototype.next=function(e,n){var i,r,o=this,l=n.name,c=[],d=[],f;try{for(var p=ft(this.getCandidates(l)),v=p.next();!v.done;v=p.next()){var T=v.value,b=T.cond,C=T.in,N=e.context,D=C?Rt(C)&&Kl(C)?e.matches(Td(this.getStateNodeById(C).path,this.delimiter)):AE(Td(C,this.delimiter),jJ(this.path.slice(0,-2))(e.value)):!0,L=!1;try{L=!b||L2(this.machine,b,N,n,e)}catch(H){throw new Error("Unable to evaluate guard '".concat(b.name||b.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(H.message))}if(L&&D){T.target!==void 0&&(d=T.target),c.push.apply(c,$t([],vt(T.actions),!1)),f=T;break}}}catch(H){i={error:H}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}if(f){if(!d.length)return{transitions:[f],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var k=Xt(d.map(function(H){return o.getRelativeStateNodes(H,e.historyValue)})),U=!!f.internal;return{transitions:[f],exitSet:U?[]:Xt(d.map(function(H){return o.getPotentiallyReenteringNodes(H)})),configuration:k,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,r=e;i&&i!==r;)n.push(i),i=i.parent;return i!==r?[]:(n.push(r),n)},t.prototype.getActions=function(e,n,i,r,o,l,c){var d,f,p,v,T=this,b=l?od([],this.getStateNodes(l.value)):[],C=new Set;try{for(var N=ft(Array.from(e).sort(function(F,q){return F.order-q.order})),D=N.next();!D.done;D=N.next()){var L=D.value;(!ad(b,L)||ad(i.exitSet,L)||L.parent&&C.has(L.parent))&&C.add(L)}}catch(F){d={error:F}}finally{try{D&&!D.done&&(f=N.return)&&f.call(N)}finally{if(d)throw d.error}}try{for(var k=ft(b),U=k.next();!U.done;U=k.next()){var L=U.value;(!ad(e,L)||ad(i.exitSet,L.parent))&&i.exitSet.push(L)}}catch(F){p={error:F}}finally{try{U&&!U.done&&(v=k.return)&&v.call(k)}finally{if(p)throw p.error}}i.exitSet.sort(function(F,q){return q.order-F.order});var H=Array.from(C).sort(function(F,q){return F.order-q.order}),K=new Set(i.exitSet),G=Xt(H.map(function(F){var q=[];if(F.type!=="final")return q;var z=F.parent;if(!z.parent)return q;q.push(Zh(F.id,F.doneData),Zh(z.id,F.doneData?_m(F.doneData,r,o):void 0));var xe=z.parent;return xe.type==="parallel"&&Kd(xe).every(function(De){return Dp(i.configuration,De)})&&q.push(Zh(xe.id)),q})),I=H.map(function(F){var q=F.onEntry,z=F.activities.map(function(xe){return aW(xe)});return{type:"entry",actions:Oo(c?$t($t([],vt(q),!1),vt(z),!1):$t($t([],vt(z),!1),vt(q),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:G.map(function(F){return tW(F)})}),R=Array.from(K).map(function(F){return{type:"exit",actions:Oo($t($t([],vt(F.onExit),!1),vt(F.activities.map(function(q){return lW(q)})),!1),T.machine.options.actions)}}),P=R.concat({type:"transition",actions:Oo(i.actions,this.machine.options.actions)}).concat(I);if(n){var V=Oo(Xt($t([],vt(e),!1).sort(function(F,q){return q.order-F.order}).map(function(F){return F.onExit})),this.machine.options.actions).filter(function(F){return!d_(F)});return P.concat({type:"stop",actions:V})}return P},t.prototype.transition=function(e,n,i,r){e===void 0&&(e=this.initialState);var o=Kn(n),l;if(e instanceof _r)l=i===void 0?e:this.resolveState(_r.from(e,i));else{var c=Rt(e)?this.resolve(vm(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(_r.from(c,d))}if(this.strict&&!this.events.includes(o.name)&&!KJ(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var f=this._transition(l.value,l,o)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},p=od([],this.getStateNodes(l.value)),v=f.configuration.length?od(p,f.configuration):p;return f.configuration=$t([],vt(v),!1),this.resolveTransition(f,l,l.context,r,o)},t.prototype.resolveRaisedTransition=function(e,n,i,r){var o,l=e.actions;return e=this.transition(e,n,void 0,r),e._event=i,e.event=i.data,(o=e.actions).unshift.apply(o,$t([],vt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,r,o){var l,c,d,f,p=this;o===void 0&&(o=gu);var v=e.configuration,T=!n||e.transitions.length>0,b=T?e.configuration:n?n.configuration:[],C=Dp(b,this),N=T?yW(this.machine,v):void 0,D=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,L=this.getActions(new Set(b),C,e,i,o,n,r),k=n?ye({},n.activities):{};try{for(var U=ft(L),H=U.next();!H.done;H=U.next()){var K=H.value;try{for(var G=(d=void 0,ft(K.actions)),I=G.next();!I.done;I=G.next()){var R=I.value;R.type===a_?k[R.activity.id||R.activity.type]=R:R.type===bE&&(k[R.activity.id||R.activity.type]=!1)}}catch(re){d={error:re}}finally{try{I&&!I.done&&(f=G.return)&&f.call(G)}finally{if(d)throw d.error}}}}catch(re){l={error:re}}finally{try{H&&!H.done&&(c=U.return)&&c.call(U)}finally{if(l)throw l.error}}var P=vt(Tm(this,n,i,o,L,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=P[0],F=P[1],q=vt(JJ(V,d_),2),z=q[0],xe=q[1],De=V.filter(function(re){var fe;return re.type===a_&&((fe=re.activity)===null||fe===void 0?void 0:fe.type)===l_}),ee=De.reduce(function(re,fe){return re[fe.activity.id]=hW(fe.activity,p.machine,F,o),re},n?ye({},n.children):{}),se=new _r({value:N||n.value,context:F,_event:o,_sessionid:n?n._sessionid:null,historyValue:N?D?WJ(D,N):void 0:n?n.historyValue:void 0,history:!N||e.source?n:void 0,actions:N?xe:[],activities:N?k:n?n.activities:{},events:[],configuration:b,transitions:e.transitions,children:ee,done:C,tags:UR(b),machine:this}),me=i!==F;se.changed=o.name===N2||me;var Ae=se.history;Ae&&delete Ae.history;var Ce=!C&&(this._transient||v.some(function(re){return re._transient}));if(!T&&(!Ce||o.name===tp))return se;var $=se;if(!C)for(Ce&&($=this.resolveRaisedTransition($,{type:UJ},o,r));z.length;){var Z=z.shift();$=this.resolveRaisedTransition($,Z._event,o,r)}var pe=$.changed||(Ae?!!$.actions.length||me||typeof Ae.value!=typeof $.value||!G2($.value,Ae.value):void 0);return $.changed=pe,$.history=Ae,$},t.prototype.getStateNode=function(e){if(Kl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=Kl(e)?e.slice(p_.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&Kl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=c_(e,this.delimiter).slice(),i=this;n.length;){var r=n.shift();if(!r.length)break;i=i.getStateNode(r)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||$l;switch(this.type){case"parallel":return rd(this.initialStateValue,function(o,l){return o?i.getStateNode(l).resolve(e[l]||o):$l});case"compound":if(Rt(e)){var r=this.getStateNode(e);return r.type==="parallel"||r.type==="compound"?(n={},n[e]=r.initialStateValue,n):e}return Object.keys(e).length?rd(e,function(o,l){return o?i.getStateNode(l).resolve(o):$l}):this.initialStateValue||{};default:return e||$l}},t.prototype.getResolvedPath=function(e){if(Kl(e)){var n=this.machine.idMap[e.slice(p_.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return c_(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=VR(this.states,function(i){return i.initialStateValue||$l},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Em(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;Rt(n.target)?e=Kl(n.target)?vm(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Em(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=Rp(this.initialStateValue);return Xt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=vt(e),i=n[0],r=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var o=this.getStateNode(i);if(o.type==="history")return o.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(r)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:VR(this.states,function(n,i){if(!e)return n.historyValue();var r=Rt(e)?void 0:e[i];return n.historyValue(r||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var r=this.target;return r?Xt(Rp(r).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var o=$J(i.path,"states")(e).current;return Rt(o)?[i.getStateNode(o)]:Xt(Rp(o).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Xt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,r;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=ft(Object.keys(o)),d=c.next();!d.done;d=c.next()){var f=d.value,p=o[f];if(p.states)try{for(var v=(i=void 0,ft(p.events)),T=v.next();!T.done;T=v.next()){var b=T.value;l.add("".concat(b))}}catch(C){i={error:C}}finally{try{T&&!T.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}}catch(C){e={error:C}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!Rt(i))return i;var r=i[0]===n.delimiter;if(r&&!n.parent)return n.getStateNodeByPath(i.slice(1));var o=r?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,i=eW(e.target),r="internal"in e?e.internal:i?i.some(function(d){return Rt(d)&&d[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(i),c=ye(ye({},e),{actions:Oo(Dr(e.actions)),cond:V2(e.cond,o),target:l,source:this,internal:r,eventType:e.event,toJSON:function(){return ye(ye({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,r;if(!this.config.on)r=[];else if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,l=Xv,c=o[l],d=c===void 0?[]:c,f=SE(o,[typeof l=="symbol"?l:l+""]);r=Xt(Object.keys(f).map(function(k){var U=jl(k,f[k]);return U}).concat(jl(Xv,d)))}var p=this.config.always?jl("",this.config.always):[],v=this.config.onDone?jl(String(Zh(this.id)),this.config.onDone):[],T=Xt(this.invoke.map(function(k){var U=[];return k.onDone&&U.push.apply(U,$t([],vt(jl(String(Pp(k.id)),k.onDone)),!1)),k.onError&&U.push.apply(U,$t([],vt(jl(String(sd(k.id)),k.onError)),!1)),U})),b=this.after,C=Xt($t($t($t($t([],vt(v),!1),vt(T),!1),vt(r),!1),vt(p),!1).map(function(k){return Dr(k).map(function(U){return i.formatTransition(U)})}));try{for(var N=ft(b),D=N.next();!D.done;D=N.next()){var L=D.value;C.push(L)}}catch(k){e={error:k}}finally{try{D&&!D.done&&(n=N.return)&&n.call(N)}finally{if(e)throw e.error}}return C},t})();function DW(t,e,n){return n===void 0&&(n=t.context),new PW(t,e,n)}var MW=cW,m_;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(m_||(m_={}));var Ed=B.useLayoutEffect;function BR(t){var e=B.useRef();return e.current||(e.current={v:t()}),e.current.v}var kW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},VW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function LW(t,e){var n,i,r=kW([[],[]],2),o=r[0],l=r[1];try{for(var c=VW(t),d=c.next();!d.done;d=c.next()){var f=d.value;e(f)?o.push(f):l.push(f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}var jc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},zR=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function qR(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function OW(t){var e=B.useRef([]),n=B.useRef([]);Ed(function(){var i=t.subscribe(function(r){var o,l;if(r.actions.length){var c=r.actions.filter(function(v){return typeof v.exec=="function"&&"__effect"in v.exec}),d=jc(LW(c,function(v){return v.exec.__effect===m_.Effect}),2),f=d[0],p=d[1];(o=e.current).push.apply(o,zR([],jc(f.map(function(v){return[v,r]})),!1)),(l=n.current).push.apply(l,zR([],jc(p.map(function(v){return[v,r]})),!1))}});return function(){i.unsubscribe()}},[]),Ed(function(){for(;n.current.length;){var i=jc(n.current.shift(),2),r=i[0],o=i[1];qR(r,o)}}),B.useEffect(function(){for(;e.current.length;){var i=jc(e.current.shift(),2),r=i[0],o=i[1];qR(r,o)}})}var Sd=function(){return Sd=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Sd.apply(this,arguments)},UW=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function FW(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function BW(t,e,n){e===void 0&&(e={});var i=BR(function(){return typeof t=="function"?t():t}),r=e.context,o=e.guards,l=e.actions,c=e.activities,d=e.services,f=e.delays,p=e.state,v=UW(e,["context","guards","actions","activities","services","delays","state"]),T=BR(function(){var b={context:r,guards:o,actions:l,activities:c,services:d,delays:f},C=i.withConfig(b,function(){return Sd(Sd({},i.context),r)});return H2(C,Sd({deferEvents:!0},v))});return Ed(function(){var b;return n&&(b=T.subscribe(FW(n))),function(){b==null||b.unsubscribe()}},[n]),Ed(function(){return T.start(p?_r.create(p):void 0),function(){T.stop()}},[]),Ed(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,o),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,f)},[l,o,c,d,f]),OW(T),T}var zW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o};function qW(t,e){e===void 0&&(e={});var n=B.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=BW(t,e,n),r=zW(B.useState(function(){var c=i.machine.initialState;return e.state?_r.create(e.state):c}),2),o=r[0],l=r[1];return[o,i.send,i]}function on(){return on=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},on.apply(null,arguments)}function yu(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const st={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(st.str(t)||st.num(t))return t===e;if(st.obj(t)&&st.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return st.und(n)?t===e:!0}};function GW(t,e){return n=>(st.arr(n)?n:Object.keys(n)).reduce((i,r)=>{const o=r;return i[o]=t(o),i},t)}function HW(){const t=B.useState(!1),e=t[1];return B.useCallback(()=>e(i=>!i),[])}function ka(t,e){return st.und(t)||st.nul(t)?e:t}function np(t){return st.und(t)?[]:st.arr(t)?t:[t]}function au(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return st.fun(t)?t(...n):t}function jW(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,yu(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Zv(t){const e=jW(t);if(st.und(e))return on({to:e},t);const n=Object.keys(t).reduce((i,r)=>st.und(e[r])?on({},i,{[r]:t[r]}):i,{});return on({to:e},n)}function $W(t,e){return e&&(st.fun(e)?e(t):st.obj(e)&&(e.current=t)),t}class Mr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class g_ extends Mr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Mr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Mr&&e.removeChild(this))}}class j2 extends Mr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Mr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Mr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const r=this.payload[i];e&&!(r instanceof Mr)||(n[i]=r instanceof Mr?r[e?"getAnimatedValue":"getValue"]():r)}return n}getAnimatedValue(){return this.getValue(!0)}}let IE;function KW(t,e){IE={fn:t,transform:e}}let $2;function YW(t){$2=t}let K2=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Sm;function JW(t){Sm=t}let Y2=()=>Date.now(),WW=t=>t.current,J2;function QW(t){J2=t}class XW extends j2{constructor(e,n){super(),this.update=void 0,this.payload=e.style?on({},e,{style:J2(e.style)}):e,this.update=n,this.attach()}}const ZW=t=>st.fun(t)&&!(t.prototype instanceof Dn.Component),eQ=t=>B.forwardRef((n,i)=>{const r=HW(),o=B.useRef(!0),l=B.useRef(null),c=B.useRef(null),d=B.useCallback(T=>{const b=l.current,C=()=>{let N=!1;c.current&&(N=IE.fn(c.current,l.current.getAnimatedValue())),(!c.current||N===!1)&&r()};l.current=new XW(T,C),b&&b.detach()},[]);B.useEffect(()=>()=>{o.current=!1,l.current&&l.current.detach()},[]),B.useImperativeHandle(i,()=>WW(c)),d(n);const f=l.current.getValue();f.scrollTop,f.scrollLeft;const p=yu(f,["scrollTop","scrollLeft"]),v=ZW(t)?void 0:T=>c.current=$W(T,i);return Dn.createElement(t,on({},p,{ref:v}))});let bd=!1;const $a=new Set,W2=()=>{if(!bd)return!1;let t=Y2();for(let e of $a){let n=!1;for(let i=0;i<e.configs.length;i++){let r=e.configs[i],o,l;for(let c=0;c<r.animatedValues.length;c++){let d=r.animatedValues[c];if(d.done)continue;let f=r.fromValues[c],p=r.toValues[c],v=d.lastPosition,T=p instanceof Mr,b=Array.isArray(r.initialVelocity)?r.initialVelocity[c]:r.initialVelocity;if(T&&(p=p.getValue()),r.immediate){d.setValue(p),d.done=!0;continue}if(typeof f=="string"||typeof p=="string"){d.setValue(p),d.done=!0;continue}if(r.duration!==void 0)v=f+r.easing((t-d.startTime)/r.duration)*(p-f),o=t>=d.startTime+r.duration;else if(r.decay)v=f+b/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),o=Math.abs(d.lastPosition-v)<.1,o&&(p=v);else{l=d.lastTime!==void 0?d.lastTime:t,b=d.lastVelocity!==void 0?d.lastVelocity:r.initialVelocity,t>l+64&&(l=t);let C=Math.floor(t-l);for(let k=0;k<C;++k){let U=-r.tension*(v-p),H=-r.friction*b,K=(U+H)/r.mass;b=b+K*1/1e3,v=v+b*1/1e3}let N=r.clamp&&r.tension!==0?f<p?v>p:v<p:!1,D=Math.abs(b)<=r.precision,L=r.tension!==0?Math.abs(p-v)<=r.precision:!0;o=N||D&&L,d.lastVelocity=b,d.lastTime=t}T&&!r.toValues[c].done&&(o=!1),o?(d.value!==p&&(v=p),d.done=!0):n=!0,d.setValue(v),d.lastPosition=v}e.props.onFrame&&(e.values[r.name]=r.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||($a.delete(e),e.stop(!0))}return $a.size?K2(W2):bd=!1,bd},tQ=t=>{$a.has(t)||$a.add(t),bd||(bd=!0,K2(W2))},nQ=t=>{$a.has(t)&&$a.delete(t)};function bm(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return bm({range:t,output:e,extrapolate:n});if(Sm&&typeof t.output[0]=="string")return Sm(t);const i=t,r=i.output,o=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(f=>f);return f=>{const p=rQ(f,o);return iQ(f,o[p],o[p+1],r[p],r[p+1],d,l,c,i.map)}}function iQ(t,e,n,i,r,o,l,c,d){let f=d?d(t):t;if(f<e){if(l==="identity")return f;l==="clamp"&&(f=e)}if(f>n){if(c==="identity")return f;c==="clamp"&&(f=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?f=-f:n===1/0?f=f-e:f=(f-e)/(n-e),f=o(f),i===-1/0?f=-f:r===1/0?f=f+i:f=f*(r-i)+i,f)}function rQ(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Nu extends g_{constructor(e,n,i,r){super(),this.calc=void 0,this.payload=e instanceof g_&&!(e instanceof Nu)?e.getPayload():Array.isArray(e)?e:[e],this.calc=bm(n,i,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=bm(e,n,i)}interpolate(e,n,i){return new Nu(this,e,n,i)}}const Yl=(t,e,n)=>t&&new Nu(t,e,n),sQ={default:{tension:170,friction:26}};function Q2(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>Q2(n,e))}class y_ extends Mr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,r){r===void 0&&(r=!0),n.value=i,r&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&Q2(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Nu(this,e,n,i)}}class oQ extends g_{constructor(e){super(),this.payload=e.map(n=>new y_(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,r)=>this.payload[r].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Nu(this,e,n)}}let aQ=0,lQ=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=aQ++}update(e){if(!e)return this;const n=Zv(e),i=n.delay,r=i===void 0?0:i,o=n.to,l=yu(n,["delay","to"]);if(st.arr(o)||st.fun(o))this.queue.push(on({},l,{delay:r,to:o}));else if(o){let c={};Object.entries(o).forEach(d=>{let f=d[0],p=d[1];const v=on({to:{[f]:p},delay:au(r,f)},l),T=c[v.delay]&&c[v.delay].to;c[v.delay]=on({},c[v.delay],v,{to:on({},T,v.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(r=>{let o=r.from,l=o===void 0?{}:o,c=r.to,d=c===void 0?{}:c;st.obj(l)&&(this.merged=on({},l,this.merged)),st.obj(d)&&(this.merged=on({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((r,o)=>{let l=r.delay,c=yu(r,["delay"]);const d=p=>{o===i.length-1&&n===this.guid&&p&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let f=st.arr(c.to)||st.fun(c.to);l?setTimeout(()=>{n===this.guid&&(f?this.runAsync(c,d):this.diff(c).start(d))},l):f?this.runAsync(c,d):this.diff(c).start(d)})}else st.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),tQ(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&nQ(this),this}runAsync(e,n){var i=this;e.delay;let r=yu(e,["delay"]);const o=this.local;let l=Promise.resolve(void 0);if(st.arr(r.to))for(let c=0;c<r.to.length;c++){const d=c,f=on({},r,Zv(r.to[d]));st.arr(f.config)&&(f.config=f.config[d]),l=l.then(()=>{if(o===this.guid)return new Promise(p=>this.diff(f).start(p))})}else if(st.fun(r.to)){let c=0,d;l=l.then(()=>r.to(f=>{const p=on({},r,Zv(f));if(st.arr(p.config)&&(p.config=p.config[c]),c++,o===this.guid)return d=new Promise(v=>this.diff(p).start(v))},function(f){return f===void 0&&(f=!0),i.stop(f)}).then(()=>d))}l.then(n)}diff(e){this.props=on({},this.props,e);let n=this.props,i=n.from,r=i===void 0?{}:i,o=n.to,l=o===void 0?{}:o,c=n.config,d=c===void 0?{}:c,f=n.reverse,p=n.attach,v=n.reset,T=n.immediate;if(f){var b=[l,r];r=b[0],l=b[1]}this.merged=on({},r,this.merged,l),this.hasChanged=!1;let C=p&&p(this);if(this.animations=Object.entries(this.merged).reduce((N,D)=>{let L=D[0],k=D[1],U=N[L]||{};const H=st.num(k),K=st.str(k)&&!k.startsWith("#")&&!/\d/.test(k)&&!$2[k],G=st.arr(k),I=!H&&!G&&!K;let R=st.und(r[L])?k:r[L],P=H||G||K?k:1,V=au(d,L);C&&(P=C.animations[L].parent);let F=U.parent,q=U.interpolation,z=np(C?P.getPayload():P),xe,De=k;I&&(De=Sm({range:[0,1],output:[k,k]})(1));let ee=q&&q.getValue();const me=!st.und(F)&&U.animatedValues.some(Z=>!Z.done),Ae=!st.equ(De,ee),Ce=!st.equ(De,U.previous),$=!st.equ(V,U.config);if(v||Ce&&Ae||$){if(H||K)F=q=U.parent||new y_(R);else if(G)F=q=U.parent||new oQ(R);else if(I){let Z=U.interpolation&&U.interpolation.calc(U.parent.value);Z=Z!==void 0&&!v?Z:R,U.parent?(F=U.parent,F.setValue(0,!1)):F=new y_(0);const pe={output:[Z,k]};U.interpolation?(q=U.interpolation,U.interpolation.updateConfig(pe)):q=F.interpolate(pe)}return z=np(C?P.getPayload():P),xe=np(F.getPayload()),v&&!I&&F.setValue(R,!1),this.hasChanged=!0,xe.forEach(Z=>{Z.startPosition=Z.value,Z.lastPosition=Z.value,Z.lastVelocity=me?Z.lastVelocity:void 0,Z.lastTime=me?Z.lastTime:void 0,Z.startTime=Y2(),Z.done=!1,Z.animatedStyles.clear()}),au(T,L)&&F.setValue(I?P:k,!1),on({},N,{[L]:on({},U,{name:L,parent:F,interpolation:q,animatedValues:xe,toValues:z,previous:De,config:V,fromValues:np(F.getValue()),immediate:au(T,L),initialVelocity:ka(V.velocity,0),clamp:ka(V.clamp,!1),precision:ka(V.precision,.01),tension:ka(V.tension,170),friction:ka(V.friction,26),mass:ka(V.mass,1),duration:V.duration,easing:ka(V.easing,Z=>Z),decay:V.decay})})}else return Ae?N:(I&&(F.setValue(1,!1),q.updateConfig({output:[De,De]})),F.done=!0,this.hasChanged=!0,on({},N,{[L]:on({},N[L],{previous:De})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let N in this.animations)this.interpolations[N]=this.animations[N].interpolation,this.values[N]=this.animations[N].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const uQ=(t,e)=>{const n=B.useRef(!1),i=B.useRef(),r=st.fun(e),o=B.useMemo(()=>{i.current&&(i.current.map(v=>v.destroy()),i.current=void 0);let p;return[new Array(t).fill().map((v,T)=>{const b=new lQ,C=r?au(e,T,b):e[T];return T===0&&(p=C.ref),b.update(C),p||b.start(),b}),p]},[t]),l=o[0],c=o[1];i.current=l,B.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(p=>new Promise(v=>p.start(v)))),stop:p=>i.current.forEach(v=>v.stop(p)),get controllers(){return i.current}}));const d=B.useMemo(()=>p=>i.current.map((v,T)=>{v.update(r?au(p,T,v):p[T]),c||v.start()}),[t]);B.useEffect(()=>{n.current?r||d(e):c||i.current.forEach(p=>p.start())}),B.useEffect(()=>(n.current=!0,()=>i.current.forEach(p=>p.destroy())),[]);const f=i.current.map(p=>p.getValues());return r?[f,d,p=>i.current.forEach(v=>v.pause(p))]:f},cQ=t=>{const e=st.fun(t),n=uQ(1,e?t:[t]),i=n[0],r=n[1],o=n[2];return e?[i[0],r,o]:i};class dQ extends j2{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Mr)&&(e=IE.transform(e)),this.payload=e}}const wm={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Lr="[-+]?\\d*\\.?\\d+",Am=Lr+"%";function mg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const fQ=new RegExp("rgb"+mg(Lr,Lr,Lr)),hQ=new RegExp("rgba"+mg(Lr,Lr,Lr,Lr)),pQ=new RegExp("hsl"+mg(Lr,Am,Am)),mQ=new RegExp("hsla"+mg(Lr,Am,Am,Lr)),gQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,yQ=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,vQ=/^#([0-9a-fA-F]{6})$/,_Q=/^#([0-9a-fA-F]{8})$/;function TQ(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=vQ.exec(t))?parseInt(e[1]+"ff",16)>>>0:wm.hasOwnProperty(t)?wm[t]:(e=fQ.exec(t))?(Jl(e[1])<<24|Jl(e[2])<<16|Jl(e[3])<<8|255)>>>0:(e=hQ.exec(t))?(Jl(e[1])<<24|Jl(e[2])<<16|Jl(e[3])<<8|jR(e[4]))>>>0:(e=gQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=_Q.exec(t))?parseInt(e[1],16)>>>0:(e=yQ.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=pQ.exec(t))?(GR(HR(e[1]),ip(e[2]),ip(e[3]))|255)>>>0:(e=mQ.exec(t))?(GR(HR(e[1]),ip(e[2]),ip(e[3]))|jR(e[4]))>>>0:null}function e0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function GR(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=e0(r,i,t+1/3),l=e0(r,i,t),c=e0(r,i,t-1/3);return Math.round(o*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function Jl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function HR(t){return(parseFloat(t)%360+360)%360/360}function jR(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ip(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function $R(t){let e=TQ(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${o})`}const rp=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,EQ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,SQ=new RegExp(`(${Object.keys(wm).join("|")})`,"g"),bQ=t=>{const e=t.output.map(r=>r.replace(EQ,$R)).map(r=>r.replace(SQ,$R)),n=e[0].match(rp).map(()=>[]);e.forEach(r=>{r.match(rp).forEach((o,l)=>n[l].push(+o))});const i=e[0].match(rp).map((r,o)=>bm(on({},t,{output:n[o]})));return r=>{let o=0;return e[0].replace(rp,()=>i[o++](r)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,f,p)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(f)}, ${p})`)}};let wd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const wQ=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),AQ=["Webkit","Ms","Moz","O"];wd=Object.keys(wd).reduce((t,e)=>(AQ.forEach(n=>t[wQ(n,e)]=t[e]),t),wd);function xQ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(wd.hasOwnProperty(t)&&wd[t])?e+"px":(""+e).trim()}const KR={};QW(t=>new dQ(t));JW(bQ);YW(wm);KW((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const r=e.style,o=e.children,l=e.scrollTop,c=e.scrollLeft,d=yu(e,["style","children","scrollTop","scrollLeft"]),f=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),o!==void 0&&(t.textContent=o);for(let p in r)if(r.hasOwnProperty(p)){var n=p.indexOf("--")===0,i=xQ(p,r[p],n);p==="float"&&(p="cssFloat"),n?t.style.setProperty(p,i):t.style[p]=i}for(let p in d){const v=f?p:KR[p]||(KR[p]=p.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(v)<"u"&&t.setAttribute(v,d[p])}return}else return!1},t=>t);const CQ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],IQ=GW(eQ),RQ=IQ(CQ);function YR(t,e){return t.map(function(n,i){return n+e[i]})}function X2(t,e){return t.map(function(n,i){return n-e[i]})}function v_(t){return Math.hypot.apply(Math,t)}function NQ(t,e,n){var i=v_(e),r=i===0?0:1/i,o=n===0?0:1/n,l=o*i,c=e.map(function(p){return o*p}),d=e.map(function(p){return r*p}),f=v_(t);return{velocities:c,velocity:l,distance:f,direction:d}}function __(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function PQ(t,e,n){return Math.max(e,Math.min(t,n))}function DQ(t,e){return Math.pow(t,e*5)}function JR(t,e,n){return e===0||Math.abs(e)===1/0?DQ(t,n):t*e*n/(e+n*t)}function Ad(t,e,n,i){return i===void 0&&(i=.15),i===0?PQ(t,e,n):t<e?-JR(e-t,n-e,i)+e:t>n?+JR(t-n,n-e,i)+n:t}function MQ(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kQ(t,e,n){return e&&MQ(t.prototype,e),t}function Si(){return Si=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Si.apply(this,arguments)}function Z2(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function VQ(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function sp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LQ(t,e){if(t){if(typeof t=="string")return WR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WR(t,e)}}function WR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function gg(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=LQ(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function ek(){}function tk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?ek:e.length===1?e[0]:function(){for(var i,r=gg(e),o;!(o=r()).done;){var l=o.value;i=l.apply(this,arguments)||i}return i}}function Uo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function op(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function RE(t,e){t===void 0&&(t={});for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i],l=o[0],c=o[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=RE(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var OQ=180,UQ=.15,FQ=.5,BQ=60,zQ={threshold:function(e){return e===void 0&&(e=0),Uo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Uo(UQ);case!1:return Uo(0);default:return Uo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Uo(e)}},nk=Si({},zQ,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(v){return nk.bounds(e(v))};var n=e,i=n.left,r=i===void 0?-1/0:i,o=n.right,l=o===void 0?1/0:o,c=n.top,d=c===void 0?-1/0:c,f=n.bottom,p=f===void 0?1/0:f;return[[r,l],[d,p]]}}),qQ=typeof window<"u"&&window.document&&window.document.createElement,GQ={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=qQ?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,r=i===void 0?!0:i,o=n.capture,l=o===void 0?!1:o;return{passive:r,capture:l}}},HQ=Si({},nk,{threshold:function(e,n,i){var r=i.filterTaps,o=r===void 0?!1:r,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,f=d===void 0?void 0:d,p=Uo(e,o?3:c||f?1:0);return this.filterTaps=o||p[0]+p[1]>0,p},swipeVelocity:function(e){return e===void 0&&(e=FQ),Uo(e)},swipeDistance:function(e){return e===void 0&&(e=BQ),Uo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return OQ;case!1:return 0;default:return e}}});function jQ(t){return t===void 0&&(t={}),RE(t,GQ)}function $Q(t){return t===void 0&&(t={}),RE(t,HQ)}function KQ(t){var e=t.domTarget,n=t.eventOptions,i=t.window,r=t.enabled,o=VQ(t,["domTarget","eventOptions","window","enabled"]),l=jQ({domTarget:e,eventOptions:n,window:i,enabled:r});return l.drag=$Q(o),l}function $c(t){return Si({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:ek,canceled:!1,memo:void 0,args:void 0},t)}function ik(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=$c({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=$c({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=$c({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=$c({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=$c({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:r,scroll:o}}var Fa=new Map,YQ=(function(){function t(n,i){var r=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(o,l){var c;l===void 0&&(l=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var d=arguments.length,f=new Array(d>2?d-2:0),p=2;p<d;p++)f[p-2]=arguments[p];r.controller.timeouts[r.stateKey]=(c=window).setTimeout.apply(c,[o,l].concat(f))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!o&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var l=r.state.active,c=r.state._active;r.state.active=c,r.state.first=c&&!l,r.state.last=l&&!c,r.controller.state.shared[r.ingKey]=c}var d=Si({},r.controller.state.shared,r.state,r.mapStateValues(r.state)),f=r.handler(d);return r.state.memo=f!==void 0?f:r.state.memo,r.state._active||r.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,r){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var r=this.config,o=r.initial,l=r.bounds,c=r.rubberband,d=r.threshold,f=this.state,p=f._bounds,v=f._initial,T=f._active,b=f._intentional,C=f.lastOffset,N=f.movement,D=this.getInternalMovement(i,this.state),L=b[0]===!1?QR(D[0],d[0]):b[0],k=b[1]===!1?QR(D[1],d[1]):b[1],U=this.checkIntentionality([L,k],D);if(U._blocked)return Si({},U,{_movement:D,delta:[0,0]});var H=U._intentional,K=D,G,I;if(H[0]!==!1&&b[0]===!1&&(I=op(o,this.state),G=op(l,this.state),v[0]=I[0],p[0]=G[0]),H[1]!==!1&&b[1]===!1){var R,P;I=(R=I)!=null?R:op(o,this.state),G=(P=G)!=null?P:op(l,this.state),v[1]=I[1],p[1]=G[1]}var V=[H[0]!==!1?D[0]-H[0]:v[0],H[1]!==!1?D[1]-H[1]:v[1]],F=YR(V,C),q=T?c:[0,0];return V=XR(p,YR(V,v),q),Si({},U,{intentional:H[0]!==!1||H[1]!==!1,_initial:v,_movement:K,movement:V,values:i,offset:XR(p,F,q),delta:X2(V,N)})},e.clean=function(){this.clearTimeout()},kQ(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function QR(t,e){return Math.abs(t)>=e?__(t)*e:!1}function XR(t,e,n){var i=e[0],r=e[1],o=n[0],l=n[1],c=t[0],d=c[0],f=c[1],p=t[1],v=p[0],T=p[1];return[Ad(i,d,f,o),Ad(r,v,T,l)]}function t0(t,e,n){var i=t.state,r=t.args,o=e.timeStamp,l=e.type,c=i.values,d=n?0:o-i.startTime;return{_lastEventType:l,event:e,timeStamp:o,elapsedTime:d,args:r,previous:c}}function JQ(t,e,n){var i=t.state.offset,r=n.timeStamp;return Si({},ik()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:r})}function WQ(t,e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,Si({},e,{event:n})].concat(r))}}var QQ=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];for(var c=gg(n.classes),d;!(d=c()).done;){var f=d.value;new f(n,o).addBindings(i)}for(var p=0,v=Object.entries(n.nativeRefs);p<v.length;p++){var T=v[p],b=T[0],C=T[1];T_(i,b,WQ(C,Si({},n.state.shared,{args:o})))}return n.config.domTarget?tX(n,i):nX(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=sk(n.config),r=n.config.eventOptions;i&&gf(i,rk(n.domListeners),r),Object.values(n.timeouts).forEach(clearTimeout),XQ(n)},this.state=ik(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function XQ(t){var e=t.config,n=e.window,i=e.eventOptions,r=t.windowListeners;if(n){for(var o in r){var l=r[o];gf(n,l,i)}t.windowListeners={}}}function ZQ(t,e){var n=t.config,i=t.windowListeners;n.window&&(gf(n.window,i[e],n.eventOptions),delete i[e])}function eX(t,e,n){var i=t.config,r=t.windowListeners;n===void 0&&(n=[]),i.window&&(gf(i.window,r[e],i.eventOptions),ok(i.window,r[e]=n,i.eventOptions))}function tX(t,e){var n=t.config,i=t.domListeners,r=sk(n);if(!r)throw new Error("domTarget must be defined");var o=n.eventOptions;gf(r,rk(i),o);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],f=d[0],p=d[1],v=f.slice(2).toLowerCase();i.push([v,tk.apply(void 0,p)])}ok(r,i,o)}function nX(t,e){for(var n=t.config,i={},r=n.eventOptions.capture?"Capture":"",o=0,l=Object.entries(e);o<l.length;o++){var c=l[o],d=c[0],f=c[1],p=Array.isArray(f)?f:[f],v=d+r;i[v]=tk.apply(void 0,p)}return i}function rk(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function sk(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function T_(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function ok(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=gg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.addEventListener(l,c,n)}}function gf(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=gg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.removeEventListener(l,c,n)}}function iX(t,e,n){n===void 0&&(n={});var i=sX(t),r=Dn.useMemo(function(){return new QQ(i)},[]);return r.config=e,r.handlers=t,r.nativeRefs=n,Dn.useEffect(r.effect,[]),r.config.domTarget?rX:r.bind}function rX(){}function sX(t){var e=new Set;return t.drag&&e.add(Fa.get("drag")),t.wheel&&e.add(Fa.get("wheel")),t.scroll&&e.add(Fa.get("scroll")),t.move&&e.add(Fa.get("move")),t.pinch&&e.add(Fa.get("pinch")),t.hover&&e.add(Fa.get("hover")),e}var oX=(function(t){Z2(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(r,o){return X2(r,o.initial)},n.checkIntentionality=function(r,o){if(r[0]===!1&&r[1]===!1)return{_intentional:r,axis:this.state.axis};var l=o.map(Math.abs),c=l[0],d=l[1],f=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:r,_blocked:!1,axis:f}:f?this.config.axis&&f!==this.config.axis?{_intentional:r,_blocked:!0,axis:f}:(r[f==="x"?1:0]=!1,{_intentional:r,_blocked:!1,axis:f}):{_intentional:[!1,!1],_blocked:!1,axis:f}},n.getKinematics=function(r,o){var l=this.getMovement(r);if(!l._blocked){var c=o.timeStamp-this.state.timeStamp;Object.assign(l,NQ(l.movement,l.delta,c))}return l},n.mapStateValues=function(r){return{xy:r.values,vxvy:r.velocities}},e})(YQ);function ak(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function ZR(t){var e="buttons"in t?t.buttons:0,n=ak(t),i=n&&n.length||0,r=i>0||e>0,o=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:r,buttons:e,shiftKey:o,altKey:l,metaKey:c,ctrlKey:d}}function e1(t){var e=ak(t),n=e?e[0]:t,i=n.clientX,r=n.clientY;return[i,r]}var aX=3,lX=220,uX=(function(t){Z2(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(r){!i.enabled||i.state._active||(eX(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:r.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in r&&typeof r.persist=="function"&&r.persist(),i.setTimeout(i.startDrag.bind(sp(i)),i.config.delay,r)):i.startDrag(r))},i.onDragChange=function(r){if(!i.state.canceled&&r.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(r));return}var o=ZR(r);if(!o.down){i.onDragEnd(r);return}i.updateSharedState(o);var l=e1(r),c=i.getKinematics(l,r),d=t0(sp(i),r),f=i.state._isTap,p=v_(c._movement);f&&p>=aX&&(f=!1),i.updateGestureState(Si({},d,c,{_isTap:f})),i.fireGestureHandler()}},i.onDragEnd=function(r){if(r.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var o=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],f=i.state.movement,p=f[0],v=f[1],T=i.state._intentional,b=T[0],C=T[1],N=i.config.swipeVelocity,D=N[0],L=N[1],k=i.config.swipeDistance,U=k[0],H=k[1],K=Si({},t0(sp(i),r),i.getMovement(i.state.values)),G=[0,0];K.elapsedTime<lX&&(b!==!1&&Math.abs(c)>D&&Math.abs(p)>U&&(G[0]=__(c)),C!==!1&&Math.abs(d)>L&&Math.abs(v)>H&&(G[1]=__(d))),i.updateGestureState(Si({},K,{tap:o,swipe:G})),i.fireGestureHandler(o===!0)}},i.clean=function(){t.prototype.clean.call(sp(i)),i.state._delayedEvent=!1,ZQ(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(r){i.state._isTap||r.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(r){var o=e1(r);this.updateSharedState(ZR(r)),this.updateGestureState(Si({},JQ(this,o,r),t0(this,r,!0),{_pointerId:r.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(r){if(T_(r,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";T_(r,o,this.onClick)}},e})(oX);function cX(t,e){var n,i=[],r,o=!1;function l(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return o&&n===this&&e(d,i)||(r=t.apply(this,d),o=!0,n=this,i=d),r}return l}function Mp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Mp(t[i],e[i]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;for(o=t.entries();!(i=o.next()).done;)if(!Mp(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(r[i]==="_owner"&&t.$$typeof)&&!Mp(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}function dX(t,e){try{return Mp(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function fX(t,e){e===void 0&&(e={}),Fa.set("drag",uX);var n=B.useRef();return n.current||(n.current=cX(KQ,dX)),iX({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var lk=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],xm=lk.join(","),uk=typeof Element>"u",nl=uk?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,E_=!uk&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},ck=function(e,n,i){var r=Array.prototype.slice.apply(e.querySelectorAll(xm));return n&&nl.call(e,xm)&&r.unshift(e),r=r.filter(i),r},dk=function t(e,n,i){for(var r=[],o=Array.from(e);o.length;){var l=o.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,f=t(d,!0,i);i.flatten?r.push.apply(r,f):r.push({scope:l,candidates:f})}else{var p=nl.call(l,xm);p&&i.filter(l)&&(n||!e.includes(l))&&r.push(l);var v=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(v&&T){var b=t(v===!0?l.children:v.children,!0,i);i.flatten?r.push.apply(r,b):r.push({scope:l,candidates:b})}else o.unshift.apply(o,l.children)}}return r},fk=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},hX=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},hk=function(e){return e.tagName==="INPUT"},pX=function(e){return hk(e)&&e.type==="hidden"},mX=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},gX=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},yX=function(e){if(!e.name)return!0;var n=e.form||E_(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=gX(r,e.form);return!o||o===e},vX=function(e){return hk(e)&&e.type==="radio"},_X=function(e){return vX(e)&&!yX(e)},t1=function(e){var n=e.getBoundingClientRect(),i=n.width,r=n.height;return i===0&&r===0},TX=function(e,n){var i=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=nl.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(nl.call(l,"details:not([open]) *"))return!0;var c=E_(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof r=="function"){for(var f=e;e;){var p=e.parentElement,v=E_(e);if(p&&!p.shadowRoot&&r(p)===!0)return t1(e);e.assignedSlot?e=e.assignedSlot:!p&&v!==e.ownerDocument?e=v.host:e=p}e=f}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return t1(e);return!1},EX=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var r=n.children.item(i);if(r.tagName==="LEGEND")return nl.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},Cm=function(e,n){return!(n.disabled||pX(n)||TX(n,e)||mX(n)||EX(n))},S_=function(e,n){return!(_X(n)||fk(n)<0||!Cm(e,n))},SX=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},bX=function t(e){var n=[],i=[];return e.forEach(function(r,o){var l=!!r.scope,c=l?r.scope:r,d=fk(c,l),f=l?t(r.candidates):c;d===0?l?n.push.apply(n,f):n.push(c):i.push({documentOrder:o,tabIndex:d,item:r,isScope:l,content:f})}),i.sort(hX).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(n)},wX=function(e,n){n=n||{};var i;return n.getShadowRoot?i=dk([e],n.includeContainer,{filter:S_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:SX}):i=ck(e,n.includeContainer,S_.bind(null,n)),bX(i)},AX=function(e,n){n=n||{};var i;return n.getShadowRoot?i=dk([e],n.includeContainer,{filter:Cm.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=ck(e,n.includeContainer,Cm.bind(null,n)),i},ap=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return nl.call(e,xm)===!1?!1:S_(n,e)},xX=lk.concat("iframe").join(","),n0=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return nl.call(e,xX)===!1?!1:Cm(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function n1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function i1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n1(Object(n),!0).forEach(function(i){CX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function CX(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r1=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var r=t.indexOf(n);r===-1||t.splice(r,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),IX=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},RX=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},NX=function(e){return e.key==="Tab"||e.keyCode===9},s1=function(e){return setTimeout(e,0)},o1=function(e,n){var i=-1;return e.every(function(r,o){return n(r)?(i=o,!1):!0}),i},Kc=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},lp=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},PX=function(e,n){var i=(n==null?void 0:n.document)||document,r=i1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(G,I,R){return G&&G[I]!==void 0?G[I]:r[R||I]},d=function(G){return o.containerGroups.findIndex(function(I){var R=I.container,P=I.tabbableNodes;return R.contains(G)||P.find(function(V){return V===G})})},f=function(G){var I=r[G];if(typeof I=="function"){for(var R=arguments.length,P=new Array(R>1?R-1:0),V=1;V<R;V++)P[V-1]=arguments[V];I=I.apply(void 0,P)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(G,"` was specified but was not a node, or did not return a node"))}var F=I;if(typeof I=="string"&&(F=i.querySelector(I),!F))throw new Error("`".concat(G,"` as selector refers to no known node"));return F},p=function(){var G=f("initialFocus");if(G===!1)return!1;if(G===void 0)if(d(i.activeElement)>=0)G=i.activeElement;else{var I=o.tabbableGroups[0],R=I&&I.firstTabbableNode;G=R||f("fallbackFocus")}if(!G)throw new Error("Your focus-trap needs to have at least one focusable element");return G},v=function(){if(o.containerGroups=o.containers.map(function(G){var I=wX(G,r.tabbableOptions),R=AX(G,r.tabbableOptions);return{container:G,tabbableNodes:I,focusableNodes:R,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(V){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,q=R.findIndex(function(z){return z===V});if(!(q<0))return F?R.slice(q+1).find(function(z){return ap(z,r.tabbableOptions)}):R.slice(0,q).reverse().find(function(z){return ap(z,r.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(G){return G.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function K(G){if(G!==!1&&G!==i.activeElement){if(!G||!G.focus){K(p());return}G.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=G,IX(G)&&G.select()}},b=function(G){var I=f("setReturnFocus",G);return I||(I===!1?!1:G)},C=function(G){var I=lp(G);if(!(d(I)>=0)){if(Kc(r.clickOutsideDeactivates,G)){l.deactivate({returnFocus:r.returnFocusOnDeactivate&&!n0(I,r.tabbableOptions)});return}Kc(r.allowOutsideClick,G)||G.preventDefault()}},N=function(G){var I=lp(G),R=d(I)>=0;R||I instanceof Document?R&&(o.mostRecentlyFocusedNode=I):(G.stopImmediatePropagation(),T(o.mostRecentlyFocusedNode||p()))},D=function(G){var I=lp(G);v();var R=null;if(o.tabbableGroups.length>0){var P=d(I),V=P>=0?o.containerGroups[P]:void 0;if(P<0)G.shiftKey?R=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:R=o.tabbableGroups[0].firstTabbableNode;else if(G.shiftKey){var F=o1(o.tabbableGroups,function(se){var me=se.firstTabbableNode;return I===me});if(F<0&&(V.container===I||n0(I,r.tabbableOptions)&&!ap(I,r.tabbableOptions)&&!V.nextTabbableNode(I,!1))&&(F=P),F>=0){var q=F===0?o.tabbableGroups.length-1:F-1,z=o.tabbableGroups[q];R=z.lastTabbableNode}}else{var xe=o1(o.tabbableGroups,function(se){var me=se.lastTabbableNode;return I===me});if(xe<0&&(V.container===I||n0(I,r.tabbableOptions)&&!ap(I,r.tabbableOptions)&&!V.nextTabbableNode(I))&&(xe=P),xe>=0){var De=xe===o.tabbableGroups.length-1?0:xe+1,ee=o.tabbableGroups[De];R=ee.firstTabbableNode}}}else R=f("fallbackFocus");R&&(G.preventDefault(),T(R))},L=function(G){if(RX(G)&&Kc(r.escapeDeactivates,G)!==!1){G.preventDefault(),l.deactivate();return}if(NX(G)){D(G);return}},k=function(G){var I=lp(G);d(I)>=0||Kc(r.clickOutsideDeactivates,G)||Kc(r.allowOutsideClick,G)||(G.preventDefault(),G.stopImmediatePropagation())},U=function(){if(o.active)return r1.activateTrap(l),o.delayInitialFocusTimer=r.delayInitialFocus?s1(function(){T(p())}):T(p()),i.addEventListener("focusin",N,!0),i.addEventListener("mousedown",C,{capture:!0,passive:!1}),i.addEventListener("touchstart",C,{capture:!0,passive:!1}),i.addEventListener("click",k,{capture:!0,passive:!1}),i.addEventListener("keydown",L,{capture:!0,passive:!1}),l},H=function(){if(o.active)return i.removeEventListener("focusin",N,!0),i.removeEventListener("mousedown",C,!0),i.removeEventListener("touchstart",C,!0),i.removeEventListener("click",k,!0),i.removeEventListener("keydown",L,!0),l};return l={get active(){return o.active},get paused(){return o.paused},activate:function(G){if(o.active)return this;var I=c(G,"onActivate"),R=c(G,"onPostActivate"),P=c(G,"checkCanFocusTrap");P||v(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=i.activeElement,I&&I();var V=function(){P&&v(),U(),R&&R()};return P?(P(o.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(G){if(!o.active)return this;var I=i1({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},G);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,H(),o.active=!1,o.paused=!1,r1.deactivateTrap(l);var R=c(I,"onDeactivate"),P=c(I,"onPostDeactivate"),V=c(I,"checkCanReturnFocus"),F=c(I,"returnFocus","returnFocusOnDeactivate");R&&R();var q=function(){s1(function(){F&&T(b(o.nodeFocusedBeforeActivation)),P&&P()})};return F&&V?(V(b(o.nodeFocusedBeforeActivation)).then(q,q),this):(q(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,H(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,v(),U(),this)},updateContainerElements:function(G){var I=[].concat(G).filter(Boolean);return o.containers=I.map(function(R){return typeof R=="string"?i.querySelector(R):R}),o.active&&v(),this}},l.updateContainerElements(e),l};function DX(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var NE=!1;if(typeof window<"u"){var a1={get passive(){NE=!0}};window.addEventListener("testPassive",null,a1),window.removeEventListener("testPassive",null,a1)}var pk=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),Bo=[],Im=!1,mk=-1,xd=void 0,Cd=void 0,gk=function(e){return Bo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},Rm=function(e){var n=e||window.event;return gk(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},MX=function(e){if(Cd===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(Cd=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}xd===void 0&&(xd=document.body.style.overflow,document.body.style.overflow="hidden")},kX=function(){Cd!==void 0&&(document.body.style.paddingRight=Cd,Cd=void 0),xd!==void 0&&(document.body.style.overflow=xd,xd=void 0)},VX=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},LX=function(e,n){var i=e.targetTouches[0].clientY-mk;return gk(e.target)?!1:n&&n.scrollTop===0&&i>0||VX(n)&&i<0?Rm(e):(e.stopPropagation(),!0)},OX=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!Bo.some(function(r){return r.targetElement===e})){var i={targetElement:e,options:n||{}};Bo=[].concat(DX(Bo),[i]),pk?(e.ontouchstart=function(r){r.targetTouches.length===1&&(mk=r.targetTouches[0].clientY)},e.ontouchmove=function(r){r.targetTouches.length===1&&LX(r,e)},Im||(document.addEventListener("touchmove",Rm,NE?{passive:!1}:void 0),Im=!0)):MX(n)}},UX=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}Bo=Bo.filter(function(n){return n.targetElement!==e}),pk?(e.ontouchstart=null,e.ontouchmove=null,Im&&Bo.length===0&&(document.removeEventListener("touchmove",Rm,NE?{passive:!1}:void 0),Im=!1)):Bo.length||kX()},Ka=[],FX=function(){return Ka.some(function(t){return t.activeTargets.length>0})},BX=function(){return Ka.some(function(t){return t.skippedTargets.length>0})},l1="ResizeObserver loop completed with undelivered notifications.",zX=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:l1}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=l1),window.dispatchEvent(t)},Yd;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Yd||(Yd={}));var Ya=function(t){return Object.freeze(t)},qX=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Ya(this)}return t})(),yk=(function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ya(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,o=e.right,l=e.bottom,c=e.left,d=e.width,f=e.height;return{x:n,y:i,top:r,right:o,bottom:l,left:c,width:d,height:f}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),PE=function(t){return t instanceof SVGElement&&"getBBox"in t},vk=function(t){if(PE(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,o=r.offsetWidth,l=r.offsetHeight;return!(o||l||t.getClientRects().length)},u1=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},GX=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Id=typeof window<"u"?window:{},up=new WeakMap,c1=/auto|scroll/,HX=/^tb|vertical/,jX=/msie|trident/i.test(Id.navigator&&Id.navigator.userAgent),Zr=function(t){return parseFloat(t||"0")},vu=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new qX((n?e:t)||0,(n?t:e)||0)},d1=Ya({devicePixelContentBoxSize:vu(),borderBoxSize:vu(),contentBoxSize:vu(),contentRect:new yk(0,0,0,0)}),_k=function(t,e){if(e===void 0&&(e=!1),up.has(t)&&!e)return up.get(t);if(vk(t))return up.set(t,d1),d1;var n=getComputedStyle(t),i=PE(t)&&t.ownerSVGElement&&t.getBBox(),r=!jX&&n.boxSizing==="border-box",o=HX.test(n.writingMode||""),l=!i&&c1.test(n.overflowY||""),c=!i&&c1.test(n.overflowX||""),d=i?0:Zr(n.paddingTop),f=i?0:Zr(n.paddingRight),p=i?0:Zr(n.paddingBottom),v=i?0:Zr(n.paddingLeft),T=i?0:Zr(n.borderTopWidth),b=i?0:Zr(n.borderRightWidth),C=i?0:Zr(n.borderBottomWidth),N=i?0:Zr(n.borderLeftWidth),D=v+f,L=d+p,k=N+b,U=T+C,H=c?t.offsetHeight-U-t.clientHeight:0,K=l?t.offsetWidth-k-t.clientWidth:0,G=r?D+k:0,I=r?L+U:0,R=i?i.width:Zr(n.width)-G-K,P=i?i.height:Zr(n.height)-I-H,V=R+D+K+k,F=P+L+H+U,q=Ya({devicePixelContentBoxSize:vu(Math.round(R*devicePixelRatio),Math.round(P*devicePixelRatio),o),borderBoxSize:vu(V,F,o),contentBoxSize:vu(R,P,o),contentRect:new yk(v,d,R,P)});return up.set(t,q),q},Tk=function(t,e,n){var i=_k(t,n),r=i.borderBoxSize,o=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case Yd.DEVICE_PIXEL_CONTENT_BOX:return l;case Yd.BORDER_BOX:return r;default:return o}},$X=(function(){function t(e){var n=_k(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Ya([n.borderBoxSize]),this.contentBoxSize=Ya([n.contentBoxSize]),this.devicePixelContentBoxSize=Ya([n.devicePixelContentBoxSize])}return t})(),Ek=function(t){if(vk(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},KX=function(){var t=1/0,e=[];Ka.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(f){var p=new $X(f.target),v=Ek(f.target);c.push(p),f.lastReportedSize=Tk(f.target,f.observedBox),v<t&&(t=v)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},f1=function(t){Ka.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(Ek(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},YX=function(){var t=0;for(f1(t);FX();)t=KX(),f1(t);return BX()&&zX(),t>0},i0,Sk=[],JX=function(){return Sk.splice(0).forEach(function(t){return t()})},WX=function(t){if(!i0){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return JX()}).observe(n,i),i0=function(){n.textContent="".concat(e?e--:e++)}}Sk.push(t),i0()},QX=function(t){WX(function(){requestAnimationFrame(t)})},kp=0,XX=function(){return!!kp},ZX=250,eZ={attributes:!0,characterData:!0,childList:!0,subtree:!0},h1=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],p1=function(t){return t===void 0&&(t=0),Date.now()+t},r0=!1,tZ=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=ZX),!r0){r0=!0;var i=p1(e);QX(function(){var r=!1;try{r=YX()}finally{if(r0=!1,e=i-p1(),!XX())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,eZ)};document.body?n():Id.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),h1.forEach(function(n){return Id.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),h1.forEach(function(n){return Id.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),b_=new tZ,m1=function(t){!kp&&t>0&&b_.start(),kp+=t,!kp&&b_.stop()},nZ=function(t){return!PE(t)&&!GX(t)&&getComputedStyle(t).display==="inline"},iZ=(function(){function t(e,n){this.target=e,this.observedBox=n||Yd.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Tk(this.target,this.observedBox,!0);return nZ(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),rZ=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),cp=new WeakMap,g1=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},dp=(function(){function t(){}return t.connect=function(e,n){var i=new rZ(e,n);cp.set(e,i)},t.observe=function(e,n,i){var r=cp.get(e),o=r.observationTargets.length===0;g1(r.observationTargets,n)<0&&(o&&Ka.push(r),r.observationTargets.push(new iZ(n,i&&i.box)),m1(1),b_.schedule())},t.unobserve=function(e,n){var i=cp.get(e),r=g1(i.observationTargets,n),o=i.observationTargets.length===1;r>=0&&(o&&Ka.splice(Ka.indexOf(i),1),i.observationTargets.splice(r,1),m1(-1))},t.disconnect=function(e){var n=this,i=cp.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),sZ=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");dp.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!u1(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");dp.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!u1(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");dp.unobserve(this,e)},t.prototype.disconnect=function(){dp.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function ii(){return ii=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ii.apply(this,arguments)}function Vp(t,e){if(t==null)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(r[n]=t[n]);return r}var Rd=typeof window<"u"?B.useLayoutEffect:B.useEffect;function Yc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function fp(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var oZ={box:"border-box"};function s0(t,e){var n=e.label,i=e.enabled,r=e.resizeSourceRef,o=B.useState(0),l=o[0],c=o[1];B.useDebugValue(n+": "+l);var d=B.useCallback(function(f){c(f[0].borderBoxSize[0].blockSize),r.current="element"},[r]);return Rd(function(){if(t.current&&i){var f=new sZ(d);return f.observe(t.current,oZ),function(){f.disconnect()}}},[t,d,i]),i?l:0}function ti(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var y1={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},v1={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},aZ=DW({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:ii({},y1,v1)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:ii({},y1,v1)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:ii({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[MW({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(ti()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(ti()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(ti()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(ti()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(ti()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(ti()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(ti()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(ti()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(ti()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(ti()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(ti()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(ti()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(ti()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(ti()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(ti()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(ti()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),lZ=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],uZ=["velocity"],cZ=["onRest","config"],bk=sQ.default,dZ=bk.tension,hp=bk.friction,fZ=Dn.forwardRef(function(t,e){var n=t.children,i=t.sibling,r=t.className,o=t.footer,l=t.header,c=t.open,d=t.initialState,f=t.lastSnapRef,p=t.initialFocusRef,v=t.onDismiss,T=t.maxHeight,b=t.defaultSnap,C=b===void 0?pZ:b,N=t.snapPoints,D=N===void 0?mZ:N,L=t.blocking,k=L===void 0||L,U=t.scrollLocking,H=U===void 0||U,K=t.style,G=t.onSpringStart,I=t.onSpringCancel,R=t.onSpringEnd,P=t.reserveScrollBarGap,V=P===void 0?k:P,F=t.expandOnContentDrag,q=F!==void 0&&F,z=Vp(t,lZ),xe=(function(){var ue=B.useState(!1),be=ue[0],Ee=ue[1],Ye=B.useState({}),Tt=Ye[0],We=Ye[1],Xe=B.useCallback(function(tt){return We(function(nt){var ke;return ii({},nt,((ke={})[tt]=!1,ke))}),function(){We(function(nt){var ke;return ii({},nt,((ke={})[tt]=!0,ke))})}},[]);return B.useEffect(function(){var tt=Object.values(Tt);tt.length!==0&&tt.every(Boolean)&&Ee(!0)},[Tt]),{ready:be,registerReady:Xe}})(),De=xe.ready,ee=xe.registerReady,se=B.useRef(!1),me=B.useRef(G),Ae=B.useRef(I),Ce=B.useRef(R);B.useEffect(function(){me.current=G,Ae.current=I,Ce.current=R},[I,G,R]);var $,Z,pe=cQ(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),re=pe[0],fe=pe[1],Te=B.useRef(null),Ve=B.useRef(null),Le=B.useRef(null),pt=B.useRef(null),xn=B.useRef(null),bi=B.useRef(null),Cn=B.useRef(0),ui=B.useRef(),kn=B.useRef(!1),In=($=B.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),Z=B.useRef($==null?void 0:$.matches),B.useDebugValue(Z.current?"reduce":"no-preference"),B.useEffect(function(){var ue=function(be){Z.current=be.matches};return $==null||$.addListener(ue),function(){return $==null?void 0:$.removeListener(ue)}},[$]),Z),Vn=(function(ue){var be=ue.targetRef,Ee=ue.enabled,Ye=ue.reserveScrollBarGap,Tt=B.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return B.useDebugValue(Ee?"Enabled":"Disabled"),B.useEffect(function(){if(!Ee)return Tt.current.deactivate(),void(Tt.current={activate:function(){},deactivate:function(){}});var We=be.current,Xe=!1;Tt.current={activate:function(){Xe||(Xe=!0,OX(We,{allowTouchMove:function(tt){return tt.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:Ye}))},deactivate:function(){Xe&&(Xe=!1,UX(We))}}},[Ee,be,Ye]),Tt})({targetRef:Ve,enabled:De&&H,reserveScrollBarGap:V}),Oi=(function(ue){var be=ue.targetRef,Ee=ue.enabled,Ye=B.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return B.useDebugValue(Ee?"Enabled":"Disabled"),B.useEffect(function(){if(!Ee)return Ye.current.deactivate(),void(Ye.current={activate:function(){},deactivate:function(){}});var Tt=be.current,We=!1,Xe=[],tt=[];Ye.current={activate:function(){if(!We){We=!0;var nt=Tt.parentNode;document.querySelectorAll("body > *").forEach(function(ke){if(ke!==nt){var Ge=ke.getAttribute("aria-hidden");Ge!==null&&Ge!=="false"||(Xe.push(Ge),tt.push(ke),ke.setAttribute("aria-hidden","true"))}})}},deactivate:function(){We&&(We=!1,tt.forEach(function(nt,ke){var Ge=Xe[ke];Ge===null?nt.removeAttribute("aria-hidden"):nt.setAttribute("aria-hidden",Ge)}),Xe=[],tt=[])}}},[be,Ee]),Ye})({targetRef:Te,enabled:De&&k}),Ui=(function(ue){var be=ue.targetRef,Ee=ue.fallbackRef,Ye=ue.initialFocusRef,Tt=ue.enabled,We=B.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return B.useDebugValue(Tt?"Enabled":"Disabled"),B.useEffect(function(){if(!Tt)return We.current.deactivate(),void(We.current={activate:function(){},deactivate:function(){}});var Xe=Ee.current,tt=PX(be.current,{onActivate:void 0,initialFocus:Ye?function(){return(Ye==null?void 0:Ye.current)||Xe}:void 0,fallbackFocus:Xe,escapeDeactivates:!1,clickOutsideDeactivates:!1}),nt=!1;We.current={activate:function(){try{return nt?Promise.resolve():(nt=!0,Promise.resolve(tt.activate()).then(function(){return Promise.resolve(new Promise(function(ke){return setTimeout(function(){return ke(void 0)},0)})).then(function(){})}))}catch(ke){return Promise.reject(ke)}},deactivate:function(){nt&&(nt=!1,tt.deactivate())}}},[Tt,Ee,Ye,be]),We})({targetRef:Te,fallbackRef:bi,initialFocusRef:p||void 0,enabled:De&&k&&p!==!1}),wi=(function(ue){var be=ue.getSnapPoints,Ee=ue.heightRef,Ye=ue.lastSnapRef,Tt=ue.ready,We=(function(Ct){var he=Ct.contentRef,Ie=Ct.controlledMaxHeight,ze=Ct.footerEnabled,Et=Ct.footerRef,qn=Ct.headerEnabled,Rn=Ct.headerRef,Nn=Ct.registerReady,zi=Ct.resizeSourceRef,hi=B.useMemo(function(){return Nn("contentHeight")},[Nn]),qt=(function(wr,rr,sr){var xi=B.useMemo(function(){return rr("maxHeight")},[rr]),or=B.useState(function(){return fp(wr)||typeof window<"u"?window.innerHeight:0}),Hr=or[0],pi=or[1],Wt=Hr>0,Ar=B.useRef(0);return B.useDebugValue(wr?"controlled":"auto"),B.useEffect(function(){Wt&&xi()},[Wt,xi]),Rd(function(){if(wr)return pi(fp(wr)),void(sr.current="maxheightprop");var xr=function(){Ar.current||(Ar.current=requestAnimationFrame(function(){pi(window.innerHeight),sr.current="window",Ar.current=0}))};return window.addEventListener("resize",xr),pi(window.innerHeight),sr.current="window",xi(),function(){window.removeEventListener("resize",xr),cancelAnimationFrame(Ar.current)}},[wr,xi,sr]),Hr})(Ie,Nn,zi),dn=s0(Rn,{label:"headerHeight",enabled:qn,resizeSourceRef:zi}),qi=s0(he,{label:"contentHeight",enabled:!0,resizeSourceRef:zi}),ir=s0(Et,{label:"footerHeight",enabled:ze,resizeSourceRef:zi}),Gi=Math.min(qt-dn-ir,qi)+dn+ir;B.useDebugValue("minHeight: "+Gi);var ua=qi>0;return B.useEffect(function(){ua&&hi()},[ua,hi]),{maxHeight:qt,minHeight:Gi,headerHeight:dn,footerHeight:ir}})({contentRef:ue.contentRef,controlledMaxHeight:ue.controlledMaxHeight,footerEnabled:ue.footerEnabled,footerRef:ue.footerRef,headerEnabled:ue.headerEnabled,headerRef:ue.headerRef,registerReady:ue.registerReady,resizeSourceRef:ue.resizeSourceRef}),Xe=We.maxHeight,tt=We.minHeight,nt=We.headerHeight,ke=We.footerHeight,Ge=(function(Ct,he){var Ie=[].concat(Ct).map(fp).reduce(function(Rn,Nn){return Rn.add(Yc(Nn,0,he)),Rn},new Set),ze=Array.from(Ie),Et=Math.min.apply(Math,ze);if(Number.isNaN(Et))throw new TypeError("minSnap is NaN");var qn=Math.max.apply(Math,ze);if(Number.isNaN(qn))throw new TypeError("maxSnap is NaN");return{snapPoints:ze,minSnap:Et,maxSnap:qn}})(Tt?be({height:Ee.current,footerHeight:ke,headerHeight:nt,minHeight:tt,maxHeight:Xe}):[0],Xe),cn=Ge.snapPoints,Ai=Ge.minSnap,Ft=Ge.maxSnap;return B.useDebugValue("minSnap: "+Ai+", maxSnap:"+Ft),{minSnap:Ai,maxSnap:Ft,findSnap:function(Ct){var he=fp(typeof Ct=="function"?Ct({footerHeight:ke,headerHeight:nt,height:Ee.current,minHeight:tt,maxHeight:Xe,snapPoints:cn,lastSnap:Ye.current}):Ct);return cn.reduce(function(Ie,ze){return Math.abs(ze-he)<Math.abs(Ie-he)?ze:Ie},Ai)},maxHeight:Xe}})({contentRef:Le,controlledMaxHeight:T,footerEnabled:!!o,footerRef:xn,getSnapPoints:D,headerEnabled:l!==!1,headerRef:pt,heightRef:Cn,lastSnapRef:f,ready:De,registerReady:ee,resizeSourceRef:ui}),ci=wi.minSnap,di=wi.maxSnap,yn=wi.maxHeight,Fi=wi.findSnap,wt=B.useRef(yn),zt=B.useRef(ci),Ke=B.useRef(di),At=B.useRef(Fi),xt=B.useRef(0);Rd(function(){wt.current=yn,Ke.current=di,zt.current=ci,At.current=Fi,xt.current=Fi(C)},[Fi,C,yn,di,ci]);var Me=B.useCallback(function(ue){var be=ue.onRest,Ee=ue.config,Ye=(Ee=Ee===void 0?{}:Ee).velocity,Tt=Ye===void 0?1:Ye,We=Vp(Ee,uZ),Xe=Vp(ue,cZ);return new Promise(function(tt){return fe(ii({},Xe,{config:ii({velocity:Tt},We,{mass:1,tension:dZ,friction:Math.max(hp,hp+(hp-hp*Tt))}),onRest:function(){var nt=[].slice.call(arguments);tt.apply(void 0,nt),be==null||be.apply(void 0,nt)}}))})},[fe]),Bi=qW(aZ,{devTools:!1,actions:{onOpenCancel:B.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"OPEN"})},[]),onSnapCancel:B.useCallback(function(ue){return Ae.current==null?void 0:Ae.current({type:"SNAP",source:ue.snapSource})},[]),onCloseCancel:B.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"CLOSE"})},[]),onResizeCancel:B.useCallback(function(){return Ae.current==null?void 0:Ae.current({type:"RESIZE",source:ui.current})},[]),onOpenEnd:B.useCallback(function(){return Ce.current==null?void 0:Ce.current({type:"OPEN"})},[]),onSnapEnd:B.useCallback(function(ue,be){return Ce.current==null?void 0:Ce.current({type:"SNAP",source:ue.snapSource})},[]),onResizeEnd:B.useCallback(function(){return Ce.current==null?void 0:Ce.current({type:"RESIZE",source:ui.current})},[])},context:{initialState:d},services:{onSnapStart:B.useCallback(function(ue,be){try{return Promise.resolve(me.current==null?void 0:me.current({type:"SNAP",source:be.payload.source||"custom"}))}catch(Ee){return Promise.reject(Ee)}},[]),onOpenStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"OPEN"}))}catch(ue){return Promise.reject(ue)}},[]),onCloseStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"CLOSE"}))}catch(ue){return Promise.reject(ue)}},[]),onResizeStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"RESIZE",source:ui.current}))}catch(ue){return Promise.reject(ue)}},[]),onSnapEnd:B.useCallback(function(ue,be){try{return Promise.resolve(Ce.current==null?void 0:Ce.current({type:"SNAP",source:ue.snapSource}))}catch(Ee){return Promise.reject(Ee)}},[]),onOpenEnd:B.useCallback(function(){try{return Promise.resolve(Ce.current==null?void 0:Ce.current({type:"OPEN"}))}catch(ue){return Promise.reject(ue)}},[]),onCloseEnd:B.useCallback(function(){try{return Promise.resolve(Ce.current==null?void 0:Ce.current({type:"CLOSE"}))}catch(ue){return Promise.reject(ue)}},[]),onResizeEnd:B.useCallback(function(){try{return Promise.resolve(Ce.current==null?void 0:Ce.current({type:"RESIZE",source:ui.current}))}catch(ue){return Promise.reject(ue)}},[]),renderVisuallyHidden:B.useCallback(function(ue,be){try{return Promise.resolve(Me({y:xt.current,ready:0,maxHeight:wt.current,maxSnap:Ke.current,minSnap:xt.current,immediate:!0})).then(function(){})}catch(Ee){return Promise.reject(Ee)}},[Me]),activate:B.useCallback(function(ue,be){try{return se.current=!0,Promise.resolve(Promise.all([Vn.current.activate(),Ui.current.activate(),Oi.current.activate()])).then(function(){})}catch(Ee){return Promise.reject(Ee)}},[Oi,Ui,Vn]),deactivate:B.useCallback(function(){try{return Vn.current.deactivate(),Ui.current.deactivate(),Oi.current.deactivate(),se.current=!1,Promise.resolve()}catch(ue){return Promise.reject(ue)}},[Oi,Ui,Vn]),openImmediately:B.useCallback(function(){try{return Cn.current=xt.current,Promise.resolve(Me({y:xt.current,ready:1,maxHeight:wt.current,maxSnap:Ke.current,minSnap:xt.current,immediate:!0})).then(function(){})}catch(ue){return Promise.reject(ue)}},[Me]),openSmoothly:B.useCallback(function(){try{return Promise.resolve(Me({y:0,ready:1,maxHeight:wt.current,maxSnap:Ke.current,minSnap:xt.current,immediate:!0})).then(function(){return Cn.current=xt.current,Promise.resolve(Me({y:xt.current,ready:1,maxHeight:wt.current,maxSnap:Ke.current,minSnap:xt.current,immediate:In.current})).then(function(){})})}catch(ue){return Promise.reject(ue)}},[Me,In]),snapSmoothly:B.useCallback(function(ue,be){try{var Ee=At.current(ue.y);return Cn.current=Ee,f.current=Ee,Promise.resolve(Me({y:Ee,ready:1,maxHeight:wt.current,maxSnap:Ke.current,minSnap:zt.current,immediate:In.current,config:{velocity:ue.velocity}})).then(function(){})}catch(Ye){return Promise.reject(Ye)}},[Me,f,In]),resizeSmoothly:B.useCallback(function(){try{var ue=At.current(Cn.current);return Cn.current=ue,f.current=ue,Promise.resolve(Me({y:ue,ready:1,maxHeight:wt.current,maxSnap:Ke.current,minSnap:zt.current,immediate:ui.current!=="element"||In.current})).then(function(){})}catch(be){return Promise.reject(be)}},[Me,f,In]),closeSmoothly:B.useCallback(function(ue,be){try{return Me({minSnap:Cn.current,immediate:!0}),Cn.current=0,Promise.resolve(Me({y:0,maxHeight:wt.current,maxSnap:Ke.current,immediate:In.current})).then(function(){return Promise.resolve(Me({ready:0,immediate:!0})).then(function(){})})}catch(Ee){return Promise.reject(Ee)}},[Me,In])}}),Gr=Bi[0],ot=Bi[1];B.useEffect(function(){De&&ot(c?"OPEN":"CLOSE")},[c,ot,De]),Rd(function(){(yn||di||ci)&&ot("RESIZE")},[yn,di,ci,ot]),B.useEffect(function(){return function(){Vn.current.deactivate(),Ui.current.deactivate(),Oi.current.deactivate()}},[Oi,Ui,Vn]),B.useImperativeHandle(e,function(){return{snapTo:function(ue,be){var Ee=be===void 0?{}:be,Ye=Ee.velocity,Tt=Ye===void 0?1:Ye,We=Ee.source,Xe=We===void 0?"custom":We;ot("SNAP",{payload:{y:At.current(ue),velocity:Tt,source:Xe}})},get height(){return Cn.current}}},[ot]),B.useEffect(function(){var ue=Ve.current,be=function(Ye){kn.current&&Ye.preventDefault()},Ee=function(Ye){ue.scrollTop<0&&(requestAnimationFrame(function(){ue.style.overflow="hidden",ue.scrollTop=0,ue.style.removeProperty("overflow")}),Ye.preventDefault())};return q&&(ue.addEventListener("scroll",be),ue.addEventListener("touchmove",be),ue.addEventListener("touchstart",Ee)),function(){ue.removeEventListener("scroll",be),ue.removeEventListener("touchmove",be),ue.removeEventListener("touchstart",Ee)}},[q,Ve]);var fi=fX(function(ue){var be=ue.args,Ee=(be=be===void 0?[]:be)[0],Ye=(Ee=Ee===void 0?{}:Ee).closeOnTap,Tt=Ye!==void 0&&Ye,We=Ee.isContentDragging,Xe=We!==void 0&&We,tt=ue.cancel,nt=ue.direction[1],ke=ue.down,Ge=ue.first,cn=ue.last,Ai=ue.memo,Ft=Ai===void 0?re.y.getValue():Ai,Ct=ue.tap,he=ue.velocity,Ie=-1*ue.movement[1];if(!se.current)return tt(),Ft;if(v&&Tt&&Ct)return tt(),setTimeout(function(){return v()},0),Ft;if(Ct)return Ft;var ze=Ft+Ie,Et=Ie*he,qn=Math.max(zt.current,Math.min(Ke.current,ze+2*Et));if(!ke&&v&&nt>0&&ze+Et<zt.current/2)return tt(),v(),Ft;var Rn=ke?v||zt.current!==Ke.current?Ad(ze,v?0:zt.current,Ke.current,.55):ze<zt.current?Ad(ze,zt.current,2*Ke.current,.55):Ad(ze,zt.current/2,Ke.current,.55):qn;return q&&Xe?(Rn>=Ke.current&&(Rn=Ke.current),Ft===Ke.current&&Ve.current.scrollTop>0&&(Rn=Ke.current),kn.current=Rn<Ke.current):kn.current=!1,Ge&&ot("DRAG"),cn?(ot("SNAP",{payload:{y:Rn,velocity:he>.05?he:1,source:"dragging"}}),Ft):(fe({y:Rn,ready:1,maxHeight:wt.current,maxSnap:Ke.current,minSnap:zt.current,immediate:!0,config:{velocity:he}}),Ft)},{filterTaps:!0});if(Number.isNaN(Ke.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(zt.current))throw new TypeError("minSnapRef is NaN!!");var tn=(function(ue){var be,Ee=ue.spring,Ye=Yl([Ee.y,Ee.maxHeight],function(ke,Ge){return Math.round(Yc(Ge-ke,0,16))+"px"}),Tt=Yl([Ee.y,Ee.minSnap,Ee.maxSnap],function(ke,Ge,cn){return Yc(ke,Ge,cn)+"px"}),We=Yl([Ee.y,Ee.minSnap,Ee.maxSnap],function(ke,Ge,cn){return ke<Ge?Ge-ke+"px":ke>cn?cn-ke+"px":"0px"}),Xe=Yl([Ee.y,Ee.maxSnap],function(ke,Ge){return ke>=Ge?Math.ceil(ke-Ge):0}),tt=Yl([Ee.y,Ee.minSnap],function(ke,Ge){if(!Ge)return 0;var cn=Math.max(Ge/2-45,0);return Yc((ke-cn)*(1/(Math.min(Ge/2+45,Ge)-cn)+0),0,1)}),nt=Yl([Ee.y,Ee.minSnap],function(ke,Ge){return Ge?Yc(ke/Ge,0,1):0});return(be={})["--rsbs-content-opacity"]=tt,be["--rsbs-backdrop-opacity"]=nt,be["--rsbs-antigap-scale-y"]=Xe,be["--rsbs-overlay-translate-y"]=We,be["--rsbs-overlay-rounded"]=Ye,be["--rsbs-overlay-h"]=Tt,be})({spring:re});return Dn.createElement(RQ.div,ii({},z,{"data-rsbs-root":!0,"data-rsbs-state":hZ.find(Gr.matches),"data-rsbs-is-blocking":k,"data-rsbs-is-dismissable":!!v,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!o,className:r,ref:Te,style:ii({},tn,K,{opacity:re.ready})}),i,k&&Dn.createElement("div",ii({key:"backdrop","data-rsbs-backdrop":!0},fi({closeOnTap:!0}))),Dn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:bi,onKeyDown:function(ue){ue.key==="Escape"&&(ue.stopPropagation(),v&&v())}},l!==!1&&Dn.createElement("div",ii({key:"header","data-rsbs-header":!0,ref:pt},fi()),l),Dn.createElement("div",ii({key:"scroll","data-rsbs-scroll":!0,ref:Ve},q?fi({isContentDragging:!0}):{}),Dn.createElement("div",{"data-rsbs-content":!0,ref:Le},n)),o&&Dn.createElement("div",ii({key:"footer",ref:xn,"data-rsbs-footer":!0},fi()),o)))}),hZ=["closed","opening","open","closing","dragging","snapping","resizing"];function pZ(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function mZ(t){return t.minHeight}var gZ=["onSpringStart","onSpringEnd","skipInitialTransition"],yg=B.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,r=t.skipInitialTransition,o=Vp(t,gZ),l=B.useState(!1),c=l[0],d=l[1],f=B.useRef(),p=B.useRef(null),v=B.useRef(r&&o.open?"OPEN":"CLOSED");Rd(function(){if(o.open)return cancelAnimationFrame(f.current),d(!0),function(){v.current="CLOSED"}},[o.open]);var T=B.useCallback(function(C){return Promise.resolve(n==null?void 0:n(C)).then(function(){C.type==="OPEN"&&cancelAnimationFrame(f.current)})},[n]),b=B.useCallback(function(C){return Promise.resolve(i==null?void 0:i(C)).then(function(){C.type==="CLOSE"&&(f.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?Dn.createElement(OJ,{"data-rsbs-portal":!0},Dn.createElement(fZ,ii({},o,{lastSnapRef:p,ref:e,initialState:v.current,onSpringStart:T,onSpringEnd:b}))):null});const yZ=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,suggestedOutfits:o,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T,selectedOutfit:b,onSelectOutfit:C})=>{const N=document.documentElement.classList.contains("dark"),D=B.useRef(null);return B.useEffect(()=>{!r&&o.length>0&&D.current&&D.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[r,o.length]),S.jsx(yg,{open:t,onDismiss:l,className:N?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),S.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:L})=>L*.65,snapPoints:({minHeight:L,maxHeight:k})=>[L,k*.65,k*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx(A2,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,weatherInfo:c,weatherError:d}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),S.jsx("div",{ref:D,children:o.length>0&&S.jsx(ym,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:f,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T,selectedOutfit:b,onSelectOutfit:C})})]})})},vZ=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r,vacationPlan:o,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return S.jsx(yg,{open:t,onDismiss:c,className:d?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),S.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:f})=>f*.6,snapPoints:({maxHeight:f})=>[f*.55,f*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[S.jsx(x2,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&S.jsx(C2,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},_Z=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:r})=>{const[o,l]=B.useState(new Set),c=new Set(n.flatMap(b=>b.itemIds)),f=e.filter(b=>!c.has(b.id)).reduce((b,C)=>(b[C.category]||(b[C.category]=[]),b[C.category].push(C),b),{}),p=b=>{l(C=>{const N=new Set(C);return N.has(b)?N.delete(b):N.add(b),N})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const b=window.prompt("Donnez un nom  cet ensemble :");b&&r(b,Array.from(o))},T=document.documentElement.classList.contains("dark");return S.jsx(yg,{open:t,onDismiss:i,className:T?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),S.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:S.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[S.jsx(og,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:b})=>b*.6,snapPoints:({maxHeight:b})=>[b*.6,b*.85],children:S.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),S.jsx("div",{className:"space-y-4",children:Object.keys(f).map(b=>f[b].length>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:b}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:f[b].map(C=>{const N=o.has(C.id);return S.jsxs("button",{onClick:()=>p(C.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:N?"#D4AF37":"transparent"},children:[N&&S.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(BT,{})}),S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:C.imageSrc,alt:C.analysis,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:C.analysis})]},C.id)})})]},b))})]})})},TZ=(t,e)=>{const n=Ou(zr,"users",t,"items"),i=yT(n);return ST(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (items listener):",o)})},EZ=async(t,e)=>{try{const n=Ou(zr,"users",t,"items");return(await ET(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},_1=async(t,e,n)=>{try{const i=Uu(zr,"users",t,"items",e);await _F(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},T1=async(t,e)=>{try{const n=Uu(zr,"users",t,"items",e);await TT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},SZ=(t,e)=>{const n=Ou(zr,"users",t,"favoriteOutfits"),i=yT(n);return ST(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},bZ=async(t,e)=>{try{const n=Ou(zr,"users",t,"favoriteOutfits");return(await ET(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},wZ=async(t,e)=>{try{const n=Uu(zr,"users",t,"favoriteOutfits",e);await TT(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},AZ=(t,e)=>{const n=Ou(zr,"users",t,"sets"),i=yT(n);return ST(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (sets listener):",o)})},xZ=async(t,e)=>{try{const n=Ou(zr,"users",t,"sets");return(await ET(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},CZ=async(t,e)=>{try{const n=Uu(zr,"users",t,"sets",e);await TT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},IZ=async(t,e,n)=>{try{const i=hD(gD,`users/${t}/clothing/${n}.jpg`);return await CB(i,e,"data_url"),await fD(i)}catch(i){throw console.error("Erreur upload vtement:",i),i}},RZ=async(t,e)=>{try{const n=await NZ(e,1024),i=hD(gD,`users/${t}/profile/model_photo.jpg`);return await xB(i,n),await fD(i)}catch(n){throw console.error("Erreur upload photo profil:",n),n}},NZ=(t,e)=>new Promise((n,i)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=o=>{var c;const l=new Image;l.src=(c=o.target)==null?void 0:c.result,l.onload=()=>{const d=e/l.width,f=document.createElement("canvas");f.width=e,f.height=l.height*d;const p=f.getContext("2d");p?(p.drawImage(l,0,0,f.width,f.height),f.toBlob(v=>{v?n(v):i(new Error("Blob creation failed"))},"image/jpeg",.85)):i(new Error("Canvas error"))}},r.onerror=o=>i(o)}),wk=B.createContext(void 0),PZ=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=r=>{var l;const o=new Image;o.src=(l=r.target)==null?void 0:l.result,o.onload=()=>{const c=document.createElement("canvas"),d=800,f=d/o.width;c.width=d,c.height=o.height*f;const p=c.getContext("2d");p?(p.drawImage(o,0,0,c.width,c.height),e(c.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=c=>n(c)},i.onerror=r=>n(r)}),DZ=({children:t,user:e})=>{const[n,i]=B.useState([]),[r,o]=B.useState([]),[l,c]=B.useState([]),[d,f]=B.useState(localStorage.getItem("dressmup_user_model_url")),[p,v]=B.useState(!1),[T,b]=B.useState(!0);B.useEffect(()=>{d&&localStorage.setItem("dressmup_user_model_url",d)},[d]),B.useEffect(()=>{if(e){const I=TZ(e.uid,V=>{i(V),b(!1)}),R=AZ(e.uid,V=>{o(V)}),P=SZ(e.uid,V=>{c(V)});return()=>{I(),R(),P()}}else i([]),o([]),c([]),b(!1)},[e]);const C=B.useCallback(async I=>{if(e)try{const R=await RZ(e.uid,I);f(R)}catch(R){throw console.error("Erreur mise  jour photo modle:",R),R}},[e]),N=B.useCallback(async I=>{if(!(I.length===0||!e)){v(!0);try{const R=I.map(z=>PZ(z)),P=await Promise.all(R),V=P.map(z=>z.split(",")[1]),F=await P7(V),q=Math.min(F.length,I.length);for(let z=0;z<q;z++){const xe=F[z];let De="";try{De=await EZ(e.uid,{...xe,createdAt:Date.now()});const ee=await IZ(e.uid,P[z],De);await _1(e.uid,De,{imageSrc:ee})}catch(ee){console.error(`chec pour ${I[z].name}.`,ee),De&&await T1(e.uid,De)}}}catch(R){console.error("Erreur lot:",R)}finally{v(!1)}}},[e]),D=B.useCallback(async I=>{e&&await T1(e.uid,I)},[e]),L=B.useCallback(async I=>{e&&await _1(e.uid,I.id,I)},[e]),k=B.useCallback(async I=>{if(!e)return;const{id:R,...P}=I;await bZ(e.uid,P)},[e]),U=B.useCallback(async I=>{e&&await wZ(e.uid,I)},[e]),H=B.useCallback(async(I,R)=>{var F;if(!e)return;const P=((F=n.find(q=>q.id===R[0]))==null?void 0:F.imageSrc)||"",V={name:I,itemIds:R,imageSrc:P};await xZ(e.uid,V)},[e,n]),K=B.useCallback(async I=>{e&&await CZ(e.uid,I)},[e]),G={clothingItems:n,clothingSets:r,favoriteOutfits:l,userModelImage:d,setUserModelImage:f,updateUserModelPhoto:C,isAnalyzing:p,analyzeClothingItems:N,deleteClothingItem:D,updateClothingItem:L,createClothingSet:H,deleteClothingSet:K,addFavoriteOutfit:k,deleteFavoriteOutfit:U,loading:T};return S.jsx(wk.Provider,{value:G,children:t})},Ak=()=>{const t=B.useContext(wk);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},MZ=({onClose:t})=>{const{userModelImage:e,updateUserModelPhoto:n}=Ak(),i=B.useRef(null),[r,o]=B.useState(!1),[l,c]=B.useState(e),d=async f=>{var T;const p=(T=f.target.files)==null?void 0:T[0];if(!p)return;const v=URL.createObjectURL(p);c(v),o(!0);try{await n(p)}catch{alert("Erreur lors de l'envoi de la photo.")}finally{o(!1)}};return S.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4",onClick:t,children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full p-6",onClick:f=>f.stopPropagation(),children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-2 text-gold",children:"Mon Mannequin Virtuel"}),S.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Ajoutez une photo de vous (de plain-pied idalement) pour essayer vos tenues virtuellement."}),S.jsxs("div",{onClick:()=>{var f;return!r&&((f=i.current)==null?void 0:f.click())},className:"relative aspect-[3/4] bg-gray-100 dark:bg-onyx rounded-xl overflow-hidden cursor-pointer border-2 border-dashed border-gray-300 dark:border-gray-700 hover:border-gold transition-colors group",children:[S.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:d,disabled:r}),l?S.jsx("img",{src:l,alt:"Mon mannequin",className:"w-full h-full object-cover"}):S.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400",children:[S.jsx(lm,{}),S.jsx("span",{className:"mt-2 text-sm font-medium",children:"Ajouter une photo"})]}),r&&S.jsxs("div",{className:"absolute inset-0 bg-black/50 flex flex-col items-center justify-center text-white",children:[S.jsx(UT,{className:"h-8 w-8 text-white mb-2"}),S.jsx("span",{className:"text-sm font-medium",children:"Envoi en cours..."})]}),!r&&S.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:S.jsx("span",{className:"bg-white/90 text-onyx px-4 py-2 rounded-full text-sm font-bold shadow-lg",children:"Changer la photo"})})]}),S.jsx("div",{className:"mt-6 flex justify-end",children:S.jsx("button",{onClick:t,className:"px-6 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-colors",children:"Termin"})})]})})},kZ=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c,selectedOutfit:d,onSelectOutfit:f})=>{const p=document.documentElement.classList.contains("dark");return S.jsx(yg,{open:t,onDismiss:e,className:p?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:v})=>v*.65,snapPoints:({maxHeight:v})=>[v*.65,v*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:r.length>0?S.jsx(ym,{outfits:r,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c,selectedOutfit:d,onSelectOutfit:f}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},VZ=({imageUrl:t,onClose:e})=>(B.useEffect(()=>{const n=i=>{i.key==="Escape"&&e()};return window.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e]),S.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:999999},onClick:e,role:"dialog","aria-modal":"true",children:[S.jsx("div",{className:"absolute inset-0 bg-onyx/80 backdrop-blur-md",style:{zIndex:999999}}),S.jsxs("div",{className:"relative bg-white dark:bg-raisin-black rounded-lg shadow-2xl p-4",style:{zIndex:1e6},onClick:n=>n.stopPropagation(),children:[S.jsx("img",{src:t,alt:"Rendu visuel de la tenue",className:"max-w-[85vw] max-h-[75vh] object-contain rounded-lg"}),S.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Rendu gnr par IA (image factice)."}),S.jsx("button",{onClick:n=>{n.stopPropagation(),e()},onTouchEnd:n=>{n.stopPropagation(),e()},className:"absolute -top-3 -right-3 p-3 bg-red-500 border-4 border-white rounded-full text-white shadow-2xl hover:bg-red-600 active:scale-95 touch-none",style:{zIndex:1000001},"aria-label":"Fermer",children:S.jsx(FT,{})})]})]})),No=t=>{const e=t instanceof Error?t.message:String(t);return e.includes("API_KEY_HTTP_REFERRER_BLOCKED")||e.includes("403")?" Accs refus par Google : Domaine non autoris. Vrifiez la console Google Cloud.":e.includes("429")||e.includes("payment method")||e.includes("throttled")?" Limite de gnration atteinte. Veuillez attendre quelques secondes ou ajouter un moyen de paiement sur Replicate.":e.includes("prediction")?" Erreur lors de la gnration visuelle. Le service est peut-tre surcharg.":e.includes("404")?" Modle introuvable. Veuillez ressayer plus tard.":e.includes("API_KEY_INVALID")?" Cl API invalide. Vrifiez votre configuration.":e},LZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState(null),[r,o]=B.useState([]),[l,c]=B.useState(null),[d,f]=B.useState(!1),[p,v]=B.useState(null),[T,b]=B.useState(!1),[C,N]=B.useState(null),[D,L]=B.useState(!1),[k,U]=B.useState("home"),[H,K]=B.useState(!1),[G,I]=B.useState(!1),[R,P]=B.useState(!1),[V,F]=B.useState(!1),[q,z]=B.useState(!1),[xe,De]=B.useState(null),[ee,se]=B.useState(null),[me,Ae]=B.useState(!1),[Ce,$]=B.useState(0),[Z,pe]=B.useState(null),[re,fe]=B.useState(null),[Te,Ve]=B.useState(!1),[Le,pt]=B.useState(""),[xn,bi]=B.useState("favorites");B.useEffect(()=>{if(n){const he=n.includes("Accs refus")?1e4:5e3,Ie=setTimeout(()=>i(null),he);return()=>clearTimeout(Ie)}},[n]);const[Cn,ui]=B.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:kn,clothingSets:In,isAnalyzing:Vn,analyzeClothingItems:Oi,deleteClothingItem:Ui,createClothingSet:wi,updateClothingItem:ci,deleteClothingSet:di,favoriteOutfits:yn,addFavoriteOutfit:Fi,deleteFavoriteOutfit:wt,userModelImage:zt,loading:Ke}=Ak(),[At,xt]=B.useState(null),Me=Dn.useMemo(()=>(kn||[]).sort((Ie,ze)=>(ze.isFavorite?1:0)-(Ie.isFavorite?1:0)),[kn]),Bi=B.useCallback(he=>{const Ie=yn.find(ze=>ze.titre===he.titre&&ze.description===he.description);Ie?(wt(Ie.id),xt("Retir des favoris"),Ps.light()):(Fi(he),xt("Ajout aux favoris "),Ps.success()),setTimeout(()=>xt(null),2e3)},[yn,Fi,wt]),Gr=B.useCallback(he=>{(l==null?void 0:l.titre)===he.titre&&(l==null?void 0:l.description)===he.description?(c(null),xt("Slection annule"),Ps.light()):(c(he),xt("Tenue choisie "),Ps.success()),setTimeout(()=>xt(null),2e3)},[l]),ot=Dn.useMemo(()=>In||[],[In]),fi=Dn.useMemo(()=>new Set(ot.flatMap(he=>he.itemIds||[])),[ot]);B.useEffect(()=>{const he=async Ie=>{const ze=Ie.coords.latitude,Et=Ie.coords.longitude,qn=HD.openWeatherApiKey,Rn=`https://api.openweathermap.org/data/2.5/weather?lat=${ze}&lon=${Et}&appid=${qn}&units=metric&lang=fr`;try{const Nn=await fetch(Rn);if(!Nn.ok)throw new Error("Impossible de rcuprer la mto.");const zi=await Nn.json(),hi=`${Math.round(zi.main.temp)}C, ${zi.weather[0].description},  ${zi.name}`;De(hi),se(null)}catch{se("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(he,()=>se("Activez la golocalisation pour la mto.")):se("Golocalisation non supporte.")},[]);const tn=B.useCallback(async(he,Ie)=>{if(Me.length===0){i("Veuillez d'abord ajouter des vtements.");return}f(!0),i(null);const ze=xe?`Mto actuelle : ${xe}. Occasion : ${he}`:`Occasion : ${he}`;try{const Et=await D7(Me,ot,ze,Ie);o(Et)}catch(Et){i(No(Et))}finally{f(!1)}},[Me,ot,xe]),ue=B.useCallback(async(he,Ie,ze)=>{if(Me.length===0){i("Veuillez d'abord ajouter des vtements.");return}b(!0),i(null);try{const Et=await k7(Me,ot,he,Ie,ze);v(Et)}catch(Et){i(No(Et))}finally{b(!1)}},[Me,ot]),be=B.useCallback(async()=>{if(Me.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}L(!0),i(null);try{const he=await jD(Me,ot);N(he)}catch(he){i(No(he))}finally{L(!1)}},[Me,ot]),Ee=B.useCallback(async he=>{if(pe(he.titre),i(null),!zt){pe(null),z(!0),xt("Ajoutez une photo de vous pour l'essayage ");return}try{const Ie=he.vetements.map(Et=>Me.find(qn=>qn.id===Et.id||qn.analysis===Et.description)).filter(Et=>!!Et);if(Ie.length===0)throw new Error("Impossible de retrouver les articles originaux pour le rendu.");const ze=await L7(Ie,zt);fe(ze)}catch(Ie){i(No(Ie))}finally{pe(null)}},[Me,zt]),Ye=B.useCallback(()=>K(!0),[]),Tt=B.useCallback(()=>I(!0),[]),We=he=>e(he),Xe=()=>e(null),tt=he=>{Ui(he).catch(Ie=>i(No(Ie))),e(null)},nt=he=>{ci(he).catch(Ie=>i(No(Ie))),e(he)},ke=he=>{const Ie=`Focus sur l'article : ${he.analysis}`;tn(Ie,he),e(null),window.innerWidth<768&&K(!0)},Ge=B.useCallback((he,Ie)=>{wi(he,Ie).catch(ze=>i(No(ze)))},[wi]),cn=B.useCallback(he=>{di(he).catch(Ie=>i(No(Ie)))},[di]);B.useCallback(async()=>{Ae(!0),Ps.medium(),await new Promise(he=>setTimeout(he,1e3)),Ae(!1),Ps.success()},[]);const Ai={hauts:Me.filter(he=>he.category==="Hauts").length,bas:Me.filter(he=>he.category==="Bas").length,chaussures:Me.filter(he=>he.category==="Chaussures").length,accessoires:Me.filter(he=>he.category==="Accessoires").length},Ft=B.useMemo(()=>{if(k==="home")return[];let he=Me.filter(Ie=>k==="hauts"?Ie.category==="Hauts":k==="bas"?Ie.category==="Bas":k==="chaussures"?Ie.category==="Chaussures":k==="accessoires"?Ie.category==="Accessoires":!1);if(Le.trim()){const Ie=Le.toLowerCase();he=he.filter(ze=>ze.analysis.toLowerCase().includes(Ie)||ze.color.toLowerCase().includes(Ie)||ze.material.toLowerCase().includes(Ie))}return[...he].sort((Ie,ze)=>{switch(xn){case"favorites":return(ze.isFavorite?1:0)-(Ie.isFavorite?1:0);case"newest":return(ze.createdAt||0)-(Ie.createdAt||0);case"oldest":return(Ie.createdAt||0)-(ze.createdAt||0);case"color":return Ie.color.localeCompare(ze.color);default:return 0}})},[k,Me,Le,xn]),Ct=H||G||R||!!t||!!C||!!re||q;return B.useEffect(()=>{const he=document.querySelector("header");he&&(he.style.zIndex=Ct?"10":"50")},[Ct]),B.useEffect(()=>{if(!Vn&&Me.length>Ce&&Ce>0){const he=Me.length-Ce;xt(`${he} vtement${he>1?"s":""} ajout${he>1?"s":""} `),setTimeout(()=>xt(null),2e3)}$(Me.length)},[Vn,Me.length]),S.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[S.jsx("button",{onClick:()=>z(!0),className:"fixed top-24 right-4 z-40 bg-white dark:bg-onyx p-2 rounded-full shadow-lg border border-gold/30 md:hidden",title:"Mon mannequin",children:zt?S.jsx("img",{src:zt,alt:"Profil",className:"w-8 h-8 rounded-full object-cover"}):S.jsx("div",{className:"w-8 h-8 bg-gold/20 rounded-full flex items-center justify-center text-xs",children:""})}),n&&S.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between shadow-sm animate-pulse",role:"alert",children:[S.jsxs("div",{className:"flex-1 mr-2",children:[S.jsx("strong",{className:"font-bold block mb-1",children:"Attention :"}),S.jsx("span",{className:"block text-sm leading-relaxed",children:n})]}),S.jsx("button",{onClick:()=>i(null),className:"p-1.5 hover:bg-red-500/30 rounded-full transition-colors flex-shrink-0","aria-label":"Fermer",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[S.jsx("div",{className:"hidden md:flex justify-end mb-4",children:S.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg hover:border-gold transition-colors",children:[zt?S.jsx("img",{src:zt,alt:"Profil",className:"w-8 h-8 rounded-full object-cover"}):S.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),S.jsx("span",{className:"text-sm font-medium",children:"Mon Mannequin Virtuel"})]})}),Me.length>=3&&S.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),S.jsx("button",{onClick:be,disabled:D,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:D?"Analyse...":"Analyser ma garde-robe"})]}),S.jsx("div",{className:"hidden md:block",children:S.jsx(SJ,{onAnalyze:Oi,isAnalyzing:Vn})}),S.jsx("div",{className:"hidden md:block",children:S.jsx(xJ,{clothingItems:Me,clothingSets:ot,onItemClick:We,onDeleteItem:tt,onCreateSet:Ge,isLoading:Ke})}),S.jsxs("div",{className:"md:hidden",children:[k==="home"&&S.jsx(NJ,{onAnalyzeWardrobe:be,onScrollToOutfits:Ye,onScrollToVacation:Tt,onStartSetCreation:()=>P(!0),onShowFavorites:()=>F(!0),isAnalyzingWardrobe:D,clothingCount:Me.length,favoriteOutfitCount:yn.length}),k!=="home"&&S.jsxs("div",{className:"pb-24",children:[me&&S.jsx("div",{className:"flex justify-center py-4",children:S.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),S.jsxs("div",{className:"text-center py-4 px-4",children:[S.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:k}),S.jsxs("p",{className:"text-sm text-gray-500",children:[Ft.length," vtement",Ft.length>1?"s":""]})]}),S.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[S.jsxs("div",{className:"relative",children:[S.jsx(YD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:Le,onChange:he=>pt(he.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),Le&&S.jsx("button",{onClick:()=>pt(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:S.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"relative",children:[S.jsx(JD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsxs("select",{value:xn,onChange:he=>bi(he.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[S.jsx("option",{value:"favorites",children:"Favoris d'abord"}),S.jsx("option",{value:"newest",children:"Plus rcents"}),S.jsx("option",{value:"oldest",children:"Plus anciens"}),S.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),S.jsx(um,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),Ft.length>0?S.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Ft.map(he=>S.jsxs("div",{onClick:()=>We(he),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[he.isFavorite?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Bd,{className:"w-4 h-4"})}):fi.has(he.id)?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(og,{})}):null,S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:he.imageSrc,alt:he.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),S.jsxs("div",{className:"p-3",children:[S.jsx("p",{className:"text-sm font-medium line-clamp-2",children:he.analysis}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:he.color})]})]},he.id))}):S.jsx("div",{className:"text-center py-12 px-4",children:Le?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',Le,'"']}),S.jsx("button",{onClick:()=>pt(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),S.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[S.jsx("div",{id:"outfit-generator",children:S.jsx(A2,{clothingItems:Me,clothingSets:ot,onGenerate:tn,isGenerating:d,weatherInfo:xe,weatherError:ee})}),r.length>0&&S.jsx(ym,{outfits:r,allClothingItems:Me,allClothingSets:ot,favoriteOutfits:yn,onToggleFavorite:Bi,onGenerateVisual:Ee,generatingVisualFor:Z,selectedOutfit:l,onSelectOutfit:Gr}),yn.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>Ve(!Te),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Bd,{className:"text-gold w-5 h-5"}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",yn.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${Te?"rotate-180":""} text-gray-400`,children:S.jsx(um,{})})]}),Te&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(ym,{outfits:yn,allClothingItems:Me,allClothingSets:ot,favoriteOutfits:yn,onToggleFavorite:Bi,onGenerateVisual:Ee,generatingVisualFor:Z,selectedOutfit:l,onSelectOutfit:Gr})})]}),S.jsx("div",{id:"vacation-planner",children:S.jsx(x2,{clothingItems:Me,clothingSets:ot,onGeneratePlan:ue,isGenerating:T})}),p&&S.jsx(C2,{plan:p,allClothingItems:Me,allClothingSets:ot,onCreateSet:Ge})]})]}),t&&S.jsx(IJ,{item:t,clothingSets:ot,onClose:Xe,onUpdate:nt,onGenerateFrom:ke,onRemoveSet:cn,onDelete:tt}),C&&S.jsx(DJ,{analysis:C,onClose:()=>N(null)}),re&&S.jsx(VZ,{imageUrl:re,onClose:()=>fe(null)}),S.jsx(RJ,{onFilesSelected:Oi,isAnalyzing:Vn,isOtherModalOpen:Ct}),S.jsx(PJ,{activeTab:k,onTabChange:U,counts:Ai}),S.jsx(yZ,{open:H,clothingItems:Me,clothingSets:ot,onGenerate:tn,isGenerating:d,suggestedOutfits:r,onClose:()=>K(!1),weatherInfo:xe,weatherError:ee,favoriteOutfits:yn,onToggleFavorite:Bi,onGenerateVisual:Ee,generatingVisualFor:Z,selectedOutfit:l,onSelectOutfit:Gr}),S.jsx(vZ,{open:G,clothingItems:Me,clothingSets:ot,onGeneratePlan:ue,isGenerating:T,vacationPlan:p,onCreateSet:Ge,onClose:()=>I(!1)}),S.jsx(_Z,{open:R,clothingItems:Me,clothingSets:ot,onClose:()=>P(!1),onCreateSet:(he,Ie)=>{Ge(he,Ie),P(!1)}}),S.jsx(kZ,{open:V,onClose:()=>F(!1),allClothingItems:Me,allClothingSets:ot,favoriteOutfits:yn,onToggleFavorite:Bi,onGenerateVisual:Ee,generatingVisualFor:Z,selectedOutfit:l,onSelectOutfit:Gr}),q&&S.jsx(MZ,{onClose:()=>z(!1)}),Cn&&S.jsx(cL,{onComplete:()=>ui(!1)}),At&&S.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:S.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[At.includes("")&&S.jsx("span",{className:"animate-pulse",children:""}),At.includes("Retir")&&S.jsx("span",{children:""}),At.includes("ajout")&&!At.includes("")&&S.jsx("span",{children:""}),S.jsx("span",{children:At.replace("","").trim()})]})})]})},OZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState("dark"),[r,o]=B.useState(!1);B.useEffect(()=>{const c=Y4(La,d=>{e(d),d&&o(!1)});return()=>c()},[]),B.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const l=()=>{i(c=>c==="light"?"dark":"light")};return S.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?S.jsxs(S.Fragment,{children:[S.jsx(j7,{theme:n,toggleTheme:l,children:S.jsx(yI,{user:t})}),S.jsx(DZ,{user:t,children:S.jsx(LZ,{})})]}):r?S.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 animate-slide-up",children:S.jsxs("div",{className:"w-full max-w-md",children:[S.jsx("button",{onClick:()=>o(!1),className:"mb-4 flex items-center gap-2 text-gray-500 hover:text-gold transition-colors text-sm font-medium",children:" Retour"}),S.jsx(yI,{user:t})]})}):S.jsx(EJ,{onGetStarted:()=>o(!0)})})},xk=document.getElementById("root");if(!xk)throw new Error("L'lment root est introuvable dans le DOM");const UZ=uL.createRoot(xk);UZ.render(S.jsx(Dn.StrictMode,{children:S.jsx(OZ,{})}));
