(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function tS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vp={exports:{}},Ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function JR(){if(Yv)return Ol;Yv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:u,ref:o!==void 0?o:null,props:l}}return Ol.Fragment=e,Ol.jsx=t,Ol.jsxs=t,Ol}var Kv;function YR(){return Kv||(Kv=1,vp.exports=JR()),vp.exports}var I=YR(),Tp={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function KR(){if($v)return be;$v=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function b(q){return q===null||typeof q!="object"?null:(q=S&&q[S]||q["@@iterator"],typeof q=="function"?q:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,G={};function te(q,j,oe){this.props=q,this.context=j,this.refs=G,this.updater=oe||U}te.prototype.isReactComponent={},te.prototype.setState=function(q,j){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,j,"setState")},te.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function K(){}K.prototype=te.prototype;function X(q,j,oe){this.props=q,this.context=j,this.refs=G,this.updater=oe||U}var ie=X.prototype=new K;ie.constructor=X,B(ie,te.prototype),ie.isPureReactComponent=!0;var le=Array.isArray;function de(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function x(q,j,oe){var he=oe.ref;return{$$typeof:n,type:q,key:j,ref:he!==void 0?he:null,props:oe}}function D(q,j){return x(q.type,j,q.props)}function V(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function O(q){var j={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(oe){return j[oe]})}var P=/\/+/g;function st(q,j){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):j.toString(36)}function ft(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(de,de):(q.status="pending",q.then(function(j){q.status==="pending"&&(q.status="fulfilled",q.value=j)},function(j){q.status==="pending"&&(q.status="rejected",q.reason=j)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function z(q,j,oe,he,Ae){var ue=typeof q;(ue==="undefined"||ue==="boolean")&&(q=null);var ye=!1;if(q===null)ye=!0;else switch(ue){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(q.$$typeof){case n:case e:ye=!0;break;case v:return ye=q._init,z(ye(q._payload),j,oe,he,Ae)}}if(ye)return Ae=Ae(q),ye=he===""?"."+st(q,0):he,le(Ae)?(oe="",ye!=null&&(oe=ye.replace(P,"$&/")+"/"),z(Ae,j,oe,"",function(St){return St})):Ae!=null&&(V(Ae)&&(Ae=D(Ae,oe+(Ae.key==null||q&&q.key===Ae.key?"":(""+Ae.key).replace(P,"$&/")+"/")+ye)),j.push(Ae)),1;ye=0;var Pe=he===""?".":he+":";if(le(q))for(var De=0;De<q.length;De++)he=q[De],ue=Pe+st(he,De),ye+=z(he,j,oe,ue,Ae);else if(De=b(q),typeof De=="function")for(q=De.call(q),De=0;!(he=q.next()).done;)he=he.value,ue=Pe+st(he,De++),ye+=z(he,j,oe,ue,Ae);else if(ue==="object"){if(typeof q.then=="function")return z(ft(q),j,oe,he,Ae);throw j=String(q),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return ye}function ae(q,j,oe){if(q==null)return q;var he=[],Ae=0;return z(q,he,"","",function(ue){return j.call(oe,ue,Ae++)}),he}function _e(q){if(q._status===-1){var j=q._result;j=j(),j.then(function(oe){(q._status===0||q._status===-1)&&(q._status=1,q._result=oe)},function(oe){(q._status===0||q._status===-1)&&(q._status=2,q._result=oe)}),q._status===-1&&(q._status=0,q._result=j)}if(q._status===1)return q._result.default;throw q._result}var ze=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Je={map:ae,forEach:function(q,j,oe){ae(q,function(){j.apply(this,arguments)},oe)},count:function(q){var j=0;return ae(q,function(){j++}),j},toArray:function(q){return ae(q,function(j){return j})||[]},only:function(q){if(!V(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return be.Activity=E,be.Children=Je,be.Component=te,be.Fragment=t,be.Profiler=o,be.PureComponent=X,be.StrictMode=s,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,be.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},be.cache=function(q){return function(){return q.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(q,j,oe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var he=B({},q.props),Ae=q.key;if(j!=null)for(ue in j.key!==void 0&&(Ae=""+j.key),j)!N.call(j,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&j.ref===void 0||(he[ue]=j[ue]);var ue=arguments.length-2;if(ue===1)he.children=oe;else if(1<ue){for(var ye=Array(ue),Pe=0;Pe<ue;Pe++)ye[Pe]=arguments[Pe+2];he.children=ye}return x(q.type,Ae,he)},be.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},be.createElement=function(q,j,oe){var he,Ae={},ue=null;if(j!=null)for(he in j.key!==void 0&&(ue=""+j.key),j)N.call(j,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=j[he]);var ye=arguments.length-2;if(ye===1)Ae.children=oe;else if(1<ye){for(var Pe=Array(ye),De=0;De<ye;De++)Pe[De]=arguments[De+2];Ae.children=Pe}if(q&&q.defaultProps)for(he in ye=q.defaultProps,ye)Ae[he]===void 0&&(Ae[he]=ye[he]);return x(q,ue,Ae)},be.createRef=function(){return{current:null}},be.forwardRef=function(q){return{$$typeof:d,render:q}},be.isValidElement=V,be.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:_e}},be.memo=function(q,j){return{$$typeof:m,type:q,compare:j===void 0?null:j}},be.startTransition=function(q){var j=M.T,oe={};M.T=oe;try{var he=q(),Ae=M.S;Ae!==null&&Ae(oe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(de,ze)}catch(ue){ze(ue)}finally{j!==null&&oe.types!==null&&(j.types=oe.types),M.T=j}},be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},be.use=function(q){return M.H.use(q)},be.useActionState=function(q,j,oe){return M.H.useActionState(q,j,oe)},be.useCallback=function(q,j){return M.H.useCallback(q,j)},be.useContext=function(q){return M.H.useContext(q)},be.useDebugValue=function(){},be.useDeferredValue=function(q,j){return M.H.useDeferredValue(q,j)},be.useEffect=function(q,j){return M.H.useEffect(q,j)},be.useEffectEvent=function(q){return M.H.useEffectEvent(q)},be.useId=function(){return M.H.useId()},be.useImperativeHandle=function(q,j,oe){return M.H.useImperativeHandle(q,j,oe)},be.useInsertionEffect=function(q,j){return M.H.useInsertionEffect(q,j)},be.useLayoutEffect=function(q,j){return M.H.useLayoutEffect(q,j)},be.useMemo=function(q,j){return M.H.useMemo(q,j)},be.useOptimistic=function(q,j){return M.H.useOptimistic(q,j)},be.useReducer=function(q,j,oe){return M.H.useReducer(q,j,oe)},be.useRef=function(q){return M.H.useRef(q)},be.useState=function(q){return M.H.useState(q)},be.useSyncExternalStore=function(q,j,oe){return M.H.useSyncExternalStore(q,j,oe)},be.useTransition=function(){return M.H.useTransition()},be.version="19.2.0",be}var Qv;function Tm(){return Qv||(Qv=1,Tp.exports=KR()),Tp.exports}var Ce=Tm();const $R=tS(Ce);var Ep={exports:{}},ql={},Sp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function QR(){return Xv||(Xv=1,(function(n){function e(z,ae){var _e=z.length;z.push(ae);e:for(;0<_e;){var ze=_e-1>>>1,Je=z[ze];if(0<o(Je,ae))z[ze]=ae,z[_e]=Je,_e=ze;else break e}}function t(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var ae=z[0],_e=z.pop();if(_e!==ae){z[0]=_e;e:for(var ze=0,Je=z.length,q=Je>>>1;ze<q;){var j=2*(ze+1)-1,oe=z[j],he=j+1,Ae=z[he];if(0>o(oe,_e))he<Je&&0>o(Ae,oe)?(z[ze]=Ae,z[he]=_e,ze=he):(z[ze]=oe,z[j]=_e,ze=j);else if(he<Je&&0>o(Ae,_e))z[ze]=Ae,z[he]=_e,ze=he;else break e}}return ae}function o(z,ae){var _e=z.sortIndex-ae.sortIndex;return _e!==0?_e:z.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],m=[],v=1,E=null,S=3,b=!1,U=!1,B=!1,G=!1,te=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function ie(z){for(var ae=t(m);ae!==null;){if(ae.callback===null)s(m);else if(ae.startTime<=z)s(m),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(m)}}function le(z){if(B=!1,ie(z),!U)if(t(p)!==null)U=!0,de||(de=!0,O());else{var ae=t(m);ae!==null&&ft(le,ae.startTime-z)}}var de=!1,M=-1,N=5,x=-1;function D(){return G?!0:!(n.unstable_now()-x<N)}function V(){if(G=!1,de){var z=n.unstable_now();x=z;var ae=!0;try{e:{U=!1,B&&(B=!1,K(M),M=-1),b=!0;var _e=S;try{t:{for(ie(z),E=t(p);E!==null&&!(E.expirationTime>z&&D());){var ze=E.callback;if(typeof ze=="function"){E.callback=null,S=E.priorityLevel;var Je=ze(E.expirationTime<=z);if(z=n.unstable_now(),typeof Je=="function"){E.callback=Je,ie(z),ae=!0;break t}E===t(p)&&s(p),ie(z)}else s(p);E=t(p)}if(E!==null)ae=!0;else{var q=t(m);q!==null&&ft(le,q.startTime-z),ae=!1}}break e}finally{E=null,S=_e,b=!1}ae=void 0}}finally{ae?O():de=!1}}}var O;if(typeof X=="function")O=function(){X(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,st=P.port2;P.port1.onmessage=V,O=function(){st.postMessage(null)}}else O=function(){te(V,0)};function ft(z,ae){M=te(function(){z(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(z){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var _e=S;S=ae;try{return z()}finally{S=_e}},n.unstable_requestPaint=function(){G=!0},n.unstable_runWithPriority=function(z,ae){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var _e=S;S=z;try{return ae()}finally{S=_e}},n.unstable_scheduleCallback=function(z,ae,_e){var ze=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ze+_e:ze):_e=ze,z){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=_e+Je,z={id:v++,callback:ae,priorityLevel:z,startTime:_e,expirationTime:Je,sortIndex:-1},_e>ze?(z.sortIndex=_e,e(m,z),t(p)===null&&z===t(m)&&(B?(K(M),M=-1):B=!0,ft(le,_e-ze))):(z.sortIndex=Je,e(p,z),U||b||(U=!0,de||(de=!0,O()))),z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(z){var ae=S;return function(){var _e=S;S=ae;try{return z.apply(this,arguments)}finally{S=_e}}}})(Ap)),Ap}var Wv;function XR(){return Wv||(Wv=1,Sp.exports=QR()),Sp.exports}var Cp={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function WR(){if(Zv)return an;Zv=1;var n=Tm();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,an.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},an.flushSync=function(p){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=m,s.p=v,s.d.f()}},an.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},an.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},an.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:b}):v==="script"&&s.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},an.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},an.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},an.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},an.requestFormReset=function(p){s.d.r(p)},an.unstable_batchedUpdates=function(p,m){return p(m)},an.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.2.0",an}var jv;function ZR(){if(jv)return Cp.exports;jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cp.exports=WR(),Cp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function jR(){if(eT)return ql;eT=1;var n=XR(),e=Tm(),t=ZR();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return p(y),i;if(_===c)return p(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==c.return)a=y,c=_;else{for(var A=!1,R=y.child;R;){if(R===a){A=!0,a=y,c=_;break}if(R===c){A=!0,c=y,a=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===a){A=!0,a=_,c=y;break}if(R===c){A=!0,c=_,a=y;break}R=R.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),X=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function st(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case te:return"Profiler";case G:return"StrictMode";case le:return"Suspense";case de:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case U:return"Portal";case X:return i.displayName||"Context";case K:return(i._context.displayName||"Context")+".Consumer";case ie:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return r=i.displayName||null,r!==null?r:st(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return st(i(r))}catch{}}return null}var ft=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},ze=[],Je=-1;function q(i){return{current:i}}function j(i){0>Je||(i.current=ze[Je],ze[Je]=null,Je--)}function oe(i,r){Je++,ze[Je]=i.current,i.current=r}var he=q(null),Ae=q(null),ue=q(null),ye=q(null);function Pe(i,r){switch(oe(ue,r),oe(Ae,i),oe(he,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?mv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=mv(r),i=gv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}j(he),oe(he,i)}function De(){j(he),j(Ae),j(ue)}function St(i){i.memoizedState!==null&&oe(ye,i);var r=he.current,a=gv(r,i.type);r!==a&&(oe(Ae,i),oe(he,a))}function ii(i){Ae.current===i&&(j(he),j(Ae)),ye.current===i&&(j(ye),kl._currentValue=_e)}var si,kt;function sn(i){if(si===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);si=r&&r[1]||"",kt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+si+i+kt}var Nn=!1;function xn(i,r){if(!i||Nn)return"";Nn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var $=Q}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(Q){$=Q}i.call(ne.prototype)}}else{try{throw Error()}catch(Q){$=Q}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var k=A.split(`
`),Y=R.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===Y.length)for(c=k.length-1,y=Y.length-1;1<=c&&0<=y&&k[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==Y[y]){var Z=`
`+k[c].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=c&&0<=y);break}}}finally{Nn=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?sn(a):""}function gf(i,r){switch(i.tag){case 26:case 27:case 5:return sn(i.type);case 16:return sn("Lazy");case 13:return i.child!==r&&r!==null?sn("Suspense Fallback"):sn("Suspense");case 19:return sn("SuspenseList");case 0:case 15:return xn(i.type,!1);case 11:return xn(i.type.render,!1);case 1:return xn(i.type,!0);case 31:return sn("Activity");default:return""}}function wu(i){try{var r="",a=null;do r+=gf(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Io=Object.prototype.hasOwnProperty,Mr=n.unstable_scheduleCallback,Ro=n.unstable_cancelCallback,yf=n.unstable_shouldYield,La=n.unstable_requestPaint,Yt=n.unstable_now,bu=n.unstable_getCurrentPriorityLevel,Vt=n.unstable_ImmediatePriority,qt=n.unstable_UserBlockingPriority,Oi=n.unstable_NormalPriority,Nu=n.unstable_LowPriority,Oa=n.unstable_IdlePriority,_f=n.log,Dr=n.unstable_setDisableYieldValue,Ts=null,rn=null;function Fn(i){if(typeof _f=="function"&&Dr(i),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Ts,i)}catch{}}var hn=Math.clz32?Math.clz32:xu,vf=Math.log,qa=Math.LN2;function xu(i){return i>>>=0,i===0?32:31-(vf(i)/qa|0)|0}var Pr=256,gi=262144,Es=4194304;function ri(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function zn(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var R=c&134217727;return R!==0?(c=R&~_,c!==0?y=ri(c):(A&=R,A!==0?y=ri(A):a||(a=R&~i,a!==0&&(y=ri(a))))):(R=c&~_,R!==0?y=ri(R):A!==0?y=ri(A):a||(a=c&~i,a!==0&&(y=ri(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function Ss(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function wo(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ba(){var i=Es;return Es<<=1,(Es&62914560)===0&&(Es=4194304),i}function qi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function As(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Kt(i,r,a,c,y,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,k=i.expirationTimes,Y=i.hiddenUpdates;for(a=A&~a;0<a;){var Z=31-hn(a),ne=1<<Z;R[Z]=0,k[Z]=-1;var $=Y[Z];if($!==null)for(Y[Z]=null,Z=0;Z<$.length;Z++){var Q=$[Z];Q!==null&&(Q.lane&=-536870913)}a&=~ne}c!==0&&Fa(i,c,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~r))}function Fa(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-hn(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Cs(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-hn(a),y=1<<c;y&r|i[c]&r&&(i[c]|=r),a&=~y}}function Is(i,r){var a=r&-r;return a=(a&42)!==0?1:za(a),(a&(i.suspendedLanes|r))!==0?0:a}function za(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ha(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Bi(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:qv(i.type))}function Mu(i,r){var a=ae.p;try{return ae.p=i,r()}finally{ae.p=a}}var yi=Math.random().toString(36).slice(2),gt="__reactFiber$"+yi,$t="__reactProps$"+yi,_i="__reactContainer$"+yi,Rs="__reactEvents$"+yi,vi="__reactListeners$"+yi,Du="__reactHandles$"+yi,Ga="__reactResources$"+yi,Fi="__reactMarker$"+yi;function kr(i){delete i[gt],delete i[$t],delete i[Rs],delete i[vi],delete i[Du]}function zi(i){var r=i[gt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[_i]||a[gt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=Av(i);i!==null;){if(a=i[gt])return a;i=Av(i)}return r}i=a,a=i.parentNode}return null}function Hi(i){if(i=i[gt]||i[_i]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Vr(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function oi(i){var r=i[Ga];return r||(r=i[Ga]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(i){i[Fi]=!0}var bo=new Set,ws={};function pn(i,r){Ti(i,r),Ti(i+"Capture",r)}function Ti(i,r){for(ws[i]=r,i=0;i<r.length;i++)bo.add(r[i])}var Tf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ja={},Ya={};function Pu(i){return Io.call(Ya,i)?!0:Io.call(Ja,i)?!1:Tf.test(i)?Ya[i]=!0:(Ja[i]=!0,!1)}function bs(i,r,a){if(Pu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Ns(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Hn(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function mn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ku(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ef(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function No(i){if(!i._valueTracker){var r=ku(i)?"checked":"value";i._valueTracker=Ef(i,r,""+i[r])}}function Ka(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=ku(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function xo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Gi=/[\n"\\]/g;function yt(i){return i.replace(Gi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function xs(i,r,a,c,y,_,A,R){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+mn(r)):i.value!==""+mn(r)&&(i.value=""+mn(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Mo(i,A,mn(r)):a!=null?Mo(i,A,mn(a)):c!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+mn(R):i.removeAttribute("name")}function Ur(i,r,a,c,y,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){No(i);return}a=a!=null?""+mn(a):"",r=r!=null?""+mn(r):a,R||r===i.value||(i.value=r),i.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=R?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),No(i)}function Mo(i,r,a){r==="number"&&xo(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Ye(i,r,a,c){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+mn(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Lr(i,r,a){if(r!=null&&(r=""+mn(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+mn(a):""}function Ms(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(ft(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=mn(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),No(i)}function Gn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Sf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $a(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||Sf.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Vu(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&a[y]!==c&&$a(i,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&$a(i,_,r[_])}function Qa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Af=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(i){return Cf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Bt(){}var Do=null;function Po(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ji=null,Mn=null;function Uu(i){var r=Hi(i);if(r&&(i=r.stateNode)){var a=i[$t]||null;e:switch(i=r.stateNode,r.type){case"input":if(xs(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var y=c[$t]||null;if(!y)throw Error(s(90));xs(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&Ka(c)}break e;case"textarea":Lr(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ye(i,!!a.multiple,r,!1)}}}var Xa=!1;function Lu(i,r,a){if(Xa)return i(r,a);Xa=!0;try{var c=i(r);return c}finally{if(Xa=!1,(Ji!==null||Mn!==null)&&(Pc(),Ji&&(r=Ji,i=Mn,Mn=Ji=null,Uu(r),i)))for(r=0;r<i.length;r++)Uu(i[r])}}function Tn(i,r){var a=i.stateNode;if(a===null)return null;var c=a[$t]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(ai)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{Wa=!1}var Dn=null,ko=null,Ai=null;function Ds(){if(Ai)return Ai;var i,r=ko,a=r.length,c,y="value"in Dn?Dn.value:Dn.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&r[a-c]===y[_-c];c++);return Ai=y.slice(i,1<c?1-c:void 0)}function Or(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Ps(){return!0}function at(){return!1}function on(i){function r(a,c,y,_,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ps:at,this.isPropagationStopped=at,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qr=on(Yi),ks=E({},Yi,{view:0,detail:0}),Ou=on(ks),Vs,Vo,gn,Br=E({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==gn&&(gn&&i.type==="mousemove"?(Vs=i.screenX-gn.screenX,Vo=i.screenY-gn.screenY):Vo=Vs=0,gn=i),Vs)},movementY:function(i){return"movementY"in i?i.movementY:Vo}}),qu=on(Br),Fr=E({},Br,{dataTransfer:0}),Bu=on(Fr),Za=E({},ks,{relatedTarget:0}),Us=on(Za),Fu=E({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Uo=on(Fu),If=E({},Yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),zu=on(If),zr=E({},Yi,{data:0}),ja=on(zr),Hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},el={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=tl[i])?!!r[i]:!1}function Ls(){return Gu}var Ju=E({},ks,{key:function(i){if(i.key){var r=Hu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Or(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?el[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(i){return i.type==="keypress"?Or(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Or(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Yu=on(Ju),Ki=E({},Br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nl=on(Ki),Ku=E({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),$u=on(Ku),Qu=E({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lo=on(Qu),yn=E({},Br,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Xu=on(yn),Wu=E({},Yi,{newState:0,oldState:0}),Os=on(Wu),h=[9,13,27,32],T=ai&&"CompositionEvent"in window,C=null;ai&&"documentMode"in document&&(C=document.documentMode);var w=ai&&"TextEvent"in window&&!C,H=ai&&(!T||C&&8<C&&11>=C),W=" ",ce=!1;function We(i,r){switch(i){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ke=!1;function Ft(i,r){switch(i){case"compositionend":return wt(r);case"keypress":return r.which!==32?null:(ce=!0,W);case"textInput":return i=r.data,i===W&&ce?null:i;default:return null}}function zt(i,r){if(ke)return i==="compositionend"||!T&&We(i,r)?(i=Ds(),Ai=ko=Dn=null,ke=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return H&&r.locale!=="ko"?null:r.data;default:return null}}var qs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function En(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!qs[i.type]:r==="textarea"}function Hr(i,r,a,c){Ji?Mn?Mn.push(c):Mn=[c]:Ji=c,r=Bc(r,"onChange"),0<r.length&&(a=new qr("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var $i=null,il=null;function _I(i){uv(i,0)}function Zu(i){var r=Vr(i);if(Ka(r))return i}function bg(i,r){if(i==="change")return r}var Ng=!1;if(ai){var Rf;if(ai){var wf="oninput"in document;if(!wf){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),wf=typeof xg.oninput=="function"}Rf=wf}else Rf=!1;Ng=Rf&&(!document.documentMode||9<document.documentMode)}function Mg(){$i&&($i.detachEvent("onpropertychange",Dg),il=$i=null)}function Dg(i){if(i.propertyName==="value"&&Zu(il)){var r=[];Hr(r,il,i,Po(i)),Lu(_I,r)}}function vI(i,r,a){i==="focusin"?(Mg(),$i=r,il=a,$i.attachEvent("onpropertychange",Dg)):i==="focusout"&&Mg()}function TI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Zu(il)}function EI(i,r){if(i==="click")return Zu(r)}function SI(i,r){if(i==="input"||i==="change")return Zu(r)}function AI(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Pn=typeof Object.is=="function"?Object.is:AI;function sl(i,r){if(Pn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Io.call(r,y)||!Pn(i[y],r[y]))return!1}return!0}function Pg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function kg(i,r){var a=Pg(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pg(a)}}function Vg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Vg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ug(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=xo(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=xo(i.document)}return r}function bf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var CI=ai&&"documentMode"in document&&11>=document.documentMode,Oo=null,Nf=null,rl=null,xf=!1;function Lg(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xf||Oo==null||Oo!==xo(c)||(c=Oo,"selectionStart"in c&&bf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),rl&&sl(rl,c)||(rl=c,c=Bc(Nf,"onSelect"),0<c.length&&(r=new qr("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Oo)))}function Gr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var qo={animationend:Gr("Animation","AnimationEnd"),animationiteration:Gr("Animation","AnimationIteration"),animationstart:Gr("Animation","AnimationStart"),transitionrun:Gr("Transition","TransitionRun"),transitionstart:Gr("Transition","TransitionStart"),transitioncancel:Gr("Transition","TransitionCancel"),transitionend:Gr("Transition","TransitionEnd")},Mf={},Og={};ai&&(Og=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Jr(i){if(Mf[i])return Mf[i];if(!qo[i])return i;var r=qo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Og)return Mf[i]=r[a];return i}var qg=Jr("animationend"),Bg=Jr("animationiteration"),Fg=Jr("animationstart"),II=Jr("transitionrun"),RI=Jr("transitionstart"),wI=Jr("transitioncancel"),zg=Jr("transitionend"),Hg=new Map,Df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Df.push("scrollEnd");function li(i,r){Hg.set(i,r),pn(r,[i])}var ju=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Jn=[],Bo=0,Pf=0;function ec(){for(var i=Bo,r=Pf=Bo=0;r<i;){var a=Jn[r];Jn[r++]=null;var c=Jn[r];Jn[r++]=null;var y=Jn[r];Jn[r++]=null;var _=Jn[r];if(Jn[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&Gg(a,y,_)}}function tc(i,r,a,c){Jn[Bo++]=i,Jn[Bo++]=r,Jn[Bo++]=a,Jn[Bo++]=c,Pf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function kf(i,r,a,c){return tc(i,r,a,c),nc(i)}function Yr(i,r){return tc(i,null,null,r),nc(i)}function Gg(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,c=_.alternate,c!==null&&(c.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-hn(a),i=_.hiddenUpdates,c=i[y],c===null?i[y]=[r]:c.push(r),r.lane=a|536870912),_):null}function nc(i){if(50<wl)throw wl=0,Hh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Fo={};function bI(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(i,r,a,c){return new bI(i,r,a,c)}function Vf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,r){var a=i.alternate;return a===null?(a=kn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Jg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ic(i,r,a,c,y,_){var A=0;if(c=i,typeof i=="function")Vf(i)&&(A=1);else if(typeof i=="string")A=PR(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=kn(31,a,r,y),i.elementType=x,i.lanes=_,i;case B:return Kr(a.children,y,_,r);case G:A=8,y|=24;break;case te:return i=kn(12,a,r,y|2),i.elementType=te,i.lanes=_,i;case le:return i=kn(13,a,r,y),i.elementType=le,i.lanes=_,i;case de:return i=kn(19,a,r,y),i.elementType=de,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case X:A=10;break e;case K:A=9;break e;case ie:A=11;break e;case M:A=14;break e;case N:A=16,c=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=kn(A,a,r,y),r.elementType=i,r.type=c,r.lanes=_,r}function Kr(i,r,a,c){return i=kn(7,i,c,r),i.lanes=a,i}function Uf(i,r,a){return i=kn(6,i,null,r),i.lanes=a,i}function Yg(i){var r=kn(18,null,null,0);return r.stateNode=i,r}function Lf(i,r,a){return r=kn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Kg=new WeakMap;function Yn(i,r){if(typeof i=="object"&&i!==null){var a=Kg.get(i);return a!==void 0?a:(r={value:i,source:r,stack:wu(r)},Kg.set(i,r),r)}return{value:i,source:r,stack:wu(r)}}var zo=[],Ho=0,sc=null,ol=0,Kn=[],$n=0,Bs=null,Ci=1,Ii="";function Xi(i,r){zo[Ho++]=ol,zo[Ho++]=sc,sc=i,ol=r}function $g(i,r,a){Kn[$n++]=Ci,Kn[$n++]=Ii,Kn[$n++]=Bs,Bs=i;var c=Ci;i=Ii;var y=32-hn(c)-1;c&=~(1<<y),a+=1;var _=32-hn(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Ci=1<<32-hn(r)+y|a<<y|c,Ii=_+i}else Ci=1<<_|a<<y|c,Ii=i}function Of(i){i.return!==null&&(Xi(i,1),$g(i,1,0))}function qf(i){for(;i===sc;)sc=zo[--Ho],zo[Ho]=null,ol=zo[--Ho],zo[Ho]=null;for(;i===Bs;)Bs=Kn[--$n],Kn[$n]=null,Ii=Kn[--$n],Kn[$n]=null,Ci=Kn[--$n],Kn[$n]=null}function Qg(i,r){Kn[$n++]=Ci,Kn[$n++]=Ii,Kn[$n++]=Bs,Ci=r.id,Ii=r.overflow,Bs=i}var Qt=null,lt=null,He=!1,Fs=null,Qn=!1,Bf=Error(s(519));function zs(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw al(Yn(r,i)),Bf}function Xg(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[gt]=i,r[$t]=c,a){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(a=0;a<Nl.length;a++)Le(Nl[a],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Ur(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Ms(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||hv(r.textContent,a)?(c.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),c.onScroll!=null&&Le("scroll",r),c.onScrollEnd!=null&&Le("scrollend",r),c.onClick!=null&&(r.onclick=Bt),r=!0):r=!1,r||zs(i,!0)}function Wg(i){for(Qt=i.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Qt=Qt.return}}function Go(i){if(i!==Qt)return!1;if(!He)return Wg(i),He=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||sp(i.type,i.memoizedProps)),a=!a),a&&lt&&zs(i),Wg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));lt=Sv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));lt=Sv(i)}else r===27?(r=lt,nr(i.type)?(i=up,up=null,lt=i):lt=r):lt=Qt?Wn(i.stateNode.nextSibling):null;return!0}function $r(){lt=Qt=null,He=!1}function Ff(){var i=Fs;return i!==null&&(In===null?In=i:In.push.apply(In,i),Fs=null),i}function al(i){Fs===null?Fs=[i]:Fs.push(i)}var zf=q(null),Qr=null,Wi=null;function Hs(i,r,a){oe(zf,r._currentValue),r._currentValue=a}function Zi(i){i._currentValue=zf.current,j(zf)}function Hf(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function Gf(i,r,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=y;for(var k=0;k<r.length;k++)if(R.context===r[k]){_.lanes|=a,R=_.alternate,R!==null&&(R.lanes|=a),Hf(_.return,a,i),c||(A=null);break e}_=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(s(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Hf(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Jo(i,r,a,c){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var R=y.type;Pn(y.pendingProps.value,A.value)||(i!==null?i.push(R):i=[R])}}else if(y===ye.current){if(A=y.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(kl):i=[kl])}y=y.return}i!==null&&Gf(r,i,a,c),r.flags|=262144}function rc(i){for(i=i.firstContext;i!==null;){if(!Pn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xr(i){Qr=i,Wi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Xt(i){return Zg(Qr,i)}function oc(i,r){return Qr===null&&Xr(i),Zg(i,r)}function Zg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Wi===null){if(i===null)throw Error(s(308));Wi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Wi=Wi.next=r;return a}var NI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},xI=n.unstable_scheduleCallback,MI=n.unstable_NormalPriority,bt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new NI,data:new Map,refCount:0}}function ll(i){i.refCount--,i.refCount===0&&xI(MI,function(){i.controller.abort()})}var ul=null,Yf=0,Yo=0,Ko=null;function DI(i,r){if(ul===null){var a=ul=[];Yf=0,Yo=Qh(),Ko={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Yf++,r.then(jg,jg),r}function jg(){if(--Yf===0&&ul!==null){Ko!==null&&(Ko.status="fulfilled");var i=ul;ul=null,Yo=0,Ko=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function PI(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var ey=z.S;z.S=function(i,r){L_=Yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&DI(i,r),ey!==null&&ey(i,r)};var Wr=q(null);function Kf(){var i=Wr.current;return i!==null?i:rt.pooledCache}function ac(i,r){r===null?oe(Wr,Wr.current):oe(Wr,r.pool)}function ty(){var i=Kf();return i===null?null:{parent:bt._currentValue,pool:i}}var $o=Error(s(460)),$f=Error(s(474)),lc=Error(s(542)),uc={then:function(){}};function ny(i){return i=i.status,i==="fulfilled"||i==="rejected"}function iy(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Bt,Bt),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,ry(i),i;default:if(typeof r.status=="string")r.then(Bt,Bt);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,ry(i),i}throw jr=r,$o}}function Zr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(jr=a,$o):a}}var jr=null;function sy(){if(jr===null)throw Error(s(459));var i=jr;return jr=null,i}function ry(i){if(i===$o||i===lc)throw Error(s(483))}var Qo=null,cl=0;function cc(i){var r=cl;return cl+=1,Qo===null&&(Qo=[]),iy(Qo,i,r)}function dl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function dc(i,r){throw r.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function oy(i){function r(F,L){if(i){var J=F.deletions;J===null?(F.deletions=[L],F.flags|=16):J.push(L)}}function a(F,L){if(!i)return null;for(;L!==null;)r(F,L),L=L.sibling;return null}function c(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function y(F,L){return F=Qi(F,L),F.index=0,F.sibling=null,F}function _(F,L,J){return F.index=J,i?(J=F.alternate,J!==null?(J=J.index,J<L?(F.flags|=67108866,L):J):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function A(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function R(F,L,J,ee){return L===null||L.tag!==6?(L=Uf(J,F.mode,ee),L.return=F,L):(L=y(L,J),L.return=F,L)}function k(F,L,J,ee){var Te=J.type;return Te===B?Z(F,L,J.props.children,ee,J.key):L!==null&&(L.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&Zr(Te)===L.type)?(L=y(L,J.props),dl(L,J),L.return=F,L):(L=ic(J.type,J.key,J.props,null,F.mode,ee),dl(L,J),L.return=F,L)}function Y(F,L,J,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==J.containerInfo||L.stateNode.implementation!==J.implementation?(L=Lf(J,F.mode,ee),L.return=F,L):(L=y(L,J.children||[]),L.return=F,L)}function Z(F,L,J,ee,Te){return L===null||L.tag!==7?(L=Kr(J,F.mode,ee,Te),L.return=F,L):(L=y(L,J),L.return=F,L)}function ne(F,L,J){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Uf(""+L,F.mode,J),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return J=ic(L.type,L.key,L.props,null,F.mode,J),dl(J,L),J.return=F,J;case U:return L=Lf(L,F.mode,J),L.return=F,L;case N:return L=Zr(L),ne(F,L,J)}if(ft(L)||O(L))return L=Kr(L,F.mode,J,null),L.return=F,L;if(typeof L.then=="function")return ne(F,cc(L),J);if(L.$$typeof===X)return ne(F,oc(F,L),J);dc(F,L)}return null}function $(F,L,J,ee){var Te=L!==null?L.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Te!==null?null:R(F,L,""+J,ee);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===Te?k(F,L,J,ee):null;case U:return J.key===Te?Y(F,L,J,ee):null;case N:return J=Zr(J),$(F,L,J,ee)}if(ft(J)||O(J))return Te!==null?null:Z(F,L,J,ee,null);if(typeof J.then=="function")return $(F,L,cc(J),ee);if(J.$$typeof===X)return $(F,L,oc(F,J),ee);dc(F,J)}return null}function Q(F,L,J,ee,Te){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return F=F.get(J)||null,R(L,F,""+ee,Te);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return F=F.get(ee.key===null?J:ee.key)||null,k(L,F,ee,Te);case U:return F=F.get(ee.key===null?J:ee.key)||null,Y(L,F,ee,Te);case N:return ee=Zr(ee),Q(F,L,J,ee,Te)}if(ft(ee)||O(ee))return F=F.get(J)||null,Z(L,F,ee,Te,null);if(typeof ee.then=="function")return Q(F,L,J,cc(ee),Te);if(ee.$$typeof===X)return Q(F,L,J,oc(L,ee),Te);dc(L,ee)}return null}function pe(F,L,J,ee){for(var Te=null,Ke=null,ge=L,Me=L=0,qe=null;ge!==null&&Me<J.length;Me++){ge.index>Me?(qe=ge,ge=null):qe=ge.sibling;var $e=$(F,ge,J[Me],ee);if($e===null){ge===null&&(ge=qe);break}i&&ge&&$e.alternate===null&&r(F,ge),L=_($e,L,Me),Ke===null?Te=$e:Ke.sibling=$e,Ke=$e,ge=qe}if(Me===J.length)return a(F,ge),He&&Xi(F,Me),Te;if(ge===null){for(;Me<J.length;Me++)ge=ne(F,J[Me],ee),ge!==null&&(L=_(ge,L,Me),Ke===null?Te=ge:Ke.sibling=ge,Ke=ge);return He&&Xi(F,Me),Te}for(ge=c(ge);Me<J.length;Me++)qe=Q(ge,F,Me,J[Me],ee),qe!==null&&(i&&qe.alternate!==null&&ge.delete(qe.key===null?Me:qe.key),L=_(qe,L,Me),Ke===null?Te=qe:Ke.sibling=qe,Ke=qe);return i&&ge.forEach(function(ar){return r(F,ar)}),He&&Xi(F,Me),Te}function Se(F,L,J,ee){if(J==null)throw Error(s(151));for(var Te=null,Ke=null,ge=L,Me=L=0,qe=null,$e=J.next();ge!==null&&!$e.done;Me++,$e=J.next()){ge.index>Me?(qe=ge,ge=null):qe=ge.sibling;var ar=$(F,ge,$e.value,ee);if(ar===null){ge===null&&(ge=qe);break}i&&ge&&ar.alternate===null&&r(F,ge),L=_(ar,L,Me),Ke===null?Te=ar:Ke.sibling=ar,Ke=ar,ge=qe}if($e.done)return a(F,ge),He&&Xi(F,Me),Te;if(ge===null){for(;!$e.done;Me++,$e=J.next())$e=ne(F,$e.value,ee),$e!==null&&(L=_($e,L,Me),Ke===null?Te=$e:Ke.sibling=$e,Ke=$e);return He&&Xi(F,Me),Te}for(ge=c(ge);!$e.done;Me++,$e=J.next())$e=Q(ge,F,Me,$e.value,ee),$e!==null&&(i&&$e.alternate!==null&&ge.delete($e.key===null?Me:$e.key),L=_($e,L,Me),Ke===null?Te=$e:Ke.sibling=$e,Ke=$e);return i&&ge.forEach(function(GR){return r(F,GR)}),He&&Xi(F,Me),Te}function it(F,L,J,ee){if(typeof J=="object"&&J!==null&&J.type===B&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var Te=J.key;L!==null;){if(L.key===Te){if(Te=J.type,Te===B){if(L.tag===7){a(F,L.sibling),ee=y(L,J.props.children),ee.return=F,F=ee;break e}}else if(L.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&Zr(Te)===L.type){a(F,L.sibling),ee=y(L,J.props),dl(ee,J),ee.return=F,F=ee;break e}a(F,L);break}else r(F,L);L=L.sibling}J.type===B?(ee=Kr(J.props.children,F.mode,ee,J.key),ee.return=F,F=ee):(ee=ic(J.type,J.key,J.props,null,F.mode,ee),dl(ee,J),ee.return=F,F=ee)}return A(F);case U:e:{for(Te=J.key;L!==null;){if(L.key===Te)if(L.tag===4&&L.stateNode.containerInfo===J.containerInfo&&L.stateNode.implementation===J.implementation){a(F,L.sibling),ee=y(L,J.children||[]),ee.return=F,F=ee;break e}else{a(F,L);break}else r(F,L);L=L.sibling}ee=Lf(J,F.mode,ee),ee.return=F,F=ee}return A(F);case N:return J=Zr(J),it(F,L,J,ee)}if(ft(J))return pe(F,L,J,ee);if(O(J)){if(Te=O(J),typeof Te!="function")throw Error(s(150));return J=Te.call(J),Se(F,L,J,ee)}if(typeof J.then=="function")return it(F,L,cc(J),ee);if(J.$$typeof===X)return it(F,L,oc(F,J),ee);dc(F,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,L!==null&&L.tag===6?(a(F,L.sibling),ee=y(L,J),ee.return=F,F=ee):(a(F,L),ee=Uf(J,F.mode,ee),ee.return=F,F=ee),A(F)):a(F,L)}return function(F,L,J,ee){try{cl=0;var Te=it(F,L,J,ee);return Qo=null,Te}catch(ge){if(ge===$o||ge===lc)throw ge;var Ke=kn(29,ge,null,F.mode);return Ke.lanes=ee,Ke.return=F,Ke}finally{}}}var eo=oy(!0),ay=oy(!1),Gs=!1;function Qf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Js(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ys(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=nc(i),Gg(i,null,a),r}return tc(i,c,r,a),nc(i)}function fl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Cs(i,a)}}function Wf(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Zf=!1;function hl(){if(Zf){var i=Ko;if(i!==null)throw i}}function pl(i,r,a,c){Zf=!1;var y=i.updateQueue;Gs=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var k=R,Y=k.next;k.next=null,A===null?_=Y:A.next=Y,A=k;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==A&&(R===null?Z.firstBaseUpdate=Y:R.next=Y,Z.lastBaseUpdate=k))}if(_!==null){var ne=y.baseState;A=0,Z=Y=k=null,R=_;do{var $=R.lane&-536870913,Q=$!==R.lane;if(Q?(Oe&$)===$:(c&$)===$){$!==0&&$===Yo&&(Zf=!0),Z!==null&&(Z=Z.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var pe=i,Se=R;$=r;var it=a;switch(Se.tag){case 1:if(pe=Se.payload,typeof pe=="function"){ne=pe.call(it,ne,$);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Se.payload,$=typeof pe=="function"?pe.call(it,ne,$):pe,$==null)break e;ne=E({},ne,$);break e;case 2:Gs=!0}}$=R.callback,$!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[$]:Q.push($))}else Q={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(Y=Z=Q,k=ne):Z=Z.next=Q,A|=$;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;Q=R,R=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);Z===null&&(k=ne),y.baseState=k,y.firstBaseUpdate=Y,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),Ws|=A,i.lanes=A,i.memoizedState=ne}}function ly(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function uy(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)ly(a[i],r)}var Xo=q(null),fc=q(0);function cy(i,r){i=as,oe(fc,i),oe(Xo,r),as=i|r.baseLanes}function jf(){oe(fc,as),oe(Xo,Xo.current)}function eh(){as=fc.current,j(Xo),j(fc)}var Vn=q(null),Xn=null;function Ks(i){var r=i.alternate;oe(Ct,Ct.current&1),oe(Vn,i),Xn===null&&(r===null||Xo.current!==null||r.memoizedState!==null)&&(Xn=i)}function th(i){oe(Ct,Ct.current),oe(Vn,i),Xn===null&&(Xn=i)}function dy(i){i.tag===22?(oe(Ct,Ct.current),oe(Vn,i),Xn===null&&(Xn=i)):$s()}function $s(){oe(Ct,Ct.current),oe(Vn,Vn.current)}function Un(i){j(Vn),Xn===i&&(Xn=null),j(Ct)}var Ct=q(0);function hc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ap(a)||lp(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ji=0,xe=null,tt=null,Nt=null,pc=!1,Wo=!1,to=!1,mc=0,ml=0,Zo=null,kI=0;function _t(){throw Error(s(321))}function nh(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Pn(i[a],r[a]))return!1;return!0}function ih(i,r,a,c,y,_){return ji=_,xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=i===null||i.memoizedState===null?$y:_h,to=!1,_=a(c,y),to=!1,Wo&&(_=hy(r,a,c,y)),fy(i),_}function fy(i){z.H=_l;var r=tt!==null&&tt.next!==null;if(ji=0,Nt=tt=xe=null,pc=!1,ml=0,Zo=null,r)throw Error(s(300));i===null||xt||(i=i.dependencies,i!==null&&rc(i)&&(xt=!0))}function hy(i,r,a,c){xe=i;var y=0;do{if(Wo&&(Zo=null),ml=0,Wo=!1,25<=y)throw Error(s(301));if(y+=1,Nt=tt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}z.H=Qy,_=r(a,c)}while(Wo);return _}function VI(){var i=z.H,r=i.useState()[0];return r=typeof r.then=="function"?gl(r):r,i=i.useState()[0],(tt!==null?tt.memoizedState:null)!==i&&(xe.flags|=1024),r}function sh(){var i=mc!==0;return mc=0,i}function rh(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function oh(i){if(pc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}pc=!1}ji=0,Nt=tt=xe=null,Wo=!1,ml=mc=0,Zo=null}function _n(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?xe.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function It(){if(tt===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var r=Nt===null?xe.memoizedState:Nt.next;if(r!==null)Nt=r,tt=i;else{if(i===null)throw xe.alternate===null?Error(s(467)):Error(s(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Nt===null?xe.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(i){var r=ml;return ml+=1,Zo===null&&(Zo=[]),i=iy(Zo,i,r),r=xe,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?$y:_h),i}function yc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return gl(i);if(i.$$typeof===X)return Xt(i)}throw Error(s(438,String(i)))}function ah(i){var r=null,a=xe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=gc(),xe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=D;return r.index++,a}function es(i,r){return typeof r=="function"?r(i):r}function _c(i){var r=It();return lh(r,tt,i)}function lh(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var y=i.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var R=A=null,k=null,Y=r,Z=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Oe&ne)===ne:(ji&ne)===ne){var $=Y.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Yo&&(Z=!0);else if((ji&$)===$){Y=Y.next,$===Yo&&(Z=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(R=k=ne,A=_):k=k.next=ne,xe.lanes|=$,Ws|=$;ne=Y.action,to&&a(_,ne),_=Y.hasEagerState?Y.eagerState:a(_,ne)}else $={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(R=k=$,A=_):k=k.next=$,xe.lanes|=ne,Ws|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(k===null?A=_:k.next=R,!Pn(_,i.memoizedState)&&(xt=!0,Z&&(a=Ko,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=k,c.lastRenderedState=_}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function uh(i){var r=It(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=i(_,A.action),A=A.next;while(A!==y);Pn(_,r.memoizedState)||(xt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,c]}function py(i,r,a){var c=xe,y=It(),_=He;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var A=!Pn((tt||y).memoizedState,a);if(A&&(y.memoizedState=a,xt=!0),y=y.queue,fh(yy.bind(null,c,y,i),[i]),y.getSnapshot!==r||A||Nt!==null&&Nt.memoizedState.tag&1){if(c.flags|=2048,jo(9,{destroy:void 0},gy.bind(null,c,y,a,r),null),rt===null)throw Error(s(349));_||(ji&127)!==0||my(c,r,a)}return a}function my(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=xe.updateQueue,r===null?(r=gc(),xe.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function gy(i,r,a,c){r.value=a,r.getSnapshot=c,_y(r)&&vy(i)}function yy(i,r,a){return a(function(){_y(r)&&vy(i)})}function _y(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Pn(i,a)}catch{return!0}}function vy(i){var r=Yr(i,2);r!==null&&Rn(r,i,2)}function ch(i){var r=_n();if(typeof i=="function"){var a=i;if(i=a(),to){Fn(!0);try{a()}finally{Fn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},r}function Ty(i,r,a,c){return i.baseState=a,lh(i,tt,typeof c=="function"?c:es)}function UI(i,r,a,c,y){if(Ec(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};z.T!==null?a(!0):_.isTransition=!1,c(_),a=r.pending,a===null?(_.next=r.pending=_,Ey(r,_)):(_.next=a.next,r.pending=a.next=_)}}function Ey(i,r){var a=r.action,c=r.payload,y=i.state;if(r.isTransition){var _=z.T,A={};z.T=A;try{var R=a(y,c),k=z.S;k!==null&&k(A,R),Sy(i,r,R)}catch(Y){dh(i,r,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),z.T=_}}else try{_=a(y,c),Sy(i,r,_)}catch(Y){dh(i,r,Y)}}function Sy(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Ay(i,r,c)},function(c){return dh(i,r,c)}):Ay(i,r,a)}function Ay(i,r,a){r.status="fulfilled",r.value=a,Cy(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Ey(i,a)))}function dh(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Cy(r),r=r.next;while(r!==c)}i.action=null}function Cy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Iy(i,r){return r}function Ry(i,r){if(He){var a=rt.formState;if(a!==null){e:{var c=xe;if(He){if(lt){t:{for(var y=lt,_=Qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Wn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){lt=Wn(y.nextSibling),c=y.data==="F!";break e}}zs(c)}c=!1}c&&(r=a[0])}}return a=_n(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iy,lastRenderedState:r},a.queue=c,a=Jy.bind(null,xe,c),c.dispatch=a,c=ch(!1),_=yh.bind(null,xe,!1,c.queue),c=_n(),y={state:r,dispatch:null,action:i,pending:null},c.queue=y,a=UI.bind(null,xe,y,_,a),y.dispatch=a,c.memoizedState=i,[r,a,!1]}function wy(i){var r=It();return by(r,tt,i)}function by(i,r,a){if(r=lh(i,r,Iy)[0],i=_c(es)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=gl(r)}catch(A){throw A===$o?lc:A}else c=r;r=It();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(xe.flags|=2048,jo(9,{destroy:void 0},LI.bind(null,y,a),null)),[c,_,i]}function LI(i,r){i.action=r}function Ny(i){var r=It(),a=tt;if(a!==null)return by(r,a,i);It(),r=r.memoizedState,a=It();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function jo(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=xe.updateQueue,r===null&&(r=gc(),xe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function xy(){return It().memoizedState}function vc(i,r,a,c){var y=_n();xe.flags|=i,y.memoizedState=jo(1|r,{destroy:void 0},a,c===void 0?null:c)}function Tc(i,r,a,c){var y=It();c=c===void 0?null:c;var _=y.memoizedState.inst;tt!==null&&c!==null&&nh(c,tt.memoizedState.deps)?y.memoizedState=jo(r,_,a,c):(xe.flags|=i,y.memoizedState=jo(1|r,_,a,c))}function My(i,r){vc(8390656,8,i,r)}function fh(i,r){Tc(2048,8,i,r)}function OI(i){xe.flags|=4;var r=xe.updateQueue;if(r===null)r=gc(),xe.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function Dy(i){var r=It().memoizedState;return OI({ref:r,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Py(i,r){return Tc(4,2,i,r)}function ky(i,r){return Tc(4,4,i,r)}function Vy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Uy(i,r,a){a=a!=null?a.concat([i]):null,Tc(4,4,Vy.bind(null,r,i),a)}function hh(){}function Ly(i,r){var a=It();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&nh(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function Oy(i,r){var a=It();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&nh(r,c[1]))return c[0];if(c=i(),to){Fn(!0);try{i()}finally{Fn(!1)}}return a.memoizedState=[c,r],c}function ph(i,r,a){return a===void 0||(ji&1073741824)!==0&&(Oe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=q_(),xe.lanes|=i,Ws|=i,a)}function qy(i,r,a,c){return Pn(a,r)?a:Xo.current!==null?(i=ph(i,a,c),Pn(i,r)||(xt=!0),i):(ji&42)===0||(ji&1073741824)!==0&&(Oe&261930)===0?(xt=!0,i.memoizedState=a):(i=q_(),xe.lanes|=i,Ws|=i,r)}function By(i,r,a,c,y){var _=ae.p;ae.p=_!==0&&8>_?_:8;var A=z.T,R={};z.T=R,yh(i,!1,r,a);try{var k=y(),Y=z.S;if(Y!==null&&Y(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=PI(k,c);yl(i,r,Z,qn(i))}else yl(i,r,c,qn(i))}catch(ne){yl(i,r,{then:function(){},status:"rejected",reason:ne},qn())}finally{ae.p=_,A!==null&&R.types!==null&&(A.types=R.types),z.T=A}}function qI(){}function mh(i,r,a,c){if(i.tag!==5)throw Error(s(476));var y=Fy(i).queue;By(i,y,r,_e,a===null?qI:function(){return zy(i),a(c)})}function Fy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:_e},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function zy(i){var r=Fy(i);r.next===null&&(r=i.alternate.memoizedState),yl(i,r.next.queue,{},qn())}function gh(){return Xt(kl)}function Hy(){return It().memoizedState}function Gy(){return It().memoizedState}function BI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=qn();i=Js(a);var c=Ys(r,i,a);c!==null&&(Rn(c,r,a),fl(c,r,a)),r={cache:Jf()},i.payload=r;return}r=r.return}}function FI(i,r,a){var c=qn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ec(i)?Yy(r,a):(a=kf(i,r,a,c),a!==null&&(Rn(a,i,c),Ky(a,r,c)))}function Jy(i,r,a){var c=qn();yl(i,r,a,c)}function yl(i,r,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ec(i))Yy(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,R=_(A,a);if(y.hasEagerState=!0,y.eagerState=R,Pn(R,A))return tc(i,r,y,0),rt===null&&ec(),!1}catch{}finally{}if(a=kf(i,r,y,c),a!==null)return Rn(a,i,c),Ky(a,r,c),!0}return!1}function yh(i,r,a,c){if(c={lane:2,revertLane:Qh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ec(i)){if(r)throw Error(s(479))}else r=kf(i,a,c,2),r!==null&&Rn(r,i,2)}function Ec(i){var r=i.alternate;return i===xe||r!==null&&r===xe}function Yy(i,r){Wo=pc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Ky(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,Cs(i,a)}}var _l={readContext:Xt,use:yc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};_l.useEffectEvent=_t;var $y={readContext:Xt,use:yc,useCallback:function(i,r){return _n().memoizedState=[i,r===void 0?null:r],i},useContext:Xt,useEffect:My,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,vc(4194308,4,Vy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return vc(4194308,4,i,r)},useInsertionEffect:function(i,r){vc(4,2,i,r)},useMemo:function(i,r){var a=_n();r=r===void 0?null:r;var c=i();if(to){Fn(!0);try{i()}finally{Fn(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=_n();if(a!==void 0){var y=a(r);if(to){Fn(!0);try{a(r)}finally{Fn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=FI.bind(null,xe,i),[c.memoizedState,i]},useRef:function(i){var r=_n();return i={current:i},r.memoizedState=i},useState:function(i){i=ch(i);var r=i.queue,a=Jy.bind(null,xe,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:hh,useDeferredValue:function(i,r){var a=_n();return ph(a,i,r)},useTransition:function(){var i=ch(!1);return i=By.bind(null,xe,i.queue,!0,!1),_n().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=xe,y=_n();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),rt===null)throw Error(s(349));(Oe&127)!==0||my(c,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,My(yy.bind(null,c,_,i),[i]),c.flags|=2048,jo(9,{destroy:void 0},gy.bind(null,c,_,a,r),null),a},useId:function(){var i=_n(),r=rt.identifierPrefix;if(He){var a=Ii,c=Ci;a=(c&~(1<<32-hn(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=mc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=kI++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:gh,useFormState:Ry,useActionState:Ry,useOptimistic:function(i){var r=_n();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=yh.bind(null,xe,!0,a),a.dispatch=r,[i,r]},useMemoCache:ah,useCacheRefresh:function(){return _n().memoizedState=BI.bind(null,xe)},useEffectEvent:function(i){var r=_n(),a={impl:i};return r.memoizedState=a,function(){if((Xe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},_h={readContext:Xt,use:yc,useCallback:Ly,useContext:Xt,useEffect:fh,useImperativeHandle:Uy,useInsertionEffect:Py,useLayoutEffect:ky,useMemo:Oy,useReducer:_c,useRef:xy,useState:function(){return _c(es)},useDebugValue:hh,useDeferredValue:function(i,r){var a=It();return qy(a,tt.memoizedState,i,r)},useTransition:function(){var i=_c(es)[0],r=It().memoizedState;return[typeof i=="boolean"?i:gl(i),r]},useSyncExternalStore:py,useId:Hy,useHostTransitionStatus:gh,useFormState:wy,useActionState:wy,useOptimistic:function(i,r){var a=It();return Ty(a,tt,i,r)},useMemoCache:ah,useCacheRefresh:Gy};_h.useEffectEvent=Dy;var Qy={readContext:Xt,use:yc,useCallback:Ly,useContext:Xt,useEffect:fh,useImperativeHandle:Uy,useInsertionEffect:Py,useLayoutEffect:ky,useMemo:Oy,useReducer:uh,useRef:xy,useState:function(){return uh(es)},useDebugValue:hh,useDeferredValue:function(i,r){var a=It();return tt===null?ph(a,i,r):qy(a,tt.memoizedState,i,r)},useTransition:function(){var i=uh(es)[0],r=It().memoizedState;return[typeof i=="boolean"?i:gl(i),r]},useSyncExternalStore:py,useId:Hy,useHostTransitionStatus:gh,useFormState:Ny,useActionState:Ny,useOptimistic:function(i,r){var a=It();return tt!==null?Ty(a,tt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:ah,useCacheRefresh:Gy};Qy.useEffectEvent=Dy;function vh(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Th={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=qn(),y=Js(c);y.payload=r,a!=null&&(y.callback=a),r=Ys(i,y,c),r!==null&&(Rn(r,i,c),fl(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=qn(),y=Js(c);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Ys(i,y,c),r!==null&&(Rn(r,i,c),fl(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=qn(),c=Js(a);c.tag=2,r!=null&&(c.callback=r),r=Ys(i,c,a),r!==null&&(Rn(r,i,a),fl(r,i,a))}};function Xy(i,r,a,c,y,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!sl(a,c)||!sl(y,_):!0}function Wy(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&Th.enqueueReplaceState(r,r.state,null)}function no(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Zy(i){ju(i)}function jy(i){console.error(i)}function e_(i){ju(i)}function Sc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function t_(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Eh(i,r,a){return a=Js(a),a.tag=3,a.payload={element:null},a.callback=function(){Sc(i,r)},a}function n_(i){return i=Js(i),i.tag=3,i}function i_(i,r,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;i.payload=function(){return y(_)},i.callback=function(){t_(r,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){t_(r,a,c),typeof y!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function zI(i,r,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Jo(r,a,y,!0),a=Vn.current,a!==null){switch(a.tag){case 31:case 13:return Xn===null?kc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===uc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Yh(i,c,y)),!1;case 22:return a.flags|=65536,c===uc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Yh(i,c,y)),!1}throw Error(s(435,a.tag))}return Yh(i,c,y),kc(),!1}if(He)return r=Vn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Bf&&(i=Error(s(422),{cause:c}),al(Yn(i,a)))):(c!==Bf&&(r=Error(s(423),{cause:c}),al(Yn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=Yn(c,a),y=Eh(i.stateNode,c,y),Wf(i,y),vt!==4&&(vt=2)),!1;var _=Error(s(520),{cause:c});if(_=Yn(_,a),Rl===null?Rl=[_]:Rl.push(_),vt!==4&&(vt=2),r===null)return!0;c=Yn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Eh(a.stateNode,c,i),Wf(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Zs===null||!Zs.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=n_(y),i_(y,i,a,c),Wf(a,y),!1}a=a.return}while(a!==null);return!1}var Sh=Error(s(461)),xt=!1;function Wt(i,r,a,c){r.child=i===null?ay(r,null,a,c):eo(r,i.child,a,c)}function s_(i,r,a,c,y){a=a.render;var _=r.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return Xr(r),c=ih(i,r,a,A,_,y),R=sh(),i!==null&&!xt?(rh(i,r,y),ts(i,r,y)):(He&&R&&Of(r),r.flags|=1,Wt(i,r,c,y),r.child)}function r_(i,r,a,c,y){if(i===null){var _=a.type;return typeof _=="function"&&!Vf(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,o_(i,r,_,c,y)):(i=ic(a.type,null,c,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!xh(i,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(A,c)&&i.ref===r.ref)return ts(i,r,y)}return r.flags|=1,i=Qi(_,c),i.ref=r.ref,i.return=r,r.child=i}function o_(i,r,a,c,y){if(i!==null){var _=i.memoizedProps;if(sl(_,c)&&i.ref===r.ref)if(xt=!1,r.pendingProps=c=_,xh(i,y))(i.flags&131072)!==0&&(xt=!0);else return r.lanes=i.lanes,ts(i,r,y)}return Ah(i,r,a,c,y)}function a_(i,r,a,c){var y=c.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(c=r.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return l_(i,r,_,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&ac(r,_!==null?_.cachePool:null),_!==null?cy(r,_):jf(),dy(r);else return c=r.lanes=536870912,l_(i,r,_!==null?_.baseLanes|a:a,a,c)}else _!==null?(ac(r,_.cachePool),cy(r,_),$s(),r.memoizedState=null):(i!==null&&ac(r,null),jf(),$s());return Wt(i,r,y,a),r.child}function vl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function l_(i,r,a,c,y){var _=Kf();return _=_===null?null:{parent:bt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&ac(r,null),jf(),dy(r),i!==null&&Jo(i,r,c,!0),r.childLanes=y,null}function Ac(i,r){return r=Ic({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function u_(i,r,a){return eo(r,i.child,null,a),i=Ac(r,r.pendingProps),i.flags|=2,Un(r),r.memoizedState=null,i}function HI(i,r,a){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(He){if(c.mode==="hidden")return i=Ac(r,c),r.lanes=536870912,vl(null,i);if(th(r),(i=lt)?(i=Ev(i,Qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Bs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},a=Yg(i),a.return=r,r.child=a,Qt=r,lt=null)):i=null,i===null)throw zs(r);return r.lanes=536870912,null}return Ac(r,c)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(th(r),y)if(r.flags&256)r.flags&=-257,r=u_(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(xt||Jo(i,r,a,!1),y=(a&i.childLanes)!==0,xt||y){if(c=rt,c!==null&&(A=Is(c,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Yr(i,A),Rn(c,i,A),Sh;kc(),r=u_(i,r,a)}else i=_.treeContext,lt=Wn(A.nextSibling),Qt=r,He=!0,Fs=null,Qn=!1,i!==null&&Qg(r,i),r=Ac(r,c),r.flags|=4096;return r}return i=Qi(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Cc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Ah(i,r,a,c,y){return Xr(r),a=ih(i,r,a,c,void 0,y),c=sh(),i!==null&&!xt?(rh(i,r,y),ts(i,r,y)):(He&&c&&Of(r),r.flags|=1,Wt(i,r,a,y),r.child)}function c_(i,r,a,c,y,_){return Xr(r),r.updateQueue=null,a=hy(r,c,a,y),fy(i),c=sh(),i!==null&&!xt?(rh(i,r,_),ts(i,r,_)):(He&&c&&Of(r),r.flags|=1,Wt(i,r,a,_),r.child)}function d_(i,r,a,c,y){if(Xr(r),r.stateNode===null){var _=Fo,A=a.contextType;typeof A=="object"&&A!==null&&(_=Xt(A)),_=new a(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Th,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},Qf(r),A=a.contextType,_.context=typeof A=="object"&&A!==null?Xt(A):Fo,_.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(vh(r,a,A,c),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Th.enqueueReplaceState(_,_.state,null),pl(r,c,_,y),hl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){_=r.stateNode;var R=r.memoizedProps,k=no(a,R);_.props=k;var Y=_.context,Z=a.contextType;A=Fo,typeof Z=="object"&&Z!==null&&(A=Xt(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||Y!==A)&&Wy(r,_,c,A),Gs=!1;var $=r.memoizedState;_.state=$,pl(r,c,_,y),hl(),Y=r.memoizedState,R||$!==Y||Gs?(typeof ne=="function"&&(vh(r,a,ne,c),Y=r.memoizedState),(k=Gs||Xy(r,a,k,c,$,Y,A))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),_.props=c,_.state=Y,_.context=A,c=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Xf(i,r),A=r.memoizedProps,Z=no(a,A),_.props=Z,ne=r.pendingProps,$=_.context,Y=a.contextType,k=Fo,typeof Y=="object"&&Y!==null&&(k=Xt(Y)),R=a.getDerivedStateFromProps,(Y=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ne||$!==k)&&Wy(r,_,c,k),Gs=!1,$=r.memoizedState,_.state=$,pl(r,c,_,y),hl();var Q=r.memoizedState;A!==ne||$!==Q||Gs||i!==null&&i.dependencies!==null&&rc(i.dependencies)?(typeof R=="function"&&(vh(r,a,R,c),Q=r.memoizedState),(Z=Gs||Xy(r,a,Z,c,$,Q,k)||i!==null&&i.dependencies!==null&&rc(i.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=k,c=Z):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(r.flags|=1024),c=!1)}return _=c,Cc(i,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&c?(r.child=eo(r,i.child,null,y),r.child=eo(r,null,a,y)):Wt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=ts(i,r,y),i}function f_(i,r,a,c){return $r(),r.flags|=256,Wt(i,r,a,c),r.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ih(i){return{baseLanes:i,cachePool:ty()}}function Rh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=On),i}function h_(i,r,a){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(Ct.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(He){if(y?Ks(r):$s(),(i=lt)?(i=Ev(i,Qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Bs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},a=Yg(i),a.return=r,r.child=a,Qt=r,lt=null)):i=null,i===null)throw zs(r);return lp(i)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?($s(),y=r.mode,R=Ic({mode:"hidden",children:R},y),c=Kr(c,y,a,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=Ih(a),c.childLanes=Rh(i,A,a),r.memoizedState=Ch,vl(null,c)):(Ks(r),wh(r,R))}var k=i.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(_)r.flags&256?(Ks(r),r.flags&=-257,r=bh(i,r,a)):r.memoizedState!==null?($s(),r.child=i.child,r.flags|=128,r=null):($s(),R=c.fallback,y=r.mode,c=Ic({mode:"visible",children:c.children},y),R=Kr(R,y,a,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,eo(r,i.child,null,a),c=r.child,c.memoizedState=Ih(a),c.childLanes=Rh(i,A,a),r.memoizedState=Ch,r=vl(null,c));else if(Ks(r),lp(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(s(419)),c.stack="",c.digest=A,al({value:c,source:null,stack:null}),r=bh(i,r,a)}else if(xt||Jo(i,r,a,!1),A=(a&i.childLanes)!==0,xt||A){if(A=rt,A!==null&&(c=Is(A,a),c!==0&&c!==k.retryLane))throw k.retryLane=c,Yr(i,c),Rn(A,i,c),Sh;ap(R)||kc(),r=bh(i,r,a)}else ap(R)?(r.flags|=192,r.child=i.child,r=null):(i=k.treeContext,lt=Wn(R.nextSibling),Qt=r,He=!0,Fs=null,Qn=!1,i!==null&&Qg(r,i),r=wh(r,c.children),r.flags|=4096);return r}return y?($s(),R=c.fallback,y=r.mode,k=i.child,Y=k.sibling,c=Qi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,Y!==null?R=Qi(Y,R):(R=Kr(R,y,a,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,vl(null,c),c=r.child,R=i.child.memoizedState,R===null?R=Ih(a):(y=R.cachePool,y!==null?(k=bt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=ty(),R={baseLanes:R.baseLanes|a,cachePool:y}),c.memoizedState=R,c.childLanes=Rh(i,A,a),r.memoizedState=Ch,vl(i.child,c)):(Ks(r),a=i.child,i=a.sibling,a=Qi(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=a,r.memoizedState=null,a)}function wh(i,r){return r=Ic({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Ic(i,r){return i=kn(22,i,null,r),i.lanes=0,i}function bh(i,r,a){return eo(r,i.child,null,a),i=wh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function p_(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),Hf(i.return,r,a)}function Nh(i,r,a,c,y,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=_)}function m_(i,r,a){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Ct.current,R=(A&2)!==0;if(R?(A=A&1|2,r.flags|=128):A&=1,oe(Ct,A),Wt(i,r,c,a),c=He?ol:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&p_(i,a,r);else if(i.tag===19)p_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&hc(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),Nh(r,!1,y,a,_,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&hc(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Nh(r,!0,a,null,_,c);break;case"together":Nh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ts(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Ws|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Jo(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Qi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Qi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function xh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&rc(i)))}function GI(i,r,a){switch(r.tag){case 3:Pe(r,r.stateNode.containerInfo),Hs(r,bt,i.memoizedState.cache),$r();break;case 27:case 5:St(r);break;case 4:Pe(r,r.stateNode.containerInfo);break;case 10:Hs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,th(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ks(r),r.flags|=128,null):(a&r.child.childLanes)!==0?h_(i,r,a):(Ks(r),i=ts(i,r,a),i!==null?i.sibling:null);Ks(r);break;case 19:var y=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Jo(i,r,a,!1),c=(a&r.childLanes)!==0),y){if(c)return m_(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),oe(Ct,Ct.current),c)break;return null;case 22:return r.lanes=0,a_(i,r,a,r.pendingProps);case 24:Hs(r,bt,i.memoizedState.cache)}return ts(i,r,a)}function g_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)xt=!0;else{if(!xh(i,a)&&(r.flags&128)===0)return xt=!1,GI(i,r,a);xt=(i.flags&131072)!==0}else xt=!1,He&&(r.flags&1048576)!==0&&$g(r,ol,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=Zr(r.elementType),r.type=i,typeof i=="function")Vf(i)?(c=no(i,c),r.tag=1,r=d_(null,r,i,c,a)):(r.tag=0,r=Ah(null,r,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===ie){r.tag=11,r=s_(null,r,i,c,a);break e}else if(y===M){r.tag=14,r=r_(null,r,i,c,a);break e}}throw r=st(i)||i,Error(s(306,r,""))}}return r;case 0:return Ah(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,y=no(c,r.pendingProps),d_(i,r,c,y,a);case 3:e:{if(Pe(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Xf(i,r),pl(r,c,null,a);var A=r.memoizedState;if(c=A.cache,Hs(r,bt,c),c!==_.cache&&Gf(r,[bt],a,!0),hl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=f_(i,r,c,a);break e}else if(c!==y){y=Yn(Error(s(424)),r),al(y),r=f_(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(lt=Wn(i.firstChild),Qt=r,He=!0,Fs=null,Qn=!0,a=ay(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($r(),c===y){r=ts(i,r,a);break e}Wt(i,r,c,a)}r=r.child}return r;case 26:return Cc(i,r),i===null?(a=wv(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,i=r.pendingProps,c=Fc(ue.current).createElement(a),c[gt]=r,c[$t]=i,Zt(c,a,i),At(c),r.stateNode=c):r.memoizedState=wv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return St(r),i===null&&He&&(c=r.stateNode=Cv(r.type,r.pendingProps,ue.current),Qt=r,Qn=!0,y=lt,nr(r.type)?(up=y,lt=Wn(c.firstChild)):lt=y),Wt(i,r,r.pendingProps.children,a),Cc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&He&&((y=c=lt)&&(c=TR(c,r.type,r.pendingProps,Qn),c!==null?(r.stateNode=c,Qt=r,lt=Wn(c.firstChild),Qn=!1,y=!0):y=!1),y||zs(r)),St(r),y=r.type,_=r.pendingProps,A=i!==null?i.memoizedProps:null,c=_.children,sp(y,_)?c=null:A!==null&&sp(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=ih(i,r,VI,null,null,a),kl._currentValue=y),Cc(i,r),Wt(i,r,c,a),r.child;case 6:return i===null&&He&&((i=a=lt)&&(a=ER(a,r.pendingProps,Qn),a!==null?(r.stateNode=a,Qt=r,lt=null,i=!0):i=!1),i||zs(r)),null;case 13:return h_(i,r,a);case 4:return Pe(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=eo(r,null,c,a):Wt(i,r,c,a),r.child;case 11:return s_(i,r,r.type,r.pendingProps,a);case 7:return Wt(i,r,r.pendingProps,a),r.child;case 8:return Wt(i,r,r.pendingProps.children,a),r.child;case 12:return Wt(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Hs(r,r.type,c.value),Wt(i,r,c.children,a),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Xr(r),y=Xt(y),c=c(y),r.flags|=1,Wt(i,r,c,a),r.child;case 14:return r_(i,r,r.type,r.pendingProps,a);case 15:return o_(i,r,r.type,r.pendingProps,a);case 19:return m_(i,r,a);case 31:return HI(i,r,a);case 22:return a_(i,r,a,r.pendingProps);case 24:return Xr(r),c=Xt(bt),i===null?(y=Kf(),y===null&&(y=rt,_=Jf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:c,cache:y},Qf(r),Hs(r,bt,y)):((i.lanes&a)!==0&&(Xf(i,r),pl(r,null,null,a),hl()),y=i.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Hs(r,bt,c)):(c=_.cache,Hs(r,bt,c),c!==y.cache&&Gf(r,[bt],a,!0))),Wt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ns(i){i.flags|=4}function Mh(i,r,a,c,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(H_())i.flags|=8192;else throw jr=uc,$f}else i.flags&=-16777217}function y_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Dv(r))if(H_())i.flags|=8192;else throw jr=uc,$f}function Rc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Ba():536870912,i.lanes|=r,ia|=r)}function Tl(i,r){if(!He)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function ut(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function JI(i,r,a){var c=r.pendingProps;switch(qf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Zi(bt),De(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Go(r)?ns(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ff())),ut(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(ns(r),_!==null?(ut(r),y_(r,_)):(ut(r),Mh(r,y,null,c,a))):_?_!==i.memoizedState?(ns(r),ut(r),y_(r,_)):(ut(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&ns(r),ut(r),Mh(r,y,i,c,a)),null;case 27:if(ii(r),a=ue.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&ns(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return ut(r),null}i=he.current,Go(r)?Xg(r):(i=Cv(y,c,a),r.stateNode=i,ns(r))}return ut(r),null;case 5:if(ii(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&ns(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return ut(r),null}if(_=he.current,Go(r))Xg(r);else{var A=Fc(ue.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[gt]=r,_[$t]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(Zt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ns(r)}}return ut(r),Mh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&ns(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=ue.current,Go(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,y=Qt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[gt]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||hv(i.nodeValue,a)),i||zs(r,!0)}else i=Fc(i).createTextNode(c),i[gt]=r,r.stateNode=i}return ut(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=Go(r),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[gt]=r}else $r(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),i=!1}else a=Ff(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Un(r),r):(Un(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ut(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Go(r),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[gt]=r}else $r(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),y=!1}else y=Ff(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Un(r),r):(Un(r),null)}return Un(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),Rc(r,r.updateQueue),ut(r),null);case 4:return De(),i===null&&jh(r.stateNode.containerInfo),ut(r),null;case 10:return Zi(r.type),ut(r),null;case 19:if(j(Ct),c=r.memoizedState,c===null)return ut(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Tl(c,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=hc(i),_!==null){for(r.flags|=128,Tl(c,!1),i=_.updateQueue,r.updateQueue=i,Rc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Jg(a,i),a=a.sibling;return oe(Ct,Ct.current&1|2),He&&Xi(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&Yt()>Mc&&(r.flags|=128,y=!0,Tl(c,!1),r.lanes=4194304)}else{if(!y)if(i=hc(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,Rc(r,i),Tl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!He)return ut(r),null}else 2*Yt()-c.renderingStartTime>Mc&&a!==536870912&&(r.flags|=128,y=!0,Tl(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(i=c.last,i!==null?i.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=Yt(),i.sibling=null,a=Ct.current,oe(Ct,y?a&1|2:a&1),He&&Xi(r,c.treeForkCount),i):(ut(r),null);case 22:case 23:return Un(r),eh(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),a=r.updateQueue,a!==null&&Rc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&j(Wr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Zi(bt),ut(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function YI(i,r){switch(qf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Zi(bt),De(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return ii(r),null;case 31:if(r.memoizedState!==null){if(Un(r),r.alternate===null)throw Error(s(340));$r()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Un(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));$r()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return j(Ct),null;case 4:return De(),null;case 10:return Zi(r.type),null;case 22:case 23:return Un(r),eh(),i!==null&&j(Wr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Zi(bt),null;case 25:return null;default:return null}}function __(i,r){switch(qf(r),r.tag){case 3:Zi(bt),De();break;case 26:case 27:case 5:ii(r);break;case 4:De();break;case 31:r.memoizedState!==null&&Un(r);break;case 13:Un(r);break;case 19:j(Ct);break;case 10:Zi(r.type);break;case 22:case 23:Un(r),eh(),i!==null&&j(Wr);break;case 24:Zi(bt)}}function El(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var _=a.create,A=a.inst;c=_(),A.destroy=c}a=a.next}while(a!==y)}}catch(R){et(r,r.return,R)}}function Qs(i,r,a){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&i)===i){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=r;var k=a,Y=R;try{Y()}catch(Z){et(y,k,Z)}}}c=c.next}while(c!==_)}}catch(Z){et(r,r.return,Z)}}function v_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{uy(r,a)}catch(c){et(i,i.return,c)}}}function T_(i,r,a){a.props=no(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){et(i,r,c)}}function Sl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){et(i,r,y)}}function Ri(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){et(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){et(i,r,y)}else a.current=null}function E_(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){et(i,i.return,y)}}function Dh(i,r,a){try{var c=i.stateNode;pR(c,i.type,a,r),c[$t]=r}catch(y){et(i,i.return,y)}}function S_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&nr(i.type)||i.tag===4}function Ph(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||S_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&nr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function kh(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Bt));else if(c!==4&&(c===27&&nr(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(kh(i,r,a),i=i.sibling;i!==null;)kh(i,r,a),i=i.sibling}function wc(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&nr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(wc(i,r,a),i=i.sibling;i!==null;)wc(i,r,a),i=i.sibling}function A_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Zt(r,c,a),r[gt]=i,r[$t]=a}catch(_){et(i,i.return,_)}}var is=!1,Mt=!1,Vh=!1,C_=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function KI(i,r){if(i=i.containerInfo,np=$c,i=Ug(i),bf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,R=-1,k=-1,Y=0,Z=0,ne=i,$=null;t:for(;;){for(var Q;ne!==a||y!==0&&ne.nodeType!==3||(R=A+y),ne!==_||c!==0&&ne.nodeType!==3||(k=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)$=ne,ne=Q;for(;;){if(ne===i)break t;if($===a&&++Y===y&&(R=A),$===_&&++Z===c&&(k=A),(Q=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=Q}a=R===-1||k===-1?null:{start:R,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(ip={focusedElem:i,selectionRange:a},$c=!1,Ht=r;Ht!==null;)if(r=Ht,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Ht=i;else for(;Ht!==null;){switch(r=Ht,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,c=a.stateNode;try{var pe=no(a.type,y);i=c.getSnapshotBeforeUpdate(pe,_),c.__reactInternalSnapshotBeforeUpdate=i}catch(Se){et(a,a.return,Se)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)op(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":op(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Ht=i;break}Ht=r.return}}function I_(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:rs(i,a),c&4&&El(5,a);break;case 1:if(rs(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(A){et(a,a.return,A)}else{var y=no(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){et(a,a.return,A)}}c&64&&v_(a),c&512&&Sl(a,a.return);break;case 3:if(rs(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{uy(i,r)}catch(A){et(a,a.return,A)}}break;case 27:r===null&&c&4&&A_(a);case 26:case 5:rs(i,a),r===null&&c&4&&E_(a),c&512&&Sl(a,a.return);break;case 12:rs(i,a);break;case 31:rs(i,a),c&4&&b_(i,a);break;case 13:rs(i,a),c&4&&N_(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=nR.bind(null,a),SR(i,a))));break;case 22:if(c=a.memoizedState!==null||is,!c){r=r!==null&&r.memoizedState!==null||Mt,y=is;var _=Mt;is=c,(Mt=r)&&!_?os(i,a,(a.subtreeFlags&8772)!==0):rs(i,a),is=y,Mt=_}break;case 30:break;default:rs(i,a)}}function R_(i){var r=i.alternate;r!==null&&(i.alternate=null,R_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&kr(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ht=null,Sn=!1;function ss(i,r,a){for(a=a.child;a!==null;)w_(i,r,a),a=a.sibling}function w_(i,r,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ts,a)}catch{}switch(a.tag){case 26:Mt||Ri(a,r),ss(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Ri(a,r);var c=ht,y=Sn;nr(a.type)&&(ht=a.stateNode,Sn=!1),ss(i,r,a),Ml(a.stateNode),ht=c,Sn=y;break;case 5:Mt||Ri(a,r);case 6:if(c=ht,y=Sn,ht=null,ss(i,r,a),ht=c,Sn=y,ht!==null)if(Sn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(_){et(a,r,_)}else try{ht.removeChild(a.stateNode)}catch(_){et(a,r,_)}break;case 18:ht!==null&&(Sn?(i=ht,vv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),da(i)):vv(ht,a.stateNode));break;case 4:c=ht,y=Sn,ht=a.stateNode.containerInfo,Sn=!0,ss(i,r,a),ht=c,Sn=y;break;case 0:case 11:case 14:case 15:Qs(2,a,r),Mt||Qs(4,a,r),ss(i,r,a);break;case 1:Mt||(Ri(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&T_(a,r,c)),ss(i,r,a);break;case 21:ss(i,r,a);break;case 22:Mt=(c=Mt)||a.memoizedState!==null,ss(i,r,a),Mt=c;break;default:ss(i,r,a)}}function b_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{da(i)}catch(a){et(r,r.return,a)}}}function N_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{da(i)}catch(a){et(r,r.return,a)}}function $I(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new C_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new C_),r;default:throw Error(s(435,i.tag))}}function bc(i,r){var a=$I(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var y=iR.bind(null,i,c);c.then(y,y)}})}function An(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],_=i,A=r,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(nr(R.type)){ht=R.stateNode,Sn=!1;break e}break;case 5:ht=R.stateNode,Sn=!1;break e;case 3:case 4:ht=R.stateNode.containerInfo,Sn=!0;break e}R=R.return}if(ht===null)throw Error(s(160));w_(_,A,y),ht=null,Sn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)x_(r,i),r=r.sibling}var ui=null;function x_(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:An(r,i),Cn(i),c&4&&(Qs(3,i,i.return),El(3,i),Qs(5,i,i.return));break;case 1:An(r,i),Cn(i),c&512&&(Mt||a===null||Ri(a,a.return)),c&64&&is&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=ui;if(An(r,i),Cn(i),c&512&&(Mt||a===null||Ri(a,a.return)),c&4){var _=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Fi]||_[gt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Zt(_,c,a),_[gt]=i,At(_),c=_;break e;case"link":var A=xv("link","href",y).get(c+(a.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(R,1);break t}}_=y.createElement(c),Zt(_,c,a),y.head.appendChild(_);break;case"meta":if(A=xv("meta","content",y).get(c+(a.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(R,1);break t}}_=y.createElement(c),Zt(_,c,a),y.head.appendChild(_);break;default:throw Error(s(468,c))}_[gt]=i,At(_),c=_}i.stateNode=c}else Mv(y,i.type,i.stateNode);else i.stateNode=Nv(y,c,i.memoizedProps);else _!==c?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,c===null?Mv(y,i.type,i.stateNode):Nv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Dh(i,i.memoizedProps,a.memoizedProps)}break;case 27:An(r,i),Cn(i),c&512&&(Mt||a===null||Ri(a,a.return)),a!==null&&c&4&&Dh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(An(r,i),Cn(i),c&512&&(Mt||a===null||Ri(a,a.return)),i.flags&32){y=i.stateNode;try{Gn(y,"")}catch(pe){et(i,i.return,pe)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Dh(i,y,a!==null?a.memoizedProps:y)),c&1024&&(Vh=!0);break;case 6:if(An(r,i),Cn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(pe){et(i,i.return,pe)}}break;case 3:if(Gc=null,y=ui,ui=zc(r.containerInfo),An(r,i),ui=y,Cn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{da(r.containerInfo)}catch(pe){et(i,i.return,pe)}Vh&&(Vh=!1,M_(i));break;case 4:c=ui,ui=zc(i.stateNode.containerInfo),An(r,i),Cn(i),ui=c;break;case 12:An(r,i),Cn(i);break;case 31:An(r,i),Cn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,bc(i,c)));break;case 13:An(r,i),Cn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xc=Yt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,bc(i,c)));break;case 22:y=i.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,Y=is,Z=Mt;if(is=Y||y,Mt=Z||k,An(r,i),Mt=Z,is=Y,Cn(i),c&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||k||is||Mt||io(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(_=k.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=k.stateNode;var ne=k.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(pe){et(k,k.return,pe)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(pe){et(k,k.return,pe)}}}else if(r.tag===18){if(a===null){k=r;try{var Q=k.stateNode;y?Tv(Q,!0):Tv(k.stateNode,!1)}catch(pe){et(k,k.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,bc(i,a))));break;case 19:An(r,i),Cn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,bc(i,c)));break;case 30:break;case 21:break;default:An(r,i),Cn(i)}}function Cn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(S_(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=Ph(i);wc(i,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(Gn(A,""),a.flags&=-33);var R=Ph(i);wc(i,R,A);break;case 3:case 4:var k=a.stateNode.containerInfo,Y=Ph(i);kh(i,Y,k);break;default:throw Error(s(161))}}catch(Z){et(i,i.return,Z)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function M_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;M_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function rs(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)I_(i,r.alternate,r),r=r.sibling}function io(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Qs(4,r,r.return),io(r);break;case 1:Ri(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&T_(r,r.return,a),io(r);break;case 27:Ml(r.stateNode);case 26:case 5:Ri(r,r.return),io(r);break;case 22:r.memoizedState===null&&io(r);break;case 30:io(r);break;default:io(r)}i=i.sibling}}function os(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=i,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:os(y,_,a),El(4,_);break;case 1:if(os(y,_,a),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){et(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var R=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)ly(k[y],R)}catch(Y){et(c,c.return,Y)}}a&&A&64&&v_(_),Sl(_,_.return);break;case 27:A_(_);case 26:case 5:os(y,_,a),a&&c===null&&A&4&&E_(_),Sl(_,_.return);break;case 12:os(y,_,a);break;case 31:os(y,_,a),a&&A&4&&b_(y,_);break;case 13:os(y,_,a),a&&A&4&&N_(y,_);break;case 22:_.memoizedState===null&&os(y,_,a),Sl(_,_.return);break;case 30:break;default:os(y,_,a)}r=r.sibling}}function Uh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ll(a))}function Lh(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&ll(i))}function ci(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)D_(i,r,a,c),r=r.sibling}function D_(i,r,a,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ci(i,r,a,c),y&2048&&El(9,r);break;case 1:ci(i,r,a,c);break;case 3:ci(i,r,a,c),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&ll(i)));break;case 12:if(y&2048){ci(i,r,a,c),i=r.stateNode;try{var _=r.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){et(r,r.return,k)}}else ci(i,r,a,c);break;case 31:ci(i,r,a,c);break;case 13:ci(i,r,a,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?ci(i,r,a,c):Al(i,r):_._visibility&2?ci(i,r,a,c):(_._visibility|=2,ea(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Uh(A,r);break;case 24:ci(i,r,a,c),y&2048&&Lh(r.alternate,r);break;default:ci(i,r,a,c)}}function ea(i,r,a,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,A=r,R=a,k=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:ea(_,A,R,k,y),El(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?ea(_,A,R,k,y):Al(_,A):(Z._visibility|=2,ea(_,A,R,k,y)),y&&Y&2048&&Uh(A.alternate,A);break;case 24:ea(_,A,R,k,y),y&&Y&2048&&Lh(A.alternate,A);break;default:ea(_,A,R,k,y)}r=r.sibling}}function Al(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,y=c.flags;switch(c.tag){case 22:Al(a,c),y&2048&&Uh(c.alternate,c);break;case 24:Al(a,c),y&2048&&Lh(c.alternate,c);break;default:Al(a,c)}r=r.sibling}}var Cl=8192;function ta(i,r,a){if(i.subtreeFlags&Cl)for(i=i.child;i!==null;)P_(i,r,a),i=i.sibling}function P_(i,r,a){switch(i.tag){case 26:ta(i,r,a),i.flags&Cl&&i.memoizedState!==null&&kR(a,ui,i.memoizedState,i.memoizedProps);break;case 5:ta(i,r,a);break;case 3:case 4:var c=ui;ui=zc(i.stateNode.containerInfo),ta(i,r,a),ui=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Cl,Cl=16777216,ta(i,r,a),Cl=c):ta(i,r,a));break;default:ta(i,r,a)}}function k_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Il(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Ht=c,U_(c,i)}k_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)V_(i),i=i.sibling}function V_(i){switch(i.tag){case 0:case 11:case 15:Il(i),i.flags&2048&&Qs(9,i,i.return);break;case 3:Il(i);break;case 12:Il(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Nc(i)):Il(i);break;default:Il(i)}}function Nc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Ht=c,U_(c,i)}k_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Qs(8,r,r.return),Nc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Nc(r));break;default:Nc(r)}i=i.sibling}}function U_(i,r){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Qs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ll(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Ht=c;else e:for(a=i;Ht!==null;){c=Ht;var y=c.sibling,_=c.return;if(R_(c),c===a){Ht=null;break e}if(y!==null){y.return=_,Ht=y;break e}Ht=_}}}var QI={getCacheForType:function(i){var r=Xt(bt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Xt(bt).controller.signal}},XI=typeof WeakMap=="function"?WeakMap:Map,Xe=0,rt=null,Ue=null,Oe=0,je=0,Ln=null,Xs=!1,na=!1,Oh=!1,as=0,vt=0,Ws=0,so=0,qh=0,On=0,ia=0,Rl=null,In=null,Bh=!1,xc=0,L_=0,Mc=1/0,Dc=null,Zs=null,Ut=0,js=null,sa=null,ls=0,Fh=0,zh=null,O_=null,wl=0,Hh=null;function qn(){return(Xe&2)!==0&&Oe!==0?Oe&-Oe:z.T!==null?Qh():Bi()}function q_(){if(On===0)if((Oe&536870912)===0||He){var i=gi;gi<<=1,(gi&3932160)===0&&(gi=262144),On=i}else On=536870912;return i=Vn.current,i!==null&&(i.flags|=32),On}function Rn(i,r,a){(i===rt&&(je===2||je===9)||i.cancelPendingCommit!==null)&&(ra(i,0),er(i,Oe,On,!1)),As(i,a),((Xe&2)===0||i!==rt)&&(i===rt&&((Xe&2)===0&&(so|=a),vt===4&&er(i,Oe,On,!1)),wi(i))}function B_(i,r,a){if((Xe&6)!==0)throw Error(s(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||Ss(i,r),y=c?jI(i,r):Jh(i,r,!0),_=c;do{if(y===0){na&&!c&&er(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!WI(a)){y=Jh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var R=i;y=Rl;var k=R.current.memoizedState.isDehydrated;if(k&&(ra(R,A).flags|=256),A=Jh(R,A,!1),A!==2){if(Oh&&!k){R.errorRecoveryDisabledLanes|=_,so|=_,y=4;break e}_=In,In=y,_!==null&&(In===null?In=_:In.push.apply(In,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){ra(i,0),er(i,r,0,!0);break}e:{switch(c=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:er(c,r,On,!Xs);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=xc+300-Yt(),10<y)){if(er(c,r,On,!Xs),zn(c,0,!0)!==0)break e;ls=r,c.timeoutHandle=yv(F_.bind(null,c,a,In,Dc,Bh,r,On,so,ia,Xs,_,"Throttled",-0,0),y);break e}F_(c,a,In,Dc,Bh,r,On,so,ia,Xs,_,null,-0,0)}}break}while(!0);wi(i)}function F_(i,r,a,c,y,_,A,R,k,Y,Z,ne,$,Q){if(i.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bt},P_(r,_,ne);var pe=(_&62914560)===_?xc-Yt():(_&4194048)===_?L_-Yt():0;if(pe=VR(ne,pe),pe!==null){ls=_,i.cancelPendingCommit=pe(Q_.bind(null,i,r,_,a,c,y,A,R,k,Z,ne,null,$,Q)),er(i,_,A,!Y);return}}Q_(i,r,_,a,c,y,A,R,k)}function WI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],_=y.getSnapshot;y=y.value;try{if(!Pn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function er(i,r,a,c){r&=~qh,r&=~so,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var y=r;0<y;){var _=31-hn(y),A=1<<_;c[_]=-1,y&=~A}a!==0&&Fa(i,a,r)}function Pc(){return(Xe&6)===0?(bl(0),!1):!0}function Gh(){if(Ue!==null){if(je===0)var i=Ue.return;else i=Ue,Wi=Qr=null,oh(i),Qo=null,cl=0,i=Ue;for(;i!==null;)__(i.alternate,i),i=i.return;Ue=null}}function ra(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,yR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),ls=0,Gh(),rt=i,Ue=a=Qi(i.current,null),Oe=r,je=0,Ln=null,Xs=!1,na=Ss(i,r),Oh=!1,ia=On=qh=so=Ws=vt=0,In=Rl=null,Bh=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var y=31-hn(c),_=1<<y;r|=i[y],c&=~_}return as=r,ec(),a}function z_(i,r){xe=null,z.H=_l,r===$o||r===lc?(r=sy(),je=3):r===$f?(r=sy(),je=4):je=r===Sh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ln=r,Ue===null&&(vt=1,Sc(i,Yn(r,i.current)))}function H_(){var i=Vn.current;return i===null?!0:(Oe&4194048)===Oe?Xn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?i===Xn:!1}function G_(){var i=z.H;return z.H=_l,i===null?_l:i}function J_(){var i=z.A;return z.A=QI,i}function kc(){vt=4,Xs||(Oe&4194048)!==Oe&&Vn.current!==null||(na=!0),(Ws&134217727)===0&&(so&134217727)===0||rt===null||er(rt,Oe,On,!1)}function Jh(i,r,a){var c=Xe;Xe|=2;var y=G_(),_=J_();(rt!==i||Oe!==r)&&(Dc=null,ra(i,r)),r=!1;var A=vt;e:do try{if(je!==0&&Ue!==null){var R=Ue,k=Ln;switch(je){case 8:Gh(),A=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(r=!0);var Y=je;if(je=0,Ln=null,oa(i,R,k,Y),a&&na){A=0;break e}break;default:Y=je,je=0,Ln=null,oa(i,R,k,Y)}}ZI(),A=vt;break}catch(Z){z_(i,Z)}while(!0);return r&&i.shellSuspendCounter++,Wi=Qr=null,Xe=c,z.H=y,z.A=_,Ue===null&&(rt=null,Oe=0,ec()),A}function ZI(){for(;Ue!==null;)Y_(Ue)}function jI(i,r){var a=Xe;Xe|=2;var c=G_(),y=J_();rt!==i||Oe!==r?(Dc=null,Mc=Yt()+500,ra(i,r)):na=Ss(i,r);e:do try{if(je!==0&&Ue!==null){r=Ue;var _=Ln;t:switch(je){case 1:je=0,Ln=null,oa(i,r,_,1);break;case 2:case 9:if(ny(_)){je=0,Ln=null,K_(r);break}r=function(){je!==2&&je!==9||rt!==i||(je=7),wi(i)},_.then(r,r);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:ny(_)?(je=0,Ln=null,K_(r)):(je=0,Ln=null,oa(i,r,_,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var R=Ue;if(A?Dv(A):R.stateNode.complete){je=0,Ln=null;var k=R.sibling;if(k!==null)Ue=k;else{var Y=R.return;Y!==null?(Ue=Y,Vc(Y)):Ue=null}break t}}je=0,Ln=null,oa(i,r,_,5);break;case 6:je=0,Ln=null,oa(i,r,_,6);break;case 8:Gh(),vt=6;break e;default:throw Error(s(462))}}eR();break}catch(Z){z_(i,Z)}while(!0);return Wi=Qr=null,z.H=c,z.A=y,Xe=a,Ue!==null?0:(rt=null,Oe=0,ec(),vt)}function eR(){for(;Ue!==null&&!yf();)Y_(Ue)}function Y_(i){var r=g_(i.alternate,i,as);i.memoizedProps=i.pendingProps,r===null?Vc(i):Ue=r}function K_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=c_(a,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=c_(a,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:oh(r);default:__(a,r),r=Ue=Jg(r,as),r=g_(a,r,as)}i.memoizedProps=i.pendingProps,r===null?Vc(i):Ue=r}function oa(i,r,a,c){Wi=Qr=null,oh(r),Qo=null,cl=0;var y=r.return;try{if(zI(i,y,r,a,Oe)){vt=1,Sc(i,Yn(a,i.current)),Ue=null;return}}catch(_){if(y!==null)throw Ue=y,_;vt=1,Sc(i,Yn(a,i.current)),Ue=null;return}r.flags&32768?(He||c===1?i=!0:na||(Oe&536870912)!==0?i=!1:(Xs=i=!0,(c===2||c===9||c===3||c===6)&&(c=Vn.current,c!==null&&c.tag===13&&(c.flags|=16384))),$_(r,i)):Vc(r)}function Vc(i){var r=i;do{if((r.flags&32768)!==0){$_(r,Xs);return}i=r.return;var a=JI(r.alternate,r,as);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=i}while(r!==null);vt===0&&(vt=5)}function $_(i,r){do{var a=YI(i.alternate,i);if(a!==null){a.flags&=32767,Ue=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ue=i;return}Ue=i=a}while(i!==null);vt=6,Ue=null}function Q_(i,r,a,c,y,_,A,R,k){i.cancelPendingCommit=null;do Uc();while(Ut!==0);if((Xe&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Pf,Kt(i,a,_,A,R,k),i===rt&&(Ue=rt=null,Oe=0),sa=r,js=i,ls=a,Fh=_,zh=y,O_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,sR(Oi,function(){return ev(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=z.T,z.T=null,y=ae.p,ae.p=2,A=Xe,Xe|=4;try{KI(i,r,a)}finally{Xe=A,ae.p=y,z.T=c}}Ut=1,X_(),W_(),Z_()}}function X_(){if(Ut===1){Ut=0;var i=js,r=sa,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var c=ae.p;ae.p=2;var y=Xe;Xe|=4;try{x_(r,i);var _=ip,A=Ug(i.containerInfo),R=_.focusedElem,k=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&Vg(R.ownerDocument.documentElement,R)){if(k!==null&&bf(R)){var Y=k.start,Z=k.end;if(Z===void 0&&(Z=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(Z,R.value.length);else{var ne=R.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var Q=$.getSelection(),pe=R.textContent.length,Se=Math.min(k.start,pe),it=k.end===void 0?Se:Math.min(k.end,pe);!Q.extend&&Se>it&&(A=it,it=Se,Se=A);var F=kg(R,Se),L=kg(R,it);if(F&&L&&(Q.rangeCount!==1||Q.anchorNode!==F.node||Q.anchorOffset!==F.offset||Q.focusNode!==L.node||Q.focusOffset!==L.offset)){var J=ne.createRange();J.setStart(F.node,F.offset),Q.removeAllRanges(),Se>it?(Q.addRange(J),Q.extend(L.node,L.offset)):(J.setEnd(L.node,L.offset),Q.addRange(J))}}}}for(ne=[],Q=R;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ne.length;R++){var ee=ne[R];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}$c=!!np,ip=np=null}finally{Xe=y,ae.p=c,z.T=a}}i.current=r,Ut=2}}function W_(){if(Ut===2){Ut=0;var i=js,r=sa,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var c=ae.p;ae.p=2;var y=Xe;Xe|=4;try{I_(i,r.alternate,r)}finally{Xe=y,ae.p=c,z.T=a}}Ut=3}}function Z_(){if(Ut===4||Ut===3){Ut=0,La();var i=js,r=sa,a=ls,c=O_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,sa=js=null,j_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Zs=null),Ha(a),r=r.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ts,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=z.T,y=ae.p,ae.p=2,z.T=null;try{for(var _=i.onRecoverableError,A=0;A<c.length;A++){var R=c[A];_(R.value,{componentStack:R.stack})}}finally{z.T=r,ae.p=y}}(ls&3)!==0&&Uc(),wi(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Hh?wl++:(wl=0,Hh=i):wl=0,bl(0)}}function j_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,ll(r)))}function Uc(){return X_(),W_(),Z_(),ev()}function ev(){if(Ut!==5)return!1;var i=js,r=Fh;Fh=0;var a=Ha(ls),c=z.T,y=ae.p;try{ae.p=32>a?32:a,z.T=null,a=zh,zh=null;var _=js,A=ls;if(Ut=0,sa=js=null,ls=0,(Xe&6)!==0)throw Error(s(331));var R=Xe;if(Xe|=4,V_(_.current),D_(_,_.current,A,a),Xe=R,bl(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ts,_)}catch{}return!0}finally{ae.p=y,z.T=c,j_(i,r)}}function tv(i,r,a){r=Yn(a,r),r=Eh(i.stateNode,r,2),i=Ys(i,r,2),i!==null&&(As(i,2),wi(i))}function et(i,r,a){if(i.tag===3)tv(i,i,a);else for(;r!==null;){if(r.tag===3){tv(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zs===null||!Zs.has(c))){i=Yn(a,i),a=n_(2),c=Ys(r,a,2),c!==null&&(i_(a,c,r,i),As(c,2),wi(c));break}}r=r.return}}function Yh(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new XI;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(a)||(Oh=!0,y.add(a),i=tR.bind(null,i,r,a),r.then(i,i))}function tR(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,rt===i&&(Oe&a)===a&&(vt===4||vt===3&&(Oe&62914560)===Oe&&300>Yt()-xc?(Xe&2)===0&&ra(i,0):qh|=a,ia===Oe&&(ia=0)),wi(i)}function nv(i,r){r===0&&(r=Ba()),i=Yr(i,r),i!==null&&(As(i,r),wi(i))}function nR(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),nv(i,a)}function iR(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),nv(i,a)}function sR(i,r){return Mr(i,r)}var Lc=null,aa=null,Kh=!1,Oc=!1,$h=!1,tr=0;function wi(i){i!==aa&&i.next===null&&(aa===null?Lc=aa=i:aa=aa.next=i),Oc=!0,Kh||(Kh=!0,oR())}function bl(i,r){if(!$h&&Oc){$h=!0;do for(var a=!1,c=Lc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,R=c.pingedLanes;_=(1<<31-hn(42|i)+1)-1,_&=y&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,ov(c,_))}else _=Oe,_=zn(c,c===rt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Ss(c,_)||(a=!0,ov(c,_));c=c.next}while(a);$h=!1}}function rR(){iv()}function iv(){Oc=Kh=!1;var i=0;tr!==0&&gR()&&(i=tr);for(var r=Yt(),a=null,c=Lc;c!==null;){var y=c.next,_=sv(c,r);_===0?(c.next=null,a===null?Lc=y:a.next=y,y===null&&(aa=a)):(a=c,(i!==0||(_&3)!==0)&&(Oc=!0)),c=y}Ut!==0&&Ut!==5||bl(i),tr!==0&&(tr=0)}function sv(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-hn(_),R=1<<A,k=y[A];k===-1?((R&a)===0||(R&c)!==0)&&(y[A]=wo(R,r)):k<=r&&(i.expiredLanes|=R),_&=~R}if(r=rt,a=Oe,a=zn(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(je===2||je===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Ro(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Ss(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&Ro(c),Ha(a)){case 2:case 8:a=qt;break;case 32:a=Oi;break;case 268435456:a=Oa;break;default:a=Oi}return c=rv.bind(null,i),a=Mr(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&Ro(c),i.callbackPriority=2,i.callbackNode=null,2}function rv(i,r){if(Ut!==0&&Ut!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Uc()&&i.callbackNode!==a)return null;var c=Oe;return c=zn(i,i===rt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(B_(i,c,r),sv(i,Yt()),i.callbackNode!=null&&i.callbackNode===a?rv.bind(null,i):null)}function ov(i,r){if(Uc())return null;B_(i,r,!0)}function oR(){_R(function(){(Xe&6)!==0?Mr(Vt,rR):iv()})}function Qh(){if(tr===0){var i=Yo;i===0&&(i=Pr,Pr<<=1,(Pr&261888)===0&&(Pr=256)),tr=i}return tr}function av(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ei(""+i)}function lv(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function aR(i,r,a,c,y){if(r==="submit"&&a&&a.stateNode===y){var _=av((y[$t]||null).action),A=c.submitter;A&&(r=(r=A[$t]||null)?av(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var R=new qr("action","action",null,c,y);i.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(tr!==0){var k=A?lv(y,A):new FormData(y);mh(a,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=A?lv(y,A):new FormData(y),mh(a,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var Xh=0;Xh<Df.length;Xh++){var Wh=Df[Xh],lR=Wh.toLowerCase(),uR=Wh[0].toUpperCase()+Wh.slice(1);li(lR,"on"+uR)}li(qg,"onAnimationEnd"),li(Bg,"onAnimationIteration"),li(Fg,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(II,"onTransitionRun"),li(RI,"onTransitionStart"),li(wI,"onTransitionCancel"),li(zg,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function uv(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var R=c[A],k=R.instance,Y=R.currentTarget;if(R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=Y;try{_(y)}catch(Z){ju(Z)}y.currentTarget=null,_=k}else for(A=0;A<c.length;A++){if(R=c[A],k=R.instance,Y=R.currentTarget,R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=Y;try{_(y)}catch(Z){ju(Z)}y.currentTarget=null,_=k}}}}function Le(i,r){var a=r[Rs];a===void 0&&(a=r[Rs]=new Set);var c=i+"__bubble";a.has(c)||(cv(r,i,2,!1),a.add(c))}function Zh(i,r,a){var c=0;r&&(c|=4),cv(a,i,c,r)}var qc="_reactListening"+Math.random().toString(36).slice(2);function jh(i){if(!i[qc]){i[qc]=!0,bo.forEach(function(a){a!=="selectionchange"&&(cR.has(a)||Zh(a,!1,i),Zh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[qc]||(r[qc]=!0,Zh("selectionchange",!1,r))}}function cv(i,r,a,c){switch(qv(r)){case 2:var y=OR;break;case 8:y=qR;break;default:y=pp}a=y.bind(null,r,a,i),y=void 0,!Wa||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function ep(i,r,a,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=zi(R),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=_=A;continue e}R=R.parentNode}}c=c.return}Lu(function(){var Y=_,Z=Po(a),ne=[];e:{var $=Hg.get(i);if($!==void 0){var Q=qr,pe=i;switch(i){case"keypress":if(Or(a)===0)break e;case"keydown":case"keyup":Q=Yu;break;case"focusin":pe="focus",Q=Us;break;case"focusout":pe="blur",Q=Us;break;case"beforeblur":case"afterblur":Q=Us;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=$u;break;case qg:case Bg:case Fg:Q=Uo;break;case zg:Q=Lo;break;case"scroll":case"scrollend":Q=Ou;break;case"wheel":Q=Xu;break;case"copy":case"cut":case"paste":Q=zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=nl;break;case"toggle":case"beforetoggle":Q=Os}var Se=(r&4)!==0,it=!Se&&(i==="scroll"||i==="scrollend"),F=Se?$!==null?$+"Capture":null:$;Se=[];for(var L=Y,J;L!==null;){var ee=L;if(J=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||J===null||F===null||(ee=Tn(L,F),ee!=null&&Se.push(xl(L,ee,J))),it)break;L=L.return}0<Se.length&&($=new Q($,pe,null,a,Z),ne.push({event:$,listeners:Se}))}}if((r&7)===0){e:{if($=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",$&&a!==Do&&(pe=a.relatedTarget||a.fromElement)&&(zi(pe)||pe[_i]))break e;if((Q||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(pe=a.relatedTarget||a.toElement,Q=Y,pe=pe?zi(pe):null,pe!==null&&(it=l(pe),Se=pe.tag,pe!==it||Se!==5&&Se!==27&&Se!==6)&&(pe=null)):(Q=null,pe=Y),Q!==pe)){if(Se=qu,ee="onMouseLeave",F="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Se=nl,ee="onPointerLeave",F="onPointerEnter",L="pointer"),it=Q==null?$:Vr(Q),J=pe==null?$:Vr(pe),$=new Se(ee,L+"leave",Q,a,Z),$.target=it,$.relatedTarget=J,ee=null,zi(Z)===Y&&(Se=new Se(F,L+"enter",pe,a,Z),Se.target=J,Se.relatedTarget=it,ee=Se),it=ee,Q&&pe)t:{for(Se=dR,F=Q,L=pe,J=0,ee=F;ee;ee=Se(ee))J++;ee=0;for(var Te=L;Te;Te=Se(Te))ee++;for(;0<J-ee;)F=Se(F),J--;for(;0<ee-J;)L=Se(L),ee--;for(;J--;){if(F===L||L!==null&&F===L.alternate){Se=F;break t}F=Se(F),L=Se(L)}Se=null}else Se=null;Q!==null&&dv(ne,$,Q,Se,!1),pe!==null&&it!==null&&dv(ne,it,pe,Se,!0)}}e:{if($=Y?Vr(Y):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var Ke=bg;else if(En($))if(Ng)Ke=SI;else{Ke=TI;var ge=vI}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Qa(Y.elementType)&&(Ke=bg):Ke=EI;if(Ke&&(Ke=Ke(i,Y))){Hr(ne,Ke,a,Z);break e}ge&&ge(i,$,Y),i==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&Mo($,"number",$.value)}switch(ge=Y?Vr(Y):window,i){case"focusin":(En(ge)||ge.contentEditable==="true")&&(Oo=ge,Nf=Y,rl=null);break;case"focusout":rl=Nf=Oo=null;break;case"mousedown":xf=!0;break;case"contextmenu":case"mouseup":case"dragend":xf=!1,Lg(ne,a,Z);break;case"selectionchange":if(CI)break;case"keydown":case"keyup":Lg(ne,a,Z)}var Me;if(T)e:{switch(i){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ke?We(i,a)&&(qe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(H&&a.locale!=="ko"&&(ke||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ke&&(Me=Ds()):(Dn=Z,ko="value"in Dn?Dn.value:Dn.textContent,ke=!0)),ge=Bc(Y,qe),0<ge.length&&(qe=new ja(qe,i,null,a,Z),ne.push({event:qe,listeners:ge}),Me?qe.data=Me:(Me=wt(a),Me!==null&&(qe.data=Me)))),(Me=w?Ft(i,a):zt(i,a))&&(qe=Bc(Y,"onBeforeInput"),0<qe.length&&(ge=new ja("onBeforeInput","beforeinput",null,a,Z),ne.push({event:ge,listeners:qe}),ge.data=Me)),aR(ne,i,Y,a,Z)}uv(ne,r)})}function xl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Bc(i,r){for(var a=r+"Capture",c=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Tn(i,a),y!=null&&c.unshift(xl(i,y,_)),y=Tn(i,r),y!=null&&c.push(xl(i,y,_))),i.tag===3)return c;i=i.return}return[]}function dR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function dv(i,r,a,c,y){for(var _=r._reactName,A=[];a!==null&&a!==c;){var R=a,k=R.alternate,Y=R.stateNode;if(R=R.tag,k!==null&&k===c)break;R!==5&&R!==26&&R!==27||Y===null||(k=Y,y?(Y=Tn(a,_),Y!=null&&A.unshift(xl(a,Y,k))):y||(Y=Tn(a,_),Y!=null&&A.push(xl(a,Y,k)))),a=a.return}A.length!==0&&i.push({event:r,listeners:A})}var fR=/\r\n?/g,hR=/\u0000|\uFFFD/g;function fv(i){return(typeof i=="string"?i:""+i).replace(fR,`
`).replace(hR,"")}function hv(i,r){return r=fv(r),fv(i)===r}function nt(i,r,a,c,y,_){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Gn(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Gn(i,""+c);break;case"className":Ns(i,"class",c);break;case"tabIndex":Ns(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ns(i,a,c);break;case"style":Vu(i,c,_);break;case"data":if(r!=="object"){Ns(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ei(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&nt(i,r,"name",y.name,y,null),nt(i,r,"formEncType",y.formEncType,y,null),nt(i,r,"formMethod",y.formMethod,y,null),nt(i,r,"formTarget",y.formTarget,y,null)):(nt(i,r,"encType",y.encType,y,null),nt(i,r,"method",y.method,y,null),nt(i,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ei(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Bt);break;case"onScroll":c!=null&&Le("scroll",i);break;case"onScrollEnd":c!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Ei(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Le("beforetoggle",i),Le("toggle",i),bs(i,"popover",c);break;case"xlinkActuate":Hn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Hn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Hn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Hn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Hn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Hn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Hn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Hn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Hn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":bs(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Af.get(a)||a,bs(i,a,c))}}function tp(i,r,a,c,y,_){switch(a){case"style":Vu(i,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?Gn(i,c):(typeof c=="number"||typeof c=="bigint")&&Gn(i,""+c);break;case"onScroll":c!=null&&Le("scroll",i);break;case"onScrollEnd":c!=null&&Le("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Bt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ws.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[$t]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):bs(i,a,c)}}}function Zt(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var c=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nt(i,r,_,A,a,null)}}y&&nt(i,r,"srcSet",a.srcSet,a,null),c&&nt(i,r,"src",a.src,a,null);return;case"input":Le("invalid",i);var R=_=A=y=null,k=null,Y=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":A=Z;break;case"checked":k=Z;break;case"defaultChecked":Y=Z;break;case"value":_=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:nt(i,r,c,Z,a,null)}}Ur(i,_,R,k,Y,A,y,!1);return;case"select":Le("invalid",i),c=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(R=a[y],R!=null))switch(y){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:nt(i,r,y,R,a,null)}r=_,a=A,i.multiple=!!c,r!=null?Ye(i,!!c,r,!1):a!=null&&Ye(i,!!c,a,!0);return;case"textarea":Le("invalid",i),_=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(R=a[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:nt(i,r,A,R,a,null)}Ms(i,c,y,_);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(c=a[k],c!=null))switch(k){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(i,r,k,c,a,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(c=0;c<Nl.length;c++)Le(Nl[c],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(c=a[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:nt(i,r,Y,c,a,null)}return;default:if(Qa(r)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&tp(i,r,Z,c,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(c=a[R],c!=null&&nt(i,r,R,c,a,null))}function pR(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,R=null,k=null,Y=null,Z=null;for(Q in a){var ne=a[Q];if(a.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":k=ne;default:c.hasOwnProperty(Q)||nt(i,r,Q,null,c,ne)}}for(var $ in c){var Q=c[$];if(ne=a[$],c.hasOwnProperty($)&&(Q!=null||ne!=null))switch($){case"type":_=Q;break;case"name":y=Q;break;case"checked":Y=Q;break;case"defaultChecked":Z=Q;break;case"value":A=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==ne&&nt(i,r,$,Q,c,ne)}}xs(i,A,R,k,Y,Z,_,y);return;case"select":Q=A=R=$=null;for(_ in a)if(k=a[_],a.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":Q=k;default:c.hasOwnProperty(_)||nt(i,r,_,null,c,k)}for(y in c)if(_=c[y],k=a[y],c.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":$=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==k&&nt(i,r,y,_,c,k)}r=R,a=A,c=Q,$!=null?Ye(i,!!a,$,!1):!!c!=!!a&&(r!=null?Ye(i,!!a,r,!0):Ye(i,!!a,a?[]:"",!1));return;case"textarea":Q=$=null;for(R in a)if(y=a[R],a.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:nt(i,r,R,null,c,y)}for(A in c)if(y=c[A],_=a[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":$=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&nt(i,r,A,y,c,_)}Lr(i,$,Q);return;case"option":for(var pe in a)if($=a[pe],a.hasOwnProperty(pe)&&$!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:nt(i,r,pe,null,c,$)}for(k in c)if($=c[k],Q=a[k],c.hasOwnProperty(k)&&$!==Q&&($!=null||Q!=null))switch(k){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:nt(i,r,k,$,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)$=a[Se],a.hasOwnProperty(Se)&&$!=null&&!c.hasOwnProperty(Se)&&nt(i,r,Se,null,c,$);for(Y in c)if($=c[Y],Q=a[Y],c.hasOwnProperty(Y)&&$!==Q&&($!=null||Q!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:nt(i,r,Y,$,c,Q)}return;default:if(Qa(r)){for(var it in a)$=a[it],a.hasOwnProperty(it)&&$!==void 0&&!c.hasOwnProperty(it)&&tp(i,r,it,void 0,c,$);for(Z in c)$=c[Z],Q=a[Z],!c.hasOwnProperty(Z)||$===Q||$===void 0&&Q===void 0||tp(i,r,Z,$,c,Q);return}}for(var F in a)$=a[F],a.hasOwnProperty(F)&&$!=null&&!c.hasOwnProperty(F)&&nt(i,r,F,null,c,$);for(ne in c)$=c[ne],Q=a[ne],!c.hasOwnProperty(ne)||$===Q||$==null&&Q==null||nt(i,r,ne,$,c,Q)}function pv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],_=y.transferSize,A=y.initiatorType,R=y.duration;if(_&&R&&pv(A)){for(A=0,R=y.responseEnd,c+=1;c<a.length;c++){var k=a[c],Y=k.startTime;if(Y>R)break;var Z=k.transferSize,ne=k.initiatorType;Z&&pv(ne)&&(k=k.responseEnd,A+=Z*(k<R?1:(R-Y)/(k-Y)))}if(--c,r+=8*(_+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var np=null,ip=null;function Fc(i){return i.nodeType===9?i:i.ownerDocument}function mv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function sp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rp=null;function gR(){var i=window.event;return i&&i.type==="popstate"?i===rp?!1:(rp=i,!0):(rp=null,!1)}var yv=typeof setTimeout=="function"?setTimeout:void 0,yR=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,_R=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(i){return _v.resolve(null).then(i).catch(vR)}:yv;function vR(i){setTimeout(function(){throw i})}function nr(i){return i==="head"}function vv(i,r){var a=r,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),da(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Ml(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Ml(a);for(var _=a.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[Fi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&Ml(i.ownerDocument.body);a=y}while(a);da(r)}function Tv(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function op(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":op(a),kr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function TR(i,r,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Fi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Wn(i.nextSibling),i===null)break}return null}function ER(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Wn(i.nextSibling),i===null))return null;return i}function Ev(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Wn(i.nextSibling),i===null))return null;return i}function ap(i){return i.data==="$?"||i.data==="$~"}function lp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function SR(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Wn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var up=null;function Sv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Wn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function Av(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function Cv(i,r,a){switch(r=Fc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Ml(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);kr(i)}var Zn=new Map,Iv=new Set;function zc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var us=ae.d;ae.d={f:AR,r:CR,D:IR,C:RR,L:wR,m:bR,X:xR,S:NR,M:MR};function AR(){var i=us.f(),r=Pc();return i||r}function CR(i){var r=Hi(i);r!==null&&r.tag===5&&r.type==="form"?zy(r):us.r(i)}var la=typeof document>"u"?null:document;function Rv(i,r,a){var c=la;if(c&&typeof r=="string"&&r){var y=yt(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),Iv.has(y)||(Iv.add(y),i={rel:i,crossOrigin:a,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Zt(r,"link",i),At(r),c.head.appendChild(r)))}}function IR(i){us.D(i),Rv("dns-prefetch",i,null)}function RR(i,r){us.C(i,r),Rv("preconnect",i,r)}function wR(i,r,a){us.L(i,r,a);var c=la;if(c&&i&&r){var y='link[rel="preload"][as="'+yt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+yt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+yt(a.imageSizes)+'"]')):y+='[href="'+yt(i)+'"]';var _=y;switch(r){case"style":_=ua(i);break;case"script":_=ca(i)}Zn.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Zn.set(_,i),c.querySelector(y)!==null||r==="style"&&c.querySelector(Dl(_))||r==="script"&&c.querySelector(Pl(_))||(r=c.createElement("link"),Zt(r,"link",i),At(r),c.head.appendChild(r)))}}function bR(i,r){us.m(i,r);var a=la;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+yt(c)+'"][href="'+yt(i)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ca(i)}if(!Zn.has(_)&&(i=E({rel:"modulepreload",href:i},r),Zn.set(_,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(_)))return}c=a.createElement("link"),Zt(c,"link",i),At(c),a.head.appendChild(c)}}}function NR(i,r,a){us.S(i,r,a);var c=la;if(c&&i){var y=oi(c).hoistableStyles,_=ua(i);r=r||"default";var A=y.get(_);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(Dl(_)))R.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Zn.get(_))&&cp(i,a);var k=A=c.createElement("link");At(k),Zt(k,"link",i),k._p=new Promise(function(Y,Z){k.onload=Y,k.onerror=Z}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Hc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(_,A)}}}function xR(i,r){us.X(i,r);var a=la;if(a&&i){var c=oi(a).hoistableScripts,y=ca(i),_=c.get(y);_||(_=a.querySelector(Pl(y)),_||(i=E({src:i,async:!0},r),(r=Zn.get(y))&&dp(i,r),_=a.createElement("script"),At(_),Zt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function MR(i,r){us.M(i,r);var a=la;if(a&&i){var c=oi(a).hoistableScripts,y=ca(i),_=c.get(y);_||(_=a.querySelector(Pl(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=Zn.get(y))&&dp(i,r),_=a.createElement("script"),At(_),Zt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function wv(i,r,a,c){var y=(y=ue.current)?zc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ua(a.href),a=oi(y).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=ua(a.href);var _=oi(y).hoistableStyles,A=_.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=y.querySelector(Dl(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Zn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(i,a),_||DR(y,i,a,A.state))),r&&c===null)throw Error(s(528,""));return A}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ca(a),a=oi(y).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ua(i){return'href="'+yt(i)+'"'}function Dl(i){return'link[rel="stylesheet"]['+i+"]"}function bv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function DR(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Zt(r,"link",a),At(r),i.head.appendChild(r))}function ca(i){return'[src="'+yt(i)+'"]'}function Pl(i){return"script[async]"+i}function Nv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+yt(a.href)+'"]');if(c)return r.instance=c,At(c),c;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),At(c),Zt(c,"style",y),Hc(c,a.precedence,i),r.instance=c;case"stylesheet":y=ua(a.href);var _=i.querySelector(Dl(y));if(_)return r.state.loading|=4,r.instance=_,At(_),_;c=bv(a),(y=Zn.get(y))&&cp(c,y),_=(i.ownerDocument||i).createElement("link"),At(_);var A=_;return A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),Zt(_,"link",c),r.state.loading|=4,Hc(_,a.precedence,i),r.instance=_;case"script":return _=ca(a.src),(y=i.querySelector(Pl(_)))?(r.instance=y,At(y),y):(c=a,(y=Zn.get(_))&&(c=E({},a),dp(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),At(y),Zt(y,"link",c),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Hc(c,a.precedence,i));return r.instance}function Hc(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===r)_=R;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function cp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function dp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Gc=null;function xv(i,r,a){if(Gc===null){var c=new Map,y=Gc=new Map;y.set(a,c)}else y=Gc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[Fi]||_[gt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=i+A;var R=c.get(A);R?R.push(_):c.set(A,[_])}}return c}function Mv(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function PR(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Dv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function kR(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=ua(c.href),_=r.querySelector(Dl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Jc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,At(_);return}_=r.ownerDocument||r,c=bv(c),(y=Zn.get(y))&&cp(c,y),_=_.createElement("link"),At(_);var A=_;A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),Zt(_,"link",c),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Jc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var fp=0;function VR(i,r){return i.stylesheets&&i.count===0&&Kc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Kc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&fp===0&&(fp=62500*mR());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Kc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>fp?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Yc=null;function Kc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Yc=new Map,r.forEach(UR,i),Yc=null,Jc.call(i))}function UR(i,r){if(!(r.state.loading&4)){var a=Yc.get(i);if(a)var c=a.get(null);else{a=new Map,Yc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||c,_===c&&a.set(null,y),a.set(A,y),this.count++,c=Jc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var kl={$$typeof:X,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function LR(i,r,a,c,y,_,A,R,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Pv(i,r,a,c,y,_,A,R,k,Y,Z,ne){return i=new LR(i,r,a,A,k,Y,Z,ne,R),r=1,_===!0&&(r|=24),_=kn(3,null,null,r),i.current=_,_.stateNode=i,r=Jf(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:a,cache:r},Qf(_),i}function kv(i){return i?(i=Fo,i):Fo}function Vv(i,r,a,c,y,_){y=kv(y),c.context===null?c.context=y:c.pendingContext=y,c=Js(r),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=Ys(i,c,r),a!==null&&(Rn(a,i,r),fl(a,i,r))}function Uv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function hp(i,r){Uv(i,r),(i=i.alternate)&&Uv(i,r)}function Lv(i){if(i.tag===13||i.tag===31){var r=Yr(i,67108864);r!==null&&Rn(r,i,67108864),hp(i,67108864)}}function Ov(i){if(i.tag===13||i.tag===31){var r=qn();r=za(r);var a=Yr(i,r);a!==null&&Rn(a,i,r),hp(i,r)}}var $c=!0;function OR(i,r,a,c){var y=z.T;z.T=null;var _=ae.p;try{ae.p=2,pp(i,r,a,c)}finally{ae.p=_,z.T=y}}function qR(i,r,a,c){var y=z.T;z.T=null;var _=ae.p;try{ae.p=8,pp(i,r,a,c)}finally{ae.p=_,z.T=y}}function pp(i,r,a,c){if($c){var y=mp(c);if(y===null)ep(i,r,c,Qc,a),Bv(i,c);else if(FR(y,i,r,a,c))c.stopPropagation();else if(Bv(i,c),r&4&&-1<BR.indexOf(i)){for(;y!==null;){var _=Hi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ri(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var k=1<<31-hn(A);R.entanglements[1]|=k,A&=~k}wi(_),(Xe&6)===0&&(Mc=Yt()+500,bl(0))}}break;case 31:case 13:R=Yr(_,2),R!==null&&Rn(R,_,2),Pc(),hp(_,2)}if(_=mp(c),_===null&&ep(i,r,c,Qc,a),_===y)break;y=_}y!==null&&c.stopPropagation()}else ep(i,r,c,null,a)}}function mp(i){return i=Po(i),gp(i)}var Qc=null;function gp(i){if(Qc=null,i=zi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Qc=i,null}function qv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bu()){case Vt:return 2;case qt:return 8;case Oi:case Nu:return 32;case Oa:return 268435456;default:return 32}default:return 32}}var yp=!1,ir=null,sr=null,rr=null,Vl=new Map,Ul=new Map,or=[],BR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(i,r){switch(i){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Vl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(r.pointerId)}}function Ll(i,r,a,c,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Hi(r),r!==null&&Lv(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function FR(i,r,a,c,y){switch(r){case"focusin":return ir=Ll(ir,i,r,a,c,y),!0;case"dragenter":return sr=Ll(sr,i,r,a,c,y),!0;case"mouseover":return rr=Ll(rr,i,r,a,c,y),!0;case"pointerover":var _=y.pointerId;return Vl.set(_,Ll(Vl.get(_)||null,i,r,a,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Ul.set(_,Ll(Ul.get(_)||null,i,r,a,c,y)),!0}return!1}function Fv(i){var r=zi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,Mu(i.priority,function(){Ov(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,Mu(i.priority,function(){Ov(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=mp(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Do=c,a.target.dispatchEvent(c),Do=null}else return r=Hi(a),r!==null&&Lv(r),i.blockedOn=a,!1;r.shift()}return!0}function zv(i,r,a){Xc(i)&&a.delete(r)}function zR(){yp=!1,ir!==null&&Xc(ir)&&(ir=null),sr!==null&&Xc(sr)&&(sr=null),rr!==null&&Xc(rr)&&(rr=null),Vl.forEach(zv),Ul.forEach(zv)}function Wc(i,r){i.blockedOn===r&&(i.blockedOn=null,yp||(yp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zR)))}var Zc=null;function Hv(i){Zc!==i&&(Zc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zc===i&&(Zc=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],y=i[r+2];if(typeof c!="function"){if(gp(c||a)===null)continue;break}var _=Hi(a);_!==null&&(i.splice(r,3),r-=3,mh(_,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function da(i){function r(k){return Wc(k,i)}ir!==null&&Wc(ir,i),sr!==null&&Wc(sr,i),rr!==null&&Wc(rr,i),Vl.forEach(r),Ul.forEach(r);for(var a=0;a<or.length;a++){var c=or[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<or.length&&(a=or[0],a.blockedOn===null);)Fv(a),a.blockedOn===null&&or.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],_=a[c+1],A=y[$t]||null;if(typeof _=="function")A||Hv(a);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[$t]||null)R=A.formAction;else if(gp(y)!==null)continue}else R=A.action;typeof R=="function"?a[c+1]=R:(a.splice(c,3),c-=3),Hv(a)}}}function Gv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function _p(i){this._internalRoot=i}jc.prototype.render=_p.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=qn();Vv(a,c,i,r,null,null)},jc.prototype.unmount=_p.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Vv(i.current,2,null,i,null,null),Pc(),r[_i]=null}};function jc(i){this._internalRoot=i}jc.prototype.unstable_scheduleHydration=function(i){if(i){var r=Bi();i={blockedOn:null,target:i,priority:r};for(var a=0;a<or.length&&r!==0&&r<or[a].priority;a++);or.splice(a,0,i),a===0&&Fv(i)}};var Jv=e.version;if(Jv!=="19.2.0")throw Error(s(527,Jv,"19.2.0"));ae.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var HR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{Ts=ed.inject(HR),rn=ed}catch{}}return ql.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",y=Zy,_=jy,A=e_;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=Pv(i,1,!1,null,null,a,c,null,y,_,A,Gv),i[_i]=r.current,jh(i),new _p(r)},ql.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,y="",_=Zy,A=jy,R=e_,k=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=Pv(i,1,!0,r,a??null,c,y,k,_,A,R,Gv),r.context=kv(null),a=r.current,c=qn(),c=za(c),y=Js(c),y.callback=null,Ys(a,y,c),a=c,r.current.lanes=a,As(r,a),wi(r),i[_i]=r.current,jh(i),new jc(r)},ql.version="19.2.0",ql}var tT;function ew(){if(tT)return Ep.exports;tT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ep.exports=jR(),Ep.exports}var tw=ew();const nw=tS(tw),iw=({analysis:n,onClose:e})=>{if(!n)return null;const t={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},s={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return I.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[I.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),I.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:I.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),I.jsxs("div",{className:"p-6 space-y-6",children:[I.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[I.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.summary})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[I.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),I.jsx("div",{className:"grid gap-2",children:n.strengths.map((o,l)=>I.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[I.jsx("span",{className:"text-green-500 mt-0.5",children:""}),I.jsx("span",{children:o})]},l))})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[I.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),I.jsx("div",{className:"grid gap-2",children:n.gaps.map((o,l)=>I.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[I.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),I.jsx("span",{children:o})]},l))})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[I.jsx("span",{children:""})," Pices recommandes"]}),I.jsx("div",{className:"grid gap-4",children:n.suggestions.map((o,l)=>I.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[I.jsxs("div",{className:"flex justify-between items-start mb-3",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-lg",children:o.description}),I.jsx("p",{className:"text-sm text-gray-500",children:o.category})]}),I.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[o.priority]}`,children:s[o.priority]})]}),I.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[I.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",o.reason]}),o.estimatedPrice&&I.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.estimatedPrice]})]},l))})]})]})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sw,rw;function ow(){return{geminiUrl:sw,vertexUrl:rw}}function aw(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const u=ow();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vo{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function lw(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&l.length>d)for(let p=d;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}qp(n,o,l,0,u)}}function qp(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])qp(p,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),p={};for(const m of d)p[m]=u[m];for(const[m,v]of Object.entries(p)){const E=[];for(const S of t.slice(s))S==="*"?E.push(m):E.push(S);g(u,E,v)}for(const m of d)delete u[m]}}else{const u=n;l in u&&qp(u[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Em(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uw(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function cw(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],fw(u)),e}function dw(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],hw(u)),e}function fw(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>pw(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function hw(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>mw(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function pw(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],_w(t)),e}function mw(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],vw(t)),e}function gw(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function yw(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function _w(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Em(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function vw(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Em(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(nT||(nT={}));var iT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(iT||(iT={}));var sT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(sT||(sT={}));var ot;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ot||(ot={}));var rT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(rT||(rT={}));var oT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(oT||(oT={}));var aT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(aT||(aT={}));var lT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(lT||(lT={}));var uT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(uT||(uT={}));var cT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(cT||(cT={}));var dT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(dT||(dT={}));var fT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(fT||(fT={}));var hT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hT||(hT={}));var pT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(pT||(pT={}));var mT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(mT||(mT={}));var gT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(gT||(gT={}));var Sd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Sd||(Sd={}));var yT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yT||(yT={}));var _T;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(_T||(_T={}));var vT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vT||(vT={}));var Bp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bp||(Bp={}));var TT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(TT||(TT={}));var ET;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ET||(ET={}));var ST;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(ST||(ST={}));var AT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(AT||(AT={}));var CT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(CT||(CT={}));var IT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(IT||(IT={}));var RT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(RT||(RT={}));var wT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(wT||(wT={}));var bT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(bT||(bT={}));var NT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(NT||(NT={}));var xT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(xT||(xT={}));var MT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(MT||(MT={}));var DT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(DT||(DT={}));var PT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(PT||(PT={}));var kT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(kT||(kT={}));var VT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(VT||(VT={}));var UT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(UT||(UT={}));var LT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(LT||(LT={}));var OT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(OT||(OT={}));var qT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(qT||(qT={}));var BT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(BT||(BT={}));var FT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(FT||(FT={}));var zT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(zT||(zT={}));var HT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(HT||(HT={}));var GT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(GT||(GT={}));var JT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(JT||(JT={}));var YT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(YT||(YT={}));var KT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(KT||(KT={}));var ga;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ga||(ga={}));class Fp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bl{get text(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const S of(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[b,U]of Object.entries(S))b!=="text"&&b!=="thought"&&(U!==null||U!==void 0)&&E.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,b]of Object.entries(E))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,u,d,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,u,d,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,u,d,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class $T{}class QT{}class Tw{}class Ew{}class Sw{}class Aw{}class XT{}class WT{}class ZT{}class Cw{}class Ad{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Ad;let o;const l=e;return t?o=dw(l):o=cw(l),Object.assign(s,o),s}}class jT{}class eE{}class tE{}class Iw{}class Rw{}class ww{}class nE{}class bw{get text(){var e,t,s;let o="",l=!1;const u=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Nw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function nS(n,e){const t=Qe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function iS(n){return Array.isArray(n)?n.map(e=>Cd(e)):[Cd(n)]}function Cd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function sS(n){const e=Cd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rS(n){const e=Cd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function oS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>iE(e)):[iE(n)]}function zp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function sE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function rE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function dn(n){if(n==null)throw new Error("ContentUnion is required");return zp(n)?n:{role:"user",parts:oS(n)}}function Sm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=dn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=dn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>dn(t)):[dn(e)]}function ti(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(sE(n)||rE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(n)]}const e=[],t=[],s=zp(n[0]);for(const o of n){const l=zp(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(sE(o)||rE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:oS(t)}),e}function xw(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(ot).includes(t[0].toUpperCase())?t[0].toUpperCase():ot.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(ot).includes(s.toUpperCase())?s.toUpperCase():ot.TYPE_UNSPECIFIED})}}function ya(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&xw(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(ot).includes(d.toUpperCase())?d.toUpperCase():ot.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ya(d);else if(s.includes(u)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(ya(m))}e[u]=p}else if(o.includes(u)){const p={};for(const[m,v]of Object.entries(d))p[m]=ya(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Am(n){return ya(n)}function Cm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Im(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Na(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ya(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ya(e.response));return n}function xa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Mw(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function vs(n,e){if(typeof e!="string")throw new Error("name must be a string");return Mw(n,e,"cachedContents")}function aS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Rr(n){return Em(n)}function Dw(n){return n!=null&&typeof n=="object"&&"name"in n}function Pw(n){return n!=null&&typeof n=="object"&&"video"in n}function kw(n){return n!=null&&typeof n=="object"&&"uri"in n}function lS(n){var e;let t;if(Dw(n)&&(t=n.name),!(kw(n)&&(t=n.uri,t===void 0))&&!(Pw(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function uS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function cS(n){for(const e of["models","tunedModels","publisherModels"])if(Vw(n,e))return n[e];return[]}function Vw(n,e){return n!==null&&typeof n=="object"&&e in n}function Uw(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Lw(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=Uw(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function dS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Ow(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function fS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ma(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function hS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qw(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>g1(u))),g(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function Bw(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function Fw(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ud(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],hS(o));const l=f(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],qw(fS(m))),e}function Hp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["state"]);o!=null&&g(e,["state"],hS(o));const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],zw(E));const S=f(n,["outputConfig"]);return S!=null&&g(e,["dest"],Bw(fS(S))),e}function zw(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function Hw(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>m1(n,u))),g(t,["requests","requests"],l)}return t}function Gw(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Jw(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Yw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function Kw(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function $w(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],Qw(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function Qw(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function pS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>A1(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function Xw(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Ww(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],Fw(Ow(o))),t}function oE(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],Hw(n,dS(n,o)));const l=f(e,["config"]);return l!=null&&Xw(l,t),t}function Zw(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],Qe(n,s));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],Gw(dS(n,o)));const l=f(e,["config"]);return l!=null&&Ww(l,t),t}function jw(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function e1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],a1(n,o));const l=f(e,["config"]);return l!=null&&jw(l,t),t}function t1(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function n1(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function i1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function s1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);return l!=null&&g(e,["error"],l),e}function r1(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=Sm(n,s);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&(g(t,["_self"],o1(o,t)),lw(t,{"requests[].*":"requests[].request.*"})),t}function o1(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function a1(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],r1(n,o)),t}function l1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function u1(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],pS(dn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&g(s,["responseMimeType"],G);const te=f(e,["responseSchema"]);te!=null&&g(s,["responseSchema"],Am(te));const K=f(e,["responseJsonSchema"]);if(K!=null&&g(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=f(e,["safetySettings"]);if(t!==void 0&&X!=null){let O=X;Array.isArray(O)&&(O=O.map(P=>C1(P))),g(t,["safetySettings"],O)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let O=xa(ie);Array.isArray(O)&&(O=O.map(P=>I1(Na(P)))),g(t,["tools"],O)}const le=f(e,["toolConfig"]);if(t!==void 0&&le!=null&&g(t,["toolConfig"],le),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=f(e,["cachedContent"]);t!==void 0&&de!=null&&g(t,["cachedContent"],vs(n,de));const M=f(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&g(s,["speechConfig"],Cm(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(s,["imageConfig"],V),s}function c1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>$w(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function d1(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function f1(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function h1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function p1(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function m1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],Qe(n,s));const o=f(e,["contents"]);if(o!=null){let d=ti(o);Array.isArray(d)&&(d=d.map(p=>pS(p))),g(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],u1(n,u,f(t,["request"],{}))),t}function g1(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],c1(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function y1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function _1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function v1(n){const e={},t=f(n,["config"]);return t!=null&&y1(t,e),e}function T1(n){const e={},t=f(n,["config"]);return t!=null&&_1(t,e),e}function E1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>ud(u))),g(e,["batchJobs"],l)}return e}function S1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Hp(u))),g(e,["batchJobs"],l)}return e}function A1(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],l1(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],Jw(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function C1(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function I1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],h1(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],p1(d));const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var co;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_RAG_STORES="ragStores",n.PAGED_ITEM_DOCUMENTS="documents"})(co||(co={}));class mu{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R1 extends vo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new mu(co.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=oE(this.apiClient,e),s=t._url,o=me("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const b=E.request;b.systemInstruction=S,E.request=b}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(u)s.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Zw(this.apiClient,e);return d=me("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Hp(v))}else{const m=oE(this.apiClient,e);return d=me("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>ud(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=e1(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>ud(p))}}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=f1(this.apiClient,e);return d=me("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Hp(v))}else{const m=d1(this.apiClient,e);return d=me("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>ud(v))}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const p=Kw(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=Yw(this.apiClient,e);u=me("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=T1(e);return d=me("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=S1(v),S=new nE;return Object.assign(S,E),S})}else{const m=v1(e);return d=me("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=E1(v),S=new nE;return Object.assign(S,E),S})}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=n1(this.apiClient,e);return d=me("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>s1(v))}else{const m=t1(this.apiClient,e);return d=me("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>i1(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w1(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function aE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>$1(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function b1(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=ti(u);Array.isArray(v)&&(v=v.map(E=>aE(E))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],aE(dn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>Q1(E))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function N1(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=ti(u);Array.isArray(E)&&(E=E.map(S=>S)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],dn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(S=>X1(S))),g(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function x1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],nS(n,s));const o=f(e,["config"]);return o!=null&&b1(o,t),t}function M1(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],nS(n,s));const o=f(e,["config"]);return o!=null&&N1(o,t),t}function D1(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vs(n,s)),t}function P1(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vs(n,s)),t}function k1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function V1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function U1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function L1(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function O1(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vs(n,s)),t}function q1(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vs(n,s)),t}function B1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function F1(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function z1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function H1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function G1(n){const e={},t=f(n,["config"]);return t!=null&&z1(t,e),e}function J1(n){const e={},t=f(n,["config"]);return t!=null&&H1(t,e),e}function Y1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function K1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function $1(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],U1(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],w1(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function Q1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],B1(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],F1(d));const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function X1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>L1(S))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const u=f(n,["computerUse"]);u!=null&&g(e,["computerUse"],u);const d=f(n,["codeExecution"]);d!=null&&g(e,["codeExecution"],d);const p=f(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function W1(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function Z1(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function j1(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],vs(n,s));const o=f(e,["config"]);return o!=null&&W1(o,t),t}function eb(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],vs(n,s));const o=f(e,["config"]);return o!=null&&Z1(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tb extends vo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new mu(co.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=M1(this.apiClient,e);return d=me("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=x1(this.apiClient,e);return d=me("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=q1(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=O1(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=P1(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=V1(v),S=new eE;return Object.assign(S,E),S})}else{const m=D1(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=k1(v),S=new eE;return Object.assign(S,E),S})}}async update(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=eb(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=j1(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=J1(e);return d=me("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=K1(v),S=new tE;return Object.assign(S,E),S})}else{const m=G1(e);return d=me("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Y1(v),S=new tE;return Object.assign(S,E),S})}}}function lE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(n){return this instanceof ct?(this.v=n,this):new ct(n)}function _a(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(b){return function(U){return Promise.resolve(U).then(b,E)}}function d(b,U){s[b]&&(o[b]=function(B){return new Promise(function(G,te){l.push([b,B,G,te])>1||p(b,B)})},U&&(o[b]=U(o[b])))}function p(b,U){try{m(s[b](U))}catch(B){S(l[0][3],B)}}function m(b){b.value instanceof ct?Promise.resolve(b.value.v).then(v,E):S(l[0][2],b)}function v(b){p("next",b)}function E(b){p("throw",b)}function S(b,U){b(U),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Ql(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof lE=="function"?lE(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(d,p){u=n[l](u),o(d,p,u.done,u.value)})}}function o(l,u,d,p){Promise.resolve(p).then(function(m){l({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nb(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:mS(t)}function mS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ib(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function uE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!mS(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class sb{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new rb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class rb{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),ib(l)}async sendMessage(e){var t;await this.sendPromise;const s=dn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const p=await o,m=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const b=m?[m]:[];this.recordHistory(s,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=dn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?uE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return _a(this,arguments,function*(){var u,d,p,m;const v=[];try{for(var E=!0,S=Ql(e),b;b=yield ct(S.next()),u=b.done,!u;E=!0){m=b.value,E=!1;const U=m;if(nb(U)){const B=(o=(s=U.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;B!==void 0&&v.push(B)}yield yield ct(U)}}catch(U){d={error:U}}finally{try{!E&&!u&&(p=S.return)&&(yield ct(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...uE(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ob(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function ab(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function lb(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],lS(t)),e}function ub(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function cb(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],lS(t)),e}function db(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function fb(n){const e={},t=f(n,["config"]);return t!=null&&db(t,e),e}function hb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pb extends vo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new mu(co.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fb(e);return l=me("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=hb(p),v=new Iw;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ob(e);return l=me("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=ab(p),v=new Rw;return Object.assign(v,m),v})}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cb(e);return l=me("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lb(e);return l=me("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=ub(p),v=new ww;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cd(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function mb(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>xb(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function gb(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function yb(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function _b(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const u=f(n,["frequencyPenalty"]);u!=null&&g(e,["frequencyPenalty"],u);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=f(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const U=f(n,["responseModalities"]);U!=null&&g(e,["responseModalities"],U);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const G=f(n,["routingConfig"]);G!=null&&g(e,["routingConfig"],G);const te=f(n,["seed"]);te!=null&&g(e,["seed"],te);const K=f(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],gS(K));const X=f(n,["stopSequences"]);X!=null&&g(e,["stopSequences"],X);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const le=f(n,["thinkingConfig"]);le!=null&&g(e,["thinkingConfig"],le);const de=f(n,["topK"]);de!=null&&g(e,["topK"],de);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vb(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Tb(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function Eb(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Im(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],mb(dn(U)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let de=xa(B);Array.isArray(de)&&(de=de.map(M=>Db(Na(M)))),g(e,["setup","tools"],de)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&g(e,["setup","sessionResumption"],Mb(G));const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&g(e,["setup","realtimeInputConfig"],X);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const le=f(n,["proactivity"]);return e!==void 0&&le!=null&&g(e,["setup","proactivity"],le),t}function Sb(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],_b(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],gS(Im(E)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],dn(U));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let de=xa(B);Array.isArray(de)&&(de=de.map(M=>Pb(Na(M)))),g(e,["setup","tools"],de)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&g(e,["setup","sessionResumption"],G);const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&g(e,["setup","realtimeInputConfig"],X);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const le=f(n,["proactivity"]);return e!==void 0&&le!=null&&g(e,["setup","proactivity"],le),t}function Ab(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Qe(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],Eb(o,t)),t}function Cb(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Qe(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],Sb(o,t)),t}function Ib(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function Rb(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function wb(n){const e={},t=f(n,["media"]);if(t!=null){let m=iS(t);Array.isArray(m)&&(m=m.map(v=>cd(v))),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],cd(rS(s)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],cd(sS(l)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function bb(n){const e={},t=f(n,["media"]);if(t!=null){let m=iS(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],rS(s));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&g(e,["video"],sS(l));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function Nb(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],kb(u));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function xb(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],gb(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],cd(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function Mb(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gS(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Db(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],vb(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],Tb(d));const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function Pb(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>yb(S))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const u=f(n,["computerUse"]);u!=null&&g(e,["computerUse"],u);const d=f(n,["codeExecution"]);d!=null&&g(e,["codeExecution"],d);const p=f(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function kb(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(U=>U)),g(e,["promptTokensDetails"],b)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(U=>U)),g(e,["cacheTokensDetails"],b)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(U=>U)),g(e,["responseTokensDetails"],b)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(U=>U)),g(e,["toolUsePromptTokensDetails"],b)}const S=f(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vb(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ub(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],Lb(s));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function Lb(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function Ob(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["contents"]);if(o!=null){let l=ti(o);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function qb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function Bb(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],Fb(s)),e}function Fb(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Yd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>YN(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function zb(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function Hb(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Gb(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],dn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>ES(d))),g(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],PN(l)),t}function Jb(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>Yd(d))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&Hb(l),t}function Yb(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&Gb(l,t),t}function Kb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function $b(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function Qb(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Qe(n,s)),t}function Xb(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Qe(n,s)),t}function Wb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Zb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function jb(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","mimeType"],U);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const G=f(n,["addWatermark"]);e!==void 0&&G!=null&&g(e,["parameters","addWatermark"],G);const te=f(n,["labels"]);e!==void 0&&te!=null&&g(e,["labels"],te);const K=f(n,["editMode"]);e!==void 0&&K!=null&&g(e,["parameters","editMode"],K);const X=f(n,["baseSteps"]);return e!==void 0&&X!=null&&g(e,["parameters","editConfig","baseSteps"],X),t}function eN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>ZN(p))),g(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&jb(u,t),t}function tN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Kd(l))),g(e,["generatedImages"],o)}return e}function nN(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function iN(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function sN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["contents"]);if(o!=null){let d=Sm(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&nN(l,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],Qe(n,u)),t}function rN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["contents"]);if(o!=null){let u=Sm(n,o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&iN(l,t),t}function oN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function aN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Bb(u))),g(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function lN(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function uN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function cN(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function dN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Yd(dn(o)));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&g(s,["responseMimeType"],G);const te=f(e,["responseSchema"]);te!=null&&g(s,["responseSchema"],Am(te));const K=f(e,["responseJsonSchema"]);if(K!=null&&g(s,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=f(e,["safetySettings"]);if(t!==void 0&&X!=null){let O=X;Array.isArray(O)&&(O=O.map(P=>jN(P))),g(t,["safetySettings"],O)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let O=xa(ie);Array.isArray(O)&&(O=O.map(P=>rx(Na(P)))),g(t,["tools"],O)}const le=f(e,["toolConfig"]);if(t!==void 0&&le!=null&&g(t,["toolConfig"],le),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=f(e,["cachedContent"]);t!==void 0&&de!=null&&g(t,["cachedContent"],vs(n,de));const M=f(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&g(s,["speechConfig"],Cm(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(s,["imageConfig"],V),s}function fN(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],dn(o));const l=f(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const d=f(e,["topK"]);d!=null&&g(s,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(s,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const U=f(e,["frequencyPenalty"]);U!=null&&g(s,["frequencyPenalty"],U);const B=f(e,["seed"]);B!=null&&g(s,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&g(s,["responseMimeType"],G);const te=f(e,["responseSchema"]);te!=null&&g(s,["responseSchema"],Am(te));const K=f(e,["responseJsonSchema"]);K!=null&&g(s,["responseJsonSchema"],K);const X=f(e,["routingConfig"]);X!=null&&g(s,["routingConfig"],X);const ie=f(e,["modelSelectionConfig"]);ie!=null&&g(s,["modelConfig"],ie);const le=f(e,["safetySettings"]);if(t!==void 0&&le!=null){let z=le;Array.isArray(z)&&(z=z.map(ae=>ae)),g(t,["safetySettings"],z)}const de=f(e,["tools"]);if(t!==void 0&&de!=null){let z=xa(de);Array.isArray(z)&&(z=z.map(ae=>ES(Na(ae)))),g(t,["tools"],z)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const N=f(e,["labels"]);t!==void 0&&N!=null&&g(t,["labels"],N);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&g(t,["cachedContent"],vs(n,x));const D=f(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const V=f(e,["mediaResolution"]);V!=null&&g(s,["mediaResolution"],V);const O=f(e,["speechConfig"]);O!=null&&g(s,["speechConfig"],TS(Cm(O)));const P=f(e,["audioTimestamp"]);P!=null&&g(s,["audioTimestamp"],P);const st=f(e,["thinkingConfig"]);st!=null&&g(s,["thinkingConfig"],st);const ft=f(e,["imageConfig"]);return ft!=null&&g(s,["imageConfig"],ft),s}function cE(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>Yd(d))),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],dN(n,l,t)),t}function dE(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&g(t,["generationConfig"],fN(n,l,t)),t}function fE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>Ub(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function hE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function hN(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(n,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function pN(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","mimeType"],U);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const G=f(n,["addWatermark"]);e!==void 0&&G!=null&&g(e,["parameters","addWatermark"],G);const te=f(n,["labels"]);e!==void 0&&te!=null&&g(e,["labels"],te);const K=f(n,["imageSize"]);e!==void 0&&K!=null&&g(e,["parameters","sampleImageSize"],K);const X=f(n,["enhancePrompt"]);return e!==void 0&&X!=null&&g(e,["parameters","enhancePrompt"],X),t}function mN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&hN(l,t),t}function gN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&pN(l,t),t}function yN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>NN(u))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],_S(o)),e}function _N(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Kd(u))),g(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],vS(o)),e}function vN(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],$d(v));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(b=>_x(b))),g(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function TN(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const b=f(n,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const U=f(n,["generateAudio"]);e!==void 0&&U!=null&&g(e,["parameters","generateAudio"],U);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&g(e,["instances[0]","lastFrame"],mi(B));const G=f(n,["referenceImages"]);if(e!==void 0&&G!=null){let X=G;Array.isArray(X)&&(X=X.map(ie=>vx(ie))),g(e,["instances[0]","referenceImages"],X)}const te=f(n,["mask"]);e!==void 0&&te!=null&&g(e,["instances[0]","mask"],yx(te));const K=f(n,["compressionQuality"]);return e!==void 0&&K!=null&&g(e,["parameters","compressionQuality"],K),t}function EN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],IN(u)),e}function SN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const l=f(n,["error"]);l!=null&&g(e,["error"],l);const u=f(n,["response"]);return u!=null&&g(e,["response"],RN(u)),e}function AN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],$d(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],SS(u));const d=f(e,["source"]);d!=null&&wN(d,t);const p=f(e,["config"]);return p!=null&&vN(p,t),t}function CN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&g(t,["instances[0]","image"],mi(l));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],AS(u));const d=f(e,["source"]);d!=null&&bN(d,t);const p=f(e,["config"]);return p!=null&&TN(p,t),t}function IN(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>MN(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function RN(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>DN(u))),g(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function wN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],$d(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],SS(l)),t}function bN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mi(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],AS(l)),t}function NN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],ON(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],_S(o)),e}function Kd(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],yS(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],vS(o));const l=f(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function xN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],yS(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function MN(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],mx(t)),e}function DN(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],gx(t)),e}function PN(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const u=f(n,["frequencyPenalty"]);u!=null&&g(e,["frequencyPenalty"],u);const d=f(n,["logprobs"]);d!=null&&g(e,["logprobs"],d);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=f(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=f(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=f(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const U=f(n,["responseModalities"]);U!=null&&g(e,["responseModalities"],U);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const G=f(n,["routingConfig"]);G!=null&&g(e,["routingConfig"],G);const te=f(n,["seed"]);te!=null&&g(e,["seed"],te);const K=f(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],TS(K));const X=f(n,["stopSequences"]);X!=null&&g(e,["stopSequences"],X);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const le=f(n,["thinkingConfig"]);le!=null&&g(e,["thinkingConfig"],le);const de=f(n,["topK"]);de!=null&&g(e,["topK"],de);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function kN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Qe(n,s)),t}function VN(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],Qe(n,s)),t}function UN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function LN(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function ON(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Rr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function yS(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function $d(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Rr(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function mi(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function qN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],uS(n,d)),s}function BN(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],uS(n,d)),s}function FN(n,e){const t={},s=f(e,["config"]);return s!=null&&qN(n,s,t),t}function zN(n,e){const t={},s=f(e,["config"]);return s!=null&&BN(n,s,t),t}function HN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=cS(o);Array.isArray(l)&&(l=l.map(u=>Gp(u))),g(e,["models"],l)}return e}function GN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=cS(o);Array.isArray(l)&&(l=l.map(u=>Jp(u))),g(e,["models"],l)}return e}function JN(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function Gp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["version"]);l!=null&&g(e,["version"],l);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],ox(u));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function Jp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const l=f(n,["versionId"]);l!=null&&g(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>lN(S))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],ax(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["checkpoints"],E)}return e}function YN(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],uN(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],Vb(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function KN(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],mi(t)),e}function $N(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const b=f(n,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),t}function QN(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["source"]);o!=null&&WN(o,t);const l=f(e,["config"]);return l!=null&&$N(l,t),t}function XN(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>Kd(o))),g(e,["generatedImages"],s)}return e}function WN(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],mi(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>KN(d))),g(e,["instances[0]","productImages"],u)}return t}function ZN(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],mi(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],JN(l));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],zb(u));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function _S(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function vS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function jN(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function ex(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],mi(t)),e}function tx(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function nx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["source"]);o!=null&&sx(o,t);const l=f(e,["config"]);return l!=null&&tx(l,t),t}function ix(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>xN(o))),g(e,["generatedMasks"],s)}return e}function sx(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mi(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],ex(l)),t}function TS(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=f(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function rx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],UN(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],LN(d));const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function ES(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>cN(S))),g(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=f(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const u=f(n,["computerUse"]);u!=null&&g(e,["computerUse"],u);const d=f(n,["codeExecution"]);d!=null&&g(e,["codeExecution"],d);const p=f(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function ox(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function ax(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function lx(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function ux(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function cx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],Qe(n,s));const o=f(e,["config"]);return o!=null&&lx(o,t),t}function dx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["config"]);return o!=null&&ux(o,t),t}function fx(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const b=f(n,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),t}function hx(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],Qe(n,s));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],mi(o));const l=f(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&fx(u,t),t}function px(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Kd(l))),g(e,["generatedImages"],o)}return e}function mx(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Rr(s));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function gx(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function yx(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],mi(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function _x(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],$d(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function vx(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],mi(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function SS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function AS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Rr(s));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tx="Content-Type",Ex="X-Server-Timeout",Sx="User-Agent",Yp="x-goog-api-client",Ax="1.28.0",Cx=`google-genai-sdk/${Ax}`,Ix="v1beta1",Rx="v1beta",pE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class wx{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Ix,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Rx,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&bx(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await mE(o),new Fp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await mE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return _a(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield ct(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),b=S.status,U=S.code,B=`got status: ${b}. ${JSON.stringify(E)}`;if(U>=400&&U<600)throw new Jd({message:B,status:U})}}catch(E){if(E.name==="ApiError")throw E}u+=m;let v=u.match(pE);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ct(new Fp(S)),u=u.slice(v[0].length),v=u.match(pE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=Cx+" "+this.clientOptions.userAgentExtra;return e[Sx]=t,e[Yp]=t,e[Tx]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(Ex,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}async uploadFile(e,t){var s,o;const l={};t!=null&&(l.mimeType=t.mimeType,l.name=t.name,l.displayName=t.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);l.sizeBytes=String(d.size);const p=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=p;let m="";typeof e=="string"&&(m=e.replace(/[/\\]+$/,""),m=(o=m.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const v=await this.fetchUploadUrl(l,m,t);return u.upload(e,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s){var o;let l={};s!=null&&s.httpOptions?l=s.httpOptions:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},t?{"X-Goog-Upload-File-Name":t}:{})};const u={file:e},d=await this.request({path:me("upload/v1beta/files",u._url),body:JSON.stringify(u),httpMethod:"POST",httpOptions:l});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(o=d==null?void 0:d.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function mE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Jd({message:o,status:t}):new Error(o)}}function bx(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nx="mcp_used/unknown";let xx=!1;function CS(n){for(const e of n)if(Mx(e)||typeof e=="object"&&"inputSchema"in e)return!0;return xx}function IS(n){var e;const t=(e=n[Yp])!==null&&e!==void 0?e:"";n[Yp]=(t+` ${Nx}`).trimStart()}function Mx(n){return n!==null&&typeof n=="object"&&n instanceof Rm}function Dx(n,e=100){return _a(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield ct(n.listTools({cursor:s}));for(const u of l.tools)yield yield ct(u),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class Rm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Rm(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,Ql(Dx(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const E=o;u.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Lw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Px(n,e,t){const s=new Nw;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class kx{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=Lx(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(X=>{m=X}),E=e.callbacks,S=function(){m({})},b=this.apiClient,U={onopen:S,onmessage:X=>{Px(b,E.onmessage,X)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(X){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(X){}},B=this.webSocketFactory.create(p,Ux(u),U);B.connect(),await v;const K={setup:{model:Qe(this.apiClient,e.model)}};return B.send(JSON.stringify(K)),new Vx(B,this.apiClient)}}class Vx{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Rb(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Ib(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ga.PLAY)}pause(){this.sendPlaybackControl(ga.PAUSE)}stop(){this.sendPlaybackControl(ga.STOP)}resetContext(){this.sendPlaybackControl(ga.RESET_CONTEXT)}close(){this.conn.close()}}function Ux(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function Lx(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ox="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qx(n,e,t){const s=new bw;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const u=Nb(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class Bx{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new kx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&CS(e.config.tools)&&IS(E);const S=Gx(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const x=this.apiClient.getApiKey();let D="BidiGenerateContent",V="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",V="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${D}?${V}=${x}`}let b=()=>{};const U=new Promise(x=>{b=x}),B=e.callbacks,G=function(){var x;(x=B==null?void 0:B.onopen)===null||x===void 0||x.call(B),b({})},te=this.apiClient,K={onopen:G,onmessage:x=>{qx(te,B.onmessage,x)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(x){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(x){}},X=this.webSocketFactory.create(v,Hx(S),K);X.connect(),await U;let ie=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const x=this.apiClient.getProject(),D=this.apiClient.getLocation();ie=`projects/${x}/locations/${D}/`+ie}let le={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sd.AUDIO]}:e.config.responseModalities=[Sd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const de=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const x of de)if(this.isCallableTool(x)){const D=x;M.push(await D.tool())}else M.push(x);M.length>0&&(e.config.tools=M);const N={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=Cb(this.apiClient,N):le=Ab(this.apiClient,N),delete le.config,X.send(JSON.stringify(le)),new zx(X,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Fx={turnComplete:!0};class zx{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ti(t.turns),e.isVertexAI()||(s=s.map(o=>Yd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Ox)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},Fx),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:bb(e)}:t={realtimeInput:wb(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Hx(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function Gx(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gE=10;function yE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(va(u)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function va(n){return"callTool"in n&&typeof n.callTool=="function"}function Jx(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>va(o)))!==null&&s!==void 0?s:!1}function Yx(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!va(o)))!==null&&s!==void 0?s:!1}function _E(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kx extends vo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Jx(t)||yE(t.config))return await this.generateContentInternal(p);if(Yx(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const E=ti(p.contents),S=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:gE;let b=0;for(;b<S&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const U=m.candidates[0].content,B=[];for(const G of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(va(G)){const K=await G.callTool(m.functionCalls);B.push(...K)}b++,v={role:"user",parts:B},p.contents=ti(p.contents),p.contents.push(U),p.contents.push(v),_E(p.config)&&(E.push(U),E.push(v))}return _E(p.config)&&(m.automaticFunctionCallingHistory=E),m},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),yE(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new mu(co.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>va(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&CS(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),IS(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(va(u)){const d=u,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:gE;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,E){var S,b;return _a(this,arguments,function*(){for(var U,B,G,te;d<l;){u&&(d++,u=!1);const le=yield ct(m.processParamsMaybeAddMcpUsage(E)),de=yield ct(m.generateContentStreamInternal(le)),M=[],N=[];try{for(var K=!0,X=(B=void 0,Ql(de)),ie;ie=yield ct(X.next()),U=ie.done,!U;K=!0){te=ie.value,K=!1;const x=te;if(yield yield ct(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){N.push(x.candidates[0].content);for(const D of(b=x.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(d<l&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(D.functionCall.name)){const V=yield ct(v.get(D.functionCall.name).callTool([D.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(x){B={error:x}}finally{try{!K&&!U&&(G=X.return)&&(yield ct(G.call(X)))}finally{if(B)throw B.error}}if(M.length>0){u=!0;const x=new Bl;x.candidates=[{content:{role:"user",parts:M}}],yield yield ct(x);const D=[];D.push(...N),D.push({role:"user",parts:M});const V=ti(E.contents).concat(D);E.contents=V}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=dE(this.apiClient,e);return d=me("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=hE(v),S=new Bl;return Object.assign(S,E),S})}else{const m=cE(this.apiClient,e);return d=me("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=fE(v),S=new Bl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=dE(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(E){return _a(this,arguments,function*(){var S,b,U,B;try{for(var G=!0,te=Ql(E),K;K=yield ct(te.next()),S=K.done,!S;G=!0){B=K.value,G=!1;const X=B,ie=hE(yield ct(X.json()));ie.sdkHttpResponse={headers:X.headers};const le=new Bl;Object.assign(le,ie),yield yield ct(le)}}catch(X){b={error:X}}finally{try{!G&&!S&&(U=te.return)&&(yield ct(U.call(te)))}finally{if(b)throw b.error}}})})}else{const m=cE(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(E){return _a(this,arguments,function*(){var S,b,U,B;try{for(var G=!0,te=Ql(E),K;K=yield ct(te.next()),S=K.done,!S;G=!0){B=K.value,G=!1;const X=B,ie=fE(yield ct(X.json()));ie.sdkHttpResponse={headers:X.headers};const le=new Bl;Object.assign(le,ie),yield yield ct(le)}}catch(X){b={error:X}}finally{try{!G&&!S&&(U=te.return)&&(yield ct(U.call(te)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=rN(this.apiClient,e);return d=me("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=aN(v),S=new $T;return Object.assign(S,E),S})}else{const m=sN(this.apiClient,e);return d=me("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=oN(v),S=new $T;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=gN(this.apiClient,e);return d=me("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=_N(v),S=new QT;return Object.assign(S,E),S})}else{const m=mN(this.apiClient,e);return d=me("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=yN(v),S=new QT;return Object.assign(S,E),S})}}async editImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=eN(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=tN(p),v=new Tw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=hx(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=px(p),v=new Ew;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=QN(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=XN(p),v=new Sw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=nx(this.apiClient,e);return l=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=ix(p),v=new Aw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=VN(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Jp(v))}else{const m=kN(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Gp(v))}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=zN(this.apiClient,e);return d=me("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=GN(v),S=new XT;return Object.assign(S,E),S})}else{const m=FN(this.apiClient,e);return d=me("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=HN(v),S=new XT;return Object.assign(S,E),S})}}async update(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=dx(this.apiClient,e);return d=me("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Jp(v))}else{const m=cx(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Gp(v))}}async delete(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Xb(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Zb(v),S=new WT;return Object.assign(S,E),S})}else{const m=Qb(this.apiClient,e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Wb(v),S=new WT;return Object.assign(S,E),S})}}async countTokens(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Yb(this.apiClient,e);return d=me("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=$b(v),S=new ZT;return Object.assign(S,E),S})}else{const m=Jb(this.apiClient,e);return d=me("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=Kb(v),S=new ZT;return Object.assign(S,E),S})}}async computeTokens(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Ob(this.apiClient,e);return l=me("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=qb(p),v=new Cw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=CN(this.apiClient,e);return d=me("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const E=SN(v),S=new Ad;return Object.assign(S,E),S})}else{const m=AN(this.apiClient,e);return d=me("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const E=EN(v),S=new Ad;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $x extends vo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=yw(e);return d=me("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const m=gw(e);return d=me("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=uw(e);return l=me("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qx(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Xx(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>sM(l))),g(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function Wx(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],iM(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function Zx(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],Wx(n,s,t)),t}function jx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function eM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function tM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function nM(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Im(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&g(e,["setup","systemInstruction"],Xx(dn(U)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let de=xa(B);Array.isArray(de)&&(de=de.map(M=>oM(Na(M)))),g(e,["setup","tools"],de)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&g(e,["setup","sessionResumption"],rM(G));const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&g(e,["setup","realtimeInputConfig"],X);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const le=f(n,["proactivity"]);return e!==void 0&&le!=null&&g(e,["setup","proactivity"],le),t}function iM(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],Qe(n,s));const o=f(e,["config"]);return o!=null&&g(t,["config"],nM(o,t)),t}function sM(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=f(n,["fileData"]);l!=null&&g(e,["fileData"],jx(l));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],Qx(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function rM(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oM(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=f(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],eM(o));const l=f(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleSearch"]);d!=null&&g(e,["googleSearch"],tM(d));const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aM(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function lM(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=aM(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class uM extends vo{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=Zx(this.apiClient,e);l=me("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=lM(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cM(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function dM(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function fM(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function hM(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],vE(b))}else if(o==="PREFERENCE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],vE(b))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(d==="PREFERENCE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(p==="PREFERENCE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(m==="PREFERENCE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=f(n,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function pM(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&IM(l);const u=f(n,["config"]);return u!=null&&fM(u,t),t}function mM(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=f(n,["trainingDataset"]);l!=null&&RM(l,t,e);const u=f(n,["config"]);return u!=null&&hM(u,t,e),t}function gM(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function yM(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function _M(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function vM(n,e,t){const s={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function TM(n,e){const t={},s=f(n,["config"]);return s!=null&&_M(s,t),t}function EM(n,e){const t={},s=f(n,["config"]);return s!=null&&vM(s,t),t}function SM(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>RS(d))),g(t,["tuningJobs"],u)}return t}function AM(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Kp(d))),g(t,["tuningJobs"],u)}return t}function CM(n,e){const t={},s=f(n,["name"]);s!=null&&g(t,["model"],s);const o=f(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function IM(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["examples","examples"],o)}return t}function RM(n,e,t){const s={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function RS(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["state"]);l!=null&&g(t,["state"],aS(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const E=f(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&g(t,["tunedModel"],CM(S)),t}function Kp(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["state"]);l!=null&&g(t,["state"],aS(l));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const E=f(n,["description"]);E!=null&&g(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&g(t,["baseModel"],S);const b=f(n,["tunedModel"]);b!=null&&g(t,["tunedModel"],b);const U=f(n,["preTunedModel"]);U!=null&&g(t,["preTunedModel"],U);const B=f(n,["supervisedTuningSpec"]);B!=null&&g(t,["supervisedTuningSpec"],B);const G=f(n,["preferenceOptimizationSpec"]);G!=null&&g(t,["preferenceOptimizationSpec"],G);const te=f(n,["tuningDataStats"]);te!=null&&g(t,["tuningDataStats"],te);const K=f(n,["encryptionSpec"]);K!=null&&g(t,["encryptionSpec"],K);const X=f(n,["partnerModelTuningSpec"]);X!=null&&g(t,["partnerModelTuningSpec"],X);const ie=f(n,["customBaseModel"]);ie!=null&&g(t,["customBaseModel"],ie);const le=f(n,["experiment"]);le!=null&&g(t,["experiment"],le);const de=f(n,["labels"]);de!=null&&g(t,["labels"],de);const M=f(n,["outputUri"]);M!=null&&g(t,["outputUri"],M);const N=f(n,["pipelineJob"]);N!=null&&g(t,["pipelineJob"],N);const x=f(n,["serviceAccount"]);x!=null&&g(t,["serviceAccount"],x);const D=f(n,["tunedModelDisplayName"]);D!=null&&g(t,["tunedModelDisplayName"],D);const V=f(n,["veoTuningSpec"]);return V!=null&&g(t,["veoTuningSpec"],V),t}function wM(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const l=f(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const d=f(n,["error"]);return d!=null&&g(t,["error"],d),t}function vE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bM extends vo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new mu(co.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Bp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=yM(e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Kp(v))}else{const m=gM(e);return d=me("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>RS(v))}}async listInternal(e){var t,s,o,l;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=EM(e);return d=me("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=AM(v),S=new jT;return Object.assign(S,E),S})}else{const m=TM(e);return d=me("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=SM(v),S=new jT;return Object.assign(S,E),S})}}async cancel(e){var t,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const p=dM(e);u=me("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=cM(e);u=me("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=mM(e,e);return l=me("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>Kp(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pM(e);return l=me("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>wM(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NM{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xM=1024*1024*8,MM=3,DM=1e3,PM=2,Ip="x-goog-upload-status";async function kM(n,e,t){var s,o,l;let u=0,d=0,p=new Fp(new Response),m="upload";for(u=n.size;d<u;){const E=Math.min(xM,u-d),S=n.slice(d,d+E);d+E>=u&&(m+=", finalize");let b=0,U=DM;for(;b<MM&&(p=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(d),"Content-Length":String(E)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[Ip]));)b++,await UM(U),U=U*PM;if(d+=E,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[Ip])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[Ip])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function VM(n){return{size:n.size,type:n.type}}function UM(n){return new Promise(e=>setTimeout(e,n))}class LM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kM(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OM{create(e,t,s){return new qM(e,t,s)}}class qM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TE="x-goog-api-key";class BM{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(TE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(TE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FM="gl-node/";class zM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=aw(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new BM(this.apiKey);this.apiClient=new wx({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:FM+"web",uploader:new LM,downloader:new NM}),this.models=new Kx(this.apiClient),this.live=new Bx(this.apiClient,o,new OM),this.batches=new R1(this.apiClient),this.chats=new sb(this.models,this.apiClient),this.caches=new tb(this.apiClient),this.files=new pb(this.apiClient),this.operations=new $x(this.apiClient),this.authTokens=new uM(this.apiClient),this.tunings=new bM(this.apiClient)}}const HM={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY"},Qd=new zM({apiKey:HM.geminiApiKey});async function GM(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),s=await Qd.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:ot.OBJECT,properties:{items:{type:ot.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:ot.OBJECT,properties:{analysis:{type:ot.STRING,description:"La description concise du vtement."},category:{type:ot.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:ot.STRING,description:"La couleur principale du vtement."},material:{type:ot.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(s.text),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(u=>{l.includes(u.category)||(console.warn(`Catgorie invalide reue de l'IA: ${u.category}, fallback sur "Accessoires"`),u.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",s.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function JM(n){return n&&n.name&&Array.isArray(n.itemIds)}async function YM(n,e,t,s){const o=new Set(e.flatMap(S=>S.itemIds)),u=n.filter(S=>!o.has(S.id)).map(S=>`- ${S.analysis} (Catgorie: ${S.category}, Couleur: ${S.color}, Matire: ${S.material})`).join(`
`),d=e.map(S=>`- ${S.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=s?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${JM(s)?s.name:s.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${p}
    ${m}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,E=await Qd.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:ot.OBJECT,properties:{tenues:{type:ot.ARRAY,description:"La liste des suggestions de tenues.",items:{type:ot.OBJECT,properties:{titre:{type:ot.STRING,description:"Le nom de la tenue."},description:{type:ot.STRING,description:"Une brve description du style de la tenue."},vetements:{type:ot.ARRAY,items:{type:ot.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(S){throw console.error("Erreur de parsing JSON de la rponse Gemini:",S),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function KM(n,e){const t=n.map(o=>`${o.category}: ${o.description}, couleur ${o.color}, style ${o.style}`).join(`
`),s=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${n.length} pices):
${t}

Analyse la garde-robe et retourne un JSON avec:
{
  "summary": "Rsum gnral de la garde-robe (2-3 phrases)",
  "strengths": ["Point fort 1", "Point fort 2", "Point fort 3"],
  "gaps": ["Manque identifi 1", "Manque identifi 2", "Manque identifi 3"],
  "suggestions": [
    {
      "category": "Catgorie (ex: Hauts, Pantalons, etc.)",
      "description": "Description prcise de la pice (ex: 'Jean brut coupe droite')",
      "reason": "Pourquoi cette pice rendrait la garde-robe plus versatile",
      "priority": "high/medium/low",
      "estimatedPrice": "Fourchette de prix (ex: '50-100')"
    }
  ]
}

IMPORTANT: 
- Suggre 3-5 pices maximum
- Priorise les basiques polyvalents
- Considre les couleurs existantes pour suggrer des pices complmentaires
- Explique concrtement comment chaque pice augmente les possibilits de tenues
- Rponds UNIQUEMENT avec un JSON valide, rien d'autre`;try{let d=(await Qd.getGenerativeModel({model:"gemini-1.5-flash"}).generateContent(s)).response.text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(d)}catch(o){throw console.error("Erreur lors de l'analyse de la garde-robe:",o),o}}async function $M(n,e,t,s){const o=new Set(e.flatMap(E=>E.itemIds)),u=n.filter(E=>!o.has(E.id)).map(E=>`- ${E.analysis} (Catgorie: ${E.category}, Couleur: ${E.color}, Matire: ${E.material})`).join(`
`),d=e.map(E=>`- ${E.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${s}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${p}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale. Les articles doivent pouvoir tre combins pour crer plusieurs tenues diffrentes.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables. Si tu utilises un ensemble, liste-le par son nom (ex: "Costume bleu marine").
    4. Assure-toi que la quantit de vtements est approprie pour la dure du voyage de ${t} jour(s). Pense  la rutilisation des pices (comme les pantalons ou les vestes).

    Fournis le rsultat en franais sous la forme suivante :
    1. Un "titre" accrocheur pour le plan de valise.
    2. Un "resume" court qui explique la stratgie de la valise (ex: "Une slection capsule pour un weekend ensoleill...").
    3. Une "valise" qui est une liste des descriptions exactes des vtements ou des noms d'ensembles de la liste fournie  emporter.
    `,v=await Qd.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:ot.OBJECT,properties:{titre:{type:ot.STRING,description:"Le nom du plan de valise."},resume:{type:ot.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:ot.ARRAY,items:{type:ot.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(E){throw console.error("Erreur de parsing JSON de la rponse Gemini pour la valise:",E),console.error("Rponse reue:",v.text),new Error("L'IA a renvoy une rponse malforme pour le plan de valise.")}}const QM=()=>{};var EE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},XM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},bS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|m>>6,b=m&63;p||(b=64,u||(S=64)),s.push(t[v],t[E],t[S],t[b])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||m==null||E==null)throw new WM;const S=l<<2|d>>4;if(s.push(S),m!==64){const b=d<<4&240|m>>2;if(s.push(b),E!==64){const U=m<<6&192|E;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class WM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZM=function(n){const e=wS(n);return bS.encodeByteArray(e,!0)},Id=function(n){return ZM(n).replace(/\./g,"")},NS=function(n){try{return bS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=()=>jM().__FIREBASE_DEFAULTS__,tD=()=>{if(typeof process>"u"||typeof EE>"u")return;const n=EE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&NS(n[1]);return e&&JSON.parse(e)},Xd=()=>{try{return QM()||eD()||tD()||nD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xS=n=>{var e,t;return(t=(e=Xd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},MS=n=>{const e=xS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},DS=()=>{var n;return(n=Xd())===null||n===void 0?void 0:n.config},PS=n=>{var e;return(e=Xd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Id(JSON.stringify(t)),Id(JSON.stringify(u)),""].join(".")}const Xl={};function sD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Xl))Xl[e]?n.emulator.push(e):n.prod.push(e);return n}function rD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let SE=!1;function bm(n,e){if(typeof window>"u"||typeof document>"u"||!wr(window.location.host)||Xl[n]===e||Xl[n]||SE)return;Xl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=sD().prod.length>0;function u(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,b){S.setAttribute("width","24"),S.setAttribute("id",b),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{SE=!0,u()},S}function v(S,b){S.setAttribute("id",b),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=rD(s),b=t("text"),U=document.getElementById(b)||document.createElement("span"),B=t("learnmore"),G=document.getElementById(B)||document.createElement("a"),te=t("preprendIcon"),K=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;d(X),v(G,B);const ie=m();p(K,te),X.append(K,U,G,ie),document.body.appendChild(X)}l?(U.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function aD(){var n;const e=(n=Xd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dD(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fD(){return!aD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hD(){try{return typeof indexedDB=="object"}catch{return!1}}function pD(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="FirebaseError";class Li extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=mD,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?gD(l,s):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Li(o,d,s)}}function gD(n,e){return n.replace(yD,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const yD=/\{\$([^}]+)}/g;function _D(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],u=e[o];if(AE(l)&&AE(u)){if(!fo(l,u))return!1}else if(l!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function AE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function zl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Hl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function vD(n,e){const t=new TD(n,e);return t.subscribe.bind(t)}class TD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");ED(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Rp),o.error===void 0&&(o.error=Rp),o.complete===void 0&&(o.complete=Rp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ED(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n){return n&&n._delegate?n._delegate:n}class _r{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new iD;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CD(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:AD(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AD(n){return n===ro?void 0:n}function CD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const RD={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},wD=Be.INFO,bD={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},ND=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=bD[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nm{constructor(e){this.name=e,this._logLevel=wD,this._logHandler=ND,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const xD=(n,e)=>e.some(t=>n instanceof t);let CE,IE;function MD(){return CE||(CE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DD(){return IE||(IE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VS=new WeakMap,$p=new WeakMap,US=new WeakMap,wp=new WeakMap,xm=new WeakMap;function PD(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(pr(n.result)),o()},u=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&VS.set(t,n)}).catch(()=>{}),xm.set(e,n),e}function kD(n){if($p.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),o()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});$p.set(n,e)}let Qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $p.get(n);if(e==="objectStoreNames")return n.objectStoreNames||US.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function VD(n){Qp=n(Qp)}function UD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(bp(this),e,...t);return US.set(s,e.sort?e.sort():[e]),pr(s)}:DD().includes(n)?function(...e){return n.apply(bp(this),e),pr(VS.get(this))}:function(...e){return pr(n.apply(bp(this),e))}}function LD(n){return typeof n=="function"?UD(n):(n instanceof IDBTransaction&&kD(n),xD(n,MD())?new Proxy(n,Qp):n)}function pr(n){if(n instanceof IDBRequest)return PD(n);if(wp.has(n))return wp.get(n);const e=LD(n);return e!==n&&(wp.set(n,e),xm.set(e,n)),e}const bp=n=>xm.get(n);function OD(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const u=indexedDB.open(n,e),d=pr(u);return s&&u.addEventListener("upgradeneeded",p=>{s(pr(u.result),p.oldVersion,p.newVersion,pr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const qD=["get","getKey","getAll","getAllKeys","count"],BD=["put","add","delete","clear"],Np=new Map;function RE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=BD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||qD.includes(t)))return;const l=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Np.set(e,l),l}VD(n=>({...n,get:(e,t,s)=>RE(e,t)||n.get(e,t,s),has:(e,t)=>!!RE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function zD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xp="@firebase/app",wE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Nm("@firebase/app"),HD="@firebase/app-compat",GD="@firebase/analytics-compat",JD="@firebase/analytics",YD="@firebase/app-check-compat",KD="@firebase/app-check",$D="@firebase/auth",QD="@firebase/auth-compat",XD="@firebase/database",WD="@firebase/data-connect",ZD="@firebase/database-compat",jD="@firebase/functions",e2="@firebase/functions-compat",t2="@firebase/installations",n2="@firebase/installations-compat",i2="@firebase/messaging",s2="@firebase/messaging-compat",r2="@firebase/performance",o2="@firebase/performance-compat",a2="@firebase/remote-config",l2="@firebase/remote-config-compat",u2="@firebase/storage",c2="@firebase/storage-compat",d2="@firebase/firestore",f2="@firebase/ai",h2="@firebase/firestore-compat",p2="firebase",m2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="[DEFAULT]",g2={[Xp]:"fire-core",[HD]:"fire-core-compat",[JD]:"fire-analytics",[GD]:"fire-analytics-compat",[KD]:"fire-app-check",[YD]:"fire-app-check-compat",[$D]:"fire-auth",[QD]:"fire-auth-compat",[XD]:"fire-rtdb",[WD]:"fire-data-connect",[ZD]:"fire-rtdb-compat",[jD]:"fire-fn",[e2]:"fire-fn-compat",[t2]:"fire-iid",[n2]:"fire-iid-compat",[i2]:"fire-fcm",[s2]:"fire-fcm-compat",[r2]:"fire-perf",[o2]:"fire-perf-compat",[a2]:"fire-rc",[l2]:"fire-rc-compat",[u2]:"fire-gcs",[c2]:"fire-gcs-compat",[d2]:"fire-fst",[h2]:"fire-fst-compat",[f2]:"fire-vertex","fire-js":"fire-js",[p2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Map,y2=new Map,Zp=new Map;function bE(n,e){try{n.container.addComponent(e)}catch(t){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ho(n){const e=n.name;if(Zp.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,n);for(const t of Rd.values())bE(t,n);for(const t of y2.values())bE(t,n);return!0}function Wd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new gu("app","Firebase",_2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=m2;function LS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wp,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw mr.create("bad-app-name",{appName:String(o)});if(t||(t=DS()),!t)throw mr.create("no-options");const l=Rd.get(o);if(l){if(fo(t,l.options)&&fo(s,l.config))return l;throw mr.create("duplicate-app",{appName:o})}const u=new ID(o);for(const p of Zp.values())u.addComponent(p);const d=new v2(t,s,u);return Rd.set(o,d),d}function Mm(n=Wp){const e=Rd.get(n);if(!e&&n===Wp&&DS())return LS();if(!e)throw mr.create("no-app",{appName:n});return e}function Ni(n,e,t){var s;let o=(s=g2[n])!==null&&s!==void 0?s:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(d.join(" "));return}ho(new _r(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebase-heartbeat-database",E2=1,su="firebase-heartbeat-store";let xp=null;function OS(){return xp||(xp=OD(T2,E2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(su)}catch(t){console.warn(t)}}}}).catch(n=>{throw mr.create("idb-open",{originalErrorMessage:n.message})})),xp}async function S2(n){try{const t=(await OS()).transaction(su),s=await t.objectStore(su).get(qS(n));return await t.done,s}catch(e){if(e instanceof Li)ms.warn(e.message);else{const t=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ms.warn(t.message)}}}async function NE(n,e){try{const s=(await OS()).transaction(su,"readwrite");await s.objectStore(su).put(e,qS(n)),await s.done}catch(t){if(t instanceof Li)ms.warn(t.message);else{const s=mr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ms.warn(s.message)}}}function qS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=1024,C2=30;class I2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new w2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=xE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>C2){const u=b2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ms.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xE(),{heartbeatsToSend:s,unsentEntries:o}=R2(this._heartbeatsCache.heartbeats),l=Id(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ms.warn(t),""}}}function xE(){return new Date().toISOString().substring(0,10)}function R2(n,e=A2){const t=[];let s=n.slice();for(const o of n){const l=t.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),ME(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ME(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class w2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hD()?pD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await S2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return NE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return NE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ME(n){return Id(JSON.stringify({version:2,heartbeats:n})).length}function b2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(n){ho(new _r("platform-logger",e=>new FD(e),"PRIVATE")),ho(new _r("heartbeat",e=>new I2(e),"PRIVATE")),Ni(Xp,wE,n),Ni(Xp,wE,"esm2017"),Ni("fire-js","")}N2("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="firebasestorage.googleapis.com",FS="storageBucket",x2=120*1e3,M2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et extends Li{constructor(e,t,s=0){super(Mp(e),`Firebase Storage: ${t} (${Mp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function Mp(n){return"storage/"+n}function Dm(){const n="An unknown error occurred, please check the error payload for server response.";return new Et(Tt.UNKNOWN,n)}function D2(n){return new Et(Tt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function P2(n){return new Et(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function k2(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Et(Tt.UNAUTHENTICATED,n)}function V2(){return new Et(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function U2(n){return new Et(Tt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function L2(){return new Et(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O2(){return new Et(Tt.CANCELED,"User canceled the upload/download.")}function q2(n){return new Et(Tt.INVALID_URL,"Invalid URL '"+n+"'.")}function B2(n){return new Et(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function F2(){return new Et(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+FS+"' property when initializing the app?")}function z2(){return new Et(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function H2(){return new Et(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function G2(n){return new Et(Tt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jp(n){return new Et(Tt.INVALID_ARGUMENT,n)}function zS(){return new Et(Tt.APP_DELETED,"The Firebase app was deleted.")}function J2(n){return new Et(Tt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wl(n,e){return new Et(Tt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Fl(n){throw new Et(Tt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Bn.makeFromUrl(e,t)}catch{return new Bn(e,"")}if(s.path==="")return s;throw B2(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function m(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",b=new RegExp(`^https?://${E}/${v}/b/${o}/o${S}`,"i"),U={bucket:1,path:3},B=t===BS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,G="([^?#]*)",te=new RegExp(`^https?://${B}/${o}/${G}`,"i"),X=[{regex:d,indices:p,postModify:l},{regex:b,indices:U,postModify:m},{regex:te,indices:{bucket:1,path:2},postModify:m}];for(let ie=0;ie<X.length;ie++){const le=X[ie],de=le.regex.exec(e);if(de){const M=de[le.indices.bucket];let N=de[le.indices.path];N||(N=""),s=new Bn(M,N),le.postModify(s);break}}if(s==null)throw q2(e);return s}}class Y2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(n,e,t){let s=1,o=null,l=null,u=!1,d=0;function p(){return d===2}let m=!1;function v(...G){m||(m=!0,e.apply(null,G))}function E(G){o=setTimeout(()=>{o=null,n(b,p())},G)}function S(){l&&clearTimeout(l)}function b(G,...te){if(m){S();return}if(G){S(),v.call(null,G,...te);return}if(p()||u){S(),v.call(null,G,...te);return}s<64&&(s*=2);let X;d===1?(d=2,X=0):X=(s+Math.random())*1e3,E(X)}let U=!1;function B(G){U||(U=!0,S(),!m&&(o!==null?(G||(d=2),clearTimeout(o),E(0)):G||(d=1)))}return E(0),l=setTimeout(()=>{u=!0,B(!0)},t),B}function $2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(n){return n!==void 0}function X2(n){return typeof n=="object"&&!Array.isArray(n)}function Pm(n){return typeof n=="string"||n instanceof String}function DE(n){return km()&&n instanceof Blob}function km(){return typeof Blob<"u"}function PE(n,e,t,s){if(s<e)throw jp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw jp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function HS(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var lo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(lo||(lo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t,s,o,l,u,d,p,m,v,E,S=!0,b=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,B)=>{this.resolve_=U,this.reject_=B,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new td(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const d=l.getErrorCode()===lo.NO_ERROR,p=l.getStatus();if(!d||W2(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===lo.ABORT;s(!1,new td(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;s(!0,new td(m,l))})},t=(s,o)=>{const l=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());Q2(p)?l(p):l()}catch(p){u(p)}else if(d!==null){const p=Dm();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?zS():O2();u(p)}else{const p=L2();u(p)}};this.canceled_?t(!1,new td(!1,null,!0)):this.backoffId_=K2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class td{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function j2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function eP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function nP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function iP(n,e,t,s,o,l,u=!0,d=!1){const p=HS(n.urlParams),m=n.url+p,v=Object.assign({},n.headers);return tP(v,e),j2(v,t),eP(v,l),nP(v,s),new Z2(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rP(...n){const e=sP();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(km())return new Blob(n);throw new Et(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n){if(typeof atob>"u")throw G2("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dp{constructor(e,t){this.data=e,this.contentType=t||null}}function GS(n,e){switch(n){case di.RAW:return new Dp(JS(e));case di.BASE64:case di.BASE64URL:return new Dp(YS(n,e));case di.DATA_URL:return new Dp(uP(e),cP(e))}throw Dm()}function JS(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,u=n.charCodeAt(++t);s=65536|(l&1023)<<10|u&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function lP(n){let e;try{e=decodeURIComponent(n)}catch{throw Wl(di.DATA_URL,"Malformed data URL.")}return JS(e)}function YS(n,e){switch(n){case di.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw Wl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case di.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw Wl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=aP(e)}catch(o){throw o.message.includes("polyfill")?o:Wl(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class KS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Wl(di.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=dP(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function uP(n){const e=new KS(n);return e.base64?YS(di.BASE64,e.rest):lP(e.rest)}function cP(n){return new KS(n).contentType}function dP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,t){let s=0,o="";DE(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(DE(this.data_)){const s=this.data_,o=oP(s,e,t);return o===null?null:new ur(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new ur(s,!0)}}static getBlob(...e){if(km()){const t=e.map(s=>s instanceof ur?s.data_:s);return new ur(rP.apply(null,t))}else{const t=e.map(u=>Pm(u)?GS(di.RAW,u).data:u.data_);let s=0;t.forEach(u=>{s+=u.byteLength});const o=new Uint8Array(s);let l=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)o[l++]=u[d]}),new ur(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){let e;try{e=JSON.parse(n)}catch{return null}return X2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function hP(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function QS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n,e){return e}class vn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||pP}}let nd=null;function mP(n){return!Pm(n)||n.length<2?n:QS(n)}function XS(){if(nd)return nd;const n=[];n.push(new vn("bucket")),n.push(new vn("generation")),n.push(new vn("metageneration")),n.push(new vn("name","fullPath",!0));function e(l,u){return mP(u)}const t=new vn("name");t.xform=e,n.push(t);function s(l,u){return u!==void 0?Number(u):u}const o=new vn("size");return o.xform=s,n.push(o),n.push(new vn("timeCreated")),n.push(new vn("updated")),n.push(new vn("md5Hash",null,!0)),n.push(new vn("cacheControl",null,!0)),n.push(new vn("contentDisposition",null,!0)),n.push(new vn("contentEncoding",null,!0)),n.push(new vn("contentLanguage",null,!0)),n.push(new vn("contentType",null,!0)),n.push(new vn("metadata","customMetadata",!0)),nd=n,nd}function gP(n,e){function t(){const s=n.bucket,o=n.fullPath,l=new Bn(s,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function yP(n,e,t){const s={};s.type="file";const o=t.length;for(let l=0;l<o;l++){const u=t[l];s[u.local]=u.xform(s,e[u.server])}return gP(s,n),s}function WS(n,e,t){const s=$S(e);return s===null?null:yP(n,s,t)}function _P(n,e,t,s){const o=$S(e);if(o===null||!Pm(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(m=>{const v=n.bucket,E=n.fullPath,S="/b/"+u(v)+"/o/"+u(E),b=Vm(S,t,s),U=HS({alt:"media",token:m});return b+U})[0]}function vP(n,e){const t={},s=e.length;for(let o=0;o<s;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class ZS{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(n){if(!n)throw Dm()}function TP(n,e){function t(s,o){const l=WS(n,o,e);return jS(l!==null),l}return t}function EP(n,e){function t(s,o){const l=WS(n,o,e);return jS(l!==null),_P(l,o,n.host,n._protocol)}return t}function eA(n){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=V2():o=k2():t.getStatus()===402?o=P2(n.bucket):t.getStatus()===403?o=U2(n.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function SP(n){const e=eA(n);function t(s,o){let l=e(s,o);return s.getStatus()===404&&(l=D2(n.path)),l.serverResponse=o.serverResponse,l}return t}function AP(n,e,t){const s=e.fullServerUrl(),o=Vm(s,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,d=new ZS(o,l,EP(n,t),u);return d.errorHandler=SP(e),d}function CP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function IP(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=CP(null,e)),s}function RP(n,e,t,s,o){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let X="";for(let ie=0;ie<2;ie++)X=X+Math.random().toString().slice(2);return X}const p=d();u["Content-Type"]="multipart/related; boundary="+p;const m=IP(e,s,o),v=vP(m,t),E="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+p+"--",b=ur.getBlob(E,s,S);if(b===null)throw z2();const U={name:m.fullPath},B=Vm(l,n.host,n._protocol),G="POST",te=n.maxUploadRetryTime,K=new ZS(B,G,TP(n,t),te);return K.urlParams=U,K.headers=u,K.body=b.uploadData(),K.errorHandler=eA(e),K}class wP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=lo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=lo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,l){if(this.sent_)throw Fl("cannot .send() more than once");if(wr(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class bP extends wP{initXhr(){this.xhr_.responseType="text"}}function tA(){return new bP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this._service=e,t instanceof Bn?this._location=t:this._location=Bn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new po(e,t)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QS(this._location.path)}get storage(){return this._service}get parent(){const e=fP(this._location.path);if(e===null)return null;const t=new Bn(this._location.bucket,e);return new po(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw J2(e)}}function NP(n,e,t){n._throwIfRoot("uploadBytes");const s=RP(n.storage,n._location,XS(),new ur(e,!0),t);return n.storage.makeRequestWithTokens(s,tA).then(o=>({metadata:o,ref:n}))}function xP(n,e,t=di.RAW,s){n._throwIfRoot("uploadString");const o=GS(t,e),l=Object.assign({},s);return l.contentType==null&&o.contentType!=null&&(l.contentType=o.contentType),NP(n,o.data,l)}function MP(n){n._throwIfRoot("getDownloadURL");const e=AP(n.storage,n._location,XS());return n.storage.makeRequestWithTokens(e,tA).then(t=>{if(t===null)throw H2();return t})}function DP(n,e){const t=hP(n._location.path,e),s=new Bn(n._location.bucket,t);return new po(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){return/^[A-Za-z]+:\/\//.test(n)}function kP(n,e){return new po(n,e)}function nA(n,e){if(n instanceof Um){const t=n;if(t._bucket==null)throw F2();const s=new po(t,t._bucket);return e!=null?nA(s,e):s}else return e!==void 0?DP(n,e):n}function VP(n,e){if(e&&PP(e)){if(n instanceof Um)return kP(n,e);throw jp("To use ref(service, url), the first argument must be a Storage instance.")}else return nA(n,e)}function kE(n,e){const t=e==null?void 0:e[FS];return t==null?null:Bn.makeFromBucketSpec(t,n)}function UP(n,e,t,s={}){n.host=`${e}:${t}`;const o=wr(e);o&&(wm(`https://${n.host}/b`),bm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:kS(l,n.app.options.projectId))}class Um{constructor(e,t,s,o,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=BS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=x2,this._maxUploadRetryTime=M2,this._requests=new Set,o!=null?this._bucket=Bn.makeFromBucketSpec(o,this._host):this._bucket=kE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=kE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new po(this,e)}_makeRequest(e,t,s,o,l=!0){if(this._deleted)return new Y2(zS());{const u=iP(e,this._appId,s,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const VE="@firebase/storage",UE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="storage";function LP(n,e,t,s){return n=tn(n),xP(n,e,t,s)}function OP(n){return n=tn(n),MP(n)}function qP(n,e){return n=tn(n),VP(n,e)}function BP(n=Mm(),e){n=tn(n);const s=Wd(n,iA).getImmediate({identifier:e}),o=MS("storage");return o&&FP(s,...o),s}function FP(n,e,t,s={}){UP(n,e,t,s)}function zP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Um(t,s,o,e,To)}function HP(){ho(new _r(iA,zP,"PUBLIC").setMultipleInstances(!0)),Ni(VE,UE,""),Ni(VE,UE,"esm2017")}HP();var GP="firebase",JP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(GP,JP,"app");function Lm(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function sA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YP=sA,rA=new gu("auth","Firebase",sA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Nm("@firebase/auth");function KP(n,...e){wd.logLevel<=Be.WARN&&wd.warn(`Auth (${To}): ${n}`,...e)}function dd(n,...e){wd.logLevel<=Be.ERROR&&wd.error(`Auth (${To}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(n,...e){throw qm(n,...e)}function pi(n,...e){return qm(n,...e)}function Om(n,e,t){const s=Object.assign(Object.assign({},YP()),{[e]:t});return new gu("auth","Firebase",s).create(e,{appName:n.name})}function hs(n){return Om(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $P(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ni(n,"argument-error"),Om(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return rA.create(n,...e)}function Ie(n,e,...t){if(!n)throw qm(e,...t)}function ds(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dd(e),new Error(e)}function gs(n,e){n||ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function QP(){return LE()==="http:"||LE()==="https:"}function LE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QP()||uD()||"connection"in navigator)?navigator.onLine:!0}function WP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=oD()||cD()}get(){return XP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n,e){gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ek=new _u(3e4,6e4);function br(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Nr(n,e,t,s,o={}){return aA(n,o,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const d=yu(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},l);return lD()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&wr(n.emulatorConfig.host)&&(m.credentials="include"),oA.fetch()(await lA(n,n.config.apiHost,t,d),m)})}async function aA(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},ZP),e);try{const o=new nk(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw id(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw id(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw id(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw id(n,"user-disabled",u);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Om(n,v,m);ni(n,v)}}catch(o){if(o instanceof Li)throw o;ni(n,"network-request-failed",{message:String(o)})}}async function vu(n,e,t,s,o={}){const l=await Nr(n,e,t,s,o);return"mfaPendingCredential"in l&&ni(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function lA(n,e,t,s){const o=`${e}${t}?${s}`,l=n,u=l.config.emulator?Bm(n.config,o):`${n.config.apiScheme}://${o}`;return jP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function tk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(pi(this.auth,"network-request-failed")),ek.get())})}}function id(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=pi(n,e,s);return o.customData._tokenResponse=t,o}function OE(n){return n!==void 0&&n.enterprise!==void 0}class ik{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sk(n,e){return Nr(n,"GET","/v2/recaptchaConfig",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(n,e){return Nr(n,"POST","/v1/accounts:delete",e)}async function bd(n,e){return Nr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ok(n,e=!1){const t=tn(n),s=await t.getIdToken(e),o=Fm(s);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Zl(Pp(o.auth_time)),issuedAtTime:Zl(Pp(o.iat)),expirationTime:Zl(Pp(o.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Pp(n){return Number(n)*1e3}function Fm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{const o=NS(t);return o?JSON.parse(o):(dd("Failed to decode base64 JWT payload"),null)}catch(o){return dd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function qE(n){const e=Fm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Li&&ak(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function ak({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(n){var e;const t=n.auth,s=await n.getIdToken(),o=await ru(n,bd(t,{idToken:s}));Ie(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?uA(l.providerUserInfo):[],d=ck(n.providerData,u),p=n.isAnonymous,m=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),v=p?m:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new tm(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function uk(n){const e=tn(n);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ck(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function uA(n){return n.map(e=>{var{providerId:t}=e,s=Lm(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(n,e){const t=await aA(n,{},async()=>{const s=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,u=await lA(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&wr(n.emulatorConfig.host)&&(p.credentials="include"),oA.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fk(n,e){return Nr(n,"POST","/v2/accounts:revokeToken",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=qE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await dk(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,u=new Ta;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ta,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Lm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new tm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ru(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ok(this,e)}reload(){return uk(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Nd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await ru(this,rk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,u,d,p,m,v;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,b=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,U=(u=t.photoURL)!==null&&u!==void 0?u:void 0,B=(d=t.tenantId)!==null&&d!==void 0?d:void 0,G=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,te=(m=t.createdAt)!==null&&m!==void 0?m:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:X,emailVerified:ie,isAnonymous:le,providerData:de,stsTokenManager:M}=t;Ie(X&&M,e,"internal-error");const N=Ta.fromJSON(this.name,M);Ie(typeof X=="string",e,"internal-error"),lr(E,e.name),lr(S,e.name),Ie(typeof ie=="boolean",e,"internal-error"),Ie(typeof le=="boolean",e,"internal-error"),lr(b,e.name),lr(U,e.name),lr(B,e.name),lr(G,e.name),lr(te,e.name),lr(K,e.name);const x=new fi({uid:X,auth:e,email:S,emailVerified:ie,displayName:E,isAnonymous:le,photoURL:U,phoneNumber:b,tenantId:B,stsTokenManager:N,createdAt:te,lastLoginAt:K});return de&&Array.isArray(de)&&(x.providerData=de.map(D=>Object.assign({},D))),G&&(x._redirectEventId=G),x}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ta;o.updateFromServerResponse(t);const l=new fi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Nd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?uA(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Ta;d.updateFromIdToken(s);const p=new fi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new tm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;function fs(n){gs(n instanceof Function,"Expected a class definition");let e=BE.get(n);return e?(gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,BE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cA.type="NONE";const FE=cA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ea{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=fd(this.userKey,o.apiKey,l),this.fullPersistenceKey=fd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bd(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ea(fs(FE),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||fs(FE);const u=fd(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let E;if(typeof v=="string"){const S=await bd(e,{idToken:v}).catch(()=>{});if(!S)break;E=await fi._fromGetAccountInfoResponse(e,S,v)}else E=fi._fromJSON(e,v);m!==l&&(d=E),l=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ea(l,e,s):(l=p[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new Ea(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gA(e))return"Blackberry";if(yA(e))return"Webos";if(fA(e))return"Safari";if((e.includes("chrome/")||hA(e))&&!e.includes("edge/"))return"Chrome";if(mA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function dA(n=fn()){return/firefox\//i.test(n)}function fA(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hA(n=fn()){return/crios\//i.test(n)}function pA(n=fn()){return/iemobile/i.test(n)}function mA(n=fn()){return/android/i.test(n)}function gA(n=fn()){return/blackberry/i.test(n)}function yA(n=fn()){return/webos/i.test(n)}function zm(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function hk(n=fn()){var e;return zm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pk(){return dD()&&document.documentMode===10}function _A(n=fn()){return zm(n)||mA(n)||yA(n)||gA(n)||/windows phone/i.test(n)||pA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n,e=[]){let t;switch(n){case"Browser":t=zE(fn());break;case"Worker":t=`${zE(fn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${To}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,d)=>{try{const p=e(l);u(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(n,e={}){return Nr(n,"GET","/v2/passwordPolicy",br(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=6;class _k{constructor(e){var t,s,o,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:yk,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HE(this),this.idTokenSubscription=new HE(this),this.beforeStateQueue=new mk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bd(this,{idToken:e}),s=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(bn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(hs(this));const t=e?tn(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gk(this),t=new _k(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await fk(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&KP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function xr(n){return tn(n)}class HE{constructor(e){this.auth=e,this.observer=null,this.addObserver=vD(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tk(n){Zd=n}function TA(n){return Zd.loadJS(n)}function Ek(){return Zd.recaptchaEnterpriseScript}function Sk(){return Zd.gapiScript}function Ak(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Ck{constructor(){this.enterprise=new Ik}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ik{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Rk="recaptcha-enterprise",EA="NO_RECAPTCHA";class wk{constructor(e){this.type=Rk,this.auth=xr(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{sk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new ik(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(p=>{d(p)})})}function o(l,u,d){const p=window.grecaptcha;OE(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(EA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ck().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(d=>{if(!t&&OE(window.grecaptcha))o(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Ek();p.length!==0&&(p+=d),TA(p).then(()=>{o(d,l,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function GE(n,e,t,s=!1,o=!1){const l=new wk(n);let u;if(o)u=EA;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function nm(n,e,t,s,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await GE(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await GE(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n,e){const t=Wd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(fo(l,e??{}))return o;ni(o,"already-initialized")}return t.initialize({options:e})}function Nk(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function xk(n,e,t){const s=xr(n);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=SA(e),{host:u,port:d}=Mk(e),p=d===null?"":`:${d}`,m={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(fo(m,s.config.emulator)&&fo(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,wr(u)?(wm(`${l}//${u}${p}`),bm("Auth",!0)):Dk()}function SA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Mk(n){const e=SA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:JE(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:JE(u)}}}function JE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Dk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,t){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function Pk(n,e){return Nr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(n,e){return vu(n,"POST","/v1/accounts:signInWithPassword",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(n,e){return vu(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}async function Uk(n,e){return vu(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends Hm{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ou(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ou(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(e,t,"signInWithPassword",kk);case"emailLink":return Vk(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(e,s,"signUpPassword",Pk);case"emailLink":return Uk(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(n,e){return vu(n,"POST","/v1/accounts:signInWithIdp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="http://localhost";class mo extends Hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Lm(t,["providerId","signInMethod"]);if(!s||!o)return null;const u=new mo(s,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Sa(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Sa(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sa(e,t)}buildRequest(){const e={requestUri:Lk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qk(n){const e=zl(Hl(n)).link,t=e?zl(Hl(e)).deep_link_id:null,s=zl(Hl(n)).deep_link_id;return(s?zl(Hl(s)).link:null)||s||t||e||n}class Gm{constructor(e){var t,s,o,l,u,d;const p=zl(Hl(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(s=p.oobCode)!==null&&s!==void 0?s:null,E=Ok((o=p.mode)!==null&&o!==void 0?o:null);Ie(m&&v&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=qk(e);try{return new Gm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.providerId=Da.PROVIDER_ID}static credential(e,t){return ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Gm.parseLink(t);return Ie(s,"argument-error"),ou._fromEmailAndCode(e,s.code,s.tenantId)}}Da.PROVIDER_ID="password";Da.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Da.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Jm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Tu{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return cs.credential(t,s)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Tu{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Tu{constructor(){super("twitter.com")}static credential(e,t){return mo._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return fr.credential(t,s)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(n,e){return vu(n,"POST","/v1/accounts:signUp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await fi._fromIdTokenResponse(e,s,o),u=YE(s);return new go({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=YE(s);return new go({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function YE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends Li{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,xd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new xd(e,t,s,o)}}function AA(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?xd._fromErrorAndOperation(n,l,e,s):l})}async function Fk(n,e,t=!1){const s=await ru(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return go._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(n,e,t=!1){const{auth:s}=n;if(bn(s.app))return Promise.reject(hs(s));const o="reauthenticate";try{const l=await ru(n,AA(s,o,e,n),t);Ie(l.idToken,s,"internal-error");const u=Fm(l.idToken);Ie(u,s,"internal-error");const{sub:d}=u;return Ie(n.uid===d,s,"user-mismatch"),go._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ni(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(n,e,t=!1){if(bn(n.app))return Promise.reject(hs(n));const s="signIn",o=await AA(n,s,e),l=await go._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function Hk(n,e){return CA(xr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(n){const e=xr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Gk(n,e,t){if(bn(n.app))return Promise.reject(hs(n));const s=xr(n),u=await nm(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bk).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&IA(n),p}),d=await go._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(d.user),d}function Jk(n,e,t){return bn(n.app)?Promise.reject(hs(n)):Hk(tn(n),Da.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&IA(n),s})}function Yk(n,e,t,s){return tn(n).onIdTokenChanged(e,t,s)}function Kk(n,e,t){return tn(n).beforeAuthStateChanged(e,t)}function $k(n,e,t,s){return tn(n).onAuthStateChanged(e,t,s)}function Qk(n){return tn(n).signOut()}const Md="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Md,"1"),this.storage.removeItem(Md),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=1e3,Wk=10;class wA extends RA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_A(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);pk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Wk):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wA.type="LOCAL";const Zk=wA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends RA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bA.type="SESSION";const NA=bA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new jd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,l)),p=await jk(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,p)=>{const m=Ym("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return window}function tV(n){xi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function nV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function sV(){return xA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="firebaseLocalStorageDb",rV=1,Dd="firebaseLocalStorage",DA="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ef(n,e){return n.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function oV(){const n=indexedDB.deleteDatabase(MA);return new Eu(n).toPromise()}function im(){const n=indexedDB.open(MA,rV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Dd,{keyPath:DA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Dd)?e(s):(s.close(),await oV(),e(await im()))})})}async function KE(n,e,t){const s=ef(n,!0).put({[DA]:e,value:t});return new Eu(s).toPromise()}async function aV(n,e){const t=ef(n,!1).get(e),s=await new Eu(t).toPromise();return s===void 0?null:s.value}function $E(n,e){const t=ef(n,!0).delete(e);return new Eu(t).toPromise()}const lV=800,uV=3;class PA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>uV)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jd._getInstance(sV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await nV(),!this.activeServiceWorker)return;this.sender=new eV(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await im();return await KE(e,Md,"1"),await $E(e,Md),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>KE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>aV(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$E(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ef(o,!1).getAll();return new Eu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PA.type="LOCAL";const cV=PA;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n,e){return e?fs(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends Hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dV(n){return CA(n.auth,new Km(n),n.bypassAuthState)}function fV(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),zk(t,new Km(n),n.bypassAuthState)}async function hV(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Fk(t,new Km(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dV;case"linkViaPopup":case"linkViaRedirect":return hV;case"reauthViaPopup":case"reauthViaRedirect":return fV;default:ni(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new _u(2e3,1e4);async function mV(n,e,t){if(bn(n.app))return Promise.reject(pi(n,"operation-not-supported-in-this-environment"));const s=xr(n);$P(n,e,Jm);const o=kA(s,t);return new oo(s,"signInViaPopup",e,o).executeNotNull()}class oo extends VA{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pV.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="pendingRedirect",hd=new Map;class yV extends VA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=hd.get(this.auth._key());if(!e){try{const s=await _V(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}hd.set(this.auth._key(),e)}return this.bypassAuthState||hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _V(n,e){const t=EV(e),s=TV(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function vV(n,e){hd.set(n._key(),e)}function TV(n){return fs(n._redirectPersistence)}function EV(n){return fd(gV,n.config.apiKey,n.name)}async function SV(n,e,t=!1){if(bn(n.app))return Promise.reject(hs(n));const s=xr(n),o=kA(s,e),u=await new yV(s,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=600*1e3;class CV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!UA(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(pi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AV&&this.cachedEventUids.clear(),this.cachedEventUids.has(QE(e))}saveEventToCache(e){this.cachedEventUids.add(QE(e)),this.lastProcessedEventTime=Date.now()}}function QE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function UA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(n,e={}){return Nr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bV=/^https?/;async function NV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RV(n);for(const t of e)try{if(xV(t))return}catch{}ni(n,"unauthorized-domain")}function xV(n){const e=em(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!bV.test(t))return!1;if(wV.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=new _u(3e4,6e4);function XE(){const n=xi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function DV(n){return new Promise((e,t)=>{var s,o,l;function u(){XE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XE(),t(pi(n,"network-request-failed"))},timeout:MV.get()})}if(!((o=(s=xi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=xi().gapi)===null||l===void 0)&&l.load)u();else{const d=Ak("iframefcb");return xi()[d]=()=>{gapi.load?u():t(pi(n,"network-request-failed"))},TA(`${Sk()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw pd=null,e})}let pd=null;function PV(n){return pd=pd||DV(n),pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=new _u(5e3,15e3),VV="__/auth/iframe",UV="emulator/auth/iframe",LV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qV(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Bm(e,UV):`https://${n.config.authDomain}/${VV}`,s={apiKey:e.apiKey,appName:n.name,v:To},o=OV.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${yu(s).slice(1)}`}async function BV(n){const e=await PV(n),t=xi().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:qV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LV,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const u=pi(n,"network-request-failed"),d=xi().setTimeout(()=>{l(u)},kV.get());function p(){xi().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zV=500,HV=600,GV="_blank",JV="http://localhost";class WE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YV(n,e,t,s=zV,o=HV){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p=Object.assign(Object.assign({},FV),{width:s.toString(),height:o.toString(),top:l,left:u}),m=fn().toLowerCase();t&&(d=hA(m)?GV:t),dA(m)&&(e=e||JV,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[b,U])=>`${S}${b}=${U},`,"");if(hk(m)&&d!=="_self")return KV(e||"",d),new WE(null);const E=window.open(e||"",d,v);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new WE(E)}function KV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="__/auth/handler",QV="emulator/auth/handler",XV=encodeURIComponent("fac");async function ZE(n,e,t,s,o,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:To,eventId:o};if(e instanceof Jm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",_D(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Tu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${XV}=${encodeURIComponent(p)}`:"";return`${WV(n)}?${yu(d).slice(1)}${m}`}function WV({config:n}){return n.emulator?Bm(n,QV):`https://${n.authDomain}/${$V}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class ZV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NA,this._completeRedirectFn=SV,this._overrideRedirectResult=vV}async _openPopup(e,t,s,o){var l;gs((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await ZE(e,t,s,em(),o);return YV(e,u,Ym())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await ZE(e,t,s,em(),o);return tV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(gs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await BV(e),s=new CV(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kp,{type:kp},o=>{var l;const u=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[kp];u!==void 0&&t(!!u),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=NV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _A()||fA()||zm()}}const jV=ZV;var jE="@firebase/auth",e0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nU(n){ho(new _r("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=s.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vA(n)},m=new vk(s,o,l,p);return Nk(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ho(new _r("auth-internal",e=>{const t=xr(e.getProvider("auth").getImmediate());return(s=>new eU(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(jE,e0,tU(n)),Ni(jE,e0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=300,sU=PS("authIdTokenMaxAge")||iU;let t0=null;const rU=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>sU)return;const o=t==null?void 0:t.token;t0!==o&&(t0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function oU(n=Mm()){const e=Wd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=bk(n,{popupRedirectResolver:jV,persistence:[cV,Zk,NA]}),s=PS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=rU(l.toString());Kk(t,u,()=>u(t.currentUser)),Yk(t,d=>u(d))}}const o=xS("auth");return o&&xk(t,`http://${o}`),t}function aU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Tk({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=pi("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",aU().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nU("Browser");var n0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gr,LA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function x(){}x.prototype=N.prototype,M.D=N.prototype,M.prototype=new x,M.prototype.constructor=M,M.C=function(D,V,O){for(var P=Array(arguments.length-2),st=2;st<arguments.length;st++)P[st-2]=arguments[st];return N.prototype[V].apply(D,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,N,x){x||(x=0);var D=Array(16);if(typeof N=="string")for(var V=0;16>V;++V)D[V]=N.charCodeAt(x++)|N.charCodeAt(x++)<<8|N.charCodeAt(x++)<<16|N.charCodeAt(x++)<<24;else for(V=0;16>V;++V)D[V]=N[x++]|N[x++]<<8|N[x++]<<16|N[x++]<<24;N=M.g[0],x=M.g[1],V=M.g[2];var O=M.g[3],P=N+(O^x&(V^O))+D[0]+3614090360&4294967295;N=x+(P<<7&4294967295|P>>>25),P=O+(V^N&(x^V))+D[1]+3905402710&4294967295,O=N+(P<<12&4294967295|P>>>20),P=V+(x^O&(N^x))+D[2]+606105819&4294967295,V=O+(P<<17&4294967295|P>>>15),P=x+(N^V&(O^N))+D[3]+3250441966&4294967295,x=V+(P<<22&4294967295|P>>>10),P=N+(O^x&(V^O))+D[4]+4118548399&4294967295,N=x+(P<<7&4294967295|P>>>25),P=O+(V^N&(x^V))+D[5]+1200080426&4294967295,O=N+(P<<12&4294967295|P>>>20),P=V+(x^O&(N^x))+D[6]+2821735955&4294967295,V=O+(P<<17&4294967295|P>>>15),P=x+(N^V&(O^N))+D[7]+4249261313&4294967295,x=V+(P<<22&4294967295|P>>>10),P=N+(O^x&(V^O))+D[8]+1770035416&4294967295,N=x+(P<<7&4294967295|P>>>25),P=O+(V^N&(x^V))+D[9]+2336552879&4294967295,O=N+(P<<12&4294967295|P>>>20),P=V+(x^O&(N^x))+D[10]+4294925233&4294967295,V=O+(P<<17&4294967295|P>>>15),P=x+(N^V&(O^N))+D[11]+2304563134&4294967295,x=V+(P<<22&4294967295|P>>>10),P=N+(O^x&(V^O))+D[12]+1804603682&4294967295,N=x+(P<<7&4294967295|P>>>25),P=O+(V^N&(x^V))+D[13]+4254626195&4294967295,O=N+(P<<12&4294967295|P>>>20),P=V+(x^O&(N^x))+D[14]+2792965006&4294967295,V=O+(P<<17&4294967295|P>>>15),P=x+(N^V&(O^N))+D[15]+1236535329&4294967295,x=V+(P<<22&4294967295|P>>>10),P=N+(V^O&(x^V))+D[1]+4129170786&4294967295,N=x+(P<<5&4294967295|P>>>27),P=O+(x^V&(N^x))+D[6]+3225465664&4294967295,O=N+(P<<9&4294967295|P>>>23),P=V+(N^x&(O^N))+D[11]+643717713&4294967295,V=O+(P<<14&4294967295|P>>>18),P=x+(O^N&(V^O))+D[0]+3921069994&4294967295,x=V+(P<<20&4294967295|P>>>12),P=N+(V^O&(x^V))+D[5]+3593408605&4294967295,N=x+(P<<5&4294967295|P>>>27),P=O+(x^V&(N^x))+D[10]+38016083&4294967295,O=N+(P<<9&4294967295|P>>>23),P=V+(N^x&(O^N))+D[15]+3634488961&4294967295,V=O+(P<<14&4294967295|P>>>18),P=x+(O^N&(V^O))+D[4]+3889429448&4294967295,x=V+(P<<20&4294967295|P>>>12),P=N+(V^O&(x^V))+D[9]+568446438&4294967295,N=x+(P<<5&4294967295|P>>>27),P=O+(x^V&(N^x))+D[14]+3275163606&4294967295,O=N+(P<<9&4294967295|P>>>23),P=V+(N^x&(O^N))+D[3]+4107603335&4294967295,V=O+(P<<14&4294967295|P>>>18),P=x+(O^N&(V^O))+D[8]+1163531501&4294967295,x=V+(P<<20&4294967295|P>>>12),P=N+(V^O&(x^V))+D[13]+2850285829&4294967295,N=x+(P<<5&4294967295|P>>>27),P=O+(x^V&(N^x))+D[2]+4243563512&4294967295,O=N+(P<<9&4294967295|P>>>23),P=V+(N^x&(O^N))+D[7]+1735328473&4294967295,V=O+(P<<14&4294967295|P>>>18),P=x+(O^N&(V^O))+D[12]+2368359562&4294967295,x=V+(P<<20&4294967295|P>>>12),P=N+(x^V^O)+D[5]+4294588738&4294967295,N=x+(P<<4&4294967295|P>>>28),P=O+(N^x^V)+D[8]+2272392833&4294967295,O=N+(P<<11&4294967295|P>>>21),P=V+(O^N^x)+D[11]+1839030562&4294967295,V=O+(P<<16&4294967295|P>>>16),P=x+(V^O^N)+D[14]+4259657740&4294967295,x=V+(P<<23&4294967295|P>>>9),P=N+(x^V^O)+D[1]+2763975236&4294967295,N=x+(P<<4&4294967295|P>>>28),P=O+(N^x^V)+D[4]+1272893353&4294967295,O=N+(P<<11&4294967295|P>>>21),P=V+(O^N^x)+D[7]+4139469664&4294967295,V=O+(P<<16&4294967295|P>>>16),P=x+(V^O^N)+D[10]+3200236656&4294967295,x=V+(P<<23&4294967295|P>>>9),P=N+(x^V^O)+D[13]+681279174&4294967295,N=x+(P<<4&4294967295|P>>>28),P=O+(N^x^V)+D[0]+3936430074&4294967295,O=N+(P<<11&4294967295|P>>>21),P=V+(O^N^x)+D[3]+3572445317&4294967295,V=O+(P<<16&4294967295|P>>>16),P=x+(V^O^N)+D[6]+76029189&4294967295,x=V+(P<<23&4294967295|P>>>9),P=N+(x^V^O)+D[9]+3654602809&4294967295,N=x+(P<<4&4294967295|P>>>28),P=O+(N^x^V)+D[12]+3873151461&4294967295,O=N+(P<<11&4294967295|P>>>21),P=V+(O^N^x)+D[15]+530742520&4294967295,V=O+(P<<16&4294967295|P>>>16),P=x+(V^O^N)+D[2]+3299628645&4294967295,x=V+(P<<23&4294967295|P>>>9),P=N+(V^(x|~O))+D[0]+4096336452&4294967295,N=x+(P<<6&4294967295|P>>>26),P=O+(x^(N|~V))+D[7]+1126891415&4294967295,O=N+(P<<10&4294967295|P>>>22),P=V+(N^(O|~x))+D[14]+2878612391&4294967295,V=O+(P<<15&4294967295|P>>>17),P=x+(O^(V|~N))+D[5]+4237533241&4294967295,x=V+(P<<21&4294967295|P>>>11),P=N+(V^(x|~O))+D[12]+1700485571&4294967295,N=x+(P<<6&4294967295|P>>>26),P=O+(x^(N|~V))+D[3]+2399980690&4294967295,O=N+(P<<10&4294967295|P>>>22),P=V+(N^(O|~x))+D[10]+4293915773&4294967295,V=O+(P<<15&4294967295|P>>>17),P=x+(O^(V|~N))+D[1]+2240044497&4294967295,x=V+(P<<21&4294967295|P>>>11),P=N+(V^(x|~O))+D[8]+1873313359&4294967295,N=x+(P<<6&4294967295|P>>>26),P=O+(x^(N|~V))+D[15]+4264355552&4294967295,O=N+(P<<10&4294967295|P>>>22),P=V+(N^(O|~x))+D[6]+2734768916&4294967295,V=O+(P<<15&4294967295|P>>>17),P=x+(O^(V|~N))+D[13]+1309151649&4294967295,x=V+(P<<21&4294967295|P>>>11),P=N+(V^(x|~O))+D[4]+4149444226&4294967295,N=x+(P<<6&4294967295|P>>>26),P=O+(x^(N|~V))+D[11]+3174756917&4294967295,O=N+(P<<10&4294967295|P>>>22),P=V+(N^(O|~x))+D[2]+718787259&4294967295,V=O+(P<<15&4294967295|P>>>17),P=x+(O^(V|~N))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+O&4294967295}s.prototype.u=function(M,N){N===void 0&&(N=M.length);for(var x=N-this.blockSize,D=this.B,V=this.h,O=0;O<N;){if(V==0)for(;O<=x;)o(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<N;)if(D[V++]=M.charCodeAt(O++),V==this.blockSize){o(this,D),V=0;break}}else for(;O<N;)if(D[V++]=M[O++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=N},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;var x=8*this.o;for(N=M.length-8;N<M.length;++N)M[N]=x&255,x/=256;for(this.u(M),M=Array(16),N=x=0;4>N;++N)for(var D=0;32>D;D+=8)M[x++]=this.g[N]>>>D&255;return M};function l(M,N){var x=d;return Object.prototype.hasOwnProperty.call(x,M)?x[M]:x[M]=N(M)}function u(M,N){this.h=N;for(var x=[],D=!0,V=M.length-1;0<=V;V--){var O=M[V]|0;D&&O==N||(x[V]=O,D=!1)}this.g=x}var d={};function p(M){return-128<=M&&128>M?l(M,function(N){return new u([N|0],0>N?-1:0)}):new u([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return G(m(-M));for(var N=[],x=1,D=0;M>=x;D++)N[D]=M/x|0,x*=4294967296;return new u(N,0)}function v(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return G(v(M.substring(1),N));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(N,8)),D=E,V=0;V<M.length;V+=8){var O=Math.min(8,M.length-V),P=parseInt(M.substring(V,V+O),N);8>O?(O=m(Math.pow(N,O)),D=D.j(O).add(m(P))):(D=D.j(x),D=D.add(m(P)))}return D}var E=p(0),S=p(1),b=p(16777216);n=u.prototype,n.m=function(){if(B(this))return-G(this).m();for(var M=0,N=1,x=0;x<this.g.length;x++){var D=this.i(x);M+=(0<=D?D:4294967296+D)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(U(this))return"0";if(B(this))return"-"+G(this).toString(M);for(var N=m(Math.pow(M,6)),x=this,D="";;){var V=ie(x,N).g;x=te(x,V.j(N));var O=((0<x.g.length?x.g[0]:x.h)>>>0).toString(M);if(x=V,U(x))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function U(M){if(M.h!=0)return!1;for(var N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function B(M){return M.h==-1}n.l=function(M){return M=te(this,M),B(M)?-1:U(M)?0:1};function G(M){for(var N=M.g.length,x=[],D=0;D<N;D++)x[D]=~M.g[D];return new u(x,~M.h).add(S)}n.abs=function(){return B(this)?G(this):this},n.add=function(M){for(var N=Math.max(this.g.length,M.g.length),x=[],D=0,V=0;V<=N;V++){var O=D+(this.i(V)&65535)+(M.i(V)&65535),P=(O>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);D=P>>>16,O&=65535,P&=65535,x[V]=P<<16|O}return new u(x,x[x.length-1]&-2147483648?-1:0)};function te(M,N){return M.add(G(N))}n.j=function(M){if(U(this)||U(M))return E;if(B(this))return B(M)?G(this).j(G(M)):G(G(this).j(M));if(B(M))return G(this.j(G(M)));if(0>this.l(b)&&0>M.l(b))return m(this.m()*M.m());for(var N=this.g.length+M.g.length,x=[],D=0;D<2*N;D++)x[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<M.g.length;V++){var O=this.i(D)>>>16,P=this.i(D)&65535,st=M.i(V)>>>16,ft=M.i(V)&65535;x[2*D+2*V]+=P*ft,K(x,2*D+2*V),x[2*D+2*V+1]+=O*ft,K(x,2*D+2*V+1),x[2*D+2*V+1]+=P*st,K(x,2*D+2*V+1),x[2*D+2*V+2]+=O*st,K(x,2*D+2*V+2)}for(D=0;D<N;D++)x[D]=x[2*D+1]<<16|x[2*D];for(D=N;D<2*N;D++)x[D]=0;return new u(x,0)};function K(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function X(M,N){this.g=M,this.h=N}function ie(M,N){if(U(N))throw Error("division by zero");if(U(M))return new X(E,E);if(B(M))return N=ie(G(M),N),new X(G(N.g),G(N.h));if(B(N))return N=ie(M,G(N)),new X(G(N.g),N.h);if(30<M.g.length){if(B(M)||B(N))throw Error("slowDivide_ only works with positive integers.");for(var x=S,D=N;0>=D.l(M);)x=le(x),D=le(D);var V=de(x,1),O=de(D,1);for(D=de(D,2),x=de(x,2);!U(D);){var P=O.add(D);0>=P.l(M)&&(V=V.add(x),O=P),D=de(D,1),x=de(x,1)}return N=te(M,V.j(N)),new X(V,N)}for(V=E;0<=M.l(N);){for(x=Math.max(1,Math.floor(M.m()/N.m())),D=Math.ceil(Math.log(x)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=m(x),P=O.j(N);B(P)||0<P.l(M);)x-=D,O=m(x),P=O.j(N);U(O)&&(O=S),V=V.add(O),M=te(M,P)}return new X(V,M)}n.A=function(M){return ie(this,M).h},n.and=function(M){for(var N=Math.max(this.g.length,M.g.length),x=[],D=0;D<N;D++)x[D]=this.i(D)&M.i(D);return new u(x,this.h&M.h)},n.or=function(M){for(var N=Math.max(this.g.length,M.g.length),x=[],D=0;D<N;D++)x[D]=this.i(D)|M.i(D);return new u(x,this.h|M.h)},n.xor=function(M){for(var N=Math.max(this.g.length,M.g.length),x=[],D=0;D<N;D++)x[D]=this.i(D)^M.i(D);return new u(x,this.h^M.h)};function le(M){for(var N=M.g.length+1,x=[],D=0;D<N;D++)x[D]=M.i(D)<<1|M.i(D-1)>>>31;return new u(x,M.h)}function de(M,N){var x=N>>5;N%=32;for(var D=M.g.length-x,V=[],O=0;O<D;O++)V[O]=0<N?M.i(O+x)>>>N|M.i(O+x+1)<<32-N:M.i(O+x);return new u(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,LA=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,gr=u}).apply(typeof n0<"u"?n0:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OA,Gl,qA,md,sm,BA,FA,zA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,C){return h==Array.prototype||h==Object.prototype||(h[T]=C.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var T=0;T<h.length;++T){var C=h[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(h,T){if(T)e:{var C=s;h=h.split(".");for(var w=0;w<h.length-1;w++){var H=h[w];if(!(H in C))break e;C=C[H]}h=h[h.length-1],w=C[h],T=T(w),T!=w&&T!=null&&e(C,h,{configurable:!0,writable:!0,value:T})}}function l(h,T){h instanceof String&&(h+="");var C=0,w=!1,H={next:function(){if(!w&&C<h.length){var W=C++;return{value:T(W,h[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(h){return h||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function m(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function v(h,T,C){return h.call.apply(h.bind,arguments)}function E(h,T,C){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,w),h.apply(T,H)}}return function(){return h.apply(T,arguments)}}function S(h,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function b(h,T){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function U(h,T){function C(){}C.prototype=T.prototype,h.aa=T.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(w,H,W){for(var ce=Array(arguments.length-2),We=2;We<arguments.length;We++)ce[We-2]=arguments[We];return T.prototype[H].apply(w,ce)}}function B(h){const T=h.length;if(0<T){const C=Array(T);for(let w=0;w<T;w++)C[w]=h[w];return C}return[]}function G(h,T){for(let C=1;C<arguments.length;C++){const w=arguments[C];if(p(w)){const H=h.length||0,W=w.length||0;h.length=H+W;for(let ce=0;ce<W;ce++)h[H+ce]=w[ce]}else h.push(w)}}class te{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function K(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var le=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function de(h,T,C){for(const w in h)T.call(C,h[w],w,h)}function M(h,T){for(const C in h)T.call(void 0,h[C],C,h)}function N(h){const T={};for(const C in h)T[C]=h[C];return T}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,T){let C,w;for(let H=1;H<arguments.length;H++){w=arguments[H];for(C in w)h[C]=w[C];for(let W=0;W<x.length;W++)C=x[W],Object.prototype.hasOwnProperty.call(w,C)&&(h[C]=w[C])}}function V(h){var T=1;h=h.split(":");const C=[];for(;0<T&&h.length;)C.push(h.shift()),T--;return h.length&&C.push(h.join(":")),C}function O(h){d.setTimeout(()=>{throw h},0)}function P(){var h=ze;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class st{constructor(){this.h=this.g=null}add(T,C){const w=ft.get();w.set(T,C),this.h?this.h.next=w:this.g=w,this.h=w}}var ft=new te(()=>new z,h=>h.reset());class z{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,_e=!1,ze=new st,Je=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(q)}};var q=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(C){O(C)}var T=ft;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}_e=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return h})();function Ae(h,T){if(oe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(le){e:{try{ie(T.nodeName);var H=!0;break e}catch{}H=!1}H||(T=null)}}else C=="mouseover"?T=h.fromElement:C=="mouseout"&&(T=h.toElement);this.relatedTarget=T,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ue[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ae.aa.h.call(this)}}U(Ae,oe);var ue={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Pe=0;function De(h,T,C,w,H){this.listener=h,this.proxy=null,this.src=T,this.type=C,this.capture=!!w,this.ha=H,this.key=++Pe,this.da=this.fa=!1}function St(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ii(h){this.src=h,this.g={},this.h=0}ii.prototype.add=function(h,T,C,w,H){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var ce=kt(h,T,w,H);return-1<ce?(T=h[ce],C||(T.fa=!1)):(T=new De(T,this.src,W,!!w,H),T.fa=C,h.push(T)),T};function si(h,T){var C=T.type;if(C in h.g){var w=h.g[C],H=Array.prototype.indexOf.call(w,T,void 0),W;(W=0<=H)&&Array.prototype.splice.call(w,H,1),W&&(St(T),h.g[C].length==0&&(delete h.g[C],h.h--))}}function kt(h,T,C,w){for(var H=0;H<h.length;++H){var W=h[H];if(!W.da&&W.listener==T&&W.capture==!!C&&W.ha==w)return H}return-1}var sn="closure_lm_"+(1e6*Math.random()|0),Nn={};function xn(h,T,C,w,H){if(Array.isArray(T)){for(var W=0;W<T.length;W++)xn(h,T[W],C,w,H);return null}return C=bu(C),h&&h[ye]?h.K(T,C,m(w)?!!w.capture:!1,H):gf(h,T,C,!1,w,H)}function gf(h,T,C,w,H,W){if(!T)throw Error("Invalid event type");var ce=m(H)?!!H.capture:!!H,We=La(h);if(We||(h[sn]=We=new ii(h)),C=We.add(T,C,w,ce,W),C.proxy)return C;if(w=wu(),C.proxy=w,w.src=h,w.listener=C,h.addEventListener)he||(H=ce),H===void 0&&(H=!1),h.addEventListener(T.toString(),w,H);else if(h.attachEvent)h.attachEvent(Ro(T.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function wu(){function h(C){return T.call(h.src,h.listener,C)}const T=yf;return h}function Io(h,T,C,w,H){if(Array.isArray(T))for(var W=0;W<T.length;W++)Io(h,T[W],C,w,H);else w=m(w)?!!w.capture:!!w,C=bu(C),h&&h[ye]?(h=h.i,T=String(T).toString(),T in h.g&&(W=h.g[T],C=kt(W,C,w,H),-1<C&&(St(W[C]),Array.prototype.splice.call(W,C,1),W.length==0&&(delete h.g[T],h.h--)))):h&&(h=La(h))&&(T=h.g[T.toString()],h=-1,T&&(h=kt(T,C,w,H)),(C=-1<h?T[h]:null)&&Mr(C))}function Mr(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[ye])si(T.i,h);else{var C=h.type,w=h.proxy;T.removeEventListener?T.removeEventListener(C,w,h.capture):T.detachEvent?T.detachEvent(Ro(C),w):T.addListener&&T.removeListener&&T.removeListener(w),(C=La(T))?(si(C,h),C.h==0&&(C.src=null,T[sn]=null)):St(h)}}}function Ro(h){return h in Nn?Nn[h]:Nn[h]="on"+h}function yf(h,T){if(h.da)h=!0;else{T=new Ae(T,this);var C=h.listener,w=h.ha||h.src;h.fa&&Mr(h),h=C.call(w,T)}return h}function La(h){return h=h[sn],h instanceof ii?h:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bu(h){return typeof h=="function"?h:(h[Yt]||(h[Yt]=function(T){return h.handleEvent(T)}),h[Yt])}function Vt(){j.call(this),this.i=new ii(this),this.M=this,this.F=null}U(Vt,j),Vt.prototype[ye]=!0,Vt.prototype.removeEventListener=function(h,T,C,w){Io(this,h,T,C,w)};function qt(h,T){var C,w=h.F;if(w)for(C=[];w;w=w.F)C.push(w);if(h=h.M,w=T.type||T,typeof T=="string")T=new oe(T,h);else if(T instanceof oe)T.target=T.target||h;else{var H=T;T=new oe(w,h),D(T,H)}if(H=!0,C)for(var W=C.length-1;0<=W;W--){var ce=T.g=C[W];H=Oi(ce,w,!0,T)&&H}if(ce=T.g=h,H=Oi(ce,w,!0,T)&&H,H=Oi(ce,w,!1,T)&&H,C)for(W=0;W<C.length;W++)ce=T.g=C[W],H=Oi(ce,w,!1,T)&&H}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var C=h.g[T],w=0;w<C.length;w++)St(C[w]);delete h.g[T],h.h--}}this.F=null},Vt.prototype.K=function(h,T,C,w){return this.i.add(String(h),T,!1,C,w)},Vt.prototype.L=function(h,T,C,w){return this.i.add(String(h),T,!0,C,w)};function Oi(h,T,C,w){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var H=!0,W=0;W<T.length;++W){var ce=T[W];if(ce&&!ce.da&&ce.capture==C){var We=ce.listener,wt=ce.ha||ce.src;ce.fa&&si(h.i,ce),H=We.call(wt,w)!==!1&&H}}return H&&!w.defaultPrevented}function Nu(h,T,C){if(typeof h=="function")C&&(h=S(h,C));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(h,T||0)}function Oa(h){h.g=Nu(()=>{h.g=null,h.i&&(h.i=!1,Oa(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class _f extends j{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Oa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(h){j.call(this),this.h=h,this.g={}}U(Dr,j);var Ts=[];function rn(h){de(h.g,function(T,C){this.g.hasOwnProperty(C)&&Mr(T)},h),h.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),rn(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=d.JSON.stringify,hn=d.JSON.parse,vf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function qa(){}qa.prototype.h=null;function xu(h){return h.h||(h.h=h.i())}function Pr(){}var gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Es(){oe.call(this,"d")}U(Es,oe);function ri(){oe.call(this,"c")}U(ri,oe);var zn={},Ss=null;function wo(){return Ss=Ss||new Vt}zn.La="serverreachability";function Ba(h){oe.call(this,zn.La,h)}U(Ba,oe);function qi(h){const T=wo();qt(T,new Ba(T))}zn.STAT_EVENT="statevent";function As(h,T){oe.call(this,zn.STAT_EVENT,h),this.stat=T}U(As,oe);function Kt(h){const T=wo();qt(T,new As(T,h))}zn.Ma="timingevent";function Fa(h,T){oe.call(this,zn.Ma,h),this.size=T}U(Fa,oe);function Cs(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},T)}function Is(){this.g=!0}Is.prototype.xa=function(){this.g=!1};function za(h,T,C,w,H,W){h.info(function(){if(h.g)if(W)for(var ce="",We=W.split("&"),wt=0;wt<We.length;wt++){var ke=We[wt].split("=");if(1<ke.length){var Ft=ke[0];ke=ke[1];var zt=Ft.split("_");ce=2<=zt.length&&zt[1]=="type"?ce+(Ft+"="+ke+"&"):ce+(Ft+"=redacted&")}}else ce=null;else ce=W;return"XMLHTTP REQ ("+w+") [attempt "+H+"]: "+T+`
`+C+`
`+ce})}function Ha(h,T,C,w,H,W,ce){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+H+"]: "+T+`
`+C+`
`+W+" "+ce})}function Bi(h,T,C,w){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+yi(h,C)+(w?" "+w:"")})}function Mu(h,T){h.info(function(){return"TIMEOUT: "+T})}Is.prototype.info=function(){};function yi(h,T){if(!h.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var w=C[h];if(!(2>w.length)){var H=w[1];if(Array.isArray(H)&&!(1>H.length)){var W=H[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ce=1;ce<H.length;ce++)H[ce]=""}}}}return Fn(C)}catch{return T}}var gt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_i;function Rs(){}U(Rs,qa),Rs.prototype.g=function(){return new XMLHttpRequest},Rs.prototype.i=function(){return{}},_i=new Rs;function vi(h,T,C,w){this.j=h,this.i=T,this.l=C,this.R=w||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Du}function Du(){this.i=null,this.g="",this.h=!1}var Ga={},Fi={};function kr(h,T,C){h.L=1,h.v=Lr(yt(T)),h.m=C,h.P=!0,zi(h,null)}function zi(h,T){h.F=Date.now(),oi(h),h.A=yt(h.v);var C=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Ji(C.i,"t",w),h.C=0,C=h.j.J,h.h=new Du,h.g=$u(h.j,C?T:null,!h.m),0<h.O&&(h.M=new _f(S(h.Y,h,h.g),h.O)),T=h.U,C=h.g,w=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(Ts[0]=H.toString()),H=Ts);for(var W=0;W<H.length;W++){var ce=xn(C,H[W],w||T.handleEvent,!1,T.h||T);if(!ce)break;T.g[ce.key]=ce}T=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),qi(),za(h.i,h.u,h.A,h.l,h.R,h.m)}vi.prototype.ca=function(h){h=h.target;const T=this.M;T&&gn(h)==3?T.j():this.Y(h)},vi.prototype.Y=function(h){try{if(h==this.g)e:{const zt=gn(this.g);var T=this.g.Ba();const qs=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Br(this.g)))){this.J||zt!=4||T==7||(T==8||0>=qs?qi(3):qi(2)),bo(this);var C=this.g.Z();this.X=C;t:if(Hi(this)){var w=Br(this.g);h="";var H=w.length,W=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),ws(this);var ce="";break t}this.h.i=new d.TextDecoder}for(T=0;T<H;T++)this.h.h=!0,h+=this.h.i.decode(w[T],{stream:!(W&&T==H-1)});w.length=0,this.h.g+=h,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=C==200,Ha(this.i,this.u,this.A,this.l,this.R,zt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var We,wt=this.g;if((We=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(We)){var ke=We;break t}}ke=null}if(C=ke)Bi(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ti(this,C);else{this.o=!1,this.s=3,Kt(12),pn(this),ws(this);break e}}if(this.P){C=!0;let En;for(;!this.J&&this.C<ce.length;)if(En=Vr(this,ce),En==Fi){zt==4&&(this.s=4,Kt(14),C=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Ga){this.s=4,Kt(15),Bi(this.i,this.l,ce,"[Invalid Chunk]"),C=!1;break}else Bi(this.i,this.l,En,null),Ti(this,En);if(Hi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||ce.length!=0||this.h.h||(this.s=1,Kt(16),C=!1),this.o=this.o&&C,!C)Bi(this.i,this.l,ce,"[Invalid Chunked Response]"),pn(this),ws(this);else if(0<ce.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),tl(Ft),Ft.M=!0,Kt(11))}}else Bi(this.i,this.l,ce,null),Ti(this,ce);zt==4&&pn(this),this.o&&!this.J&&(zt==4?Ju(this.j,this):(this.o=!1,oi(this)))}else qu(this.g),C==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),pn(this),ws(this)}}}catch{}finally{}};function Hi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Vr(h,T){var C=h.C,w=T.indexOf(`
`,C);return w==-1?Fi:(C=Number(T.substring(C,w)),isNaN(C)?Ga:(w+=1,w+C>T.length?Fi:(T=T.slice(w,w+C),h.C=w+C,T)))}vi.prototype.cancel=function(){this.J=!0,pn(this)};function oi(h){h.S=Date.now()+h.I,At(h,h.I)}function At(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Cs(S(h.ba,h),T)}function bo(h){h.B&&(d.clearTimeout(h.B),h.B=null)}vi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Mu(this.i,this.A),this.L!=2&&(qi(),Kt(17)),pn(this),this.s=2,ws(this)):At(this,this.S-h)};function ws(h){h.j.G==0||h.J||Ju(h.j,h)}function pn(h){bo(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,rn(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function Ti(h,T){try{var C=h.j;if(C.G!=0&&(C.g==h||bs(C.h,h))){if(!h.K&&bs(C.h,h)&&C.G==3){try{var w=C.Da.g.parse(T)}catch{w=null}if(Array.isArray(w)&&w.length==3){var H=w;if(H[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Ls(C),Us(C);else break e;el(C),Kt(18)}}else C.za=H[1],0<C.za-C.T&&37500>H[2]&&C.F&&C.v==0&&!C.C&&(C.C=Cs(S(C.Za,C),6e3));if(1>=Pu(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ki(C,11)}else if((h.K||C.g==h)&&Ls(C),!K(T))for(H=C.Da.g.parse(T),T=0;T<H.length;T++){let ke=H[T];if(C.T=ke[0],ke=ke[1],C.G==2)if(ke[0]=="c"){C.K=ke[1],C.ia=ke[2];const Ft=ke[3];Ft!=null&&(C.la=Ft,C.j.info("VER="+C.la));const zt=ke[4];zt!=null&&(C.Aa=zt,C.j.info("SVER="+C.Aa));const qs=ke[5];qs!=null&&typeof qs=="number"&&0<qs&&(w=1.5*qs,C.L=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const En=h.g;if(En){const Hr=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var W=w.h;W.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ns(W,W.h),W.h=null))}if(w.D){const $i=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;$i&&(w.ya=$i,Ye(w.I,w.D,$i))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),w=C;var ce=h;if(w.qa=Ku(w,w.J?w.ia:null,w.W),ce.K){Hn(w.h,ce);var We=ce,wt=w.L;wt&&(We.I=wt),We.B&&(bo(We),oi(We)),w.g=ce}else Hu(w);0<C.i.length&&Uo(C)}else ke[0]!="stop"&&ke[0]!="close"||Ki(C,7);else C.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Ki(C,7):Za(C):ke[0]!="noop"&&C.l&&C.l.ta(ke),C.v=0)}}qi(4)}catch{}}var Tf=class{constructor(h,T){this.g=h,this.map=T}};function Ja(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ya(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pu(h){return h.h?1:h.g?h.g.size:0}function bs(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function Ns(h,T){h.g?h.g.add(T):h.h=T}function Hn(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}Ja.prototype.cancel=function(){if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function mn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const C of h.g.values())T=T.concat(C.D);return T}return B(h.i)}function ku(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var T=[],C=h.length,w=0;w<C;w++)T.push(h[w]);return T}T=[],C=0;for(w in h)T[C++]=h[w];return T}function Ef(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var T=[];h=h.length;for(var C=0;C<h;C++)T.push(C);return T}T=[],C=0;for(const w in h)T[C++]=w;return T}}}function No(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var C=Ef(h),w=ku(h),H=w.length,W=0;W<H;W++)T.call(void 0,w[W],C&&C[W],h)}var Ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xo(h,T){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var w=h[C].indexOf("="),H=null;if(0<=w){var W=h[C].substring(0,w);H=h[C].substring(w+1)}else W=h[C];T(W,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Gi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Gi){this.h=h.h,xs(this,h.j),this.o=h.o,this.g=h.g,Ur(this,h.s),this.l=h.l;var T=h.i,C=new Ei;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Mo(this,C),this.m=h.m}else h&&(T=String(h).match(Ka))?(this.h=!1,xs(this,T[1]||"",!0),this.o=Ms(T[2]||""),this.g=Ms(T[3]||"",!0),Ur(this,T[4]),this.l=Ms(T[5]||"",!0),Mo(this,T[6]||"",!0),this.m=Ms(T[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}Gi.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Gn(T,$a,!0),":");var C=this.g;return(C||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Gn(T,$a,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Gn(C,C.charAt(0)=="/"?Qa:Vu,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Gn(C,Cf)),h.join("")};function yt(h){return new Gi(h)}function xs(h,T,C){h.j=C?Ms(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function Ur(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Mo(h,T,C){T instanceof Ei?(h.i=T,Uu(h.i,h.h)):(C||(T=Gn(T,Af)),h.i=new Ei(T,h.h))}function Ye(h,T,C){h.i.set(T,C)}function Lr(h){return Ye(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ms(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gn(h,T,C){return typeof h=="string"?(h=encodeURI(h).replace(T,Sf),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Sf(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $a=/[#\/\?@]/g,Vu=/[#\?:]/g,Qa=/[#\?]/g,Af=/[#\?@]/g,Cf=/#/g;function Ei(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function Bt(h){h.g||(h.g=new Map,h.h=0,h.i&&xo(h.i,function(T,C){h.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Ei.prototype,n.add=function(h,T){Bt(this),this.i=null,h=Mn(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(T),this.h+=1,this};function Do(h,T){Bt(h),T=Mn(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function Po(h,T){return Bt(h),T=Mn(h,T),h.g.has(T)}n.forEach=function(h,T){Bt(this),this.g.forEach(function(C,w){C.forEach(function(H){h.call(T,H,w,this)},this)},this)},n.na=function(){Bt(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let w=0;w<T.length;w++){const H=h[w];for(let W=0;W<H.length;W++)C.push(T[w])}return C},n.V=function(h){Bt(this);let T=[];if(typeof h=="string")Po(this,h)&&(T=T.concat(this.g.get(Mn(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)T=T.concat(h[C])}return T},n.set=function(h,T){return Bt(this),this.i=null,h=Mn(this,h),Po(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},n.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function Ji(h,T,C){Do(h,T),0<C.length&&(h.i=null,h.g.set(Mn(h,T),B(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var w=T[C];const W=encodeURIComponent(String(w)),ce=this.V(w);for(w=0;w<ce.length;w++){var H=W;ce[w]!==""&&(H+="="+encodeURIComponent(String(ce[w]))),h.push(H)}}return this.i=h.join("&")};function Mn(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function Uu(h,T){T&&!h.j&&(Bt(h),h.i=null,h.g.forEach(function(C,w){var H=w.toLowerCase();w!=H&&(Do(this,w),Ji(this,H,C))},h)),h.j=T}function Xa(h,T){const C=new Is;if(d.Image){const w=new Image;w.onload=b(Tn,C,"TestLoadImage: loaded",!0,T,w),w.onerror=b(Tn,C,"TestLoadImage: error",!1,T,w),w.onabort=b(Tn,C,"TestLoadImage: abort",!1,T,w),w.ontimeout=b(Tn,C,"TestLoadImage: timeout",!1,T,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else T(!1)}function Lu(h,T){const C=new Is,w=new AbortController,H=setTimeout(()=>{w.abort(),Tn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:w.signal}).then(W=>{clearTimeout(H),W.ok?Tn(C,"TestPingServer: ok",!0,T):Tn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),Tn(C,"TestPingServer: error",!1,T)})}function Tn(h,T,C,w,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),w(C)}catch{}}function ai(){this.g=new vf}function Wa(h,T,C){const w=C||"";try{No(h,function(H,W){let ce=H;m(H)&&(ce=Fn(H)),T.push(w+W+"="+encodeURIComponent(ce))})}catch(H){throw T.push(w+"type="+encodeURIComponent("_badmap")),H}}function Si(h){this.l=h.Ub||null,this.j=h.eb||!1}U(Si,qa),Si.prototype.g=function(){return new Dn(this.l,this.j)},Si.prototype.i=(function(h){return function(){return h}})({});function Dn(h,T){Vt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Dn,Vt),n=Dn.prototype,n.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,Ds(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ds(this)),this.g&&(this.readyState=3,Ds(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ko(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ko(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?Ai(this):Ds(this),this.readyState==3&&ko(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ai(this))},n.Qa=function(h){this.g&&(this.response=h,Ai(this))},n.ga=function(){this.g&&Ai(this)};function Ai(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ds(h)}n.setRequestHeader=function(h,T){this.u.append(h,T)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=T.next();return h.join(`\r
`)};function Ds(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Or(h){let T="";return de(h,function(C,w){T+=w,T+=":",T+=C,T+=`\r
`}),T}function Ps(h,T,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Or(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):Ye(h,T,C))}function at(h){Vt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(at,Vt);var on=/^https?$/i,Yi=["POST","PUT"];n=at.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,T,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_i.g(),this.v=this.o?xu(this.o):xu(_i),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(W){qr(this,W);return}if(h=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var H in w)C.set(H,w[H]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())C.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(W=>W.toLowerCase()=="content-type"),H=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Yi,T,void 0))||w||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ce]of C)this.g.setRequestHeader(W,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vo(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){qr(this,W)}};function qr(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,ks(h),Vs(h)}function ks(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,qt(this,"complete"),qt(this,"abort"),Vs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vs(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ou(this):this.bb())},n.bb=function(){Ou(this)};function Ou(h){if(h.h&&typeof u<"u"&&(!h.v[1]||gn(h)!=4||h.Z()!=2)){if(h.u&&gn(h)==4)Nu(h.Ea,0,h);else if(qt(h,"readystatechange"),gn(h)==4){h.h=!1;try{const ce=h.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var w;if(w=ce===0){var H=String(h.D).match(Ka)[1]||null;!H&&d.self&&d.self.location&&(H=d.self.location.protocol.slice(0,-1)),w=!on.test(H?H.toLowerCase():"")}C=w}if(C)qt(h,"complete"),qt(h,"success");else{h.m=6;try{var W=2<gn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",ks(h)}}finally{Vs(h)}}}}function Vs(h,T){if(h.g){Vo(h);const C=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||qt(h,"ready");try{C.onreadystatechange=w}catch{}}}function Vo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function gn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),hn(T)}};function Br(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function qu(h){const T={};h=(h.g&&2<=gn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(K(h[w]))continue;var C=V(h[w]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const W=T[H]||[];T[H]=W,W.push(C)}M(T,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(h,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||T}function Bu(h){this.Aa=0,this.i=[],this.j=new Is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fr("baseRetryDelayMs",5e3,h),this.cb=Fr("retryDelaySeedMs",1e4,h),this.Wa=Fr("forwardChannelMaxRetries",2,h),this.wa=Fr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ja(h&&h.concurrentRequestLimit),this.Da=new ai,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Bu.prototype,n.la=8,n.G=1,n.connect=function(h,T,C,w){Kt(0),this.W=h,this.H=T||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.I=Ku(this,null,this.W),Uo(this)};function Za(h){if(Fu(h),h.G==3){var T=h.U++,C=yt(h.I);if(Ye(C,"SID",h.K),Ye(C,"RID",T),Ye(C,"TYPE","terminate"),zr(h,C),T=new vi(h,h.j,T),T.L=2,T.v=Lr(yt(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=$u(T.j,null),T.g.ea(T.v)),T.F=Date.now(),oi(T)}nl(h)}function Us(h){h.g&&(tl(h),h.g.cancel(),h.g=null)}function Fu(h){Us(h),h.u&&(d.clearTimeout(h.u),h.u=null),Ls(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Uo(h){if(!Ya(h.h)&&!h.s){h.s=!0;var T=h.Ga;ae||Je(),_e||(ae(),_e=!0),ze.add(T,h),h.B=0}}function If(h,T){return Pu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Cs(S(h.Ga,h,T),Yu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new vi(this,this.j,h);let W=this.o;if(this.S&&(W?(W=N(W),D(W,this.S)):W=this.S),this.m!==null||this.O||(H.H=W,W=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(T+=w,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=ja(this,H,T),C=yt(this.I),Ye(C,"RID",h),Ye(C,"CVER",22),this.D&&Ye(C,"X-HTTP-Session-Id",this.D),zr(this,C),W&&(this.O?T="headers="+encodeURIComponent(String(Or(W)))+"&"+T:this.m&&Ps(C,this.m,W)),Ns(this.h,H),this.Ua&&Ye(C,"TYPE","init"),this.P?(Ye(C,"$req",T),Ye(C,"SID","null"),H.T=!0,kr(H,C,null)):kr(H,C,T),this.G=2}}else this.G==3&&(h?zu(this,h):this.i.length==0||Ya(this.h)||zu(this))};function zu(h,T){var C;T?C=T.l:C=h.U++;const w=yt(h.I);Ye(w,"SID",h.K),Ye(w,"RID",C),Ye(w,"AID",h.T),zr(h,w),h.m&&h.o&&Ps(w,h.m,h.o),C=new vi(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),T&&(h.i=T.D.concat(h.i)),T=ja(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ns(h.h,C),kr(C,w,T)}function zr(h,T){h.H&&de(h.H,function(C,w){Ye(T,w,C)}),h.l&&No({},function(C,w){Ye(T,w,C)})}function ja(h,T,C){C=Math.min(h.i.length,C);var w=h.l?S(h.l.Na,h.l,h):null;e:{var H=h.i;let W=-1;for(;;){const ce=["count="+C];W==-1?0<C?(W=H[0].g,ce.push("ofs="+W)):W=0:ce.push("ofs="+W);let We=!0;for(let wt=0;wt<C;wt++){let ke=H[wt].g;const Ft=H[wt].map;if(ke-=W,0>ke)W=Math.max(0,H[wt].g-100),We=!1;else try{Wa(Ft,ce,"req"+ke+"_")}catch{w&&w(Ft)}}if(We){w=ce.join("&");break e}}}return h=h.i.splice(0,C),T.D=h,w}function Hu(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;ae||Je(),_e||(ae(),_e=!0),ze.add(T,h),h.v=0}}function el(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Cs(S(h.Fa,h),Yu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Cs(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),Us(this),Gu(this))};function tl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Gu(h){h.g=new vi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=yt(h.qa);Ye(T,"RID","rpc"),Ye(T,"SID",h.K),Ye(T,"AID",h.T),Ye(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ye(T,"TO",h.ja),Ye(T,"TYPE","xmlhttp"),zr(h,T),h.m&&h.o&&Ps(T,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Lr(yt(T)),C.m=null,C.P=!0,zi(C,h)}n.Za=function(){this.C!=null&&(this.C=null,Us(this),el(this),Kt(19))};function Ls(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Ju(h,T){var C=null;if(h.g==T){Ls(h),tl(h),h.g=null;var w=2}else if(bs(h.h,T))C=T.D,Hn(h.h,T),w=1;else return;if(h.G!=0){if(T.o)if(w==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var H=h.B;w=wo(),qt(w,new Fa(w,C)),Uo(h)}else Hu(h);else if(H=T.s,H==3||H==0&&0<T.X||!(w==1&&If(h,T)||w==2&&el(h)))switch(C&&0<C.length&&(T=h.h,T.i=T.i.concat(C)),H){case 1:Ki(h,5);break;case 4:Ki(h,10);break;case 3:Ki(h,6);break;default:Ki(h,2)}}}function Yu(h,T){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*T}function Ki(h,T){if(h.j.info("Error code "+T),T==2){var C=S(h.fb,h),w=h.Xa;const H=!w;w=new Gi(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||xs(w,"https"),Lr(w),H?Xa(w.toString(),C):Lu(w.toString(),C)}else Kt(2);h.G=0,h.l&&h.l.sa(T),nl(h),Fu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function nl(h){if(h.G=0,h.ka=[],h.l){const T=mn(h.h);(T.length!=0||h.i.length!=0)&&(G(h.ka,T),G(h.ka,h.i),h.h.i.length=0,B(h.i),h.i.length=0),h.l.ra()}}function Ku(h,T,C){var w=C instanceof Gi?yt(C):new Gi(C);if(w.g!="")T&&(w.g=T+"."+w.g),Ur(w,w.s);else{var H=d.location;w=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;var W=new Gi(null);w&&xs(W,w),T&&(W.g=T),H&&Ur(W,H),C&&(W.l=C),w=W}return C=h.D,T=h.ya,C&&T&&Ye(w,C,T),Ye(w,"VER",h.la),zr(h,w),w}function $u(h,T,C){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new at(new Si({eb:C})):new at(h.pa),T.Ha(h.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qu(){}n=Qu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lo(){}Lo.prototype.g=function(h,T){return new yn(h,T)};function yn(h,T){Vt.call(this),this.g=new Bu(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!K(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!K(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new Os(this)}U(yn,Vt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Za(this.g)},yn.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Fn(h),h=C);T.i.push(new Tf(T.Ya++,h)),T.G==3&&Uo(T)},yn.prototype.N=function(){this.g.l=null,delete this.j,Za(this.g),delete this.g,yn.aa.N.call(this)};function Xu(h){Es.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const C in T){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}U(Xu,Es);function Wu(){ri.call(this),this.status=1}U(Wu,ri);function Os(h){this.g=h}U(Os,Qu),Os.prototype.ua=function(){qt(this.g,"a")},Os.prototype.ta=function(h){qt(this.g,new Xu(h))},Os.prototype.sa=function(h){qt(this.g,new Wu)},Os.prototype.ra=function(){qt(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,zA=function(){return new Lo},FA=function(){return wo()},BA=zn,sm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,md=gt,$t.COMPLETE="complete",qA=$t,Pr.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Gl=Pr,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,OA=at}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});const i0="@firebase/firestore",s0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new Nm("@firebase/firestore");function fa(){return yo.logLevel}function fe(n,...e){if(yo.logLevel<=Be.DEBUG){const t=e.map($m);yo.debug(`Firestore (${Pa}): ${n}`,...t)}}function ys(n,...e){if(yo.logLevel<=Be.ERROR){const t=e.map($m);yo.error(`Firestore (${Pa}): ${n}`,...t)}}function vr(n,...e){if(yo.logLevel<=Be.WARN){const t=e.map($m);yo.warn(`Firestore (${Pa}): ${n}`,...t)}}function $m(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,HA(n,s,t)}function HA(n,e,t){let s=`FIRESTORE (${Pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ys(s),new Error(s)}function Ze(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||HA(e,o,s)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class uU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class cU{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new yr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new yr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new GA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class dU{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fU{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new dU(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class r0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hU{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const s=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new r0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new r0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=pU(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ve(n,e){return n<e?-1:n>e?1:0}function rm(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Ve(s,o);{const l=JA(),u=mU(l.encode(o0(n,t)),l.encode(o0(e,t)));return u!==0?u:Ve(s,o)}}t+=s>65535?2:1}return Ve(n.length,e.length)}function o0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function Ca(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="__name__";class bi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Re(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=bi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const s=bi.isNumericId(e),o=bi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?bi.extractNumericId(e).compare(bi.extractNumericId(t)):rm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gr.fromString(e.substring(4,e.length-2))}}class pt extends bi{construct(e,t,s){return new pt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const gU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends bi{construct(e,t,s){return new en(e,t,s)}static isValidIdentifier(e){return gU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===a0}static keyField(){return new en([a0])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ve(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ve(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ve(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(s+=d,o++):(l(),o++)}if(l(),u)throw new ve(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(pt.fromString(e))}static fromName(e){return new Ee(pt.fromString(e).popFirst(5))}static empty(){return new Ee(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(n,e,t){if(!t)throw new ve(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _U(n,e,t,s){if(e===!0&&s===!0)throw new ve(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function l0(n){if(!Ee.isDocumentKey(n))throw new ve(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function au(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xm(n);throw new ve(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Su(n,e){if(!YA(n))throw new ve(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(o&&typeof u!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ve(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=-62135596800,c0=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*c0);return new dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<u0)throw new ve(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c0}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-u0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Pt("string",dt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new dt(0,0))}static max(){return new we(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=-1;function vU(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=we.fromTimestamp(s===1e9?new dt(t+1,0):new dt(t,s));return new Tr(o,Ee.empty(),e)}function TU(n){return new Tr(n.readTime,n.key,lu)}class Tr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Tr(we.min(),Ee.empty(),lu)}static max(){return new Tr(we.max(),Ee.empty(),lu)}}function EU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==SU)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let o=0,l=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++l,u&&l===o&&t()}),(p=>s(p)))})),u=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((o=>o?se.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,o)=>{const l=e.length,u=new Array(l);let d=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++d,d===l&&s(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function CU(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Va(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}tf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function nf(n){return n==null}function Pd(n){return n===0&&1/n==-1/0}function IU(n){return typeof n=="number"&&Number.isInteger(n)&&!Pd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="";function RU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=d0(e)),e=wU(n.get(t),e);return d0(e)}function wU(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case KA:t+="";break;default:t+=l}}return t}function d0(n){return n+KA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Eo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $A(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??jt.RED,this.left=o??jt.EMPTY,this.right=l??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new jt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h0(this.data.getIterator())}getIteratorFrom(e){return new h0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class h0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new hi([])}unionWith(e){let t=new Ot(en.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new QA("Invalid base64 string: "+l):l}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return l})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const bU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=bU.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Sr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="server_timestamp",WA="__type__",ZA="__previous_value__",jA="__local_write_time__";function Zm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[WA])===null||t===void 0?void 0:t.stringValue)===XA}function sf(n){const e=n.mapValue.fields[ZA];return Zm(e)?sf(e):e}function uu(n){const e=Er(n.mapValue.fields[jA].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e,t,s,o,l,u,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const kd="(default)";class cu{constructor(e,t){this.projectId=e,this.database=t||kd}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="__type__",xU="__max__",od={mapValue:{}},tC="__vector__",Vd="value";function Ar(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zm(n)?4:DU(n)?9007199254740991:MU(n)?10:11:Re(28295,{value:n})}function Vi(n,e){if(n===e)return!0;const t=Ar(n);if(t!==Ar(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uu(n).isEqual(uu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const u=Er(o.timestampValue),d=Er(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Sr(o.bytesValue).isEqual(Sr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Rt(o.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Rt(o.integerValue)===Rt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const u=Rt(o.doubleValue),d=Rt(l.doubleValue);return u===d?Pd(u)===Pd(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ca(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(o,l){const u=o.mapValue.fields||{},d=l.mapValue.fields||{};if(f0(u)!==f0(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Vi(u[p],d[p])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function du(n,e){return(n.values||[]).find((t=>Vi(t,e)))!==void 0}function Ia(n,e){if(n===e)return 0;const t=Ar(n),s=Ar(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=Rt(l.integerValue||l.doubleValue),p=Rt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return p0(n.timestampValue,e.timestampValue);case 4:return p0(uu(n),uu(e));case 5:return rm(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=Sr(l),p=Sr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),p=u.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Ve(d[m],p[m]);if(v!==0)return v}return Ve(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Ve(Rt(l.latitude),Rt(u.latitude));return d!==0?d:Ve(Rt(l.longitude),Rt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return m0(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var d,p,m,v;const E=l.fields||{},S=u.fields||{},b=(d=E[Vd])===null||d===void 0?void 0:d.arrayValue,U=(p=S[Vd])===null||p===void 0?void 0:p.arrayValue,B=Ve(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((v=U==null?void 0:U.values)===null||v===void 0?void 0:v.length)||0);return B!==0?B:m0(b,U)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===od.mapValue&&u===od.mapValue)return 0;if(l===od.mapValue)return 1;if(u===od.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=rm(p[E],v[E]);if(S!==0)return S;const b=Ia(d[p[E]],m[v[E]]);if(b!==0)return b}return Ve(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{le:t})}}function p0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=Er(n),s=Er(e),o=Ve(t.seconds,s.seconds);return o!==0?o:Ve(t.nanos,s.nanos)}function m0(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ia(t[o],s[o]);if(l)return l}return Ve(t.length,s.length)}function Ra(n){return om(n)}function om(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Er(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Sr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=om(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const u of s)l?l=!1:o+=",",o+=`${u}:${om(t.fields[u])}`;return o+"}"})(n.mapValue):Re(61005,{value:n})}function gd(n){switch(Ar(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sf(n);return e?16+gd(e):16;case 5:return 2*n.stringValue.length;case 6:return Sr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+gd(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return Eo(s.fields,((l,u)=>{o+=l.length+gd(u)})),o})(n.mapValue);default:throw Re(13486,{value:n})}}function am(n){return!!n&&"integerValue"in n}function jm(n){return!!n&&"arrayValue"in n}function g0(n){return!!n&&"nullValue"in n}function y0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yd(n){return!!n&&"mapValue"in n}function MU(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[eC])===null||t===void 0?void 0:t.stringValue)===tC}function jl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Eo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=jl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(t)}setAll(e){let t=en.emptyPath(),s={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}u?s[d.lastSegment()]=jl(u):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];yd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Eo(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new jn(jl(this.value))}}function nC(n){const e=[];return Eo(n.fields,((t,s)=>{const o=new en([t]);if(yd(s)){const l=nC(s.mapValue).fields;if(l.length===0)e.push(o);else for(const u of l)e.push(o.child(u))}else e.push(o)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,s,o,l,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new cn(e,0,we.min(),we.min(),we.min(),jn.empty(),0)}static newFoundDocument(e,t,s,o){return new cn(e,1,t,we.min(),s,o,0)}static newNoDocument(e,t){return new cn(e,2,t,we.min(),we.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,we.min(),we.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t){this.position=e,this.inclusive=t}}function _0(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],u=n.position[o];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(u.referenceValue),t.key):s=Ia(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function v0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function PU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{}class Lt extends iC{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new VU(e,t,s):t==="array-contains"?new OU(e,s):t==="in"?new qU(e,s):t==="not-in"?new BU(e,s):t==="array-contains-any"?new FU(e,s):new Lt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new UU(e,s):new LU(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ia(t,this.value)):t!==null&&Ar(this.value)===Ar(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends iC{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ui(e,t)}matches(e){return sC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function sC(n){return n.op==="and"}function rC(n){return kU(n)&&sC(n)}function kU(n){for(const e of n.filters)if(e instanceof Ui)return!1;return!0}function lm(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Ra(n.value);if(rC(n))return n.filters.map((e=>lm(e))).join(",");{const e=n.filters.map((t=>lm(t))).join(",");return`${n.op}(${e})`}}function oC(n,e){return n instanceof Lt?(function(s,o){return o instanceof Lt&&s.op===o.op&&s.field.isEqual(o.field)&&Vi(s.value,o.value)})(n,e):n instanceof Ui?(function(s,o){return o instanceof Ui&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,u,d)=>l&&oC(u,o.filters[d])),!0):!1})(n,e):void Re(19439)}function aC(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ra(t.value)}`})(n):n instanceof Ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(aC).join(" ,")+"}"})(n):"Filter"}class VU extends Lt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class UU extends Lt{constructor(e,t){super(e,"in",t),this.keys=lC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class LU extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=lC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Ee.fromName(s.referenceValue)))}class OU extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jm(t)&&du(t.arrayValue,this.value)}}class qU extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&du(this.value.arrayValue,t)}}class BU extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!du(this.value.arrayValue,t)}}class FU extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>du(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,t=null,s=[],o=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=u,this.endAt=d,this.Pe=null}}function T0(n,e=null,t=[],s=[],o=null,l=null,u=null){return new zU(n,e,t,s,o,l,u)}function eg(n){const e=Ne(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>lm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ra(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ra(s))).join(",")),e.Pe=t}return e.Pe}function tg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!v0(n.startAt,e.startAt)&&v0(n.endAt,e.endAt)}function um(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t=null,s=[],o=[],l=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function HU(n,e,t,s,o,l,u,d){return new rf(n,e,t,s,o,l,u,d)}function ng(n){return new rf(n)}function E0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GU(n){return n.collectionGroup!==null}function eu(n){const e=Ne(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(en.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Ld(l,s))})),t.has(en.keyField().canonicalString())||e.Te.push(new Ld(en.keyField(),s))}return e.Te}function Mi(n){const e=Ne(n);return e.Ie||(e.Ie=JU(e,eu(n))),e.Ie}function JU(n,e){if(n.limitType==="F")return T0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ld(o.field,l)}));const t=n.endAt?new Ud(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ud(n.startAt.position,n.startAt.inclusive):null;return T0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function cm(n,e,t){return new rf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function of(n,e){return tg(Mi(n),Mi(e))&&n.limitType===e.limitType}function uC(n){return`${eg(Mi(n))}|lt:${n.limitType}`}function ha(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>aC(o))).join(", ")}]`),nf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Ra(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Ra(o))).join(",")),`Target(${s})`})(Mi(n))}; limitType=${n.limitType})`}function af(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of eu(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(u,d,p){const m=_0(u,d,p);return u.inclusive?m<=0:m<0})(s.startAt,eu(s),o)||s.endAt&&!(function(u,d,p){const m=_0(u,d,p);return u.inclusive?m>=0:m>0})(s.endAt,eu(s),o))})(n,e)}function YU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cC(n){return(e,t)=>{let s=!1;for(const o of eu(n)){const l=KU(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function KU(n,e,t){const s=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,u,d){const p=u.data.field(l),m=d.data.field(l);return p!==null&&m!==null?Ia(p,m):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return $A(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=new mt(Ee.comparator);function _s(){return $U}const dC=new mt(Ee.comparator);function Jl(...n){let e=dC;for(const t of n)e=e.insert(t.key,t);return e}function fC(n){let e=dC;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ao(){return tu()}function hC(){return tu()}function tu(){return new So((n=>n.toString()),((n,e)=>n.isEqual(e)))}const QU=new mt(Ee.comparator),XU=new Ot(Ee.comparator);function Fe(...n){let e=XU;for(const t of n)e=e.add(t);return e}const WU=new Ot(Ve);function ZU(){return WU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(e)?"-0":e}}function pC(n){return{integerValue:""+n}}function jU(n,e){return IU(e)?pC(e):ig(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this._=void 0}}function eL(n,e,t){return n instanceof Od?(function(o,l){const u={fields:{[WA]:{stringValue:XA},[jA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Zm(l)&&(l=sf(l)),l&&(u.fields[ZA]=l),{mapValue:u}})(t,e):n instanceof fu?gC(n,e):n instanceof hu?yC(n,e):(function(o,l){const u=mC(o,l),d=S0(u)+S0(o.Ee);return am(u)&&am(o.Ee)?pC(d):ig(o.serializer,d)})(n,e)}function tL(n,e,t){return n instanceof fu?gC(n,e):n instanceof hu?yC(n,e):t}function mC(n,e){return n instanceof qd?(function(s){return am(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Od extends lf{}class fu extends lf{constructor(e){super(),this.elements=e}}function gC(n,e){const t=_C(e);for(const s of n.elements)t.some((o=>Vi(o,s)))||t.push(s);return{arrayValue:{values:t}}}class hu extends lf{constructor(e){super(),this.elements=e}}function yC(n,e){let t=_C(e);for(const s of n.elements)t=t.filter((o=>!Vi(o,s)));return{arrayValue:{values:t}}}class qd extends lf{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function S0(n){return Rt(n.integerValue||n.doubleValue)}function _C(n){return jm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nL(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof fu&&o instanceof fu||s instanceof hu&&o instanceof hu?Ca(s.elements,o.elements,Vi):s instanceof qd&&o instanceof qd?Vi(s.Ee,o.Ee):s instanceof Od&&o instanceof Od})(n.transform,e.transform)}class iL{constructor(e,t){this.version=e,this.transformResults=t}}class ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class uf{}function vC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new EC(n.key,ps.none()):new Au(n.key,n.data,ps.none());{const t=n.data,s=jn.empty();let o=new Ot(en.comparator);for(let l of e.fields)if(!o.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),o=o.add(l)}return new Ao(n.key,s,new hi(o.toArray()),ps.none())}}function sL(n,e,t){n instanceof Au?(function(o,l,u){const d=o.value.clone(),p=C0(o.fieldTransforms,l,u.transformResults);d.setAll(p),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ao?(function(o,l,u){if(!_d(o.precondition,l))return void l.convertToUnknownDocument(u.version);const d=C0(o.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(TC(o)),p.setAll(d),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function nu(n,e,t,s){return n instanceof Au?(function(l,u,d,p){if(!_d(l.precondition,u))return d;const m=l.value.clone(),v=I0(l.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof Ao?(function(l,u,d,p){if(!_d(l.precondition,u))return d;const m=I0(l.fieldTransforms,p,u),v=u.data;return v.setAll(TC(l)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,u,d){return _d(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function rL(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=mC(s.transform,o||null);l!=null&&(t===null&&(t=jn.empty()),t.set(s.field,l))}return t||null}function A0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ca(s,o,((l,u)=>nL(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Au extends uf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ao extends uf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function TC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function C0(n,e,t){const s=new Map;Ze(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],u=l.transform,d=e.data.field(l.field);s.set(l.field,tL(u,d,t[o]))}return s}function I0(n,e,t){const s=new Map;for(const o of n){const l=o.transform,u=t.data.field(o.field);s.set(o.field,eL(l,u,e))}return s}class EC extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oL extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&sL(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=nu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=nu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=hC();return this.mutations.forEach((o=>{const l=e.get(o.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(o.key)?null:d;const p=vC(u,d);p!==null&&s.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,((t,s)=>A0(t,s)))&&Ca(this.baseMutations,e.baseMutations,((t,s)=>A0(t,s)))}}class sg{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ze(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=(function(){return QU})();const l=e.mutations;for(let u=0;u<l.length;u++)o=o.insert(l[u].key,s[u].version);return new sg(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Ge;function cL(n){switch(n){case re.OK:return Re(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function SC(n){if(n===void 0)return ys("GRPC error has no .code"),re.UNKNOWN;switch(n){case Dt.OK:return re.OK;case Dt.CANCELLED:return re.CANCELLED;case Dt.UNKNOWN:return re.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return re.INTERNAL;case Dt.UNAVAILABLE:return re.UNAVAILABLE;case Dt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Dt.NOT_FOUND:return re.NOT_FOUND;case Dt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Dt.ABORTED:return re.ABORTED;case Dt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Dt.DATA_LOSS:return re.DATA_LOSS;default:return Re(39323,{code:n})}}(Ge=Dt||(Dt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=new gr([4294967295,4294967295],0);function R0(n){const e=JA().encode(n),t=new LA;return t.update(e),new Uint8Array(t.digest())}function w0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new gr([t,s],0),new gr([o,l],0)]}class rg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Yl(`Invalid padding: ${t}`);if(s<0)throw new Yl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=gr.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(gr.fromNumber(s)));return o.compare(dL)===1&&(o=new gr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=R0(e),[s,o]=w0(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(s,o,l);if(!this.ye(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new rg(l,o,t);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=R0(e),[s,o]=w0(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(s,o,l);this.we(u)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new cf(we.min(),o,new mt(Ve),_s(),Fe())}}class Cu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Cu(s,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class AC{constructor(e,t){this.targetId=e,this.De=t}}class CC{constructor(e,t,s=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class b0{constructor(){this.ve=0,this.Ce=N0(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Fe(),t=Fe(),s=Fe();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Re(38017,{changeType:l})}})),new Cu(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=N0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class fL{constructor(e){this.We=e,this.Ge=new Map,this.ze=_s(),this.je=ad(),this.Je=ad(),this.He=new mt(Ve)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(um(l))if(s===0){const u=new Ee(l.path);this.Xe(t,u,cn.newNoDocument(u,we.min()))}else Ze(s===1,20013,{expectedCount:s});else{const u=this.ot(t);if(u!==s){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let u,d;try{u=Sr(s).toUint8Array()}catch(p){if(p instanceof QA)return vr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new rg(u,o,l)}catch(p){return vr(p instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,u)=>{const d=this.st(u);if(d){if(l.current&&um(d.target)){const p=new Ee(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,cn.newNoDocument(p,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}}));let s=Fe();this.Je.forEach(((l,u)=>{let d=!0;u.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.ze.forEach(((l,u)=>u.setReadTime(e)));const o=new cf(e,t,this.He,this.ze,s);return this.ze=_s(),this.je=ad(),this.Je=ad(),this.He=new mt(Ve),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new b0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ot(Ve),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ot(Ve),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new b0),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ad(){return new mt(Ee.comparator)}function N0(){return new mt(Ee.comparator)}const hL={asc:"ASCENDING",desc:"DESCENDING"},pL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mL={and:"AND",or:"OR"};class gL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dm(n,e){return n.useProto3Json||nf(e)?e:{value:e}}function Bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yL(n,e){return Bd(n,e.toTimestamp())}function Di(n){return Ze(!!n,49232),we.fromTimestamp((function(t){const s=Er(t);return new dt(s.seconds,s.nanos)})(n))}function og(n,e){return fm(n,e).canonicalString()}function fm(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function RC(n){const e=pt.fromString(n);return Ze(MC(e),10190,{key:e.toString()}),e}function hm(n,e){return og(n.databaseId,e.path)}function Vp(n,e){const t=RC(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(bC(t))}function wC(n,e){return og(n.databaseId,e)}function _L(n){const e=RC(n);return e.length===4?pt.emptyPath():bC(e)}function pm(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bC(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function x0(n,e,t){return{name:hm(n,e),fields:t.value.mapValue.fields}}function vL(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Ze(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(Ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?re.UNKNOWN:SC(m.code);return new ve(v,m.message||"")})(u);t=new CC(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Vp(n,s.document.name),l=Di(s.document.updateTime),u=s.document.createTime?Di(s.document.createTime):we.min(),d=new jn({mapValue:{fields:s.document.fields}}),p=cn.newFoundDocument(o,l,u,d),m=s.targetIds||[],v=s.removedTargetIds||[];t=new vd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Vp(n,s.document),l=s.readTime?Di(s.readTime):we.min(),u=cn.newNoDocument(o,l),d=s.removedTargetIds||[];t=new vd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Vp(n,s.document),l=s.removedTargetIds||[];t=new vd([],l,o,null)}else{if(!("filter"in e))return Re(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,u=new uL(o,l),d=s.targetId;t=new AC(d,u)}}return t}function TL(n,e){let t;if(e instanceof Au)t={update:x0(n,e.key,e.value)};else if(e instanceof EC)t={delete:hm(n,e.key)};else if(e instanceof Ao)t={update:x0(n,e.key,e.data),updateMask:NL(e.fieldMask)};else{if(!(e instanceof oL))return Re(16599,{Rt:e.type});t={verify:hm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const d=u.transform;if(d instanceof Od)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof fu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof hu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof qd)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Re(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:yL(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)})(n,e.precondition)),t}function EL(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map((t=>(function(o,l){let u=o.updateTime?Di(o.updateTime):Di(l);return u.isEqual(we.min())&&(u=Di(l)),new iL(u,o.transformResults||[])})(t,e)))):[]}function SL(n,e){return{documents:[wC(n,e.path)]}}function AL(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=wC(n,o);const l=(function(m){if(m.length!==0)return xC(Ui.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:pa(S.field),direction:RL(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=dm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function CL(n){let e=_L(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ze(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=NC(E);return S instanceof Ui&&rC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(U){return new Ld(ma(U.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,nf(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,b=E.values||[];return new Ud(b,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const S=!E.before,b=E.values||[];return new Ud(b,S)})(t.endAt)),HU(e,o,u,l,d,"F",p,m)}function IL(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ma(t.unaryFilter.field);return Lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ma(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ma(t.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ma(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(ma(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ui.create(t.compositeFilter.filters.map((s=>NC(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function RL(n){return hL[n]}function wL(n){return pL[n]}function bL(n){return mL[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ma(n){return en.fromServerFormat(n.fieldPath)}function xC(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(y0(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(g0(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y0(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(g0(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:wL(t.op),value:t.value}}})(n):n instanceof Ui?(function(t){const s=t.getFilters().map((o=>xC(o)));return s.length===1?s[0]:{compositeFilter:{op:bL(t.op),filters:s}}})(n):Re(54877,{filter:n})}function NL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function MC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,t,s,o,l=we.min(),u=we.min(),d=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.gt=e}}function ML(n){const e=CL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.Dn=new PL}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Tr.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class PL{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ot(pt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DC=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(DC,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new wa(0)}static ur(){return new wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="LruGarbageCollector",kL=1048576;function P0([n,e],[t,s]){const o=Ve(n,t);return o===0?Ve(e,s):o}class VL{constructor(e){this.Tr=e,this.buffer=new Ot(P0),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();P0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UL{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){fe(D0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Va(t)?fe(D0,"Ignoring IndexedDB error during garbage collection: ",t):await ka(t)}await this.Rr(3e5)}))}}class LL{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(tf.ue);const s=new VL(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(M0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M0):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,u,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),fa()<=Be.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function OL(n,e){return new LL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this.changes=new So((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&nu(s.mutation,o,hi.empty(),dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Fe()){const o=ao();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let u=Jl();return l.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=ao();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Fe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,s,o){let l=_s();const u=tu(),d=(function(){return tu()})();return t.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Ao)?l=l.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),nu(v.mutation,m,v.mutation.getFieldMask(),dt.now())):u.set(m.key,hi.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var E;return d.set(m,new BL(v,(E=u.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const s=tu();let o=new mt(((u,d)=>u-d)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||hi.empty();v=d.applyToLocalView(m,v),s.set(p,v);const E=(o.get(d.batchId)||Fe()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,E=hC();v.forEach((S=>{if(!l.has(S)){const b=vC(t.get(S),s.get(S));b!==null&&E.set(S,b),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const u=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):se.resolve(ao());let d=lu,p=l;return u.next((m=>se.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,Fe()))).next((v=>({batchId:d,changes:fC(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let o=Jl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let u=Jl();return this.indexManager.getCollectionParents(e,l).next((d=>se.forEach(d,(p=>{const m=(function(E,S){return new rf(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((u=>{l.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,cn.newInvalidDocument(v)))}));let d=Jl();return u.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&nu(v.mutation,m,hi.empty(),dt.now()),af(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Di(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:ML(o.bundledQuery),readTime:Di(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this.overlays=new mt(Ee.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ao();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.wt(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const o=ao(),l=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new mt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=ao(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=ao(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return se.resolve(d)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new lL(t,s));let l=this.kr.get(t);l===void 0&&(l=Fe(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.qr=new Ot(Gt.Qr),this.$r=new Ot(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Gt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Ee(new pt([])),s=new Gt(t,e),o=new Gt(t,e+1),l=[];return this.$r.forEachInRange([s,o],(u=>{this.Wr(u),l.push(u.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ee(new pt([])),s=new Gt(t,e),o=new Gt(t,e+1);let l=Fe();return this.$r.forEachInRange([s,o],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Gt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ee.comparator(e.key,t.key)||Ve(e.Hr,t.Hr)}static Ur(e,t){return Ve(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ot(Gt.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new aL(l,t,s,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new Gt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Wm:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],(u=>{const d=this.Zr(u.Hr);l.push(d)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ot(Ve);return t.forEach((o=>{const l=new Gt(o,0),u=new Gt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],(d=>{s=s.add(d.Hr)}))})),se.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const u=new Gt(new Ee(l),0);let d=new Ot(Ve);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Hr)),!0)}),u),se.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ze(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return se.forEach(t.mutations,(o=>{const l=new Gt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new Gt(t,0),o=this.Yr.firstAfterOrEqual(s);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.ni=e,this.docs=(function(){return new mt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let s=_s();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():cn.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=_s();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||EU(TU(v),s)<=0||(o.has(v.key)||af(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Re(9500)}ri(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new KL(this)}getSize(e){return se.resolve(this.size)}}class KL extends qL{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.persistence=e,this.ii=new So((t=>eg(t)),tg),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.si=0,this.oi=new ag,this.targetCount=0,this._i=wa.ar()}forEachTarget(e,t){return this.ii.forEach(((s,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((u=>{l.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t){this.ai={},this.overlays={},this.ui=new tf(0),this.ci=!1,this.ci=!0,this.li=new GL,this.referenceDelegate=e(this),this.hi=new $L(this),this.indexManager=new DL,this.remoteDocumentCache=(function(o){return new YL(o)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new xL(t),this.Ti=new zL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new JL(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const o=new QL(this.ui.next());return this.referenceDelegate.Ii(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return se.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class QL extends AU{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Ai=new ag,this.Ri=null}static Vi(e){return new lg(e)}get mi(){if(this.Ri)return this.Ri;throw Re(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,(s=>{const o=Ee.fromPath(s);return this.fi(e,o).next((l=>{l||t.removeEntry(o,we.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Fd{constructor(e,t){this.persistence=e,this.gi=new So((s=>RU(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=OL(this,t)}static Vi(e,t){return new Fd(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return se.forEach(this.gi,((s,o)=>this.Sr(e,s,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(s++,l.removeEntry(u,we.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gd(e.data.value)),t}Sr(e,t,s){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=Fe(),o=Fe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ug(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return fD()?8:CU(fn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ys(e,t,o,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new XL;return this.ws(e,t,u).next((d=>{if(l.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>l.result))}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(fa()<=Be.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(fa()<=Be.DEBUG&&fe("QueryEngine","Query:",ha(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(fa()<=Be.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):se.resolve())}ps(e,t){if(E0(t))return se.resolve(null);let s=Mi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=cm(t,null,"F"),s=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Fe(...l);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.bs(t,d);return this.Ds(t,m,u,p.readTime)?this.ps(e,cm(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,s,o){return E0(t)||o.isEqual(we.min())?se.resolve(null):this.gs.getDocuments(e,s).next((l=>{const u=this.bs(t,l);return this.Ds(t,u,s,o)?se.resolve(null):(fa()<=Be.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ha(t)),this.vs(e,u,t,vU(o,lu)).next((d=>d)))}))}bs(e,t){let s=new Ot(cC(e));return t.forEach(((o,l)=>{af(e,l)&&(s=s.add(l))})),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return fa()<=Be.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",ha(t)),this.gs.getDocumentsMatchingQuery(e,t,Tr.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="LocalStore",ZL=3e8;class jL{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new mt(Ve),this.Ms=new So((l=>eg(l)),tg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function e4(n,e,t,s){return new jL(n,e,t,s)}async function kC(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],d=[];let p=Fe();for(const m of o){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function t4(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const E=m.batch,S=E.keys();let b=se.resolve();return S.forEach((U=>{b=b.next((()=>v.getEntry(p,U))).next((B=>{const G=m.docVersions.get(U);Ze(G!==null,48541),B.version.compareTo(G)<0&&(E.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let p=Fe();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function VC(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function n4(n,e){const t=Ne(n),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;d.push(t.hi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,v.addedDocuments,E))));let b=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(nn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,s)),o=o.insert(E,b),(function(B,G,te){return B.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=ZL?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(S,b,v)&&d.push(t.hi.updateTargetData(l,b))}));let p=_s(),m=Fe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(i4(l,u,e.documentUpdates).next((v=>{p=v.Ls,m=v.ks}))),!s.isEqual(we.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return se.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function i4(n,e,t){let s=Fe(),o=Fe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=_s();return t.forEach(((d,p)=>{const m=l.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(we.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):fe(cg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function s4(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Wm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function r4(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.hi.getTargetData(s,e).next((l=>l?(o=l,se.resolve(o)):t.hi.allocateTargetId(s).next((u=>(o=new hr(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function mm(n,e,t){const s=Ne(n),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Va(u))throw u;fe(cg,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function k0(n,e,t){const s=Ne(n);let o=we.min(),l=Fe();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const E=Ne(p),S=E.Ms.get(v);return S!==void 0?se.resolve(E.Fs.get(S)):E.hi.getTargetData(m,v)})(s,u,Mi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(u,e,t?o:we.min(),t?l:Fe()))).next((d=>(o4(s,YU(e),d),{documents:d,qs:l})))))}function o4(n,e,t){let s=n.xs.get(e)||we.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.xs.set(e,s)}class V0{constructor(){this.activeTargetIds=ZU()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a4{constructor(){this.Fo=new V0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new V0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="ConnectivityMonitor";class L0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){fe(U0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){fe(U0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function gm(){return ld===null?ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="RestConnection",u4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===kd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const u=gm(),d=this.Go(e,t.toUriEncodedString());fe(Up,`Sending RPC '${e}' ${u}:`,d,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:m}=new URL(d),v=wr(m);return this.jo(e,d,p,s,v).then((E=>(fe(Up,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw vr(Up,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",s),E}))}Jo(e,t,s,o,l,u){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const s=u4[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class f4 extends c4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const u=gm();return new Promise(((d,p)=>{const m=new OA;m.setWithCredentials(!0),m.listenOnce(qA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case md.NO_ERROR:const E=m.getResponseJson();fe(ln,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case md.TIMEOUT:fe(ln,`RPC '${e}' ${u} timed out`),p(new ve(re.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const S=m.getStatus();if(fe(ln,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const U=b==null?void 0:b.error;if(U&&U.status&&U.message){const B=(function(te){const K=te.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(K)>=0?K:re.UNKNOWN})(U.status);p(new ve(B,U.message))}else p(new ve(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ve(re.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{fe(ln,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);fe(ln,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,s,15)}))}P_(e,t,s){const o=gm(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zA(),d=FA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");fe(ln,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=u.createWebChannel(v,p);this.T_(E);let S=!1,b=!1;const U=new d4({Ho:G=>{b?fe(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(S||(fe(ln,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),fe(ln,`RPC '${e}' stream ${o} sending:`,G),E.send(G))},Yo:()=>E.close()}),B=(G,te,K)=>{G.listen(te,(X=>{try{K(X)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return B(E,Gl.EventType.OPEN,(()=>{b||(fe(ln,`RPC '${e}' stream ${o} transport opened.`),U.s_())})),B(E,Gl.EventType.CLOSE,(()=>{b||(b=!0,fe(ln,`RPC '${e}' stream ${o} transport closed`),U.__(),this.I_(E))})),B(E,Gl.EventType.ERROR,(G=>{b||(b=!0,vr(ln,`RPC '${e}' stream ${o} transport errored. Name:`,G.name,"Message:",G.message),U.__(new ve(re.UNAVAILABLE,"The operation could not be completed")))})),B(E,Gl.EventType.MESSAGE,(G=>{var te;if(!b){const K=G.data[0];Ze(!!K,16349);const X=K,ie=(X==null?void 0:X.error)||((te=X[0])===null||te===void 0?void 0:te.error);if(ie){fe(ln,`RPC '${e}' stream ${o} received error:`,ie);const le=ie.status;let de=(function(x){const D=Dt[x];if(D!==void 0)return SC(D)})(le),M=ie.message;de===void 0&&(de=re.INTERNAL,M="Unknown error status: "+le+" with message "+ie.message),b=!0,U.__(new ve(de,M)),E.close()}else fe(ln,`RPC '${e}' stream ${o} received:`,K),U.a_(K)}})),B(d,BA.STAT_EVENT,(G=>{G.stat===sm.PROXY?fe(ln,`RPC '${e}' stream ${o} detected buffering proxy`):G.stat===sm.NOPROXY&&fe(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.o_()}),0),U}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n){return new gL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="PersistentStream";class LC{constructor(e,t,s,o,l,u,d,p){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new UC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(ys(t.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.b_===t&&this.W_(s,o)}),(s=>{e((()=>{const o=new ve(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{s((()=>this.G_(o)))})),this.stream.onMessage((o=>{s((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return fe(O0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(fe(O0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h4 extends LC{constructor(e,t,s,o,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=vL(this.serializer,e),s=(function(l){if(!("targetChange"in l))return we.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?we.min():u.readTime?Di(u.readTime):we.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=pm(this.serializer),t.addTarget=(function(l,u){let d;const p=u.target;if(d=um(p)?{documents:SL(l,p)}:{query:AL(l,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=IC(l,u.resumeToken);const m=dm(l,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(we.min())>0){d.readTime=Bd(l,u.snapshotVersion.toTimestamp());const m=dm(l,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=IL(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=pm(this.serializer),t.removeTarget=e,this.k_(t)}}class p4 extends LC{constructor(e,t,s,o,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=EL(e.writeResults,e.commitTime),s=Di(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=pm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>TL(this.serializer,s)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{}class g4 extends m4{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ve(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,fm(t,s),o,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(re.UNKNOWN,l.toString())}))}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,fm(t,s),o,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ve(re.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class y4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ys(t),this._a=!1):fe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class _4{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((u=>{s.enqueueAndForget((async()=>{Co(this)&&(fe(_o,"Restarting streams for network reachability change."),await(async function(p){const m=Ne(p);m.Ia.add(4),await Iu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await ff(m)})(this))}))})),this.Aa=new y4(s,o)}}async function ff(n){if(Co(n))for(const e of n.da)await e(!0)}async function Iu(n){for(const e of n.da)await e(!1)}function OC(n,e){const t=Ne(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),pg(t)?hg(t):Ua(t).x_()&&fg(t,e))}function dg(n,e){const t=Ne(n),s=Ua(t);t.Ta.delete(e),s.x_()&&qC(t,e),t.Ta.size===0&&(s.x_()?s.B_():Co(t)&&t.Aa.set("Unknown"))}function fg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ua(n).H_(e)}function qC(n,e){n.Ra.$e(e),Ua(n).Y_(e)}function hg(n){n.Ra=new fL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ua(n).start(),n.Aa.aa()}function pg(n){return Co(n)&&!Ua(n).M_()&&n.Ta.size>0}function Co(n){return Ne(n).Ia.size===0}function BC(n){n.Ra=void 0}async function v4(n){n.Aa.set("Online")}async function T4(n){n.Ta.forEach(((e,t)=>{fg(n,e)}))}async function E4(n,e){BC(n),pg(n)?(n.Aa.la(e),hg(n)):n.Aa.set("Unknown")}async function S4(n,e,t){if(n.Aa.set("Online"),e instanceof CC&&e.state===2&&e.cause)try{await(async function(o,l){const u=l.cause;for(const d of l.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(s){fe(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zd(n,s)}else if(e instanceof vd?n.Ra.Ye(e):e instanceof AC?n.Ra.it(e):n.Ra.et(e),!t.isEqual(we.min()))try{const s=await VC(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const d=l.Ra.Pt(u);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ta.get(m);v&&l.Ta.set(m,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,m)=>{const v=l.Ta.get(p);if(!v)return;l.Ta.set(p,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),qC(l,p);const E=new hr(v.target,p,m,v.sequenceNumber);fg(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){fe(_o,"Failed to raise snapshot:",s),await zd(n,s)}}async function zd(n,e,t){if(!Va(e))throw e;n.Ia.add(1),await Iu(n),n.Aa.set("Offline"),t||(t=()=>VC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(_o,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await ff(n)}))}function FC(n,e){return e().catch((t=>zd(n,t,e)))}async function hf(n){const e=Ne(n),t=Cr(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Wm;for(;A4(e);)try{const o=await s4(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,C4(e,o)}catch(o){await zd(e,o)}zC(e)&&HC(e)}function A4(n){return Co(n)&&n.Pa.length<10}function C4(n,e){n.Pa.push(e);const t=Cr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function zC(n){return Co(n)&&!Cr(n).M_()&&n.Pa.length>0}function HC(n){Cr(n).start()}async function I4(n){Cr(n).na()}async function R4(n){const e=Cr(n);for(const t of n.Pa)e.X_(t.mutations)}async function w4(n,e,t){const s=n.Pa.shift(),o=sg.from(s,e,t);await FC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await hf(n)}async function b4(n,e){e&&Cr(n).Z_&&await(async function(s,o){if((function(u){return cL(u)&&u!==re.ABORTED})(o.code)){const l=s.Pa.shift();Cr(s).N_(),await FC(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await hf(s)}})(n,e),zC(n)&&HC(n)}async function q0(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),fe(_o,"RemoteStore received new credentials");const s=Co(t);t.Ia.add(3),await Iu(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await ff(t)}async function N4(n,e){const t=Ne(n);e?(t.Ia.delete(2),await ff(t)):e||(t.Ia.add(2),await Iu(t),t.Aa.set("Unknown"))}function Ua(n){return n.Va||(n.Va=(function(t,s,o){const l=Ne(t);return l.ia(),new h4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:v4.bind(null,n),e_:T4.bind(null,n),n_:E4.bind(null,n),J_:S4.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),pg(n)?hg(n):n.Aa.set("Unknown")):(await n.Va.stop(),BC(n))}))),n.Va}function Cr(n){return n.ma||(n.ma=(function(t,s,o){const l=Ne(t);return l.ia(),new p4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:I4.bind(null,n),n_:b4.bind(null,n),ea:R4.bind(null,n),ta:w4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await hf(n)):(await n.ma.stop(),n.Pa.length>0&&(fe(_o,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const u=Date.now()+s,d=new mg(e,t,u,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(n,e){if(ys("AsyncQueue",`${e}: ${n}`),Va(n))return new ve(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{static emptySet(e){return new Aa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=Jl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Aa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.fa=new mt(Ee.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Re(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ba{constructor(e,t,s,o,l,u,d,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ba(e,t,Aa.emptySet(t),u,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class M4{constructor(){this.queries=F0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=Ne(t),l=o.queries;o.queries=F0(),l.forEach(((u,d)=>{for(const p of d.wa)p.onError(s)}))})(this,new ve(re.ABORTED,"Firestore shutting down"))}}function F0(){return new So((n=>uC(n)),of)}async function D4(n,e){const t=Ne(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new x4,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=gg(u,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&yg(t)}async function P4(n,e){const t=Ne(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function k4(n,e){const t=Ne(n);let s=!1;for(const o of e){const l=o.query,u=t.queries.get(l);if(u){for(const d of u.wa)d.Ca(o)&&(s=!0);u.ya=o}}s&&yg(t)}function V4(n,e,t){const s=Ne(n),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function yg(n){n.Da.forEach((e=>{e.next()}))}var ym,z0;(z0=ym||(ym={})).Fa="default",z0.Cache="cache";class U4{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ba(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.key=e}}class JC{constructor(e){this.key=e}}class L4{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Fe(),this.mutatedKeys=Fe(),this.Xa=cC(e),this.eu=new Aa(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new B0,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),b=af(this.query,E)?E:null,U=!!S&&this.mutatedKeys.has(S.key),B=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let G=!1;S&&b?S.data.isEqual(b.data)?U!==B&&(s.track({type:3,doc:b}),G=!0):this.iu(S,b)||(s.track({type:2,doc:b}),G=!0,(p&&this.Xa(b,p)>0||m&&this.Xa(b,m)<0)&&(d=!0)):!S&&b?(s.track({type:0,doc:b}),G=!0):S&&!b&&(s.track({type:1,doc:S}),G=!0,(p||m)&&(d=!0)),G&&(b?(u=u.add(b),l=B?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{eu:u,ru:s,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,E)=>(function(b,U){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{At:G})}};return B(b)-B(U)})(v.type,E.type)||this.Xa(v.doc,E.doc))),this.su(s),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,u.length!==0||m?{snapshot:new ba(this.query,e.eu,l,u,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new B0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Fe(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new JC(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new GC(s))})),t}uu(e){this.Ha=e.qs,this.Za=Fe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ba.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const _g="SyncEngine";class O4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class q4{constructor(e){this.key=e,this.lu=!1}}class B4{constructor(e,t,s,o,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new So((d=>uC(d)),of),this.Tu=new Map,this.Iu=new Set,this.du=new mt(Ee.comparator),this.Eu=new Map,this.Au=new ag,this.Ru={},this.Vu=new Map,this.mu=wa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function F4(n,e,t=!0){const s=WC(n);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await YC(s,e,t,!0),o}async function z4(n,e){const t=WC(n);await YC(t,e,!0,!1)}async function YC(n,e,t,s){const o=await r4(n.localStore,Mi(e)),l=o.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await H4(n,e,l,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&OC(n.remoteStore,o),d}async function H4(n,e,t,s,o){n.gu=(E,S,b)=>(async function(B,G,te,K){let X=G.view.nu(te);X.Ds&&(X=await k0(B.localStore,G.query,!1).then((({documents:M})=>G.view.nu(M,X))));const ie=K&&K.targetChanges.get(G.targetId),le=K&&K.targetMismatches.get(G.targetId)!=null,de=G.view.applyChanges(X,B.isPrimaryClient,ie,le);return G0(B,G.targetId,de._u),de.snapshot})(n,E,S,b);const l=await k0(n.localStore,e,!0),u=new L4(e,l.qs),d=u.nu(l.documents),p=Cu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,p);G0(n,t,m._u);const v=new O4(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function G4(n,e,t){const s=Ne(n),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter((u=>!of(u,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await mm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&dg(s.remoteStore,o.targetId),_m(s,o.targetId)})).catch(ka)):(_m(s,o.targetId),await mm(s.localStore,o.targetId,!0))}async function J4(n,e){const t=Ne(n),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),dg(t.remoteStore,s.targetId))}async function Y4(n,e,t){const s=j4(n);try{const o=await(function(u,d){const p=Ne(u),m=dt.now(),v=d.reduce(((b,U)=>b.add(U.key)),Fe());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let U=_s(),B=Fe();return p.Os.getEntries(b,v).next((G=>{U=G,U.forEach(((te,K)=>{K.isValidDocument()||(B=B.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(b,U))).next((G=>{E=G;const te=[];for(const K of d){const X=rL(K,E.get(K.key).overlayedDocument);X!=null&&te.push(new Ao(K.key,X,nC(X.value.mapValue),ps.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,te,d)})).next((G=>{S=G;const te=G.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(b,G.batchId,te)}))})).then((()=>({batchId:S.batchId,changes:fC(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let m=u.Ru[u.currentUser.toKey()];m||(m=new mt(Ve)),m=m.insert(d,p),u.Ru[u.currentUser.toKey()]=m})(s,o.batchId,t),await Ru(s,o.changes),await hf(s.remoteStore)}catch(o){const l=gg(o,"Failed to persist write");t.reject(l)}}async function KC(n,e){const t=Ne(n);try{const s=await n4(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const u=t.Eu.get(l);u&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?Ze(u.lu,14607):o.removedDocuments.size>0&&(Ze(u.lu,42227),u.lu=!1))})),await Ru(t,s,e)}catch(s){await ka(s)}}function H0(n,e,t){const s=Ne(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Ne(u);p.onlineState=d;let m=!1;p.queries.forEach(((v,E)=>{for(const S of E.wa)S.va(d)&&(m=!0)})),m&&yg(p)})(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function K4(n,e,t){const s=Ne(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let u=new mt(Ee.comparator);u=u.insert(l,cn.newNoDocument(l,we.min()));const d=Fe().add(l),p=new cf(we.min(),new Map,new mt(Ve),u,d);await KC(s,p),s.du=s.du.remove(l),s.Eu.delete(e),vg(s)}else await mm(s.localStore,e,!1).then((()=>_m(s,e,t))).catch(ka)}async function $4(n,e){const t=Ne(n),s=e.batch.batchId;try{const o=await t4(t.localStore,e);QC(t,s,null),$C(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ru(t,o)}catch(o){await ka(o)}}async function Q4(n,e,t){const s=Ne(n);try{const o=await(function(u,d){const p=Ne(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((E=>(Ze(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);QC(s,e,t),$C(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ru(s,o)}catch(o){await ka(o)}}function $C(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function QC(n,e,t){const s=Ne(n);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function _m(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||XC(n,s)}))}function XC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(dg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),vg(n))}function G0(n,e,t){for(const s of t)s instanceof GC?(n.Au.addReference(s.key,e),X4(n,s)):s instanceof JC?(fe(_g,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||XC(n,s.key)):Re(19791,{yu:s})}function X4(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(fe(_g,"New document in limbo: "+t),n.Iu.add(s),vg(n))}function vg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ee(pt.fromString(e)),s=n.mu.next();n.Eu.set(s,new q4(t)),n.du=n.du.insert(t,s),OC(n.remoteStore,new hr(Mi(ng(t.path)),s,"TargetPurposeLimboResolution",tf.ue))}}async function Ru(n,e,t){const s=Ne(n),o=[],l=[],u=[];s.Pu.isEmpty()||(s.Pu.forEach(((d,p)=>{u.push(s.gu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){o.push(m);const E=ug.Es(p.targetId,m);l.push(E)}})))})),await Promise.all(u),s.hu.J_(o),await(async function(p,m){const v=Ne(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(m,(S=>se.forEach(S.Is,(b=>v.persistence.referenceDelegate.addReference(E,S.targetId,b))).next((()=>se.forEach(S.ds,(b=>v.persistence.referenceDelegate.removeReference(E,S.targetId,b)))))))))}catch(E){if(!Va(E))throw E;fe(cg,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const b=v.Fs.get(S),U=b.snapshotVersion,B=b.withLastLimboFreeSnapshotVersion(U);v.Fs=v.Fs.insert(S,B)}}})(s.localStore,l))}async function W4(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){fe(_g,"User change. New user:",e.toKey());const s=await kC(t.localStore,e);t.currentUser=e,(function(l,u){l.Vu.forEach((d=>{d.forEach((p=>{p.reject(new ve(re.CANCELLED,u))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ru(t,s.Bs)}}function Z4(n,e){const t=Ne(n),s=t.Eu.get(e);if(s&&s.lu)return Fe().add(s.key);{let o=Fe();const l=t.Tu.get(e);if(!l)return o;for(const u of l){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function WC(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K4.bind(null,e),e.hu.J_=k4.bind(null,e.eventManager),e.hu.pu=V4.bind(null,e.eventManager),e}function j4(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q4.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return e4(this.persistence,new WL,e.initialUser,this.serializer)}Du(e){return new PC(lg.Vi,this.serializer)}bu(e){return new a4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class eO extends Hd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ze(this.persistence.referenceDelegate instanceof Fd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new UL(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new PC((s=>Fd.Vi(s,t)),this.serializer)}}class vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>H0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=W4.bind(null,this.syncEngine),await N4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new M4})()}createDatastore(e){const t=df(e.databaseInfo.databaseId),s=(function(l){return new f4(l)})(e.databaseInfo);return(function(l,u,d,p){return new g4(l,u,d,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,u,d){return new _4(s,o,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>H0(this.syncEngine,t,0)),(function(){return L0.C()?new L0:new l4})())}createSyncEngine(e,t){return(function(o,l,u,d,p,m,v){const E=new B4(o,l,u,d,p,m);return v&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ne(o);fe(_o,"RemoteStore shutting down."),l.Ia.add(5),await Iu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}vm.provider={build:()=>new vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ys("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="FirestoreClient";class nO{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{fe(Ir,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(fe(Ir,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=gg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Op(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Ir,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await kC(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>{vr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{fe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{vr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function J0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await iO(n);fe(Ir,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>q0(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>q0(e.remoteStore,o))),n._onlineComponents=e}async function iO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Ir,"Using user provided OfflineComponentProvider");try{await Op(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;vr("Error using user provided cache. Falling back to memory cache: "+t),await Op(n,new Hd)}}else fe(Ir,"Using default OfflineComponentProvider"),await Op(n,new eO(void 0));return n._offlineComponents}async function ZC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Ir,"Using user provided OnlineComponentProvider"),await J0(n,n._uninitializedComponentsProvider._online)):(fe(Ir,"Using default OnlineComponentProvider"),await J0(n,new vm))),n._onlineComponents}function sO(n){return ZC(n).then((e=>e.syncEngine))}async function rO(n){const e=await ZC(n),t=e.eventManager;return t.onListen=F4.bind(null,e.syncEngine),t.onUnlisten=G4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=z4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=J4.bind(null,e.syncEngine),t}function oO(n,e,t={}){const s=new yr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,p,m){const v=new tO({next:S=>{v.Ou(),u.enqueueAndForget((()=>P4(l,E)));const b=S.docs.has(d);!b&&S.fromCache?m.reject(new ve(re.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&S.fromCache&&p&&p.source==="server"?m.reject(new ve(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new U4(ng(d.path),v,{includeMetadataChanges:!0,ka:!0});return D4(l,E)})(await rO(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firestore.googleapis.com",K0=!0;class $0{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eI,this.ssl=K0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:K0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kL)throw new ve(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_U("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jC((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tg{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new lU;switch(s.type){case"firstParty":return new fU(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ve(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Y0.get(t);s&&(fe("ComponentProvider","Removing Datastore"),Y0.delete(t),s.terminate())})(this),Promise.resolve()}}function aO(n,e,t,s={}){var o;n=au(n,Tg);const l=wr(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(wm(`https://${p}`),bm("Firestore",!0)),u.host!==eI&&u.host!==p&&vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:p,ssl:l,emulatorOptions:s});if(!fo(m,d)&&(n._setSettings(m),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=un.MOCK_USER;else{v=kS(s.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ve(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new un(S)}n._authCredentials=new uU(new GA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Eg(this.firestore,e,this._query)}}class Jt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Su(t,Jt._jsonSchema))return new Jt(e,s||null,new Ee(pt.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Pt("string",Jt._jsonSchemaVersion),referencePath:Pt("string")};class pu extends Eg{constructor(e,t,s){super(e,t,ng(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Ee(e))}withConverter(e){return new pu(this.firestore,e,this._path)}}function pf(n,e,...t){if(n=tn(n),arguments.length===1&&(e=Qm.newId()),yU("doc","path",e),n instanceof Tg){const s=pt.fromString(e,...t);return l0(s),new Jt(n,null,new Ee(s))}{if(!(n instanceof Jt||n instanceof pu))throw new ve(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(pt.fromString(e,...t));return l0(s),new Jt(n.firestore,n instanceof pu?n.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="AsyncQueue";class X0{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new UC(this,"async_queue_retry"),this.oc=()=>{const s=Lp();s&&fe(Q0,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=Lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new yr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Va(e))throw e;fe(Q0,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,ys("INTERNAL UNHANDLED ERROR: ",W0(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=mg.createAndSchedule(this,e,t,s,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Re(47125,{hc:W0(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function W0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Sg extends Tg{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new X0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X0(e),this._firestoreClient=void 0,await e}}}function lO(n,e){const t=typeof n=="object"?n:Mm(),s=typeof n=="string"?n:kd,o=Wd(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=MS("firestore");l&&aO(o,...l)}return o}function tI(n){if(n._terminated)throw new ve(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||uO(n),n._firestoreClient}function uO(n){var e,t,s;const o=n._freezeSettings(),l=(function(d,p,m,v){return new NU(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,jC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new nO(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ei(nn.fromBase64String(e))}catch(t){throw new ve(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ei(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,ei._jsonSchema))return ei.fromBase64String(e.bytes)}}ei._jsonSchemaVersion="firestore/bytes/1.0",ei._jsonSchema={type:Pt("string",ei._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Su(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:Pt("string",Pi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ki(e.vectorValues);throw new ve(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Pt("string",ki._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=/^__.*__$/;class dO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}function iI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ec:n})}}class Cg{constructor(e,t,s,o,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(iI(this.Ec)&&cO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class fO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||df(e)}Dc(e,t,s,o=!1){return new Cg({Ec:e,methodName:t,bc:s,path:en.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hO(n){const e=n._freezeSettings(),t=df(n._databaseId);return new fO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pO(n,e,t,s,o,l={}){const u=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);aI("Data must be an object, but it was:",u,s);const d=rI(s,u);let p,m;if(l.merge)p=new hi(u.fieldMask),m=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=mO(e,E,t);if(!u.contains(S))throw new ve(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);yO(v,S)||v.push(S)}p=new hi(v),m=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,m=u.fieldTransforms;return new dO(new jn(d),p,m)}function sI(n,e){if(oI(n=tn(n)))return aI("Unsupported field value:",e,n),rI(n,e);if(n instanceof nI)return(function(s,o){if(!iI(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,o){const l=[];let u=0;for(const d of s){let p=sI(d,o.yc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=tn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return jU(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=dt.fromDate(s);return{timestampValue:Bd(o.serializer,l)}}if(s instanceof dt){const l=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bd(o.serializer,l)}}if(s instanceof Pi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ei)return{bytesValue:IC(o.serializer,s._byteString)};if(s instanceof Jt){const l=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:og(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ki)return(function(u,d){return{mapValue:{fields:{[eC]:{stringValue:tC},[Vd]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return ig(d.serializer,m)}))}}}}}})(s,o);throw o.wc(`Unsupported field value: ${Xm(s)}`)})(n,e)}function rI(n,e){const t={};return $A(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(n,((s,o)=>{const l=sI(o,e.Vc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function oI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Pi||n instanceof ei||n instanceof Jt||n instanceof nI||n instanceof ki)}function aI(n,e,t){if(!oI(t)||!YA(t)){const s=Xm(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function mO(n,e,t){if((e=tn(e))instanceof Ag)return e._internalPath;if(typeof e=="string")return lI(n,e);throw Gd("Field path arguments must be of type string or ",n,!1,void 0,t)}const gO=new RegExp("[~\\*/\\[\\]]");function lI(n,e,t){if(e.search(gO)>=0)throw Gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ag(...e.split("."))._internalPath}catch{throw Gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gd(n,e,t,s,o){const l=s&&!s.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${s}`),u&&(p+=` in document ${o}`),p+=")"),new ve(re.INVALID_ARGUMENT,d+n+p)}function yO(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _O(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _O extends uI{data(){return super.data()}}function cI(n,e){return typeof e=="string"?lI(n,e):e instanceof Ag?e._internalPath:e._delegate._internalPath}class vO{convertValue(e,t="none"){switch(Ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Eo(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Vd].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((u=>Rt(u.doubleValue)));return new ki(l)}convertGeoPoint(e){return new Pi(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=sf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const t=Er(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=pt.fromString(e);Ze(MC(s),9688,{name:e});const o=new cu(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return o.isEqual(t)||ys(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Kl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uo extends uI{constructor(e,t,s,o,l,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(cI("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",uo._jsonSchema={type:Pt("string",uo._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Td extends uo{data(e={}){return super.data(e)}}class iu{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Kl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Td(this._firestore,this._userDataWriter,s.key,s,new Kl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Td(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Kl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Td(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Kl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:EO(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=iu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n){n=au(n,Jt);const e=au(n.firestore,Sg);return oO(tI(e),n._key).then((t=>CO(e,n,t)))}iu._jsonSchemaVersion="firestore/querySnapshot/1.0",iu._jsonSchema={type:Pt("string",iu._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class SO extends vO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function fI(n,e,t){n=au(n,Jt);const s=au(n.firestore,Sg),o=TO(n.converter,e);return AO(s,[pO(hO(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ps.none())])}function AO(n,e){return(function(s,o){const l=new yr;return s.asyncQueue.enqueueAndForget((async()=>Y4(await sO(s),o,l))),l.promise})(tI(n),e)}function CO(n,e,t){const s=t.docs.get(e._key),o=new SO(n);return new uo(n,o,e._key,s,new Kl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Pa=o})(To),ho(new _r("firestore",((s,{instanceIdentifier:o,options:l})=>{const u=s.getProvider("app").getImmediate(),d=new Sg(new cU(s.getProvider("auth-internal")),new hU(u,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ve(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(m.options.projectId,v)})(u,o),u);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Ni(i0,s0,e),Ni(i0,s0,"esm2017")})();const IO={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Ig=LS(IO),$l=oU(Ig),RO=new cs,mf=lO(Ig),wO=BP(Ig),bO=async(n,e,t)=>{try{const s=qP(wO,`users/${n}/clothing/${t}.jpg`);return await LP(s,e,"data_url"),await OP(s)}catch(s){throw console.error("Erreur lors de l'upload de l'image:",s),s}},NO=async(n,e)=>{try{const t=pf(mf,"users",n,"wardrobe","items");await fI(t,{items:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des vtements:",t),t}},xO=async n=>{try{const e=pf(mf,"users",n,"wardrobe","items"),t=await dI(e);return t.exists()?t.data().items||[]:[]}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},MO=async(n,e)=>{try{const t=pf(mf,"users",n,"wardrobe","sets");await fI(t,{sets:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des ensembles:",t),t}},DO=async n=>{try{const e=pf(mf,"users",n,"wardrobe","sets"),t=await dI(e);return t.exists()?t.data().sets||[]:[]}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}},PO=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),kO=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),Z0=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),Ed=()=>I.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Rg=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),wg=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),VO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),hI=()=>I.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),UO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),LO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),OO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),qO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),BO=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),pI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),mI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),FO=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),gI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),zO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),I.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),j0=({theme:n,toggleTheme:e,children:t})=>I.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:I.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[I.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:[I.jsx("span",{className:"text-gold",children:"DRESS"}),"CODE"]}),I.jsxs("div",{className:"flex items-center gap-4",children:[t,I.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?I.jsx(kO,{}):I.jsx(PO,{})})]})]})}),eS=({user:n})=>{var S,b,U;const[e,t]=Ce.useState(""),[s,o]=Ce.useState(""),[l,u]=Ce.useState(!1),[d,p]=Ce.useState(!1),m=async()=>{try{await mV($l,RO)}catch(B){console.error("Erreur de connexion Google:",B)}},v=async B=>{B.preventDefault();try{l?await Gk($l,e,s):await Jk($l,e,s)}catch(G){console.error("Erreur d'authentification:",G)}},E=async()=>{try{await Qk($l)}catch(B){console.error("Erreur de dconnexion:",B)}};return n?I.jsxs("div",{className:"relative",children:[I.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[I.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((S=n.displayName)==null?void 0:S[0])||((b=n.email)==null?void 0:b[0])||"U").toUpperCase()}),I.jsx("span",{className:"hidden md:block text-sm font-medium",children:n.displayName||((U=n.email)==null?void 0:U.split("@")[0])})]}),d&&I.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[I.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[I.jsx("p",{className:"text-sm font-medium",children:n.displayName||"Utilisateur"}),I.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.email})]}),I.jsxs("button",{onClick:E,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[I.jsx("span",{className:"text-gold",children:"Dress"}),"Code AI"]}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:l?"Crez votre compte":"Bienvenue"})]}),I.jsxs("button",{onClick:m,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[I.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[I.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),I.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),I.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),I.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),I.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),I.jsxs("div",{className:"relative my-6",children:[I.jsx("div",{className:"absolute inset-0 flex items-center",children:I.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),I.jsx("div",{className:"relative flex justify-center text-sm",children:I.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),I.jsxs("form",{onSubmit:v,className:"space-y-4",children:[I.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:B=>t(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),I.jsx("input",{type:"password",placeholder:"Mot de passe",value:s,onChange:B=>o(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),I.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:l?"Crer mon compte":"Se connecter"})]}),I.jsx("button",{onClick:()=>u(!l),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:l?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},HO=({onAnalyze:n,isAnalyzing:e})=>{const t=Ce.useRef(null),[s,o]=Ce.useState([]),[l,u]=Ce.useState(!1),[d,p]=Ce.useState(!1);Ce.useEffect(()=>{const K=()=>p(window.innerWidth<1024);return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),Ce.useEffect(()=>()=>{s.forEach(K=>URL.revokeObjectURL(K.preview))},[s]);const m=K=>{const X=K.map(ie=>({id:`${ie.name}-${ie.lastModified}-${Math.random()}`,file:ie,preview:URL.createObjectURL(ie)}));o(ie=>[...ie,...X])},v=K=>{K.target.files&&(m(Array.from(K.target.files)),K.target.value="")},E=()=>{var K;e||(K=t.current)==null||K.click()},S=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!0))},b=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!1))},U=K=>{d||(K.preventDefault(),K.stopPropagation())},B=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!1),K.dataTransfer.files&&K.dataTransfer.files.length>0&&(m(Array.from(K.dataTransfer.files)),K.dataTransfer.clearData()))},G=K=>{const X=s.find(ie=>ie.id===K);X&&URL.revokeObjectURL(X.preview),o(ie=>ie.filter(le=>le.id!==K))},te=()=>{s.length>0&&!e&&(n(s.map(K=>K.file)),o([]))};return I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:S,onDragLeave:b,onDragOver:U,onDrop:B,children:[I.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),I.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[I.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),I.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?I.jsxs(I.Fragment,{children:[I.jsx(Ed,{}),I.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:I.jsx(Z0,{})}),I.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),I.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",I.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),l&&!d&&I.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[I.jsx("div",{className:"text-black transform-gpu scale-110",children:I.jsx(Z0,{})}),I.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),s.length>0&&!e&&I.jsxs("div",{className:"mt-8",children:[I.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),I.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:s.map(K=>I.jsxs("div",{className:"relative group aspect-square",children:[I.jsx("img",{src:K.preview,alt:K.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),I.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),I.jsx("button",{onClick:()=>G(K.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:I.jsx(wg,{})})]},K.id))}),I.jsxs("button",{onClick:te,disabled:e||s.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(Rg,{}),"Analyser les ",s.length," article(s)"]})]})]})},GO=({imageSrc:n,analysis:e,onClick:t,onRemove:s,isSelected:o,isSet:l})=>I.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[I.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),I.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),I.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l&&!o&&I.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:I.jsx(mI,{})}),o&&I.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:I.jsx(FO,{})}),I.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:I.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),I.jsx("button",{onClick:s,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:I.jsx(wg,{})})]}),JO={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},YO=({clothingItems:n,clothingSets:e,onRemoveItem:t,onRemoveSet:s,onSelectItem:o,onCreateSet:l})=>{const[u,d]=Ce.useState("Hauts"),[p,m]=Ce.useState(JO),[v,E]=Ce.useState(!1),[S,b]=Ce.useState([]),[U,B]=Ce.useState(!1),G=Ce.useMemo(()=>new Set(e.flatMap(N=>N.itemIds)),[e]),te=n.length,K=[{name:"Hauts",icon:UO},{name:"Bas",icon:LO},{name:"Chaussures",icon:OO},{name:"Accessoires",icon:qO}],X=()=>{E(!v),b([]),B(!1)},ie=N=>{v?b(x=>x.includes(N.id)?x.filter(D=>D!==N.id):[...x,N.id]):o(N)},le=Ce.useMemo(()=>S.length<2?null:e.find(N=>N.itemIds.length===S.length&&N.itemIds.every(x=>S.includes(x))),[S,e]);if(te===0)return I.jsxs("div",{className:"text-center py-20 px-6 bg-white dark:bg-raisin-black rounded-xl border border-dashed border-gray-300/50 dark:border-gray-700/50 flex flex-col items-center",children:[I.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:I.jsx(VO,{})}),I.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide."}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ajoutez des vtements pour commencer  crer."})]});const de=N=>d(x=>x===N?null:N),M=(N,x,D)=>{m(V=>({...V,[N]:{...V[N],[x]:D}}))};return I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mb-8",children:[I.jsxs("h2",{className:"text-3xl font-serif font-bold",children:["Ma Garde-Robe ",I.jsxs("span",{className:"text-gray-500",children:["(",te,")"]})]}),I.jsx("button",{onClick:X,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${v?"bg-gold/20 text-gold":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700"}`,children:v?"Annuler la slection":"Crer un ensemble"})]}),I.jsx("div",{className:"space-y-4",children:K.map(({name:N,icon:x})=>{const D=n.filter(z=>z.category===N);if(D.length===0)return null;const V=u===N,O=["Hauts","Bas","Chaussures"].includes(N),P=[...new Set(D.map(z=>z.color))].sort(),st=[...new Set(D.map(z=>z.material))].sort(),ft=D.filter(z=>{const{color:ae,material:_e}=p[N];return(ae==="Toutes"||z.color===ae)&&(_e==="Toutes"||z.material===_e)});return I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-lg shadow-black/5 dark:shadow-black/10 ring-1 ring-black/5 dark:ring-white/10 overflow-hidden transition-all duration-300",children:[I.jsxs("button",{onClick:()=>de(N),className:"w-full flex justify-between items-center p-4 lg:p-5 text-left","aria-expanded":V,children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("span",{className:"text-gold",children:I.jsx(x,{})}),I.jsx("span",{className:"font-serif font-bold text-xl text-raisin-black dark:text-snow",children:N}),I.jsx("span",{className:"text-sm font-medium bg-snow dark:bg-onyx px-2 py-0.5 rounded-full text-gray-500 dark:text-gray-400",children:D.length})]}),I.jsx(BO,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${V?"rotate-180":""}`})]}),I.jsx("div",{className:`grid transition-all duration-500 ease-in-out ${V?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:I.jsx("div",{className:"overflow-hidden",children:I.jsxs("div",{className:"p-4 lg:p-5 border-t border-black/5 dark:border-white/10",children:[O&&I.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:`${N}-color-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Couleur"}),I.jsxs("select",{id:`${N}-color-filter`,value:p[N].color,onChange:z=>M(N,"color",z.target.value),onClick:z=>z.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[I.jsx("option",{value:"Toutes",children:"Toutes"}),P.map(z=>I.jsx("option",{value:z,children:z},z))]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`${N}-material-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Matire"}),I.jsxs("select",{id:`${N}-material-filter`,value:p[N].material,onChange:z=>M(N,"material",z.target.value),onClick:z=>z.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[I.jsx("option",{value:"Toutes",children:"Toutes"}),st.map(z=>I.jsx("option",{value:z,children:z},z))]})]})]}),I.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:ft.map(z=>I.jsx(GO,{imageSrc:z.imageSrc,analysis:z.analysis,onClick:()=>ie(z),onRemove:ae=>{ae.stopPropagation(),t(z.id)},isSelected:v&&S.includes(z.id),isSet:G.has(z.id)},z.id))})]})})})]},N)})}),v&&I.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[60] w-full max-w-md px-4",children:U?I.jsxs("form",{onSubmit:N=>{N.preventDefault();const D=new FormData(N.currentTarget).get("setName");D&&D.trim()&&(l(S,D.trim()),X())},className:"flex items-center gap-2 bg-white dark:bg-raisin-black p-2 rounded-full shadow-2xl ring-1 ring-gold/50",children:[I.jsx("input",{type:"text",name:"setName",placeholder:"Nom de l'ensemble...",className:"flex-grow bg-transparent px-4 py-1 text-onyx dark:text-snow focus:outline-none",autoFocus:!0}),I.jsx("button",{type:"submit",className:"bg-gold text-onyx font-bold px-4 py-1.5 rounded-full hover:bg-gold-dark transition-colors",children:"Crer"}),I.jsx("button",{type:"button",onClick:()=>B(!1),className:"text-gray-500 dark:text-gray-400 p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:I.jsx(wg,{})})]}):le?I.jsxs("button",{onClick:()=>{s(le.id),X()},className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-rose-500 text-white font-bold rounded-full shadow-2xl hover:bg-rose-600 transition-all duration-300 transform hover:scale-105",children:[I.jsx(gI,{}),"Dissocier l'ensemble"]}):S.length>1&&I.jsxs("button",{onClick:()=>B(!0),className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-gold text-onyx font-bold rounded-full shadow-2xl hover:bg-gold-dark transition-all duration-300 transform hover:scale-105",children:[I.jsx(mI,{}),"Crer un ensemble avec ",S.length," articles"]})})]})},KO=({onGenerate:n,isGenerating:e,context:t,setContext:s})=>{const o=u=>{u.preventDefault(),t.trim()&&n(t)},l=["Casual","Chic","Formel"];return I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),I.jsx("form",{onSubmit:o,children:I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"context",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ou mto ?"}),I.jsx("div",{className:"flex justify-center gap-2 mb-4",children:l.map(u=>I.jsx("button",{type:"button",onClick:()=>s(u),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${t===u?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:e,children:u},u))}),I.jsx("input",{id:"context",type:"text",value:t,onChange:u=>s(u.target.value),placeholder:"Ou dcrivez... Ex: un brunch ensoleill",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e})]}),I.jsxs("button",{type:"submit",disabled:e||!t.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(Rg,{}),e?"Gnration...":"Gnrer des Tenues"]})]})})]})},$O=({outfits:n,allClothingItems:e})=>{const[t,s]=Ce.useState(null);Ce.useEffect(()=>{if(!t)return;const l=u=>{u.key==="Escape"&&s(null)};return window.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",l),document.body.style.overflow="auto"}},[t]);const o=l=>{const u=l.toLowerCase(),d=e.find(p=>{if(p.analysis.toLowerCase()===u)return!0;const m=new Set(p.analysis.toLowerCase().split(/\s+/)),v=u.split(/\s+/);return v.filter(S=>m.has(S)).length/v.length>.5});return d?d.imageSrc:null};return I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"mt-10 space-y-8",children:n.map((l,u)=>I.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[I.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:l.titre}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:l.description}),I.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:l.vetements.map((d,p)=>{const m=o(d);return I.jsx("button",{onClick:()=>m&&s(m),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!m,"aria-label":`Agrandir l'image de : ${d}`,children:m?I.jsx("img",{src:m,alt:d,className:"w-full h-full object-cover"}):I.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:I.jsx(hI,{})})},p)})}),I.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:l.vetements.map((d,p)=>I.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d},p))})]},u))}),t&&I.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>s(null),role:"dialog","aria-modal":"true",children:I.jsxs("div",{className:"relative",onClick:l=>l.stopPropagation(),children:[I.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),I.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:I.jsx(pI,{})})]})})]})},QO=({item:n,clothingSets:e,onClose:t,onUpdate:s,onGenerateFrom:o,onRemoveSet:l})=>{const[u,d]=Ce.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(E=>E.itemIds.includes(n.id));Ce.useEffect(()=>{d({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),Ce.useEffect(()=>{const E=S=>{S.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",E),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",E)}},[t]);const m=E=>{const{name:S,value:b}=E.target;d(U=>({...U,[S]:b}))},v=E=>{E.preventDefault(),s({...n,...u})};return I.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:E=>E.stopPropagation(),children:[I.jsxs("div",{className:"relative",children:[I.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),I.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:I.jsx(pI,{})})]}),I.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[I.jsxs("div",{className:"space-y-4 flex-grow",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),I.jsx("textarea",{id:"analysis",name:"analysis",value:u.analysis,onChange:m,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),I.jsx("select",{id:"category",name:"category",value:u.category,onChange:m,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(E=>I.jsx("option",{value:E,children:E},E))})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),I.jsx("input",{type:"text",id:"color",name:"color",value:u.color,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),I.jsx("input",{type:"text",id:"material",name:"material",value:u.material,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&I.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),I.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),I.jsxs("button",{type:"button",onClick:()=>{l(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[I.jsx(gI,{}),I.jsx("span",{children:"Dissocier"})]})]})]}),I.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[I.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[I.jsx(Rg,{}),"Crer une tenue avec cet article"]}),I.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},XO=({onGenerate:n,isGenerating:e})=>{const[t,s]=Ce.useState(3),[o,l]=Ce.useState(""),u=d=>{d.preventDefault(),o.trim()&&t>0&&n(t,o)};return I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),I.jsxs("form",{onSubmit:u,className:"space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[I.jsxs("div",{className:"sm:col-span-1",children:[I.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),I.jsx("input",{id:"days",type:"number",value:t,onChange:d=>s(parseInt(d.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e,required:!0})]}),I.jsxs("div",{className:"sm:col-span-2",children:[I.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),I.jsx("input",{id:"vacation-context",type:"text",value:o,onChange:d=>l(d.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:e,required:!0})]})]}),I.jsxs("button",{type:"submit",disabled:e||!o.trim()||t<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(zO,{}),e?"Prparation...":"Gnrer la valise"]})]})]})},WO=({plan:n,allClothingItems:e})=>{const t=s=>{const o=s.toLowerCase(),l=e.find(d=>d.analysis.toLowerCase()===o);if(l)return l.imageSrc;const u=e.map(d=>{const p=new Set(d.analysis.toLowerCase().split(/\s+/)),m=o.split(/\s+/),E=m.filter(S=>p.has(S)).length/m.length;return{item:d,score:E}}).filter(d=>d.score>.5).sort((d,p)=>p.score-d.score)[0];return u?u.item.imageSrc:null};return I.jsx("div",{className:"mt-10",children:I.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[I.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),I.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((s,o)=>{const l=t(s);return I.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s,children:[l?I.jsx("img",{src:l,alt:s,className:"w-full h-full object-cover"}):I.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:I.jsx(hI,{})}),I.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:I.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s})})]},o)})}),I.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((s,o)=>I.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s},o))})]})})},ZO=()=>{const[n,e]=Ce.useState(null),[t,s]=Ce.useState(!0),[o,l]=Ce.useState(null),[u,d]=Ce.useState(!1),[p,m]=Ce.useState("dark"),[v,E]=Ce.useState([]),[S,b]=Ce.useState([]),[U,B]=Ce.useState([]),[G,te]=Ce.useState(!1),[K,X]=Ce.useState(!1),[ie,le]=Ce.useState(null),[de,M]=Ce.useState(null),[N,x]=Ce.useState(""),[D,V]=Ce.useState(null),[O,P]=Ce.useState(!1);Ce.useEffect(()=>{const ue=$k($l,ye=>{e(ye),s(!1)});return()=>ue()},[]),Ce.useEffect(()=>{n&&(async()=>{try{const ye=await xO(n.uid),Pe=await DO(n.uid);E(ye),b(Pe)}catch(ye){console.error("Erreur lors du chargement des donnes:",ye)}})()},[n]),Ce.useEffect(()=>{console.log(" Save Effect:",{user:!!n,itemsLength:v.length}),n&&v.length>0&&(console.log(" SAVING ITEMS..."),NO(n.uid,v).then(()=>console.log(" SAVE SUCCESS!")).catch(ue=>console.error(" SAVE ERROR:",ue)))},[v,n]),Ce.useEffect(()=>{n&&S.length>0&&MO(n.uid,S).catch(console.error)},[S,n]),Ce.useEffect(()=>{const ue=window.document.documentElement;ue.classList.remove(p==="light"?"dark":"light"),ue.classList.add(p)},[p]);const st=()=>{m(ue=>ue==="light"?"dark":"light")},ft=Ce.useCallback(async ue=>{if(ue.length!==0){te(!0),le(null);try{const ye=ue.map(kt=>new Promise((sn,Nn)=>{const xn=new FileReader;xn.onload=()=>sn(xn.result),xn.onerror=Nn,xn.readAsDataURL(kt)})),Pe=await Promise.all(ye),De=Pe.map(kt=>kt.split(",")[1]),St=await GM(De),ii=Math.min(St.length,ue.length),si=[];for(let kt=0;kt<ii;kt++){const sn=`${Date.now()}-${ue[kt].name}-${Math.random()}`;let Nn=Pe[kt];if(n)try{Nn=await bO(n.uid,Pe[kt],sn),console.log(" Image uploaded to Storage:",Nn)}catch(xn){console.error(" Failed to upload image, using base64:",xn)}si.push({id:sn,imageSrc:Nn,...St[kt]})}St.length!==ue.length&&(console.warn(`Le nombre de rsultats d'analyse (${St.length}) ne correspond pas au nombre de fichiers (${ue.length}).`),le(`L'IA a analys ${si.length} sur ${ue.length} image(s). Certaines ont peut-tre t ignores.`)),E(kt=>[...kt,...si])}catch(ye){console.error("Erreur lors de l'analyse par lot des images:",ye),le("Une erreur est survenue lors de l'analyse des images. L'IA a peut-tre rencontr un problme. Veuillez ressayer.")}finally{te(!1)}}},[n]),z=Ce.useCallback(async(ue,ye)=>{if(v.length-S.flatMap(De=>De.itemIds).length+S.length<2){le("Veuillez avoir au moins deux articles ou ensembles pour gnrer des tenues.");return}X(!0),le(null),B([]);try{const De=await YM(v,S,ue,ye);B(De)}catch(De){console.error("Erreur lors de la gnration des tenues:",De),le("Impossible de gnrer des tenues. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{X(!1)}},[v,S]),ae=Ce.useCallback(async(ue,ye)=>{if(v.length<ue){le(`Veuillez avoir au moins ${ue} articles dans votre garde-robe pour un voyage de ${ue} jours.`);return}P(!0),le(null),V(null);try{const Pe=await $M(v,S,ue,ye);V(Pe)}catch(Pe){console.error("Erreur lors de la gnration du plan de valise:",Pe),le("Impossible de gnrer le plan de valise. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{P(!1)}},[v,S]),_e=ue=>{E(ye=>ye.filter(Pe=>Pe.id!==ue)),b(ye=>ye.map(De=>De.itemIds.includes(ue)?{...De,itemIds:De.itemIds.filter(St=>St!==ue)}:De).filter(De=>De.itemIds.length>1))},ze=ue=>{b(ye=>ye.filter(Pe=>Pe.id!==ue))},Je=ue=>{M(ue)},q=()=>{M(null)},j=ue=>{E(ye=>ye.map(Pe=>Pe.id===ue.id?ue:Pe)),q()},oe=ue=>{if(!N.trim()){le("Veuillez d'abord dcrire une occasion ou une mto dans le crateur de tenues.");return}q(),z(N,ue)},he=(ue,ye)=>{if(ue.length<2||!ye.trim())return;const Pe=v.find(St=>St.id===ue[0]);if(!Pe)return;const De={id:`${Date.now()}-set-${Math.random()}`,name:ye,itemIds:ue,imageSrc:Pe.imageSrc};b(St=>[...St,De])},Ae=Ce.useCallback(async()=>{if(v.length<3){le("Ajoutez au moins 3 vtements pour une analyse pertinente.");return}d(!0),le(null);try{const ue=await KM(v,S);l(ue)}catch(ue){console.error("Erreur lors de l'analyse de la garde-robe:",ue),le("Impossible d'analyser la garde-robe. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{d(!1)}},[v,S]);return t?I.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx flex items-center justify-center",children:I.jsx(Ed,{})}):n?I.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[I.jsx(j0,{theme:p,toggleTheme:st,children:I.jsx(eS,{user:n})}),I.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[ie&&I.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[I.jsx("strong",{className:"font-bold",children:"Erreur: "}),I.jsx("span",{className:"block sm:inline",children:ie})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[I.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[v.length>=3&&I.jsxs("div",{className:"bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-6 flex items-center justify-between",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),I.jsx("button",{onClick:Ae,disabled:u,className:"px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap",children:u?I.jsxs(I.Fragment,{children:[I.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyse..."]}):I.jsxs(I.Fragment,{children:[I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Analyser ma garde-robe"]})})]}),I.jsx(HO,{onAnalyze:ft,isAnalyzing:G}),I.jsx(YO,{clothingItems:v,clothingSets:S,onRemoveItem:_e,onRemoveSet:ze,onSelectItem:Je,onCreateSet:he})]}),I.jsx("div",{className:"space-y-10",children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8 sticky top-28",children:[I.jsx(XO,{onGenerate:ae,isGenerating:O}),O&&I.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[I.jsx(Ed,{}),I.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA prpare votre valise..."})]}),D&&I.jsx(WO,{plan:D,allClothingItems:v}),(D||O||U.length>0)&&I.jsx("hr",{className:"my-8 border-dashed border-gray-200 dark:border-gray-700"}),I.jsx(KO,{onGenerate:z,isGenerating:K,context:N,setContext:x}),K&&I.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[I.jsx(Ed,{}),I.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA compose vos tenues..."})]}),U.length>0&&I.jsx($O,{outfits:U,allClothingItems:v})]})})]}),de&&I.jsx(QO,{item:de,clothingSets:S,onClose:q,onUpdate:j,onGenerateFrom:oe,onRemoveSet:ze}),o&&I.jsx(iw,{analysis:o,onClose:()=>l(null)})]})]}):I.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[I.jsx(j0,{theme:p,toggleTheme:st}),I.jsx("main",{className:"container mx-auto px-4 py-20 flex items-center justify-center min-h-[calc(100vh-200px)]",children:I.jsx(eS,{user:n})})]})},yI=document.getElementById("root");if(!yI)throw new Error("L'lment root est introuvable dans le DOM");const jO=nw.createRoot(yI);jO.render(I.jsx($R.StrictMode,{children:I.jsx(ZO,{})}));
