(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function aS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tp={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function jR(){if($v)return ql;$v=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return ql.Fragment=e,ql.jsx=t,ql.jsxs=t,ql}var Qv;function ew(){return Qv||(Qv=1,Tp.exports=jR()),Tp.exports}var I=ew(),Ep={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function tw(){if(Xv)return be;Xv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,z={};function te(O,j,oe){this.props=O,this.context=j,this.refs=z,this.updater=oe||q}te.prototype.isReactComponent={},te.prototype.setState=function(O,j){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,j,"setState")},te.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function K(){}K.prototype=te.prototype;function Q(O,j,oe){this.props=O,this.context=j,this.refs=z,this.updater=oe||q}var ie=Q.prototype=new K;ie.constructor=Q,F(ie,te.prototype),ie.isPureReactComponent=!0;var le=Array.isArray;function de(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function x(O,j,oe){var pe=oe.ref;return{$$typeof:n,type:O,key:j,ref:pe!==void 0?pe:null,props:oe}}function D(O,j){return x(O.type,j,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function L(O){var j={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return j[oe]})}var P=/\/+/g;function rt(O,j){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):j.toString(36)}function ft(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(de,de):(O.status="pending",O.then(function(j){O.status==="pending"&&(O.status="fulfilled",O.value=j)},function(j){O.status==="pending"&&(O.status="rejected",O.reason=j)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function H(O,j,oe,pe,Ae){var ue=typeof O;(ue==="undefined"||ue==="boolean")&&(O=null);var ye=!1;if(O===null)ye=!0;else switch(ue){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(O.$$typeof){case n:case e:ye=!0;break;case v:return ye=O._init,H(ye(O._payload),j,oe,pe,Ae)}}if(ye)return Ae=Ae(O),ye=pe===""?"."+rt(O,0):pe,le(Ae)?(oe="",ye!=null&&(oe=ye.replace(P,"$&/")+"/"),H(Ae,j,oe,"",function(St){return St})):Ae!=null&&(V(Ae)&&(Ae=D(Ae,oe+(Ae.key==null||O&&O.key===Ae.key?"":(""+Ae.key).replace(P,"$&/")+"/")+ye)),j.push(Ae)),1;ye=0;var ke=pe===""?".":pe+":";if(le(O))for(var De=0;De<O.length;De++)pe=O[De],ue=ke+rt(pe,De),ye+=H(pe,j,oe,ue,Ae);else if(De=b(O),typeof De=="function")for(O=De.call(O),De=0;!(pe=O.next()).done;)pe=pe.value,ue=ke+rt(pe,De++),ye+=H(pe,j,oe,ue,Ae);else if(ue==="object"){if(typeof O.then=="function")return H(ft(O),j,oe,pe,Ae);throw j=String(O),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return ye}function ae(O,j,oe){if(O==null)return O;var pe=[],Ae=0;return H(O,pe,"","",function(ue){return j.call(oe,ue,Ae++)}),pe}function _e(O){if(O._status===-1){var j=O._result;j=j(),j.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=j)}if(O._status===1)return O._result.default;throw O._result}var Ge=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ye={map:ae,forEach:function(O,j,oe){ae(O,function(){j.apply(this,arguments)},oe)},count:function(O){var j=0;return ae(O,function(){j++}),j},toArray:function(O){return ae(O,function(j){return j})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return be.Activity=T,be.Children=Ye,be.Component=te,be.Fragment=t,be.Profiler=o,be.PureComponent=Q,be.StrictMode=i,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,be.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},be.cache=function(O){return function(){return O.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(O,j,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=F({},O.props),Ae=O.key;if(j!=null)for(ue in j.key!==void 0&&(Ae=""+j.key),j)!N.call(j,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&j.ref===void 0||(pe[ue]=j[ue]);var ue=arguments.length-2;if(ue===1)pe.children=oe;else if(1<ue){for(var ye=Array(ue),ke=0;ke<ue;ke++)ye[ke]=arguments[ke+2];pe.children=ye}return x(O.type,Ae,pe)},be.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},be.createElement=function(O,j,oe){var pe,Ae={},ue=null;if(j!=null)for(pe in j.key!==void 0&&(ue=""+j.key),j)N.call(j,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ae[pe]=j[pe]);var ye=arguments.length-2;if(ye===1)Ae.children=oe;else if(1<ye){for(var ke=Array(ye),De=0;De<ye;De++)ke[De]=arguments[De+2];Ae.children=ke}if(O&&O.defaultProps)for(pe in ye=O.defaultProps,ye)Ae[pe]===void 0&&(Ae[pe]=ye[pe]);return x(O,ue,Ae)},be.createRef=function(){return{current:null}},be.forwardRef=function(O){return{$$typeof:d,render:O}},be.isValidElement=V,be.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:_e}},be.memo=function(O,j){return{$$typeof:m,type:O,compare:j===void 0?null:j}},be.startTransition=function(O){var j=M.T,oe={};M.T=oe;try{var pe=O(),Ae=M.S;Ae!==null&&Ae(oe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(de,Ge)}catch(ue){Ge(ue)}finally{j!==null&&oe.types!==null&&(j.types=oe.types),M.T=j}},be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},be.use=function(O){return M.H.use(O)},be.useActionState=function(O,j,oe){return M.H.useActionState(O,j,oe)},be.useCallback=function(O,j){return M.H.useCallback(O,j)},be.useContext=function(O){return M.H.useContext(O)},be.useDebugValue=function(){},be.useDeferredValue=function(O,j){return M.H.useDeferredValue(O,j)},be.useEffect=function(O,j){return M.H.useEffect(O,j)},be.useEffectEvent=function(O){return M.H.useEffectEvent(O)},be.useId=function(){return M.H.useId()},be.useImperativeHandle=function(O,j,oe){return M.H.useImperativeHandle(O,j,oe)},be.useInsertionEffect=function(O,j){return M.H.useInsertionEffect(O,j)},be.useLayoutEffect=function(O,j){return M.H.useLayoutEffect(O,j)},be.useMemo=function(O,j){return M.H.useMemo(O,j)},be.useOptimistic=function(O,j){return M.H.useOptimistic(O,j)},be.useReducer=function(O,j,oe){return M.H.useReducer(O,j,oe)},be.useRef=function(O){return M.H.useRef(O)},be.useState=function(O){return M.H.useState(O)},be.useSyncExternalStore=function(O,j,oe){return M.H.useSyncExternalStore(O,j,oe)},be.useTransition=function(){return M.H.useTransition()},be.version="19.2.0",be}var Wv;function Tm(){return Wv||(Wv=1,Ep.exports=tw()),Ep.exports}var Ce=Tm();const nw=aS(Ce);var Sp={exports:{}},Fl={},Ap={exports:{}},Cp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function iw(){return Zv||(Zv=1,(function(n){function e(H,ae){var _e=H.length;H.push(ae);e:for(;0<_e;){var Ge=_e-1>>>1,Ye=H[Ge];if(0<o(Ye,ae))H[Ge]=ae,H[_e]=Ye,_e=Ge;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ae=H[0],_e=H.pop();if(_e!==ae){H[0]=_e;e:for(var Ge=0,Ye=H.length,O=Ye>>>1;Ge<O;){var j=2*(Ge+1)-1,oe=H[j],pe=j+1,Ae=H[pe];if(0>o(oe,_e))pe<Ye&&0>o(Ae,oe)?(H[Ge]=Ae,H[pe]=_e,Ge=pe):(H[Ge]=oe,H[j]=_e,Ge=j);else if(pe<Ye&&0>o(Ae,_e))H[Ge]=Ae,H[pe]=_e,Ge=pe;else break e}}return ae}function o(H,ae){var _e=H.sortIndex-ae.sortIndex;return _e!==0?_e:H.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],m=[],v=1,T=null,S=3,b=!1,q=!1,F=!1,z=!1,te=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ie(H){for(var ae=t(m);ae!==null;){if(ae.callback===null)i(m);else if(ae.startTime<=H)i(m),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(m)}}function le(H){if(F=!1,ie(H),!q)if(t(p)!==null)q=!0,de||(de=!0,L());else{var ae=t(m);ae!==null&&ft(le,ae.startTime-H)}}var de=!1,M=-1,N=5,x=-1;function D(){return z?!0:!(n.unstable_now()-x<N)}function V(){if(z=!1,de){var H=n.unstable_now();x=H;var ae=!0;try{e:{q=!1,F&&(F=!1,K(M),M=-1),b=!0;var _e=S;try{t:{for(ie(H),T=t(p);T!==null&&!(T.expirationTime>H&&D());){var Ge=T.callback;if(typeof Ge=="function"){T.callback=null,S=T.priorityLevel;var Ye=Ge(T.expirationTime<=H);if(H=n.unstable_now(),typeof Ye=="function"){T.callback=Ye,ie(H),ae=!0;break t}T===t(p)&&i(p),ie(H)}else i(p);T=t(p)}if(T!==null)ae=!0;else{var O=t(m);O!==null&&ft(le,O.startTime-H),ae=!1}}break e}finally{T=null,S=_e,b=!1}ae=void 0}}finally{ae?L():de=!1}}}var L;if(typeof Q=="function")L=function(){Q(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,rt=P.port2;P.port1.onmessage=V,L=function(){rt.postMessage(null)}}else L=function(){te(V,0)};function ft(H,ae){M=te(function(){H(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(H){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var _e=S;S=ae;try{return H()}finally{S=_e}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var _e=S;S=H;try{return ae()}finally{S=_e}},n.unstable_scheduleCallback=function(H,ae,_e){var Ge=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ge+_e:Ge):_e=Ge,H){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=_e+Ye,H={id:v++,callback:ae,priorityLevel:H,startTime:_e,expirationTime:Ye,sortIndex:-1},_e>Ge?(H.sortIndex=_e,e(m,H),t(p)===null&&H===t(m)&&(F?(K(M),M=-1):F=!0,ft(le,_e-Ge))):(H.sortIndex=Ye,e(p,H),q||b||(q=!0,de||(de=!0,L()))),H},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(H){var ae=S;return function(){var _e=S;S=ae;try{return H.apply(this,arguments)}finally{S=_e}}}})(Cp)),Cp}var jv;function sw(){return jv||(jv=1,Ap.exports=iw()),Ap.exports}var Ip={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function rw(){if(eT)return an;eT=1;var n=Tm();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,v)},an.flushSync=function(p){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=v,i.d.f()}},an.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},an.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},an.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:b}):v==="script"&&i.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},an.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},an.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=d(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},an.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},an.requestFormReset=function(p){i.d.r(p)},an.unstable_batchedUpdates=function(p,m){return p(m)},an.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.2.0",an}var tT;function ow(){if(tT)return Ip.exports;tT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ip.exports=rw(),Ip.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function aw(){if(nT)return Fl;nT=1;var n=sw(),e=Tm(),t=ow();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function m(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return p(y),s;if(_===c)return p(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var A=!1,R=y.child;R;){if(R===l){A=!0,l=y,c=_;break}if(R===c){A=!0,c=y,l=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===l){A=!0,l=_,c=y;break}if(R===c){A=!0,c=_,l=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function rt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case te:return"Profiler";case z:return"StrictMode";case le:return"Suspense";case de:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case q:return"Portal";case Q:return s.displayName||"Context";case K:return(s._context.displayName||"Context")+".Consumer";case ie:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:rt(s.type)||"Memo";case N:r=s._payload,s=s._init;try{return rt(s(r))}catch{}}return null}var ft=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ge=[],Ye=-1;function O(s){return{current:s}}function j(s){0>Ye||(s.current=Ge[Ye],Ge[Ye]=null,Ye--)}function oe(s,r){Ye++,Ge[Ye]=s.current,s.current=r}var pe=O(null),Ae=O(null),ue=O(null),ye=O(null);function ke(s,r){switch(oe(ue,r),oe(Ae,s),oe(pe,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?yv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=yv(r),s=_v(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}j(pe),oe(pe,s)}function De(){j(pe),j(Ae),j(ue)}function St(s){s.memoizedState!==null&&oe(ye,s);var r=pe.current,l=_v(r,s.type);r!==l&&(oe(Ae,s),oe(pe,l))}function ii(s){Ae.current===s&&(j(pe),j(Ae)),ye.current===s&&(j(ye),Vl._currentValue=_e)}var si,kt;function sn(s){if(si===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);si=r&&r[1]||"",kt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+si+s+kt}var Nn=!1;function xn(s,r){if(!s||Nn)return"";Nn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var $=X}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(X){$=X}s.call(ne.prototype)}}else{try{throw Error()}catch(X){$=X}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var k=A.split(`
`),Y=R.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===Y.length)for(c=k.length-1,y=Y.length-1;1<=c&&0<=y&&k[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==Y[y]){var Z=`
`+k[c].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=c&&0<=y);break}}}finally{Nn=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?sn(l):""}function yf(s,r){switch(s.tag){case 26:case 27:case 5:return sn(s.type);case 16:return sn("Lazy");case 13:return s.child!==r&&r!==null?sn("Suspense Fallback"):sn("Suspense");case 19:return sn("SuspenseList");case 0:case 15:return xn(s.type,!1);case 11:return xn(s.type.render,!1);case 1:return xn(s.type,!0);case 31:return sn("Activity");default:return""}}function wu(s){try{var r="",l=null;do r+=yf(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ro=Object.prototype.hasOwnProperty,Pr=n.unstable_scheduleCallback,wo=n.unstable_cancelCallback,_f=n.unstable_shouldYield,Oa=n.unstable_requestPaint,Yt=n.unstable_now,bu=n.unstable_getCurrentPriorityLevel,Vt=n.unstable_ImmediatePriority,qt=n.unstable_UserBlockingPriority,Oi=n.unstable_NormalPriority,Nu=n.unstable_LowPriority,qa=n.unstable_IdlePriority,vf=n.log,kr=n.unstable_setDisableYieldValue,Ss=null,rn=null;function Bn(s){if(typeof vf=="function"&&kr(s),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Ss,s)}catch{}}var hn=Math.clz32?Math.clz32:xu,Tf=Math.log,Fa=Math.LN2;function xu(s){return s>>>=0,s===0?32:31-(Tf(s)/Fa|0)|0}var Vr=256,gi=262144,As=4194304;function ri(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Hn(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~_,c!==0?y=ri(c):(A&=R,A!==0?y=ri(A):l||(l=R&~s,l!==0&&(y=ri(l))))):(R=c&~_,R!==0?y=ri(R):A!==0?y=ri(A):l||(l=c&~s,l!==0&&(y=ri(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function Cs(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function bo(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ba(){var s=As;return As<<=1,(As&62914560)===0&&(As=4194304),s}function qi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Is(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Kt(s,r,l,c,y,_){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,k=s.expirationTimes,Y=s.hiddenUpdates;for(l=A&~l;0<l;){var Z=31-hn(l),ne=1<<Z;R[Z]=0,k[Z]=-1;var $=Y[Z];if($!==null)for(Y[Z]=null,Z=0;Z<$.length;Z++){var X=$[Z];X!==null&&(X.lane&=-536870913)}l&=~ne}c!==0&&Ha(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~r))}function Ha(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-hn(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Rs(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-hn(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function ws(s,r){var l=r&-r;return l=(l&42)!==0?1:Ga(l),(l&(s.suspendedLanes|r))!==0?0:l}function Ga(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function za(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Fi(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:Bv(s.type))}function Mu(s,r){var l=ae.p;try{return ae.p=s,r()}finally{ae.p=l}}var yi=Math.random().toString(36).slice(2),gt="__reactFiber$"+yi,$t="__reactProps$"+yi,_i="__reactContainer$"+yi,bs="__reactEvents$"+yi,vi="__reactListeners$"+yi,Du="__reactHandles$"+yi,Ja="__reactResources$"+yi,Bi="__reactMarker$"+yi;function Ur(s){delete s[gt],delete s[$t],delete s[bs],delete s[vi],delete s[Du]}function Hi(s){var r=s[gt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[_i]||l[gt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Iv(s);s!==null;){if(l=s[gt])return l;s=Iv(s)}return r}s=l,l=s.parentNode}return null}function Gi(s){if(s=s[gt]||s[_i]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Lr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function oi(s){var r=s[Ja];return r||(r=s[Ja]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(s){s[Bi]=!0}var No=new Set,Ns={};function pn(s,r){Ti(s,r),Ti(s+"Capture",r)}function Ti(s,r){for(Ns[s]=r,s=0;s<r.length;s++)No.add(r[s])}var Ef=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ya={},Ka={};function Pu(s){return Ro.call(Ka,s)?!0:Ro.call(Ya,s)?!1:Ef.test(s)?Ka[s]=!0:(Ya[s]=!0,!1)}function xs(s,r,l){if(Pu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Ms(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Gn(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function mn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ku(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Sf(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function xo(s){if(!s._valueTracker){var r=ku(s)?"checked":"value";s._valueTracker=Sf(s,r,""+s[r])}}function $a(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=ku(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Mo(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var zi=/[\n"\\]/g;function yt(s){return s.replace(zi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ds(s,r,l,c,y,_,A,R){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+mn(r)):s.value!==""+mn(r)&&(s.value=""+mn(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?Do(s,A,mn(r)):l!=null?Do(s,A,mn(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+mn(R):s.removeAttribute("name")}function Or(s,r,l,c,y,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){xo(s);return}l=l!=null?""+mn(l):"",r=r!=null?""+mn(r):l,R||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),xo(s)}function Do(s,r,l){r==="number"&&Mo(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Ke(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+mn(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function qr(s,r,l){if(r!=null&&(r=""+mn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+mn(l):""}function Ps(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(ft(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=mn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),xo(s)}function zn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Af=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qa(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Af.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Vu(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&Qa(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&Qa(s,_,r[_])}function Xa(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),If=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(s){return If.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ft(){}var Po=null;function ko(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ji=null,Mn=null;function Uu(s){var r=Gi(s);if(r&&(s=r.stateNode)){var l=s[$t]||null;e:switch(s=r.stateNode,r.type){case"input":if(Ds(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+yt(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[$t]||null;if(!y)throw Error(i(90));Ds(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&$a(c)}break e;case"textarea":qr(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Ke(s,!!l.multiple,r,!1)}}}var Wa=!1;function Lu(s,r,l){if(Wa)return s(r,l);Wa=!0;try{var c=s(r);return c}finally{if(Wa=!1,(Ji!==null||Mn!==null)&&(Pc(),Ji&&(r=Ji,s=Mn,Mn=Ji=null,Uu(r),s)))for(r=0;r<s.length;r++)Uu(s[r])}}function Tn(s,r){var l=s.stateNode;if(l===null)return null;var c=l[$t]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Za=!1;if(ai)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){Za=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{Za=!1}var Dn=null,Vo=null,Ai=null;function ks(){if(Ai)return Ai;var s,r=Vo,l=r.length,c,y="value"in Dn?Dn.value:Dn.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[_-c];c++);return Ai=y.slice(s,1<c?1-c:void 0)}function Fr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Vs(){return!0}function at(){return!1}function on(s){function r(l,c,y,_,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Vs:at,this.isPropagationStopped=at,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Vs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Vs)},persist:function(){},isPersistent:Vs}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Br=on(Yi),Us=T({},Yi,{view:0,detail:0}),Ou=on(Us),Ls,Uo,gn,Hr=T({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gn&&(gn&&s.type==="mousemove"?(Ls=s.screenX-gn.screenX,Uo=s.screenY-gn.screenY):Uo=Ls=0,gn=s),Ls)},movementY:function(s){return"movementY"in s?s.movementY:Uo}}),qu=on(Hr),Gr=T({},Hr,{dataTransfer:0}),Fu=on(Gr),ja=T({},Us,{relatedTarget:0}),Os=on(ja),Bu=T({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Lo=on(Bu),Rf=T({},Yi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Hu=on(Rf),zr=T({},Yi,{data:0}),el=on(zr),Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=nl[s])?!!r[s]:!1}function qs(){return zu}var Ju=T({},Us,{key:function(s){if(s.key){var r=Gu[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Fr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?tl[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qs,charCode:function(s){return s.type==="keypress"?Fr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Fr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Yu=on(Ju),Ki=T({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),il=on(Ki),Ku=T({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qs}),$u=on(Ku),Qu=T({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oo=on(Qu),yn=T({},Hr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Xu=on(yn),Wu=T({},Yi,{newState:0,oldState:0}),Fs=on(Wu),h=[9,13,27,32],E=ai&&"CompositionEvent"in window,C=null;ai&&"documentMode"in document&&(C=document.documentMode);var w=ai&&"TextEvent"in window&&!C,G=ai&&(!E||C&&8<C&&11>=C),W=" ",ce=!1;function Ze(s,r){switch(s){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ve=!1;function Bt(s,r){switch(s){case"compositionend":return wt(r);case"keypress":return r.which!==32?null:(ce=!0,W);case"textInput":return s=r.data,s===W&&ce?null:s;default:return null}}function Ht(s,r){if(Ve)return s==="compositionend"||!E&&Ze(s,r)?(s=ks(),Ai=Vo=Dn=null,Ve=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return G&&r.locale!=="ko"?null:r.data;default:return null}}var Bs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function En(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Bs[s.type]:r==="textarea"}function Jr(s,r,l,c){Ji?Mn?Mn.push(c):Mn=[c]:Ji=c,r=Fc(r,"onChange"),0<r.length&&(l=new Br("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var $i=null,sl=null;function RI(s){dv(s,0)}function Zu(s){var r=Lr(s);if($a(r))return s}function xg(s,r){if(s==="change")return r}var Mg=!1;if(ai){var wf;if(ai){var bf="oninput"in document;if(!bf){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),bf=typeof Dg.oninput=="function"}wf=bf}else wf=!1;Mg=wf&&(!document.documentMode||9<document.documentMode)}function Pg(){$i&&($i.detachEvent("onpropertychange",kg),sl=$i=null)}function kg(s){if(s.propertyName==="value"&&Zu(sl)){var r=[];Jr(r,sl,s,ko(s)),Lu(RI,r)}}function wI(s,r,l){s==="focusin"?(Pg(),$i=r,sl=l,$i.attachEvent("onpropertychange",kg)):s==="focusout"&&Pg()}function bI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zu(sl)}function NI(s,r){if(s==="click")return Zu(r)}function xI(s,r){if(s==="input"||s==="change")return Zu(r)}function MI(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Pn=typeof Object.is=="function"?Object.is:MI;function rl(s,r){if(Pn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Ro.call(r,y)||!Pn(s[y],r[y]))return!1}return!0}function Vg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ug(s,r){var l=Vg(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Vg(l)}}function Lg(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Lg(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Og(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Mo(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Mo(s.document)}return r}function Nf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var DI=ai&&"documentMode"in document&&11>=document.documentMode,qo=null,xf=null,ol=null,Mf=!1;function qg(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Mf||qo==null||qo!==Mo(c)||(c=qo,"selectionStart"in c&&Nf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ol&&rl(ol,c)||(ol=c,c=Fc(xf,"onSelect"),0<c.length&&(r=new Br("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=qo)))}function Yr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Fo={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},Df={},Fg={};ai&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function Kr(s){if(Df[s])return Df[s];if(!Fo[s])return s;var r=Fo[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Fg)return Df[s]=r[l];return s}var Bg=Kr("animationend"),Hg=Kr("animationiteration"),Gg=Kr("animationstart"),PI=Kr("transitionrun"),kI=Kr("transitionstart"),VI=Kr("transitioncancel"),zg=Kr("transitionend"),Jg=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function li(s,r){Jg.set(s,r),pn(r,[s])}var ju=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Jn=[],Bo=0,kf=0;function ec(){for(var s=Bo,r=kf=Bo=0;r<s;){var l=Jn[r];Jn[r++]=null;var c=Jn[r];Jn[r++]=null;var y=Jn[r];Jn[r++]=null;var _=Jn[r];if(Jn[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&Yg(l,y,_)}}function tc(s,r,l,c){Jn[Bo++]=s,Jn[Bo++]=r,Jn[Bo++]=l,Jn[Bo++]=c,kf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Vf(s,r,l,c){return tc(s,r,l,c),nc(s)}function $r(s,r){return tc(s,null,null,r),nc(s)}function Yg(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-hn(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function nc(s){if(50<bl)throw bl=0,zh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Ho={};function UI(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(s,r,l,c){return new UI(s,r,l,c)}function Uf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qi(s,r){var l=s.alternate;return l===null?(l=kn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Kg(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function ic(s,r,l,c,y,_){var A=0;if(c=s,typeof s=="function")Uf(s)&&(A=1);else if(typeof s=="string")A=BR(s,l,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=kn(31,l,r,y),s.elementType=x,s.lanes=_,s;case F:return Qr(l.children,y,_,r);case z:A=8,y|=24;break;case te:return s=kn(12,l,r,y|2),s.elementType=te,s.lanes=_,s;case le:return s=kn(13,l,r,y),s.elementType=le,s.lanes=_,s;case de:return s=kn(19,l,r,y),s.elementType=de,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:A=10;break e;case K:A=9;break e;case ie:A=11;break e;case M:A=14;break e;case N:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=kn(A,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function Qr(s,r,l,c){return s=kn(7,s,c,r),s.lanes=l,s}function Lf(s,r,l){return s=kn(6,s,null,r),s.lanes=l,s}function $g(s){var r=kn(18,null,null,0);return r.stateNode=s,r}function Of(s,r,l){return r=kn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Qg=new WeakMap;function Yn(s,r){if(typeof s=="object"&&s!==null){var l=Qg.get(s);return l!==void 0?l:(r={value:s,source:r,stack:wu(r)},Qg.set(s,r),r)}return{value:s,source:r,stack:wu(r)}}var Go=[],zo=0,sc=null,al=0,Kn=[],$n=0,Hs=null,Ci=1,Ii="";function Xi(s,r){Go[zo++]=al,Go[zo++]=sc,sc=s,al=r}function Xg(s,r,l){Kn[$n++]=Ci,Kn[$n++]=Ii,Kn[$n++]=Hs,Hs=s;var c=Ci;s=Ii;var y=32-hn(c)-1;c&=~(1<<y),l+=1;var _=32-hn(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Ci=1<<32-hn(r)+y|l<<y|c,Ii=_+s}else Ci=1<<_|l<<y|c,Ii=s}function qf(s){s.return!==null&&(Xi(s,1),Xg(s,1,0))}function Ff(s){for(;s===sc;)sc=Go[--zo],Go[zo]=null,al=Go[--zo],Go[zo]=null;for(;s===Hs;)Hs=Kn[--$n],Kn[$n]=null,Ii=Kn[--$n],Kn[$n]=null,Ci=Kn[--$n],Kn[$n]=null}function Wg(s,r){Kn[$n++]=Ci,Kn[$n++]=Ii,Kn[$n++]=Hs,Ci=r.id,Ii=r.overflow,Hs=s}var Qt=null,lt=null,ze=!1,Gs=null,Qn=!1,Bf=Error(i(519));function zs(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ll(Yn(r,s)),Bf}function Zg(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[gt]=s,r[$t]=c,l){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(l=0;l<xl.length;l++)Oe(xl[l],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),Or(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Ps(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||mv(r.textContent,l)?(c.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),c.onScroll!=null&&Oe("scroll",r),c.onScrollEnd!=null&&Oe("scrollend",r),c.onClick!=null&&(r.onclick=Ft),r=!0):r=!1,r||zs(s,!0)}function jg(s){for(Qt=s.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Qt=Qt.return}}function Jo(s){if(s!==Qt)return!1;if(!ze)return jg(s),ze=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||rp(s.type,s.memoizedProps)),l=!l),l&&lt&&zs(s),jg(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=Cv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=Cv(s)}else r===27?(r=lt,sr(s.type)?(s=cp,cp=null,lt=s):lt=r):lt=Qt?Wn(s.stateNode.nextSibling):null;return!0}function Xr(){lt=Qt=null,ze=!1}function Hf(){var s=Gs;return s!==null&&(In===null?In=s:In.push.apply(In,s),Gs=null),s}function ll(s){Gs===null?Gs=[s]:Gs.push(s)}var Gf=O(null),Wr=null,Wi=null;function Js(s,r,l){oe(Gf,r._currentValue),r._currentValue=l}function Zi(s){s._currentValue=Gf.current,j(Gf)}function zf(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Jf(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=y;for(var k=0;k<r.length;k++)if(R.context===r[k]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),zf(_.return,l,s),c||(A=null);break e}_=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),zf(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Yo(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;Pn(y.pendingProps.value,A.value)||(s!==null?s.push(R):s=[R])}}else if(y===ye.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Vl):s=[Vl])}y=y.return}s!==null&&Jf(r,s,l,c),r.flags|=262144}function rc(s){for(s=s.firstContext;s!==null;){if(!Pn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Zr(s){Wr=s,Wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Xt(s){return ey(Wr,s)}function oc(s,r){return Wr===null&&Zr(s),ey(s,r)}function ey(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Wi===null){if(s===null)throw Error(i(308));Wi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Wi=Wi.next=r;return l}var LI=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},OI=n.unstable_scheduleCallback,qI=n.unstable_NormalPriority,bt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new LI,data:new Map,refCount:0}}function ul(s){s.refCount--,s.refCount===0&&OI(qI,function(){s.controller.abort()})}var cl=null,Kf=0,Ko=0,$o=null;function FI(s,r){if(cl===null){var l=cl=[];Kf=0,Ko=Xh(),$o={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Kf++,r.then(ty,ty),r}function ty(){if(--Kf===0&&cl!==null){$o!==null&&($o.status="fulfilled");var s=cl;cl=null,Ko=0,$o=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function BI(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var ny=H.S;H.S=function(s,r){q_=Yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&FI(s,r),ny!==null&&ny(s,r)};var jr=O(null);function $f(){var s=jr.current;return s!==null?s:ot.pooledCache}function ac(s,r){r===null?oe(jr,jr.current):oe(jr,r.pool)}function iy(){var s=$f();return s===null?null:{parent:bt._currentValue,pool:s}}var Qo=Error(i(460)),Qf=Error(i(474)),lc=Error(i(542)),uc={then:function(){}};function sy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ry(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Ft,Ft),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,ay(s),s;default:if(typeof r.status=="string")r.then(Ft,Ft);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,ay(s),s}throw to=r,Qo}}function eo(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(to=l,Qo):l}}var to=null;function oy(){if(to===null)throw Error(i(459));var s=to;return to=null,s}function ay(s){if(s===Qo||s===lc)throw Error(i(483))}var Xo=null,dl=0;function cc(s){var r=dl;return dl+=1,Xo===null&&(Xo=[]),ry(Xo,s,r)}function fl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function dc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ly(s){function r(B,U){if(s){var J=B.deletions;J===null?(B.deletions=[U],B.flags|=16):J.push(U)}}function l(B,U){if(!s)return null;for(;U!==null;)r(B,U),U=U.sibling;return null}function c(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function y(B,U){return B=Qi(B,U),B.index=0,B.sibling=null,B}function _(B,U,J){return B.index=J,s?(J=B.alternate,J!==null?(J=J.index,J<U?(B.flags|=67108866,U):J):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function A(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function R(B,U,J,ee){return U===null||U.tag!==6?(U=Lf(J,B.mode,ee),U.return=B,U):(U=y(U,J),U.return=B,U)}function k(B,U,J,ee){var Te=J.type;return Te===F?Z(B,U,J.props.children,ee,J.key):U!==null&&(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&eo(Te)===U.type)?(U=y(U,J.props),fl(U,J),U.return=B,U):(U=ic(J.type,J.key,J.props,null,B.mode,ee),fl(U,J),U.return=B,U)}function Y(B,U,J,ee){return U===null||U.tag!==4||U.stateNode.containerInfo!==J.containerInfo||U.stateNode.implementation!==J.implementation?(U=Of(J,B.mode,ee),U.return=B,U):(U=y(U,J.children||[]),U.return=B,U)}function Z(B,U,J,ee,Te){return U===null||U.tag!==7?(U=Qr(J,B.mode,ee,Te),U.return=B,U):(U=y(U,J),U.return=B,U)}function ne(B,U,J){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Lf(""+U,B.mode,J),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return J=ic(U.type,U.key,U.props,null,B.mode,J),fl(J,U),J.return=B,J;case q:return U=Of(U,B.mode,J),U.return=B,U;case N:return U=eo(U),ne(B,U,J)}if(ft(U)||L(U))return U=Qr(U,B.mode,J,null),U.return=B,U;if(typeof U.then=="function")return ne(B,cc(U),J);if(U.$$typeof===Q)return ne(B,oc(B,U),J);dc(B,U)}return null}function $(B,U,J,ee){var Te=U!==null?U.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Te!==null?null:R(B,U,""+J,ee);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===Te?k(B,U,J,ee):null;case q:return J.key===Te?Y(B,U,J,ee):null;case N:return J=eo(J),$(B,U,J,ee)}if(ft(J)||L(J))return Te!==null?null:Z(B,U,J,ee,null);if(typeof J.then=="function")return $(B,U,cc(J),ee);if(J.$$typeof===Q)return $(B,U,oc(B,J),ee);dc(B,J)}return null}function X(B,U,J,ee,Te){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(J)||null,R(U,B,""+ee,Te);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return B=B.get(ee.key===null?J:ee.key)||null,k(U,B,ee,Te);case q:return B=B.get(ee.key===null?J:ee.key)||null,Y(U,B,ee,Te);case N:return ee=eo(ee),X(B,U,J,ee,Te)}if(ft(ee)||L(ee))return B=B.get(J)||null,Z(U,B,ee,Te,null);if(typeof ee.then=="function")return X(B,U,J,cc(ee),Te);if(ee.$$typeof===Q)return X(B,U,J,oc(U,ee),Te);dc(U,ee)}return null}function me(B,U,J,ee){for(var Te=null,$e=null,ge=U,Me=U=0,Fe=null;ge!==null&&Me<J.length;Me++){ge.index>Me?(Fe=ge,ge=null):Fe=ge.sibling;var Qe=$(B,ge,J[Me],ee);if(Qe===null){ge===null&&(ge=Fe);break}s&&ge&&Qe.alternate===null&&r(B,ge),U=_(Qe,U,Me),$e===null?Te=Qe:$e.sibling=Qe,$e=Qe,ge=Fe}if(Me===J.length)return l(B,ge),ze&&Xi(B,Me),Te;if(ge===null){for(;Me<J.length;Me++)ge=ne(B,J[Me],ee),ge!==null&&(U=_(ge,U,Me),$e===null?Te=ge:$e.sibling=ge,$e=ge);return ze&&Xi(B,Me),Te}for(ge=c(ge);Me<J.length;Me++)Fe=X(ge,B,Me,J[Me],ee),Fe!==null&&(s&&Fe.alternate!==null&&ge.delete(Fe.key===null?Me:Fe.key),U=_(Fe,U,Me),$e===null?Te=Fe:$e.sibling=Fe,$e=Fe);return s&&ge.forEach(function(ur){return r(B,ur)}),ze&&Xi(B,Me),Te}function Se(B,U,J,ee){if(J==null)throw Error(i(151));for(var Te=null,$e=null,ge=U,Me=U=0,Fe=null,Qe=J.next();ge!==null&&!Qe.done;Me++,Qe=J.next()){ge.index>Me?(Fe=ge,ge=null):Fe=ge.sibling;var ur=$(B,ge,Qe.value,ee);if(ur===null){ge===null&&(ge=Fe);break}s&&ge&&ur.alternate===null&&r(B,ge),U=_(ur,U,Me),$e===null?Te=ur:$e.sibling=ur,$e=ur,ge=Fe}if(Qe.done)return l(B,ge),ze&&Xi(B,Me),Te;if(ge===null){for(;!Qe.done;Me++,Qe=J.next())Qe=ne(B,Qe.value,ee),Qe!==null&&(U=_(Qe,U,Me),$e===null?Te=Qe:$e.sibling=Qe,$e=Qe);return ze&&Xi(B,Me),Te}for(ge=c(ge);!Qe.done;Me++,Qe=J.next())Qe=X(ge,B,Me,Qe.value,ee),Qe!==null&&(s&&Qe.alternate!==null&&ge.delete(Qe.key===null?Me:Qe.key),U=_(Qe,U,Me),$e===null?Te=Qe:$e.sibling=Qe,$e=Qe);return s&&ge.forEach(function(ZR){return r(B,ZR)}),ze&&Xi(B,Me),Te}function st(B,U,J,ee){if(typeof J=="object"&&J!==null&&J.type===F&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var Te=J.key;U!==null;){if(U.key===Te){if(Te=J.type,Te===F){if(U.tag===7){l(B,U.sibling),ee=y(U,J.props.children),ee.return=B,B=ee;break e}}else if(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&eo(Te)===U.type){l(B,U.sibling),ee=y(U,J.props),fl(ee,J),ee.return=B,B=ee;break e}l(B,U);break}else r(B,U);U=U.sibling}J.type===F?(ee=Qr(J.props.children,B.mode,ee,J.key),ee.return=B,B=ee):(ee=ic(J.type,J.key,J.props,null,B.mode,ee),fl(ee,J),ee.return=B,B=ee)}return A(B);case q:e:{for(Te=J.key;U!==null;){if(U.key===Te)if(U.tag===4&&U.stateNode.containerInfo===J.containerInfo&&U.stateNode.implementation===J.implementation){l(B,U.sibling),ee=y(U,J.children||[]),ee.return=B,B=ee;break e}else{l(B,U);break}else r(B,U);U=U.sibling}ee=Of(J,B.mode,ee),ee.return=B,B=ee}return A(B);case N:return J=eo(J),st(B,U,J,ee)}if(ft(J))return me(B,U,J,ee);if(L(J)){if(Te=L(J),typeof Te!="function")throw Error(i(150));return J=Te.call(J),Se(B,U,J,ee)}if(typeof J.then=="function")return st(B,U,cc(J),ee);if(J.$$typeof===Q)return st(B,U,oc(B,J),ee);dc(B,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,U!==null&&U.tag===6?(l(B,U.sibling),ee=y(U,J),ee.return=B,B=ee):(l(B,U),ee=Lf(J,B.mode,ee),ee.return=B,B=ee),A(B)):l(B,U)}return function(B,U,J,ee){try{dl=0;var Te=st(B,U,J,ee);return Xo=null,Te}catch(ge){if(ge===Qo||ge===lc)throw ge;var $e=kn(29,ge,null,B.mode);return $e.lanes=ee,$e.return=B,$e}finally{}}}var no=ly(!0),uy=ly(!1),Ys=!1;function Xf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wf(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ks(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $s(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=nc(s),Yg(s,null,l),r}return tc(s,c,r,l),nc(s)}function hl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Rs(s,l)}}function Zf(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var jf=!1;function pl(){if(jf){var s=$o;if(s!==null)throw s}}function ml(s,r,l,c){jf=!1;var y=s.updateQueue;Ys=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var k=R,Y=k.next;k.next=null,A===null?_=Y:A.next=Y,A=k;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==A&&(R===null?Z.firstBaseUpdate=Y:R.next=Y,Z.lastBaseUpdate=k))}if(_!==null){var ne=y.baseState;A=0,Z=Y=k=null,R=_;do{var $=R.lane&-536870913,X=$!==R.lane;if(X?(qe&$)===$:(c&$)===$){$!==0&&$===Ko&&(jf=!0),Z!==null&&(Z=Z.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var me=s,Se=R;$=r;var st=l;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){ne=me.call(st,ne,$);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,$=typeof me=="function"?me.call(st,ne,$):me,$==null)break e;ne=T({},ne,$);break e;case 2:Ys=!0}}$=R.callback,$!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[$]:X.push($))}else X={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(Y=Z=X,k=ne):Z=Z.next=X,A|=$;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;X=R,R=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);Z===null&&(k=ne),y.baseState=k,y.firstBaseUpdate=Y,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),js|=A,s.lanes=A,s.memoizedState=ne}}function cy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function dy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)cy(l[s],r)}var Wo=O(null),fc=O(0);function fy(s,r){s=as,oe(fc,s),oe(Wo,r),as=s|r.baseLanes}function eh(){oe(fc,as),oe(Wo,Wo.current)}function th(){as=fc.current,j(Wo),j(fc)}var Vn=O(null),Xn=null;function Qs(s){var r=s.alternate;oe(Ct,Ct.current&1),oe(Vn,s),Xn===null&&(r===null||Wo.current!==null||r.memoizedState!==null)&&(Xn=s)}function nh(s){oe(Ct,Ct.current),oe(Vn,s),Xn===null&&(Xn=s)}function hy(s){s.tag===22?(oe(Ct,Ct.current),oe(Vn,s),Xn===null&&(Xn=s)):Xs()}function Xs(){oe(Ct,Ct.current),oe(Vn,Vn.current)}function Un(s){j(Vn),Xn===s&&(Xn=null),j(Ct)}var Ct=O(0);function hc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||lp(l)||up(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ji=0,xe=null,nt=null,Nt=null,pc=!1,Zo=!1,io=!1,mc=0,gl=0,jo=null,HI=0;function _t(){throw Error(i(321))}function ih(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Pn(s[l],r[l]))return!1;return!0}function sh(s,r,l,c,y,_){return ji=_,xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=s===null||s.memoizedState===null?Xy:vh,io=!1,_=l(c,y),io=!1,Zo&&(_=my(r,l,c,y)),py(s),_}function py(s){H.H=vl;var r=nt!==null&&nt.next!==null;if(ji=0,Nt=nt=xe=null,pc=!1,gl=0,jo=null,r)throw Error(i(300));s===null||xt||(s=s.dependencies,s!==null&&rc(s)&&(xt=!0))}function my(s,r,l,c){xe=s;var y=0;do{if(Zo&&(jo=null),gl=0,Zo=!1,25<=y)throw Error(i(301));if(y+=1,Nt=nt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=Wy,_=r(l,c)}while(Zo);return _}function GI(){var s=H.H,r=s.useState()[0];return r=typeof r.then=="function"?yl(r):r,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(xe.flags|=1024),r}function rh(){var s=mc!==0;return mc=0,s}function oh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function ah(s){if(pc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}pc=!1}ji=0,Nt=nt=xe=null,Zo=!1,gl=mc=0,jo=null}function _n(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?xe.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function It(){if(nt===null){var s=xe.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var r=Nt===null?xe.memoizedState:Nt.next;if(r!==null)Nt=r,nt=s;else{if(s===null)throw xe.alternate===null?Error(i(467)):Error(i(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Nt===null?xe.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(s){var r=gl;return gl+=1,jo===null&&(jo=[]),s=ry(jo,s,r),r=xe,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?Xy:vh),s}function yc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return yl(s);if(s.$$typeof===Q)return Xt(s)}throw Error(i(438,String(s)))}function lh(s){var r=null,l=xe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=gc(),xe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=D;return r.index++,l}function es(s,r){return typeof r=="function"?r(s):r}function _c(s){var r=It();return uh(r,nt,s)}function uh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var R=A=null,k=null,Y=r,Z=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(qe&ne)===ne:(ji&ne)===ne){var $=Y.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Ko&&(Z=!0);else if((ji&$)===$){Y=Y.next,$===Ko&&(Z=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(R=k=ne,A=_):k=k.next=ne,xe.lanes|=$,js|=$;ne=Y.action,io&&l(_,ne),_=Y.hasEagerState?Y.eagerState:l(_,ne)}else $={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(R=k=$,A=_):k=k.next=$,xe.lanes|=ne,js|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(k===null?A=_:k.next=R,!Pn(_,s.memoizedState)&&(xt=!0,Z&&(l=$o,l!==null)))throw l;s.memoizedState=_,s.baseState=A,s.baseQueue=k,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function ch(s){var r=It(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do _=s(_,A.action),A=A.next;while(A!==y);Pn(_,r.memoizedState)||(xt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function gy(s,r,l){var c=xe,y=It(),_=ze;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!Pn((nt||y).memoizedState,l);if(A&&(y.memoizedState=l,xt=!0),y=y.queue,hh(vy.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||Nt!==null&&Nt.memoizedState.tag&1){if(c.flags|=2048,ea(9,{destroy:void 0},_y.bind(null,c,y,l,r),null),ot===null)throw Error(i(349));_||(ji&127)!==0||yy(c,r,l)}return l}function yy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=xe.updateQueue,r===null?(r=gc(),xe.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function _y(s,r,l,c){r.value=l,r.getSnapshot=c,Ty(r)&&Ey(s)}function vy(s,r,l){return l(function(){Ty(r)&&Ey(s)})}function Ty(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Pn(s,l)}catch{return!0}}function Ey(s){var r=$r(s,2);r!==null&&Rn(r,s,2)}function dh(s){var r=_n();if(typeof s=="function"){var l=s;if(s=l(),io){Bn(!0);try{l()}finally{Bn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:s},r}function Sy(s,r,l,c){return s.baseState=l,uh(s,nt,typeof c=="function"?c:es)}function zI(s,r,l,c,y){if(Ec(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};H.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,Ay(r,_)):(_.next=l.next,r.pending=l.next=_)}}function Ay(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=H.T,A={};H.T=A;try{var R=l(y,c),k=H.S;k!==null&&k(A,R),Cy(s,r,R)}catch(Y){fh(s,r,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),H.T=_}}else try{_=l(y,c),Cy(s,r,_)}catch(Y){fh(s,r,Y)}}function Cy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Iy(s,r,c)},function(c){return fh(s,r,c)}):Iy(s,r,l)}function Iy(s,r,l){r.status="fulfilled",r.value=l,Ry(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Ay(s,l)))}function fh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Ry(r),r=r.next;while(r!==c)}s.action=null}function Ry(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function wy(s,r){return r}function by(s,r){if(ze){var l=ot.formState;if(l!==null){e:{var c=xe;if(ze){if(lt){t:{for(var y=lt,_=Qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Wn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){lt=Wn(y.nextSibling),c=y.data==="F!";break e}}zs(c)}c=!1}c&&(r=l[0])}}return l=_n(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:r},l.queue=c,l=Ky.bind(null,xe,c),c.dispatch=l,c=dh(!1),_=_h.bind(null,xe,!1,c.queue),c=_n(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=zI.bind(null,xe,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function Ny(s){var r=It();return xy(r,nt,s)}function xy(s,r,l){if(r=uh(s,r,wy)[0],s=_c(es)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=yl(r)}catch(A){throw A===Qo?lc:A}else c=r;r=It();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(xe.flags|=2048,ea(9,{destroy:void 0},JI.bind(null,y,l),null)),[c,_,s]}function JI(s,r){s.action=r}function My(s){var r=It(),l=nt;if(l!==null)return xy(r,l,s);It(),r=r.memoizedState,l=It();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ea(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=xe.updateQueue,r===null&&(r=gc(),xe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function Dy(){return It().memoizedState}function vc(s,r,l,c){var y=_n();xe.flags|=s,y.memoizedState=ea(1|r,{destroy:void 0},l,c===void 0?null:c)}function Tc(s,r,l,c){var y=It();c=c===void 0?null:c;var _=y.memoizedState.inst;nt!==null&&c!==null&&ih(c,nt.memoizedState.deps)?y.memoizedState=ea(r,_,l,c):(xe.flags|=s,y.memoizedState=ea(1|r,_,l,c))}function Py(s,r){vc(8390656,8,s,r)}function hh(s,r){Tc(2048,8,s,r)}function YI(s){xe.flags|=4;var r=xe.updateQueue;if(r===null)r=gc(),xe.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function ky(s){var r=It().memoizedState;return YI({ref:r,nextImpl:s}),function(){if((We&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Vy(s,r){return Tc(4,2,s,r)}function Uy(s,r){return Tc(4,4,s,r)}function Ly(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Oy(s,r,l){l=l!=null?l.concat([s]):null,Tc(4,4,Ly.bind(null,r,s),l)}function ph(){}function qy(s,r){var l=It();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&ih(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function Fy(s,r){var l=It();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&ih(r,c[1]))return c[0];if(c=s(),io){Bn(!0);try{s()}finally{Bn(!1)}}return l.memoizedState=[c,r],c}function mh(s,r,l){return l===void 0||(ji&1073741824)!==0&&(qe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=B_(),xe.lanes|=s,js|=s,l)}function By(s,r,l,c){return Pn(l,r)?l:Wo.current!==null?(s=mh(s,l,c),Pn(s,r)||(xt=!0),s):(ji&42)===0||(ji&1073741824)!==0&&(qe&261930)===0?(xt=!0,s.memoizedState=l):(s=B_(),xe.lanes|=s,js|=s,r)}function Hy(s,r,l,c,y){var _=ae.p;ae.p=_!==0&&8>_?_:8;var A=H.T,R={};H.T=R,_h(s,!1,r,l);try{var k=y(),Y=H.S;if(Y!==null&&Y(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Z=BI(k,c);_l(s,r,Z,qn(s))}else _l(s,r,c,qn(s))}catch(ne){_l(s,r,{then:function(){},status:"rejected",reason:ne},qn())}finally{ae.p=_,A!==null&&R.types!==null&&(A.types=R.types),H.T=A}}function KI(){}function gh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=Gy(s).queue;Hy(s,y,r,_e,l===null?KI:function(){return zy(s),l(c)})}function Gy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:_e},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function zy(s){var r=Gy(s);r.next===null&&(r=s.alternate.memoizedState),_l(s,r.next.queue,{},qn())}function yh(){return Xt(Vl)}function Jy(){return It().memoizedState}function Yy(){return It().memoizedState}function $I(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=qn();s=Ks(l);var c=$s(r,s,l);c!==null&&(Rn(c,r,l),hl(c,r,l)),r={cache:Yf()},s.payload=r;return}r=r.return}}function QI(s,r,l){var c=qn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ec(s)?$y(r,l):(l=Vf(s,r,l,c),l!==null&&(Rn(l,s,c),Qy(l,r,c)))}function Ky(s,r,l){var c=qn();_l(s,r,l,c)}function _l(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ec(s))$y(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,R=_(A,l);if(y.hasEagerState=!0,y.eagerState=R,Pn(R,A))return tc(s,r,y,0),ot===null&&ec(),!1}catch{}finally{}if(l=Vf(s,r,y,c),l!==null)return Rn(l,s,c),Qy(l,r,c),!0}return!1}function _h(s,r,l,c){if(c={lane:2,revertLane:Xh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ec(s)){if(r)throw Error(i(479))}else r=Vf(s,l,c,2),r!==null&&Rn(r,s,2)}function Ec(s){var r=s.alternate;return s===xe||r!==null&&r===xe}function $y(s,r){Zo=pc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function Qy(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Rs(s,l)}}var vl={readContext:Xt,use:yc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};vl.useEffectEvent=_t;var Xy={readContext:Xt,use:yc,useCallback:function(s,r){return _n().memoizedState=[s,r===void 0?null:r],s},useContext:Xt,useEffect:Py,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,vc(4194308,4,Ly.bind(null,r,s),l)},useLayoutEffect:function(s,r){return vc(4194308,4,s,r)},useInsertionEffect:function(s,r){vc(4,2,s,r)},useMemo:function(s,r){var l=_n();r=r===void 0?null:r;var c=s();if(io){Bn(!0);try{s()}finally{Bn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=_n();if(l!==void 0){var y=l(r);if(io){Bn(!0);try{l(r)}finally{Bn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=QI.bind(null,xe,s),[c.memoizedState,s]},useRef:function(s){var r=_n();return s={current:s},r.memoizedState=s},useState:function(s){s=dh(s);var r=s.queue,l=Ky.bind(null,xe,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:ph,useDeferredValue:function(s,r){var l=_n();return mh(l,s,r)},useTransition:function(){var s=dh(!1);return s=Hy.bind(null,xe,s.queue,!0,!1),_n().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=xe,y=_n();if(ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ot===null)throw Error(i(349));(qe&127)!==0||yy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Py(vy.bind(null,c,_,s),[s]),c.flags|=2048,ea(9,{destroy:void 0},_y.bind(null,c,_,l,r),null),l},useId:function(){var s=_n(),r=ot.identifierPrefix;if(ze){var l=Ii,c=Ci;l=(c&~(1<<32-hn(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=mc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=HI++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:yh,useFormState:by,useActionState:by,useOptimistic:function(s){var r=_n();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=_h.bind(null,xe,!0,l),l.dispatch=r,[s,r]},useMemoCache:lh,useCacheRefresh:function(){return _n().memoizedState=$I.bind(null,xe)},useEffectEvent:function(s){var r=_n(),l={impl:s};return r.memoizedState=l,function(){if((We&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},vh={readContext:Xt,use:yc,useCallback:qy,useContext:Xt,useEffect:hh,useImperativeHandle:Oy,useInsertionEffect:Vy,useLayoutEffect:Uy,useMemo:Fy,useReducer:_c,useRef:Dy,useState:function(){return _c(es)},useDebugValue:ph,useDeferredValue:function(s,r){var l=It();return By(l,nt.memoizedState,s,r)},useTransition:function(){var s=_c(es)[0],r=It().memoizedState;return[typeof s=="boolean"?s:yl(s),r]},useSyncExternalStore:gy,useId:Jy,useHostTransitionStatus:yh,useFormState:Ny,useActionState:Ny,useOptimistic:function(s,r){var l=It();return Sy(l,nt,s,r)},useMemoCache:lh,useCacheRefresh:Yy};vh.useEffectEvent=ky;var Wy={readContext:Xt,use:yc,useCallback:qy,useContext:Xt,useEffect:hh,useImperativeHandle:Oy,useInsertionEffect:Vy,useLayoutEffect:Uy,useMemo:Fy,useReducer:ch,useRef:Dy,useState:function(){return ch(es)},useDebugValue:ph,useDeferredValue:function(s,r){var l=It();return nt===null?mh(l,s,r):By(l,nt.memoizedState,s,r)},useTransition:function(){var s=ch(es)[0],r=It().memoizedState;return[typeof s=="boolean"?s:yl(s),r]},useSyncExternalStore:gy,useId:Jy,useHostTransitionStatus:yh,useFormState:My,useActionState:My,useOptimistic:function(s,r){var l=It();return nt!==null?Sy(l,nt,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:lh,useCacheRefresh:Yy};Wy.useEffectEvent=ky;function Th(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Eh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=qn(),y=Ks(c);y.payload=r,l!=null&&(y.callback=l),r=$s(s,y,c),r!==null&&(Rn(r,s,c),hl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=qn(),y=Ks(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=$s(s,y,c),r!==null&&(Rn(r,s,c),hl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=qn(),c=Ks(l);c.tag=2,r!=null&&(c.callback=r),r=$s(s,c,l),r!==null&&(Rn(r,s,l),hl(r,s,l))}};function Zy(s,r,l,c,y,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!rl(l,c)||!rl(y,_):!0}function jy(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Eh.enqueueReplaceState(r,r.state,null)}function so(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function e_(s){ju(s)}function t_(s){console.error(s)}function n_(s){ju(s)}function Sc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function i_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Sh(s,r,l){return l=Ks(l),l.tag=3,l.payload={element:null},l.callback=function(){Sc(s,r)},l}function s_(s){return s=Ks(s),s.tag=3,s}function r_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){i_(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){i_(r,l,c),typeof y!="function"&&(er===null?er=new Set([this]):er.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function XI(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Yo(r,l,y,!0),l=Vn.current,l!==null){switch(l.tag){case 31:case 13:return Xn===null?kc():l.alternate===null&&vt===0&&(vt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===uc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Kh(s,c,y)),!1;case 22:return l.flags|=65536,c===uc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Kh(s,c,y)),!1}throw Error(i(435,l.tag))}return Kh(s,c,y),kc(),!1}if(ze)return r=Vn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Bf&&(s=Error(i(422),{cause:c}),ll(Yn(s,l)))):(c!==Bf&&(r=Error(i(423),{cause:c}),ll(Yn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Yn(c,l),y=Sh(s.stateNode,c,y),Zf(s,y),vt!==4&&(vt=2)),!1;var _=Error(i(520),{cause:c});if(_=Yn(_,l),wl===null?wl=[_]:wl.push(_),vt!==4&&(vt=2),r===null)return!0;c=Yn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Sh(l.stateNode,c,s),Zf(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(er===null||!er.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=s_(y),r_(y,s,l,c),Zf(l,y),!1}l=l.return}while(l!==null);return!1}var Ah=Error(i(461)),xt=!1;function Wt(s,r,l,c){r.child=s===null?uy(r,null,l,c):no(r,s.child,l,c)}function o_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return Zr(r),c=sh(s,r,l,A,_,y),R=rh(),s!==null&&!xt?(oh(s,r,y),ts(s,r,y)):(ze&&R&&qf(r),r.flags|=1,Wt(s,r,c,y),r.child)}function a_(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Uf(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,l_(s,r,_,c,y)):(s=ic(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Mh(s,y)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:rl,l(A,c)&&s.ref===r.ref)return ts(s,r,y)}return r.flags|=1,s=Qi(_,c),s.ref=r.ref,s.return=r,r.child=s}function l_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(rl(_,c)&&s.ref===r.ref)if(xt=!1,r.pendingProps=c=_,Mh(s,y))(s.flags&131072)!==0&&(xt=!0);else return r.lanes=s.lanes,ts(s,r,y)}return Ch(s,r,l,c,y)}function u_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return c_(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&ac(r,_!==null?_.cachePool:null),_!==null?fy(r,_):eh(),hy(r);else return c=r.lanes=536870912,c_(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(ac(r,_.cachePool),fy(r,_),Xs(),r.memoizedState=null):(s!==null&&ac(r,null),eh(),Xs());return Wt(s,r,y,l),r.child}function Tl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function c_(s,r,l,c,y){var _=$f();return _=_===null?null:{parent:bt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&ac(r,null),eh(),hy(r),s!==null&&Yo(s,r,c,!0),r.childLanes=y,null}function Ac(s,r){return r=Ic({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function d_(s,r,l){return no(r,s.child,null,l),s=Ac(r,r.pendingProps),s.flags|=2,Un(r),r.memoizedState=null,s}function WI(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(ze){if(c.mode==="hidden")return s=Ac(r,c),r.lanes=536870912,Tl(null,s);if(nh(r),(s=lt)?(s=Av(s,Qn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Hs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},l=$g(s),l.return=r,r.child=l,Qt=r,lt=null)):s=null,s===null)throw zs(r);return r.lanes=536870912,null}return Ac(r,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(nh(r),y)if(r.flags&256)r.flags&=-257,r=d_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(xt||Yo(s,r,l,!1),y=(l&s.childLanes)!==0,xt||y){if(c=ot,c!==null&&(A=ws(c,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,$r(s,A),Rn(c,s,A),Ah;kc(),r=d_(s,r,l)}else s=_.treeContext,lt=Wn(A.nextSibling),Qt=r,ze=!0,Gs=null,Qn=!1,s!==null&&Wg(r,s),r=Ac(r,c),r.flags|=4096;return r}return s=Qi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Cc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Ch(s,r,l,c,y){return Zr(r),l=sh(s,r,l,c,void 0,y),c=rh(),s!==null&&!xt?(oh(s,r,y),ts(s,r,y)):(ze&&c&&qf(r),r.flags|=1,Wt(s,r,l,y),r.child)}function f_(s,r,l,c,y,_){return Zr(r),r.updateQueue=null,l=my(r,c,l,y),py(s),c=rh(),s!==null&&!xt?(oh(s,r,_),ts(s,r,_)):(ze&&c&&qf(r),r.flags|=1,Wt(s,r,l,_),r.child)}function h_(s,r,l,c,y){if(Zr(r),r.stateNode===null){var _=Ho,A=l.contextType;typeof A=="object"&&A!==null&&(_=Xt(A)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Eh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},Xf(r),A=l.contextType,_.context=typeof A=="object"&&A!==null?Xt(A):Ho,_.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Th(r,l,A,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Eh.enqueueReplaceState(_,_.state,null),ml(r,c,_,y),pl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var R=r.memoizedProps,k=so(l,R);_.props=k;var Y=_.context,Z=l.contextType;A=Ho,typeof Z=="object"&&Z!==null&&(A=Xt(Z));var ne=l.getDerivedStateFromProps;Z=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||Y!==A)&&jy(r,_,c,A),Ys=!1;var $=r.memoizedState;_.state=$,ml(r,c,_,y),pl(),Y=r.memoizedState,R||$!==Y||Ys?(typeof ne=="function"&&(Th(r,l,ne,c),Y=r.memoizedState),(k=Ys||Zy(r,l,k,c,$,Y,A))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),_.props=c,_.state=Y,_.context=A,c=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Wf(s,r),A=r.memoizedProps,Z=so(l,A),_.props=Z,ne=r.pendingProps,$=_.context,Y=l.contextType,k=Ho,typeof Y=="object"&&Y!==null&&(k=Xt(Y)),R=l.getDerivedStateFromProps,(Y=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ne||$!==k)&&jy(r,_,c,k),Ys=!1,$=r.memoizedState,_.state=$,ml(r,c,_,y),pl();var X=r.memoizedState;A!==ne||$!==X||Ys||s!==null&&s.dependencies!==null&&rc(s.dependencies)?(typeof R=="function"&&(Th(r,l,R,c),X=r.memoizedState),(Z=Ys||Zy(r,l,Z,c,$,X,k)||s!==null&&s.dependencies!==null&&rc(s.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,X,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,X,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=X),_.props=c,_.state=X,_.context=k,c=Z):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Cc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=no(r,s.child,null,y),r.child=no(r,null,l,y)):Wt(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ts(s,r,y),s}function p_(s,r,l,c){return Xr(),r.flags|=256,Wt(s,r,l,c),r.child}var Ih={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rh(s){return{baseLanes:s,cachePool:iy()}}function wh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=On),s}function m_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(Ct.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(ze){if(y?Qs(r):Xs(),(s=lt)?(s=Av(s,Qn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Hs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},l=$g(s),l.return=r,r.child=l,Qt=r,lt=null)):s=null,s===null)throw zs(r);return up(s)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Xs(),y=r.mode,R=Ic({mode:"hidden",children:R},y),c=Qr(c,y,l,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=Rh(l),c.childLanes=wh(s,A,l),r.memoizedState=Ih,Tl(null,c)):(Qs(r),bh(r,R))}var k=s.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(_)r.flags&256?(Qs(r),r.flags&=-257,r=Nh(s,r,l)):r.memoizedState!==null?(Xs(),r.child=s.child,r.flags|=128,r=null):(Xs(),R=c.fallback,y=r.mode,c=Ic({mode:"visible",children:c.children},y),R=Qr(R,y,l,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,no(r,s.child,null,l),c=r.child,c.memoizedState=Rh(l),c.childLanes=wh(s,A,l),r.memoizedState=Ih,r=Tl(null,c));else if(Qs(r),up(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(i(419)),c.stack="",c.digest=A,ll({value:c,source:null,stack:null}),r=Nh(s,r,l)}else if(xt||Yo(s,r,l,!1),A=(l&s.childLanes)!==0,xt||A){if(A=ot,A!==null&&(c=ws(A,l),c!==0&&c!==k.retryLane))throw k.retryLane=c,$r(s,c),Rn(A,s,c),Ah;lp(R)||kc(),r=Nh(s,r,l)}else lp(R)?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,lt=Wn(R.nextSibling),Qt=r,ze=!0,Gs=null,Qn=!1,s!==null&&Wg(r,s),r=bh(r,c.children),r.flags|=4096);return r}return y?(Xs(),R=c.fallback,y=r.mode,k=s.child,Y=k.sibling,c=Qi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,Y!==null?R=Qi(Y,R):(R=Qr(R,y,l,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,Tl(null,c),c=r.child,R=s.child.memoizedState,R===null?R=Rh(l):(y=R.cachePool,y!==null?(k=bt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=iy(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=wh(s,A,l),r.memoizedState=Ih,Tl(s.child,c)):(Qs(r),l=s.child,s=l.sibling,l=Qi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function bh(s,r){return r=Ic({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Ic(s,r){return s=kn(22,s,null,r),s.lanes=0,s}function Nh(s,r,l){return no(r,s.child,null,l),s=bh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function g_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),zf(s.return,r,l)}function xh(s,r,l,c,y,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=_)}function y_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Ct.current,R=(A&2)!==0;if(R?(A=A&1|2,r.flags|=128):A&=1,oe(Ct,A),Wt(s,r,c,l),c=ze?al:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&g_(s,l,r);else if(s.tag===19)g_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&hc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),xh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&hc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}xh(r,!0,l,null,_,c);break;case"together":xh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ts(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),js|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Yo(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Qi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Qi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Mh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&rc(s)))}function ZI(s,r,l){switch(r.tag){case 3:ke(r,r.stateNode.containerInfo),Js(r,bt,s.memoizedState.cache),Xr();break;case 27:case 5:St(r);break;case 4:ke(r,r.stateNode.containerInfo);break;case 10:Js(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,nh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Qs(r),r.flags|=128,null):(l&r.child.childLanes)!==0?m_(s,r,l):(Qs(r),s=ts(s,r,l),s!==null?s.sibling:null);Qs(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Yo(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return y_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),oe(Ct,Ct.current),c)break;return null;case 22:return r.lanes=0,u_(s,r,l,r.pendingProps);case 24:Js(r,bt,s.memoizedState.cache)}return ts(s,r,l)}function __(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)xt=!0;else{if(!Mh(s,l)&&(r.flags&128)===0)return xt=!1,ZI(s,r,l);xt=(s.flags&131072)!==0}else xt=!1,ze&&(r.flags&1048576)!==0&&Xg(r,al,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=eo(r.elementType),r.type=s,typeof s=="function")Uf(s)?(c=so(s,c),r.tag=1,r=h_(null,r,s,c,l)):(r.tag=0,r=Ch(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ie){r.tag=11,r=o_(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=a_(null,r,s,c,l);break e}}throw r=rt(s)||s,Error(i(306,r,""))}}return r;case 0:return Ch(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=so(c,r.pendingProps),h_(s,r,c,y,l);case 3:e:{if(ke(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Wf(s,r),ml(r,c,null,l);var A=r.memoizedState;if(c=A.cache,Js(r,bt,c),c!==_.cache&&Jf(r,[bt],l,!0),pl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=p_(s,r,c,l);break e}else if(c!==y){y=Yn(Error(i(424)),r),ll(y),r=p_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(lt=Wn(s.firstChild),Qt=r,ze=!0,Gs=null,Qn=!0,l=uy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Xr(),c===y){r=ts(s,r,l);break e}Wt(s,r,c,l)}r=r.child}return r;case 26:return Cc(s,r),s===null?(l=Nv(r.type,null,r.pendingProps,null))?r.memoizedState=l:ze||(l=r.type,s=r.pendingProps,c=Bc(ue.current).createElement(l),c[gt]=r,c[$t]=s,Zt(c,l,s),At(c),r.stateNode=c):r.memoizedState=Nv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return St(r),s===null&&ze&&(c=r.stateNode=Rv(r.type,r.pendingProps,ue.current),Qt=r,Qn=!0,y=lt,sr(r.type)?(cp=y,lt=Wn(c.firstChild)):lt=y),Wt(s,r,r.pendingProps.children,l),Cc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&ze&&((y=c=lt)&&(c=bR(c,r.type,r.pendingProps,Qn),c!==null?(r.stateNode=c,Qt=r,lt=Wn(c.firstChild),Qn=!1,y=!0):y=!1),y||zs(r)),St(r),y=r.type,_=r.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,rp(y,_)?c=null:A!==null&&rp(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=sh(s,r,GI,null,null,l),Vl._currentValue=y),Cc(s,r),Wt(s,r,c,l),r.child;case 6:return s===null&&ze&&((s=l=lt)&&(l=NR(l,r.pendingProps,Qn),l!==null?(r.stateNode=l,Qt=r,lt=null,s=!0):s=!1),s||zs(r)),null;case 13:return m_(s,r,l);case 4:return ke(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=no(r,null,c,l):Wt(s,r,c,l),r.child;case 11:return o_(s,r,r.type,r.pendingProps,l);case 7:return Wt(s,r,r.pendingProps,l),r.child;case 8:return Wt(s,r,r.pendingProps.children,l),r.child;case 12:return Wt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Js(r,r.type,c.value),Wt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Zr(r),y=Xt(y),c=c(y),r.flags|=1,Wt(s,r,c,l),r.child;case 14:return a_(s,r,r.type,r.pendingProps,l);case 15:return l_(s,r,r.type,r.pendingProps,l);case 19:return y_(s,r,l);case 31:return WI(s,r,l);case 22:return u_(s,r,l,r.pendingProps);case 24:return Zr(r),c=Xt(bt),s===null?(y=$f(),y===null&&(y=ot,_=Yf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},Xf(r),Js(r,bt,y)):((s.lanes&l)!==0&&(Wf(s,r),ml(r,null,null,l),pl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Js(r,bt,c)):(c=_.cache,Js(r,bt,c),c!==y.cache&&Jf(r,[bt],l,!0))),Wt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ns(s){s.flags|=4}function Dh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(J_())s.flags|=8192;else throw to=uc,Qf}else s.flags&=-16777217}function v_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!kv(r))if(J_())s.flags|=8192;else throw to=uc,Qf}function Rc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Ba():536870912,s.lanes|=r,sa|=r)}function El(s,r){if(!ze)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ut(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function jI(s,r,l){var c=r.pendingProps;switch(Ff(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Zi(bt),De(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Jo(r)?ns(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hf())),ut(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(ns(r),_!==null?(ut(r),v_(r,_)):(ut(r),Dh(r,y,null,c,l))):_?_!==s.memoizedState?(ns(r),ut(r),v_(r,_)):(ut(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&ns(r),ut(r),Dh(r,y,s,c,l)),null;case 27:if(ii(r),l=ue.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}s=pe.current,Jo(r)?Zg(r):(s=Rv(y,c,l),r.stateNode=s,ns(r))}return ut(r),null;case 5:if(ii(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}if(_=pe.current,Jo(r))Zg(r);else{var A=Bc(ue.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[gt]=r,_[$t]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(Zt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ns(r)}}return ut(r),Dh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&ns(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=ue.current,Jo(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Qt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[gt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||mv(s.nodeValue,l)),s||zs(r,!0)}else s=Bc(s).createTextNode(c),s[gt]=r,r.stateNode=s}return ut(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Jo(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[gt]=r}else Xr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),s=!1}else l=Hf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Un(r),r):(Un(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ut(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Jo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[gt]=r}else Xr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),y=!1}else y=Hf(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Un(r),r):(Un(r),null)}return Un(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Rc(r,r.updateQueue),ut(r),null);case 4:return De(),s===null&&ep(r.stateNode.containerInfo),ut(r),null;case 10:return Zi(r.type),ut(r),null;case 19:if(j(Ct),c=r.memoizedState,c===null)return ut(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)El(c,!1);else{if(vt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=hc(s),_!==null){for(r.flags|=128,El(c,!1),s=_.updateQueue,r.updateQueue=s,Rc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Kg(l,s),l=l.sibling;return oe(Ct,Ct.current&1|2),ze&&Xi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&Yt()>Mc&&(r.flags|=128,y=!0,El(c,!1),r.lanes=4194304)}else{if(!y)if(s=hc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Rc(r,s),El(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!ze)return ut(r),null}else 2*Yt()-c.renderingStartTime>Mc&&l!==536870912&&(r.flags|=128,y=!0,El(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Yt(),s.sibling=null,l=Ct.current,oe(Ct,y?l&1|2:l&1),ze&&Xi(r,c.treeForkCount),s):(ut(r),null);case 22:case 23:return Un(r),th(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),l=r.updateQueue,l!==null&&Rc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&j(jr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Zi(bt),ut(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function eR(s,r){switch(Ff(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Zi(bt),De(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ii(r),null;case 31:if(r.memoizedState!==null){if(Un(r),r.alternate===null)throw Error(i(340));Xr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Un(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Xr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return j(Ct),null;case 4:return De(),null;case 10:return Zi(r.type),null;case 22:case 23:return Un(r),th(),s!==null&&j(jr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Zi(bt),null;case 25:return null;default:return null}}function T_(s,r){switch(Ff(r),r.tag){case 3:Zi(bt),De();break;case 26:case 27:case 5:ii(r);break;case 4:De();break;case 31:r.memoizedState!==null&&Un(r);break;case 13:Un(r);break;case 19:j(Ct);break;case 10:Zi(r.type);break;case 22:case 23:Un(r),th(),s!==null&&j(jr);break;case 24:Zi(bt)}}function Sl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,A=l.inst;c=_(),A.destroy=c}l=l.next}while(l!==y)}}catch(R){tt(r,r.return,R)}}function Ws(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=r;var k=l,Y=R;try{Y()}catch(Z){tt(y,k,Z)}}}c=c.next}while(c!==_)}}catch(Z){tt(r,r.return,Z)}}function E_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{dy(r,l)}catch(c){tt(s,s.return,c)}}}function S_(s,r,l){l.props=so(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){tt(s,r,c)}}function Al(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){tt(s,r,y)}}function Ri(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){tt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){tt(s,r,y)}else l.current=null}function A_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){tt(s,s.return,y)}}function Ph(s,r,l){try{var c=s.stateNode;SR(c,s.type,l,r),c[$t]=r}catch(y){tt(s,s.return,y)}}function C_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&sr(s.type)||s.tag===4}function kh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||C_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&sr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ft));else if(c!==4&&(c===27&&sr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Vh(s,r,l),s=s.sibling;s!==null;)Vh(s,r,l),s=s.sibling}function wc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&sr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(wc(s,r,l),s=s.sibling;s!==null;)wc(s,r,l),s=s.sibling}function I_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Zt(r,c,l),r[gt]=s,r[$t]=l}catch(_){tt(s,s.return,_)}}var is=!1,Mt=!1,Uh=!1,R_=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function tR(s,r){if(s=s.containerInfo,ip=$c,s=Og(s),Nf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,R=-1,k=-1,Y=0,Z=0,ne=s,$=null;t:for(;;){for(var X;ne!==l||y!==0&&ne.nodeType!==3||(R=A+y),ne!==_||c!==0&&ne.nodeType!==3||(k=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),(X=ne.firstChild)!==null;)$=ne,ne=X;for(;;){if(ne===s)break t;if($===l&&++Y===y&&(R=A),$===_&&++Z===c&&(k=A),(X=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=X}l=R===-1||k===-1?null:{start:R,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(sp={focusedElem:s,selectionRange:l},$c=!1,Gt=r;Gt!==null;)if(r=Gt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Gt=s;else for(;Gt!==null;){switch(r=Gt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var me=so(l.type,y);s=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){tt(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)ap(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ap(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Gt=s;break}Gt=r.return}}function w_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:rs(s,l),c&4&&Sl(5,l);break;case 1:if(rs(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){tt(l,l.return,A)}else{var y=so(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(l,l.return,A)}}c&64&&E_(l),c&512&&Al(l,l.return);break;case 3:if(rs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{dy(s,r)}catch(A){tt(l,l.return,A)}}break;case 27:r===null&&c&4&&I_(l);case 26:case 5:rs(s,l),r===null&&c&4&&A_(l),c&512&&Al(l,l.return);break;case 12:rs(s,l);break;case 31:rs(s,l),c&4&&x_(s,l);break;case 13:rs(s,l),c&4&&M_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=cR.bind(null,l),xR(s,l))));break;case 22:if(c=l.memoizedState!==null||is,!c){r=r!==null&&r.memoizedState!==null||Mt,y=is;var _=Mt;is=c,(Mt=r)&&!_?os(s,l,(l.subtreeFlags&8772)!==0):rs(s,l),is=y,Mt=_}break;case 30:break;default:rs(s,l)}}function b_(s){var r=s.alternate;r!==null&&(s.alternate=null,b_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Ur(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ht=null,Sn=!1;function ss(s,r,l){for(l=l.child;l!==null;)N_(s,r,l),l=l.sibling}function N_(s,r,l){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ss,l)}catch{}switch(l.tag){case 26:Mt||Ri(l,r),ss(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Mt||Ri(l,r);var c=ht,y=Sn;sr(l.type)&&(ht=l.stateNode,Sn=!1),ss(s,r,l),Dl(l.stateNode),ht=c,Sn=y;break;case 5:Mt||Ri(l,r);case 6:if(c=ht,y=Sn,ht=null,ss(s,r,l),ht=c,Sn=y,ht!==null)if(Sn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(l.stateNode)}catch(_){tt(l,r,_)}else try{ht.removeChild(l.stateNode)}catch(_){tt(l,r,_)}break;case 18:ht!==null&&(Sn?(s=ht,Ev(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),fa(s)):Ev(ht,l.stateNode));break;case 4:c=ht,y=Sn,ht=l.stateNode.containerInfo,Sn=!0,ss(s,r,l),ht=c,Sn=y;break;case 0:case 11:case 14:case 15:Ws(2,l,r),Mt||Ws(4,l,r),ss(s,r,l);break;case 1:Mt||(Ri(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&S_(l,r,c)),ss(s,r,l);break;case 21:ss(s,r,l);break;case 22:Mt=(c=Mt)||l.memoizedState!==null,ss(s,r,l),Mt=c;break;default:ss(s,r,l)}}function x_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{fa(s)}catch(l){tt(r,r.return,l)}}}function M_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{fa(s)}catch(l){tt(r,r.return,l)}}function nR(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new R_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new R_),r;default:throw Error(i(435,s.tag))}}function bc(s,r){var l=nR(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=dR.bind(null,s,c);c.then(y,y)}})}function An(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,A=r,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(sr(R.type)){ht=R.stateNode,Sn=!1;break e}break;case 5:ht=R.stateNode,Sn=!1;break e;case 3:case 4:ht=R.stateNode.containerInfo,Sn=!0;break e}R=R.return}if(ht===null)throw Error(i(160));N_(_,A,y),ht=null,Sn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)D_(r,s),r=r.sibling}var ui=null;function D_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:An(r,s),Cn(s),c&4&&(Ws(3,s,s.return),Sl(3,s),Ws(5,s,s.return));break;case 1:An(r,s),Cn(s),c&512&&(Mt||l===null||Ri(l,l.return)),c&64&&is&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ui;if(An(r,s),Cn(s),c&512&&(Mt||l===null||Ri(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Bi]||_[gt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Zt(_,c,l),_[gt]=s,At(_),c=_;break e;case"link":var A=Dv("link","href",y).get(c+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}_=y.createElement(c),Zt(_,c,l),y.head.appendChild(_);break;case"meta":if(A=Dv("meta","content",y).get(c+(l.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}_=y.createElement(c),Zt(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[gt]=s,At(_),c=_}s.stateNode=c}else Pv(y,s.type,s.stateNode);else s.stateNode=Mv(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Pv(y,s.type,s.stateNode):Mv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Ph(s,s.memoizedProps,l.memoizedProps)}break;case 27:An(r,s),Cn(s),c&512&&(Mt||l===null||Ri(l,l.return)),l!==null&&c&4&&Ph(s,s.memoizedProps,l.memoizedProps);break;case 5:if(An(r,s),Cn(s),c&512&&(Mt||l===null||Ri(l,l.return)),s.flags&32){y=s.stateNode;try{zn(y,"")}catch(me){tt(s,s.return,me)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Ph(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Uh=!0);break;case 6:if(An(r,s),Cn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(me){tt(s,s.return,me)}}break;case 3:if(zc=null,y=ui,ui=Hc(r.containerInfo),An(r,s),ui=y,Cn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{fa(r.containerInfo)}catch(me){tt(s,s.return,me)}Uh&&(Uh=!1,P_(s));break;case 4:c=ui,ui=Hc(s.stateNode.containerInfo),An(r,s),Cn(s),ui=c;break;case 12:An(r,s),Cn(s);break;case 31:An(r,s),Cn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,bc(s,c)));break;case 13:An(r,s),Cn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(xc=Yt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,bc(s,c)));break;case 22:y=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,Y=is,Z=Mt;if(is=Y||y,Mt=Z||k,An(r,s),Mt=Z,is=Y,Cn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||k||is||Mt||ro(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){k=l=r;try{if(_=k.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=k.stateNode;var ne=k.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(me){tt(k,k.return,me)}}}else if(r.tag===6){if(l===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(me){tt(k,k.return,me)}}}else if(r.tag===18){if(l===null){k=r;try{var X=k.stateNode;y?Sv(X,!0):Sv(k.stateNode,!1)}catch(me){tt(k,k.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,bc(s,l))));break;case 19:An(r,s),Cn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,bc(s,c)));break;case 30:break;case 21:break;default:An(r,s),Cn(s)}}function Cn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(C_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=kh(s);wc(s,_,y);break;case 5:var A=l.stateNode;l.flags&32&&(zn(A,""),l.flags&=-33);var R=kh(s);wc(s,R,A);break;case 3:case 4:var k=l.stateNode.containerInfo,Y=kh(s);Vh(s,Y,k);break;default:throw Error(i(161))}}catch(Z){tt(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function P_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;P_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function rs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)w_(s,r.alternate,r),r=r.sibling}function ro(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ws(4,r,r.return),ro(r);break;case 1:Ri(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&S_(r,r.return,l),ro(r);break;case 27:Dl(r.stateNode);case 26:case 5:Ri(r,r.return),ro(r);break;case 22:r.memoizedState===null&&ro(r);break;case 30:ro(r);break;default:ro(r)}s=s.sibling}}function os(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:os(y,_,l),Sl(4,_);break;case 1:if(os(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){tt(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var R=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)cy(k[y],R)}catch(Y){tt(c,c.return,Y)}}l&&A&64&&E_(_),Al(_,_.return);break;case 27:I_(_);case 26:case 5:os(y,_,l),l&&c===null&&A&4&&A_(_),Al(_,_.return);break;case 12:os(y,_,l);break;case 31:os(y,_,l),l&&A&4&&x_(y,_);break;case 13:os(y,_,l),l&&A&4&&M_(y,_);break;case 22:_.memoizedState===null&&os(y,_,l),Al(_,_.return);break;case 30:break;default:os(y,_,l)}r=r.sibling}}function Lh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&ul(l))}function Oh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&ul(s))}function ci(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)k_(s,r,l,c),r=r.sibling}function k_(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ci(s,r,l,c),y&2048&&Sl(9,r);break;case 1:ci(s,r,l,c);break;case 3:ci(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&ul(s)));break;case 12:if(y&2048){ci(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){tt(r,r.return,k)}}else ci(s,r,l,c);break;case 31:ci(s,r,l,c);break;case 13:ci(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?ci(s,r,l,c):Cl(s,r):_._visibility&2?ci(s,r,l,c):(_._visibility|=2,ta(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Lh(A,r);break;case 24:ci(s,r,l,c),y&2048&&Oh(r.alternate,r);break;default:ci(s,r,l,c)}}function ta(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,A=r,R=l,k=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:ta(_,A,R,k,y),Sl(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?ta(_,A,R,k,y):Cl(_,A):(Z._visibility|=2,ta(_,A,R,k,y)),y&&Y&2048&&Lh(A.alternate,A);break;case 24:ta(_,A,R,k,y),y&&Y&2048&&Oh(A.alternate,A);break;default:ta(_,A,R,k,y)}r=r.sibling}}function Cl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Cl(l,c),y&2048&&Lh(c.alternate,c);break;case 24:Cl(l,c),y&2048&&Oh(c.alternate,c);break;default:Cl(l,c)}r=r.sibling}}var Il=8192;function na(s,r,l){if(s.subtreeFlags&Il)for(s=s.child;s!==null;)V_(s,r,l),s=s.sibling}function V_(s,r,l){switch(s.tag){case 26:na(s,r,l),s.flags&Il&&s.memoizedState!==null&&HR(l,ui,s.memoizedState,s.memoizedProps);break;case 5:na(s,r,l);break;case 3:case 4:var c=ui;ui=Hc(s.stateNode.containerInfo),na(s,r,l),ui=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Il,Il=16777216,na(s,r,l),Il=c):na(s,r,l));break;default:na(s,r,l)}}function U_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Rl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Gt=c,O_(c,s)}U_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)L_(s),s=s.sibling}function L_(s){switch(s.tag){case 0:case 11:case 15:Rl(s),s.flags&2048&&Ws(9,s,s.return);break;case 3:Rl(s);break;case 12:Rl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Nc(s)):Rl(s);break;default:Rl(s)}}function Nc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Gt=c,O_(c,s)}U_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ws(8,r,r.return),Nc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Nc(r));break;default:Nc(r)}s=s.sibling}}function O_(s,r){for(;Gt!==null;){var l=Gt;switch(l.tag){case 0:case 11:case 15:Ws(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ul(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Gt=c;else e:for(l=s;Gt!==null;){c=Gt;var y=c.sibling,_=c.return;if(b_(c),c===l){Gt=null;break e}if(y!==null){y.return=_,Gt=y;break e}Gt=_}}}var iR={getCacheForType:function(s){var r=Xt(bt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Xt(bt).controller.signal}},sR=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,Le=null,qe=0,et=0,Ln=null,Zs=!1,ia=!1,qh=!1,as=0,vt=0,js=0,oo=0,Fh=0,On=0,sa=0,wl=null,In=null,Bh=!1,xc=0,q_=0,Mc=1/0,Dc=null,er=null,Ut=0,tr=null,ra=null,ls=0,Hh=0,Gh=null,F_=null,bl=0,zh=null;function qn(){return(We&2)!==0&&qe!==0?qe&-qe:H.T!==null?Xh():Fi()}function B_(){if(On===0)if((qe&536870912)===0||ze){var s=gi;gi<<=1,(gi&3932160)===0&&(gi=262144),On=s}else On=536870912;return s=Vn.current,s!==null&&(s.flags|=32),On}function Rn(s,r,l){(s===ot&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(oa(s,0),nr(s,qe,On,!1)),Is(s,l),((We&2)===0||s!==ot)&&(s===ot&&((We&2)===0&&(oo|=l),vt===4&&nr(s,qe,On,!1)),wi(s))}function H_(s,r,l){if((We&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||Cs(s,r),y=c?aR(s,r):Yh(s,r,!0),_=c;do{if(y===0){ia&&!c&&nr(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!rR(l)){y=Yh(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var R=s;y=wl;var k=R.current.memoizedState.isDehydrated;if(k&&(oa(R,A).flags|=256),A=Yh(R,A,!1),A!==2){if(qh&&!k){R.errorRecoveryDisabledLanes|=_,oo|=_,y=4;break e}_=In,In=y,_!==null&&(In===null?In=_:In.push.apply(In,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){oa(s,0),nr(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:nr(c,r,On,!Zs);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=xc+300-Yt(),10<y)){if(nr(c,r,On,!Zs),Hn(c,0,!0)!==0)break e;ls=r,c.timeoutHandle=vv(G_.bind(null,c,l,In,Dc,Bh,r,On,oo,sa,Zs,_,"Throttled",-0,0),y);break e}G_(c,l,In,Dc,Bh,r,On,oo,sa,Zs,_,null,-0,0)}}break}while(!0);wi(s)}function G_(s,r,l,c,y,_,A,R,k,Y,Z,ne,$,X){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ft},V_(r,_,ne);var me=(_&62914560)===_?xc-Yt():(_&4194048)===_?q_-Yt():0;if(me=GR(ne,me),me!==null){ls=_,s.cancelPendingCommit=me(W_.bind(null,s,r,_,l,c,y,A,R,k,Z,ne,null,$,X)),nr(s,_,A,!Y);return}}W_(s,r,_,l,c,y,A,R,k)}function rR(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Pn(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function nr(s,r,l,c){r&=~Fh,r&=~oo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-hn(y),A=1<<_;c[_]=-1,y&=~A}l!==0&&Ha(s,l,r)}function Pc(){return(We&6)===0?(Nl(0),!1):!0}function Jh(){if(Le!==null){if(et===0)var s=Le.return;else s=Le,Wi=Wr=null,ah(s),Xo=null,dl=0,s=Le;for(;s!==null;)T_(s.alternate,s),s=s.return;Le=null}}function oa(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,IR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ls=0,Jh(),ot=s,Le=l=Qi(s.current,null),qe=r,et=0,Ln=null,Zs=!1,ia=Cs(s,r),qh=!1,sa=On=Fh=oo=js=vt=0,In=wl=null,Bh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-hn(c),_=1<<y;r|=s[y],c&=~_}return as=r,ec(),l}function z_(s,r){xe=null,H.H=vl,r===Qo||r===lc?(r=oy(),et=3):r===Qf?(r=oy(),et=4):et=r===Ah?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ln=r,Le===null&&(vt=1,Sc(s,Yn(r,s.current)))}function J_(){var s=Vn.current;return s===null?!0:(qe&4194048)===qe?Xn===null:(qe&62914560)===qe||(qe&536870912)!==0?s===Xn:!1}function Y_(){var s=H.H;return H.H=vl,s===null?vl:s}function K_(){var s=H.A;return H.A=iR,s}function kc(){vt=4,Zs||(qe&4194048)!==qe&&Vn.current!==null||(ia=!0),(js&134217727)===0&&(oo&134217727)===0||ot===null||nr(ot,qe,On,!1)}function Yh(s,r,l){var c=We;We|=2;var y=Y_(),_=K_();(ot!==s||qe!==r)&&(Dc=null,oa(s,r)),r=!1;var A=vt;e:do try{if(et!==0&&Le!==null){var R=Le,k=Ln;switch(et){case 8:Jh(),A=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(r=!0);var Y=et;if(et=0,Ln=null,aa(s,R,k,Y),l&&ia){A=0;break e}break;default:Y=et,et=0,Ln=null,aa(s,R,k,Y)}}oR(),A=vt;break}catch(Z){z_(s,Z)}while(!0);return r&&s.shellSuspendCounter++,Wi=Wr=null,We=c,H.H=y,H.A=_,Le===null&&(ot=null,qe=0,ec()),A}function oR(){for(;Le!==null;)$_(Le)}function aR(s,r){var l=We;We|=2;var c=Y_(),y=K_();ot!==s||qe!==r?(Dc=null,Mc=Yt()+500,oa(s,r)):ia=Cs(s,r);e:do try{if(et!==0&&Le!==null){r=Le;var _=Ln;t:switch(et){case 1:et=0,Ln=null,aa(s,r,_,1);break;case 2:case 9:if(sy(_)){et=0,Ln=null,Q_(r);break}r=function(){et!==2&&et!==9||ot!==s||(et=7),wi(s)},_.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:sy(_)?(et=0,Ln=null,Q_(r)):(et=0,Ln=null,aa(s,r,_,7));break;case 5:var A=null;switch(Le.tag){case 26:A=Le.memoizedState;case 5:case 27:var R=Le;if(A?kv(A):R.stateNode.complete){et=0,Ln=null;var k=R.sibling;if(k!==null)Le=k;else{var Y=R.return;Y!==null?(Le=Y,Vc(Y)):Le=null}break t}}et=0,Ln=null,aa(s,r,_,5);break;case 6:et=0,Ln=null,aa(s,r,_,6);break;case 8:Jh(),vt=6;break e;default:throw Error(i(462))}}lR();break}catch(Z){z_(s,Z)}while(!0);return Wi=Wr=null,H.H=c,H.A=y,We=l,Le!==null?0:(ot=null,qe=0,ec(),vt)}function lR(){for(;Le!==null&&!_f();)$_(Le)}function $_(s){var r=__(s.alternate,s,as);s.memoizedProps=s.pendingProps,r===null?Vc(s):Le=r}function Q_(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=f_(l,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=f_(l,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:ah(r);default:T_(l,r),r=Le=Kg(r,as),r=__(l,r,as)}s.memoizedProps=s.pendingProps,r===null?Vc(s):Le=r}function aa(s,r,l,c){Wi=Wr=null,ah(r),Xo=null,dl=0;var y=r.return;try{if(XI(s,y,r,l,qe)){vt=1,Sc(s,Yn(l,s.current)),Le=null;return}}catch(_){if(y!==null)throw Le=y,_;vt=1,Sc(s,Yn(l,s.current)),Le=null;return}r.flags&32768?(ze||c===1?s=!0:ia||(qe&536870912)!==0?s=!1:(Zs=s=!0,(c===2||c===9||c===3||c===6)&&(c=Vn.current,c!==null&&c.tag===13&&(c.flags|=16384))),X_(r,s)):Vc(r)}function Vc(s){var r=s;do{if((r.flags&32768)!==0){X_(r,Zs);return}s=r.return;var l=jI(r.alternate,r,as);if(l!==null){Le=l;return}if(r=r.sibling,r!==null){Le=r;return}Le=r=s}while(r!==null);vt===0&&(vt=5)}function X_(s,r){do{var l=eR(s.alternate,s);if(l!==null){l.flags&=32767,Le=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Le=s;return}Le=s=l}while(s!==null);vt=6,Le=null}function W_(s,r,l,c,y,_,A,R,k){s.cancelPendingCommit=null;do Uc();while(Ut!==0);if((We&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=kf,Kt(s,l,_,A,R,k),s===ot&&(Le=ot=null,qe=0),ra=r,tr=s,ls=l,Hh=_,Gh=y,F_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,fR(Oi,function(){return nv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,y=ae.p,ae.p=2,A=We,We|=4;try{tR(s,r,l)}finally{We=A,ae.p=y,H.T=c}}Ut=1,Z_(),j_(),ev()}}function Z_(){if(Ut===1){Ut=0;var s=tr,r=ra,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var c=ae.p;ae.p=2;var y=We;We|=4;try{D_(r,s);var _=sp,A=Og(s.containerInfo),R=_.focusedElem,k=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&Lg(R.ownerDocument.documentElement,R)){if(k!==null&&Nf(R)){var Y=k.start,Z=k.end;if(Z===void 0&&(Z=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(Z,R.value.length);else{var ne=R.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var X=$.getSelection(),me=R.textContent.length,Se=Math.min(k.start,me),st=k.end===void 0?Se:Math.min(k.end,me);!X.extend&&Se>st&&(A=st,st=Se,Se=A);var B=Ug(R,Se),U=Ug(R,st);if(B&&U&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==U.node||X.focusOffset!==U.offset)){var J=ne.createRange();J.setStart(B.node,B.offset),X.removeAllRanges(),Se>st?(X.addRange(J),X.extend(U.node,U.offset)):(J.setEnd(U.node,U.offset),X.addRange(J))}}}}for(ne=[],X=R;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ne.length;R++){var ee=ne[R];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}$c=!!ip,sp=ip=null}finally{We=y,ae.p=c,H.T=l}}s.current=r,Ut=2}}function j_(){if(Ut===2){Ut=0;var s=tr,r=ra,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var c=ae.p;ae.p=2;var y=We;We|=4;try{w_(s,r.alternate,r)}finally{We=y,ae.p=c,H.T=l}}Ut=3}}function ev(){if(Ut===4||Ut===3){Ut=0,Oa();var s=tr,r=ra,l=ls,c=F_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,ra=tr=null,tv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(er=null),za(l),r=r.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ss,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=H.T,y=ae.p,ae.p=2,H.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var R=c[A];_(R.value,{componentStack:R.stack})}}finally{H.T=r,ae.p=y}}(ls&3)!==0&&Uc(),wi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===zh?bl++:(bl=0,zh=s):bl=0,Nl(0)}}function tv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,ul(r)))}function Uc(){return Z_(),j_(),ev(),nv()}function nv(){if(Ut!==5)return!1;var s=tr,r=Hh;Hh=0;var l=za(ls),c=H.T,y=ae.p;try{ae.p=32>l?32:l,H.T=null,l=Gh,Gh=null;var _=tr,A=ls;if(Ut=0,ra=tr=null,ls=0,(We&6)!==0)throw Error(i(331));var R=We;if(We|=4,L_(_.current),k_(_,_.current,A,l),We=R,Nl(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ss,_)}catch{}return!0}finally{ae.p=y,H.T=c,tv(s,r)}}function iv(s,r,l){r=Yn(l,r),r=Sh(s.stateNode,r,2),s=$s(s,r,2),s!==null&&(Is(s,2),wi(s))}function tt(s,r,l){if(s.tag===3)iv(s,s,l);else for(;r!==null;){if(r.tag===3){iv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(er===null||!er.has(c))){s=Yn(l,s),l=s_(2),c=$s(r,l,2),c!==null&&(r_(l,c,r,s),Is(c,2),wi(c));break}}r=r.return}}function Kh(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new sR;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(qh=!0,y.add(l),s=uR.bind(null,s,r,l),r.then(s,s))}function uR(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ot===s&&(qe&l)===l&&(vt===4||vt===3&&(qe&62914560)===qe&&300>Yt()-xc?(We&2)===0&&oa(s,0):Fh|=l,sa===qe&&(sa=0)),wi(s)}function sv(s,r){r===0&&(r=Ba()),s=$r(s,r),s!==null&&(Is(s,r),wi(s))}function cR(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),sv(s,l)}function dR(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),sv(s,l)}function fR(s,r){return Pr(s,r)}var Lc=null,la=null,$h=!1,Oc=!1,Qh=!1,ir=0;function wi(s){s!==la&&s.next===null&&(la===null?Lc=la=s:la=la.next=s),Oc=!0,$h||($h=!0,pR())}function Nl(s,r){if(!Qh&&Oc){Qh=!0;do for(var l=!1,c=Lc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,R=c.pingedLanes;_=(1<<31-hn(42|s)+1)-1,_&=y&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,lv(c,_))}else _=qe,_=Hn(c,c===ot?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Cs(c,_)||(l=!0,lv(c,_));c=c.next}while(l);Qh=!1}}function hR(){rv()}function rv(){Oc=$h=!1;var s=0;ir!==0&&CR()&&(s=ir);for(var r=Yt(),l=null,c=Lc;c!==null;){var y=c.next,_=ov(c,r);_===0?(c.next=null,l===null?Lc=y:l.next=y,y===null&&(la=l)):(l=c,(s!==0||(_&3)!==0)&&(Oc=!0)),c=y}Ut!==0&&Ut!==5||Nl(s),ir!==0&&(ir=0)}function ov(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-hn(_),R=1<<A,k=y[A];k===-1?((R&l)===0||(R&c)!==0)&&(y[A]=bo(R,r)):k<=r&&(s.expiredLanes|=R),_&=~R}if(r=ot,l=qe,l=Hn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(et===2||et===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&wo(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Cs(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&wo(c),za(l)){case 2:case 8:l=qt;break;case 32:l=Oi;break;case 268435456:l=qa;break;default:l=Oi}return c=av.bind(null,s),l=Pr(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&wo(c),s.callbackPriority=2,s.callbackNode=null,2}function av(s,r){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Uc()&&s.callbackNode!==l)return null;var c=qe;return c=Hn(s,s===ot?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(H_(s,c,r),ov(s,Yt()),s.callbackNode!=null&&s.callbackNode===l?av.bind(null,s):null)}function lv(s,r){if(Uc())return null;H_(s,r,!0)}function pR(){RR(function(){(We&6)!==0?Pr(Vt,hR):rv()})}function Xh(){if(ir===0){var s=Ko;s===0&&(s=Vr,Vr<<=1,(Vr&261888)===0&&(Vr=256)),ir=s}return ir}function uv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ei(""+s)}function cv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function mR(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=uv((y[$t]||null).action),A=c.submitter;A&&(r=(r=A[$t]||null)?uv(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var R=new Br("action","action",null,c,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ir!==0){var k=A?cv(y,A):new FormData(y);gh(l,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(R.preventDefault(),k=A?cv(y,A):new FormData(y),gh(l,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var Wh=0;Wh<Pf.length;Wh++){var Zh=Pf[Wh],gR=Zh.toLowerCase(),yR=Zh[0].toUpperCase()+Zh.slice(1);li(gR,"on"+yR)}li(Bg,"onAnimationEnd"),li(Hg,"onAnimationIteration"),li(Gg,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(PI,"onTransitionRun"),li(kI,"onTransitionStart"),li(VI,"onTransitionCancel"),li(zg,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_R=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function dv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var R=c[A],k=R.instance,Y=R.currentTarget;if(R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=Y;try{_(y)}catch(Z){ju(Z)}y.currentTarget=null,_=k}else for(A=0;A<c.length;A++){if(R=c[A],k=R.instance,Y=R.currentTarget,R=R.listener,k!==_&&y.isPropagationStopped())break e;_=R,y.currentTarget=Y;try{_(y)}catch(Z){ju(Z)}y.currentTarget=null,_=k}}}}function Oe(s,r){var l=r[bs];l===void 0&&(l=r[bs]=new Set);var c=s+"__bubble";l.has(c)||(fv(r,s,2,!1),l.add(c))}function jh(s,r,l){var c=0;r&&(c|=4),fv(l,s,c,r)}var qc="_reactListening"+Math.random().toString(36).slice(2);function ep(s){if(!s[qc]){s[qc]=!0,No.forEach(function(l){l!=="selectionchange"&&(_R.has(l)||jh(l,!1,s),jh(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[qc]||(r[qc]=!0,jh("selectionchange",!1,r))}}function fv(s,r,l,c){switch(Bv(r)){case 2:var y=YR;break;case 8:y=KR;break;default:y=mp}l=y.bind(null,r,l,s),y=void 0,!Za||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function tp(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=Hi(R),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=_=A;continue e}R=R.parentNode}}c=c.return}Lu(function(){var Y=_,Z=ko(l),ne=[];e:{var $=Jg.get(s);if($!==void 0){var X=Br,me=s;switch(s){case"keypress":if(Fr(l)===0)break e;case"keydown":case"keyup":X=Yu;break;case"focusin":me="focus",X=Os;break;case"focusout":me="blur",X=Os;break;case"beforeblur":case"afterblur":X=Os;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=$u;break;case Bg:case Hg:case Gg:X=Lo;break;case zg:X=Oo;break;case"scroll":case"scrollend":X=Ou;break;case"wheel":X=Xu;break;case"copy":case"cut":case"paste":X=Hu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=il;break;case"toggle":case"beforetoggle":X=Fs}var Se=(r&4)!==0,st=!Se&&(s==="scroll"||s==="scrollend"),B=Se?$!==null?$+"Capture":null:$;Se=[];for(var U=Y,J;U!==null;){var ee=U;if(J=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||J===null||B===null||(ee=Tn(U,B),ee!=null&&Se.push(Ml(U,ee,J))),st)break;U=U.return}0<Se.length&&($=new X($,me,null,l,Z),ne.push({event:$,listeners:Se}))}}if((r&7)===0){e:{if($=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",$&&l!==Po&&(me=l.relatedTarget||l.fromElement)&&(Hi(me)||me[_i]))break e;if((X||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,X?(me=l.relatedTarget||l.toElement,X=Y,me=me?Hi(me):null,me!==null&&(st=a(me),Se=me.tag,me!==st||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(X=null,me=Y),X!==me)){if(Se=qu,ee="onMouseLeave",B="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(Se=il,ee="onPointerLeave",B="onPointerEnter",U="pointer"),st=X==null?$:Lr(X),J=me==null?$:Lr(me),$=new Se(ee,U+"leave",X,l,Z),$.target=st,$.relatedTarget=J,ee=null,Hi(Z)===Y&&(Se=new Se(B,U+"enter",me,l,Z),Se.target=J,Se.relatedTarget=st,ee=Se),st=ee,X&&me)t:{for(Se=vR,B=X,U=me,J=0,ee=B;ee;ee=Se(ee))J++;ee=0;for(var Te=U;Te;Te=Se(Te))ee++;for(;0<J-ee;)B=Se(B),J--;for(;0<ee-J;)U=Se(U),ee--;for(;J--;){if(B===U||U!==null&&B===U.alternate){Se=B;break t}B=Se(B),U=Se(U)}Se=null}else Se=null;X!==null&&hv(ne,$,X,Se,!1),me!==null&&st!==null&&hv(ne,st,me,Se,!0)}}e:{if($=Y?Lr(Y):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var $e=xg;else if(En($))if(Mg)$e=xI;else{$e=bI;var ge=wI}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Xa(Y.elementType)&&($e=xg):$e=NI;if($e&&($e=$e(s,Y))){Jr(ne,$e,l,Z);break e}ge&&ge(s,$,Y),s==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&Do($,"number",$.value)}switch(ge=Y?Lr(Y):window,s){case"focusin":(En(ge)||ge.contentEditable==="true")&&(qo=ge,xf=Y,ol=null);break;case"focusout":ol=xf=qo=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,qg(ne,l,Z);break;case"selectionchange":if(DI)break;case"keydown":case"keyup":qg(ne,l,Z)}var Me;if(E)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ve?Ze(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(G&&l.locale!=="ko"&&(Ve||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ve&&(Me=ks()):(Dn=Z,Vo="value"in Dn?Dn.value:Dn.textContent,Ve=!0)),ge=Fc(Y,Fe),0<ge.length&&(Fe=new el(Fe,s,null,l,Z),ne.push({event:Fe,listeners:ge}),Me?Fe.data=Me:(Me=wt(l),Me!==null&&(Fe.data=Me)))),(Me=w?Bt(s,l):Ht(s,l))&&(Fe=Fc(Y,"onBeforeInput"),0<Fe.length&&(ge=new el("onBeforeInput","beforeinput",null,l,Z),ne.push({event:ge,listeners:Fe}),ge.data=Me)),mR(ne,s,Y,l,Z)}dv(ne,r)})}function Ml(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Fc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Tn(s,l),y!=null&&c.unshift(Ml(s,y,_)),y=Tn(s,r),y!=null&&c.push(Ml(s,y,_))),s.tag===3)return c;s=s.return}return[]}function vR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function hv(s,r,l,c,y){for(var _=r._reactName,A=[];l!==null&&l!==c;){var R=l,k=R.alternate,Y=R.stateNode;if(R=R.tag,k!==null&&k===c)break;R!==5&&R!==26&&R!==27||Y===null||(k=Y,y?(Y=Tn(l,_),Y!=null&&A.unshift(Ml(l,Y,k))):y||(Y=Tn(l,_),Y!=null&&A.push(Ml(l,Y,k)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var TR=/\r\n?/g,ER=/\u0000|\uFFFD/g;function pv(s){return(typeof s=="string"?s:""+s).replace(TR,`
`).replace(ER,"")}function mv(s,r){return r=pv(r),pv(s)===r}function it(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||zn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&zn(s,""+c);break;case"className":Ms(s,"class",c);break;case"tabIndex":Ms(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ms(s,l,c);break;case"style":Vu(s,c,_);break;case"data":if(r!=="object"){Ms(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ei(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&it(s,r,"name",y.name,y,null),it(s,r,"formEncType",y.formEncType,y,null),it(s,r,"formMethod",y.formMethod,y,null),it(s,r,"formTarget",y.formTarget,y,null)):(it(s,r,"encType",y.encType,y,null),it(s,r,"method",y.method,y,null),it(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ei(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Ft);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ei(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Oe("beforetoggle",s),Oe("toggle",s),xs(s,"popover",c);break;case"xlinkActuate":Gn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Gn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Gn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Gn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Gn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Gn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Gn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Gn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Gn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":xs(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Cf.get(l)||l,xs(s,l,c))}}function np(s,r,l,c,y,_){switch(l){case"style":Vu(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?zn(s,c):(typeof c=="number"||typeof c=="bigint")&&zn(s,""+c);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ft);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ns.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[$t]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):xs(s,l,c)}}}function Zt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",s),Oe("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:it(s,r,_,A,l,null)}}y&&it(s,r,"srcSet",l.srcSet,l,null),c&&it(s,r,"src",l.src,l,null);return;case"input":Oe("invalid",s);var R=_=A=y=null,k=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var Z=l[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":A=Z;break;case"checked":k=Z;break;case"defaultChecked":Y=Z;break;case"value":_=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:it(s,r,c,Z,l,null)}}Or(s,_,R,k,Y,A,y,!1);return;case"select":Oe("invalid",s),c=A=_=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:it(s,r,y,R,l,null)}r=_,l=A,s.multiple=!!c,r!=null?Ke(s,!!c,r,!1):l!=null&&Ke(s,!!c,l,!0);return;case"textarea":Oe("invalid",s),_=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:it(s,r,A,R,l,null)}Ps(s,c,y,_);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(c=l[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:it(s,r,k,c,l,null)}return;case"dialog":Oe("beforetoggle",s),Oe("toggle",s),Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":Oe("load",s);break;case"video":case"audio":for(c=0;c<xl.length;c++)Oe(xl[c],s);break;case"image":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"embed":case"source":case"link":Oe("error",s),Oe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:it(s,r,Y,c,l,null)}return;default:if(Xa(r)){for(Z in l)l.hasOwnProperty(Z)&&(c=l[Z],c!==void 0&&np(s,r,Z,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&it(s,r,R,c,l,null))}function SR(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,R=null,k=null,Y=null,Z=null;for(X in l){var ne=l[X];if(l.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":k=ne;default:c.hasOwnProperty(X)||it(s,r,X,null,c,ne)}}for(var $ in c){var X=c[$];if(ne=l[$],c.hasOwnProperty($)&&(X!=null||ne!=null))switch($){case"type":_=X;break;case"name":y=X;break;case"checked":Y=X;break;case"defaultChecked":Z=X;break;case"value":A=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==ne&&it(s,r,$,X,c,ne)}}Ds(s,A,R,k,Y,Z,_,y);return;case"select":X=A=R=$=null;for(_ in l)if(k=l[_],l.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":X=k;default:c.hasOwnProperty(_)||it(s,r,_,null,c,k)}for(y in c)if(_=c[y],k=l[y],c.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":$=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==k&&it(s,r,y,_,c,k)}r=R,l=A,c=X,$!=null?Ke(s,!!l,$,!1):!!c!=!!l&&(r!=null?Ke(s,!!l,r,!0):Ke(s,!!l,l?[]:"",!1));return;case"textarea":X=$=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:it(s,r,R,null,c,y)}for(A in c)if(y=c[A],_=l[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":$=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&it(s,r,A,y,c,_)}qr(s,$,X);return;case"option":for(var me in l)if($=l[me],l.hasOwnProperty(me)&&$!=null&&!c.hasOwnProperty(me))switch(me){case"selected":s.selected=!1;break;default:it(s,r,me,null,c,$)}for(k in c)if($=c[k],X=l[k],c.hasOwnProperty(k)&&$!==X&&($!=null||X!=null))switch(k){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:it(s,r,k,$,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)$=l[Se],l.hasOwnProperty(Se)&&$!=null&&!c.hasOwnProperty(Se)&&it(s,r,Se,null,c,$);for(Y in c)if($=c[Y],X=l[Y],c.hasOwnProperty(Y)&&$!==X&&($!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:it(s,r,Y,$,c,X)}return;default:if(Xa(r)){for(var st in l)$=l[st],l.hasOwnProperty(st)&&$!==void 0&&!c.hasOwnProperty(st)&&np(s,r,st,void 0,c,$);for(Z in c)$=c[Z],X=l[Z],!c.hasOwnProperty(Z)||$===X||$===void 0&&X===void 0||np(s,r,Z,$,c,X);return}}for(var B in l)$=l[B],l.hasOwnProperty(B)&&$!=null&&!c.hasOwnProperty(B)&&it(s,r,B,null,c,$);for(ne in c)$=c[ne],X=l[ne],!c.hasOwnProperty(ne)||$===X||$==null&&X==null||it(s,r,ne,$,c,X)}function gv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,A=y.initiatorType,R=y.duration;if(_&&R&&gv(A)){for(A=0,R=y.responseEnd,c+=1;c<l.length;c++){var k=l[c],Y=k.startTime;if(Y>R)break;var Z=k.transferSize,ne=k.initiatorType;Z&&gv(ne)&&(k=k.responseEnd,A+=Z*(k<R?1:(R-Y)/(k-Y)))}if(--c,r+=8*(_+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var ip=null,sp=null;function Bc(s){return s.nodeType===9?s:s.ownerDocument}function yv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _v(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function rp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var op=null;function CR(){var s=window.event;return s&&s.type==="popstate"?s===op?!1:(op=s,!0):(op=null,!1)}var vv=typeof setTimeout=="function"?setTimeout:void 0,IR=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,RR=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(s){return Tv.resolve(null).then(s).catch(wR)}:vv;function wR(s){setTimeout(function(){throw s})}function sr(s){return s==="head"}function Ev(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),fa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Dl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Dl(l);for(var _=l.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[Bi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&Dl(s.ownerDocument.body);l=y}while(l);fa(r)}function Sv(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function ap(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ap(l),Ur(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function bR(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Bi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Wn(s.nextSibling),s===null)break}return null}function NR(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Wn(s.nextSibling),s===null))return null;return s}function Av(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Wn(s.nextSibling),s===null))return null;return s}function lp(s){return s.data==="$?"||s.data==="$~"}function up(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function xR(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Wn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var cp=null;function Cv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Wn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Iv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Rv(s,r,l){switch(r=Bc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Dl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Ur(s)}var Zn=new Map,wv=new Set;function Hc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var us=ae.d;ae.d={f:MR,r:DR,D:PR,C:kR,L:VR,m:UR,X:OR,S:LR,M:qR};function MR(){var s=us.f(),r=Pc();return s||r}function DR(s){var r=Gi(s);r!==null&&r.tag===5&&r.type==="form"?zy(r):us.r(s)}var ua=typeof document>"u"?null:document;function bv(s,r,l){var c=ua;if(c&&typeof r=="string"&&r){var y=yt(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),wv.has(y)||(wv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Zt(r,"link",s),At(r),c.head.appendChild(r)))}}function PR(s){us.D(s),bv("dns-prefetch",s,null)}function kR(s,r){us.C(s,r),bv("preconnect",s,r)}function VR(s,r,l){us.L(s,r,l);var c=ua;if(c&&s&&r){var y='link[rel="preload"][as="'+yt(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+yt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+yt(l.imageSizes)+'"]')):y+='[href="'+yt(s)+'"]';var _=y;switch(r){case"style":_=ca(s);break;case"script":_=da(s)}Zn.has(_)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Zn.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Pl(_))||r==="script"&&c.querySelector(kl(_))||(r=c.createElement("link"),Zt(r,"link",s),At(r),c.head.appendChild(r)))}}function UR(s,r){us.m(s,r);var l=ua;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+yt(c)+'"][href="'+yt(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=da(s)}if(!Zn.has(_)&&(s=T({rel:"modulepreload",href:s},r),Zn.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(kl(_)))return}c=l.createElement("link"),Zt(c,"link",s),At(c),l.head.appendChild(c)}}}function LR(s,r,l){us.S(s,r,l);var c=ua;if(c&&s){var y=oi(c).hoistableStyles,_=ca(s);r=r||"default";var A=y.get(_);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(Pl(_)))R.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Zn.get(_))&&dp(s,l);var k=A=c.createElement("link");At(k),Zt(k,"link",s),k._p=new Promise(function(Y,Z){k.onload=Y,k.onerror=Z}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Gc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(_,A)}}}function OR(s,r){us.X(s,r);var l=ua;if(l&&s){var c=oi(l).hoistableScripts,y=da(s),_=c.get(y);_||(_=l.querySelector(kl(y)),_||(s=T({src:s,async:!0},r),(r=Zn.get(y))&&fp(s,r),_=l.createElement("script"),At(_),Zt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function qR(s,r){us.M(s,r);var l=ua;if(l&&s){var c=oi(l).hoistableScripts,y=da(s),_=c.get(y);_||(_=l.querySelector(kl(y)),_||(s=T({src:s,async:!0,type:"module"},r),(r=Zn.get(y))&&fp(s,r),_=l.createElement("script"),At(_),Zt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Nv(s,r,l,c){var y=(y=ue.current)?Hc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ca(l.href),l=oi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ca(l.href);var _=oi(y).hoistableStyles,A=_.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=y.querySelector(Pl(s)))&&!_._p&&(A.instance=_,A.state.loading=5),Zn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zn.set(s,l),_||FR(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=da(l),l=oi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ca(s){return'href="'+yt(s)+'"'}function Pl(s){return'link[rel="stylesheet"]['+s+"]"}function xv(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function FR(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Zt(r,"link",l),At(r),s.head.appendChild(r))}function da(s){return'[src="'+yt(s)+'"]'}function kl(s){return"script[async]"+s}function Mv(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+yt(l.href)+'"]');if(c)return r.instance=c,At(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),At(c),Zt(c,"style",y),Gc(c,l.precedence,s),r.instance=c;case"stylesheet":y=ca(l.href);var _=s.querySelector(Pl(y));if(_)return r.state.loading|=4,r.instance=_,At(_),_;c=xv(l),(y=Zn.get(y))&&dp(c,y),_=(s.ownerDocument||s).createElement("link"),At(_);var A=_;return A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),Zt(_,"link",c),r.state.loading|=4,Gc(_,l.precedence,s),r.instance=_;case"script":return _=da(l.src),(y=s.querySelector(kl(_)))?(r.instance=y,At(y),y):(c=l,(y=Zn.get(_))&&(c=T({},l),fp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),At(y),Zt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Gc(c,l.precedence,s));return r.instance}function Gc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===r)_=R;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function dp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function fp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var zc=null;function Dv(s,r,l){if(zc===null){var c=new Map,y=zc=new Map;y.set(l,c)}else y=zc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Bi]||_[gt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=s+A;var R=c.get(A);R?R.push(_):c.set(A,[_])}}return c}function Pv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function BR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function kv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function HR(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ca(c.href),_=r.querySelector(Pl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Jc.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,At(_);return}_=r.ownerDocument||r,c=xv(c),(y=Zn.get(y))&&dp(c,y),_=_.createElement("link"),At(_);var A=_;A._p=new Promise(function(R,k){A.onload=R,A.onerror=k}),Zt(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Jc.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var hp=0;function GR(s,r){return s.stylesheets&&s.count===0&&Kc(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&Kc(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&hp===0&&(hp=62500*AR());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Kc(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>hp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yc=null;function Kc(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yc=new Map,r.forEach(zR,s),Yc=null,Jc.call(s))}function zR(s,r){if(!(r.state.loading&4)){var l=Yc.get(s);if(l)var c=l.get(null);else{l=new Map,Yc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=l.get(A)||c,_===c&&l.set(null,y),l.set(A,y),this.count++,c=Jc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Vl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function JR(s,r,l,c,y,_,A,R,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Vv(s,r,l,c,y,_,A,R,k,Y,Z,ne){return s=new JR(s,r,l,A,k,Y,Z,ne,R),r=1,_===!0&&(r|=24),_=kn(3,null,null,r),s.current=_,_.stateNode=s,r=Yf(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},Xf(_),s}function Uv(s){return s?(s=Ho,s):Ho}function Lv(s,r,l,c,y,_){y=Uv(y),c.context===null?c.context=y:c.pendingContext=y,c=Ks(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=$s(s,c,r),l!==null&&(Rn(l,s,r),hl(l,s,r))}function Ov(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function pp(s,r){Ov(s,r),(s=s.alternate)&&Ov(s,r)}function qv(s){if(s.tag===13||s.tag===31){var r=$r(s,67108864);r!==null&&Rn(r,s,67108864),pp(s,67108864)}}function Fv(s){if(s.tag===13||s.tag===31){var r=qn();r=Ga(r);var l=$r(s,r);l!==null&&Rn(l,s,r),pp(s,r)}}var $c=!0;function YR(s,r,l,c){var y=H.T;H.T=null;var _=ae.p;try{ae.p=2,mp(s,r,l,c)}finally{ae.p=_,H.T=y}}function KR(s,r,l,c){var y=H.T;H.T=null;var _=ae.p;try{ae.p=8,mp(s,r,l,c)}finally{ae.p=_,H.T=y}}function mp(s,r,l,c){if($c){var y=gp(c);if(y===null)tp(s,r,c,Qc,l),Hv(s,c);else if(QR(y,s,r,l,c))c.stopPropagation();else if(Hv(s,c),r&4&&-1<$R.indexOf(s)){for(;y!==null;){var _=Gi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ri(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var k=1<<31-hn(A);R.entanglements[1]|=k,A&=~k}wi(_),(We&6)===0&&(Mc=Yt()+500,Nl(0))}}break;case 31:case 13:R=$r(_,2),R!==null&&Rn(R,_,2),Pc(),pp(_,2)}if(_=gp(c),_===null&&tp(s,r,c,Qc,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else tp(s,r,c,null,l)}}function gp(s){return s=ko(s),yp(s)}var Qc=null;function yp(s){if(Qc=null,s=Hi(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Qc=s,null}function Bv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bu()){case Vt:return 2;case qt:return 8;case Oi:case Nu:return 32;case qa:return 268435456;default:return 32}default:return 32}}var _p=!1,rr=null,or=null,ar=null,Ul=new Map,Ll=new Map,lr=[],$R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hv(s,r){switch(s){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Ul.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(r.pointerId)}}function Ol(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Gi(r),r!==null&&qv(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function QR(s,r,l,c,y){switch(r){case"focusin":return rr=Ol(rr,s,r,l,c,y),!0;case"dragenter":return or=Ol(or,s,r,l,c,y),!0;case"mouseover":return ar=Ol(ar,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return Ul.set(_,Ol(Ul.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Ll.set(_,Ol(Ll.get(_)||null,s,r,l,c,y)),!0}return!1}function Gv(s){var r=Hi(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Mu(s.priority,function(){Fv(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Mu(s.priority,function(){Fv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=gp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Po=c,l.target.dispatchEvent(c),Po=null}else return r=Gi(l),r!==null&&qv(r),s.blockedOn=l,!1;r.shift()}return!0}function zv(s,r,l){Xc(s)&&l.delete(r)}function XR(){_p=!1,rr!==null&&Xc(rr)&&(rr=null),or!==null&&Xc(or)&&(or=null),ar!==null&&Xc(ar)&&(ar=null),Ul.forEach(zv),Ll.forEach(zv)}function Wc(s,r){s.blockedOn===r&&(s.blockedOn=null,_p||(_p=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,XR)))}var Zc=null;function Jv(s){Zc!==s&&(Zc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zc===s&&(Zc=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(yp(c||l)===null)continue;break}var _=Gi(l);_!==null&&(s.splice(r,3),r-=3,gh(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function fa(s){function r(k){return Wc(k,s)}rr!==null&&Wc(rr,s),or!==null&&Wc(or,s),ar!==null&&Wc(ar,s),Ul.forEach(r),Ll.forEach(r);for(var l=0;l<lr.length;l++){var c=lr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<lr.length&&(l=lr[0],l.blockedOn===null);)Gv(l),l.blockedOn===null&&lr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],A=y[$t]||null;if(typeof _=="function")A||Jv(l);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[$t]||null)R=A.formAction;else if(yp(y)!==null)continue}else R=A.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),Jv(l)}}}function Yv(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function vp(s){this._internalRoot=s}jc.prototype.render=vp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=qn();Lv(l,c,s,r,null,null)},jc.prototype.unmount=vp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Lv(s.current,2,null,s,null,null),Pc(),r[_i]=null}};function jc(s){this._internalRoot=s}jc.prototype.unstable_scheduleHydration=function(s){if(s){var r=Fi();s={blockedOn:null,target:s,priority:r};for(var l=0;l<lr.length&&r!==0&&r<lr[l].priority;l++);lr.splice(l,0,s),l===0&&Gv(s)}};var Kv=e.version;if(Kv!=="19.2.0")throw Error(i(527,Kv,"19.2.0"));ae.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var WR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{Ss=ed.inject(WR),rn=ed}catch{}}return Fl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=e_,_=t_,A=n_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=Vv(s,1,!1,null,null,l,c,null,y,_,A,Yv),s[_i]=r.current,ep(s),new vp(r)},Fl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=e_,A=t_,R=n_,k=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),r=Vv(s,1,!0,r,l??null,c,y,k,_,A,R,Yv),r.context=Uv(null),l=r.current,c=qn(),c=Ga(c),y=Ks(c),y.callback=null,$s(l,y,c),l=c,r.current.lanes=l,Is(r,l),wi(r),s[_i]=r.current,ep(s),new jc(r)},Fl.version="19.2.0",Fl}var iT;function lw(){if(iT)return Sp.exports;iT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sp.exports=aw(),Sp.exports}var uw=lw();const cw=aS(uw),dw=({analysis:n,onClose:e})=>{if(!n)return null;const t={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return I.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[I.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),I.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:I.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),I.jsxs("div",{className:"p-6 space-y-6",children:[I.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[I.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.summary})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[I.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),I.jsx("div",{className:"grid gap-2",children:n.strengths.map((o,a)=>I.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[I.jsx("span",{className:"text-green-500 mt-0.5",children:""}),I.jsx("span",{children:o})]},a))})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[I.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),I.jsx("div",{className:"grid gap-2",children:n.gaps.map((o,a)=>I.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[I.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),I.jsx("span",{children:o})]},a))})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[I.jsx("span",{children:""})," Pices recommandes"]}),I.jsx("div",{className:"grid gap-4",children:n.suggestions.map((o,a)=>I.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[I.jsxs("div",{className:"flex justify-between items-start mb-3",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-lg",children:o.description}),I.jsx("p",{className:"text-sm text-gray-500",children:o.category})]}),I.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[o.priority]}`,children:i[o.priority]})]}),I.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[I.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",o.reason]}),o.estimatedPrice&&I.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.estimatedPrice]})]},a))})]})]})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fw,hw;function pw(){return{geminiUrl:fw,vertexUrl:hw}}function mw(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=pw();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ts{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(a+1),t[m])}else for(const m of p)g(m,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function gw(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const m=a[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}qp(n,o,a,0,u)}}function qp(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])qp(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),p={};for(const m of d)p[m]=u[m];for(const[m,v]of Object.entries(p)){const T=[];for(const S of t.slice(i))S==="*"?T.push(m):T.push(S);g(u,T,v)}for(const m of d)delete u[m]}}else{const u=n;a in u&&qp(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Em(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yw(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function _w(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],Tw(u)),e}function vw(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],Ew(u)),e}function Tw(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>Sw(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function Ew(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>Aw(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function Sw(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],Nw(t)),e}function Aw(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],xw(t)),e}function Cw(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function Iw(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function Rw(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],ww(u)),e}function ww(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function lS(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],bw(u)),e}function bw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function Nw(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Em(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function xw(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Em(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(sT||(sT={}));var rT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(rT||(rT={}));var oT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(oT||(oT={}));var Pe;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Pe||(Pe={}));var aT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(aT||(aT={}));var lT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(lT||(lT={}));var uT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(uT||(uT={}));var cT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(cT||(cT={}));var dT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(dT||(dT={}));var fT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(fT||(fT={}));var hT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(hT||(hT={}));var pT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(pT||(pT={}));var mT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(mT||(mT={}));var gT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(gT||(gT={}));var yT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yT||(yT={}));var _T;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(_T||(_T={}));var vT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(vT||(vT={}));var TT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(TT||(TT={}));var Sd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Sd||(Sd={}));var ET;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ET||(ET={}));var ST;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ST||(ST={}));var AT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AT||(AT={}));var Fp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fp||(Fp={}));var CT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(CT||(CT={}));var IT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(IT||(IT={}));var RT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(RT||(RT={}));var wT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(wT||(wT={}));var bT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(bT||(bT={}));var NT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(NT||(NT={}));var xT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xT||(xT={}));var MT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(MT||(MT={}));var DT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(DT||(DT={}));var PT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(PT||(PT={}));var kT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kT||(kT={}));var VT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(VT||(VT={}));var UT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(UT||(UT={}));var LT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(LT||(LT={}));var OT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(OT||(OT={}));var qT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(qT||(qT={}));var FT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(FT||(FT={}));var BT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(BT||(BT={}));var HT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(HT||(HT={}));var GT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(GT||(GT={}));var zT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(zT||(zT={}));var JT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(JT||(JT={}));var YT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(YT||(YT={}));var KT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(KT||(KT={}));var $T;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($T||($T={}));var QT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(QT||(QT={}));var XT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(XT||(XT={}));var WT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(WT||(WT={}));var ZT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(ZT||(ZT={}));var ya;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ya||(ya={}));class Bp{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bl{get text(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const S of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[b,q]of Object.entries(S))b!=="text"&&b!=="thought"&&(q!==null||q!==void 0)&&T.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,b]of Object.entries(T))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class jT{}class eE{}class Mw{}class Dw{}class Pw{}class kw{}class tE{}class nE{}class iE{}class Vw{}class Ad{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ad;let o;const a=e;return t?o=vw(a):o=_w(a),Object.assign(i,o),i}}class sE{}class rE{}class oE{}class Uw{}class Lw{}class Ow{}class Sm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Sm,a=Rw(e);return Object.assign(i,a),i}}class qw{}class Fw{}class Bw{}class aE{}class Hw{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Gw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Am{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Am,a=lS(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function uS(n,e){const t=Xe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function cS(n){return Array.isArray(n)?n.map(e=>Cd(e)):[Cd(n)]}function Cd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function dS(n){const e=Cd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fS(n){const e=Cd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function hS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>lE(e)):[lE(n)]}function Hp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function uE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function cE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function dn(n){if(n==null)throw new Error("ContentUnion is required");return Hp(n)?n:{role:"user",parts:hS(n)}}function Cm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=dn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=dn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>dn(t)):[dn(e)]}function ti(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(uE(n)||cE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(n)]}const e=[],t=[],i=Hp(n[0]);for(const o of n){const a=Hp(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(uE(o)||cE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:hS(t)}),e}function zw(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Pe).includes(t[0].toUpperCase())?t[0].toUpperCase():Pe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Pe).includes(i.toUpperCase())?i.toUpperCase():Pe.TYPE_UNSPECIFIED})}}function _a(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&zw(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Pe).includes(d.toUpperCase())?d.toUpperCase():Pe.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=_a(d);else if(i.includes(u)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(_a(m))}e[u]=p}else if(o.includes(u)){const p={};for(const[m,v]of Object.entries(d))p[m]=_a(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Im(n){return _a(n)}function Rm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function wm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function xa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=_a(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=_a(e.response));return n}function Ma(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Jw(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Es(n,e){if(typeof e!="string")throw new Error("name must be a string");return Jw(n,e,"cachedContents")}function pS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function br(n){return Em(n)}function Yw(n){return n!=null&&typeof n=="object"&&"name"in n}function Kw(n){return n!=null&&typeof n=="object"&&"video"in n}function $w(n){return n!=null&&typeof n=="object"&&"uri"in n}function mS(n){var e;let t;if(Yw(n)&&(t=n.name),!($w(n)&&(t=n.uri,t===void 0))&&!(Kw(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function gS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function yS(n){for(const e of["models","tunedModels","publisherModels"])if(Qw(n,e))return n[e];return[]}function Qw(n,e){return n!==null&&typeof n=="object"&&e in n}function Xw(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Ww(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=Xw(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function _S(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Zw(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function vS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Da(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function TS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jw(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>xb(u))),g(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function eb(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function tb(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ud(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],TS(o));const a=f(n,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],jw(vS(m))),e}function Gp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["state"]);o!=null&&g(e,["state"],TS(o));const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&g(e,["src"],nb(T));const S=f(n,["outputConfig"]);S!=null&&g(e,["dest"],eb(vS(S)));const b=f(n,["completionStats"]);return b!=null&&g(e,["completionStats"],b),e}function nb(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function ib(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&g(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Nb(n,u))),g(t,["requests","requests"],a)}return t}function sb(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function rb(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function ob(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Da(n,i)),t}function ab(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Da(n,i)),t}function lb(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],ub(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function ub(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function ES(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Lb(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function cb(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function db(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],tb(Zw(o))),t}function dE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],ib(n,_S(n,o)));const a=f(e,["config"]);return a!=null&&cb(a,t),t}function fb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],sb(_S(n,o)));const a=f(e,["config"]);return a!=null&&db(a,t),t}function hb(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),t}function pb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],Eb(n,o));const a=f(e,["config"]);return a!=null&&hb(a,t),t}function mb(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Da(n,i)),t}function gb(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Da(n,i)),t}function yb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function _b(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function vb(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Cm(n,i);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(g(t,["_self"],Tb(o,t)),gw(t,{"requests[].*":"requests[].request.*"})),t}function Tb(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Eb(n,e){const t={},i=f(e,["fileName"]);i!=null&&g(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],vb(n,o)),t}function Sb(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Ab(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],ES(dn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(i,["frequencyPenalty"],q);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const z=f(e,["responseMimeType"]);z!=null&&g(i,["responseMimeType"],z);const te=f(e,["responseSchema"]);te!=null&&g(i,["responseSchema"],Im(te));const K=f(e,["responseJsonSchema"]);if(K!=null&&g(i,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let L=Q;Array.isArray(L)&&(L=L.map(P=>Ob(P))),g(t,["safetySettings"],L)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let L=Ma(ie);Array.isArray(L)&&(L=L.map(P=>qb(xa(P)))),g(t,["tools"],L)}const le=f(e,["toolConfig"]);if(t!==void 0&&le!=null&&g(t,["toolConfig"],le),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=f(e,["cachedContent"]);t!==void 0&&de!=null&&g(t,["cachedContent"],Es(n,de));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Rm(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(i,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(i,["imageConfig"],V),i}function Cb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>lb(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function Ib(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Da(n,i)),t}function Rb(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Da(n,i)),t}function wb(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function bb(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function Nb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["request","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let d=ti(o);Array.isArray(d)&&(d=d.map(p=>ES(p))),g(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],Ab(n,u,f(t,["request"],{}))),t}function xb(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],Cb(t));const i=f(n,["error"]);return i!=null&&g(e,["error"],i),e}function Mb(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Db(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),t}function Pb(n){const e={},t=f(n,["config"]);return t!=null&&Mb(t,e),e}function kb(n){const e={},t=f(n,["config"]);return t!=null&&Db(t,e),e}function Vb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>ud(u))),g(e,["batchJobs"],a)}return e}function Ub(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Gp(u))),g(e,["batchJobs"],a)}return e}function Lb(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],Sb(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],rb(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function Ob(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function qb(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],wb(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],bb(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ms;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ms||(ms={}));class To{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fb extends Ts{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new To(ms.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=dE(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const b=T.request;b.systemInstruction=S,T.request=b}m.push(T)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=fb(this.apiClient,e);return d=fe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Gp(v))}else{const m=dE(this.apiClient,e);return d=fe("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>ud(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pb(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>ud(p))}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Rb(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Gp(v))}else{const m=Ib(this.apiClient,e);return d=fe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>ud(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=ab(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=ob(this.apiClient,e);u=fe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=kb(e);return d=fe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Ub(v),S=new aE;return Object.assign(S,T),S})}else{const m=Pb(e);return d=fe("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Vb(v),S=new aE;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=gb(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>_b(v))}else{const m=mb(this.apiClient,e);return d=fe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>yb(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bb(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function fE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>l1(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function Hb(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=ti(u);Array.isArray(v)&&(v=v.map(T=>fE(T))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],fE(dn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>u1(T))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Gb(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=ti(u);Array.isArray(T)&&(T=T.map(S=>S)),g(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],dn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(S=>c1(S))),g(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function zb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],uS(n,i));const o=f(e,["config"]);return o!=null&&Hb(o,t),t}function Jb(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],uS(n,i));const o=f(e,["config"]);return o!=null&&Gb(o,t),t}function Yb(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Es(n,i)),t}function Kb(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Es(n,i)),t}function $b(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Qb(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Xb(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Wb(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function Zb(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Es(n,i)),t}function jb(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Es(n,i)),t}function e1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function t1(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function n1(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function i1(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function s1(n){const e={},t=f(n,["config"]);return t!=null&&n1(t,e),e}function r1(n){const e={},t=f(n,["config"]);return t!=null&&i1(t,e),e}function o1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function a1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function l1(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],Xb(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],Bb(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function u1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],e1(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],t1(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function c1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>Wb(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function d1(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function f1(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function h1(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Es(n,i));const o=f(e,["config"]);return o!=null&&d1(o,t),t}function p1(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Es(n,i));const o=f(e,["config"]);return o!=null&&f1(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m1 extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new To(ms.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Jb(this.apiClient,e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=zb(this.apiClient,e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=jb(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=Zb(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Kb(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Qb(v),S=new rE;return Object.assign(S,T),S})}else{const m=Yb(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=$b(v),S=new rE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=p1(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=h1(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=r1(e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=a1(v),S=new oE;return Object.assign(S,T),S})}else{const m=s1(e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=o1(v),S=new oE;return Object.assign(S,T),S})}}}function hE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(n){return this instanceof ct?(this.v=n,this):new ct(n)}function va(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(b){return function(q){return Promise.resolve(q).then(b,T)}}function d(b,q){i[b]&&(o[b]=function(F){return new Promise(function(z,te){a.push([b,F,z,te])>1||p(b,F)})},q&&(o[b]=q(o[b])))}function p(b,q){try{m(i[b](q))}catch(F){S(a[0][3],F)}}function m(b){b.value instanceof ct?Promise.resolve(b.value.v).then(v,T):S(a[0][2],b)}function v(b){p("next",b)}function T(b){p("throw",b)}function S(b,q){b(q),a.shift(),a.length&&p(a[0][0],a[0][1])}}function Xl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof hE=="function"?hE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),o(d,p,u.done,u.value)})}}function o(a,u,d,p){Promise.resolve(p).then(function(m){a({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g1(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:SS(t)}function SS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function y1(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function pE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!SS(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class _1{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new v1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class v1{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),y1(a)}async sendMessage(e){var t;await this.sendPromise;const i=dn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await o,m=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(T))!==null&&d!==void 0?d:[]);const b=m?[m]:[];this.recordHistory(i,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=dn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?pE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return va(this,arguments,function*(){var u,d,p,m;const v=[];try{for(var T=!0,S=Xl(e),b;b=yield ct(S.next()),u=b.done,!u;T=!0){m=b.value,T=!1;const q=m;if(g1(q)){const F=(o=(i=q.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;F!==void 0&&v.push(F)}yield yield ct(q)}}catch(q){d={error:q}}finally{try{!T&&!u&&(p=S.return)&&(yield ct(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...pE(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Yd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T1(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function E1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function S1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],mS(t)),e}function A1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function C1(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],mS(t)),e}function I1(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function R1(n){const e={},t=f(n,["config"]);return t!=null&&I1(t,e),e}function w1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b1 extends Ts{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new To(ms.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=R1(e);return a=fe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=w1(p),v=new qw;return Object.assign(v,m),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=T1(e);return a=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=E1(p),v=new Fw;return Object.assign(v,m),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=C1(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=S1(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=A1(p),v=new Bw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cd(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function N1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>z1(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function x1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function M1(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function D1(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=f(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const F=f(n,["responseSchema"]);F!=null&&g(e,["responseSchema"],F);const z=f(n,["routingConfig"]);z!=null&&g(e,["routingConfig"],z);const te=f(n,["seed"]);te!=null&&g(e,["seed"],te);const K=f(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],AS(K));const Q=f(n,["stopSequences"]);Q!=null&&g(e,["stopSequences"],Q);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const le=f(n,["thinkingConfig"]);le!=null&&g(e,["thinkingConfig"],le);const de=f(n,["topK"]);de!=null&&g(e,["topK"],de);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function P1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function k1(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function V1(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],wm(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],N1(dn(q)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let de=Ma(F);Array.isArray(de)&&(de=de.map(M=>Y1(xa(M)))),g(e,["setup","tools"],de)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],J1(z));const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const le=f(n,["proactivity"]);return e!==void 0&&le!=null&&g(e,["setup","proactivity"],le),t}function U1(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],D1(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],AS(wm(T)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],dn(q));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let de=Ma(F);Array.isArray(de)&&(de=de.map(M=>K1(xa(M)))),g(e,["setup","tools"],de)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],z);const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const le=f(n,["proactivity"]);return e!==void 0&&le!=null&&g(e,["setup","proactivity"],le),t}function L1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],V1(o,t)),t}function O1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],U1(o,t)),t}function q1(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function F1(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function B1(n){const e={},t=f(n,["media"]);if(t!=null){let m=cS(t);Array.isArray(m)&&(m=m.map(v=>cd(v))),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],cd(fS(i)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],cd(dS(a)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function H1(n){const e={},t=f(n,["media"]);if(t!=null){let m=cS(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],fS(i));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],dS(a));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function G1(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],$1(u));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function z1(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],x1(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],cd(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function J1(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function AS(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Y1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],P1(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],k1(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function K1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>M1(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function $1(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["promptTokensDetails"],b)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["cacheTokensDetails"],b)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["responseTokensDetails"],b)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let b=T;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["toolUsePromptTokensDetails"],b)}const S=f(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q1(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function X1(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],W1(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function W1(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function Z1(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let a=ti(o);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["contents"],a)}return t}function j1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["tokensInfo"],o)}return e}function eN(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&g(e,["statistics"],tN(i)),e}function tN(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Kd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>ox(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function nN(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function iN(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function sN(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],dn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>bS(d))),g(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],KN(a)),t}function rN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>Kd(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&iN(a),t}function oN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&sN(a,t),t}function aN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function lN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function uN(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function cN(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function dN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function fN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function hN(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=f(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&g(e,["parameters","outputOptions","compressionQuality"],F);const z=f(n,["addWatermark"]);e!==void 0&&z!=null&&g(e,["parameters","addWatermark"],z);const te=f(n,["labels"]);e!==void 0&&te!=null&&g(e,["labels"],te);const K=f(n,["editMode"]);e!==void 0&&K!=null&&g(e,["parameters","editMode"],K);const Q=f(n,["baseSteps"]);return e!==void 0&&Q!=null&&g(e,["parameters","editConfig","baseSteps"],Q),t}function pN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>fx(p))),g(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&hN(u,t),t}function mN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>$d(a))),g(e,["generatedImages"],o)}return e}function gN(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function yN(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function _N(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let d=Cm(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&gN(a,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],Xe(n,u)),t}function vN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Cm(n,o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&yN(a,t),t}function TN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function EN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>eN(u))),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function SN(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function AN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function CN(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function IN(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],Kd(dn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(i,["frequencyPenalty"],q);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const z=f(e,["responseMimeType"]);z!=null&&g(i,["responseMimeType"],z);const te=f(e,["responseSchema"]);te!=null&&g(i,["responseSchema"],Im(te));const K=f(e,["responseJsonSchema"]);if(K!=null&&g(i,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let L=Q;Array.isArray(L)&&(L=L.map(P=>hx(P))),g(t,["safetySettings"],L)}const ie=f(e,["tools"]);if(t!==void 0&&ie!=null){let L=Ma(ie);Array.isArray(L)&&(L=L.map(P=>vx(xa(P)))),g(t,["tools"],L)}const le=f(e,["toolConfig"]);if(t!==void 0&&le!=null&&g(t,["toolConfig"],le),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const de=f(e,["cachedContent"]);t!==void 0&&de!=null&&g(t,["cachedContent"],Es(n,de));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const N=f(e,["mediaResolution"]);N!=null&&g(i,["mediaResolution"],N);const x=f(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Rm(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(i,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(i,["imageConfig"],V),i}function RN(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],dn(o));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(i,["frequencyPenalty"],q);const F=f(e,["seed"]);F!=null&&g(i,["seed"],F);const z=f(e,["responseMimeType"]);z!=null&&g(i,["responseMimeType"],z);const te=f(e,["responseSchema"]);te!=null&&g(i,["responseSchema"],Im(te));const K=f(e,["responseJsonSchema"]);K!=null&&g(i,["responseJsonSchema"],K);const Q=f(e,["routingConfig"]);Q!=null&&g(i,["routingConfig"],Q);const ie=f(e,["modelSelectionConfig"]);ie!=null&&g(i,["modelConfig"],ie);const le=f(e,["safetySettings"]);if(t!==void 0&&le!=null){let H=le;Array.isArray(H)&&(H=H.map(ae=>ae)),g(t,["safetySettings"],H)}const de=f(e,["tools"]);if(t!==void 0&&de!=null){let H=Ma(de);Array.isArray(H)&&(H=H.map(ae=>bS(xa(ae)))),g(t,["tools"],H)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const N=f(e,["labels"]);t!==void 0&&N!=null&&g(t,["labels"],N);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&g(t,["cachedContent"],Es(n,x));const D=f(e,["responseModalities"]);D!=null&&g(i,["responseModalities"],D);const V=f(e,["mediaResolution"]);V!=null&&g(i,["mediaResolution"],V);const L=f(e,["speechConfig"]);L!=null&&g(i,["speechConfig"],wS(Rm(L)));const P=f(e,["audioTimestamp"]);P!=null&&g(i,["audioTimestamp"],P);const rt=f(e,["thinkingConfig"]);rt!=null&&g(i,["thinkingConfig"],rt);const ft=f(e,["imageConfig"]);return ft!=null&&g(i,["imageConfig"],ft),i}function mE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>Kd(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],IN(n,a,t)),t}function gE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],RN(n,a,t)),t}function yE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>X1(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function _E(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function wN(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(n,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function bN(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=f(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&g(e,["parameters","outputOptions","compressionQuality"],F);const z=f(n,["addWatermark"]);e!==void 0&&z!=null&&g(e,["parameters","addWatermark"],z);const te=f(n,["labels"]);e!==void 0&&te!=null&&g(e,["labels"],te);const K=f(n,["imageSize"]);e!==void 0&&K!=null&&g(e,["parameters","sampleImageSize"],K);const Q=f(n,["enhancePrompt"]);return e!==void 0&&Q!=null&&g(e,["parameters","enhancePrompt"],Q),t}function NN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&wN(a,t),t}function xN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&bN(a,t),t}function MN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>GN(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],IS(o)),e}function DN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>$d(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],RS(o)),e}function PN(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Qd(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(b=>Dx(b))),g(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function kN(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&g(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const b=f(n,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const q=f(n,["generateAudio"]);e!==void 0&&q!=null&&g(e,["parameters","generateAudio"],q);const F=f(n,["lastFrame"]);e!==void 0&&F!=null&&g(e,["instances[0]","lastFrame"],mi(F));const z=f(n,["referenceImages"]);if(e!==void 0&&z!=null){let Q=z;Array.isArray(Q)&&(Q=Q.map(ie=>Px(ie))),g(e,["instances[0]","referenceImages"],Q)}const te=f(n,["mask"]);e!==void 0&&te!=null&&g(e,["instances[0]","mask"],Mx(te));const K=f(n,["compressionQuality"]);return e!==void 0&&K!=null&&g(e,["parameters","compressionQuality"],K),t}function VN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],qN(u)),e}function UN(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],FN(u)),e}function LN(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],Qd(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],NS(u));const d=f(e,["source"]);d!=null&&BN(d,t);const p=f(e,["config"]);return p!=null&&PN(p,t),t}function ON(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],mi(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],xS(u));const d=f(e,["source"]);d!=null&&HN(d,t);const p=f(e,["config"]);return p!=null&&kN(p,t),t}function qN(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>JN(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function FN(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>YN(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function BN(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Qd(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],NS(a)),t}function HN(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mi(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],xS(a)),t}function GN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],ZN(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],IS(o)),e}function $d(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],CS(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],RS(o));const a=f(n,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function zN(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],CS(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["labels"],o)}return e}function JN(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],Nx(t)),e}function YN(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],xx(t)),e}function KN(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=f(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const F=f(n,["responseSchema"]);F!=null&&g(e,["responseSchema"],F);const z=f(n,["routingConfig"]);z!=null&&g(e,["routingConfig"],z);const te=f(n,["seed"]);te!=null&&g(e,["seed"],te);const K=f(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],wS(K));const Q=f(n,["stopSequences"]);Q!=null&&g(e,["stopSequences"],Q);const ie=f(n,["temperature"]);ie!=null&&g(e,["temperature"],ie);const le=f(n,["thinkingConfig"]);le!=null&&g(e,["thinkingConfig"],le);const de=f(n,["topK"]);de!=null&&g(e,["topK"],de);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $N(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function QN(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function XN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function WN(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function ZN(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],br(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function CS(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],br(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Qd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],br(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function mi(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],br(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function jN(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],gS(n,d)),i}function ex(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],gS(n,d)),i}function tx(n,e){const t={},i=f(e,["config"]);return i!=null&&jN(n,i,t),t}function nx(n,e){const t={},i=f(e,["config"]);return i!=null&&ex(n,i,t),t}function ix(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=yS(o);Array.isArray(a)&&(a=a.map(u=>zp(u))),g(e,["models"],a)}return e}function sx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=yS(o);Array.isArray(a)&&(a=a.map(u=>Jp(u))),g(e,["models"],a)}return e}function rx(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function zp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["version"]);a!=null&&g(e,["version"],a);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],Tx(u));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function Jp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["versionId"]);a!=null&&g(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>SN(S))),g(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],Ex(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),g(e,["checkpoints"],T)}return e}function ox(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],AN(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],Q1(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function ax(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],mi(t)),e}function lx(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const b=f(n,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),t}function ux(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["source"]);o!=null&&dx(o,t);const a=f(e,["config"]);return a!=null&&lx(a,t),t}function cx(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>$d(o))),g(e,["generatedImages"],i)}return e}function dx(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],mi(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>ax(d))),g(e,["instances[0]","productImages"],u)}return t}function fx(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],mi(t));const i=f(n,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],rx(a));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],nN(u));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function IS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function RS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function hx(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function px(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],mi(t)),e}function mx(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function gx(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["source"]);o!=null&&_x(o,t);const a=f(e,["config"]);return a!=null&&mx(a,t),t}function yx(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>zN(o))),g(e,["generatedMasks"],i)}return e}function _x(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mi(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],px(a)),t}function wS(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function vx(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],XN(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],WN(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function bS(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>CN(S))),g(e,["functionDeclarations"],T)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function Tx(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function Ex(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function Sx(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function Ax(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function Cx(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","name"],Xe(n,i));const o=f(e,["config"]);return o!=null&&Sx(o,t),t}function Ix(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&Ax(o,t),t}function Rx(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const b=f(n,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),t}function wx(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],mi(o));const a=f(e,["upscaleFactor"]);a!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&Rx(u,t),t}function bx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>$d(a))),g(e,["generatedImages"],o)}return e}function Nx(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],br(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function xx(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],br(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function Mx(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],mi(t));const i=f(n,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function Dx(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],Qd(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function Px(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],mi(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function NS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["encodedVideo"],br(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function xS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],br(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kx="Content-Type",Vx="X-Server-Timeout",Ux="User-Agent",Yp="x-goog-api-client",Lx="1.29.0",Ox=`google-genai-sdk/${Lx}`,qx="v1beta1",Fx="v1beta",vE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Bx{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:qx,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Fx,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&Hx(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await TE(o),new Bp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await TE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return va(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield ct(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p,{stream:!0});try{const T=JSON.parse(m);if("error"in T){const S=JSON.parse(JSON.stringify(T.error)),b=S.status,q=S.code,F=`got status: ${b}. ${JSON.stringify(T)}`;if(q>=400&&q<600)throw new Yd({message:F,status:q})}}catch(T){if(T.name==="ApiError")throw T}u+=m;let v=u.match(vE);for(;v;){const T=v[1];try{const S=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ct(new Bp(S)),u=u.slice(v[0].length),v=u.match(vE)}catch(S){throw new Error(`exception parsing stream chunk ${T}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=Ox+" "+this.clientOptions.userAgentExtra;return e[Ux]=t,e[Yp]=t,e[kx]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(Vx,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},m=this.getFileName(e),v=fe("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,m,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&i.customMetadata&&(T.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(T.chunkingConfig=i.chunkingConfig);const S=await this.fetchUploadUrl(m,d,p,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function TE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Yd({message:o,status:t}):new Error(o)}}function Hx(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gx="mcp_used/unknown";let zx=!1;function MS(n){for(const e of n)if(Jx(e)||typeof e=="object"&&"inputSchema"in e)return!0;return zx}function DS(n){var e;const t=(e=n[Yp])!==null&&e!==void 0?e:"";n[Yp]=(t+` ${Gx}`).trimStart()}function Jx(n){return n!==null&&typeof n=="object"&&n instanceof bm}function Yx(n,e=100){return va(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield ct(n.listTools({cursor:i}));for(const u of a.tools)yield yield ct(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class bm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new bm(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,Xl(Yx(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Ww(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Kx(n,e,t){const i=new Gw;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class $x{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=Wx(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(Q=>{m=Q}),T=e.callbacks,S=function(){m({})},b=this.apiClient,q={onopen:S,onmessage:Q=>{Kx(b,T.onmessage,Q)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Q){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(Q){}},F=this.webSocketFactory.create(p,Xx(u),q);F.connect(),await v;const K={setup:{model:Xe(this.apiClient,e.model)}};return F.send(JSON.stringify(K)),new Qx(F,this.apiClient)}}class Qx{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=F1(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=q1(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ya.PLAY)}pause(){this.sendPlaybackControl(ya.PAUSE)}stop(){this.sendPlaybackControl(ya.STOP)}resetContext(){this.sendPlaybackControl(ya.RESET_CONTEXT)}close(){this.conn.close()}}function Xx(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function Wx(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zx="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jx(n,e,t){const i=new Hw;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=G1(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class eM{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new $x(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&MS(e.config.tools)&&DS(T);const S=sM(T);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const x=this.apiClient.getApiKey();let D="BidiGenerateContent",V="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",V="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${D}?${V}=${x}`}let b=()=>{};const q=new Promise(x=>{b=x}),F=e.callbacks,z=function(){var x;(x=F==null?void 0:F.onopen)===null||x===void 0||x.call(F),b({})},te=this.apiClient,K={onopen:z,onmessage:x=>{jx(te,F.onmessage,x)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(x){}},Q=this.webSocketFactory.create(v,iM(S),K);Q.connect(),await q;let ie=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ie.startsWith("publishers/")){const x=this.apiClient.getProject(),D=this.apiClient.getLocation();ie=`projects/${x}/locations/${D}/`+ie}let le={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sd.AUDIO]}:e.config.responseModalities=[Sd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const de=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const x of de)if(this.isCallableTool(x)){const D=x;M.push(await D.tool())}else M.push(x);M.length>0&&(e.config.tools=M);const N={model:ie,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=O1(this.apiClient,N):le=L1(this.apiClient,N),delete le.config,Q.send(JSON.stringify(le)),new nM(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const tM={turnComplete:!0};class nM{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ti(t.turns),e.isVertexAI()||(i=i.map(o=>Kd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Zx)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},tM),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:H1(e)}:t={realtimeInput:B1(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function iM(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function sM(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EE=10;function SE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ta(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ta(n){return"callTool"in n&&typeof n.callTool=="function"}function rM(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ta(o)))!==null&&i!==void 0?i:!1}function AE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Ta(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function CE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oM extends Ts{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!rM(t)||SE(t.config))return await this.generateContentInternal(p);const m=AE(t);if(m.length>0){const F=m.map(z=>`tools[${z}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let v,T;const S=ti(p.contents),b=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:EE;let q=0;for(;q<b&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const F=v.candidates[0].content,z=[];for(const te of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ta(te)){const Q=await te.callTool(v.functionCalls);z.push(...Q)}q++,T={role:"user",parts:z},p.contents=ti(p.contents),p.contents.push(F),p.contents.push(T),CE(p.config)&&(S.push(F),S.push(T))}return CE(p.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),SE(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}const i=AE(t);if(i.length>0){const o=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new To(ms.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Ta(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&MS(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),DS(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ta(u)){const d=u,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:EE;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,T){var S,b;return va(this,arguments,function*(){for(var q,F,z,te;d<a;){u&&(d++,u=!1);const le=yield ct(m.processParamsMaybeAddMcpUsage(T)),de=yield ct(m.generateContentStreamInternal(le)),M=[],N=[];try{for(var K=!0,Q=(F=void 0,Xl(de)),ie;ie=yield ct(Q.next()),q=ie.done,!q;K=!0){te=ie.value,K=!1;const x=te;if(yield yield ct(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){N.push(x.candidates[0].content);for(const D of(b=x.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(d<a&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(D.functionCall.name)){const V=yield ct(v.get(D.functionCall.name).callTool([D.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(x){F={error:x}}finally{try{!K&&!q&&(z=Q.return)&&(yield ct(z.call(Q)))}finally{if(F)throw F.error}}if(M.length>0){u=!0;const x=new Bl;x.candidates=[{content:{role:"user",parts:M}}],yield yield ct(x);const D=[];D.push(...N),D.push({role:"user",parts:M});const V=ti(T.contents).concat(D);T.contents=V}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=gE(this.apiClient,e);return d=fe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=_E(v),S=new Bl;return Object.assign(S,T),S})}else{const m=mE(this.apiClient,e);return d=fe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=yE(v),S=new Bl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=gE(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return va(this,arguments,function*(){var S,b,q,F;try{for(var z=!0,te=Xl(T),K;K=yield ct(te.next()),S=K.done,!S;z=!0){F=K.value,z=!1;const Q=F,ie=_E(yield ct(Q.json()));ie.sdkHttpResponse={headers:Q.headers};const le=new Bl;Object.assign(le,ie),yield yield ct(le)}}catch(Q){b={error:Q}}finally{try{!z&&!S&&(q=te.return)&&(yield ct(q.call(te)))}finally{if(b)throw b.error}}})})}else{const m=mE(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return va(this,arguments,function*(){var S,b,q,F;try{for(var z=!0,te=Xl(T),K;K=yield ct(te.next()),S=K.done,!S;z=!0){F=K.value,z=!1;const Q=F,ie=yE(yield ct(Q.json()));ie.sdkHttpResponse={headers:Q.headers};const le=new Bl;Object.assign(le,ie),yield yield ct(le)}}catch(Q){b={error:Q}}finally{try{!z&&!S&&(q=te.return)&&(yield ct(q.call(te)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=vN(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=EN(v),S=new jT;return Object.assign(S,T),S})}else{const m=_N(this.apiClient,e);return d=fe("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=TN(v),S=new jT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=xN(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=DN(v),S=new eE;return Object.assign(S,T),S})}else{const m=NN(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=MN(v),S=new eE;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=pN(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=mN(p),v=new Mw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=wx(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=bx(p),v=new Dw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=ux(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=cx(p),v=new Pw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=gx(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=yx(p),v=new kw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=QN(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Jp(v))}else{const m=$N(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>zp(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=nx(this.apiClient,e);return d=fe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sx(v),S=new tE;return Object.assign(S,T),S})}else{const m=tx(this.apiClient,e);return d=fe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=ix(v),S=new tE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Ix(this.apiClient,e);return d=fe("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>Jp(v))}else{const m=Cx(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>zp(v))}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=cN(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=fN(v),S=new nE;return Object.assign(S,T),S})}else{const m=uN(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=dN(v),S=new nE;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=oN(this.apiClient,e);return d=fe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=lN(v),S=new iE;return Object.assign(S,T),S})}else{const m=rN(this.apiClient,e);return d=fe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=aN(v),S=new iE;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=Z1(this.apiClient,e);return a=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=j1(p),v=new Vw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=ON(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=UN(v),S=new Ad;return Object.assign(S,T),S})}else{const m=LN(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=VN(v),S=new Ad;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aM extends Ts{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Iw(e);return d=fe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const m=Cw(e);return d=fe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=yw(e);return a=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lM(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function uM(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>yM(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function cM(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&g(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],gM(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),i}function dM(n,e){const t={},i=f(e,["config"]);return i!=null&&g(t,["config"],cM(n,i,t)),t}function fM(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function hM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function pM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function mM(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],wm(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],uM(dn(q)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let de=Ma(F);Array.isArray(de)&&(de=de.map(M=>vM(xa(M)))),g(e,["setup","tools"],de)}const z=f(n,["sessionResumption"]);e!==void 0&&z!=null&&g(e,["setup","sessionResumption"],_M(z));const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&g(e,["setup","realtimeInputConfig"],Q);const ie=f(n,["contextWindowCompression"]);e!==void 0&&ie!=null&&g(e,["setup","contextWindowCompression"],ie);const le=f(n,["proactivity"]);return e!==void 0&&le!=null&&g(e,["setup","proactivity"],le),t}function gM(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],mM(o,t)),t}function yM(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],fM(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],lM(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function _M(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vM(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],hM(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],pM(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TM(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function EM(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=TM(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class SM extends Ts{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=dM(this.apiClient,e);a=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=EM(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AM(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),t}function CM(n){const e={},t=f(n,["config"]);return t!=null&&AM(t,e),e}function IM(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function RM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&IM(i,e),e}function wM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function bM(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),t}function NM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],MM(u)),e}function xM(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&g(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&bM(o,e),e}function MM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function DM(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function PM(n){const e={},t=f(n,["config"]);return t!=null&&DM(t,e),e}function kM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function VM(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),g(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function UM(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&VM(i,e),e}function LM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OM(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function qM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&OM(i,e),e}function FM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function BM(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function HM(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&BM(i,e),e}function GM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zM extends Ts{constructor(e){super(),this.apiClient=e,this.list=async t=>new To(ms.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FM(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=qM(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HM(e);return a=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=GM(p),v=new Uw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JM extends Ts{constructor(e,t=new zM(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new To(ms.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CM(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wM(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=RM(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PM(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=kM(p),v=new Lw;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UM(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=LM(p),v=new Ow;return Object.assign(v,m),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xM(e);return a=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=NM(p),v=new Sm;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YM(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function KM(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function $M(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function QM(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],IE(b))}else if(o==="PREFERENCE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],IE(b))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(d==="PREFERENCE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(p==="PREFERENCE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(m==="PREFERENCE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function XM(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&aD(a);const u=f(n,["config"]);return u!=null&&$M(u,t),t}function WM(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&lD(a,t,e);const u=f(n,["config"]);return u!=null&&QM(u,t,e),t}function ZM(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function jM(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function eD(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function tD(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function nD(n,e){const t={},i=f(n,["config"]);return i!=null&&eD(i,t),t}function iD(n,e){const t={},i=f(n,["config"]);return i!=null&&tD(i,t),t}function sD(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>PS(d))),g(t,["tuningJobs"],u)}return t}function rD(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Kp(d))),g(t,["tuningJobs"],u)}return t}function oD(n,e){const t={},i=f(n,["name"]);i!=null&&g(t,["model"],i);const o=f(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function aD(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(t,["examples","examples"],o)}return t}function lD(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function PS(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],pS(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&g(t,["tunedModel"],oD(S)),t}function Kp(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],pS(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const T=f(n,["description"]);T!=null&&g(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&g(t,["baseModel"],S);const b=f(n,["tunedModel"]);b!=null&&g(t,["tunedModel"],b);const q=f(n,["preTunedModel"]);q!=null&&g(t,["preTunedModel"],q);const F=f(n,["supervisedTuningSpec"]);F!=null&&g(t,["supervisedTuningSpec"],F);const z=f(n,["preferenceOptimizationSpec"]);z!=null&&g(t,["preferenceOptimizationSpec"],z);const te=f(n,["tuningDataStats"]);te!=null&&g(t,["tuningDataStats"],te);const K=f(n,["encryptionSpec"]);K!=null&&g(t,["encryptionSpec"],K);const Q=f(n,["partnerModelTuningSpec"]);Q!=null&&g(t,["partnerModelTuningSpec"],Q);const ie=f(n,["customBaseModel"]);ie!=null&&g(t,["customBaseModel"],ie);const le=f(n,["experiment"]);le!=null&&g(t,["experiment"],le);const de=f(n,["labels"]);de!=null&&g(t,["labels"],de);const M=f(n,["outputUri"]);M!=null&&g(t,["outputUri"],M);const N=f(n,["pipelineJob"]);N!=null&&g(t,["pipelineJob"],N);const x=f(n,["serviceAccount"]);x!=null&&g(t,["serviceAccount"],x);const D=f(n,["tunedModelDisplayName"]);D!=null&&g(t,["tunedModelDisplayName"],D);const V=f(n,["veoTuningSpec"]);return V!=null&&g(t,["veoTuningSpec"],V),t}function uD(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const d=f(n,["error"]);return d!=null&&g(t,["error"],d),t}function IE(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&g(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cD extends Ts{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new To(ms.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Fp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=jM(e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Kp(v))}else{const m=ZM(e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>PS(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=iD(e);return d=fe("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=rD(v),S=new sE;return Object.assign(S,T),S})}else{const m=nD(e);return d=fe("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sD(v),S=new sE;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=KM(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=YM(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=WM(e,e);return a=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>Kp(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XM(e);return a=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>uD(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fD=1024*1024*8,hD=3,pD=1e3,mD=2,Id="x-goog-upload-status";async function gD(n,e,t){var i;const o=await kS(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Id])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function yD(n,e,t){var i;const o=await kS(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Id])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=lS(a),d=new Am;return Object.assign(d,u),d}async function kS(n,e,t){var i,o;let a=0,u=0,d=new Bp(new Response),p="upload";for(a=n.size;u<a;){const m=Math.min(fD,a-u),v=n.slice(u,u+m);u+m>=a&&(p+=", finalize");let T=0,S=pD;for(;T<hD&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Id]));)T++,await vD(S),S=S*mD;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Id])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function _D(n){return{size:n.size,type:n.type}}function vD(n){return new Promise(e=>setTimeout(e,n))}class TD{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gD(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yD(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _D(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ED{create(e,t,i){return new SD(e,t,i)}}class SD{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RE="x-goog-api-key";class AD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(RE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(RE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CD="gl-node/";class ID{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=mw(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new AD(this.apiKey);this.apiClient=new Bx({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:CD+"web",uploader:new TD,downloader:new dD}),this.models=new oM(this.apiClient),this.live=new eM(this.apiClient,o,new ED),this.batches=new Fb(this.apiClient),this.chats=new _1(this.models,this.apiClient),this.caches=new m1(this.apiClient),this.files=new b1(this.apiClient),this.operations=new aM(this.apiClient),this.authTokens=new SM(this.apiClient),this.tunings=new cD(this.apiClient),this.fileSearchStores=new JM(this.apiClient)}}const RD={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY"},Xd=new ID({apiKey:RD.geminiApiKey});async function wD(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),i=await Xd.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{items:{type:Pe.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:Pe.OBJECT,properties:{analysis:{type:Pe.STRING,description:"La description concise du vtement."},category:{type:Pe.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Pe.STRING,description:"La couleur principale du vtement."},material:{type:Pe.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(u=>{a.includes(u.category)||(console.warn(`Catgorie invalide reue de l'IA: ${u.category}, fallback sur "Accessoires"`),u.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function bD(n){return n&&n.name&&Array.isArray(n.itemIds)}async function ND(n,e,t,i){const o=new Set(e.flatMap(S=>S.itemIds)),u=n.filter(S=>!o.has(S.id)).map(S=>`- ${S.analysis} (Catgorie: ${S.category}, Couleur: ${S.color}, Matire: ${S.material})`).join(`
`),d=e.map(S=>`- ${S.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=i?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${bD(i)?i.name:i.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${p}
    ${m}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,T=await Xd.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{tenues:{type:Pe.ARRAY,description:"La liste des suggestions de tenues.",items:{type:Pe.OBJECT,properties:{titre:{type:Pe.STRING,description:"Le nom de la tenue."},description:{type:Pe.STRING,description:"Une brve description du style de la tenue."},vetements:{type:Pe.ARRAY,items:{type:Pe.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(T.text).tenues}catch(S){throw console.error("Erreur de parsing JSON de la rponse Gemini:",S),console.error("Rponse reue:",T.text),new Error("L'IA a renvoy une rponse malforme.")}}async function xD(n,e){const t=n.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${n.length} pices):
${t}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,o=await Xd.models.generateContent({model:"gemini-2.5-pro",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{summary:{type:Pe.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:Pe.ARRAY,items:{type:Pe.STRING},description:"Liste des points forts"},gaps:{type:Pe.ARRAY,items:{type:Pe.STRING},description:"Liste des manques"},suggestions:{type:Pe.ARRAY,items:{type:Pe.OBJECT,properties:{category:{type:Pe.STRING},description:{type:Pe.STRING},reason:{type:Pe.STRING},priority:{type:Pe.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Pe.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(o.text)}catch(a){throw console.error("Erreur:",a),a}}async function MD(n,e,t,i){const o=new Set(e.flatMap(T=>T.itemIds)),u=n.filter(T=>!o.has(T.id)).map(T=>`- ${T.analysis} (Catgorie: ${T.category}, Couleur: ${T.color}, Matire: ${T.material})`).join(`
`),d=e.map(T=>`- ${T.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${p}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables.
    4. Assure-toi que la quantit de vtements est approprie pour ${t} jour(s).
    `,v=await Xd.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:Pe.OBJECT,properties:{titre:{type:Pe.STRING,description:"Le nom du plan de valise."},resume:{type:Pe.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:Pe.ARRAY,items:{type:Pe.STRING},description:"La liste des vtements  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(T){throw console.error("Erreur de parsing JSON:",T),new Error("L'IA a renvoy une rponse malforme.")}}const DD=()=>{};var wE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},PD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},US={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,b=m&63;p||(b=64,u||(S=64)),i.push(t[v],t[T],t[S],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(VS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||T==null)throw new kD;const S=a<<2|d>>4;if(i.push(S),m!==64){const b=d<<4&240|m>>2;if(i.push(b),T!==64){const q=m<<6&192|T;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VD=function(n){const e=VS(n);return US.encodeByteArray(e,!0)},Rd=function(n){return VD(n).replace(/\./g,"")},LS=function(n){try{return US.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=()=>UD().__FIREBASE_DEFAULTS__,OD=()=>{if(typeof process>"u"||typeof wE>"u")return;const n=wE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&LS(n[1]);return e&&JSON.parse(e)},Wd=()=>{try{return DD()||LD()||OD()||qD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OS=n=>{var e,t;return(t=(e=Wd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qS=n=>{const e=OS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},FS=()=>{var n;return(n=Wd())===null||n===void 0?void 0:n.config},BS=n=>{var e;return(e=Wd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Rd(JSON.stringify(t)),Rd(JSON.stringify(u)),""].join(".")}const Wl={};function BD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?n.emulator.push(e):n.prod.push(e);return n}function HD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let bE=!1;function xm(n,e){if(typeof window>"u"||typeof document>"u"||!Nr(window.location.host)||Wl[n]===e||Wl[n]||bE)return;Wl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=BD().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,b){S.setAttribute("width","24"),S.setAttribute("id",b),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{bE=!0,u()},S}function v(S,b){S.setAttribute("id",b),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=HD(i),b=t("text"),q=document.getElementById(b)||document.createElement("span"),F=t("learnmore"),z=document.getElementById(F)||document.createElement("a"),te=t("preprendIcon"),K=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Q=S.element;d(Q),v(z,F);const ie=m();p(K,te),Q.append(K,q,z,ie),document.body.appendChild(Q)}a?(q.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function zD(){var n;const e=(n=Wd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function KD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $D(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QD(){return!zD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XD(){try{return typeof indexedDB=="object"}catch{return!1}}function WD(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="FirebaseError";class Li extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ZD,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?jD(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Li(o,d,i)}}function jD(n,e){return n.replace(eP,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const eP=/\{\$([^}]+)}/g;function tP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ho(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(NE(a)&&NE(u)){if(!ho(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function NE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Gl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function zl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function nP(n,e){const t=new iP(n,e);return t.subscribe.bind(t)}class iP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");sP(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Rp),o.error===void 0&&(o.error=Rp),o.complete===void 0&&(o.complete=Rp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n){return n&&n._delegate?n._delegate:n}class Tr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new FD;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aP(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:oP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oP(n){return n===ao?void 0:n}function aP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const uP={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},cP=Be.INFO,dP={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},fP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=dP[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=cP,this._logHandler=fP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const hP=(n,e)=>e.some(t=>n instanceof t);let xE,ME;function pP(){return xE||(xE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mP(){return ME||(ME=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GS=new WeakMap,$p=new WeakMap,zS=new WeakMap,wp=new WeakMap,Dm=new WeakMap;function gP(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(gr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&GS.set(t,n)}).catch(()=>{}),Dm.set(e,n),e}function yP(n){if($p.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});$p.set(n,e)}let Qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $p.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _P(n){Qp=n(Qp)}function vP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(bp(this),e,...t);return zS.set(i,e.sort?e.sort():[e]),gr(i)}:mP().includes(n)?function(...e){return n.apply(bp(this),e),gr(GS.get(this))}:function(...e){return gr(n.apply(bp(this),e))}}function TP(n){return typeof n=="function"?vP(n):(n instanceof IDBTransaction&&yP(n),hP(n,pP())?new Proxy(n,Qp):n)}function gr(n){if(n instanceof IDBRequest)return gP(n);if(wp.has(n))return wp.get(n);const e=TP(n);return e!==n&&(wp.set(n,e),Dm.set(e,n)),e}const bp=n=>Dm.get(n);function EP(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=gr(u);return i&&u.addEventListener("upgradeneeded",p=>{i(gr(u.result),p.oldVersion,p.newVersion,gr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const SP=["get","getKey","getAll","getAllKeys","count"],AP=["put","add","delete","clear"],Np=new Map;function DE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Np.get(e))return Np.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=AP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||SP.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return Np.set(e,a),a}_P(n=>({...n,get:(e,t,i)=>DE(e,t)||n.get(e,t,i),has:(e,t)=>!!DE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function IP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xp="@firebase/app",PE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Mm("@firebase/app"),RP="@firebase/app-compat",wP="@firebase/analytics-compat",bP="@firebase/analytics",NP="@firebase/app-check-compat",xP="@firebase/app-check",MP="@firebase/auth",DP="@firebase/auth-compat",PP="@firebase/database",kP="@firebase/data-connect",VP="@firebase/database-compat",UP="@firebase/functions",LP="@firebase/functions-compat",OP="@firebase/installations",qP="@firebase/installations-compat",FP="@firebase/messaging",BP="@firebase/messaging-compat",HP="@firebase/performance",GP="@firebase/performance-compat",zP="@firebase/remote-config",JP="@firebase/remote-config-compat",YP="@firebase/storage",KP="@firebase/storage-compat",$P="@firebase/firestore",QP="@firebase/ai",XP="@firebase/firestore-compat",WP="firebase",ZP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="[DEFAULT]",jP={[Xp]:"fire-core",[RP]:"fire-core-compat",[bP]:"fire-analytics",[wP]:"fire-analytics-compat",[xP]:"fire-app-check",[NP]:"fire-app-check-compat",[MP]:"fire-auth",[DP]:"fire-auth-compat",[PP]:"fire-rtdb",[kP]:"fire-data-connect",[VP]:"fire-rtdb-compat",[UP]:"fire-fn",[LP]:"fire-fn-compat",[OP]:"fire-iid",[qP]:"fire-iid-compat",[FP]:"fire-fcm",[BP]:"fire-fcm-compat",[HP]:"fire-perf",[GP]:"fire-perf-compat",[zP]:"fire-rc",[JP]:"fire-rc-compat",[YP]:"fire-gcs",[KP]:"fire-gcs-compat",[$P]:"fire-fst",[XP]:"fire-fst-compat",[QP]:"fire-vertex","fire-js":"fire-js",[WP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,e2=new Map,Zp=new Map;function kE(n,e){try{n.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function po(n){const e=n.name;if(Zp.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;Zp.set(e,n);for(const t of wd.values())kE(t,n);for(const t of e2.values())kE(t,n);return!0}function Zd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new gu("app","Firebase",t2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=ZP;function JS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Wp,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw yr.create("bad-app-name",{appName:String(o)});if(t||(t=FS()),!t)throw yr.create("no-options");const a=wd.get(o);if(a){if(ho(t,a.options)&&ho(i,a.config))return a;throw yr.create("duplicate-app",{appName:o})}const u=new lP(o);for(const p of Zp.values())u.addComponent(p);const d=new n2(t,i,u);return wd.set(o,d),d}function Pm(n=Wp){const e=wd.get(n);if(!e&&n===Wp&&FS())return JS();if(!e)throw yr.create("no-app",{appName:n});return e}function Ni(n,e,t){var i;let o=(i=jP[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(d.join(" "));return}po(new Tr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="firebase-heartbeat-database",s2=1,ru="firebase-heartbeat-store";let xp=null;function YS(){return xp||(xp=EP(i2,s2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ru)}catch(t){console.warn(t)}}}}).catch(n=>{throw yr.create("idb-open",{originalErrorMessage:n.message})})),xp}async function r2(n){try{const t=(await YS()).transaction(ru),i=await t.objectStore(ru).get(KS(n));return await t.done,i}catch(e){if(e instanceof Li)gs.warn(e.message);else{const t=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(t.message)}}}async function VE(n,e){try{const i=(await YS()).transaction(ru,"readwrite");await i.objectStore(ru).put(e,KS(n)),await i.done}catch(t){if(t instanceof Li)gs.warn(t.message);else{const i=yr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gs.warn(i.message)}}}function KS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=1024,a2=30;class l2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new c2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=UE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>a2){const u=d2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){gs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=UE(),{heartbeatsToSend:i,unsentEntries:o}=u2(this._heartbeatsCache.heartbeats),a=Rd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return gs.warn(t),""}}}function UE(){return new Date().toISOString().substring(0,10)}function u2(n,e=o2){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),LE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),LE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class c2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XD()?WD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await r2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return VE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return VE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function LE(n){return Rd(JSON.stringify({version:2,heartbeats:n})).length}function d2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(n){po(new Tr("platform-logger",e=>new CP(e),"PRIVATE")),po(new Tr("heartbeat",e=>new l2(e),"PRIVATE")),Ni(Xp,PE,n),Ni(Xp,PE,"esm2017"),Ni("fire-js","")}f2("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="firebasestorage.googleapis.com",QS="storageBucket",h2=120*1e3,p2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et extends Li{constructor(e,t,i=0){super(Mp(e),`Firebase Storage: ${t} (${Mp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function Mp(n){return"storage/"+n}function km(){const n="An unknown error occurred, please check the error payload for server response.";return new Et(Tt.UNKNOWN,n)}function m2(n){return new Et(Tt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function g2(n){return new Et(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function y2(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Et(Tt.UNAUTHENTICATED,n)}function _2(){return new Et(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function v2(n){return new Et(Tt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function T2(){return new Et(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function E2(){return new Et(Tt.CANCELED,"User canceled the upload/download.")}function S2(n){return new Et(Tt.INVALID_URL,"Invalid URL '"+n+"'.")}function A2(n){return new Et(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function C2(){return new Et(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+QS+"' property when initializing the app?")}function I2(){return new Et(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function R2(){return new Et(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function w2(n){return new Et(Tt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jp(n){return new Et(Tt.INVALID_ARGUMENT,n)}function XS(){return new Et(Tt.APP_DELETED,"The Firebase app was deleted.")}function b2(n){return new Et(Tt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zl(n,e){return new Et(Tt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Hl(n){throw new Et(Tt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Fn.makeFromUrl(e,t)}catch{return new Fn(e,"")}if(i.path==="")return i;throw A2(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function m(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",b=new RegExp(`^https?://${T}/${v}/b/${o}/o${S}`,"i"),q={bucket:1,path:3},F=t===$S?"(?:storage.googleapis.com|storage.cloud.google.com)":t,z="([^?#]*)",te=new RegExp(`^https?://${F}/${o}/${z}`,"i"),Q=[{regex:d,indices:p,postModify:a},{regex:b,indices:q,postModify:m},{regex:te,indices:{bucket:1,path:2},postModify:m}];for(let ie=0;ie<Q.length;ie++){const le=Q[ie],de=le.regex.exec(e);if(de){const M=de[le.indices.bucket];let N=de[le.indices.path];N||(N=""),i=new Fn(M,N),le.postModify(i);break}}if(i==null)throw S2(e);return i}}class N2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let m=!1;function v(...z){m||(m=!0,e.apply(null,z))}function T(z){o=setTimeout(()=>{o=null,n(b,p())},z)}function S(){a&&clearTimeout(a)}function b(z,...te){if(m){S();return}if(z){S(),v.call(null,z,...te);return}if(p()||u){S(),v.call(null,z,...te);return}i<64&&(i*=2);let Q;d===1?(d=2,Q=0):Q=(i+Math.random())*1e3,T(Q)}let q=!1;function F(z){q||(q=!0,S(),!m&&(o!==null?(z||(d=2),clearTimeout(o),T(0)):z||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,F(!0)},t),F}function M2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(n){return n!==void 0}function P2(n){return typeof n=="object"&&!Array.isArray(n)}function Vm(n){return typeof n=="string"||n instanceof String}function OE(n){return Um()&&n instanceof Blob}function Um(){return typeof Blob<"u"}function qE(n,e,t,i){if(i<e)throw jp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw jp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function WS(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var co;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(co||(co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,t,i,o,a,u,d,p,m,v,T,S=!0,b=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,F)=>{this.resolve_=q,this.reject_=F,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new td(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===co.NO_ERROR,p=a.getStatus();if(!d||k2(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===co.ABORT;i(!1,new td(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new td(m,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());D2(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=km();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?XS():E2();u(p)}else{const p=T2();u(p)}};this.canceled_?t(!1,new td(!1,null,!0)):this.backoffId_=x2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&M2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class td{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function U2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function L2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function q2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function F2(n,e,t,i,o,a,u=!0,d=!1){const p=WS(n.urlParams),m=n.url+p,v=Object.assign({},n.headers);return O2(v,e),U2(v,t),L2(v,a),q2(v,i),new V2(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function H2(...n){const e=B2();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Um())return new Blob(n);throw new Et(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function G2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(n){if(typeof atob>"u")throw w2("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dp{constructor(e,t){this.data=e,this.contentType=t||null}}function ZS(n,e){switch(n){case di.RAW:return new Dp(jS(e));case di.BASE64:case di.BASE64URL:return new Dp(eA(n,e));case di.DATA_URL:return new Dp(Y2(e),K2(e))}throw km()}function jS(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=n.charCodeAt(++t);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function J2(n){let e;try{e=decodeURIComponent(n)}catch{throw Zl(di.DATA_URL,"Malformed data URL.")}return jS(e)}function eA(n,e){switch(n){case di.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw Zl(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case di.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw Zl(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=z2(e)}catch(o){throw o.message.includes("polyfill")?o:Zl(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class tA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Zl(di.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=$2(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Y2(n){const e=new tA(n);return e.base64?eA(di.BASE64,e.rest):J2(e.rest)}function K2(n){return new tA(n).contentType}function $2(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t){let i=0,o="";OE(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(OE(this.data_)){const i=this.data_,o=G2(i,e,t);return o===null?null:new dr(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new dr(i,!0)}}static getBlob(...e){if(Um()){const t=e.map(i=>i instanceof dr?i.data_:i);return new dr(H2.apply(null,t))}else{const t=e.map(u=>Vm(u)?ZS(di.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)o[a++]=u[d]}),new dr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(n){let e;try{e=JSON.parse(n)}catch{return null}return P2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function X2(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function iA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n,e){return e}class vn{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||W2}}let nd=null;function Z2(n){return!Vm(n)||n.length<2?n:iA(n)}function sA(){if(nd)return nd;const n=[];n.push(new vn("bucket")),n.push(new vn("generation")),n.push(new vn("metageneration")),n.push(new vn("name","fullPath",!0));function e(a,u){return Z2(u)}const t=new vn("name");t.xform=e,n.push(t);function i(a,u){return u!==void 0?Number(u):u}const o=new vn("size");return o.xform=i,n.push(o),n.push(new vn("timeCreated")),n.push(new vn("updated")),n.push(new vn("md5Hash",null,!0)),n.push(new vn("cacheControl",null,!0)),n.push(new vn("contentDisposition",null,!0)),n.push(new vn("contentEncoding",null,!0)),n.push(new vn("contentLanguage",null,!0)),n.push(new vn("contentType",null,!0)),n.push(new vn("metadata","customMetadata",!0)),nd=n,nd}function j2(n,e){function t(){const i=n.bucket,o=n.fullPath,a=new Fn(i,o);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function ek(n,e,t){const i={};i.type="file";const o=t.length;for(let a=0;a<o;a++){const u=t[a];i[u.local]=u.xform(i,e[u.server])}return j2(i,n),i}function rA(n,e,t){const i=nA(e);return i===null?null:ek(n,i,t)}function tk(n,e,t,i){const o=nA(e);if(o===null||!Vm(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const v=n.bucket,T=n.fullPath,S="/b/"+u(v)+"/o/"+u(T),b=Lm(S,t,i),q=WS({alt:"media",token:m});return b+q})[0]}function nk(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class oA{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(n){if(!n)throw km()}function ik(n,e){function t(i,o){const a=rA(n,o,e);return aA(a!==null),a}return t}function sk(n,e){function t(i,o){const a=rA(n,o,e);return aA(a!==null),tk(a,o,n.host,n._protocol)}return t}function lA(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=_2():o=y2():t.getStatus()===402?o=g2(n.bucket):t.getStatus()===403?o=v2(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function rk(n){const e=lA(n);function t(i,o){let a=e(i,o);return i.getStatus()===404&&(a=m2(n.path)),a.serverResponse=o.serverResponse,a}return t}function ok(n,e,t){const i=e.fullServerUrl(),o=Lm(i,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new oA(o,a,sk(n,t),u);return d.errorHandler=rk(e),d}function ak(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function lk(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=ak(null,e)),i}function uk(n,e,t,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let Q="";for(let ie=0;ie<2;ie++)Q=Q+Math.random().toString().slice(2);return Q}const p=d();u["Content-Type"]="multipart/related; boundary="+p;const m=lk(e,i,o),v=nk(m,t),T="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+p+"--",b=dr.getBlob(T,i,S);if(b===null)throw I2();const q={name:m.fullPath},F=Lm(a,n.host,n._protocol),z="POST",te=n.maxUploadRetryTime,K=new oA(F,z,ik(n,t),te);return K.urlParams=q,K.headers=u,K.body=b.uploadData(),K.errorHandler=lA(e),K}class ck{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,a){if(this.sent_)throw Hl("cannot .send() more than once");if(Nr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dk extends ck{initXhr(){this.xhr_.responseType="text"}}function uA(){return new dk}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t){this._service=e,t instanceof Fn?this._location=t:this._location=Fn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mo(e,t)}get root(){const e=new Fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iA(this._location.path)}get storage(){return this._service}get parent(){const e=Q2(this._location.path);if(e===null)return null;const t=new Fn(this._location.bucket,e);return new mo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw b2(e)}}function fk(n,e,t){n._throwIfRoot("uploadBytes");const i=uk(n.storage,n._location,sA(),new dr(e,!0),t);return n.storage.makeRequestWithTokens(i,uA).then(o=>({metadata:o,ref:n}))}function hk(n,e,t=di.RAW,i){n._throwIfRoot("uploadString");const o=ZS(t,e),a=Object.assign({},i);return a.contentType==null&&o.contentType!=null&&(a.contentType=o.contentType),fk(n,o.data,a)}function pk(n){n._throwIfRoot("getDownloadURL");const e=ok(n.storage,n._location,sA());return n.storage.makeRequestWithTokens(e,uA).then(t=>{if(t===null)throw R2();return t})}function mk(n,e){const t=X2(n._location.path,e),i=new Fn(n._location.bucket,t);return new mo(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(n){return/^[A-Za-z]+:\/\//.test(n)}function yk(n,e){return new mo(n,e)}function cA(n,e){if(n instanceof Om){const t=n;if(t._bucket==null)throw C2();const i=new mo(t,t._bucket);return e!=null?cA(i,e):i}else return e!==void 0?mk(n,e):n}function _k(n,e){if(e&&gk(e)){if(n instanceof Om)return yk(n,e);throw jp("To use ref(service, url), the first argument must be a Storage instance.")}else return cA(n,e)}function FE(n,e){const t=e==null?void 0:e[QS];return t==null?null:Fn.makeFromBucketSpec(t,n)}function vk(n,e,t,i={}){n.host=`${e}:${t}`;const o=Nr(e);o&&(Nm(`https://${n.host}/b`),xm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:HS(a,n.app.options.projectId))}class Om{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=$S,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=h2,this._maxUploadRetryTime=p2,this._requests=new Set,o!=null?this._bucket=Fn.makeFromBucketSpec(o,this._host):this._bucket=FE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fn.makeFromBucketSpec(this._url,e):this._bucket=FE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mo(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new N2(XS());{const u=F2(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const BE="@firebase/storage",HE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="storage";function Tk(n,e,t,i){return n=tn(n),hk(n,e,t,i)}function Ek(n){return n=tn(n),pk(n)}function Sk(n,e){return n=tn(n),_k(n,e)}function Ak(n=Pm(),e){n=tn(n);const i=Zd(n,dA).getImmediate({identifier:e}),o=qS("storage");return o&&Ck(i,...o),i}function Ck(n,e,t,i={}){vk(n,e,t,i)}function Ik(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Om(t,i,o,e,Eo)}function Rk(){po(new Tr(dA,Ik,"PUBLIC").setMultipleInstances(!0)),Ni(BE,HE,""),Ni(BE,HE,"esm2017")}Rk();var wk="firebase",bk="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(wk,bk,"app");function qm(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function fA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nk=fA,hA=new gu("auth","Firebase",fA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Mm("@firebase/auth");function xk(n,...e){bd.logLevel<=Be.WARN&&bd.warn(`Auth (${Eo}): ${n}`,...e)}function dd(n,...e){bd.logLevel<=Be.ERROR&&bd.error(`Auth (${Eo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(n,...e){throw Bm(n,...e)}function pi(n,...e){return Bm(n,...e)}function Fm(n,e,t){const i=Object.assign(Object.assign({},Nk()),{[e]:t});return new gu("auth","Firebase",i).create(e,{appName:n.name})}function hs(n){return Fm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mk(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ni(n,"argument-error"),Fm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return hA.create(n,...e)}function Ie(n,e,...t){if(!n)throw Bm(e,...t)}function ds(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dd(e),new Error(e)}function ys(n,e){n||ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Dk(){return GE()==="http:"||GE()==="https:"}function GE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dk()||YD()||"connection"in navigator)?navigator.onLine:!0}function kk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,t){this.shortDelay=e,this.longDelay=t,ys(t>e,"Short delay should be less than long delay!"),this.isMobile=GD()||KD()}get(){return Pk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n,e){ys(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Lk=new _u(3e4,6e4);function xr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Mr(n,e,t,i,o={}){return mA(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=yu(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return JD()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Nr(n.emulatorConfig.host)&&(m.credentials="include"),pA.fetch()(await gA(n,n.config.apiHost,t,d),m)})}async function mA(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},Vk),e);try{const o=new qk(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw id(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw id(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw id(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw id(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Fm(n,v,m);ni(n,v)}}catch(o){if(o instanceof Li)throw o;ni(n,"network-request-failed",{message:String(o)})}}async function vu(n,e,t,i,o={}){const a=await Mr(n,e,t,i,o);return"mfaPendingCredential"in a&&ni(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function gA(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Hm(n.config,o):`${n.config.apiScheme}://${o}`;return Uk.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function Ok(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(pi(this.auth,"network-request-failed")),Lk.get())})}}function id(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=pi(n,e,i);return o.customData._tokenResponse=t,o}function zE(n){return n!==void 0&&n.enterprise!==void 0}class Fk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ok(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Bk(n,e){return Mr(n,"GET","/v2/recaptchaConfig",xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(n,e){return Mr(n,"POST","/v1/accounts:delete",e)}async function Nd(n,e){return Mr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gk(n,e=!1){const t=tn(n),i=await t.getIdToken(e),o=Gm(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:jl(Pp(o.auth_time)),issuedAtTime:jl(Pp(o.iat)),expirationTime:jl(Pp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Pp(n){return Number(n)*1e3}function Gm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{const o=LS(t);return o?JSON.parse(o):(dd("Failed to decode base64 JWT payload"),null)}catch(o){return dd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function JE(n){const e=Gm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Li&&zk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function zk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jl(this.lastLoginAt),this.creationTime=jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(n){var e;const t=n.auth,i=await n.getIdToken(),o=await ou(n,Nd(t,{idToken:i}));Ie(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?yA(a.providerUserInfo):[],d=Kk(n.providerData,u),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=p?m:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new tm(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,T)}async function Yk(n){const e=tn(n);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kk(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function yA(n){return n.map(e=>{var{providerId:t}=e,i=qm(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(n,e){const t=await mA(n,{},async()=>{const i=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await gA(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Nr(n.emulatorConfig.host)&&(p.credentials="include"),pA.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Qk(n,e){return Mr(n,"POST","/v2/accounts:revokeToken",xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=JE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await $k(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Ea;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ea,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=qm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new tm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ou(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Gk(this,e)}reload(){return Yk(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await ou(this,Hk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,m,v;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,q=(u=t.photoURL)!==null&&u!==void 0?u:void 0,F=(d=t.tenantId)!==null&&d!==void 0?d:void 0,z=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,te=(m=t.createdAt)!==null&&m!==void 0?m:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Q,emailVerified:ie,isAnonymous:le,providerData:de,stsTokenManager:M}=t;Ie(Q&&M,e,"internal-error");const N=Ea.fromJSON(this.name,M);Ie(typeof Q=="string",e,"internal-error"),cr(T,e.name),cr(S,e.name),Ie(typeof ie=="boolean",e,"internal-error"),Ie(typeof le=="boolean",e,"internal-error"),cr(b,e.name),cr(q,e.name),cr(F,e.name),cr(z,e.name),cr(te,e.name),cr(K,e.name);const x=new fi({uid:Q,auth:e,email:S,emailVerified:ie,displayName:T,isAnonymous:le,photoURL:q,phoneNumber:b,tenantId:F,stsTokenManager:N,createdAt:te,lastLoginAt:K});return de&&Array.isArray(de)&&(x.providerData=de.map(D=>Object.assign({},D))),z&&(x._redirectEventId=z),x}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ea;o.updateFromServerResponse(t);const a=new fi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await xd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?yA(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Ea;d.updateFromIdToken(i);const p=new fi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new tm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;function fs(n){ys(n instanceof Function,"Expected a class definition");let e=YE.get(n);return e?(ys(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,YE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_A.type="NONE";const KE=_A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(n,e,t){return`firebase:${n}:${e}:${t}`}class Sa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=fd(this.userKey,o.apiKey,a),this.fullPersistenceKey=fd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nd(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Sa(fs(KE),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||fs(KE);const u=fd(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let T;if(typeof v=="string"){const S=await Nd(e,{idToken:v}).catch(()=>{});if(!S)break;T=await fi._fromGetAccountInfoResponse(e,S,v)}else T=fi._fromJSON(e,v);m!==a&&(d=T),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Sa(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Sa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CA(e))return"Blackberry";if(IA(e))return"Webos";if(TA(e))return"Safari";if((e.includes("chrome/")||EA(e))&&!e.includes("edge/"))return"Chrome";if(AA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function vA(n=fn()){return/firefox\//i.test(n)}function TA(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EA(n=fn()){return/crios\//i.test(n)}function SA(n=fn()){return/iemobile/i.test(n)}function AA(n=fn()){return/android/i.test(n)}function CA(n=fn()){return/blackberry/i.test(n)}function IA(n=fn()){return/webos/i.test(n)}function zm(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Xk(n=fn()){var e;return zm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Wk(){return $D()&&document.documentMode===10}function RA(n=fn()){return zm(n)||AA(n)||IA(n)||CA(n)||/windows phone/i.test(n)||SA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n,e=[]){let t;switch(n){case"Browser":t=$E(fn());break;case"Worker":t=`${$E(fn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Eo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jk(n,e={}){return Mr(n,"GET","/v2/passwordPolicy",xr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=6;class tV{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:eV,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QE(this),this.idTokenSubscription=new QE(this),this.beforeStateQueue=new Zk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Sa.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nd(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(bn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(hs(this));const t=e?tn(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jk(this),t=new tV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Qk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Sa.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&xk(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Dr(n){return tn(n)}class QE{constructor(e){this.auth=e,this.observer=null,this.addObserver=nP(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iV(n){jd=n}function bA(n){return jd.loadJS(n)}function sV(){return jd.recaptchaEnterpriseScript}function rV(){return jd.gapiScript}function oV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class aV{constructor(){this.enterprise=new lV}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lV{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const uV="recaptcha-enterprise",NA="NO_RECAPTCHA";class cV{constructor(e){this.type=uV,this.auth=Dr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{Bk(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new Fk(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;zE(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(NA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aV().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&zE(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=sV();p.length!==0&&(p+=d),bA(p).then(()=>{o(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function XE(n,e,t,i=!1,o=!1){const a=new cV(n);let u;if(o)u=NA;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function nm(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await XE(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await XE(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n,e){const t=Zd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(ho(a,e??{}))return o;ni(o,"already-initialized")}return t.initialize({options:e})}function fV(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function hV(n,e,t){const i=Dr(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=xA(e),{host:u,port:d}=pV(e),p=d===null?"":`:${d}`,m={url:`${a}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(ho(m,i.config.emulator)&&ho(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Nr(u)?(Nm(`${a}//${u}${p}`),xm("Auth",!0)):mV()}function xA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pV(n){const e=xA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:WE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:WE(u)}}}function WE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function mV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,t){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function gV(n,e){return Mr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(n,e){return vu(n,"POST","/v1/accounts:signInWithPassword",xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(n,e){return vu(n,"POST","/v1/accounts:signInWithEmailLink",xr(n,e))}async function vV(n,e){return vu(n,"POST","/v1/accounts:signInWithEmailLink",xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Jm{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new au(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new au(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(e,t,"signInWithPassword",yV);case"emailLink":return _V(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nm(e,i,"signUpPassword",gV);case"emailLink":return vV(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(n,e){return vu(n,"POST","/v1/accounts:signInWithIdp",xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="http://localhost";class go extends Jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=qm(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new go(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Aa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Aa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Aa(e,t)}buildRequest(){const e={requestUri:TV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SV(n){const e=Gl(zl(n)).link,t=e?Gl(zl(e)).deep_link_id:null,i=Gl(zl(n)).deep_link_id;return(i?Gl(zl(i)).link:null)||i||t||e||n}class Ym{constructor(e){var t,i,o,a,u,d;const p=Gl(zl(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,T=EV((o=p.mode)!==null&&o!==void 0?o:null);Ie(m&&v&&T,"argument-error"),this.apiKey=m,this.operation=T,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=SV(e);try{return new Ym(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.providerId=Pa.PROVIDER_ID}static credential(e,t){return au._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ym.parseLink(t);return Ie(i,"argument-error"),au._fromEmailAndCode(e,i.code,i.tenantId)}}Pa.PROVIDER_ID="password";Pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Km{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Tu{constructor(){super("facebook.com")}static credential(e){return go._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return go._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return cs.credential(t,i)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Tu{constructor(){super("github.com")}static credential(e){return go._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Tu{constructor(){super("twitter.com")}static credential(e,t){return go._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return pr.credential(t,i)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(n,e){return vu(n,"POST","/v1/accounts:signUp",xr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await fi._fromIdTokenResponse(e,i,o),u=ZE(i);return new yo({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ZE(i);return new yo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ZE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Li{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Md.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Md(e,t,i,o)}}function MA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Md._fromErrorAndOperation(n,a,e,i):a})}async function CV(n,e,t=!1){const i=await ou(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return yo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(n,e,t=!1){const{auth:i}=n;if(bn(i.app))return Promise.reject(hs(i));const o="reauthenticate";try{const a=await ou(n,MA(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const u=Gm(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(n.uid===d,i,"user-mismatch"),yo._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ni(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(n,e,t=!1){if(bn(n.app))return Promise.reject(hs(n));const i="signIn",o=await MA(n,i,e),a=await yo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function RV(n,e){return DA(Dr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n){const e=Dr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wV(n,e,t){if(bn(n.app))return Promise.reject(hs(n));const i=Dr(n),u=await nm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AV).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&PA(n),p}),d=await yo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function bV(n,e,t){return bn(n.app)?Promise.reject(hs(n)):RV(tn(n),Pa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&PA(n),i})}function NV(n,e,t,i){return tn(n).onIdTokenChanged(e,t,i)}function xV(n,e,t){return tn(n).beforeAuthStateChanged(e,t)}function MV(n,e,t,i){return tn(n).onAuthStateChanged(e,t,i)}function DV(n){return tn(n).signOut()}const Dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dd,"1"),this.storage.removeItem(Dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=1e3,kV=10;class VA extends kA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);Wk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,kV):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},PV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}VA.type="LOCAL";const VV=VA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends kA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}UA.type="SESSION";const LA=UA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ef(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),p=await UV(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const m=$m("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return window}function OV(n){xi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function qV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function BV(){return OA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebaseLocalStorageDb",HV=1,Pd="firebaseLocalStorage",FA="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tf(n,e){return n.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function GV(){const n=indexedDB.deleteDatabase(qA);return new Eu(n).toPromise()}function im(){const n=indexedDB.open(qA,HV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Pd,{keyPath:FA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Pd)?e(i):(i.close(),await GV(),e(await im()))})})}async function jE(n,e,t){const i=tf(n,!0).put({[FA]:e,value:t});return new Eu(i).toPromise()}async function zV(n,e){const t=tf(n,!1).get(e),i=await new Eu(t).toPromise();return i===void 0?null:i.value}function e0(n,e){const t=tf(n,!0).delete(e);return new Eu(t).toPromise()}const JV=800,YV=3;class BA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>YV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ef._getInstance(BV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await qV(),!this.activeServiceWorker)return;this.sender=new LV(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await im();return await jE(e,Dd,"1"),await e0(e,Dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>jE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>zV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>e0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=tf(o,!1).getAll();return new Eu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BA.type="LOCAL";const KV=BA;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n,e){return e?fs(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends Jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Aa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Aa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Aa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $V(n){return DA(n.auth,new Qm(n),n.bypassAuthState)}function QV(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),IV(t,new Qm(n),n.bypassAuthState)}async function XV(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),CV(t,new Qm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $V;case"linkViaPopup":case"linkViaRedirect":return XV;case"reauthViaPopup":case"reauthViaRedirect":return QV;default:ni(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new _u(2e3,1e4);async function ZV(n,e,t){if(bn(n.app))return Promise.reject(pi(n,"operation-not-supported-in-this-environment"));const i=Dr(n);Mk(n,e,Km);const o=HA(i,t);return new lo(i,"signInViaPopup",e,o).executeNotNull()}class lo extends GA{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=$m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WV.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="pendingRedirect",hd=new Map;class eU extends GA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=hd.get(this.auth._key());if(!e){try{const i=await tU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}hd.set(this.auth._key(),e)}return this.bypassAuthState||hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tU(n,e){const t=sU(e),i=iU(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function nU(n,e){hd.set(n._key(),e)}function iU(n){return fs(n._redirectPersistence)}function sU(n){return fd(jV,n.config.apiKey,n.name)}async function rU(n,e,t=!1){if(bn(n.app))return Promise.reject(hs(n));const i=Dr(n),o=HA(i,e),u=await new eU(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=600*1e3;class aU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!zA(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(pi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oU&&this.cachedEventUids.clear(),this.cachedEventUids.has(t0(e))}saveEventToCache(e){this.cachedEventUids.add(t0(e)),this.lastProcessedEventTime=Date.now()}}function t0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(n,e={}){return Mr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dU=/^https?/;async function fU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uU(n);for(const t of e)try{if(hU(t))return}catch{}ni(n,"unauthorized-domain")}function hU(n){const e=em(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!dU.test(t))return!1;if(cU.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=new _u(3e4,6e4);function n0(){const n=xi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mU(n){return new Promise((e,t)=>{var i,o,a;function u(){n0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n0(),t(pi(n,"network-request-failed"))},timeout:pU.get()})}if(!((o=(i=xi().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=xi().gapi)===null||a===void 0)&&a.load)u();else{const d=oV("iframefcb");return xi()[d]=()=>{gapi.load?u():t(pi(n,"network-request-failed"))},bA(`${rV()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw pd=null,e})}let pd=null;function gU(n){return pd=pd||mU(n),pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=new _u(5e3,15e3),_U="__/auth/iframe",vU="emulator/auth/iframe",TU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SU(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Hm(e,vU):`https://${n.config.authDomain}/${_U}`,i={apiKey:e.apiKey,appName:n.name,v:Eo},o=EU.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${yu(i).slice(1)}`}async function AU(n){const e=await gU(n),t=xi().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:SU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TU,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=pi(n,"network-request-failed"),d=xi().setTimeout(()=>{a(u)},yU.get());function p(){xi().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IU=500,RU=600,wU="_blank",bU="http://localhost";class i0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NU(n,e,t,i=IU,o=RU){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},CU),{width:i.toString(),height:o.toString(),top:a,left:u}),m=fn().toLowerCase();t&&(d=EA(m)?wU:t),vA(m)&&(e=e||bU,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[b,q])=>`${S}${b}=${q},`,"");if(Xk(m)&&d!=="_self")return xU(e||"",d),new i0(null);const T=window.open(e||"",d,v);Ie(T,n,"popup-blocked");try{T.focus()}catch{}return new i0(T)}function xU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="__/auth/handler",DU="emulator/auth/handler",PU=encodeURIComponent("fac");async function s0(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Eo,eventId:o};if(e instanceof Km){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",tP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Tu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${PU}=${encodeURIComponent(p)}`:"";return`${kU(n)}?${yu(d).slice(1)}${m}`}function kU({config:n}){return n.emulator?Hm(n,DU):`https://${n.authDomain}/${MU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="webStorageSupport";class VU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LA,this._completeRedirectFn=rU,this._overrideRedirectResult=nU}async _openPopup(e,t,i,o){var a;ys((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await s0(e,t,i,em(),o);return NU(e,u,$m())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await s0(e,t,i,em(),o);return OV(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ys(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await AU(e),i=new aU(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kp,{type:kp},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[kp];u!==void 0&&t(!!u),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return RA()||TA()||zm()}}const UU=VU;var r0="@firebase/auth",o0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qU(n){po(new Tr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wA(n)},m=new nV(i,o,a,p);return fV(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),po(new Tr("auth-internal",e=>{const t=Dr(e.getProvider("auth").getImmediate());return(i=>new LU(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(r0,o0,OU(n)),Ni(r0,o0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=300,BU=BS("authIdTokenMaxAge")||FU;let a0=null;const HU=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>BU)return;const o=t==null?void 0:t.token;a0!==o&&(a0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function GU(n=Pm()){const e=Zd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dV(n,{popupRedirectResolver:UU,persistence:[KV,VV,LA]}),i=BS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=HU(a.toString());xV(t,u,()=>u(t.currentUser)),NV(t,d=>u(d))}}const o=OS("auth");return o&&hV(t,`http://${o}`),t}function zU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iV({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=pi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",zU().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qU("Browser");var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _r,JA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function x(){}x.prototype=N.prototype,M.D=N.prototype,M.prototype=new x,M.prototype.constructor=M,M.C=function(D,V,L){for(var P=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)P[rt-2]=arguments[rt];return N.prototype[V].apply(D,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,N,x){x||(x=0);var D=Array(16);if(typeof N=="string")for(var V=0;16>V;++V)D[V]=N.charCodeAt(x++)|N.charCodeAt(x++)<<8|N.charCodeAt(x++)<<16|N.charCodeAt(x++)<<24;else for(V=0;16>V;++V)D[V]=N[x++]|N[x++]<<8|N[x++]<<16|N[x++]<<24;N=M.g[0],x=M.g[1],V=M.g[2];var L=M.g[3],P=N+(L^x&(V^L))+D[0]+3614090360&4294967295;N=x+(P<<7&4294967295|P>>>25),P=L+(V^N&(x^V))+D[1]+3905402710&4294967295,L=N+(P<<12&4294967295|P>>>20),P=V+(x^L&(N^x))+D[2]+606105819&4294967295,V=L+(P<<17&4294967295|P>>>15),P=x+(N^V&(L^N))+D[3]+3250441966&4294967295,x=V+(P<<22&4294967295|P>>>10),P=N+(L^x&(V^L))+D[4]+4118548399&4294967295,N=x+(P<<7&4294967295|P>>>25),P=L+(V^N&(x^V))+D[5]+1200080426&4294967295,L=N+(P<<12&4294967295|P>>>20),P=V+(x^L&(N^x))+D[6]+2821735955&4294967295,V=L+(P<<17&4294967295|P>>>15),P=x+(N^V&(L^N))+D[7]+4249261313&4294967295,x=V+(P<<22&4294967295|P>>>10),P=N+(L^x&(V^L))+D[8]+1770035416&4294967295,N=x+(P<<7&4294967295|P>>>25),P=L+(V^N&(x^V))+D[9]+2336552879&4294967295,L=N+(P<<12&4294967295|P>>>20),P=V+(x^L&(N^x))+D[10]+4294925233&4294967295,V=L+(P<<17&4294967295|P>>>15),P=x+(N^V&(L^N))+D[11]+2304563134&4294967295,x=V+(P<<22&4294967295|P>>>10),P=N+(L^x&(V^L))+D[12]+1804603682&4294967295,N=x+(P<<7&4294967295|P>>>25),P=L+(V^N&(x^V))+D[13]+4254626195&4294967295,L=N+(P<<12&4294967295|P>>>20),P=V+(x^L&(N^x))+D[14]+2792965006&4294967295,V=L+(P<<17&4294967295|P>>>15),P=x+(N^V&(L^N))+D[15]+1236535329&4294967295,x=V+(P<<22&4294967295|P>>>10),P=N+(V^L&(x^V))+D[1]+4129170786&4294967295,N=x+(P<<5&4294967295|P>>>27),P=L+(x^V&(N^x))+D[6]+3225465664&4294967295,L=N+(P<<9&4294967295|P>>>23),P=V+(N^x&(L^N))+D[11]+643717713&4294967295,V=L+(P<<14&4294967295|P>>>18),P=x+(L^N&(V^L))+D[0]+3921069994&4294967295,x=V+(P<<20&4294967295|P>>>12),P=N+(V^L&(x^V))+D[5]+3593408605&4294967295,N=x+(P<<5&4294967295|P>>>27),P=L+(x^V&(N^x))+D[10]+38016083&4294967295,L=N+(P<<9&4294967295|P>>>23),P=V+(N^x&(L^N))+D[15]+3634488961&4294967295,V=L+(P<<14&4294967295|P>>>18),P=x+(L^N&(V^L))+D[4]+3889429448&4294967295,x=V+(P<<20&4294967295|P>>>12),P=N+(V^L&(x^V))+D[9]+568446438&4294967295,N=x+(P<<5&4294967295|P>>>27),P=L+(x^V&(N^x))+D[14]+3275163606&4294967295,L=N+(P<<9&4294967295|P>>>23),P=V+(N^x&(L^N))+D[3]+4107603335&4294967295,V=L+(P<<14&4294967295|P>>>18),P=x+(L^N&(V^L))+D[8]+1163531501&4294967295,x=V+(P<<20&4294967295|P>>>12),P=N+(V^L&(x^V))+D[13]+2850285829&4294967295,N=x+(P<<5&4294967295|P>>>27),P=L+(x^V&(N^x))+D[2]+4243563512&4294967295,L=N+(P<<9&4294967295|P>>>23),P=V+(N^x&(L^N))+D[7]+1735328473&4294967295,V=L+(P<<14&4294967295|P>>>18),P=x+(L^N&(V^L))+D[12]+2368359562&4294967295,x=V+(P<<20&4294967295|P>>>12),P=N+(x^V^L)+D[5]+4294588738&4294967295,N=x+(P<<4&4294967295|P>>>28),P=L+(N^x^V)+D[8]+2272392833&4294967295,L=N+(P<<11&4294967295|P>>>21),P=V+(L^N^x)+D[11]+1839030562&4294967295,V=L+(P<<16&4294967295|P>>>16),P=x+(V^L^N)+D[14]+4259657740&4294967295,x=V+(P<<23&4294967295|P>>>9),P=N+(x^V^L)+D[1]+2763975236&4294967295,N=x+(P<<4&4294967295|P>>>28),P=L+(N^x^V)+D[4]+1272893353&4294967295,L=N+(P<<11&4294967295|P>>>21),P=V+(L^N^x)+D[7]+4139469664&4294967295,V=L+(P<<16&4294967295|P>>>16),P=x+(V^L^N)+D[10]+3200236656&4294967295,x=V+(P<<23&4294967295|P>>>9),P=N+(x^V^L)+D[13]+681279174&4294967295,N=x+(P<<4&4294967295|P>>>28),P=L+(N^x^V)+D[0]+3936430074&4294967295,L=N+(P<<11&4294967295|P>>>21),P=V+(L^N^x)+D[3]+3572445317&4294967295,V=L+(P<<16&4294967295|P>>>16),P=x+(V^L^N)+D[6]+76029189&4294967295,x=V+(P<<23&4294967295|P>>>9),P=N+(x^V^L)+D[9]+3654602809&4294967295,N=x+(P<<4&4294967295|P>>>28),P=L+(N^x^V)+D[12]+3873151461&4294967295,L=N+(P<<11&4294967295|P>>>21),P=V+(L^N^x)+D[15]+530742520&4294967295,V=L+(P<<16&4294967295|P>>>16),P=x+(V^L^N)+D[2]+3299628645&4294967295,x=V+(P<<23&4294967295|P>>>9),P=N+(V^(x|~L))+D[0]+4096336452&4294967295,N=x+(P<<6&4294967295|P>>>26),P=L+(x^(N|~V))+D[7]+1126891415&4294967295,L=N+(P<<10&4294967295|P>>>22),P=V+(N^(L|~x))+D[14]+2878612391&4294967295,V=L+(P<<15&4294967295|P>>>17),P=x+(L^(V|~N))+D[5]+4237533241&4294967295,x=V+(P<<21&4294967295|P>>>11),P=N+(V^(x|~L))+D[12]+1700485571&4294967295,N=x+(P<<6&4294967295|P>>>26),P=L+(x^(N|~V))+D[3]+2399980690&4294967295,L=N+(P<<10&4294967295|P>>>22),P=V+(N^(L|~x))+D[10]+4293915773&4294967295,V=L+(P<<15&4294967295|P>>>17),P=x+(L^(V|~N))+D[1]+2240044497&4294967295,x=V+(P<<21&4294967295|P>>>11),P=N+(V^(x|~L))+D[8]+1873313359&4294967295,N=x+(P<<6&4294967295|P>>>26),P=L+(x^(N|~V))+D[15]+4264355552&4294967295,L=N+(P<<10&4294967295|P>>>22),P=V+(N^(L|~x))+D[6]+2734768916&4294967295,V=L+(P<<15&4294967295|P>>>17),P=x+(L^(V|~N))+D[13]+1309151649&4294967295,x=V+(P<<21&4294967295|P>>>11),P=N+(V^(x|~L))+D[4]+4149444226&4294967295,N=x+(P<<6&4294967295|P>>>26),P=L+(x^(N|~V))+D[11]+3174756917&4294967295,L=N+(P<<10&4294967295|P>>>22),P=V+(N^(L|~x))+D[2]+718787259&4294967295,V=L+(P<<15&4294967295|P>>>17),P=x+(L^(V|~N))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+L&4294967295}i.prototype.u=function(M,N){N===void 0&&(N=M.length);for(var x=N-this.blockSize,D=this.B,V=this.h,L=0;L<N;){if(V==0)for(;L<=x;)o(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<N;)if(D[V++]=M.charCodeAt(L++),V==this.blockSize){o(this,D),V=0;break}}else for(;L<N;)if(D[V++]=M[L++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=N},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;var x=8*this.o;for(N=M.length-8;N<M.length;++N)M[N]=x&255,x/=256;for(this.u(M),M=Array(16),N=x=0;4>N;++N)for(var D=0;32>D;D+=8)M[x++]=this.g[N]>>>D&255;return M};function a(M,N){var x=d;return Object.prototype.hasOwnProperty.call(x,M)?x[M]:x[M]=N(M)}function u(M,N){this.h=N;for(var x=[],D=!0,V=M.length-1;0<=V;V--){var L=M[V]|0;D&&L==N||(x[V]=L,D=!1)}this.g=x}var d={};function p(M){return-128<=M&&128>M?a(M,function(N){return new u([N|0],0>N?-1:0)}):new u([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return T;if(0>M)return z(m(-M));for(var N=[],x=1,D=0;M>=x;D++)N[D]=M/x|0,x*=4294967296;return new u(N,0)}function v(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return z(v(M.substring(1),N));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(N,8)),D=T,V=0;V<M.length;V+=8){var L=Math.min(8,M.length-V),P=parseInt(M.substring(V,V+L),N);8>L?(L=m(Math.pow(N,L)),D=D.j(L).add(m(P))):(D=D.j(x),D=D.add(m(P)))}return D}var T=p(0),S=p(1),b=p(16777216);n=u.prototype,n.m=function(){if(F(this))return-z(this).m();for(var M=0,N=1,x=0;x<this.g.length;x++){var D=this.i(x);M+=(0<=D?D:4294967296+D)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(q(this))return"0";if(F(this))return"-"+z(this).toString(M);for(var N=m(Math.pow(M,6)),x=this,D="";;){var V=ie(x,N).g;x=te(x,V.j(N));var L=((0<x.g.length?x.g[0]:x.h)>>>0).toString(M);if(x=V,q(x))return L+D;for(;6>L.length;)L="0"+L;D=L+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function q(M){if(M.h!=0)return!1;for(var N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function F(M){return M.h==-1}n.l=function(M){return M=te(this,M),F(M)?-1:q(M)?0:1};function z(M){for(var N=M.g.length,x=[],D=0;D<N;D++)x[D]=~M.g[D];return new u(x,~M.h).add(S)}n.abs=function(){return F(this)?z(this):this},n.add=function(M){for(var N=Math.max(this.g.length,M.g.length),x=[],D=0,V=0;V<=N;V++){var L=D+(this.i(V)&65535)+(M.i(V)&65535),P=(L>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);D=P>>>16,L&=65535,P&=65535,x[V]=P<<16|L}return new u(x,x[x.length-1]&-2147483648?-1:0)};function te(M,N){return M.add(z(N))}n.j=function(M){if(q(this)||q(M))return T;if(F(this))return F(M)?z(this).j(z(M)):z(z(this).j(M));if(F(M))return z(this.j(z(M)));if(0>this.l(b)&&0>M.l(b))return m(this.m()*M.m());for(var N=this.g.length+M.g.length,x=[],D=0;D<2*N;D++)x[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<M.g.length;V++){var L=this.i(D)>>>16,P=this.i(D)&65535,rt=M.i(V)>>>16,ft=M.i(V)&65535;x[2*D+2*V]+=P*ft,K(x,2*D+2*V),x[2*D+2*V+1]+=L*ft,K(x,2*D+2*V+1),x[2*D+2*V+1]+=P*rt,K(x,2*D+2*V+1),x[2*D+2*V+2]+=L*rt,K(x,2*D+2*V+2)}for(D=0;D<N;D++)x[D]=x[2*D+1]<<16|x[2*D];for(D=N;D<2*N;D++)x[D]=0;return new u(x,0)};function K(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function Q(M,N){this.g=M,this.h=N}function ie(M,N){if(q(N))throw Error("division by zero");if(q(M))return new Q(T,T);if(F(M))return N=ie(z(M),N),new Q(z(N.g),z(N.h));if(F(N))return N=ie(M,z(N)),new Q(z(N.g),N.h);if(30<M.g.length){if(F(M)||F(N))throw Error("slowDivide_ only works with positive integers.");for(var x=S,D=N;0>=D.l(M);)x=le(x),D=le(D);var V=de(x,1),L=de(D,1);for(D=de(D,2),x=de(x,2);!q(D);){var P=L.add(D);0>=P.l(M)&&(V=V.add(x),L=P),D=de(D,1),x=de(x,1)}return N=te(M,V.j(N)),new Q(V,N)}for(V=T;0<=M.l(N);){for(x=Math.max(1,Math.floor(M.m()/N.m())),D=Math.ceil(Math.log(x)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),L=m(x),P=L.j(N);F(P)||0<P.l(M);)x-=D,L=m(x),P=L.j(N);q(L)&&(L=S),V=V.add(L),M=te(M,P)}return new Q(V,M)}n.A=function(M){return ie(this,M).h},n.and=function(M){for(var N=Math.max(this.g.length,M.g.length),x=[],D=0;D<N;D++)x[D]=this.i(D)&M.i(D);return new u(x,this.h&M.h)},n.or=function(M){for(var N=Math.max(this.g.length,M.g.length),x=[],D=0;D<N;D++)x[D]=this.i(D)|M.i(D);return new u(x,this.h|M.h)},n.xor=function(M){for(var N=Math.max(this.g.length,M.g.length),x=[],D=0;D<N;D++)x[D]=this.i(D)^M.i(D);return new u(x,this.h^M.h)};function le(M){for(var N=M.g.length+1,x=[],D=0;D<N;D++)x[D]=M.i(D)<<1|M.i(D-1)>>>31;return new u(x,M.h)}function de(M,N){var x=N>>5;N%=32;for(var D=M.g.length-x,V=[],L=0;L<D;L++)V[L]=0<N?M.i(L+x)>>>N|M.i(L+x+1)<<32-N:M.i(L+x);return new u(V,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,JA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,_r=u}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YA,Jl,KA,md,sm,$A,QA,XA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,E,C){return h==Array.prototype||h==Object.prototype||(h[E]=C.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var E=0;E<h.length;++E){var C=h[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(h,E){if(E)e:{var C=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var G=h[w];if(!(G in C))break e;C=C[G]}h=h[h.length-1],w=C[h],E=E(w),E!=w&&E!=null&&e(C,h,{configurable:!0,writable:!0,value:E})}}function a(h,E){h instanceof String&&(h+="");var C=0,w=!1,G={next:function(){if(!w&&C<h.length){var W=C++;return{value:E(W,h[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(h){return h||function(){return a(this,function(E,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(h){var E=typeof h;return E=E!="object"?E:h?Array.isArray(h)?"array":E:"null",E=="array"||E=="object"&&typeof h.length=="number"}function m(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function v(h,E,C){return h.call.apply(h.bind,arguments)}function T(h,E,C){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,w),h.apply(E,G)}}return function(){return h.apply(E,arguments)}}function S(h,E,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,S.apply(null,arguments)}function b(h,E){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function q(h,E){function C(){}C.prototype=E.prototype,h.aa=E.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(w,G,W){for(var ce=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)ce[Ze-2]=arguments[Ze];return E.prototype[G].apply(w,ce)}}function F(h){const E=h.length;if(0<E){const C=Array(E);for(let w=0;w<E;w++)C[w]=h[w];return C}return[]}function z(h,E){for(let C=1;C<arguments.length;C++){const w=arguments[C];if(p(w)){const G=h.length||0,W=w.length||0;h.length=G+W;for(let ce=0;ce<W;ce++)h[G+ce]=w[ce]}else h.push(w)}}class te{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function K(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var le=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function de(h,E,C){for(const w in h)E.call(C,h[w],w,h)}function M(h,E){for(const C in h)E.call(void 0,h[C],C,h)}function N(h){const E={};for(const C in h)E[C]=h[C];return E}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,E){let C,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(C in w)h[C]=w[C];for(let W=0;W<x.length;W++)C=x[W],Object.prototype.hasOwnProperty.call(w,C)&&(h[C]=w[C])}}function V(h){var E=1;h=h.split(":");const C=[];for(;0<E&&h.length;)C.push(h.shift()),E--;return h.length&&C.push(h.join(":")),C}function L(h){d.setTimeout(()=>{throw h},0)}function P(){var h=Ge;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class rt{constructor(){this.h=this.g=null}add(E,C){const w=ft.get();w.set(E,C),this.h?this.h.next=w:this.g=w,this.h=w}}var ft=new te(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,_e=!1,Ge=new rt,Ye=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(O)}};var O=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(C){L(C)}var E=ft;E.j(h),100>E.h&&(E.h++,h.next=E.g,E.g=h)}_e=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};d.addEventListener("test",C,E),d.removeEventListener("test",C,E)}catch{}return h})();function Ae(h,E){if(oe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget){if(le){e:{try{ie(E.nodeName);var G=!0;break e}catch{}G=!1}G||(E=null)}}else C=="mouseover"?E=h.fromElement:C=="mouseout"&&(E=h.toElement);this.relatedTarget=E,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ue[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ae.aa.h.call(this)}}q(Ae,oe);var ue={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),ke=0;function De(h,E,C,w,G){this.listener=h,this.proxy=null,this.src=E,this.type=C,this.capture=!!w,this.ha=G,this.key=++ke,this.da=this.fa=!1}function St(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ii(h){this.src=h,this.g={},this.h=0}ii.prototype.add=function(h,E,C,w,G){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var ce=kt(h,E,w,G);return-1<ce?(E=h[ce],C||(E.fa=!1)):(E=new De(E,this.src,W,!!w,G),E.fa=C,h.push(E)),E};function si(h,E){var C=E.type;if(C in h.g){var w=h.g[C],G=Array.prototype.indexOf.call(w,E,void 0),W;(W=0<=G)&&Array.prototype.splice.call(w,G,1),W&&(St(E),h.g[C].length==0&&(delete h.g[C],h.h--))}}function kt(h,E,C,w){for(var G=0;G<h.length;++G){var W=h[G];if(!W.da&&W.listener==E&&W.capture==!!C&&W.ha==w)return G}return-1}var sn="closure_lm_"+(1e6*Math.random()|0),Nn={};function xn(h,E,C,w,G){if(Array.isArray(E)){for(var W=0;W<E.length;W++)xn(h,E[W],C,w,G);return null}return C=bu(C),h&&h[ye]?h.K(E,C,m(w)?!!w.capture:!1,G):yf(h,E,C,!1,w,G)}function yf(h,E,C,w,G,W){if(!E)throw Error("Invalid event type");var ce=m(G)?!!G.capture:!!G,Ze=Oa(h);if(Ze||(h[sn]=Ze=new ii(h)),C=Ze.add(E,C,w,ce,W),C.proxy)return C;if(w=wu(),C.proxy=w,w.src=h,w.listener=C,h.addEventListener)pe||(G=ce),G===void 0&&(G=!1),h.addEventListener(E.toString(),w,G);else if(h.attachEvent)h.attachEvent(wo(E.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function wu(){function h(C){return E.call(h.src,h.listener,C)}const E=_f;return h}function Ro(h,E,C,w,G){if(Array.isArray(E))for(var W=0;W<E.length;W++)Ro(h,E[W],C,w,G);else w=m(w)?!!w.capture:!!w,C=bu(C),h&&h[ye]?(h=h.i,E=String(E).toString(),E in h.g&&(W=h.g[E],C=kt(W,C,w,G),-1<C&&(St(W[C]),Array.prototype.splice.call(W,C,1),W.length==0&&(delete h.g[E],h.h--)))):h&&(h=Oa(h))&&(E=h.g[E.toString()],h=-1,E&&(h=kt(E,C,w,G)),(C=-1<h?E[h]:null)&&Pr(C))}function Pr(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[ye])si(E.i,h);else{var C=h.type,w=h.proxy;E.removeEventListener?E.removeEventListener(C,w,h.capture):E.detachEvent?E.detachEvent(wo(C),w):E.addListener&&E.removeListener&&E.removeListener(w),(C=Oa(E))?(si(C,h),C.h==0&&(C.src=null,E[sn]=null)):St(h)}}}function wo(h){return h in Nn?Nn[h]:Nn[h]="on"+h}function _f(h,E){if(h.da)h=!0;else{E=new Ae(E,this);var C=h.listener,w=h.ha||h.src;h.fa&&Pr(h),h=C.call(w,E)}return h}function Oa(h){return h=h[sn],h instanceof ii?h:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bu(h){return typeof h=="function"?h:(h[Yt]||(h[Yt]=function(E){return h.handleEvent(E)}),h[Yt])}function Vt(){j.call(this),this.i=new ii(this),this.M=this,this.F=null}q(Vt,j),Vt.prototype[ye]=!0,Vt.prototype.removeEventListener=function(h,E,C,w){Ro(this,h,E,C,w)};function qt(h,E){var C,w=h.F;if(w)for(C=[];w;w=w.F)C.push(w);if(h=h.M,w=E.type||E,typeof E=="string")E=new oe(E,h);else if(E instanceof oe)E.target=E.target||h;else{var G=E;E=new oe(w,h),D(E,G)}if(G=!0,C)for(var W=C.length-1;0<=W;W--){var ce=E.g=C[W];G=Oi(ce,w,!0,E)&&G}if(ce=E.g=h,G=Oi(ce,w,!0,E)&&G,G=Oi(ce,w,!1,E)&&G,C)for(W=0;W<C.length;W++)ce=E.g=C[W],G=Oi(ce,w,!1,E)&&G}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var h=this.i,E;for(E in h.g){for(var C=h.g[E],w=0;w<C.length;w++)St(C[w]);delete h.g[E],h.h--}}this.F=null},Vt.prototype.K=function(h,E,C,w){return this.i.add(String(h),E,!1,C,w)},Vt.prototype.L=function(h,E,C,w){return this.i.add(String(h),E,!0,C,w)};function Oi(h,E,C,w){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();for(var G=!0,W=0;W<E.length;++W){var ce=E[W];if(ce&&!ce.da&&ce.capture==C){var Ze=ce.listener,wt=ce.ha||ce.src;ce.fa&&si(h.i,ce),G=Ze.call(wt,w)!==!1&&G}}return G&&!w.defaultPrevented}function Nu(h,E,C){if(typeof h=="function")C&&(h=S(h,C));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:d.setTimeout(h,E||0)}function qa(h){h.g=Nu(()=>{h.g=null,h.i&&(h.i=!1,qa(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class vf extends j{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:qa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(h){j.call(this),this.h=h,this.g={}}q(kr,j);var Ss=[];function rn(h){de(h.g,function(E,C){this.g.hasOwnProperty(C)&&Pr(E)},h),h.g={}}kr.prototype.N=function(){kr.aa.N.call(this),rn(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=d.JSON.stringify,hn=d.JSON.parse,Tf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Fa(){}Fa.prototype.h=null;function xu(h){return h.h||(h.h=h.i())}function Vr(){}var gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function As(){oe.call(this,"d")}q(As,oe);function ri(){oe.call(this,"c")}q(ri,oe);var Hn={},Cs=null;function bo(){return Cs=Cs||new Vt}Hn.La="serverreachability";function Ba(h){oe.call(this,Hn.La,h)}q(Ba,oe);function qi(h){const E=bo();qt(E,new Ba(E))}Hn.STAT_EVENT="statevent";function Is(h,E){oe.call(this,Hn.STAT_EVENT,h),this.stat=E}q(Is,oe);function Kt(h){const E=bo();qt(E,new Is(E,h))}Hn.Ma="timingevent";function Ha(h,E){oe.call(this,Hn.Ma,h),this.size=E}q(Ha,oe);function Rs(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},E)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function Ga(h,E,C,w,G,W){h.info(function(){if(h.g)if(W)for(var ce="",Ze=W.split("&"),wt=0;wt<Ze.length;wt++){var Ve=Ze[wt].split("=");if(1<Ve.length){var Bt=Ve[0];Ve=Ve[1];var Ht=Bt.split("_");ce=2<=Ht.length&&Ht[1]=="type"?ce+(Bt+"="+Ve+"&"):ce+(Bt+"=redacted&")}}else ce=null;else ce=W;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+E+`
`+C+`
`+ce})}function za(h,E,C,w,G,W,ce){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+E+`
`+C+`
`+W+" "+ce})}function Fi(h,E,C,w){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+yi(h,C)+(w?" "+w:"")})}function Mu(h,E){h.info(function(){return"TIMEOUT: "+E})}ws.prototype.info=function(){};function yi(h,E){if(!h.g)return E;if(!E)return null;try{var C=JSON.parse(E);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var w=C[h];if(!(2>w.length)){var G=w[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ce=1;ce<G.length;ce++)G[ce]=""}}}}return Bn(C)}catch{return E}}var gt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_i;function bs(){}q(bs,Fa),bs.prototype.g=function(){return new XMLHttpRequest},bs.prototype.i=function(){return{}},_i=new bs;function vi(h,E,C,w){this.j=h,this.i=E,this.l=C,this.R=w||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Du}function Du(){this.i=null,this.g="",this.h=!1}var Ja={},Bi={};function Ur(h,E,C){h.L=1,h.v=qr(yt(E)),h.m=C,h.P=!0,Hi(h,null)}function Hi(h,E){h.F=Date.now(),oi(h),h.A=yt(h.v);var C=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Ji(C.i,"t",w),h.C=0,C=h.j.J,h.h=new Du,h.g=$u(h.j,C?E:null,!h.m),0<h.O&&(h.M=new vf(S(h.Y,h,h.g),h.O)),E=h.U,C=h.g,w=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(Ss[0]=G.toString()),G=Ss);for(var W=0;W<G.length;W++){var ce=xn(C,G[W],w||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=h.H?N(h.H):{},h.m?(h.u||(h.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,E)):(h.u="GET",h.g.ea(h.A,h.u,null,E)),qi(),Ga(h.i,h.u,h.A,h.l,h.R,h.m)}vi.prototype.ca=function(h){h=h.target;const E=this.M;E&&gn(h)==3?E.j():this.Y(h)},vi.prototype.Y=function(h){try{if(h==this.g)e:{const Ht=gn(this.g);var E=this.g.Ba();const Bs=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Hr(this.g)))){this.J||Ht!=4||E==7||(E==8||0>=Bs?qi(3):qi(2)),No(this);var C=this.g.Z();this.X=C;t:if(Gi(this)){var w=Hr(this.g);h="";var G=w.length,W=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),Ns(this);var ce="";break t}this.h.i=new d.TextDecoder}for(E=0;E<G;E++)this.h.h=!0,h+=this.h.i.decode(w[E],{stream:!(W&&E==G-1)});w.length=0,this.h.g+=h,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=C==200,za(this.i,this.u,this.A,this.l,this.R,Ht,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,wt=this.g;if((Ze=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Ze)){var Ve=Ze;break t}}Ve=null}if(C=Ve)Fi(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ti(this,C);else{this.o=!1,this.s=3,Kt(12),pn(this),Ns(this);break e}}if(this.P){C=!0;let En;for(;!this.J&&this.C<ce.length;)if(En=Lr(this,ce),En==Bi){Ht==4&&(this.s=4,Kt(14),C=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Ja){this.s=4,Kt(15),Fi(this.i,this.l,ce,"[Invalid Chunk]"),C=!1;break}else Fi(this.i,this.l,En,null),Ti(this,En);if(Gi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ce.length!=0||this.h.h||(this.s=1,Kt(16),C=!1),this.o=this.o&&C,!C)Fi(this.i,this.l,ce,"[Invalid Chunked Response]"),pn(this),Ns(this);else if(0<ce.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),nl(Bt),Bt.M=!0,Kt(11))}}else Fi(this.i,this.l,ce,null),Ti(this,ce);Ht==4&&pn(this),this.o&&!this.J&&(Ht==4?Ju(this.j,this):(this.o=!1,oi(this)))}else qu(this.g),C==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),pn(this),Ns(this)}}}catch{}finally{}};function Gi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Lr(h,E){var C=h.C,w=E.indexOf(`
`,C);return w==-1?Bi:(C=Number(E.substring(C,w)),isNaN(C)?Ja:(w+=1,w+C>E.length?Bi:(E=E.slice(w,w+C),h.C=w+C,E)))}vi.prototype.cancel=function(){this.J=!0,pn(this)};function oi(h){h.S=Date.now()+h.I,At(h,h.I)}function At(h,E){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rs(S(h.ba,h),E)}function No(h){h.B&&(d.clearTimeout(h.B),h.B=null)}vi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Mu(this.i,this.A),this.L!=2&&(qi(),Kt(17)),pn(this),this.s=2,Ns(this)):At(this,this.S-h)};function Ns(h){h.j.G==0||h.J||Ju(h.j,h)}function pn(h){No(h);var E=h.M;E&&typeof E.ma=="function"&&E.ma(),h.M=null,rn(h.U),h.g&&(E=h.g,h.g=null,E.abort(),E.ma())}function Ti(h,E){try{var C=h.j;if(C.G!=0&&(C.g==h||xs(C.h,h))){if(!h.K&&xs(C.h,h)&&C.G==3){try{var w=C.Da.g.parse(E)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)qs(C),Os(C);else break e;tl(C),Kt(18)}}else C.za=G[1],0<C.za-C.T&&37500>G[2]&&C.F&&C.v==0&&!C.C&&(C.C=Rs(S(C.Za,C),6e3));if(1>=Pu(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ki(C,11)}else if((h.K||C.g==h)&&qs(C),!K(E))for(G=C.Da.g.parse(E),E=0;E<G.length;E++){let Ve=G[E];if(C.T=Ve[0],Ve=Ve[1],C.G==2)if(Ve[0]=="c"){C.K=Ve[1],C.ia=Ve[2];const Bt=Ve[3];Bt!=null&&(C.la=Bt,C.j.info("VER="+C.la));const Ht=Ve[4];Ht!=null&&(C.Aa=Ht,C.j.info("SVER="+C.Aa));const Bs=Ve[5];Bs!=null&&typeof Bs=="number"&&0<Bs&&(w=1.5*Bs,C.L=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const En=h.g;if(En){const Jr=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var W=w.h;W.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ms(W,W.h),W.h=null))}if(w.D){const $i=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;$i&&(w.ya=$i,Ke(w.I,w.D,$i))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),w=C;var ce=h;if(w.qa=Ku(w,w.J?w.ia:null,w.W),ce.K){Gn(w.h,ce);var Ze=ce,wt=w.L;wt&&(Ze.I=wt),Ze.B&&(No(Ze),oi(Ze)),w.g=ce}else Gu(w);0<C.i.length&&Lo(C)}else Ve[0]!="stop"&&Ve[0]!="close"||Ki(C,7);else C.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Ki(C,7):ja(C):Ve[0]!="noop"&&C.l&&C.l.ta(Ve),C.v=0)}}qi(4)}catch{}}var Ef=class{constructor(h,E){this.g=h,this.map=E}};function Ya(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ka(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pu(h){return h.h?1:h.g?h.g.size:0}function xs(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function Ms(h,E){h.g?h.g.add(E):h.h=E}function Gn(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}Ya.prototype.cancel=function(){if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function mn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const C of h.g.values())E=E.concat(C.D);return E}return F(h.i)}function ku(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var E=[],C=h.length,w=0;w<C;w++)E.push(h[w]);return E}E=[],C=0;for(w in h)E[C++]=h[w];return E}function Sf(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var E=[];h=h.length;for(var C=0;C<h;C++)E.push(C);return E}E=[],C=0;for(const w in h)E[C++]=w;return E}}}function xo(h,E){if(h.forEach&&typeof h.forEach=="function")h.forEach(E,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,E,void 0);else for(var C=Sf(h),w=ku(h),G=w.length,W=0;W<G;W++)E.call(void 0,w[W],C&&C[W],h)}var $a=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mo(h,E){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var w=h[C].indexOf("="),G=null;if(0<=w){var W=h[C].substring(0,w);G=h[C].substring(w+1)}else W=h[C];E(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function zi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof zi){this.h=h.h,Ds(this,h.j),this.o=h.o,this.g=h.g,Or(this,h.s),this.l=h.l;var E=h.i,C=new Ei;C.i=E.i,E.g&&(C.g=new Map(E.g),C.h=E.h),Do(this,C),this.m=h.m}else h&&(E=String(h).match($a))?(this.h=!1,Ds(this,E[1]||"",!0),this.o=Ps(E[2]||""),this.g=Ps(E[3]||"",!0),Or(this,E[4]),this.l=Ps(E[5]||"",!0),Do(this,E[6]||"",!0),this.m=Ps(E[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}zi.prototype.toString=function(){var h=[],E=this.j;E&&h.push(zn(E,Qa,!0),":");var C=this.g;return(C||E=="file")&&(h.push("//"),(E=this.o)&&h.push(zn(E,Qa,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(zn(C,C.charAt(0)=="/"?Xa:Vu,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",zn(C,If)),h.join("")};function yt(h){return new zi(h)}function Ds(h,E,C){h.j=C?Ps(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function Or(h,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);h.s=E}else h.s=null}function Do(h,E,C){E instanceof Ei?(h.i=E,Uu(h.i,h.h)):(C||(E=zn(E,Cf)),h.i=new Ei(E,h.h))}function Ke(h,E,C){h.i.set(E,C)}function qr(h){return Ke(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ps(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function zn(h,E,C){return typeof h=="string"?(h=encodeURI(h).replace(E,Af),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Af(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Qa=/[#\/\?@]/g,Vu=/[#\?:]/g,Xa=/[#\?]/g,Cf=/[#\?@]/g,If=/#/g;function Ei(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function Ft(h){h.g||(h.g=new Map,h.h=0,h.i&&Mo(h.i,function(E,C){h.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=Ei.prototype,n.add=function(h,E){Ft(this),this.i=null,h=Mn(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(E),this.h+=1,this};function Po(h,E){Ft(h),E=Mn(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function ko(h,E){return Ft(h),E=Mn(h,E),h.g.has(E)}n.forEach=function(h,E){Ft(this),this.g.forEach(function(C,w){C.forEach(function(G){h.call(E,G,w,this)},this)},this)},n.na=function(){Ft(this);const h=Array.from(this.g.values()),E=Array.from(this.g.keys()),C=[];for(let w=0;w<E.length;w++){const G=h[w];for(let W=0;W<G.length;W++)C.push(E[w])}return C},n.V=function(h){Ft(this);let E=[];if(typeof h=="string")ko(this,h)&&(E=E.concat(this.g.get(Mn(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)E=E.concat(h[C])}return E},n.set=function(h,E){return Ft(this),this.i=null,h=Mn(this,h),ko(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=this.V(h),0<h.length?String(h[0]):E):E};function Ji(h,E,C){Po(h,E),0<C.length&&(h.i=null,h.g.set(Mn(h,E),F(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(var C=0;C<E.length;C++){var w=E[C];const W=encodeURIComponent(String(w)),ce=this.V(w);for(w=0;w<ce.length;w++){var G=W;ce[w]!==""&&(G+="="+encodeURIComponent(String(ce[w]))),h.push(G)}}return this.i=h.join("&")};function Mn(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function Uu(h,E){E&&!h.j&&(Ft(h),h.i=null,h.g.forEach(function(C,w){var G=w.toLowerCase();w!=G&&(Po(this,w),Ji(this,G,C))},h)),h.j=E}function Wa(h,E){const C=new ws;if(d.Image){const w=new Image;w.onload=b(Tn,C,"TestLoadImage: loaded",!0,E,w),w.onerror=b(Tn,C,"TestLoadImage: error",!1,E,w),w.onabort=b(Tn,C,"TestLoadImage: abort",!1,E,w),w.ontimeout=b(Tn,C,"TestLoadImage: timeout",!1,E,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else E(!1)}function Lu(h,E){const C=new ws,w=new AbortController,G=setTimeout(()=>{w.abort(),Tn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:w.signal}).then(W=>{clearTimeout(G),W.ok?Tn(C,"TestPingServer: ok",!0,E):Tn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(G),Tn(C,"TestPingServer: error",!1,E)})}function Tn(h,E,C,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(C)}catch{}}function ai(){this.g=new Tf}function Za(h,E,C){const w=C||"";try{xo(h,function(G,W){let ce=G;m(G)&&(ce=Bn(G)),E.push(w+W+"="+encodeURIComponent(ce))})}catch(G){throw E.push(w+"type="+encodeURIComponent("_badmap")),G}}function Si(h){this.l=h.Ub||null,this.j=h.eb||!1}q(Si,Fa),Si.prototype.g=function(){return new Dn(this.l,this.j)},Si.prototype.i=(function(h){return function(){return h}})({});function Dn(h,E){Vt.call(this),this.D=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Dn,Vt),n=Dn.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=E,this.readyState=1,ks(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(E.body=h),(this.D||d).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Ai(this):ks(this),this.readyState==3&&Vo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ai(this))},n.Qa=function(h){this.g&&(this.response=h,Ai(this))},n.ga=function(){this.g&&Ai(this)};function Ai(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ks(h)}n.setRequestHeader=function(h,E){this.u.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=E.next();return h.join(`\r
`)};function ks(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fr(h){let E="";return de(h,function(C,w){E+=w,E+=":",E+=C,E+=`\r
`}),E}function Vs(h,E,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Fr(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):Ke(h,E,C))}function at(h){Vt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(at,Vt);var on=/^https?$/i,Yi=["POST","PUT"];n=at.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,E,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_i.g(),this.v=this.o?xu(this.o):xu(_i),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(W){Br(this,W);return}if(h=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)C.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())C.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(W=>W.toLowerCase()=="content-type"),G=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Yi,E,void 0))||w||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ce]of C)this.g.setRequestHeader(W,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Uo(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){Br(this,W)}};function Br(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.m=5,Us(h),Ls(h)}function Us(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,qt(this,"complete"),qt(this,"abort"),Ls(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ou(this):this.bb())},n.bb=function(){Ou(this)};function Ou(h){if(h.h&&typeof u<"u"&&(!h.v[1]||gn(h)!=4||h.Z()!=2)){if(h.u&&gn(h)==4)Nu(h.Ea,0,h);else if(qt(h,"readystatechange"),gn(h)==4){h.h=!1;try{const ce=h.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var w;if(w=ce===0){var G=String(h.D).match($a)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),w=!on.test(G?G.toLowerCase():"")}C=w}if(C)qt(h,"complete"),qt(h,"success");else{h.m=6;try{var W=2<gn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",Us(h)}}finally{Ls(h)}}}}function Ls(h,E){if(h.g){Uo(h);const C=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,E||qt(h,"ready");try{C.onreadystatechange=w}catch{}}}function Uo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function gn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),hn(E)}};function Hr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function qu(h){const E={};h=(h.g&&2<=gn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(K(h[w]))continue;var C=V(h[w]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const W=E[G]||[];E[G]=W,W.push(C)}M(E,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(h,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||E}function Fu(h){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,h),this.cb=Gr("retryDelaySeedMs",1e4,h),this.Wa=Gr("forwardChannelMaxRetries",2,h),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ya(h&&h.concurrentRequestLimit),this.Da=new ai,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fu.prototype,n.la=8,n.G=1,n.connect=function(h,E,C,w){Kt(0),this.W=h,this.H=E||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.I=Ku(this,null,this.W),Lo(this)};function ja(h){if(Bu(h),h.G==3){var E=h.U++,C=yt(h.I);if(Ke(C,"SID",h.K),Ke(C,"RID",E),Ke(C,"TYPE","terminate"),zr(h,C),E=new vi(h,h.j,E),E.L=2,E.v=qr(yt(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(E.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=E.v,C=!0),C||(E.g=$u(E.j,null),E.g.ea(E.v)),E.F=Date.now(),oi(E)}il(h)}function Os(h){h.g&&(nl(h),h.g.cancel(),h.g=null)}function Bu(h){Os(h),h.u&&(d.clearTimeout(h.u),h.u=null),qs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Lo(h){if(!Ka(h.h)&&!h.s){h.s=!0;var E=h.Ga;ae||Ye(),_e||(ae(),_e=!0),Ge.add(E,h),h.B=0}}function Rf(h,E){return Pu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=E.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rs(S(h.Ga,h,E),Yu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new vi(this,this.j,h);let W=this.o;if(this.S&&(W?(W=N(W),D(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(E+=w,4096<E){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=el(this,G,E),C=yt(this.I),Ke(C,"RID",h),Ke(C,"CVER",22),this.D&&Ke(C,"X-HTTP-Session-Id",this.D),zr(this,C),W&&(this.O?E="headers="+encodeURIComponent(String(Fr(W)))+"&"+E:this.m&&Vs(C,this.m,W)),Ms(this.h,G),this.Ua&&Ke(C,"TYPE","init"),this.P?(Ke(C,"$req",E),Ke(C,"SID","null"),G.T=!0,Ur(G,C,null)):Ur(G,C,E),this.G=2}}else this.G==3&&(h?Hu(this,h):this.i.length==0||Ka(this.h)||Hu(this))};function Hu(h,E){var C;E?C=E.l:C=h.U++;const w=yt(h.I);Ke(w,"SID",h.K),Ke(w,"RID",C),Ke(w,"AID",h.T),zr(h,w),h.m&&h.o&&Vs(w,h.m,h.o),C=new vi(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),E&&(h.i=E.D.concat(h.i)),E=el(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ms(h.h,C),Ur(C,w,E)}function zr(h,E){h.H&&de(h.H,function(C,w){Ke(E,w,C)}),h.l&&xo({},function(C,w){Ke(E,w,C)})}function el(h,E,C){C=Math.min(h.i.length,C);var w=h.l?S(h.l.Na,h.l,h):null;e:{var G=h.i;let W=-1;for(;;){const ce=["count="+C];W==-1?0<C?(W=G[0].g,ce.push("ofs="+W)):W=0:ce.push("ofs="+W);let Ze=!0;for(let wt=0;wt<C;wt++){let Ve=G[wt].g;const Bt=G[wt].map;if(Ve-=W,0>Ve)W=Math.max(0,G[wt].g-100),Ze=!1;else try{Za(Bt,ce,"req"+Ve+"_")}catch{w&&w(Bt)}}if(Ze){w=ce.join("&");break e}}}return h=h.i.splice(0,C),E.D=h,w}function Gu(h){if(!h.g&&!h.u){h.Y=1;var E=h.Fa;ae||Ye(),_e||(ae(),_e=!0),Ge.add(E,h),h.v=0}}function tl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rs(S(h.Fa,h),Yu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rs(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),Os(this),zu(this))};function nl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function zu(h){h.g=new vi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var E=yt(h.qa);Ke(E,"RID","rpc"),Ke(E,"SID",h.K),Ke(E,"AID",h.T),Ke(E,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ke(E,"TO",h.ja),Ke(E,"TYPE","xmlhttp"),zr(h,E),h.m&&h.o&&Vs(E,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=qr(yt(E)),C.m=null,C.P=!0,Hi(C,h)}n.Za=function(){this.C!=null&&(this.C=null,Os(this),tl(this),Kt(19))};function qs(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Ju(h,E){var C=null;if(h.g==E){qs(h),nl(h),h.g=null;var w=2}else if(xs(h.h,E))C=E.D,Gn(h.h,E),w=1;else return;if(h.G!=0){if(E.o)if(w==1){C=E.m?E.m.length:0,E=Date.now()-E.F;var G=h.B;w=bo(),qt(w,new Ha(w,C)),Lo(h)}else Gu(h);else if(G=E.s,G==3||G==0&&0<E.X||!(w==1&&Rf(h,E)||w==2&&tl(h)))switch(C&&0<C.length&&(E=h.h,E.i=E.i.concat(C)),G){case 1:Ki(h,5);break;case 4:Ki(h,10);break;case 3:Ki(h,6);break;default:Ki(h,2)}}}function Yu(h,E){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*E}function Ki(h,E){if(h.j.info("Error code "+E),E==2){var C=S(h.fb,h),w=h.Xa;const G=!w;w=new zi(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ds(w,"https"),qr(w),G?Wa(w.toString(),C):Lu(w.toString(),C)}else Kt(2);h.G=0,h.l&&h.l.sa(E),il(h),Bu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function il(h){if(h.G=0,h.ka=[],h.l){const E=mn(h.h);(E.length!=0||h.i.length!=0)&&(z(h.ka,E),z(h.ka,h.i),h.h.i.length=0,F(h.i),h.i.length=0),h.l.ra()}}function Ku(h,E,C){var w=C instanceof zi?yt(C):new zi(C);if(w.g!="")E&&(w.g=E+"."+w.g),Or(w,w.s);else{var G=d.location;w=G.protocol,E=E?E+"."+G.hostname:G.hostname,G=+G.port;var W=new zi(null);w&&Ds(W,w),E&&(W.g=E),G&&Or(W,G),C&&(W.l=C),w=W}return C=h.D,E=h.ya,C&&E&&Ke(w,C,E),Ke(w,"VER",h.la),zr(h,w),w}function $u(h,E,C){if(E&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Ca&&!h.pa?new at(new Si({eb:C})):new at(h.pa),E.Ha(h.J),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qu(){}n=Qu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Oo(){}Oo.prototype.g=function(h,E){return new yn(h,E)};function yn(h,E){Vt.call(this),this.g=new Fu(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(h?h["X-WebChannel-Client-Profile"]=E.va:h={"X-WebChannel-Client-Profile":E.va}),this.g.S=h,(h=E&&E.Sb)&&!K(h)&&(this.g.m=h),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!K(E)&&(this.g.D=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new Fs(this)}q(yn,Vt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){ja(this.g)},yn.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Bn(h),h=C);E.i.push(new Ef(E.Ya++,h)),E.G==3&&Lo(E)},yn.prototype.N=function(){this.g.l=null,delete this.j,ja(this.g),delete this.g,yn.aa.N.call(this)};function Xu(h){As.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const C in E){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}q(Xu,As);function Wu(){ri.call(this),this.status=1}q(Wu,ri);function Fs(h){this.g=h}q(Fs,Qu),Fs.prototype.ua=function(){qt(this.g,"a")},Fs.prototype.ta=function(h){qt(this.g,new Xu(h))},Fs.prototype.sa=function(h){qt(this.g,new Wu)},Fs.prototype.ra=function(){qt(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,XA=function(){return new Oo},QA=function(){return bo()},$A=Hn,sm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,md=gt,$t.COMPLETE="complete",KA=$t,Vr.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Jl=Vr,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,YA=at}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});const u0="@firebase/firestore",c0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new Mm("@firebase/firestore");function ha(){return _o.logLevel}function he(n,...e){if(_o.logLevel<=Be.DEBUG){const t=e.map(Xm);_o.debug(`Firestore (${ka}): ${n}`,...t)}}function _s(n,...e){if(_o.logLevel<=Be.ERROR){const t=e.map(Xm);_o.error(`Firestore (${ka}): ${n}`,...t)}}function Er(n,...e){if(_o.logLevel<=Be.WARN){const t=e.map(Xm);_o.warn(`Firestore (${ka}): ${n}`,...t)}}function Xm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,WA(n,i,t)}function WA(n,e,t){let i=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw _s(i),new Error(i)}function je(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||WA(e,o,i)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class YU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KU{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new ZA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class $U{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QU{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new $U(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class d0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XU{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new d0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new d0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=WU(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Ue(n,e){return n<e?-1:n>e?1:0}function rm(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ue(i,o);{const a=jA(),u=ZU(a.encode(f0(n,t)),a.encode(f0(e,t)));return u!==0?u:Ue(i,o)}}t+=i>65535?2:1}return Ue(n.length,e.length)}function f0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function ZU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ue(n[t],e[t]);return Ue(n.length,e.length)}function Ia(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__name__";class bi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Re(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=bi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Ue(e.length,t.length)}static compareSegments(e,t){const i=bi.isNumericId(e),o=bi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?bi.extractNumericId(e).compare(bi.extractNumericId(t)):rm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _r.fromString(e.substring(4,e.length-2))}}class pt extends bi{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const jU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends bi{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return jU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h0}static keyField(){return new en([h0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ve(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ve(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ve(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ve(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(pt.fromString(e))}static fromName(e){return new Ee(pt.fromString(e).popFirst(5))}static empty(){return new Ee(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(n,e,t){if(!t)throw new ve(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tL(n,e,t,i){if(e===!0&&i===!0)throw new ve(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function p0(n){if(!Ee.isDocumentKey(n))throw new ve(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function lu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zm(n);throw new ve(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Su(n,e){if(!eC(n))throw new ve(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ve(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=-62135596800,g0=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*g0);return new dt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<m0)throw new ve(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Pt("string",dt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new dt(0,0))}static max(){return new we(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=-1;function nL(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=we.fromTimestamp(i===1e9?new dt(t+1,0):new dt(t,i));return new Sr(o,Ee.empty(),e)}function iL(n){return new Sr(n.readTime,n.key,uu)}class Sr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Sr(we.min(),Ee.empty(),uu)}static max(){return new Sr(we.max(),Ee.empty(),uu)}}function sL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==rL)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function aL(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ua(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}nf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-1;function sf(n){return n==null}function kd(n){return n===0&&1/n==-1/0}function lL(n){return typeof n=="number"&&Number.isInteger(n)&&!kd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="";function uL(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y0(e)),e=cL(n.get(t),e);return y0(e)}function cL(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case tC:t+="";break;default:t+=a}}return t}function y0(n){return n+tC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??jt.RED,this.left=o??jt.EMPTY,this.right=a??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new jt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new v0(this.data.getIterator())}getIteratorFrom(e){return new v0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class v0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new hi([])}unionWith(e){let t=new Ot(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new iC("Invalid base64 string: "+a):a}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const dL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=dL.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="server_timestamp",rC="__type__",oC="__previous_value__",aC="__local_write_time__";function eg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rC])===null||t===void 0?void 0:t.stringValue)===sC}function rf(n){const e=n.mapValue.fields[oC];return eg(e)?rf(e):e}function cu(n){const e=Ar(n.mapValue.fields[aC].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,t,i,o,a,u,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Vd="(default)";class du{constructor(e,t){this.projectId=e,this.database=t||Vd}static empty(){return new du("","")}get isDefaultDatabase(){return this.database===Vd}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__type__",hL="__max__",od={mapValue:{}},uC="__vector__",Ud="value";function Ir(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eg(n)?4:mL(n)?9007199254740991:pL(n)?10:11:Re(28295,{value:n})}function Vi(n,e){if(n===e)return!0;const t=Ir(n);if(t!==Ir(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cu(n).isEqual(cu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Ar(o.timestampValue),d=Ar(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Cr(o.bytesValue).isEqual(Cr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Rt(o.geoPointValue.latitude)===Rt(a.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Rt(o.integerValue)===Rt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Rt(o.doubleValue),d=Rt(a.doubleValue);return u===d?kd(u)===kd(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ia(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(_0(u)!==_0(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Vi(u[p],d[p])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function fu(n,e){return(n.values||[]).find((t=>Vi(t,e)))!==void 0}function Ra(n,e){if(n===e)return 0;const t=Ir(n),i=Ir(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Rt(a.integerValue||a.doubleValue),p=Rt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return T0(n.timestampValue,e.timestampValue);case 4:return T0(cu(n),cu(e));case 5:return rm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Cr(a),p=Cr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Ue(d[m],p[m]);if(v!==0)return v}return Ue(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ue(Rt(a.latitude),Rt(u.latitude));return d!==0?d:Ue(Rt(a.longitude),Rt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return E0(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,m,v;const T=a.fields||{},S=u.fields||{},b=(d=T[Ud])===null||d===void 0?void 0:d.arrayValue,q=(p=S[Ud])===null||p===void 0?void 0:p.arrayValue,F=Ue(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((v=q==null?void 0:q.values)===null||v===void 0?void 0:v.length)||0);return F!==0?F:E0(b,q)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===od.mapValue&&u===od.mapValue)return 0;if(a===od.mapValue)return 1;if(u===od.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=rm(p[T],v[T]);if(S!==0)return S;const b=Ra(d[p[T]],m[v[T]]);if(b!==0)return b}return Ue(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{le:t})}}function T0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=Ar(n),i=Ar(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function E0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ra(t[o],i[o]);if(a)return a}return Ue(t.length,i.length)}function wa(n){return om(n)}function om(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ar(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Cr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=om(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${om(t.fields[u])}`;return o+"}"})(n.mapValue):Re(61005,{value:n})}function gd(n){switch(Ir(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(n);return e?16+gd(e):16;case 5:return 2*n.stringValue.length;case 6:return Cr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+gd(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return So(i.fields,((a,u)=>{o+=a.length+gd(u)})),o})(n.mapValue);default:throw Re(13486,{value:n})}}function am(n){return!!n&&"integerValue"in n}function tg(n){return!!n&&"arrayValue"in n}function S0(n){return!!n&&"nullValue"in n}function A0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yd(n){return!!n&&"mapValue"in n}function pL(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[lC])===null||t===void 0?void 0:t.stringValue)===uC}function eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return So(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=eu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===hL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=en.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=eu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];yd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){So(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new jn(eu(this.value))}}function cC(n){const e=[];return So(n.fields,((t,i)=>{const o=new en([t]);if(yd(i)){const a=cC(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new cn(e,0,we.min(),we.min(),we.min(),jn.empty(),0)}static newFoundDocument(e,t,i,o){return new cn(e,1,t,we.min(),i,o,0)}static newNoDocument(e,t){return new cn(e,2,t,we.min(),we.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,we.min(),we.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.position=e,this.inclusive=t}}function C0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Ra(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function I0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t="asc"){this.field=e,this.dir=t}}function gL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{}class Lt extends dC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new _L(e,t,i):t==="array-contains"?new EL(e,i):t==="in"?new SL(e,i):t==="not-in"?new AL(e,i):t==="array-contains-any"?new CL(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new vL(e,i):new TL(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ra(t,this.value)):t!==null&&Ir(this.value)===Ir(t)&&this.matchesComparison(Ra(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends dC{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ui(e,t)}matches(e){return fC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function fC(n){return n.op==="and"}function hC(n){return yL(n)&&fC(n)}function yL(n){for(const e of n.filters)if(e instanceof Ui)return!1;return!0}function lm(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+wa(n.value);if(hC(n))return n.filters.map((e=>lm(e))).join(",");{const e=n.filters.map((t=>lm(t))).join(",");return`${n.op}(${e})`}}function pC(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Vi(i.value,o.value)})(n,e):n instanceof Ui?(function(i,o){return o instanceof Ui&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&pC(u,o.filters[d])),!0):!1})(n,e):void Re(19439)}function mC(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${wa(t.value)}`})(n):n instanceof Ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(mC).join(" ,")+"}"})(n):"Filter"}class _L extends Lt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class vL extends Lt{constructor(e,t){super(e,"in",t),this.keys=gC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class TL extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=gC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class EL extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tg(t)&&fu(t.arrayValue,this.value)}}class SL extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fu(this.value.arrayValue,t)}}class AL extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fu(this.value.arrayValue,t)}}class CL extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>fu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function R0(n,e=null,t=[],i=[],o=null,a=null,u=null){return new IL(n,e,t,i,o,a,u)}function ng(n){const e=Ne(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>lm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>wa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>wa(i))).join(",")),e.Pe=t}return e.Pe}function ig(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!I0(n.startAt,e.startAt)&&I0(n.endAt,e.endAt)}function um(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function RL(n,e,t,i,o,a,u,d){return new of(n,e,t,i,o,a,u,d)}function sg(n){return new of(n)}function w0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wL(n){return n.collectionGroup!==null}function tu(n){const e=Ne(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(en.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Od(a,i))})),t.has(en.keyField().canonicalString())||e.Te.push(new Od(en.keyField(),i))}return e.Te}function Mi(n){const e=Ne(n);return e.Ie||(e.Ie=bL(e,tu(n))),e.Ie}function bL(n,e){if(n.limitType==="F")return R0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Od(o.field,a)}));const t=n.endAt?new Ld(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ld(n.startAt.position,n.startAt.inclusive):null;return R0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function cm(n,e,t){return new of(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function af(n,e){return ig(Mi(n),Mi(e))&&n.limitType===e.limitType}function yC(n){return`${ng(Mi(n))}|lt:${n.limitType}`}function pa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>mC(o))).join(", ")}]`),sf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>wa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>wa(o))).join(",")),`Target(${i})`})(Mi(n))}; limitType=${n.limitType})`}function lf(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of tu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const m=C0(u,d,p);return u.inclusive?m<=0:m<0})(i.startAt,tu(i),o)||i.endAt&&!(function(u,d,p){const m=C0(u,d,p);return u.inclusive?m>=0:m>0})(i.endAt,tu(i),o))})(n,e)}function NL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _C(n){return(e,t)=>{let i=!1;for(const o of tu(n)){const a=xL(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function xL(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),m=d.data.field(a);return p!==null&&m!==null?Ra(p,m):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=new mt(Ee.comparator);function vs(){return ML}const vC=new mt(Ee.comparator);function Yl(...n){let e=vC;for(const t of n)e=e.insert(t.key,t);return e}function TC(n){let e=vC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function uo(){return nu()}function EC(){return nu()}function nu(){return new Ao((n=>n.toString()),((n,e)=>n.isEqual(e)))}const DL=new mt(Ee.comparator),PL=new Ot(Ee.comparator);function He(...n){let e=PL;for(const t of n)e=e.add(t);return e}const kL=new Ot(Ue);function VL(){return kL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function SC(n){return{integerValue:""+n}}function UL(n,e){return lL(e)?SC(e):rg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function LL(n,e,t){return n instanceof qd?(function(o,a){const u={fields:{[rC]:{stringValue:sC},[aC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&eg(a)&&(a=rf(a)),a&&(u.fields[oC]=a),{mapValue:u}})(t,e):n instanceof hu?CC(n,e):n instanceof pu?IC(n,e):(function(o,a){const u=AC(o,a),d=b0(u)+b0(o.Ee);return am(u)&&am(o.Ee)?SC(d):rg(o.serializer,d)})(n,e)}function OL(n,e,t){return n instanceof hu?CC(n,e):n instanceof pu?IC(n,e):t}function AC(n,e){return n instanceof Fd?(function(i){return am(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class qd extends uf{}class hu extends uf{constructor(e){super(),this.elements=e}}function CC(n,e){const t=RC(e);for(const i of n.elements)t.some((o=>Vi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class pu extends uf{constructor(e){super(),this.elements=e}}function IC(n,e){let t=RC(e);for(const i of n.elements)t=t.filter((o=>!Vi(o,i)));return{arrayValue:{values:t}}}class Fd extends uf{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function b0(n){return Rt(n.integerValue||n.doubleValue)}function RC(n){return tg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function qL(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof hu&&o instanceof hu||i instanceof pu&&o instanceof pu?Ia(i.elements,o.elements,Vi):i instanceof Fd&&o instanceof Fd?Vi(i.Ee,o.Ee):i instanceof qd&&o instanceof qd})(n.transform,e.transform)}class FL{constructor(e,t){this.version=e,this.transformResults=t}}class ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cf{}function wC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new NC(n.key,ps.none()):new Au(n.key,n.data,ps.none());{const t=n.data,i=jn.empty();let o=new Ot(en.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Co(n.key,i,new hi(o.toArray()),ps.none())}}function BL(n,e,t){n instanceof Au?(function(o,a,u){const d=o.value.clone(),p=x0(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Co?(function(o,a,u){if(!_d(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=x0(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(bC(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function iu(n,e,t,i){return n instanceof Au?(function(a,u,d,p){if(!_d(a.precondition,u))return d;const m=a.value.clone(),v=M0(a.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof Co?(function(a,u,d,p){if(!_d(a.precondition,u))return d;const m=M0(a.fieldTransforms,p,u),v=u.data;return v.setAll(bC(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return _d(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function HL(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=AC(i.transform,o||null);a!=null&&(t===null&&(t=jn.empty()),t.set(i.field,a))}return t||null}function N0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ia(i,o,((a,u)=>qL(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Au extends cf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Co extends cf{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function bC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function x0(n,e,t){const i=new Map;je(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,OL(u,d,t[o]))}return i}function M0(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,LL(a,u,e))}return i}class NC extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GL extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&BL(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=iu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=iu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=EC();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=wC(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(we.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,((t,i)=>N0(t,i)))&&Ia(this.baseMutations,e.baseMutations,((t,i)=>N0(t,i)))}}class og{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){je(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return DL})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new og(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Je;function KL(n){switch(n){case re.OK:return Re(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function xC(n){if(n===void 0)return _s("GRPC error has no .code"),re.UNKNOWN;switch(n){case Dt.OK:return re.OK;case Dt.CANCELLED:return re.CANCELLED;case Dt.UNKNOWN:return re.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return re.INTERNAL;case Dt.UNAVAILABLE:return re.UNAVAILABLE;case Dt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Dt.NOT_FOUND:return re.NOT_FOUND;case Dt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Dt.ABORTED:return re.ABORTED;case Dt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Dt.DATA_LOSS:return re.DATA_LOSS;default:return Re(39323,{code:n})}}(Je=Dt||(Dt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new _r([4294967295,4294967295],0);function D0(n){const e=jA().encode(n),t=new JA;return t.update(e),new Uint8Array(t.digest())}function P0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new _r([t,i],0),new _r([o,a],0)]}class ag{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Kl(`Invalid padding: ${t}`);if(i<0)throw new Kl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=_r.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(_r.fromNumber(i)));return o.compare($L)===1&&(o=new _r([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=D0(e),[i,o]=P0(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new ag(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=D0(e),[i,o]=P0(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new df(we.min(),o,new mt(Ue),vs(),He())}}class Cu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Cu(i,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class MC{constructor(e,t){this.targetId=e,this.De=t}}class DC{constructor(e,t,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class k0{constructor(){this.ve=0,this.Ce=V0(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=He(),t=He(),i=He();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Re(38017,{changeType:a})}})),new Cu(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=V0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class QL{constructor(e){this.We=e,this.Ge=new Map,this.ze=vs(),this.je=ad(),this.Je=ad(),this.He=new mt(Ue)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const a=o.target;if(um(a))if(i===0){const u=new Ee(a.path);this.Xe(t,u,cn.newNoDocument(u,we.min()))}else je(i===1,20013,{expectedCount:i});else{const u=this.ot(t);if(u!==i){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Cr(i).toUint8Array()}catch(p){if(p instanceof iC)return Er("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new ag(u,o,a)}catch(p){return Er(p instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&um(d.target)){const p=new Ee(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,cn.newNoDocument(p,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let i=He();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new df(e,t,this.He,this.ze,i);return this.ze=vs(),this.je=ad(),this.Je=ad(),this.He=new mt(Ue),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new k0,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ot(Ue),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ot(Ue),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new k0),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ad(){return new mt(Ee.comparator)}function V0(){return new mt(Ee.comparator)}const XL={asc:"ASCENDING",desc:"DESCENDING"},WL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZL={and:"AND",or:"OR"};class jL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dm(n,e){return n.useProto3Json||sf(e)?e:{value:e}}function Bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function e4(n,e){return Bd(n,e.toTimestamp())}function Di(n){return je(!!n,49232),we.fromTimestamp((function(t){const i=Ar(t);return new dt(i.seconds,i.nanos)})(n))}function lg(n,e){return fm(n,e).canonicalString()}function fm(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kC(n){const e=pt.fromString(n);return je(qC(e),10190,{key:e.toString()}),e}function hm(n,e){return lg(n.databaseId,e.path)}function Vp(n,e){const t=kC(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(UC(t))}function VC(n,e){return lg(n.databaseId,e)}function t4(n){const e=kC(n);return e.length===4?pt.emptyPath():UC(e)}function pm(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function UC(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function U0(n,e,t){return{name:hm(n,e),fields:t.value.mapValue.fields}}function n4(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(je(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?re.UNKNOWN:xC(m.code);return new ve(v,m.message||"")})(u);t=new DC(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Vp(n,i.document.name),a=Di(i.document.updateTime),u=i.document.createTime?Di(i.document.createTime):we.min(),d=new jn({mapValue:{fields:i.document.fields}}),p=cn.newFoundDocument(o,a,u,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new vd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Vp(n,i.document),a=i.readTime?Di(i.readTime):we.min(),u=cn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new vd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Vp(n,i.document),a=i.removedTargetIds||[];t=new vd([],a,o,null)}else{if(!("filter"in e))return Re(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new YL(o,a),d=i.targetId;t=new MC(d,u)}}return t}function i4(n,e){let t;if(e instanceof Au)t={update:U0(n,e.key,e.value)};else if(e instanceof NC)t={delete:hm(n,e.key)};else if(e instanceof Co)t={update:U0(n,e.key,e.data),updateMask:f4(e.fieldMask)};else{if(!(e instanceof GL))return Re(16599,{Rt:e.type});t={verify:hm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof qd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof hu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof pu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Fd)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Re(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:e4(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re(27497)})(n,e.precondition)),t}function s4(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Di(o.updateTime):Di(a);return u.isEqual(we.min())&&(u=Di(a)),new FL(u,o.transformResults||[])})(t,e)))):[]}function r4(n,e){return{documents:[VC(n,e.path)]}}function o4(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=VC(n,o);const a=(function(m){if(m.length!==0)return OC(Ui.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:ma(S.field),direction:u4(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=dm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function a4(n){let e=t4(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){je(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=LC(T);return S instanceof Ui&&hC(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(q){return new Od(ga(q.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,sf(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(T){const S=!!T.before,b=T.values||[];return new Ld(b,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const S=!T.before,b=T.values||[];return new Ld(b,S)})(t.endAt)),RL(e,o,u,a,d,"F",p,m)}function l4(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ga(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ga(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ga(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ga(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(ga(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ui.create(t.compositeFilter.filters.map((i=>LC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function u4(n){return XL[n]}function c4(n){return WL[n]}function d4(n){return ZL[n]}function ma(n){return{fieldPath:n.canonicalString()}}function ga(n){return en.fromServerFormat(n.fieldPath)}function OC(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(A0(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NAN"}};if(S0(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(A0(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NOT_NAN"}};if(S0(t.value))return{unaryFilter:{field:ma(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ma(t.field),op:c4(t.op),value:t.value}}})(n):n instanceof Ui?(function(t){const i=t.getFilters().map((o=>OC(o)));return i.length===1?i[0]:{compositeFilter:{op:d4(t.op),filters:i}}})(n):Re(54877,{filter:n})}function f4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t,i,o,a=we.min(),u=we.min(),d=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.gt=e}}function p4(n){const e=a4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.Dn=new g4}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Sr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class g4{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(pt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FC=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(FC,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ba(0)}static ur(){return new ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="LruGarbageCollector",y4=1048576;function q0([n,e],[t,i]){const o=Ue(n,t);return o===0?Ue(e,i):o}class _4{constructor(e){this.Tr=e,this.buffer=new Ot(q0),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();q0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class v4{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(O0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ua(t)?he(O0,"Ignoring IndexedDB error during garbage collection: ",t):await Va(t)}await this.Rr(3e5)}))}}class T4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(nf.ue);const i=new _4(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(L0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L0):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,a,u,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(m=Date.now(),ha()<=Be.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function E4(n,e){return new T4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(){this.changes=new Ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&iu(i.mutation,o,hi.empty(),dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,He()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=He()){const o=uo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=Yl();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=uo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,He())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=vs();const u=nu(),d=(function(){return nu()})();return t.forEach(((p,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Co)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),iu(v.mutation,m,v.mutation.getFieldMask(),dt.now())):u.set(m.key,hi.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var T;return d.set(m,new A4(v,(T=u.get(m))!==null&&T!==void 0?T:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=nu();let o=new mt(((u,d)=>u-d)),a=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=i.get(p)||hi.empty();v=d.applyToLocalView(m,v),i.set(p,v);const T=(o.get(d.batchId)||He()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,T=EC();v.forEach((S=>{if(!a.has(S)){const b=wC(t.get(S),i.get(S));b!==null&&T.set(S,b),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(uo());let d=uu,p=a;return u.next((m=>se.forEach(m,((v,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,He()))).next((v=>({batchId:d,changes:TC(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=Yl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=Yl();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(p=>{const m=(function(T,S){return new of(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,cn.newInvalidDocument(v)))}));let d=Yl();return u.forEach(((p,m)=>{const v=a.get(p);v!==void 0&&iu(v.mutation,m,hi.empty(),dt.now()),lf(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Di(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:p4(o.bundledQuery),readTime:Di(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.overlays=new mt(Ee.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=uo();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.wt(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=uo(),a=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new mt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=uo(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=uo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return se.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new JL(t,i));let a=this.kr.get(t);a===void 0&&(a=He(),this.kr.set(t,a)),this.kr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.qr=new Ot(zt.Qr),this.$r=new Ot(zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new zt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new zt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Ee(new pt([])),i=new zt(t,e),o=new zt(t,e+1),a=[];return this.$r.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ee(new pt([])),i=new zt(t,e),o=new zt(t,e+1);let a=He();return this.$r.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new zt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ee.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ot(zt.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new zL(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new zt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?jm:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zt(t,0),o=new zt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Ue);return t.forEach((o=>{const a=new zt(o,0),u=new zt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),se.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new zt(new Ee(a),0);let d=new Ot(Ue);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Hr)),!0)}),u),se.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){je(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return se.forEach(t.mutations,(o=>{const a=new zt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new zt(t,0),o=this.Yr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.ni=e,this.docs=(function(){return new mt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let i=vs();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():cn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=vs();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||sL(iL(v),i)<=0||(o.has(v.key)||lf(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Re(9500)}ri(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new x4(this)}getSize(e){return se.resolve(this.size)}}class x4 extends S4{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.persistence=e,this.ii=new Ao((t=>ng(t)),ig),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.si=0,this.oi=new ug,this.targetCount=0,this._i=ba.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ba(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t){this.ai={},this.overlays={},this.ui=new nf(0),this.ci=!1,this.ci=!0,this.li=new w4,this.referenceDelegate=e(this),this.hi=new M4(this),this.indexManager=new m4,this.remoteDocumentCache=(function(o){return new N4(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new h4(t),this.Ti=new I4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new b4(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new D4(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return se.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class D4 extends oL{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ai=new ug,this.Ri=null}static Vi(e){return new cg(e)}get mi(){if(this.Ri)return this.Ri;throw Re(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,(i=>{const o=Ee.fromPath(i);return this.fi(e,o).next((a=>{a||t.removeEntry(o,we.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Hd{constructor(e,t){this.persistence=e,this.gi=new Ao((i=>uL(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=E4(this,t)}static Vi(e,t){return new Hd(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return se.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,we.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gd(e.data.value)),t}Sr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=He(),o=He();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new dg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return QD()?8:aL(fn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new P4;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(ha()<=Be.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",pa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(ha()<=Be.DEBUG&&he("QueryEngine","Query:",pa(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(ha()<=Be.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",pa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):se.resolve())}ps(e,t){if(w0(t))return se.resolve(null);let i=Mi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=cm(t,null,"F"),i=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=He(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const m=this.bs(t,d);return this.Ds(t,m,u,p.readTime)?this.ps(e,cm(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,i,o){return w0(t)||o.isEqual(we.min())?se.resolve(null):this.gs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,i,o)?se.resolve(null):(ha()<=Be.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),pa(t)),this.vs(e,u,t,nL(o,uu)).next((d=>d)))}))}bs(e,t){let i=new Ot(_C(e));return t.forEach(((o,a)=>{lf(e,a)&&(i=i.add(a))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,i){return ha()<=Be.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",pa(t)),this.gs.getDocumentsMatchingQuery(e,t,Sr.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LocalStore",V4=3e8;class U4{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new mt(Ue),this.Ms=new Ao((a=>ng(a)),ig),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function L4(n,e,t,i){return new U4(n,e,t,i)}async function HC(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=He();for(const m of o){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function O4(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const T=m.batch,S=T.keys();let b=se.resolve();return S.forEach((q=>{b=b.next((()=>v.getEntry(p,q))).next((F=>{const z=m.docVersions.get(q);je(z!==null,48541),F.version.compareTo(z)<0&&(T.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),v.addEntry(F)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=He();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function GC(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function q4(n,e){const t=Ne(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,T))));let b=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?b=b.withResumeToken(nn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,i)),o=o.insert(T,b),(function(F,z,te){return F.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=V4?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(S,b,v)&&d.push(t.hi.updateTargetData(a,b))}));let p=vs(),m=He();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(F4(a,u,e.documentUpdates).next((v=>{p=v.Ls,m=v.ks}))),!i.isEqual(we.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((T=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Fs=o,a)))}function F4(n,e,t){let i=He(),o=He();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=vs();return t.forEach(((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(we.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):he(fg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function B4(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=jm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function H4(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.hi.allocateTargetId(i).next((u=>(o=new mr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function mm(n,e,t){const i=Ne(n),o=i.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Ua(u))throw u;he(fg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function F0(n,e,t){const i=Ne(n);let o=we.min(),a=He();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const T=Ne(p),S=T.Ms.get(v);return S!==void 0?se.resolve(T.Fs.get(S)):T.hi.getTargetData(m,v)})(i,u,Mi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:we.min(),t?a:He()))).next((d=>(G4(i,NL(e),d),{documents:d,qs:a})))))}function G4(n,e,t){let i=n.xs.get(e)||we.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.xs.set(e,i)}class B0{constructor(){this.activeTargetIds=VL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z4{constructor(){this.Fo=new B0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new B0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="ConnectivityMonitor";class G0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(H0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(H0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function gm(){return ld===null?ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="RestConnection",Y4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class K4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Vd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=gm(),d=this.Go(e,t.toUriEncodedString());he(Up,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,a);const{host:m}=new URL(d),v=Nr(m);return this.jo(e,d,p,i,v).then((T=>(he(Up,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Er(Up,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ka})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const i=Y4[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class Q4 extends K4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,a){const u=gm();return new Promise(((d,p)=>{const m=new YA;m.setWithCredentials(!0),m.listenOnce(KA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case md.NO_ERROR:const T=m.getResponseJson();he(ln,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case md.TIMEOUT:he(ln,`RPC '${e}' ${u} timed out`),p(new ve(re.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const S=m.getStatus();if(he(ln,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const q=b==null?void 0:b.error;if(q&&q.status&&q.message){const F=(function(te){const K=te.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(K)>=0?K:re.UNKNOWN})(q.status);p(new ve(F,q.message))}else p(new ve(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ve(re.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{he(ln,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);he(ln,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,i,15)}))}P_(e,t,i){const o=gm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=XA(),d=QA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");he(ln,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=u.createWebChannel(v,p);this.T_(T);let S=!1,b=!1;const q=new $4({Ho:z=>{b?he(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(S||(he(ln,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),he(ln,`RPC '${e}' stream ${o} sending:`,z),T.send(z))},Yo:()=>T.close()}),F=(z,te,K)=>{z.listen(te,(Q=>{try{K(Q)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return F(T,Jl.EventType.OPEN,(()=>{b||(he(ln,`RPC '${e}' stream ${o} transport opened.`),q.s_())})),F(T,Jl.EventType.CLOSE,(()=>{b||(b=!0,he(ln,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(T))})),F(T,Jl.EventType.ERROR,(z=>{b||(b=!0,Er(ln,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),q.__(new ve(re.UNAVAILABLE,"The operation could not be completed")))})),F(T,Jl.EventType.MESSAGE,(z=>{var te;if(!b){const K=z.data[0];je(!!K,16349);const Q=K,ie=(Q==null?void 0:Q.error)||((te=Q[0])===null||te===void 0?void 0:te.error);if(ie){he(ln,`RPC '${e}' stream ${o} received error:`,ie);const le=ie.status;let de=(function(x){const D=Dt[x];if(D!==void 0)return xC(D)})(le),M=ie.message;de===void 0&&(de=re.INTERNAL,M="Unknown error status: "+le+" with message "+ie.message),b=!0,q.__(new ve(de,M)),T.close()}else he(ln,`RPC '${e}' stream ${o} received:`,K),q.a_(K)}})),F(d,$A.STAT_EVENT,(z=>{z.stat===sm.PROXY?he(ln,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===sm.NOPROXY&&he(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.o_()}),0),q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(n){return new jL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="PersistentStream";class JC{constructor(e,t,i,o,a,u,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(_s(t.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new ve(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return he(z0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(he(z0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class X4 extends JC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=n4(this.serializer,e),i=(function(a){if(!("targetChange"in a))return we.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?we.min():u.readTime?Di(u.readTime):we.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=pm(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=um(p)?{documents:r4(a,p)}:{query:o4(a,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=PC(a,u.resumeToken);const m=dm(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(we.min())>0){d.readTime=Bd(a,u.snapshotVersion.toTimestamp());const m=dm(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const i=l4(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=pm(this.serializer),t.removeTarget=e,this.k_(t)}}class W4 extends JC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=s4(e.writeResults,e.commitTime),i=Di(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=pm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>i4(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{}class j4 extends Z4{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ve(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,fm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(re.UNKNOWN,a.toString())}))}Jo(e,t,i,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,fm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ve(re.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class eO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_s(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="RemoteStore";class tO{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{i.enqueueAndForget((async()=>{Io(this)&&(he(vo,"Restarting streams for network reachability change."),await(async function(p){const m=Ne(p);m.Ia.add(4),await Iu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await hf(m)})(this))}))})),this.Aa=new eO(i,o)}}async function hf(n){if(Io(n))for(const e of n.da)await e(!0)}async function Iu(n){for(const e of n.da)await e(!1)}function YC(n,e){const t=Ne(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),gg(t)?mg(t):La(t).x_()&&pg(t,e))}function hg(n,e){const t=Ne(n),i=La(t);t.Ta.delete(e),i.x_()&&KC(t,e),t.Ta.size===0&&(i.x_()?i.B_():Io(t)&&t.Aa.set("Unknown"))}function pg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}La(n).H_(e)}function KC(n,e){n.Ra.$e(e),La(n).Y_(e)}function mg(n){n.Ra=new QL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),La(n).start(),n.Aa.aa()}function gg(n){return Io(n)&&!La(n).M_()&&n.Ta.size>0}function Io(n){return Ne(n).Ia.size===0}function $C(n){n.Ra=void 0}async function nO(n){n.Aa.set("Online")}async function iO(n){n.Ta.forEach(((e,t)=>{pg(n,e)}))}async function sO(n,e){$C(n),gg(n)?(n.Aa.la(e),mg(n)):n.Aa.set("Unknown")}async function rO(n,e,t){if(n.Aa.set("Online"),e instanceof DC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){he(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gd(n,i)}else if(e instanceof vd?n.Ra.Ye(e):e instanceof MC?n.Ra.it(e):n.Ra.et(e),!t.isEqual(we.min()))try{const i=await GC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,m)=>{const v=a.Ta.get(p);if(!v)return;a.Ta.set(p,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),KC(a,p);const T=new mr(v.target,p,m,v.sequenceNumber);pg(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){he(vo,"Failed to raise snapshot:",i),await Gd(n,i)}}async function Gd(n,e,t){if(!Ua(e))throw e;n.Ia.add(1),await Iu(n),n.Aa.set("Offline"),t||(t=()=>GC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(vo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await hf(n)}))}function QC(n,e){return e().catch((t=>Gd(n,t,e)))}async function pf(n){const e=Ne(n),t=Rr(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:jm;for(;oO(e);)try{const o=await B4(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,aO(e,o)}catch(o){await Gd(e,o)}XC(e)&&WC(e)}function oO(n){return Io(n)&&n.Pa.length<10}function aO(n,e){n.Pa.push(e);const t=Rr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function XC(n){return Io(n)&&!Rr(n).M_()&&n.Pa.length>0}function WC(n){Rr(n).start()}async function lO(n){Rr(n).na()}async function uO(n){const e=Rr(n);for(const t of n.Pa)e.X_(t.mutations)}async function cO(n,e,t){const i=n.Pa.shift(),o=og.from(i,e,t);await QC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await pf(n)}async function dO(n,e){e&&Rr(n).Z_&&await(async function(i,o){if((function(u){return KL(u)&&u!==re.ABORTED})(o.code)){const a=i.Pa.shift();Rr(i).N_(),await QC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await pf(i)}})(n,e),XC(n)&&WC(n)}async function J0(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),he(vo,"RemoteStore received new credentials");const i=Io(t);t.Ia.add(3),await Iu(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await hf(t)}async function fO(n,e){const t=Ne(n);e?(t.Ia.delete(2),await hf(t)):e||(t.Ia.add(2),await Iu(t),t.Aa.set("Unknown"))}function La(n){return n.Va||(n.Va=(function(t,i,o){const a=Ne(t);return a.ia(),new X4(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:nO.bind(null,n),e_:iO.bind(null,n),n_:sO.bind(null,n),J_:rO.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),gg(n)?mg(n):n.Aa.set("Unknown")):(await n.Va.stop(),$C(n))}))),n.Va}function Rr(n){return n.ma||(n.ma=(function(t,i,o){const a=Ne(t);return a.ia(),new W4(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:lO.bind(null,n),n_:dO.bind(null,n),ea:uO.bind(null,n),ta:cO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await pf(n)):(await n.ma.stop(),n.Pa.length>0&&(he(vo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new yg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(n,e){if(_s("AsyncQueue",`${e}: ${n}`),Ua(n))return new ve(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{static emptySet(e){return new Ca(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Yl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ca;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.fa=new mt(Ee.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Re(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Na{constructor(e,t,i,o,a,u,d,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Na(e,t,Ca.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class pO{constructor(){this.queries=K0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Ne(t),a=o.queries;o.queries=K0(),a.forEach(((u,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new ve(re.ABORTED,"Firestore shutting down"))}}function K0(){return new Ao((n=>yC(n)),af)}async function mO(n,e){const t=Ne(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(i=2):(a=new hO,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=_g(u,`Initialization of query '${pa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&vg(t)}async function gO(n,e){const t=Ne(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function yO(n,e){const t=Ne(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(i=!0);u.ya=o}}i&&vg(t)}function _O(n,e,t){const i=Ne(n),o=i.queries.get(e);if(o)for(const a of o.wa)a.onError(t);i.queries.delete(e)}function vg(n){n.Da.forEach((e=>{e.next()}))}var ym,$0;($0=ym||(ym={})).Fa="default",$0.Cache="cache";class vO{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Na(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.key=e}}class jC{constructor(e){this.key=e}}class TO{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=He(),this.mutatedKeys=He(),this.Xa=_C(e),this.eu=new Ca(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new Y0,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),b=lf(this.query,T)?T:null,q=!!S&&this.mutatedKeys.has(S.key),F=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let z=!1;S&&b?S.data.isEqual(b.data)?q!==F&&(i.track({type:3,doc:b}),z=!0):this.iu(S,b)||(i.track({type:2,doc:b}),z=!0,(p&&this.Xa(b,p)>0||m&&this.Xa(b,m)<0)&&(d=!0)):!S&&b?(i.track({type:0,doc:b}),z=!0):S&&!b&&(i.track({type:1,doc:S}),z=!0,(p||m)&&(d=!0)),z&&(b?(u=u.add(b),a=F?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{eu:u,ru:i,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,T)=>(function(b,q){const F=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{At:z})}};return F(b)-F(q)})(v.type,T.type)||this.Xa(v.doc,T.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,u.length!==0||m?{snapshot:new Na(this.query,e.eu,a,u,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Y0,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=He(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new jC(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new ZC(i))})),t}uu(e){this.Ha=e.qs,this.Za=He();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Na.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Tg="SyncEngine";class EO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class SO{constructor(e){this.key=e,this.lu=!1}}class AO{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Ao((d=>yC(d)),af),this.Tu=new Map,this.Iu=new Set,this.du=new mt(Ee.comparator),this.Eu=new Map,this.Au=new ug,this.Ru={},this.Vu=new Map,this.mu=ba.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function CO(n,e,t=!0){const i=rI(n);let o;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await eI(i,e,t,!0),o}async function IO(n,e){const t=rI(n);await eI(t,e,!0,!1)}async function eI(n,e,t,i){const o=await H4(n.localStore,Mi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await RO(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&YC(n.remoteStore,o),d}async function RO(n,e,t,i,o){n.gu=(T,S,b)=>(async function(F,z,te,K){let Q=z.view.nu(te);Q.Ds&&(Q=await F0(F.localStore,z.query,!1).then((({documents:M})=>z.view.nu(M,Q))));const ie=K&&K.targetChanges.get(z.targetId),le=K&&K.targetMismatches.get(z.targetId)!=null,de=z.view.applyChanges(Q,F.isPrimaryClient,ie,le);return X0(F,z.targetId,de._u),de.snapshot})(n,T,S,b);const a=await F0(n.localStore,e,!0),u=new TO(e,a.qs),d=u.nu(a.documents),p=Cu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,p);X0(n,t,m._u);const v=new EO(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function wO(n,e,t){const i=Ne(n),o=i.Pu.get(e),a=i.Tu.get(o.targetId);if(a.length>1)return i.Tu.set(o.targetId,a.filter((u=>!af(u,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await mm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&hg(i.remoteStore,o.targetId),_m(i,o.targetId)})).catch(Va)):(_m(i,o.targetId),await mm(i.localStore,o.targetId,!0))}async function bO(n,e){const t=Ne(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),hg(t.remoteStore,i.targetId))}async function NO(n,e,t){const i=UO(n);try{const o=await(function(u,d){const p=Ne(u),m=dt.now(),v=d.reduce(((b,q)=>b.add(q.key)),He());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let q=vs(),F=He();return p.Os.getEntries(b,v).next((z=>{q=z,q.forEach(((te,K)=>{K.isValidDocument()||(F=F.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(b,q))).next((z=>{T=z;const te=[];for(const K of d){const Q=HL(K,T.get(K.key).overlayedDocument);Q!=null&&te.push(new Co(K.key,Q,cC(Q.value.mapValue),ps.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,te,d)})).next((z=>{S=z;const te=z.applyToLocalDocumentSet(T,F);return p.documentOverlayCache.saveOverlays(b,z.batchId,te)}))})).then((()=>({batchId:S.batchId,changes:TC(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let m=u.Ru[u.currentUser.toKey()];m||(m=new mt(Ue)),m=m.insert(d,p),u.Ru[u.currentUser.toKey()]=m})(i,o.batchId,t),await Ru(i,o.changes),await pf(i.remoteStore)}catch(o){const a=_g(o,"Failed to persist write");t.reject(a)}}async function tI(n,e){const t=Ne(n);try{const i=await q4(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?je(u.lu,14607):o.removedDocuments.size>0&&(je(u.lu,42227),u.lu=!1))})),await Ru(t,i,e)}catch(i){await Va(i)}}function Q0(n,e,t){const i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Ne(u);p.onlineState=d;let m=!1;p.queries.forEach(((v,T)=>{for(const S of T.wa)S.va(d)&&(m=!0)})),m&&vg(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xO(n,e,t){const i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),a=o&&o.key;if(a){let u=new mt(Ee.comparator);u=u.insert(a,cn.newNoDocument(a,we.min()));const d=He().add(a),p=new df(we.min(),new Map,new mt(Ue),u,d);await tI(i,p),i.du=i.du.remove(a),i.Eu.delete(e),Eg(i)}else await mm(i.localStore,e,!1).then((()=>_m(i,e,t))).catch(Va)}async function MO(n,e){const t=Ne(n),i=e.batch.batchId;try{const o=await O4(t.localStore,e);iI(t,i,null),nI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ru(t,o)}catch(o){await Va(o)}}async function DO(n,e,t){const i=Ne(n);try{const o=await(function(u,d){const p=Ne(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((T=>(je(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(m,T)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(i.localStore,e);iI(i,e,t),nI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ru(i,o)}catch(o){await Va(o)}}function nI(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function iI(n,e,t){const i=Ne(n);let o=i.Ru[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function _m(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||sI(n,i)}))}function sI(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(hg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Eg(n))}function X0(n,e,t){for(const i of t)i instanceof ZC?(n.Au.addReference(i.key,e),PO(n,i)):i instanceof jC?(he(Tg,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||sI(n,i.key)):Re(19791,{yu:i})}function PO(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(he(Tg,"New document in limbo: "+t),n.Iu.add(i),Eg(n))}function Eg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ee(pt.fromString(e)),i=n.mu.next();n.Eu.set(i,new SO(t)),n.du=n.du.insert(t,i),YC(n.remoteStore,new mr(Mi(sg(t.path)),i,"TargetPurposeLimboResolution",nf.ue))}}async function Ru(n,e,t){const i=Ne(n),o=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{u.push(i.gu(p,e,t).then((m=>{var v;if((m||t)&&i.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(m){o.push(m);const T=dg.Es(p.targetId,m);a.push(T)}})))})),await Promise.all(u),i.hu.J_(o),await(async function(p,m){const v=Ne(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(m,(S=>se.forEach(S.Is,(b=>v.persistence.referenceDelegate.addReference(T,S.targetId,b))).next((()=>se.forEach(S.ds,(b=>v.persistence.referenceDelegate.removeReference(T,S.targetId,b)))))))))}catch(T){if(!Ua(T))throw T;he(fg,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const b=v.Fs.get(S),q=b.snapshotVersion,F=b.withLastLimboFreeSnapshotVersion(q);v.Fs=v.Fs.insert(S,F)}}})(i.localStore,a))}async function kO(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){he(Tg,"User change. New user:",e.toKey());const i=await HC(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((p=>{p.reject(new ve(re.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ru(t,i.Bs)}}function VO(n,e){const t=Ne(n),i=t.Eu.get(e);if(i&&i.lu)return He().add(i.key);{let o=He();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function rI(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xO.bind(null,e),e.hu.J_=yO.bind(null,e.eventManager),e.hu.pu=_O.bind(null,e.eventManager),e}function UO(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DO.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ff(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return L4(this.persistence,new k4,e.initialUser,this.serializer)}Du(e){return new BC(cg.Vi,this.serializer)}bu(e){return new z4}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class LO extends zd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){je(this.persistence.referenceDelegate instanceof Hd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new v4(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new BC((i=>Hd.Vi(i,t)),this.serializer)}}class vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Q0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kO.bind(null,this.syncEngine),await fO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pO})()}createDatastore(e){const t=ff(e.databaseInfo.databaseId),i=(function(a){return new Q4(a)})(e.databaseInfo);return(function(a,u,d,p){return new j4(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new tO(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Q0(this.syncEngine,t,0)),(function(){return G0.C()?new G0:new J4})())}createSyncEngine(e,t){return(function(o,a,u,d,p,m,v){const T=new AO(o,a,u,d,p,m);return v&&(T.fu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ne(o);he(vo,"RemoteStore shutting down."),a.Ia.add(5),await Iu(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}vm.provider={build:()=>new vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="FirestoreClient";class qO{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=Wm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{he(wr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(he(wr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=_g(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Op(n,e){n.asyncQueue.verifyOperationInProgress(),he(wr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await HC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Er("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Er("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function W0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await FO(n);he(wr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>J0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>J0(e.remoteStore,o))),n._onlineComponents=e}async function FO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(wr,"Using user provided OfflineComponentProvider");try{await Op(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Er("Error using user provided cache. Falling back to memory cache: "+t),await Op(n,new zd)}}else he(wr,"Using default OfflineComponentProvider"),await Op(n,new LO(void 0));return n._offlineComponents}async function oI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(wr,"Using user provided OnlineComponentProvider"),await W0(n,n._uninitializedComponentsProvider._online)):(he(wr,"Using default OnlineComponentProvider"),await W0(n,new vm))),n._onlineComponents}function BO(n){return oI(n).then((e=>e.syncEngine))}async function HO(n){const e=await oI(n),t=e.eventManager;return t.onListen=CO.bind(null,e.syncEngine),t.onUnlisten=wO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bO.bind(null,e.syncEngine),t}function GO(n,e,t={}){const i=new vr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,m){const v=new OO({next:S=>{v.Ou(),u.enqueueAndForget((()=>gO(a,T)));const b=S.docs.has(d);!b&&S.fromCache?m.reject(new ve(re.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&S.fromCache&&p&&p.source==="server"?m.reject(new ve(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new vO(sg(d.path),v,{includeMetadataChanges:!0,ka:!0});return mO(a,T)})(await HO(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firestore.googleapis.com",j0=!0;class eS{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lI,this.ssl=j0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:j0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<y4)throw new ve(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ve(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sg{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new JU;switch(i.type){case"firstParty":return new QU(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Z0.get(t);i&&(he("ComponentProvider","Removing Datastore"),Z0.delete(t),i.terminate())})(this),Promise.resolve()}}function zO(n,e,t,i={}){var o;n=lu(n,Sg);const a=Nr(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(Nm(`https://${p}`),xm("Firestore",!0)),u.host!==lI&&u.host!==p&&Er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:i});if(!ho(m,d)&&(n._setSettings(m),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=un.MOCK_USER;else{v=HS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ve(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new un(S)}n._authCredentials=new YU(new ZA(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ag(this.firestore,e,this._query)}}class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Su(t,Jt._jsonSchema))return new Jt(e,i||null,new Ee(pt.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Pt("string",Jt._jsonSchemaVersion),referencePath:Pt("string")};class mu extends Ag{constructor(e,t,i){super(e,t,sg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Ee(e))}withConverter(e){return new mu(this.firestore,e,this._path)}}function mf(n,e,...t){if(n=tn(n),arguments.length===1&&(e=Wm.newId()),eL("doc","path",e),n instanceof Sg){const i=pt.fromString(e,...t);return p0(i),new Jt(n,null,new Ee(i))}{if(!(n instanceof Jt||n instanceof mu))throw new ve(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return p0(i),new Jt(n.firestore,n instanceof mu?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="AsyncQueue";class nS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zC(this,"async_queue_retry"),this.oc=()=>{const i=Lp();i&&he(tS,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new vr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ua(e))throw e;he(tS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,_s("INTERNAL UNHANDLED ERROR: ",iS(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=yg.createAndSchedule(this,e,t,i,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&Re(47125,{hc:iS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function iS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Cg extends Sg{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new nS,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nS(e),this._firestoreClient=void 0,await e}}}function JO(n,e){const t=typeof n=="object"?n:Pm(),i=typeof n=="string"?n:Vd,o=Zd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=qS("firestore");a&&zO(o,...a)}return o}function uI(n){if(n._terminated)throw new ve(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YO(n),n._firestoreClient}function YO(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,m,v){return new fL(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,aI(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new qO(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ei(nn.fromBase64String(e))}catch(t){throw new ve(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ei(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,ei._jsonSchema))return ei.fromBase64String(e.bytes)}}ei._jsonSchemaVersion="firestore/bytes/1.0",ei._jsonSchema={type:Pt("string",ei._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Su(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:Pt("string",Pi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ki(e.vectorValues);throw new ve(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Pt("string",ki._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=/^__.*__$/;class $O{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}function dI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ec:n})}}class Rg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Jd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(dI(this.Ec)&&KO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class QO{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ff(e)}Dc(e,t,i,o=!1){return new Rg({Ec:e,methodName:t,bc:i,path:en.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XO(n){const e=n._freezeSettings(),t=ff(n._databaseId);return new QO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function WO(n,e,t,i,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);mI("Data must be an object, but it was:",u,i);const d=hI(i,u);let p,m;if(a.merge)p=new hi(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=ZO(e,T,t);if(!u.contains(S))throw new ve(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);e3(v,S)||v.push(S)}p=new hi(v),m=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,m=u.fieldTransforms;return new $O(new jn(d),p,m)}function fI(n,e){if(pI(n=tn(n)))return mI("Unsupported field value:",e,n),hI(n,e);if(n instanceof cI)return(function(i,o){if(!dI(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=fI(d,o.yc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return UL(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=dt.fromDate(i);return{timestampValue:Bd(o.serializer,a)}}if(i instanceof dt){const a=new dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Bd(o.serializer,a)}}if(i instanceof Pi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ei)return{bytesValue:PC(o.serializer,i._byteString)};if(i instanceof Jt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:lg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ki)return(function(u,d){return{mapValue:{fields:{[lC]:{stringValue:uC},[Ud]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return rg(d.serializer,m)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Zm(i)}`)})(n,e)}function hI(n,e){const t={};return nC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,((i,o)=>{const a=fI(o,e.Vc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function pI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Pi||n instanceof ei||n instanceof Jt||n instanceof cI||n instanceof ki)}function mI(n,e,t){if(!pI(t)||!eC(t)){const i=Zm(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function ZO(n,e,t){if((e=tn(e))instanceof Ig)return e._internalPath;if(typeof e=="string")return gI(n,e);throw Jd("Field path arguments must be of type string or ",n,!1,void 0,t)}const jO=new RegExp("[~\\*/\\[\\]]");function gI(n,e,t){if(e.search(jO)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ig(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jd(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new ve(re.INVALID_ARGUMENT,d+n+p)}function e3(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_I("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class t3 extends yI{data(){return super.data()}}function _I(n,e){return typeof e=="string"?gI(n,e):e instanceof Ig?e._internalPath:e._delegate._internalPath}class n3{convertValue(e,t="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return So(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Ud].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>Rt(u.doubleValue)));return new ki(a)}convertGeoPoint(e){return new Pi(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=rf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const t=Ar(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);je(qC(i),9688,{name:e});const o=new du(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return o.isEqual(t)||_s(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class $l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fo extends yI{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(_I("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=fo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}fo._jsonSchemaVersion="firestore/documentSnapshot/1.0",fo._jsonSchema={type:Pt("string",fo._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Td extends fo{data(e={}){return super.data(e)}}class su{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new $l(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Td(this._firestore,this._userDataWriter,i.key,i,new $l(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Td(o._firestore,o._userDataWriter,d.doc.key,d.doc,new $l(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Td(o._firestore,o._userDataWriter,d.doc.key,d.doc,new $l(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:s3(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=su._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function s3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n){n=lu(n,Jt);const e=lu(n.firestore,Cg);return GO(uI(e),n._key).then((t=>a3(e,n,t)))}su._jsonSchemaVersion="firestore/querySnapshot/1.0",su._jsonSchema={type:Pt("string",su._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class r3 extends n3{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function TI(n,e,t){n=lu(n,Jt);const i=lu(n.firestore,Cg),o=i3(n.converter,e);return o3(i,[WO(XO(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ps.none())])}function o3(n,e){return(function(i,o){const a=new vr;return i.asyncQueue.enqueueAndForget((async()=>NO(await BO(i),o,a))),a.promise})(uI(n),e)}function a3(n,e,t){const i=t.docs.get(e._key),o=new r3(n);return new fo(n,o,e._key,i,new $l(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ka=o})(Eo),po(new Tr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Cg(new KU(i.getProvider("auth-internal")),new XU(u,i.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ve(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(m.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Ni(u0,c0,e),Ni(u0,c0,"esm2017")})();const l3={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},wg=JS(l3),Ql=GU(wg),u3=new cs,gf=JO(wg),c3=Ak(wg),d3=async(n,e,t)=>{try{const i=Sk(c3,`users/${n}/clothing/${t}.jpg`);return await Tk(i,e,"data_url"),await Ek(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},f3=async(n,e)=>{try{const t=mf(gf,"users",n,"wardrobe","items");await TI(t,{items:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des vtements:",t),t}},h3=async n=>{try{const e=mf(gf,"users",n,"wardrobe","items"),t=await vI(e);return t.exists()?t.data().items||[]:[]}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},p3=async(n,e)=>{try{const t=mf(gf,"users",n,"wardrobe","sets");await TI(t,{sets:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des ensembles:",t),t}},m3=async n=>{try{const e=mf(gf,"users",n,"wardrobe","sets"),t=await vI(e);return t.exists()?t.data().sets||[]:[]}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}},g3=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),y3=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),sS=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),Ed=()=>I.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),bg=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),Ng=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),_3=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),EI=()=>I.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),v3=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),T3=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),E3=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),S3=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),A3=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),SI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),AI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),C3=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),I3=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),I.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),rS=({theme:n,toggleTheme:e,children:t})=>I.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:I.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[I.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:[I.jsx("span",{className:"text-gold",children:"DRESS"}),"CODE"]}),I.jsxs("div",{className:"flex items-center gap-4",children:[t,I.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?I.jsx(y3,{}):I.jsx(g3,{})})]})]})}),oS=({user:n})=>{var S,b,q;const[e,t]=Ce.useState(""),[i,o]=Ce.useState(""),[a,u]=Ce.useState(!1),[d,p]=Ce.useState(!1),m=async()=>{try{await ZV(Ql,u3)}catch(F){console.error("Erreur de connexion Google:",F)}},v=async F=>{F.preventDefault();try{a?await wV(Ql,e,i):await bV(Ql,e,i)}catch(z){console.error("Erreur d'authentification:",z)}},T=async()=>{try{await DV(Ql)}catch(F){console.error("Erreur de dconnexion:",F)}};return n?I.jsxs("div",{className:"relative",children:[I.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[I.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((S=n.displayName)==null?void 0:S[0])||((b=n.email)==null?void 0:b[0])||"U").toUpperCase()}),I.jsx("span",{className:"hidden md:block text-sm font-medium",children:n.displayName||((q=n.email)==null?void 0:q.split("@")[0])})]}),d&&I.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[I.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[I.jsx("p",{className:"text-sm font-medium",children:n.displayName||"Utilisateur"}),I.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.email})]}),I.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[I.jsx("span",{className:"text-gold",children:"Dress"}),"Code AI"]}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),I.jsxs("button",{onClick:m,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[I.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[I.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),I.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),I.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),I.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),I.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),I.jsxs("div",{className:"relative my-6",children:[I.jsx("div",{className:"absolute inset-0 flex items-center",children:I.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),I.jsx("div",{className:"relative flex justify-center text-sm",children:I.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),I.jsxs("form",{onSubmit:v,className:"space-y-4",children:[I.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:F=>t(F.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),I.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:F=>o(F.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),I.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),I.jsx("button",{onClick:()=>u(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},R3=({onAnalyze:n,isAnalyzing:e})=>{const t=Ce.useRef(null),[i,o]=Ce.useState([]),[a,u]=Ce.useState(!1),[d,p]=Ce.useState(!1);Ce.useEffect(()=>{const K=()=>p(window.innerWidth<1024);return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),Ce.useEffect(()=>()=>{i.forEach(K=>URL.revokeObjectURL(K.preview))},[i]);const m=K=>{const Q=K.map(ie=>({id:`${ie.name}-${ie.lastModified}-${Math.random()}`,file:ie,preview:URL.createObjectURL(ie)}));o(ie=>[...ie,...Q])},v=K=>{K.target.files&&(m(Array.from(K.target.files)),K.target.value="")},T=()=>{var K;e||(K=t.current)==null||K.click()},S=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!0))},b=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!1))},q=K=>{d||(K.preventDefault(),K.stopPropagation())},F=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!1),K.dataTransfer.files&&K.dataTransfer.files.length>0&&(m(Array.from(K.dataTransfer.files)),K.dataTransfer.clearData()))},z=K=>{const Q=i.find(ie=>ie.id===K);Q&&URL.revokeObjectURL(Q.preview),o(ie=>ie.filter(le=>le.id!==K))},te=()=>{i.length>0&&!e&&(n(i.map(K=>K.file)),o([]))};return I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:S,onDragLeave:b,onDragOver:q,onDrop:F,children:[I.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),I.jsxs("div",{onClick:T,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[I.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),I.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?I.jsxs(I.Fragment,{children:[I.jsx(Ed,{}),I.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:I.jsx(sS,{})}),I.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),I.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",I.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!d&&I.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[I.jsx("div",{className:"text-black transform-gpu scale-110",children:I.jsx(sS,{})}),I.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&I.jsxs("div",{className:"mt-8",children:[I.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),I.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(K=>I.jsxs("div",{className:"relative group aspect-square",children:[I.jsx("img",{src:K.preview,alt:K.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),I.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),I.jsx("button",{onClick:()=>z(K.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:I.jsx(Ng,{})})]},K.id))}),I.jsxs("button",{onClick:te,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(bg,{}),"Analyser les ",i.length," article(s)"]})]})]})},w3=({imageSrc:n,analysis:e,onClick:t,onRemove:i,isSelected:o,isSet:a})=>I.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[I.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),I.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),I.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),a&&!o&&I.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:I.jsx(AI,{})}),o&&I.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:I.jsx(C3,{})}),I.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:I.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),I.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:I.jsx(Ng,{})})]}),b3={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},N3=({clothingItems:n,clothingSets:e,onRemoveItem:t,onRemoveSet:i,onSelectItem:o,onCreateSet:a})=>{const[u,d]=Ce.useState("Hauts"),[p,m]=Ce.useState(b3),[v,T]=Ce.useState(!1),[S,b]=Ce.useState([]),[q,F]=Ce.useState(!1),z=Ce.useMemo(()=>new Set(e.flatMap(N=>N.itemIds)),[e]),te=n.length,K=[{name:"Hauts",icon:v3},{name:"Bas",icon:T3},{name:"Chaussures",icon:E3},{name:"Accessoires",icon:S3}],Q=()=>{T(!v),b([]),F(!1)},ie=N=>{v?b(x=>x.includes(N.id)?x.filter(D=>D!==N.id):[...x,N.id]):o(N)},le=Ce.useMemo(()=>S.length<2?null:e.find(N=>N.itemIds.length===S.length&&N.itemIds.every(x=>S.includes(x))),[S,e]);if(te===0)return I.jsxs("div",{className:"text-center py-20 px-6 bg-white dark:bg-raisin-black rounded-xl border border-dashed border-gray-300/50 dark:border-gray-700/50 flex flex-col items-center",children:[I.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:I.jsx(_3,{})}),I.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide."}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ajoutez des vtements pour commencer  crer."})]});const de=N=>d(x=>x===N?null:N),M=(N,x,D)=>{m(V=>({...V,[N]:{...V[N],[x]:D}}))};return I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mb-8",children:[I.jsxs("h2",{className:"text-3xl font-serif font-bold",children:["Ma Garde-Robe ",I.jsxs("span",{className:"text-gray-500",children:["(",te,")"]})]}),I.jsx("button",{onClick:Q,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${v?"bg-gold/20 text-gold":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700"}`,children:v?"Annuler la slection":"Crer un ensemble"})]}),I.jsx("div",{className:"space-y-4",children:K.map(({name:N,icon:x})=>{const D=n.filter(H=>H.category===N);if(D.length===0)return null;const V=u===N,L=["Hauts","Bas","Chaussures"].includes(N),P=[...new Set(D.map(H=>H.color))].sort(),rt=[...new Set(D.map(H=>H.material))].sort(),ft=D.filter(H=>{const{color:ae,material:_e}=p[N];return(ae==="Toutes"||H.color===ae)&&(_e==="Toutes"||H.material===_e)});return I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-lg shadow-black/5 dark:shadow-black/10 ring-1 ring-black/5 dark:ring-white/10 overflow-hidden transition-all duration-300",children:[I.jsxs("button",{onClick:()=>de(N),className:"w-full flex justify-between items-center p-4 lg:p-5 text-left","aria-expanded":V,children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("span",{className:"text-gold",children:I.jsx(x,{})}),I.jsx("span",{className:"font-serif font-bold text-xl text-raisin-black dark:text-snow",children:N}),I.jsx("span",{className:"text-sm font-medium bg-snow dark:bg-onyx px-2 py-0.5 rounded-full text-gray-500 dark:text-gray-400",children:D.length})]}),I.jsx(A3,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${V?"rotate-180":""}`})]}),I.jsx("div",{className:`grid transition-all duration-500 ease-in-out ${V?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:I.jsx("div",{className:"overflow-hidden",children:I.jsxs("div",{className:"p-4 lg:p-5 border-t border-black/5 dark:border-white/10",children:[L&&I.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:`${N}-color-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Couleur"}),I.jsxs("select",{id:`${N}-color-filter`,value:p[N].color,onChange:H=>M(N,"color",H.target.value),onClick:H=>H.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[I.jsx("option",{value:"Toutes",children:"Toutes"}),P.map(H=>I.jsx("option",{value:H,children:H},H))]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`${N}-material-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Matire"}),I.jsxs("select",{id:`${N}-material-filter`,value:p[N].material,onChange:H=>M(N,"material",H.target.value),onClick:H=>H.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[I.jsx("option",{value:"Toutes",children:"Toutes"}),rt.map(H=>I.jsx("option",{value:H,children:H},H))]})]})]}),I.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:ft.map(H=>I.jsx(w3,{imageSrc:H.imageSrc,analysis:H.analysis,onClick:()=>ie(H),onRemove:ae=>{ae.stopPropagation(),t(H.id)},isSelected:v&&S.includes(H.id),isSet:z.has(H.id)},H.id))})]})})})]},N)})}),v&&I.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[60] w-full max-w-md px-4",children:q?I.jsxs("form",{onSubmit:N=>{N.preventDefault();const D=new FormData(N.currentTarget).get("setName");D&&D.trim()&&(a(S,D.trim()),Q())},className:"flex items-center gap-2 bg-white dark:bg-raisin-black p-2 rounded-full shadow-2xl ring-1 ring-gold/50",children:[I.jsx("input",{type:"text",name:"setName",placeholder:"Nom de l'ensemble...",className:"flex-grow bg-transparent px-4 py-1 text-onyx dark:text-snow focus:outline-none",autoFocus:!0}),I.jsx("button",{type:"submit",className:"bg-gold text-onyx font-bold px-4 py-1.5 rounded-full hover:bg-gold-dark transition-colors",children:"Crer"}),I.jsx("button",{type:"button",onClick:()=>F(!1),className:"text-gray-500 dark:text-gray-400 p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:I.jsx(Ng,{})})]}):le?I.jsxs("button",{onClick:()=>{i(le.id),Q()},className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-rose-500 text-white font-bold rounded-full shadow-2xl hover:bg-rose-600 transition-all duration-300 transform hover:scale-105",children:[I.jsx(CI,{}),"Dissocier l'ensemble"]}):S.length>1&&I.jsxs("button",{onClick:()=>F(!0),className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-gold text-onyx font-bold rounded-full shadow-2xl hover:bg-gold-dark transition-all duration-300 transform hover:scale-105",children:[I.jsx(AI,{}),"Crer un ensemble avec ",S.length," articles"]})})]})},x3=({onGenerate:n,isGenerating:e,context:t,setContext:i})=>{const o=u=>{u.preventDefault(),t.trim()&&n(t)},a=["Casual","Chic","Formel"];return I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),I.jsx("form",{onSubmit:o,children:I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"context",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ou mto ?"}),I.jsx("div",{className:"flex justify-center gap-2 mb-4",children:a.map(u=>I.jsx("button",{type:"button",onClick:()=>i(u),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${t===u?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:e,children:u},u))}),I.jsx("input",{id:"context",type:"text",value:t,onChange:u=>i(u.target.value),placeholder:"Ou dcrivez... Ex: un brunch ensoleill",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e})]}),I.jsxs("button",{type:"submit",disabled:e||!t.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(bg,{}),e?"Gnration...":"Gnrer des Tenues"]})]})})]})},M3=({outfits:n,allClothingItems:e})=>{const[t,i]=Ce.useState(null);Ce.useEffect(()=>{if(!t)return;const a=u=>{u.key==="Escape"&&i(null)};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow="auto"}},[t]);const o=a=>{const u=a.toLowerCase(),d=e.find(p=>{if(p.analysis.toLowerCase()===u)return!0;const m=new Set(p.analysis.toLowerCase().split(/\s+/)),v=u.split(/\s+/);return v.filter(S=>m.has(S)).length/v.length>.5});return d?d.imageSrc:null};return I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"mt-10 space-y-8",children:n.map((a,u)=>I.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[I.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:a.titre}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:a.description}),I.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:a.vetements.map((d,p)=>{const m=o(d);return I.jsx("button",{onClick:()=>m&&i(m),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!m,"aria-label":`Agrandir l'image de : ${d}`,children:m?I.jsx("img",{src:m,alt:d,className:"w-full h-full object-cover"}):I.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:I.jsx(EI,{})})},p)})}),I.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:a.vetements.map((d,p)=>I.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d},p))})]},u))}),t&&I.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>i(null),role:"dialog","aria-modal":"true",children:I.jsxs("div",{className:"relative",onClick:a=>a.stopPropagation(),children:[I.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),I.jsx("button",{onClick:()=>i(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:I.jsx(SI,{})})]})})]})},D3=({item:n,clothingSets:e,onClose:t,onUpdate:i,onGenerateFrom:o,onRemoveSet:a})=>{const[u,d]=Ce.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(T=>T.itemIds.includes(n.id));Ce.useEffect(()=>{d({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),Ce.useEffect(()=>{const T=S=>{S.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",T),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",T)}},[t]);const m=T=>{const{name:S,value:b}=T.target;d(q=>({...q,[S]:b}))},v=T=>{T.preventDefault(),i({...n,...u})};return I.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:T=>T.stopPropagation(),children:[I.jsxs("div",{className:"relative",children:[I.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),I.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:I.jsx(SI,{})})]}),I.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[I.jsxs("div",{className:"space-y-4 flex-grow",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),I.jsx("textarea",{id:"analysis",name:"analysis",value:u.analysis,onChange:m,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),I.jsx("select",{id:"category",name:"category",value:u.category,onChange:m,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(T=>I.jsx("option",{value:T,children:T},T))})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),I.jsx("input",{type:"text",id:"color",name:"color",value:u.color,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),I.jsx("input",{type:"text",id:"material",name:"material",value:u.material,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&I.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),I.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),I.jsxs("button",{type:"button",onClick:()=>{a(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[I.jsx(CI,{}),I.jsx("span",{children:"Dissocier"})]})]})]}),I.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[I.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[I.jsx(bg,{}),"Crer une tenue avec cet article"]}),I.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},P3=({onGenerate:n,isGenerating:e})=>{const[t,i]=Ce.useState(3),[o,a]=Ce.useState(""),u=d=>{d.preventDefault(),o.trim()&&t>0&&n(t,o)};return I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),I.jsxs("form",{onSubmit:u,className:"space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[I.jsxs("div",{className:"sm:col-span-1",children:[I.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),I.jsx("input",{id:"days",type:"number",value:t,onChange:d=>i(parseInt(d.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e,required:!0})]}),I.jsxs("div",{className:"sm:col-span-2",children:[I.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),I.jsx("input",{id:"vacation-context",type:"text",value:o,onChange:d=>a(d.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:e,required:!0})]})]}),I.jsxs("button",{type:"submit",disabled:e||!o.trim()||t<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(I3,{}),e?"Prparation...":"Gnrer la valise"]})]})]})},k3=({plan:n,allClothingItems:e})=>{const t=i=>{const o=i.toLowerCase(),a=e.find(d=>d.analysis.toLowerCase()===o);if(a)return a.imageSrc;const u=e.map(d=>{const p=new Set(d.analysis.toLowerCase().split(/\s+/)),m=o.split(/\s+/),T=m.filter(S=>p.has(S)).length/m.length;return{item:d,score:T}}).filter(d=>d.score>.5).sort((d,p)=>p.score-d.score)[0];return u?u.item.imageSrc:null};return I.jsx("div",{className:"mt-10",children:I.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[I.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),I.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((i,o)=>{const a=t(i);return I.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:i,children:[a?I.jsx("img",{src:a,alt:i,className:"w-full h-full object-cover"}):I.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:I.jsx(EI,{})}),I.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:I.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:i})})]},o)})}),I.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((i,o)=>I.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:i},o))})]})})},V3=()=>{const[n,e]=Ce.useState(null),[t,i]=Ce.useState(!0),[o,a]=Ce.useState(null),[u,d]=Ce.useState(!1),[p,m]=Ce.useState("dark"),[v,T]=Ce.useState([]),[S,b]=Ce.useState([]),[q,F]=Ce.useState([]),[z,te]=Ce.useState(!1),[K,Q]=Ce.useState(!1),[ie,le]=Ce.useState(null),[de,M]=Ce.useState(null),[N,x]=Ce.useState(""),[D,V]=Ce.useState(null),[L,P]=Ce.useState(!1);Ce.useEffect(()=>{const ue=MV(Ql,ye=>{e(ye),i(!1)});return()=>ue()},[]),Ce.useEffect(()=>{n&&(async()=>{try{const ye=await h3(n.uid),ke=await m3(n.uid);T(ye),b(ke)}catch(ye){console.error("Erreur lors du chargement des donnes:",ye)}})()},[n]),Ce.useEffect(()=>{console.log(" Save Effect:",{user:!!n,itemsLength:v.length}),n&&v.length>0&&(console.log(" SAVING ITEMS..."),f3(n.uid,v).then(()=>console.log(" SAVE SUCCESS!")).catch(ue=>console.error(" SAVE ERROR:",ue)))},[v,n]),Ce.useEffect(()=>{n&&S.length>0&&p3(n.uid,S).catch(console.error)},[S,n]),Ce.useEffect(()=>{const ue=window.document.documentElement;ue.classList.remove(p==="light"?"dark":"light"),ue.classList.add(p)},[p]);const rt=()=>{m(ue=>ue==="light"?"dark":"light")},ft=Ce.useCallback(async ue=>{if(ue.length!==0){te(!0),le(null);try{const ye=ue.map(kt=>new Promise((sn,Nn)=>{const xn=new FileReader;xn.onload=()=>sn(xn.result),xn.onerror=Nn,xn.readAsDataURL(kt)})),ke=await Promise.all(ye),De=ke.map(kt=>kt.split(",")[1]),St=await wD(De),ii=Math.min(St.length,ue.length),si=[];for(let kt=0;kt<ii;kt++){const sn=`${Date.now()}-${ue[kt].name}-${Math.random()}`;let Nn=ke[kt];if(n)try{Nn=await d3(n.uid,ke[kt],sn),console.log(" Image uploaded to Storage:",Nn)}catch(xn){console.error(" Failed to upload image, using base64:",xn)}si.push({id:sn,imageSrc:Nn,...St[kt]})}St.length!==ue.length&&(console.warn(`Le nombre de rsultats d'analyse (${St.length}) ne correspond pas au nombre de fichiers (${ue.length}).`),le(`L'IA a analys ${si.length} sur ${ue.length} image(s). Certaines ont peut-tre t ignores.`)),T(kt=>[...kt,...si])}catch(ye){console.error("Erreur lors de l'analyse par lot des images:",ye),le("Une erreur est survenue lors de l'analyse des images. L'IA a peut-tre rencontr un problme. Veuillez ressayer.")}finally{te(!1)}}},[n]),H=Ce.useCallback(async(ue,ye)=>{if(v.length-S.flatMap(De=>De.itemIds).length+S.length<2){le("Veuillez avoir au moins deux articles ou ensembles pour gnrer des tenues.");return}Q(!0),le(null),F([]);try{const De=await ND(v,S,ue,ye);F(De)}catch(De){console.error("Erreur lors de la gnration des tenues:",De),le("Impossible de gnrer des tenues. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{Q(!1)}},[v,S]),ae=Ce.useCallback(async(ue,ye)=>{if(v.length<ue){le(`Veuillez avoir au moins ${ue} articles dans votre garde-robe pour un voyage de ${ue} jours.`);return}P(!0),le(null),V(null);try{const ke=await MD(v,S,ue,ye);V(ke)}catch(ke){console.error("Erreur lors de la gnration du plan de valise:",ke),le("Impossible de gnrer le plan de valise. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{P(!1)}},[v,S]),_e=ue=>{T(ye=>ye.filter(ke=>ke.id!==ue)),b(ye=>ye.map(De=>De.itemIds.includes(ue)?{...De,itemIds:De.itemIds.filter(St=>St!==ue)}:De).filter(De=>De.itemIds.length>1))},Ge=ue=>{b(ye=>ye.filter(ke=>ke.id!==ue))},Ye=ue=>{M(ue)},O=()=>{M(null)},j=ue=>{T(ye=>ye.map(ke=>ke.id===ue.id?ue:ke)),O()},oe=ue=>{if(!N.trim()){le("Veuillez d'abord dcrire une occasion ou une mto dans le crateur de tenues.");return}O(),H(N,ue)},pe=(ue,ye)=>{if(ue.length<2||!ye.trim())return;const ke=v.find(St=>St.id===ue[0]);if(!ke)return;const De={id:`${Date.now()}-set-${Math.random()}`,name:ye,itemIds:ue,imageSrc:ke.imageSrc};b(St=>[...St,De])},Ae=Ce.useCallback(async()=>{if(v.length<3){le("Ajoutez au moins 3 vtements pour une analyse pertinente.");return}d(!0),le(null);try{const ue=await xD(v,S);a(ue)}catch(ue){console.error("Erreur lors de l'analyse de la garde-robe:",ue),le("Impossible d'analyser la garde-robe. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{d(!1)}},[v,S]);return t?I.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx flex items-center justify-center",children:I.jsx(Ed,{})}):n?I.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[I.jsx(rS,{theme:p,toggleTheme:rt,children:I.jsx(oS,{user:n})}),I.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[ie&&I.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[I.jsx("strong",{className:"font-bold",children:"Erreur: "}),I.jsx("span",{className:"block sm:inline",children:ie})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[I.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[v.length>=3&&I.jsxs("div",{className:"bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-6 flex items-center justify-between",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),I.jsx("button",{onClick:Ae,disabled:u,className:"px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap",children:u?I.jsxs(I.Fragment,{children:[I.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyse..."]}):I.jsxs(I.Fragment,{children:[I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Analyser ma garde-robe"]})})]}),I.jsx(R3,{onAnalyze:ft,isAnalyzing:z}),I.jsx(N3,{clothingItems:v,clothingSets:S,onRemoveItem:_e,onRemoveSet:Ge,onSelectItem:Ye,onCreateSet:pe})]}),I.jsx("div",{className:"space-y-10",children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8 sticky top-28",children:[I.jsx(P3,{onGenerate:ae,isGenerating:L}),L&&I.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[I.jsx(Ed,{}),I.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA prpare votre valise..."})]}),D&&I.jsx(k3,{plan:D,allClothingItems:v}),(D||L||q.length>0)&&I.jsx("hr",{className:"my-8 border-dashed border-gray-200 dark:border-gray-700"}),I.jsx(x3,{onGenerate:H,isGenerating:K,context:N,setContext:x}),K&&I.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[I.jsx(Ed,{}),I.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA compose vos tenues..."})]}),q.length>0&&I.jsx(M3,{outfits:q,allClothingItems:v})]})})]}),de&&I.jsx(D3,{item:de,clothingSets:S,onClose:O,onUpdate:j,onGenerateFrom:oe,onRemoveSet:Ge}),o&&I.jsx(dw,{analysis:o,onClose:()=>a(null)})]})]}):I.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[I.jsx(rS,{theme:p,toggleTheme:rt}),I.jsx("main",{className:"container mx-auto px-4 py-20 flex items-center justify-center min-h-[calc(100vh-200px)]",children:I.jsx(oS,{user:n})})]})},II=document.getElementById("root");if(!II)throw new Error("L'lment root est introuvable dans le DOM");const U3=cw.createRoot(II);U3.render(I.jsx(nw.StrictMode,{children:I.jsx(V3,{})}));
