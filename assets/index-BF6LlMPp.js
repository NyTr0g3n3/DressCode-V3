(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function R0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rp={exports:{}},Ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function eR(){if(Sv)return Ml;Sv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return Ml.Fragment=e,Ml.jsx=t,Ml.jsxs=t,Ml}var Av;function tR(){return Av||(Av=1,rp.exports=eR()),rp.exports}var M=tR(),op={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function nR(){if(Cv)return Re;Cv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,$={};function te(P,Q,ie){this.props=P,this.context=Q,this.refs=$,this.updater=ie||q}te.prototype.isReactComponent={},te.prototype.setState=function(P,Q){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Q,"setState")},te.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function K(){}K.prototype=te.prototype;function Z(P,Q,ie){this.props=P,this.context=Q,this.refs=$,this.updater=ie||q}var oe=Z.prototype=new K;oe.constructor=Z,G(oe,te.prototype),oe.isPureReactComponent=!0;var fe=Array.isArray;function ce(){}var x={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(P,Q,ie){var ue=ie.ref;return{$$typeof:n,type:P,key:Q,ref:ue!==void 0?ue:null,props:ie}}function D(P,Q){return N(P.type,Q,P.props)}function U(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function O(P){var Q={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ie){return Q[ie]})}var k=/\/+/g;function rt(P,Q){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):Q.toString(36)}function ot(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ce,ce):(P.status="pending",P.then(function(Q){P.status==="pending"&&(P.status="fulfilled",P.value=Q)},function(Q){P.status==="pending"&&(P.status="rejected",P.reason=Q)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function F(P,Q,ie,ue,ye){var Ne=typeof P;(Ne==="undefined"||Ne==="boolean")&&(P=null);var xe=!1;if(P===null)xe=!0;else switch(Ne){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(P.$$typeof){case n:case e:xe=!0;break;case v:return xe=P._init,F(xe(P._payload),Q,ie,ue,ye)}}if(xe)return ye=ye(P),xe=ue===""?"."+rt(P,0):ue,fe(ye)?(ie="",xe!=null&&(ie=xe.replace(k,"$&/")+"/"),F(ye,Q,ie,"",function(Pn){return Pn})):ye!=null&&(U(ye)&&(ye=D(ye,ie+(ye.key==null||P&&P.key===ye.key?"":(""+ye.key).replace(k,"$&/")+"/")+xe)),Q.push(ye)),1;xe=0;var We=ue===""?".":ue+":";if(fe(P))for(var at=0;at<P.length;at++)ue=P[at],Ne=We+rt(ue,at),xe+=F(ue,Q,ie,Ne,ye);else if(at=b(P),typeof at=="function")for(P=at.call(P),at=0;!(ue=P.next()).done;)ue=ue.value,Ne=We+rt(ue,at++),xe+=F(ue,Q,ie,Ne,ye);else if(Ne==="object"){if(typeof P.then=="function")return F(ot(P),Q,ie,ue,ye);throw Q=String(P),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return xe}function ae(P,Q,ie){if(P==null)return P;var ue=[],ye=0;return F(P,ue,"","",function(Ne){return Q.call(ie,Ne,ye++)}),ue}function ge(P){if(P._status===-1){var Q=P._result;Q=Q(),Q.then(function(ie){(P._status===0||P._status===-1)&&(P._status=1,P._result=ie)},function(ie){(P._status===0||P._status===-1)&&(P._status=2,P._result=ie)}),P._status===-1&&(P._status=0,P._result=Q)}if(P._status===1)return P._result.default;throw P._result}var Fe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Ge={map:ae,forEach:function(P,Q,ie){ae(P,function(){Q.apply(this,arguments)},ie)},count:function(P){var Q=0;return ae(P,function(){Q++}),Q},toArray:function(P){return ae(P,function(Q){return Q})||[]},only:function(P){if(!U(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Re.Activity=E,Re.Children=Ge,Re.Component=te,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=Z,Re.StrictMode=s,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Re.__COMPILER_RUNTIME={__proto__:null,c:function(P){return x.H.useMemoCache(P)}},Re.cache=function(P){return function(){return P.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(P,Q,ie){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ue=G({},P.props),ye=P.key;if(Q!=null)for(Ne in Q.key!==void 0&&(ye=""+Q.key),Q)!w.call(Q,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&Q.ref===void 0||(ue[Ne]=Q[Ne]);var Ne=arguments.length-2;if(Ne===1)ue.children=ie;else if(1<Ne){for(var xe=Array(Ne),We=0;We<Ne;We++)xe[We]=arguments[We+2];ue.children=xe}return N(P.type,ye,ue)},Re.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Re.createElement=function(P,Q,ie){var ue,ye={},Ne=null;if(Q!=null)for(ue in Q.key!==void 0&&(Ne=""+Q.key),Q)w.call(Q,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ye[ue]=Q[ue]);var xe=arguments.length-2;if(xe===1)ye.children=ie;else if(1<xe){for(var We=Array(xe),at=0;at<xe;at++)We[at]=arguments[at+2];ye.children=We}if(P&&P.defaultProps)for(ue in xe=P.defaultProps,xe)ye[ue]===void 0&&(ye[ue]=xe[ue]);return N(P,Ne,ye)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(P){return{$$typeof:f,render:P}},Re.isValidElement=U,Re.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ge}},Re.memo=function(P,Q){return{$$typeof:m,type:P,compare:Q===void 0?null:Q}},Re.startTransition=function(P){var Q=x.T,ie={};x.T=ie;try{var ue=P(),ye=x.S;ye!==null&&ye(ie,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ce,Fe)}catch(Ne){Fe(Ne)}finally{Q!==null&&ie.types!==null&&(Q.types=ie.types),x.T=Q}},Re.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Re.use=function(P){return x.H.use(P)},Re.useActionState=function(P,Q,ie){return x.H.useActionState(P,Q,ie)},Re.useCallback=function(P,Q){return x.H.useCallback(P,Q)},Re.useContext=function(P){return x.H.useContext(P)},Re.useDebugValue=function(){},Re.useDeferredValue=function(P,Q){return x.H.useDeferredValue(P,Q)},Re.useEffect=function(P,Q){return x.H.useEffect(P,Q)},Re.useEffectEvent=function(P){return x.H.useEffectEvent(P)},Re.useId=function(){return x.H.useId()},Re.useImperativeHandle=function(P,Q,ie){return x.H.useImperativeHandle(P,Q,ie)},Re.useInsertionEffect=function(P,Q){return x.H.useInsertionEffect(P,Q)},Re.useLayoutEffect=function(P,Q){return x.H.useLayoutEffect(P,Q)},Re.useMemo=function(P,Q){return x.H.useMemo(P,Q)},Re.useOptimistic=function(P,Q){return x.H.useOptimistic(P,Q)},Re.useReducer=function(P,Q,ie){return x.H.useReducer(P,Q,ie)},Re.useRef=function(P){return x.H.useRef(P)},Re.useState=function(P){return x.H.useState(P)},Re.useSyncExternalStore=function(P,Q,ie){return x.H.useSyncExternalStore(P,Q,ie)},Re.useTransition=function(){return x.H.useTransition()},Re.version="19.2.0",Re}var Iv;function im(){return Iv||(Iv=1,op.exports=nR()),op.exports}var Ce=im();const iR=R0(Ce);var ap={exports:{}},xl={},lp={exports:{}},up={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function sR(){return Rv||(Rv=1,(function(n){function e(F,ae){var ge=F.length;F.push(ae);e:for(;0<ge;){var Fe=ge-1>>>1,Ge=F[Fe];if(0<o(Ge,ae))F[Fe]=ae,F[ge]=Ge,ge=Fe;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var ae=F[0],ge=F.pop();if(ge!==ae){F[0]=ge;e:for(var Fe=0,Ge=F.length,P=Ge>>>1;Fe<P;){var Q=2*(Fe+1)-1,ie=F[Q],ue=Q+1,ye=F[ue];if(0>o(ie,ge))ue<Ge&&0>o(ye,ie)?(F[Fe]=ye,F[ue]=ge,Fe=ue):(F[Fe]=ie,F[Q]=ge,Fe=Q);else if(ue<Ge&&0>o(ye,ge))F[Fe]=ye,F[ue]=ge,Fe=ue;else break e}}return ae}function o(F,ae){var ge=F.sortIndex-ae.sortIndex;return ge!==0?ge:F.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],m=[],v=1,E=null,A=3,b=!1,q=!1,G=!1,$=!1,te=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function oe(F){for(var ae=t(m);ae!==null;){if(ae.callback===null)s(m);else if(ae.startTime<=F)s(m),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(m)}}function fe(F){if(G=!1,oe(F),!q)if(t(p)!==null)q=!0,ce||(ce=!0,O());else{var ae=t(m);ae!==null&&ot(fe,ae.startTime-F)}}var ce=!1,x=-1,w=5,N=-1;function D(){return $?!0:!(n.unstable_now()-N<w)}function U(){if($=!1,ce){var F=n.unstable_now();N=F;var ae=!0;try{e:{q=!1,G&&(G=!1,K(x),x=-1),b=!0;var ge=A;try{t:{for(oe(F),E=t(p);E!==null&&!(E.expirationTime>F&&D());){var Fe=E.callback;if(typeof Fe=="function"){E.callback=null,A=E.priorityLevel;var Ge=Fe(E.expirationTime<=F);if(F=n.unstable_now(),typeof Ge=="function"){E.callback=Ge,oe(F),ae=!0;break t}E===t(p)&&s(p),oe(F)}else s(p);E=t(p)}if(E!==null)ae=!0;else{var P=t(m);P!==null&&ot(fe,P.startTime-F),ae=!1}}break e}finally{E=null,A=ge,b=!1}ae=void 0}}finally{ae?O():ce=!1}}}var O;if(typeof Z=="function")O=function(){Z(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,rt=k.port2;k.port1.onmessage=U,O=function(){rt.postMessage(null)}}else O=function(){te(U,0)};function ot(F,ae){x=te(function(){F(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(F){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var ge=A;A=ae;try{return F()}finally{A=ge}},n.unstable_requestPaint=function(){$=!0},n.unstable_runWithPriority=function(F,ae){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ge=A;A=F;try{return ae()}finally{A=ge}},n.unstable_scheduleCallback=function(F,ae,ge){var Fe=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Fe+ge:Fe):ge=Fe,F){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=ge+Ge,F={id:v++,callback:ae,priorityLevel:F,startTime:ge,expirationTime:Ge,sortIndex:-1},ge>Fe?(F.sortIndex=ge,e(m,F),t(p)===null&&F===t(m)&&(G?(K(x),x=-1):G=!0,ot(fe,ge-Fe))):(F.sortIndex=Ge,e(p,F),q||b||(q=!0,ce||(ce=!0,O()))),F},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(F){var ae=A;return function(){var ge=A;A=ae;try{return F.apply(this,arguments)}finally{A=ge}}}})(up)),up}var wv;function rR(){return wv||(wv=1,lp.exports=sR()),lp.exports}var cp={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function oR(){if(bv)return en;bv=1;var n=im();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,v)},en.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},en.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},en.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},en.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,E=f(v,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:b}):v==="script"&&s.d.X(p,{crossOrigin:E,integrity:A,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},en.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=f(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=f(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},en.requestFormReset=function(p){s.d.r(p)},en.unstable_batchedUpdates=function(p,m){return p(m)},en.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.0",en}var Nv;function aR(){if(Nv)return cp.exports;Nv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cp.exports=oR(),cp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function lR(){if(Mv)return xl;Mv=1;var n=rR(),e=im(),t=aR();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return p(y),i;if(_===u)return p(y),r;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=_;else{for(var S=!1,I=y.child;I;){if(I===a){S=!0,a=y,u=_;break}if(I===u){S=!0,u=y,a=_;break}I=I.sibling}if(!S){for(I=_.child;I;){if(I===a){S=!0,a=_,u=y;break}if(I===u){S=!0,u=_,a=y;break}I=I.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function O(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function rt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case G:return"Fragment";case te:return"Profiler";case $:return"StrictMode";case fe:return"Suspense";case ce:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case q:return"Portal";case Z:return i.displayName||"Context";case K:return(i._context.displayName||"Context")+".Consumer";case oe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return r=i.displayName||null,r!==null?r:rt(i.type)||"Memo";case w:r=i._payload,i=i._init;try{return rt(i(r))}catch{}}return null}var ot=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Fe=[],Ge=-1;function P(i){return{current:i}}function Q(i){0>Ge||(i.current=Fe[Ge],Fe[Ge]=null,Ge--)}function ie(i,r){Ge++,Fe[Ge]=i.current,i.current=r}var ue=P(null),ye=P(null),Ne=P(null),xe=P(null);function We(i,r){switch(ie(Ne,r),ie(ye,i),ie(ue,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?J_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=J_(r),i=Y_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(ue),ie(ue,i)}function at(){Q(ue),Q(ye),Q(Ne)}function Pn(i){i.memoizedState!==null&&ie(xe,i);var r=ue.current,a=Y_(r,i.type);r!==a&&(ie(ye,i),ie(ue,a))}function hn(i){ye.current===i&&(Q(ue),Q(ye)),xe.current===i&&(Q(xe),Rl._currentValue=ge)}var vr,fo;function Xn(i){if(vr===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);vr=r&&r[1]||"",fo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vr+i+fo}var Tr=!1;function ho(i,r){if(!i||Tr)return"";Tr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var Y=X}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(X){Y=X}i.call(ne.prototype)}}else{try{throw Error()}catch(X){Y=X}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],I=_[1];if(S&&I){var V=S.split(`
`),J=I.split(`
`);for(y=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(u===V.length||y===J.length)for(u=V.length-1,y=J.length-1;1<=u&&0<=y&&V[u]!==J[y];)y--;for(;1<=u&&0<=y;u--,y--)if(V[u]!==J[y]){if(u!==1||y!==1)do if(u--,y--,0>y||V[u]!==J[y]){var j=`
`+V[u].replace(" at new "," at ");return i.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",i.displayName)),j}while(1<=u&&0<=y);break}}}finally{Tr=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Xn(a):""}function nd(i,r){switch(i.tag){case 26:case 27:case 5:return Xn(i.type);case 16:return Xn("Lazy");case 13:return i.child!==r&&r!==null?Xn("Suspense Fallback"):Xn("Suspense");case 19:return Xn("SuspenseList");case 0:case 15:return ho(i.type,!1);case 11:return ho(i.type.render,!1);case 1:return ho(i.type,!0);case 31:return Xn("Activity");default:return""}}function yu(i){try{var r="",a=null;do r+=nd(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var po=Object.prototype.hasOwnProperty,Er=n.unstable_scheduleCallback,mo=n.unstable_cancelCallback,id=n.unstable_shouldYield,Na=n.unstable_requestPaint,zt=n.unstable_now,_u=n.unstable_getCurrentPriorityLevel,xt=n.unstable_ImmediatePriority,Vt=n.unstable_UserBlockingPriority,wi=n.unstable_NormalPriority,vu=n.unstable_LowPriority,Ma=n.unstable_IdlePriority,sd=n.log,Sr=n.unstable_setDisableYieldValue,cs=null,Zt=null;function kn(i){if(typeof sd=="function"&&Sr(i),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(cs,i)}catch{}}var an=Math.clz32?Math.clz32:Tu,rd=Math.log,xa=Math.LN2;function Tu(i){return i>>>=0,i===0?32:31-(rd(i)/xa|0)|0}var Ar=256,ai=262144,fs=4194304;function Wn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Vn(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~_,u!==0?y=Wn(u):(S&=I,S!==0?y=Wn(S):a||(a=I&~i,a!==0&&(y=Wn(a))))):(I=u&~_,I!==0?y=Wn(I):S!==0?y=Wn(S):a||(a=u&~i,a!==0&&(y=Wn(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function ds(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function go(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Da(){var i=fs;return fs<<=1,(fs&62914560)===0&&(fs=4194304),i}function bi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function hs(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Gt(i,r,a,u,y,_){var S=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,V=i.expirationTimes,J=i.hiddenUpdates;for(a=S&~a;0<a;){var j=31-an(a),ne=1<<j;I[j]=0,V[j]=-1;var Y=J[j];if(Y!==null)for(J[j]=null,j=0;j<Y.length;j++){var X=Y[j];X!==null&&(X.lane&=-536870913)}a&=~ne}u!==0&&Pa(i,u,0),_!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~r))}function Pa(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-an(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function ps(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-an(a),y=1<<u;y&r|i[u]&r&&(i[u]|=r),a&=~y}}function ms(i,r){var a=r&-r;return a=(a&42)!==0?1:ka(a),(a&(i.suspendedLanes|r))!==0?0:a}function ka(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Va(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ni(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:mv(i.type))}function Eu(i,r){var a=ae.p;try{return ae.p=i,r()}finally{ae.p=a}}var li=Math.random().toString(36).slice(2),gt="__reactFiber$"+li,Ht="__reactProps$"+li,ui="__reactContainer$"+li,gs="__reactEvents$"+li,ci="__reactListeners$"+li,Su="__reactHandles$"+li,Ua="__reactResources$"+li,Mi="__reactMarker$"+li;function Cr(i){delete i[gt],delete i[Ht],delete i[gs],delete i[ci],delete i[Su]}function xi(i){var r=i[gt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[ui]||a[gt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=j_(i);i!==null;){if(a=i[gt])return a;i=j_(i)}return r}i=a,a=i.parentNode}return null}function Di(i){if(i=i[gt]||i[ui]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Ir(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Zn(i){var r=i[Ua];return r||(r=i[Ua]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Tt(i){i[Mi]=!0}var yo=new Set,ys={};function ln(i,r){fi(i,r),fi(i+"Capture",r)}function fi(i,r){for(ys[i]=r,i=0;i<r.length;i++)yo.add(r[i])}var od=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),La={},Oa={};function Au(i){return po.call(Oa,i)?!0:po.call(La,i)?!1:od.test(i)?Oa[i]=!0:(La[i]=!0,!1)}function _s(i,r,a){if(Au(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function vs(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Un(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Cu(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ad(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(S){a=""+S,_.call(this,S)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function _o(i){if(!i._valueTracker){var r=Cu(i)?"checked":"value";i._valueTracker=ad(i,r,""+i[r])}}function qa(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=Cu(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function vo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Pi=/[\n"\\]/g;function yt(i){return i.replace(Pi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ts(i,r,a,u,y,_,S,I){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),r!=null?S==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+un(r)):i.value!==""+un(r)&&(i.value=""+un(r)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),r!=null?To(i,S,un(r)):a!=null?To(i,S,un(a)):u!=null&&i.removeAttribute("value"),y==null&&_!=null&&(i.defaultChecked=!!_),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+un(I):i.removeAttribute("name")}function Rr(i,r,a,u,y,_,S,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){_o(i);return}a=a!=null?""+un(a):"",r=r!=null?""+un(r):a,I||r===i.value||(i.value=r),i.defaultValue=r}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),_o(i)}function To(i,r,a){r==="number"&&vo(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function He(i,r,a,u){if(i=i.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=r.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+un(a),r=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function wr(i,r,a){if(r!=null&&(r=""+un(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+un(a):""}function Es(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(ot(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=un(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),_o(i)}function Ln(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var ld=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ba(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||ld.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function Iu(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in r)u=r[y],r.hasOwnProperty(y)&&a[y]!==u&&Ba(i,y,u)}else for(var _ in r)r.hasOwnProperty(_)&&Ba(i,_,r[_])}function Fa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function di(i){return cd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ut(){}var Eo=null;function So(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ki=null,Sn=null;function Ru(i){var r=Di(i);if(r&&(i=r.stateNode)){var a=i[Ht]||null;e:switch(i=r.stateNode,r.type){case"input":if(Ts(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var y=u[Ht]||null;if(!y)throw Error(s(90));Ts(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&qa(u)}break e;case"textarea":wr(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&He(i,!!a.multiple,r,!1)}}}var za=!1;function wu(i,r,a){if(za)return i(r,a);za=!0;try{var u=i(r);return u}finally{if(za=!1,(ki!==null||Sn!==null)&&(Ac(),ki&&(r=ki,i=Sn,Sn=ki=null,Ru(r),i)))for(r=0;r<i.length;r++)Ru(i[r])}}function pn(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Ht]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(jn)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",hi,hi),window.removeEventListener("test",hi,hi)}catch{Ga=!1}var An=null,Ao=null,pi=null;function Ss(){if(pi)return pi;var i,r=Ao,a=r.length,u,y="value"in An?An.value:An.textContent,_=y.length;for(i=0;i<a&&r[i]===y[i];i++);var S=a-i;for(u=1;u<=S&&r[a-u]===y[_-u];u++);return pi=y.slice(i,1<u?1-u:void 0)}function br(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function As(){return!0}function lt(){return!1}function jt(i){function r(a,u,y,_,S){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?As:lt,this.isPropagationStopped=lt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),r}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nr=jt(Vi),Cs=E({},Vi,{view:0,detail:0}),bu=jt(Cs),Is,Co,cn,Mr=E({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cn&&(cn&&i.type==="mousemove"?(Is=i.screenX-cn.screenX,Co=i.screenY-cn.screenY):Co=Is=0,cn=i),Is)},movementY:function(i){return"movementY"in i?i.movementY:Co}}),Nu=jt(Mr),xr=E({},Mr,{dataTransfer:0}),Mu=jt(xr),Ha=E({},Cs,{relatedTarget:0}),Rs=jt(Ha),xu=E({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Io=jt(xu),fd=E({},Vi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Du=jt(fd),Dr=E({},Vi,{data:0}),Ja=jt(Dr),Pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ya={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ka={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ku(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Ka[i])?!!r[i]:!1}function ws(){return ku}var Vu=E({},Cs,{key:function(i){if(i.key){var r=Pu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=br(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ya[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(i){return i.type==="keypress"?br(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?br(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Uu=jt(Vu),Ui=E({},Mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=jt(Ui),Lu=E({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),Ou=jt(Lu),qu=E({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ro=jt(qu),fn=E({},Mr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Bu=jt(fn),Fu=E({},Vi,{newState:0,oldState:0}),bs=jt(Fu),h=[9,13,27,32],T=jn&&"CompositionEvent"in window,C=null;jn&&"documentMode"in document&&(C=document.documentMode);var R=jn&&"TextEvent"in window&&!C,z=jn&&(!T||C&&8<C&&11>=C),W=" ",le=!1;function Qe(i,r){switch(i){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ct(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var De=!1;function Lt(i,r){switch(i){case"compositionend":return Ct(r);case"keypress":return r.which!==32?null:(le=!0,W);case"textInput":return i=r.data,i===W&&le?null:i;default:return null}}function Ot(i,r){if(De)return i==="compositionend"||!T&&Qe(i,r)?(i=Ss(),pi=Ao=An=null,De=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return z&&r.locale!=="ko"?null:r.data;default:return null}}var Ns={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mn(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Ns[i.type]:r==="textarea"}function Pr(i,r,a,u){ki?Sn?Sn.push(u):Sn=[u]:ki=u,r=Mc(r,"onChange"),0<r.length&&(a=new Nr("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var Li=null,Qa=null;function wC(i){q_(i,0)}function zu(i){var r=Ir(i);if(qa(r))return i}function sg(i,r){if(i==="change")return r}var rg=!1;if(jn){var dd;if(jn){var hd="oninput"in document;if(!hd){var og=document.createElement("div");og.setAttribute("oninput","return;"),hd=typeof og.oninput=="function"}dd=hd}else dd=!1;rg=dd&&(!document.documentMode||9<document.documentMode)}function ag(){Li&&(Li.detachEvent("onpropertychange",lg),Qa=Li=null)}function lg(i){if(i.propertyName==="value"&&zu(Qa)){var r=[];Pr(r,Qa,i,So(i)),wu(wC,r)}}function bC(i,r,a){i==="focusin"?(ag(),Li=r,Qa=a,Li.attachEvent("onpropertychange",lg)):i==="focusout"&&ag()}function NC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zu(Qa)}function MC(i,r){if(i==="click")return zu(r)}function xC(i,r){if(i==="input"||i==="change")return zu(r)}function DC(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Cn=typeof Object.is=="function"?Object.is:DC;function Xa(i,r){if(Cn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!po.call(r,y)||!Cn(i[y],r[y]))return!1}return!0}function ug(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function cg(i,r){var a=ug(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ug(a)}}function fg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?fg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function dg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=vo(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=vo(i.document)}return r}function pd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var PC=jn&&"documentMode"in document&&11>=document.documentMode,wo=null,md=null,Wa=null,gd=!1;function hg(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gd||wo==null||wo!==vo(u)||(u=wo,"selectionStart"in u&&pd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wa&&Xa(Wa,u)||(Wa=u,u=Mc(md,"onSelect"),0<u.length&&(r=new Nr("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=wo)))}function kr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var bo={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionrun:kr("Transition","TransitionRun"),transitionstart:kr("Transition","TransitionStart"),transitioncancel:kr("Transition","TransitionCancel"),transitionend:kr("Transition","TransitionEnd")},yd={},pg={};jn&&(pg=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Vr(i){if(yd[i])return yd[i];if(!bo[i])return i;var r=bo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in pg)return yd[i]=r[a];return i}var mg=Vr("animationend"),gg=Vr("animationiteration"),yg=Vr("animationstart"),kC=Vr("transitionrun"),VC=Vr("transitionstart"),UC=Vr("transitioncancel"),_g=Vr("transitionend"),vg=new Map,_d="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_d.push("scrollEnd");function ei(i,r){vg.set(i,r),ln(r,[i])}var Gu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},On=[],No=0,vd=0;function Hu(){for(var i=No,r=vd=No=0;r<i;){var a=On[r];On[r++]=null;var u=On[r];On[r++]=null;var y=On[r];On[r++]=null;var _=On[r];if(On[r++]=null,u!==null&&y!==null){var S=u.pending;S===null?y.next=y:(y.next=S.next,S.next=y),u.pending=y}_!==0&&Tg(a,y,_)}}function Ju(i,r,a,u){On[No++]=i,On[No++]=r,On[No++]=a,On[No++]=u,vd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Td(i,r,a,u){return Ju(i,r,a,u),Yu(i)}function Ur(i,r){return Ju(i,null,null,r),Yu(i)}function Tg(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(y=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,y&&r!==null&&(y=31-an(a),i=_.hiddenUpdates,u=i[y],u===null?i[y]=[r]:u.push(r),r.lane=a|536870912),_):null}function Yu(i){if(50<vl)throw vl=0,Nh=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Mo={};function LC(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(i,r,a,u){return new LC(i,r,a,u)}function Ed(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Oi(i,r){var a=i.alternate;return a===null?(a=In(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Eg(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Ku(i,r,a,u,y,_){var S=0;if(u=i,typeof i=="function")Ed(i)&&(S=1);else if(typeof i=="string")S=zI(i,a,ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=In(31,a,r,y),i.elementType=N,i.lanes=_,i;case G:return Lr(a.children,y,_,r);case $:S=8,y|=24;break;case te:return i=In(12,a,r,y|2),i.elementType=te,i.lanes=_,i;case fe:return i=In(13,a,r,y),i.elementType=fe,i.lanes=_,i;case ce:return i=In(19,a,r,y),i.elementType=ce,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:S=10;break e;case K:S=9;break e;case oe:S=11;break e;case x:S=14;break e;case w:S=16,u=null;break e}S=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=In(S,a,r,y),r.elementType=i,r.type=u,r.lanes=_,r}function Lr(i,r,a,u){return i=In(7,i,u,r),i.lanes=a,i}function Sd(i,r,a){return i=In(6,i,null,r),i.lanes=a,i}function Sg(i){var r=In(18,null,null,0);return r.stateNode=i,r}function Ad(i,r,a){return r=In(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Ag=new WeakMap;function qn(i,r){if(typeof i=="object"&&i!==null){var a=Ag.get(i);return a!==void 0?a:(r={value:i,source:r,stack:yu(r)},Ag.set(i,r),r)}return{value:i,source:r,stack:yu(r)}}var xo=[],Do=0,$u=null,Za=0,Bn=[],Fn=0,Ms=null,mi=1,gi="";function qi(i,r){xo[Do++]=Za,xo[Do++]=$u,$u=i,Za=r}function Cg(i,r,a){Bn[Fn++]=mi,Bn[Fn++]=gi,Bn[Fn++]=Ms,Ms=i;var u=mi;i=gi;var y=32-an(u)-1;u&=~(1<<y),a+=1;var _=32-an(r)+y;if(30<_){var S=y-y%5;_=(u&(1<<S)-1).toString(32),u>>=S,y-=S,mi=1<<32-an(r)+y|a<<y|u,gi=_+i}else mi=1<<_|a<<y|u,gi=i}function Cd(i){i.return!==null&&(qi(i,1),Cg(i,1,0))}function Id(i){for(;i===$u;)$u=xo[--Do],xo[Do]=null,Za=xo[--Do],xo[Do]=null;for(;i===Ms;)Ms=Bn[--Fn],Bn[Fn]=null,gi=Bn[--Fn],Bn[Fn]=null,mi=Bn[--Fn],Bn[Fn]=null}function Ig(i,r){Bn[Fn++]=mi,Bn[Fn++]=gi,Bn[Fn++]=Ms,mi=r.id,gi=r.overflow,Ms=i}var Jt=null,ut=null,Be=!1,xs=null,zn=!1,Rd=Error(s(519));function Ds(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ja(qn(r,i)),Rd}function Rg(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[gt]=i,r[Ht]=u,a){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(a=0;a<El.length;a++)Ve(El[a],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Ve("invalid",r),Rr(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ve("invalid",r);break;case"textarea":Ve("invalid",r),Es(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||G_(r.textContent,a)?(u.popover!=null&&(Ve("beforetoggle",r),Ve("toggle",r)),u.onScroll!=null&&Ve("scroll",r),u.onScrollEnd!=null&&Ve("scrollend",r),u.onClick!=null&&(r.onclick=Ut),r=!0):r=!1,r||Ds(i,!0)}function wg(i){for(Jt=i.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Jt=Jt.return}}function Po(i){if(i!==Jt)return!1;if(!Be)return wg(i),Be=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Hh(i.type,i.memoizedProps)),a=!a),a&&ut&&Ds(i),wg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=Z_(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=Z_(i)}else r===27?(r=ut,Ys(i.type)?(i=Qh,Qh=null,ut=i):ut=r):ut=Jt?Hn(i.stateNode.nextSibling):null;return!0}function Or(){ut=Jt=null,Be=!1}function wd(){var i=xs;return i!==null&&(vn===null?vn=i:vn.push.apply(vn,i),xs=null),i}function ja(i){xs===null?xs=[i]:xs.push(i)}var bd=P(null),qr=null,Bi=null;function Ps(i,r,a){ie(bd,r._currentValue),r._currentValue=a}function Fi(i){i._currentValue=bd.current,Q(bd)}function Nd(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function Md(i,r,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var _=y.dependencies;if(_!==null){var S=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var V=0;V<r.length;V++)if(I.context===r[V]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Nd(_.return,a,i),u||(S=null);break e}_=I.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(s(341));S.lanes|=a,_=S.alternate,_!==null&&(_.lanes|=a),Nd(S,a,i),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function ko(i,r,a,u){i=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var I=y.type;Cn(y.pendingProps.value,S.value)||(i!==null?i.push(I):i=[I])}}else if(y===xe.current){if(S=y.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Rl):i=[Rl])}y=y.return}i!==null&&Md(r,i,a,u),r.flags|=262144}function Qu(i){for(i=i.firstContext;i!==null;){if(!Cn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Br(i){qr=i,Bi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yt(i){return bg(qr,i)}function Xu(i,r){return qr===null&&Br(i),bg(i,r)}function bg(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Bi===null){if(i===null)throw Error(s(308));Bi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Bi=Bi.next=r;return a}var OC=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},qC=n.unstable_scheduleCallback,BC=n.unstable_NormalPriority,It={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xd(){return{controller:new OC,data:new Map,refCount:0}}function el(i){i.refCount--,i.refCount===0&&qC(BC,function(){i.controller.abort()})}var tl=null,Dd=0,Vo=0,Uo=null;function FC(i,r){if(tl===null){var a=tl=[];Dd=0,Vo=Vh(),Uo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Dd++,r.then(Ng,Ng),r}function Ng(){if(--Dd===0&&tl!==null){Uo!==null&&(Uo.status="fulfilled");var i=tl;tl=null,Vo=0,Uo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function zC(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var Mg=F.S;F.S=function(i,r){h_=zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&FC(i,r),Mg!==null&&Mg(i,r)};var Fr=P(null);function Pd(){var i=Fr.current;return i!==null?i:it.pooledCache}function Wu(i,r){r===null?ie(Fr,Fr.current):ie(Fr,r.pool)}function xg(){var i=Pd();return i===null?null:{parent:It._currentValue,pool:i}}var Lo=Error(s(460)),kd=Error(s(474)),Zu=Error(s(542)),ju={then:function(){}};function Dg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Pg(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(Ut,Ut),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Vg(i),i;default:if(typeof r.status=="string")r.then(Ut,Ut);else{if(i=it,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=u}},function(u){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Vg(i),i}throw Gr=r,Lo}}function zr(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Gr=a,Lo):a}}var Gr=null;function kg(){if(Gr===null)throw Error(s(459));var i=Gr;return Gr=null,i}function Vg(i){if(i===Lo||i===Zu)throw Error(s(483))}var Oo=null,nl=0;function ec(i){var r=nl;return nl+=1,Oo===null&&(Oo=[]),Pg(Oo,i,r)}function il(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function tc(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Ug(i){function r(B,L){if(i){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!i)return null;for(;L!==null;)r(B,L),L=L.sibling;return null}function u(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function y(B,L){return B=Oi(B,L),B.index=0,B.sibling=null,B}function _(B,L,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function S(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function I(B,L,H,ee){return L===null||L.tag!==6?(L=Sd(H,B.mode,ee),L.return=B,L):(L=y(L,H),L.return=B,L)}function V(B,L,H,ee){var ve=H.type;return ve===G?j(B,L,H.props.children,ee,H.key):L!==null&&(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&zr(ve)===L.type)?(L=y(L,H.props),il(L,H),L.return=B,L):(L=Ku(H.type,H.key,H.props,null,B.mode,ee),il(L,H),L.return=B,L)}function J(B,L,H,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Ad(H,B.mode,ee),L.return=B,L):(L=y(L,H.children||[]),L.return=B,L)}function j(B,L,H,ee,ve){return L===null||L.tag!==7?(L=Lr(H,B.mode,ee,ve),L.return=B,L):(L=y(L,H),L.return=B,L)}function ne(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Sd(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return H=Ku(L.type,L.key,L.props,null,B.mode,H),il(H,L),H.return=B,H;case q:return L=Ad(L,B.mode,H),L.return=B,L;case w:return L=zr(L),ne(B,L,H)}if(ot(L)||O(L))return L=Lr(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return ne(B,ec(L),H);if(L.$$typeof===Z)return ne(B,Xu(B,L),H);tc(B,L)}return null}function Y(B,L,H,ee){var ve=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ve!==null?null:I(B,L,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===ve?V(B,L,H,ee):null;case q:return H.key===ve?J(B,L,H,ee):null;case w:return H=zr(H),Y(B,L,H,ee)}if(ot(H)||O(H))return ve!==null?null:j(B,L,H,ee,null);if(typeof H.then=="function")return Y(B,L,ec(H),ee);if(H.$$typeof===Z)return Y(B,L,Xu(B,H),ee);tc(B,H)}return null}function X(B,L,H,ee,ve){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(H)||null,I(L,B,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return B=B.get(ee.key===null?H:ee.key)||null,V(L,B,ee,ve);case q:return B=B.get(ee.key===null?H:ee.key)||null,J(L,B,ee,ve);case w:return ee=zr(ee),X(B,L,H,ee,ve)}if(ot(ee)||O(ee))return B=B.get(H)||null,j(L,B,ee,ve,null);if(typeof ee.then=="function")return X(B,L,H,ec(ee),ve);if(ee.$$typeof===Z)return X(B,L,H,Xu(L,ee),ve);tc(L,ee)}return null}function he(B,L,H,ee){for(var ve=null,Je=null,me=L,Me=L=0,Le=null;me!==null&&Me<H.length;Me++){me.index>Me?(Le=me,me=null):Le=me.sibling;var Ye=Y(B,me,H[Me],ee);if(Ye===null){me===null&&(me=Le);break}i&&me&&Ye.alternate===null&&r(B,me),L=_(Ye,L,Me),Je===null?ve=Ye:Je.sibling=Ye,Je=Ye,me=Le}if(Me===H.length)return a(B,me),Be&&qi(B,Me),ve;if(me===null){for(;Me<H.length;Me++)me=ne(B,H[Me],ee),me!==null&&(L=_(me,L,Me),Je===null?ve=me:Je.sibling=me,Je=me);return Be&&qi(B,Me),ve}for(me=u(me);Me<H.length;Me++)Le=X(me,B,Me,H[Me],ee),Le!==null&&(i&&Le.alternate!==null&&me.delete(Le.key===null?Me:Le.key),L=_(Le,L,Me),Je===null?ve=Le:Je.sibling=Le,Je=Le);return i&&me.forEach(function(Ws){return r(B,Ws)}),Be&&qi(B,Me),ve}function Ee(B,L,H,ee){if(H==null)throw Error(s(151));for(var ve=null,Je=null,me=L,Me=L=0,Le=null,Ye=H.next();me!==null&&!Ye.done;Me++,Ye=H.next()){me.index>Me?(Le=me,me=null):Le=me.sibling;var Ws=Y(B,me,Ye.value,ee);if(Ws===null){me===null&&(me=Le);break}i&&me&&Ws.alternate===null&&r(B,me),L=_(Ws,L,Me),Je===null?ve=Ws:Je.sibling=Ws,Je=Ws,me=Le}if(Ye.done)return a(B,me),Be&&qi(B,Me),ve;if(me===null){for(;!Ye.done;Me++,Ye=H.next())Ye=ne(B,Ye.value,ee),Ye!==null&&(L=_(Ye,L,Me),Je===null?ve=Ye:Je.sibling=Ye,Je=Ye);return Be&&qi(B,Me),ve}for(me=u(me);!Ye.done;Me++,Ye=H.next())Ye=X(me,B,Me,Ye.value,ee),Ye!==null&&(i&&Ye.alternate!==null&&me.delete(Ye.key===null?Me:Ye.key),L=_(Ye,L,Me),Je===null?ve=Ye:Je.sibling=Ye,Je=Ye);return i&&me.forEach(function(jI){return r(B,jI)}),Be&&qi(B,Me),ve}function nt(B,L,H,ee){if(typeof H=="object"&&H!==null&&H.type===G&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:e:{for(var ve=H.key;L!==null;){if(L.key===ve){if(ve=H.type,ve===G){if(L.tag===7){a(B,L.sibling),ee=y(L,H.props.children),ee.return=B,B=ee;break e}}else if(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&zr(ve)===L.type){a(B,L.sibling),ee=y(L,H.props),il(ee,H),ee.return=B,B=ee;break e}a(B,L);break}else r(B,L);L=L.sibling}H.type===G?(ee=Lr(H.props.children,B.mode,ee,H.key),ee.return=B,B=ee):(ee=Ku(H.type,H.key,H.props,null,B.mode,ee),il(ee,H),ee.return=B,B=ee)}return S(B);case q:e:{for(ve=H.key;L!==null;){if(L.key===ve)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),ee=y(L,H.children||[]),ee.return=B,B=ee;break e}else{a(B,L);break}else r(B,L);L=L.sibling}ee=Ad(H,B.mode,ee),ee.return=B,B=ee}return S(B);case w:return H=zr(H),nt(B,L,H,ee)}if(ot(H))return he(B,L,H,ee);if(O(H)){if(ve=O(H),typeof ve!="function")throw Error(s(150));return H=ve.call(H),Ee(B,L,H,ee)}if(typeof H.then=="function")return nt(B,L,ec(H),ee);if(H.$$typeof===Z)return nt(B,L,Xu(B,H),ee);tc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),ee=y(L,H),ee.return=B,B=ee):(a(B,L),ee=Sd(H,B.mode,ee),ee.return=B,B=ee),S(B)):a(B,L)}return function(B,L,H,ee){try{nl=0;var ve=nt(B,L,H,ee);return Oo=null,ve}catch(me){if(me===Lo||me===Zu)throw me;var Je=In(29,me,null,B.mode);return Je.lanes=ee,Je.return=B,Je}finally{}}}var Hr=Ug(!0),Lg=Ug(!1),ks=!1;function Vd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ud(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Vs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Us(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var y=u.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),u.pending=r,r=Yu(i),Tg(i,null,a),r}return Ju(i,u,r,a),Yu(i)}function sl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,ps(i,a)}}function Ld(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=S:_=_.next=S,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Od=!1;function rl(){if(Od){var i=Uo;if(i!==null)throw i}}function ol(i,r,a,u){Od=!1;var y=i.updateQueue;ks=!1;var _=y.firstBaseUpdate,S=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var V=I,J=V.next;V.next=null,S===null?_=J:S.next=J,S=V;var j=i.alternate;j!==null&&(j=j.updateQueue,I=j.lastBaseUpdate,I!==S&&(I===null?j.firstBaseUpdate=J:I.next=J,j.lastBaseUpdate=V))}if(_!==null){var ne=y.baseState;S=0,j=J=V=null,I=_;do{var Y=I.lane&-536870913,X=Y!==I.lane;if(X?(Ue&Y)===Y:(u&Y)===Y){Y!==0&&Y===Vo&&(Od=!0),j!==null&&(j=j.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var he=i,Ee=I;Y=r;var nt=a;switch(Ee.tag){case 1:if(he=Ee.payload,typeof he=="function"){ne=he.call(nt,ne,Y);break e}ne=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ee.payload,Y=typeof he=="function"?he.call(nt,ne,Y):he,Y==null)break e;ne=E({},ne,Y);break e;case 2:ks=!0}}Y=I.callback,Y!==null&&(i.flags|=64,X&&(i.flags|=8192),X=y.callbacks,X===null?y.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},j===null?(J=j=X,V=ne):j=j.next=X,S|=Y;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;X=I,I=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);j===null&&(V=ne),y.baseState=V,y.firstBaseUpdate=J,y.lastBaseUpdate=j,_===null&&(y.shared.lanes=0),Fs|=S,i.lanes=S,i.memoizedState=ne}}function Og(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function qg(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Og(a[i],r)}var qo=P(null),nc=P(0);function Bg(i,r){i=Xi,ie(nc,i),ie(qo,r),Xi=i|r.baseLanes}function qd(){ie(nc,Xi),ie(qo,qo.current)}function Bd(){Xi=nc.current,Q(qo),Q(nc)}var Rn=P(null),Gn=null;function Ls(i){var r=i.alternate;ie(Et,Et.current&1),ie(Rn,i),Gn===null&&(r===null||qo.current!==null||r.memoizedState!==null)&&(Gn=i)}function Fd(i){ie(Et,Et.current),ie(Rn,i),Gn===null&&(Gn=i)}function Fg(i){i.tag===22?(ie(Et,Et.current),ie(Rn,i),Gn===null&&(Gn=i)):Os()}function Os(){ie(Et,Et.current),ie(Rn,Rn.current)}function wn(i){Q(Rn),Gn===i&&(Gn=null),Q(Et)}var Et=P(0);function ic(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Kh(a)||$h(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var zi=0,be=null,et=null,Rt=null,sc=!1,Bo=!1,Jr=!1,rc=0,al=0,Fo=null,GC=0;function _t(){throw Error(s(321))}function zd(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Cn(i[a],r[a]))return!1;return!0}function Gd(i,r,a,u,y,_){return zi=_,be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,F.H=i===null||i.memoizedState===null?Cy:sh,Jr=!1,_=a(u,y),Jr=!1,Bo&&(_=Gg(r,a,u,y)),zg(i),_}function zg(i){F.H=cl;var r=et!==null&&et.next!==null;if(zi=0,Rt=et=be=null,sc=!1,al=0,Fo=null,r)throw Error(s(300));i===null||wt||(i=i.dependencies,i!==null&&Qu(i)&&(wt=!0))}function Gg(i,r,a,u){be=i;var y=0;do{if(Bo&&(Fo=null),al=0,Bo=!1,25<=y)throw Error(s(301));if(y+=1,Rt=et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}F.H=Iy,_=r(a,u)}while(Bo);return _}function HC(){var i=F.H,r=i.useState()[0];return r=typeof r.then=="function"?ll(r):r,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(be.flags|=1024),r}function Hd(){var i=rc!==0;return rc=0,i}function Jd(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Yd(i){if(sc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}sc=!1}zi=0,Rt=et=be=null,Bo=!1,al=rc=0,Fo=null}function dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?be.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function St(){if(et===null){var i=be.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var r=Rt===null?be.memoizedState:Rt.next;if(r!==null)Rt=r,et=i;else{if(i===null)throw be.alternate===null?Error(s(467)):Error(s(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Rt===null?be.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(i){var r=al;return al+=1,Fo===null&&(Fo=[]),i=Pg(Fo,i,r),r=be,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,F.H=r===null||r.memoizedState===null?Cy:sh),i}function ac(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ll(i);if(i.$$typeof===Z)return Yt(i)}throw Error(s(438,String(i)))}function Kd(i){var r=null,a=be.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=be.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=oc(),be.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=D;return r.index++,a}function Gi(i,r){return typeof r=="function"?r(i):r}function lc(i){var r=St();return $d(r,et,i)}function $d(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,_=u.pending;if(_!==null){if(y!==null){var S=y.next;y.next=_.next,_.next=S}r.baseQueue=y=_,u.pending=null}if(_=i.baseState,y===null)i.memoizedState=_;else{r=y.next;var I=S=null,V=null,J=r,j=!1;do{var ne=J.lane&-536870913;if(ne!==J.lane?(Ue&ne)===ne:(zi&ne)===ne){var Y=J.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ne===Vo&&(j=!0);else if((zi&Y)===Y){J=J.next,Y===Vo&&(j=!0);continue}else ne={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(I=V=ne,S=_):V=V.next=ne,be.lanes|=Y,Fs|=Y;ne=J.action,Jr&&a(_,ne),_=J.hasEagerState?J.eagerState:a(_,ne)}else Y={lane:ne,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(I=V=Y,S=_):V=V.next=Y,be.lanes|=ne,Fs|=ne;J=J.next}while(J!==null&&J!==r);if(V===null?S=_:V.next=I,!Cn(_,i.memoizedState)&&(wt=!0,j&&(a=Uo,a!==null)))throw a;i.memoizedState=_,i.baseState=S,i.baseQueue=V,u.lastRenderedState=_}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Qd(i){var r=St(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var S=y=y.next;do _=i(_,S.action),S=S.next;while(S!==y);Cn(_,r.memoizedState)||(wt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,u]}function Hg(i,r,a){var u=be,y=St(),_=Be;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var S=!Cn((et||y).memoizedState,a);if(S&&(y.memoizedState=a,wt=!0),y=y.queue,Zd(Kg.bind(null,u,y,i),[i]),y.getSnapshot!==r||S||Rt!==null&&Rt.memoizedState.tag&1){if(u.flags|=2048,zo(9,{destroy:void 0},Yg.bind(null,u,y,a,r),null),it===null)throw Error(s(349));_||(zi&127)!==0||Jg(u,r,a)}return a}function Jg(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=be.updateQueue,r===null?(r=oc(),be.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Yg(i,r,a,u){r.value=a,r.getSnapshot=u,$g(r)&&Qg(i)}function Kg(i,r,a){return a(function(){$g(r)&&Qg(i)})}function $g(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Cn(i,a)}catch{return!0}}function Qg(i){var r=Ur(i,2);r!==null&&Tn(r,i,2)}function Xd(i){var r=dn();if(typeof i=="function"){var a=i;if(i=a(),Jr){kn(!0);try{a()}finally{kn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:i},r}function Xg(i,r,a,u){return i.baseState=a,$d(i,et,typeof u=="function"?u:Gi)}function JC(i,r,a,u,y){if(fc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};F.T!==null?a(!0):_.isTransition=!1,u(_),a=r.pending,a===null?(_.next=r.pending=_,Wg(r,_)):(_.next=a.next,r.pending=a.next=_)}}function Wg(i,r){var a=r.action,u=r.payload,y=i.state;if(r.isTransition){var _=F.T,S={};F.T=S;try{var I=a(y,u),V=F.S;V!==null&&V(S,I),Zg(i,r,I)}catch(J){Wd(i,r,J)}finally{_!==null&&S.types!==null&&(_.types=S.types),F.T=_}}else try{_=a(y,u),Zg(i,r,_)}catch(J){Wd(i,r,J)}}function Zg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){jg(i,r,u)},function(u){return Wd(i,r,u)}):jg(i,r,a)}function jg(i,r,a){r.status="fulfilled",r.value=a,ey(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,Wg(i,a)))}function Wd(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,ey(r),r=r.next;while(r!==u)}i.action=null}function ey(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ty(i,r){return r}function ny(i,r){if(Be){var a=it.formState;if(a!==null){e:{var u=be;if(Be){if(ut){t:{for(var y=ut,_=zn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Hn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ut=Hn(y.nextSibling),u=y.data==="F!";break e}}Ds(u)}u=!1}u&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ty,lastRenderedState:r},a.queue=u,a=Ey.bind(null,be,u),u.dispatch=a,u=Xd(!1),_=ih.bind(null,be,!1,u.queue),u=dn(),y={state:r,dispatch:null,action:i,pending:null},u.queue=y,a=JC.bind(null,be,y,_,a),y.dispatch=a,u.memoizedState=i,[r,a,!1]}function iy(i){var r=St();return sy(r,et,i)}function sy(i,r,a){if(r=$d(i,r,ty)[0],i=lc(Gi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=ll(r)}catch(S){throw S===Lo?Zu:S}else u=r;r=St();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(be.flags|=2048,zo(9,{destroy:void 0},YC.bind(null,y,a),null)),[u,_,i]}function YC(i,r){i.action=r}function ry(i){var r=St(),a=et;if(a!==null)return sy(r,a,i);St(),r=r.memoizedState,a=St();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function zo(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=be.updateQueue,r===null&&(r=oc(),be.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function oy(){return St().memoizedState}function uc(i,r,a,u){var y=dn();be.flags|=i,y.memoizedState=zo(1|r,{destroy:void 0},a,u===void 0?null:u)}function cc(i,r,a,u){var y=St();u=u===void 0?null:u;var _=y.memoizedState.inst;et!==null&&u!==null&&zd(u,et.memoizedState.deps)?y.memoizedState=zo(r,_,a,u):(be.flags|=i,y.memoizedState=zo(1|r,_,a,u))}function ay(i,r){uc(8390656,8,i,r)}function Zd(i,r){cc(2048,8,i,r)}function KC(i){be.flags|=4;var r=be.updateQueue;if(r===null)r=oc(),be.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function ly(i){var r=St().memoizedState;return KC({ref:r,nextImpl:i}),function(){if(($e&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function uy(i,r){return cc(4,2,i,r)}function cy(i,r){return cc(4,4,i,r)}function fy(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function dy(i,r,a){a=a!=null?a.concat([i]):null,cc(4,4,fy.bind(null,r,i),a)}function jd(){}function hy(i,r){var a=St();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&zd(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function py(i,r){var a=St();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&zd(r,u[1]))return u[0];if(u=i(),Jr){kn(!0);try{i()}finally{kn(!1)}}return a.memoizedState=[u,r],u}function eh(i,r,a){return a===void 0||(zi&1073741824)!==0&&(Ue&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=m_(),be.lanes|=i,Fs|=i,a)}function my(i,r,a,u){return Cn(a,r)?a:qo.current!==null?(i=eh(i,a,u),Cn(i,r)||(wt=!0),i):(zi&42)===0||(zi&1073741824)!==0&&(Ue&261930)===0?(wt=!0,i.memoizedState=a):(i=m_(),be.lanes|=i,Fs|=i,r)}function gy(i,r,a,u,y){var _=ae.p;ae.p=_!==0&&8>_?_:8;var S=F.T,I={};F.T=I,ih(i,!1,r,a);try{var V=y(),J=F.S;if(J!==null&&J(I,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var j=zC(V,u);ul(i,r,j,Mn(i))}else ul(i,r,u,Mn(i))}catch(ne){ul(i,r,{then:function(){},status:"rejected",reason:ne},Mn())}finally{ae.p=_,S!==null&&I.types!==null&&(S.types=I.types),F.T=S}}function $C(){}function th(i,r,a,u){if(i.tag!==5)throw Error(s(476));var y=yy(i).queue;gy(i,y,r,ge,a===null?$C:function(){return _y(i),a(u)})}function yy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:ge},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function _y(i){var r=yy(i);r.next===null&&(r=i.alternate.memoizedState),ul(i,r.next.queue,{},Mn())}function nh(){return Yt(Rl)}function vy(){return St().memoizedState}function Ty(){return St().memoizedState}function QC(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Mn();i=Vs(a);var u=Us(r,i,a);u!==null&&(Tn(u,r,a),sl(u,r,a)),r={cache:xd()},i.payload=r;return}r=r.return}}function XC(i,r,a){var u=Mn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fc(i)?Sy(r,a):(a=Td(i,r,a,u),a!==null&&(Tn(a,i,u),Ay(a,r,u)))}function Ey(i,r,a){var u=Mn();ul(i,r,a,u)}function ul(i,r,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fc(i))Sy(r,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var S=r.lastRenderedState,I=_(S,a);if(y.hasEagerState=!0,y.eagerState=I,Cn(I,S))return Ju(i,r,y,0),it===null&&Hu(),!1}catch{}finally{}if(a=Td(i,r,y,u),a!==null)return Tn(a,i,u),Ay(a,r,u),!0}return!1}function ih(i,r,a,u){if(u={lane:2,revertLane:Vh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},fc(i)){if(r)throw Error(s(479))}else r=Td(i,a,u,2),r!==null&&Tn(r,i,2)}function fc(i){var r=i.alternate;return i===be||r!==null&&r===be}function Sy(i,r){Bo=sc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Ay(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,ps(i,a)}}var cl={readContext:Yt,use:ac,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};cl.useEffectEvent=_t;var Cy={readContext:Yt,use:ac,useCallback:function(i,r){return dn().memoizedState=[i,r===void 0?null:r],i},useContext:Yt,useEffect:ay,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,uc(4194308,4,fy.bind(null,r,i),a)},useLayoutEffect:function(i,r){return uc(4194308,4,i,r)},useInsertionEffect:function(i,r){uc(4,2,i,r)},useMemo:function(i,r){var a=dn();r=r===void 0?null:r;var u=i();if(Jr){kn(!0);try{i()}finally{kn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=dn();if(a!==void 0){var y=a(r);if(Jr){kn(!0);try{a(r)}finally{kn(!1)}}}else y=r;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=XC.bind(null,be,i),[u.memoizedState,i]},useRef:function(i){var r=dn();return i={current:i},r.memoizedState=i},useState:function(i){i=Xd(i);var r=i.queue,a=Ey.bind(null,be,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:jd,useDeferredValue:function(i,r){var a=dn();return eh(a,i,r)},useTransition:function(){var i=Xd(!1);return i=gy.bind(null,be,i.queue,!0,!1),dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=be,y=dn();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),it===null)throw Error(s(349));(Ue&127)!==0||Jg(u,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,ay(Kg.bind(null,u,_,i),[i]),u.flags|=2048,zo(9,{destroy:void 0},Yg.bind(null,u,_,a,r),null),a},useId:function(){var i=dn(),r=it.identifierPrefix;if(Be){var a=gi,u=mi;a=(u&~(1<<32-an(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=rc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=GC++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:nh,useFormState:ny,useActionState:ny,useOptimistic:function(i){var r=dn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ih.bind(null,be,!0,a),a.dispatch=r,[i,r]},useMemoCache:Kd,useCacheRefresh:function(){return dn().memoizedState=QC.bind(null,be)},useEffectEvent:function(i){var r=dn(),a={impl:i};return r.memoizedState=a,function(){if(($e&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},sh={readContext:Yt,use:ac,useCallback:hy,useContext:Yt,useEffect:Zd,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:lc,useRef:oy,useState:function(){return lc(Gi)},useDebugValue:jd,useDeferredValue:function(i,r){var a=St();return my(a,et.memoizedState,i,r)},useTransition:function(){var i=lc(Gi)[0],r=St().memoizedState;return[typeof i=="boolean"?i:ll(i),r]},useSyncExternalStore:Hg,useId:vy,useHostTransitionStatus:nh,useFormState:iy,useActionState:iy,useOptimistic:function(i,r){var a=St();return Xg(a,et,i,r)},useMemoCache:Kd,useCacheRefresh:Ty};sh.useEffectEvent=ly;var Iy={readContext:Yt,use:ac,useCallback:hy,useContext:Yt,useEffect:Zd,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Qd,useRef:oy,useState:function(){return Qd(Gi)},useDebugValue:jd,useDeferredValue:function(i,r){var a=St();return et===null?eh(a,i,r):my(a,et.memoizedState,i,r)},useTransition:function(){var i=Qd(Gi)[0],r=St().memoizedState;return[typeof i=="boolean"?i:ll(i),r]},useSyncExternalStore:Hg,useId:vy,useHostTransitionStatus:nh,useFormState:ry,useActionState:ry,useOptimistic:function(i,r){var a=St();return et!==null?Xg(a,et,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Kd,useCacheRefresh:Ty};Iy.useEffectEvent=ly;function rh(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var oh={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Mn(),y=Vs(u);y.payload=r,a!=null&&(y.callback=a),r=Us(i,y,u),r!==null&&(Tn(r,i,u),sl(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Mn(),y=Vs(u);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Us(i,y,u),r!==null&&(Tn(r,i,u),sl(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Mn(),u=Vs(a);u.tag=2,r!=null&&(u.callback=r),r=Us(i,u,a),r!==null&&(Tn(r,i,a),sl(r,i,a))}};function Ry(i,r,a,u,y,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,S):r.prototype&&r.prototype.isPureReactComponent?!Xa(a,u)||!Xa(y,_):!0}function wy(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&oh.enqueueReplaceState(r,r.state,null)}function Yr(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=E({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function by(i){Gu(i)}function Ny(i){console.error(i)}function My(i){Gu(i)}function dc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function xy(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ah(i,r,a){return a=Vs(a),a.tag=3,a.payload={element:null},a.callback=function(){dc(i,r)},a}function Dy(i){return i=Vs(i),i.tag=3,i}function Py(i,r,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=u.value;i.payload=function(){return y(_)},i.callback=function(){xy(r,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){xy(r,a,u),typeof y!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function WC(i,r,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&ko(r,a,y,!0),a=Rn.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?Cc():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===ju?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Dh(i,u,y)),!1;case 22:return a.flags|=65536,u===ju?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Dh(i,u,y)),!1}throw Error(s(435,a.tag))}return Dh(i,u,y),Cc(),!1}if(Be)return r=Rn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,u!==Rd&&(i=Error(s(422),{cause:u}),ja(qn(i,a)))):(u!==Rd&&(r=Error(s(423),{cause:u}),ja(qn(r,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=qn(u,a),y=ah(i.stateNode,u,y),Ld(i,y),vt!==4&&(vt=2)),!1;var _=Error(s(520),{cause:u});if(_=qn(_,a),_l===null?_l=[_]:_l.push(_),vt!==4&&(vt=2),r===null)return!0;u=qn(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=ah(a.stateNode,u,i),Ld(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(zs===null||!zs.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Dy(y),Py(y,i,a,u),Ld(a,y),!1}a=a.return}while(a!==null);return!1}var lh=Error(s(461)),wt=!1;function Kt(i,r,a,u){r.child=i===null?Lg(r,null,a,u):Hr(r,i.child,a,u)}function ky(i,r,a,u,y){a=a.render;var _=r.ref;if("ref"in u){var S={};for(var I in u)I!=="ref"&&(S[I]=u[I])}else S=u;return Br(r),u=Gd(i,r,a,S,_,y),I=Hd(),i!==null&&!wt?(Jd(i,r,y),Hi(i,r,y)):(Be&&I&&Cd(r),r.flags|=1,Kt(i,r,u,y),r.child)}function Vy(i,r,a,u,y){if(i===null){var _=a.type;return typeof _=="function"&&!Ed(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,Uy(i,r,_,u,y)):(i=Ku(a.type,null,u,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!gh(i,y)){var S=_.memoizedProps;if(a=a.compare,a=a!==null?a:Xa,a(S,u)&&i.ref===r.ref)return Hi(i,r,y)}return r.flags|=1,i=Oi(_,u),i.ref=r.ref,i.return=r,r.child=i}function Uy(i,r,a,u,y){if(i!==null){var _=i.memoizedProps;if(Xa(_,u)&&i.ref===r.ref)if(wt=!1,r.pendingProps=u=_,gh(i,y))(i.flags&131072)!==0&&(wt=!0);else return r.lanes=i.lanes,Hi(i,r,y)}return uh(i,r,a,u,y)}function Ly(i,r,a,u){var y=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=r.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~_}else u=0,r.child=null;return Oy(i,r,_,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Wu(r,_!==null?_.cachePool:null),_!==null?Bg(r,_):qd(),Fg(r);else return u=r.lanes=536870912,Oy(i,r,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Wu(r,_.cachePool),Bg(r,_),Os(),r.memoizedState=null):(i!==null&&Wu(r,null),qd(),Os());return Kt(i,r,y,a),r.child}function fl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Oy(i,r,a,u,y){var _=Pd();return _=_===null?null:{parent:It._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&Wu(r,null),qd(),Fg(r),i!==null&&ko(i,r,u,!0),r.childLanes=y,null}function hc(i,r){return r=mc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function qy(i,r,a){return Hr(r,i.child,null,a),i=hc(r,r.pendingProps),i.flags|=2,wn(r),r.memoizedState=null,i}function ZC(i,r,a){var u=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Be){if(u.mode==="hidden")return i=hc(r,u),r.lanes=536870912,fl(null,i);if(Fd(r),(i=ut)?(i=W_(i,zn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:mi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},a=Sg(i),a.return=r,r.child=a,Jt=r,ut=null)):i=null,i===null)throw Ds(r);return r.lanes=536870912,null}return hc(r,u)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(Fd(r),y)if(r.flags&256)r.flags&=-257,r=qy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(wt||ko(i,r,a,!1),y=(a&i.childLanes)!==0,wt||y){if(u=it,u!==null&&(S=ms(u,a),S!==0&&S!==_.retryLane))throw _.retryLane=S,Ur(i,S),Tn(u,i,S),lh;Cc(),r=qy(i,r,a)}else i=_.treeContext,ut=Hn(S.nextSibling),Jt=r,Be=!0,xs=null,zn=!1,i!==null&&Ig(r,i),r=hc(r,u),r.flags|=4096;return r}return i=Oi(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function pc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function uh(i,r,a,u,y){return Br(r),a=Gd(i,r,a,u,void 0,y),u=Hd(),i!==null&&!wt?(Jd(i,r,y),Hi(i,r,y)):(Be&&u&&Cd(r),r.flags|=1,Kt(i,r,a,y),r.child)}function By(i,r,a,u,y,_){return Br(r),r.updateQueue=null,a=Gg(r,u,a,y),zg(i),u=Hd(),i!==null&&!wt?(Jd(i,r,_),Hi(i,r,_)):(Be&&u&&Cd(r),r.flags|=1,Kt(i,r,a,_),r.child)}function Fy(i,r,a,u,y){if(Br(r),r.stateNode===null){var _=Mo,S=a.contextType;typeof S=="object"&&S!==null&&(_=Yt(S)),_=new a(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=oh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},Vd(r),S=a.contextType,_.context=typeof S=="object"&&S!==null?Yt(S):Mo,_.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(rh(r,a,S,u),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&oh.enqueueReplaceState(_,_.state,null),ol(r,u,_,y),rl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var I=r.memoizedProps,V=Yr(a,I);_.props=V;var J=_.context,j=a.contextType;S=Mo,typeof j=="object"&&j!==null&&(S=Yt(j));var ne=a.getDerivedStateFromProps;j=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||J!==S)&&wy(r,_,u,S),ks=!1;var Y=r.memoizedState;_.state=Y,ol(r,u,_,y),rl(),J=r.memoizedState,I||Y!==J||ks?(typeof ne=="function"&&(rh(r,a,ne,u),J=r.memoizedState),(V=ks||Ry(r,a,V,u,Y,J,S))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=J),_.props=u,_.state=J,_.context=S,u=V):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Ud(i,r),S=r.memoizedProps,j=Yr(a,S),_.props=j,ne=r.pendingProps,Y=_.context,J=a.contextType,V=Mo,typeof J=="object"&&J!==null&&(V=Yt(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==ne||Y!==V)&&wy(r,_,u,V),ks=!1,Y=r.memoizedState,_.state=Y,ol(r,u,_,y),rl();var X=r.memoizedState;S!==ne||Y!==X||ks||i!==null&&i.dependencies!==null&&Qu(i.dependencies)?(typeof I=="function"&&(rh(r,a,I,u),X=r.memoizedState),(j=ks||Ry(r,a,j,u,Y,X,V)||i!==null&&i.dependencies!==null&&Qu(i.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,X,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,X,V)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=X),_.props=u,_.state=X,_.context=V,u=j):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,pc(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=Hr(r,i.child,null,y),r.child=Hr(r,null,a,y)):Kt(i,r,a,y),r.memoizedState=_.state,i=r.child):i=Hi(i,r,y),i}function zy(i,r,a,u){return Or(),r.flags|=256,Kt(i,r,a,u),r.child}var ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fh(i){return{baseLanes:i,cachePool:xg()}}function dh(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Nn),i}function Gy(i,r,a){var u=r.pendingProps,y=!1,_=(r.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(Et.current&2)!==0),S&&(y=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,i===null){if(Be){if(y?Ls(r):Os(),(i=ut)?(i=W_(i,zn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:mi,overflow:gi}:null,retryLane:536870912,hydrationErrors:null},a=Sg(i),a.return=r,r.child=a,Jt=r,ut=null)):i=null,i===null)throw Ds(r);return $h(i)?r.lanes=32:r.lanes=536870912,null}var I=u.children;return u=u.fallback,y?(Os(),y=r.mode,I=mc({mode:"hidden",children:I},y),u=Lr(u,y,a,null),I.return=r,u.return=r,I.sibling=u,r.child=I,u=r.child,u.memoizedState=fh(a),u.childLanes=dh(i,S,a),r.memoizedState=ch,fl(null,u)):(Ls(r),hh(r,I))}var V=i.memoizedState;if(V!==null&&(I=V.dehydrated,I!==null)){if(_)r.flags&256?(Ls(r),r.flags&=-257,r=ph(i,r,a)):r.memoizedState!==null?(Os(),r.child=i.child,r.flags|=128,r=null):(Os(),I=u.fallback,y=r.mode,u=mc({mode:"visible",children:u.children},y),I=Lr(I,y,a,null),I.flags|=2,u.return=r,I.return=r,u.sibling=I,r.child=u,Hr(r,i.child,null,a),u=r.child,u.memoizedState=fh(a),u.childLanes=dh(i,S,a),r.memoizedState=ch,r=fl(null,u));else if(Ls(r),$h(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var J=S.dgst;S=J,u=Error(s(419)),u.stack="",u.digest=S,ja({value:u,source:null,stack:null}),r=ph(i,r,a)}else if(wt||ko(i,r,a,!1),S=(a&i.childLanes)!==0,wt||S){if(S=it,S!==null&&(u=ms(S,a),u!==0&&u!==V.retryLane))throw V.retryLane=u,Ur(i,u),Tn(S,i,u),lh;Kh(I)||Cc(),r=ph(i,r,a)}else Kh(I)?(r.flags|=192,r.child=i.child,r=null):(i=V.treeContext,ut=Hn(I.nextSibling),Jt=r,Be=!0,xs=null,zn=!1,i!==null&&Ig(r,i),r=hh(r,u.children),r.flags|=4096);return r}return y?(Os(),I=u.fallback,y=r.mode,V=i.child,J=V.sibling,u=Oi(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,J!==null?I=Oi(J,I):(I=Lr(I,y,a,null),I.flags|=2),I.return=r,u.return=r,u.sibling=I,r.child=u,fl(null,u),u=r.child,I=i.child.memoizedState,I===null?I=fh(a):(y=I.cachePool,y!==null?(V=It._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=xg(),I={baseLanes:I.baseLanes|a,cachePool:y}),u.memoizedState=I,u.childLanes=dh(i,S,a),r.memoizedState=ch,fl(i.child,u)):(Ls(r),a=i.child,i=a.sibling,a=Oi(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(S=r.deletions,S===null?(r.deletions=[i],r.flags|=16):S.push(i)),r.child=a,r.memoizedState=null,a)}function hh(i,r){return r=mc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function mc(i,r){return i=In(22,i,null,r),i.lanes=0,i}function ph(i,r,a){return Hr(r,i.child,null,a),i=hh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Hy(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Nd(i.return,r,a)}function mh(i,r,a,u,y,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:_}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=y,S.treeForkCount=_)}function Jy(i,r,a){var u=r.pendingProps,y=u.revealOrder,_=u.tail;u=u.children;var S=Et.current,I=(S&2)!==0;if(I?(S=S&1|2,r.flags|=128):S&=1,ie(Et,S),Kt(i,r,u,a),u=Be?Za:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Hy(i,a,r);else if(i.tag===19)Hy(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=r.child,y=null;a!==null;)i=a.alternate,i!==null&&ic(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),mh(r,!1,y,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&ic(i)===null){r.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}mh(r,!0,a,null,_,u);break;case"together":mh(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Hi(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Fs|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(ko(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Oi(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Oi(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function gh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Qu(i)))}function jC(i,r,a){switch(r.tag){case 3:We(r,r.stateNode.containerInfo),Ps(r,It,i.memoizedState.cache),Or();break;case 27:case 5:Pn(r);break;case 4:We(r,r.stateNode.containerInfo);break;case 10:Ps(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Fd(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ls(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Gy(i,r,a):(Ls(r),i=Hi(i,r,a),i!==null?i.sibling:null);Ls(r);break;case 19:var y=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(ko(i,r,a,!1),u=(a&r.childLanes)!==0),y){if(u)return Jy(i,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(Et,Et.current),u)break;return null;case 22:return r.lanes=0,Ly(i,r,a,r.pendingProps);case 24:Ps(r,It,i.memoizedState.cache)}return Hi(i,r,a)}function Yy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)wt=!0;else{if(!gh(i,a)&&(r.flags&128)===0)return wt=!1,jC(i,r,a);wt=(i.flags&131072)!==0}else wt=!1,Be&&(r.flags&1048576)!==0&&Cg(r,Za,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=zr(r.elementType),r.type=i,typeof i=="function")Ed(i)?(u=Yr(i,u),r.tag=1,r=Fy(null,r,i,u,a)):(r.tag=0,r=uh(null,r,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===oe){r.tag=11,r=ky(null,r,i,u,a);break e}else if(y===x){r.tag=14,r=Vy(null,r,i,u,a);break e}}throw r=rt(i)||i,Error(s(306,r,""))}}return r;case 0:return uh(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,y=Yr(u,r.pendingProps),Fy(i,r,u,y,a);case 3:e:{if(We(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;y=_.element,Ud(i,r),ol(r,u,null,a);var S=r.memoizedState;if(u=S.cache,Ps(r,It,u),u!==_.cache&&Md(r,[It],a,!0),rl(),u=S.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=zy(i,r,u,a);break e}else if(u!==y){y=qn(Error(s(424)),r),ja(y),r=zy(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ut=Hn(i.firstChild),Jt=r,Be=!0,xs=null,zn=!0,a=Lg(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Or(),u===y){r=Hi(i,r,a);break e}Kt(i,r,u,a)}r=r.child}return r;case 26:return pc(i,r),i===null?(a=iv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Be||(a=r.type,i=r.pendingProps,u=xc(Ne.current).createElement(a),u[gt]=r,u[Ht]=i,$t(u,a,i),Tt(u),r.stateNode=u):r.memoizedState=iv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Pn(r),i===null&&Be&&(u=r.stateNode=ev(r.type,r.pendingProps,Ne.current),Jt=r,zn=!0,y=ut,Ys(r.type)?(Qh=y,ut=Hn(u.firstChild)):ut=y),Kt(i,r,r.pendingProps.children,a),pc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Be&&((y=u=ut)&&(u=NI(u,r.type,r.pendingProps,zn),u!==null?(r.stateNode=u,Jt=r,ut=Hn(u.firstChild),zn=!1,y=!0):y=!1),y||Ds(r)),Pn(r),y=r.type,_=r.pendingProps,S=i!==null?i.memoizedProps:null,u=_.children,Hh(y,_)?u=null:S!==null&&Hh(y,S)&&(r.flags|=32),r.memoizedState!==null&&(y=Gd(i,r,HC,null,null,a),Rl._currentValue=y),pc(i,r),Kt(i,r,u,a),r.child;case 6:return i===null&&Be&&((i=a=ut)&&(a=MI(a,r.pendingProps,zn),a!==null?(r.stateNode=a,Jt=r,ut=null,i=!0):i=!1),i||Ds(r)),null;case 13:return Gy(i,r,a);case 4:return We(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Hr(r,null,u,a):Kt(i,r,u,a),r.child;case 11:return ky(i,r,r.type,r.pendingProps,a);case 7:return Kt(i,r,r.pendingProps,a),r.child;case 8:return Kt(i,r,r.pendingProps.children,a),r.child;case 12:return Kt(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,Ps(r,r.type,u.value),Kt(i,r,u.children,a),r.child;case 9:return y=r.type._context,u=r.pendingProps.children,Br(r),y=Yt(y),u=u(y),r.flags|=1,Kt(i,r,u,a),r.child;case 14:return Vy(i,r,r.type,r.pendingProps,a);case 15:return Uy(i,r,r.type,r.pendingProps,a);case 19:return Jy(i,r,a);case 31:return ZC(i,r,a);case 22:return Ly(i,r,a,r.pendingProps);case 24:return Br(r),u=Yt(It),i===null?(y=Pd(),y===null&&(y=it,_=xd(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:u,cache:y},Vd(r),Ps(r,It,y)):((i.lanes&a)!==0&&(Ud(i,r),ol(r,null,null,a),rl()),y=i.memoizedState,_=r.memoizedState,y.parent!==u?(y={parent:u,cache:u},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ps(r,It,u)):(u=_.cache,Ps(r,It,u),u!==y.cache&&Md(r,[It],a,!0))),Kt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ji(i){i.flags|=4}function yh(i,r,a,u,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(v_())i.flags|=8192;else throw Gr=ju,kd}else i.flags&=-16777217}function Ky(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!lv(r))if(v_())i.flags|=8192;else throw Gr=ju,kd}function gc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Da():536870912,i.lanes|=r,Yo|=r)}function dl(i,r){if(!Be)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ct(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function eI(i,r,a){var u=r.pendingProps;switch(Id(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Fi(It),at(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Po(r)?Ji(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,wd())),ct(r),null;case 26:var y=r.type,_=r.memoizedState;return i===null?(Ji(r),_!==null?(ct(r),Ky(r,_)):(ct(r),yh(r,y,null,u,a))):_?_!==i.memoizedState?(Ji(r),ct(r),Ky(r,_)):(ct(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ji(r),ct(r),yh(r,y,i,u,a)),null;case 27:if(hn(r),a=Ne.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ji(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ct(r),null}i=ue.current,Po(r)?Rg(r):(i=ev(y,u,a),r.stateNode=i,Ji(r))}return ct(r),null;case 5:if(hn(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ji(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ct(r),null}if(_=ue.current,Po(r))Rg(r);else{var S=xc(Ne.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?S.createElement(y,{is:u.is}):S.createElement(y)}}_[gt]=r,_[Ht]=u;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=_;e:switch($t(_,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ji(r)}}return ct(r),yh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Ji(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Ne.current,Po(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,y=Jt,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[gt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||G_(i.nodeValue,a)),i||Ds(r,!0)}else i=xc(i).createTextNode(u),i[gt]=r,r.stateNode=i}return ct(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=Po(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[gt]=r}else Or(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),i=!1}else a=wd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(wn(r),r):(wn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ct(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Po(r),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[gt]=r}else Or(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),y=!1}else y=wd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(wn(r),r):(wn(r),null)}return wn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==y&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),gc(r,r.updateQueue),ct(r),null);case 4:return at(),i===null&&qh(r.stateNode.containerInfo),ct(r),null;case 10:return Fi(r.type),ct(r),null;case 19:if(Q(Et),u=r.memoizedState,u===null)return ct(r),null;if(y=(r.flags&128)!==0,_=u.rendering,_===null)if(y)dl(u,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=ic(i),_!==null){for(r.flags|=128,dl(u,!1),i=_.updateQueue,r.updateQueue=i,gc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Eg(a,i),a=a.sibling;return ie(Et,Et.current&1|2),Be&&qi(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&zt()>Ec&&(r.flags|=128,y=!0,dl(u,!1),r.lanes=4194304)}else{if(!y)if(i=ic(_),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,gc(r,i),dl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Be)return ct(r),null}else 2*zt()-u.renderingStartTime>Ec&&a!==536870912&&(r.flags|=128,y=!0,dl(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=zt(),i.sibling=null,a=Et.current,ie(Et,y?a&1|2:a&1),Be&&qi(r,u.treeForkCount),i):(ct(r),null);case 22:case 23:return wn(r),Bd(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),a=r.updateQueue,a!==null&&gc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&Q(Fr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Fi(It),ct(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function tI(i,r){switch(Id(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Fi(It),at(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return hn(r),null;case 31:if(r.memoizedState!==null){if(wn(r),r.alternate===null)throw Error(s(340));Or()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(wn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Or()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Q(Et),null;case 4:return at(),null;case 10:return Fi(r.type),null;case 22:case 23:return wn(r),Bd(),i!==null&&Q(Fr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Fi(It),null;case 25:return null;default:return null}}function $y(i,r){switch(Id(r),r.tag){case 3:Fi(It),at();break;case 26:case 27:case 5:hn(r);break;case 4:at();break;case 31:r.memoizedState!==null&&wn(r);break;case 13:wn(r);break;case 19:Q(Et);break;case 10:Fi(r.type);break;case 22:case 23:wn(r),Bd(),i!==null&&Q(Fr);break;case 24:Fi(It)}}function hl(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var _=a.create,S=a.inst;u=_(),S.destroy=u}a=a.next}while(a!==y)}}catch(I){je(r,r.return,I)}}function qs(i,r,a){try{var u=r.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var _=y.next;u=_;do{if((u.tag&i)===i){var S=u.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,y=r;var V=a,J=I;try{J()}catch(j){je(y,V,j)}}}u=u.next}while(u!==_)}}catch(j){je(r,r.return,j)}}function Qy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{qg(r,a)}catch(u){je(i,i.return,u)}}}function Xy(i,r,a){a.props=Yr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){je(i,r,u)}}function pl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){je(i,r,y)}}function yi(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){je(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){je(i,r,y)}else a.current=null}function Wy(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){je(i,i.return,y)}}function _h(i,r,a){try{var u=i.stateNode;AI(u,i.type,a,r),u[Ht]=r}catch(y){je(i,i.return,y)}}function Zy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ys(i.type)||i.tag===4}function vh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ys(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Th(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ut));else if(u!==4&&(u===27&&Ys(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Th(i,r,a),i=i.sibling;i!==null;)Th(i,r,a),i=i.sibling}function yc(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&Ys(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(yc(i,r,a),i=i.sibling;i!==null;)yc(i,r,a),i=i.sibling}function jy(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);$t(r,u,a),r[gt]=i,r[Ht]=a}catch(_){je(i,i.return,_)}}var Yi=!1,bt=!1,Eh=!1,e_=typeof WeakSet=="function"?WeakSet:Set,qt=null;function nI(i,r){if(i=i.containerInfo,zh=Oc,i=dg(i),pd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var S=0,I=-1,V=-1,J=0,j=0,ne=i,Y=null;t:for(;;){for(var X;ne!==a||y!==0&&ne.nodeType!==3||(I=S+y),ne!==_||u!==0&&ne.nodeType!==3||(V=S+u),ne.nodeType===3&&(S+=ne.nodeValue.length),(X=ne.firstChild)!==null;)Y=ne,ne=X;for(;;){if(ne===i)break t;if(Y===a&&++J===y&&(I=S),Y===_&&++j===u&&(V=S),(X=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=X}a=I===-1||V===-1?null:{start:I,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gh={focusedElem:i,selectionRange:a},Oc=!1,qt=r;qt!==null;)if(r=qt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,qt=i;else for(;qt!==null;){switch(r=qt,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var he=Yr(a.type,y);i=u.getSnapshotBeforeUpdate(he,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){je(a,a.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Yh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,qt=i;break}qt=r.return}}function t_(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:$i(i,a),u&4&&hl(5,a);break;case 1:if($i(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(S){je(a,a.return,S)}else{var y=Yr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(S){je(a,a.return,S)}}u&64&&Qy(a),u&512&&pl(a,a.return);break;case 3:if($i(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{qg(i,r)}catch(S){je(a,a.return,S)}}break;case 27:r===null&&u&4&&jy(a);case 26:case 5:$i(i,a),r===null&&u&4&&Wy(a),u&512&&pl(a,a.return);break;case 12:$i(i,a);break;case 31:$i(i,a),u&4&&s_(i,a);break;case 13:$i(i,a),u&4&&r_(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=fI.bind(null,a),xI(i,a))));break;case 22:if(u=a.memoizedState!==null||Yi,!u){r=r!==null&&r.memoizedState!==null||bt,y=Yi;var _=bt;Yi=u,(bt=r)&&!_?Qi(i,a,(a.subtreeFlags&8772)!==0):$i(i,a),Yi=y,bt=_}break;case 30:break;default:$i(i,a)}}function n_(i){var r=i.alternate;r!==null&&(i.alternate=null,n_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Cr(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ht=null,gn=!1;function Ki(i,r,a){for(a=a.child;a!==null;)i_(i,r,a),a=a.sibling}function i_(i,r,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(cs,a)}catch{}switch(a.tag){case 26:bt||yi(a,r),Ki(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:bt||yi(a,r);var u=ht,y=gn;Ys(a.type)&&(ht=a.stateNode,gn=!1),Ki(i,r,a),Al(a.stateNode),ht=u,gn=y;break;case 5:bt||yi(a,r);case 6:if(u=ht,y=gn,ht=null,Ki(i,r,a),ht=u,gn=y,ht!==null)if(gn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(_){je(a,r,_)}else try{ht.removeChild(a.stateNode)}catch(_){je(a,r,_)}break;case 18:ht!==null&&(gn?(i=ht,Q_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),ea(i)):Q_(ht,a.stateNode));break;case 4:u=ht,y=gn,ht=a.stateNode.containerInfo,gn=!0,Ki(i,r,a),ht=u,gn=y;break;case 0:case 11:case 14:case 15:qs(2,a,r),bt||qs(4,a,r),Ki(i,r,a);break;case 1:bt||(yi(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Xy(a,r,u)),Ki(i,r,a);break;case 21:Ki(i,r,a);break;case 22:bt=(u=bt)||a.memoizedState!==null,Ki(i,r,a),bt=u;break;default:Ki(i,r,a)}}function s_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ea(i)}catch(a){je(r,r.return,a)}}}function r_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ea(i)}catch(a){je(r,r.return,a)}}function iI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new e_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new e_),r;default:throw Error(s(435,i.tag))}}function _c(i,r){var a=iI(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var y=dI.bind(null,i,u);u.then(y,y)}})}function yn(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],_=i,S=r,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(Ys(I.type)){ht=I.stateNode,gn=!1;break e}break;case 5:ht=I.stateNode,gn=!1;break e;case 3:case 4:ht=I.stateNode.containerInfo,gn=!0;break e}I=I.return}if(ht===null)throw Error(s(160));i_(_,S,y),ht=null,gn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)o_(r,i),r=r.sibling}var ti=null;function o_(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:yn(r,i),_n(i),u&4&&(qs(3,i,i.return),hl(3,i),qs(5,i,i.return));break;case 1:yn(r,i),_n(i),u&512&&(bt||a===null||yi(a,a.return)),u&64&&Yi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=ti;if(yn(r,i),_n(i),u&512&&(bt||a===null||yi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Mi]||_[gt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(u),y.head.insertBefore(_,y.querySelector("head > title"))),$t(_,u,a),_[gt]=i,Tt(_),u=_;break e;case"link":var S=ov("link","href",y).get(u+(a.href||""));if(S){for(var I=0;I<S.length;I++)if(_=S[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(I,1);break t}}_=y.createElement(u),$t(_,u,a),y.head.appendChild(_);break;case"meta":if(S=ov("meta","content",y).get(u+(a.content||""))){for(I=0;I<S.length;I++)if(_=S[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(I,1);break t}}_=y.createElement(u),$t(_,u,a),y.head.appendChild(_);break;default:throw Error(s(468,u))}_[gt]=i,Tt(_),u=_}i.stateNode=u}else av(y,i.type,i.stateNode);else i.stateNode=rv(y,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?av(y,i.type,i.stateNode):rv(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&_h(i,i.memoizedProps,a.memoizedProps)}break;case 27:yn(r,i),_n(i),u&512&&(bt||a===null||yi(a,a.return)),a!==null&&u&4&&_h(i,i.memoizedProps,a.memoizedProps);break;case 5:if(yn(r,i),_n(i),u&512&&(bt||a===null||yi(a,a.return)),i.flags&32){y=i.stateNode;try{Ln(y,"")}catch(he){je(i,i.return,he)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,_h(i,y,a!==null?a.memoizedProps:y)),u&1024&&(Eh=!0);break;case 6:if(yn(r,i),_n(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(he){je(i,i.return,he)}}break;case 3:if(kc=null,y=ti,ti=Dc(r.containerInfo),yn(r,i),ti=y,_n(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{ea(r.containerInfo)}catch(he){je(i,i.return,he)}Eh&&(Eh=!1,a_(i));break;case 4:u=ti,ti=Dc(i.stateNode.containerInfo),yn(r,i),_n(i),ti=u;break;case 12:yn(r,i),_n(i);break;case 31:yn(r,i),_n(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,_c(i,u)));break;case 13:yn(r,i),_n(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Tc=zt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,_c(i,u)));break;case 22:y=i.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,J=Yi,j=bt;if(Yi=J||y,bt=j||V,yn(r,i),bt=j,Yi=J,_n(i),u&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||V||Yi||bt||Kr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){V=a=r;try{if(_=V.stateNode,y)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=V.stateNode;var ne=V.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(he){je(V,V.return,he)}}}else if(r.tag===6){if(a===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(he){je(V,V.return,he)}}}else if(r.tag===18){if(a===null){V=r;try{var X=V.stateNode;y?X_(X,!0):X_(V.stateNode,!1)}catch(he){je(V,V.return,he)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,_c(i,a))));break;case 19:yn(r,i),_n(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,_c(i,u)));break;case 30:break;case 21:break;default:yn(r,i),_n(i)}}function _n(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(Zy(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,_=vh(i);yc(i,_,y);break;case 5:var S=a.stateNode;a.flags&32&&(Ln(S,""),a.flags&=-33);var I=vh(i);yc(i,I,S);break;case 3:case 4:var V=a.stateNode.containerInfo,J=vh(i);Th(i,J,V);break;default:throw Error(s(161))}}catch(j){je(i,i.return,j)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function a_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;a_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function $i(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)t_(i,r.alternate,r),r=r.sibling}function Kr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:qs(4,r,r.return),Kr(r);break;case 1:yi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Xy(r,r.return,a),Kr(r);break;case 27:Al(r.stateNode);case 26:case 5:yi(r,r.return),Kr(r);break;case 22:r.memoizedState===null&&Kr(r);break;case 30:Kr(r);break;default:Kr(r)}i=i.sibling}}function Qi(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,y=i,_=r,S=_.flags;switch(_.tag){case 0:case 11:case 15:Qi(y,_,a),hl(4,_);break;case 1:if(Qi(y,_,a),u=_,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){je(u,u.return,J)}if(u=_,y=u.updateQueue,y!==null){var I=u.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Og(V[y],I)}catch(J){je(u,u.return,J)}}a&&S&64&&Qy(_),pl(_,_.return);break;case 27:jy(_);case 26:case 5:Qi(y,_,a),a&&u===null&&S&4&&Wy(_),pl(_,_.return);break;case 12:Qi(y,_,a);break;case 31:Qi(y,_,a),a&&S&4&&s_(y,_);break;case 13:Qi(y,_,a),a&&S&4&&r_(y,_);break;case 22:_.memoizedState===null&&Qi(y,_,a),pl(_,_.return);break;case 30:break;default:Qi(y,_,a)}r=r.sibling}}function Sh(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&el(a))}function Ah(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&el(i))}function ni(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)l_(i,r,a,u),r=r.sibling}function l_(i,r,a,u){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ni(i,r,a,u),y&2048&&hl(9,r);break;case 1:ni(i,r,a,u);break;case 3:ni(i,r,a,u),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&el(i)));break;case 12:if(y&2048){ni(i,r,a,u),i=r.stateNode;try{var _=r.memoizedProps,S=_.id,I=_.onPostCommit;typeof I=="function"&&I(S,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){je(r,r.return,V)}}else ni(i,r,a,u);break;case 31:ni(i,r,a,u);break;case 13:ni(i,r,a,u);break;case 23:break;case 22:_=r.stateNode,S=r.alternate,r.memoizedState!==null?_._visibility&2?ni(i,r,a,u):ml(i,r):_._visibility&2?ni(i,r,a,u):(_._visibility|=2,Go(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Sh(S,r);break;case 24:ni(i,r,a,u),y&2048&&Ah(r.alternate,r);break;default:ni(i,r,a,u)}}function Go(i,r,a,u,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,S=r,I=a,V=u,J=S.flags;switch(S.tag){case 0:case 11:case 15:Go(_,S,I,V,y),hl(8,S);break;case 23:break;case 22:var j=S.stateNode;S.memoizedState!==null?j._visibility&2?Go(_,S,I,V,y):ml(_,S):(j._visibility|=2,Go(_,S,I,V,y)),y&&J&2048&&Sh(S.alternate,S);break;case 24:Go(_,S,I,V,y),y&&J&2048&&Ah(S.alternate,S);break;default:Go(_,S,I,V,y)}r=r.sibling}}function ml(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,y=u.flags;switch(u.tag){case 22:ml(a,u),y&2048&&Sh(u.alternate,u);break;case 24:ml(a,u),y&2048&&Ah(u.alternate,u);break;default:ml(a,u)}r=r.sibling}}var gl=8192;function Ho(i,r,a){if(i.subtreeFlags&gl)for(i=i.child;i!==null;)u_(i,r,a),i=i.sibling}function u_(i,r,a){switch(i.tag){case 26:Ho(i,r,a),i.flags&gl&&i.memoizedState!==null&&GI(a,ti,i.memoizedState,i.memoizedProps);break;case 5:Ho(i,r,a);break;case 3:case 4:var u=ti;ti=Dc(i.stateNode.containerInfo),Ho(i,r,a),ti=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=gl,gl=16777216,Ho(i,r,a),gl=u):Ho(i,r,a));break;default:Ho(i,r,a)}}function c_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function yl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];qt=u,d_(u,i)}c_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)f_(i),i=i.sibling}function f_(i){switch(i.tag){case 0:case 11:case 15:yl(i),i.flags&2048&&qs(9,i,i.return);break;case 3:yl(i);break;case 12:yl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,vc(i)):yl(i);break;default:yl(i)}}function vc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];qt=u,d_(u,i)}c_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:qs(8,r,r.return),vc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,vc(r));break;default:vc(r)}i=i.sibling}}function d_(i,r){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:qs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:el(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,qt=u;else e:for(a=i;qt!==null;){u=qt;var y=u.sibling,_=u.return;if(n_(u),u===a){qt=null;break e}if(y!==null){y.return=_,qt=y;break e}qt=_}}}var sI={getCacheForType:function(i){var r=Yt(It),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Yt(It).controller.signal}},rI=typeof WeakMap=="function"?WeakMap:Map,$e=0,it=null,ke=null,Ue=0,Ze=0,bn=null,Bs=!1,Jo=!1,Ch=!1,Xi=0,vt=0,Fs=0,$r=0,Ih=0,Nn=0,Yo=0,_l=null,vn=null,Rh=!1,Tc=0,h_=0,Ec=1/0,Sc=null,zs=null,Dt=0,Gs=null,Ko=null,Wi=0,wh=0,bh=null,p_=null,vl=0,Nh=null;function Mn(){return($e&2)!==0&&Ue!==0?Ue&-Ue:F.T!==null?Vh():Ni()}function m_(){if(Nn===0)if((Ue&536870912)===0||Be){var i=ai;ai<<=1,(ai&3932160)===0&&(ai=262144),Nn=i}else Nn=536870912;return i=Rn.current,i!==null&&(i.flags|=32),Nn}function Tn(i,r,a){(i===it&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&($o(i,0),Hs(i,Ue,Nn,!1)),hs(i,a),(($e&2)===0||i!==it)&&(i===it&&(($e&2)===0&&($r|=a),vt===4&&Hs(i,Ue,Nn,!1)),_i(i))}function g_(i,r,a){if(($e&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||ds(i,r),y=u?lI(i,r):xh(i,r,!0),_=u;do{if(y===0){Jo&&!u&&Hs(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!oI(a)){y=xh(i,r,!1),_=!1;continue}if(y===2){if(_=r,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var I=i;y=_l;var V=I.current.memoizedState.isDehydrated;if(V&&($o(I,S).flags|=256),S=xh(I,S,!1),S!==2){if(Ch&&!V){I.errorRecoveryDisabledLanes|=_,$r|=_,y=4;break e}_=vn,vn=y,_!==null&&(vn===null?vn=_:vn.push.apply(vn,_))}y=S}if(_=!1,y!==2)continue}}if(y===1){$o(i,0),Hs(i,r,0,!0);break}e:{switch(u=i,_=y,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Hs(u,r,Nn,!Bs);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Tc+300-zt(),10<y)){if(Hs(u,r,Nn,!Bs),Vn(u,0,!0)!==0)break e;Wi=r,u.timeoutHandle=K_(y_.bind(null,u,a,vn,Sc,Rh,r,Nn,$r,Yo,Bs,_,"Throttled",-0,0),y);break e}y_(u,a,vn,Sc,Rh,r,Nn,$r,Yo,Bs,_,null,-0,0)}}break}while(!0);_i(i)}function y_(i,r,a,u,y,_,S,I,V,J,j,ne,Y,X){if(i.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ut},u_(r,_,ne);var he=(_&62914560)===_?Tc-zt():(_&4194048)===_?h_-zt():0;if(he=HI(ne,he),he!==null){Wi=_,i.cancelPendingCommit=he(I_.bind(null,i,r,_,a,u,y,S,I,V,j,ne,null,Y,X)),Hs(i,_,S,!J);return}}I_(i,r,_,a,u,y,S,I,V)}function oI(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],_=y.getSnapshot;y=y.value;try{if(!Cn(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hs(i,r,a,u){r&=~Ih,r&=~$r,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var y=r;0<y;){var _=31-an(y),S=1<<_;u[_]=-1,y&=~S}a!==0&&Pa(i,a,r)}function Ac(){return($e&6)===0?(Tl(0),!1):!0}function Mh(){if(ke!==null){if(Ze===0)var i=ke.return;else i=ke,Bi=qr=null,Yd(i),Oo=null,nl=0,i=ke;for(;i!==null;)$y(i.alternate,i),i=i.return;ke=null}}function $o(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,RI(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Wi=0,Mh(),it=i,ke=a=Oi(i.current,null),Ue=r,Ze=0,bn=null,Bs=!1,Jo=ds(i,r),Ch=!1,Yo=Nn=Ih=$r=Fs=vt=0,vn=_l=null,Rh=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var y=31-an(u),_=1<<y;r|=i[y],u&=~_}return Xi=r,Hu(),a}function __(i,r){be=null,F.H=cl,r===Lo||r===Zu?(r=kg(),Ze=3):r===kd?(r=kg(),Ze=4):Ze=r===lh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,bn=r,ke===null&&(vt=1,dc(i,qn(r,i.current)))}function v_(){var i=Rn.current;return i===null?!0:(Ue&4194048)===Ue?Gn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?i===Gn:!1}function T_(){var i=F.H;return F.H=cl,i===null?cl:i}function E_(){var i=F.A;return F.A=sI,i}function Cc(){vt=4,Bs||(Ue&4194048)!==Ue&&Rn.current!==null||(Jo=!0),(Fs&134217727)===0&&($r&134217727)===0||it===null||Hs(it,Ue,Nn,!1)}function xh(i,r,a){var u=$e;$e|=2;var y=T_(),_=E_();(it!==i||Ue!==r)&&(Sc=null,$o(i,r)),r=!1;var S=vt;e:do try{if(Ze!==0&&ke!==null){var I=ke,V=bn;switch(Ze){case 8:Mh(),S=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(r=!0);var J=Ze;if(Ze=0,bn=null,Qo(i,I,V,J),a&&Jo){S=0;break e}break;default:J=Ze,Ze=0,bn=null,Qo(i,I,V,J)}}aI(),S=vt;break}catch(j){__(i,j)}while(!0);return r&&i.shellSuspendCounter++,Bi=qr=null,$e=u,F.H=y,F.A=_,ke===null&&(it=null,Ue=0,Hu()),S}function aI(){for(;ke!==null;)S_(ke)}function lI(i,r){var a=$e;$e|=2;var u=T_(),y=E_();it!==i||Ue!==r?(Sc=null,Ec=zt()+500,$o(i,r)):Jo=ds(i,r);e:do try{if(Ze!==0&&ke!==null){r=ke;var _=bn;t:switch(Ze){case 1:Ze=0,bn=null,Qo(i,r,_,1);break;case 2:case 9:if(Dg(_)){Ze=0,bn=null,A_(r);break}r=function(){Ze!==2&&Ze!==9||it!==i||(Ze=7),_i(i)},_.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Dg(_)?(Ze=0,bn=null,A_(r)):(Ze=0,bn=null,Qo(i,r,_,7));break;case 5:var S=null;switch(ke.tag){case 26:S=ke.memoizedState;case 5:case 27:var I=ke;if(S?lv(S):I.stateNode.complete){Ze=0,bn=null;var V=I.sibling;if(V!==null)ke=V;else{var J=I.return;J!==null?(ke=J,Ic(J)):ke=null}break t}}Ze=0,bn=null,Qo(i,r,_,5);break;case 6:Ze=0,bn=null,Qo(i,r,_,6);break;case 8:Mh(),vt=6;break e;default:throw Error(s(462))}}uI();break}catch(j){__(i,j)}while(!0);return Bi=qr=null,F.H=u,F.A=y,$e=a,ke!==null?0:(it=null,Ue=0,Hu(),vt)}function uI(){for(;ke!==null&&!id();)S_(ke)}function S_(i){var r=Yy(i.alternate,i,Xi);i.memoizedProps=i.pendingProps,r===null?Ic(i):ke=r}function A_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=By(a,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=By(a,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:Yd(r);default:$y(a,r),r=ke=Eg(r,Xi),r=Yy(a,r,Xi)}i.memoizedProps=i.pendingProps,r===null?Ic(i):ke=r}function Qo(i,r,a,u){Bi=qr=null,Yd(r),Oo=null,nl=0;var y=r.return;try{if(WC(i,y,r,a,Ue)){vt=1,dc(i,qn(a,i.current)),ke=null;return}}catch(_){if(y!==null)throw ke=y,_;vt=1,dc(i,qn(a,i.current)),ke=null;return}r.flags&32768?(Be||u===1?i=!0:Jo||(Ue&536870912)!==0?i=!1:(Bs=i=!0,(u===2||u===9||u===3||u===6)&&(u=Rn.current,u!==null&&u.tag===13&&(u.flags|=16384))),C_(r,i)):Ic(r)}function Ic(i){var r=i;do{if((r.flags&32768)!==0){C_(r,Bs);return}i=r.return;var a=eI(r.alternate,r,Xi);if(a!==null){ke=a;return}if(r=r.sibling,r!==null){ke=r;return}ke=r=i}while(r!==null);vt===0&&(vt=5)}function C_(i,r){do{var a=tI(i.alternate,i);if(a!==null){a.flags&=32767,ke=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){ke=i;return}ke=i=a}while(i!==null);vt=6,ke=null}function I_(i,r,a,u,y,_,S,I,V){i.cancelPendingCommit=null;do Rc();while(Dt!==0);if(($e&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=vd,Gt(i,a,_,S,I,V),i===it&&(ke=it=null,Ue=0),Ko=r,Gs=i,Wi=a,wh=_,bh=y,p_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,hI(wi,function(){return M_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=F.T,F.T=null,y=ae.p,ae.p=2,S=$e,$e|=4;try{nI(i,r,a)}finally{$e=S,ae.p=y,F.T=u}}Dt=1,R_(),w_(),b_()}}function R_(){if(Dt===1){Dt=0;var i=Gs,r=Ko,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var u=ae.p;ae.p=2;var y=$e;$e|=4;try{o_(r,i);var _=Gh,S=dg(i.containerInfo),I=_.focusedElem,V=_.selectionRange;if(S!==I&&I&&I.ownerDocument&&fg(I.ownerDocument.documentElement,I)){if(V!==null&&pd(I)){var J=V.start,j=V.end;if(j===void 0&&(j=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(j,I.value.length);else{var ne=I.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),he=I.textContent.length,Ee=Math.min(V.start,he),nt=V.end===void 0?Ee:Math.min(V.end,he);!X.extend&&Ee>nt&&(S=nt,nt=Ee,Ee=S);var B=cg(I,Ee),L=cg(I,nt);if(B&&L&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var H=ne.createRange();H.setStart(B.node,B.offset),X.removeAllRanges(),Ee>nt?(X.addRange(H),X.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),X.addRange(H))}}}}for(ne=[],X=I;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ne.length;I++){var ee=ne[I];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Oc=!!zh,Gh=zh=null}finally{$e=y,ae.p=u,F.T=a}}i.current=r,Dt=2}}function w_(){if(Dt===2){Dt=0;var i=Gs,r=Ko,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var u=ae.p;ae.p=2;var y=$e;$e|=4;try{t_(i,r.alternate,r)}finally{$e=y,ae.p=u,F.T=a}}Dt=3}}function b_(){if(Dt===4||Dt===3){Dt=0,Na();var i=Gs,r=Ko,a=Wi,u=p_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Dt=5:(Dt=0,Ko=Gs=null,N_(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(zs=null),Va(a),r=r.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(cs,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=F.T,y=ae.p,ae.p=2,F.T=null;try{for(var _=i.onRecoverableError,S=0;S<u.length;S++){var I=u[S];_(I.value,{componentStack:I.stack})}}finally{F.T=r,ae.p=y}}(Wi&3)!==0&&Rc(),_i(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===Nh?vl++:(vl=0,Nh=i):vl=0,Tl(0)}}function N_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,el(r)))}function Rc(){return R_(),w_(),b_(),M_()}function M_(){if(Dt!==5)return!1;var i=Gs,r=wh;wh=0;var a=Va(Wi),u=F.T,y=ae.p;try{ae.p=32>a?32:a,F.T=null,a=bh,bh=null;var _=Gs,S=Wi;if(Dt=0,Ko=Gs=null,Wi=0,($e&6)!==0)throw Error(s(331));var I=$e;if($e|=4,f_(_.current),l_(_,_.current,S,a),$e=I,Tl(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(cs,_)}catch{}return!0}finally{ae.p=y,F.T=u,N_(i,r)}}function x_(i,r,a){r=qn(a,r),r=ah(i.stateNode,r,2),i=Us(i,r,2),i!==null&&(hs(i,2),_i(i))}function je(i,r,a){if(i.tag===3)x_(i,i,a);else for(;r!==null;){if(r.tag===3){x_(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(zs===null||!zs.has(u))){i=qn(a,i),a=Dy(2),u=Us(r,a,2),u!==null&&(Py(a,u,r,i),hs(u,2),_i(u));break}}r=r.return}}function Dh(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new rI;var y=new Set;u.set(r,y)}else y=u.get(r),y===void 0&&(y=new Set,u.set(r,y));y.has(a)||(Ch=!0,y.add(a),i=cI.bind(null,i,r,a),r.then(i,i))}function cI(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,it===i&&(Ue&a)===a&&(vt===4||vt===3&&(Ue&62914560)===Ue&&300>zt()-Tc?($e&2)===0&&$o(i,0):Ih|=a,Yo===Ue&&(Yo=0)),_i(i)}function D_(i,r){r===0&&(r=Da()),i=Ur(i,r),i!==null&&(hs(i,r),_i(i))}function fI(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),D_(i,a)}function dI(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),D_(i,a)}function hI(i,r){return Er(i,r)}var wc=null,Xo=null,Ph=!1,bc=!1,kh=!1,Js=0;function _i(i){i!==Xo&&i.next===null&&(Xo===null?wc=Xo=i:Xo=Xo.next=i),bc=!0,Ph||(Ph=!0,mI())}function Tl(i,r){if(!kh&&bc){kh=!0;do for(var a=!1,u=wc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var _=0;else{var S=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-an(42|i)+1)-1,_&=y&~(S&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,U_(u,_))}else _=Ue,_=Vn(u,u===it?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||ds(u,_)||(a=!0,U_(u,_));u=u.next}while(a);kh=!1}}function pI(){P_()}function P_(){bc=Ph=!1;var i=0;Js!==0&&II()&&(i=Js);for(var r=zt(),a=null,u=wc;u!==null;){var y=u.next,_=k_(u,r);_===0?(u.next=null,a===null?wc=y:a.next=y,y===null&&(Xo=a)):(a=u,(i!==0||(_&3)!==0)&&(bc=!0)),u=y}Dt!==0&&Dt!==5||Tl(i),Js!==0&&(Js=0)}function k_(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-an(_),I=1<<S,V=y[S];V===-1?((I&a)===0||(I&u)!==0)&&(y[S]=go(I,r)):V<=r&&(i.expiredLanes|=I),_&=~I}if(r=it,a=Ue,a=Vn(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&mo(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||ds(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&mo(u),Va(a)){case 2:case 8:a=Vt;break;case 32:a=wi;break;case 268435456:a=Ma;break;default:a=wi}return u=V_.bind(null,i),a=Er(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&mo(u),i.callbackPriority=2,i.callbackNode=null,2}function V_(i,r){if(Dt!==0&&Dt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Rc()&&i.callbackNode!==a)return null;var u=Ue;return u=Vn(i,i===it?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(g_(i,u,r),k_(i,zt()),i.callbackNode!=null&&i.callbackNode===a?V_.bind(null,i):null)}function U_(i,r){if(Rc())return null;g_(i,r,!0)}function mI(){wI(function(){($e&6)!==0?Er(xt,pI):P_()})}function Vh(){if(Js===0){var i=Vo;i===0&&(i=Ar,Ar<<=1,(Ar&261888)===0&&(Ar=256)),Js=i}return Js}function L_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:di(""+i)}function O_(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function gI(i,r,a,u,y){if(r==="submit"&&a&&a.stateNode===y){var _=L_((y[Ht]||null).action),S=u.submitter;S&&(r=(r=S[Ht]||null)?L_(r.formAction):S.getAttribute("formAction"),r!==null&&(_=r,S=null));var I=new Nr("action","action",null,u,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Js!==0){var V=S?O_(y,S):new FormData(y);th(a,{pending:!0,data:V,method:y.method,action:_},null,V)}}else typeof _=="function"&&(I.preventDefault(),V=S?O_(y,S):new FormData(y),th(a,{pending:!0,data:V,method:y.method,action:_},_,V))},currentTarget:y}]})}}for(var Uh=0;Uh<_d.length;Uh++){var Lh=_d[Uh],yI=Lh.toLowerCase(),_I=Lh[0].toUpperCase()+Lh.slice(1);ei(yI,"on"+_I)}ei(mg,"onAnimationEnd"),ei(gg,"onAnimationIteration"),ei(yg,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(kC,"onTransitionRun"),ei(VC,"onTransitionStart"),ei(UC,"onTransitionCancel"),ei(_g,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function q_(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var S=u.length-1;0<=S;S--){var I=u[S],V=I.instance,J=I.currentTarget;if(I=I.listener,V!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=J;try{_(y)}catch(j){Gu(j)}y.currentTarget=null,_=V}else for(S=0;S<u.length;S++){if(I=u[S],V=I.instance,J=I.currentTarget,I=I.listener,V!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=J;try{_(y)}catch(j){Gu(j)}y.currentTarget=null,_=V}}}}function Ve(i,r){var a=r[gs];a===void 0&&(a=r[gs]=new Set);var u=i+"__bubble";a.has(u)||(B_(r,i,2,!1),a.add(u))}function Oh(i,r,a){var u=0;r&&(u|=4),B_(a,i,u,r)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function qh(i){if(!i[Nc]){i[Nc]=!0,yo.forEach(function(a){a!=="selectionchange"&&(vI.has(a)||Oh(a,!1,i),Oh(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Nc]||(r[Nc]=!0,Oh("selectionchange",!1,r))}}function B_(i,r,a,u){switch(mv(r)){case 2:var y=KI;break;case 8:y=$I;break;default:y=ep}a=y.bind(null,r,a,i),y=void 0,!Ga||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(r,a,{capture:!0,passive:y}):i.addEventListener(r,a,!0):y!==void 0?i.addEventListener(r,a,{passive:y}):i.addEventListener(r,a,!1)}function Bh(i,r,a,u,y){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var I=u.stateNode.containerInfo;if(I===y)break;if(S===4)for(S=u.return;S!==null;){var V=S.tag;if((V===3||V===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;I!==null;){if(S=xi(I),S===null)return;if(V=S.tag,V===5||V===6||V===26||V===27){u=_=S;continue e}I=I.parentNode}}u=u.return}wu(function(){var J=_,j=So(a),ne=[];e:{var Y=vg.get(i);if(Y!==void 0){var X=Nr,he=i;switch(i){case"keypress":if(br(a)===0)break e;case"keydown":case"keyup":X=Uu;break;case"focusin":he="focus",X=Rs;break;case"focusout":he="blur",X=Rs;break;case"beforeblur":case"afterblur":X=Rs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Ou;break;case mg:case gg:case yg:X=Io;break;case _g:X=Ro;break;case"scroll":case"scrollend":X=bu;break;case"wheel":X=Bu;break;case"copy":case"cut":case"paste":X=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=$a;break;case"toggle":case"beforetoggle":X=bs}var Ee=(r&4)!==0,nt=!Ee&&(i==="scroll"||i==="scrollend"),B=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var L=J,H;L!==null;){var ee=L;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||B===null||(ee=pn(L,B),ee!=null&&Ee.push(Sl(L,ee,H))),nt)break;L=L.return}0<Ee.length&&(Y=new X(Y,he,null,a,j),ne.push({event:Y,listeners:Ee}))}}if((r&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",Y&&a!==Eo&&(he=a.relatedTarget||a.fromElement)&&(xi(he)||he[ui]))break e;if((X||Y)&&(Y=j.window===j?j:(Y=j.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(he=a.relatedTarget||a.toElement,X=J,he=he?xi(he):null,he!==null&&(nt=l(he),Ee=he.tag,he!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(he=null)):(X=null,he=J),X!==he)){if(Ee=Nu,ee="onMouseLeave",B="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=$a,ee="onPointerLeave",B="onPointerEnter",L="pointer"),nt=X==null?Y:Ir(X),H=he==null?Y:Ir(he),Y=new Ee(ee,L+"leave",X,a,j),Y.target=nt,Y.relatedTarget=H,ee=null,xi(j)===J&&(Ee=new Ee(B,L+"enter",he,a,j),Ee.target=H,Ee.relatedTarget=nt,ee=Ee),nt=ee,X&&he)t:{for(Ee=TI,B=X,L=he,H=0,ee=B;ee;ee=Ee(ee))H++;ee=0;for(var ve=L;ve;ve=Ee(ve))ee++;for(;0<H-ee;)B=Ee(B),H--;for(;0<ee-H;)L=Ee(L),ee--;for(;H--;){if(B===L||L!==null&&B===L.alternate){Ee=B;break t}B=Ee(B),L=Ee(L)}Ee=null}else Ee=null;X!==null&&F_(ne,Y,X,Ee,!1),he!==null&&nt!==null&&F_(ne,nt,he,Ee,!0)}}e:{if(Y=J?Ir(J):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var Je=sg;else if(mn(Y))if(rg)Je=xC;else{Je=NC;var me=bC}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?J&&Fa(J.elementType)&&(Je=sg):Je=MC;if(Je&&(Je=Je(i,J))){Pr(ne,Je,a,j);break e}me&&me(i,Y,J),i==="focusout"&&J&&Y.type==="number"&&J.memoizedProps.value!=null&&To(Y,"number",Y.value)}switch(me=J?Ir(J):window,i){case"focusin":(mn(me)||me.contentEditable==="true")&&(wo=me,md=J,Wa=null);break;case"focusout":Wa=md=wo=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,hg(ne,a,j);break;case"selectionchange":if(PC)break;case"keydown":case"keyup":hg(ne,a,j)}var Me;if(T)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else De?Qe(i,a)&&(Le="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(z&&a.locale!=="ko"&&(De||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&De&&(Me=Ss()):(An=j,Ao="value"in An?An.value:An.textContent,De=!0)),me=Mc(J,Le),0<me.length&&(Le=new Ja(Le,i,null,a,j),ne.push({event:Le,listeners:me}),Me?Le.data=Me:(Me=Ct(a),Me!==null&&(Le.data=Me)))),(Me=R?Lt(i,a):Ot(i,a))&&(Le=Mc(J,"onBeforeInput"),0<Le.length&&(me=new Ja("onBeforeInput","beforeinput",null,a,j),ne.push({event:me,listeners:Le}),me.data=Me)),gI(ne,i,J,a,j)}q_(ne,r)})}function Sl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function Mc(i,r){for(var a=r+"Capture",u=[];i!==null;){var y=i,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=pn(i,a),y!=null&&u.unshift(Sl(i,y,_)),y=pn(i,r),y!=null&&u.push(Sl(i,y,_))),i.tag===3)return u;i=i.return}return[]}function TI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function F_(i,r,a,u,y){for(var _=r._reactName,S=[];a!==null&&a!==u;){var I=a,V=I.alternate,J=I.stateNode;if(I=I.tag,V!==null&&V===u)break;I!==5&&I!==26&&I!==27||J===null||(V=J,y?(J=pn(a,_),J!=null&&S.unshift(Sl(a,J,V))):y||(J=pn(a,_),J!=null&&S.push(Sl(a,J,V)))),a=a.return}S.length!==0&&i.push({event:r,listeners:S})}var EI=/\r\n?/g,SI=/\u0000|\uFFFD/g;function z_(i){return(typeof i=="string"?i:""+i).replace(EI,`
`).replace(SI,"")}function G_(i,r){return r=z_(r),z_(i)===r}function tt(i,r,a,u,y,_){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Ln(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Ln(i,""+u);break;case"className":vs(i,"class",u);break;case"tabIndex":vs(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vs(i,a,u);break;case"style":Iu(i,u,_);break;case"data":if(r!=="object"){vs(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=di(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&tt(i,r,"name",y.name,y,null),tt(i,r,"formEncType",y.formEncType,y,null),tt(i,r,"formMethod",y.formMethod,y,null),tt(i,r,"formTarget",y.formTarget,y,null)):(tt(i,r,"encType",y.encType,y,null),tt(i,r,"method",y.method,y,null),tt(i,r,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=di(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Ut);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=di(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),_s(i,"popover",u);break;case"xlinkActuate":Un(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Un(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Un(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Un(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Un(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Un(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Un(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Un(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Un(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":_s(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ud.get(a)||a,_s(i,a,u))}}function Fh(i,r,a,u,y,_){switch(a){case"style":Iu(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?Ln(i,u):(typeof u=="number"||typeof u=="bigint")&&Ln(i,""+u);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ut);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ys.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=i[Ht]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,y),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):_s(i,a,u)}}}function $t(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var u=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var S=a[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,_,S,a,null)}}y&&tt(i,r,"srcSet",a.srcSet,a,null),u&&tt(i,r,"src",a.src,a,null);return;case"input":Ve("invalid",i);var I=_=S=y=null,V=null,J=null;for(u in a)if(a.hasOwnProperty(u)){var j=a[u];if(j!=null)switch(u){case"name":y=j;break;case"type":S=j;break;case"checked":V=j;break;case"defaultChecked":J=j;break;case"value":_=j;break;case"defaultValue":I=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,r));break;default:tt(i,r,u,j,a,null)}}Rr(i,_,I,V,J,S,y,!1);return;case"select":Ve("invalid",i),u=S=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":S=I;break;case"multiple":u=I;default:tt(i,r,y,I,a,null)}r=_,a=S,i.multiple=!!u,r!=null?He(i,!!u,r,!1):a!=null&&He(i,!!u,a,!0);return;case"textarea":Ve("invalid",i),_=y=u=null;for(S in a)if(a.hasOwnProperty(S)&&(I=a[S],I!=null))switch(S){case"value":u=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:tt(i,r,S,I,a,null)}Es(i,u,y,_);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(u=a[V],u!=null))switch(V){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(i,r,V,u,a,null)}return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(u=0;u<El.length;u++)Ve(El[u],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(u=a[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,J,u,a,null)}return;default:if(Fa(r)){for(j in a)a.hasOwnProperty(j)&&(u=a[j],u!==void 0&&Fh(i,r,j,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&tt(i,r,I,u,a,null))}function AI(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,S=null,I=null,V=null,J=null,j=null;for(X in a){var ne=a[X];if(a.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":V=ne;default:u.hasOwnProperty(X)||tt(i,r,X,null,u,ne)}}for(var Y in u){var X=u[Y];if(ne=a[Y],u.hasOwnProperty(Y)&&(X!=null||ne!=null))switch(Y){case"type":_=X;break;case"name":y=X;break;case"checked":J=X;break;case"defaultChecked":j=X;break;case"value":S=X;break;case"defaultValue":I=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:X!==ne&&tt(i,r,Y,X,u,ne)}}Ts(i,S,I,V,J,j,_,y);return;case"select":X=S=I=Y=null;for(_ in a)if(V=a[_],a.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":X=V;default:u.hasOwnProperty(_)||tt(i,r,_,null,u,V)}for(y in u)if(_=u[y],V=a[y],u.hasOwnProperty(y)&&(_!=null||V!=null))switch(y){case"value":Y=_;break;case"defaultValue":I=_;break;case"multiple":S=_;default:_!==V&&tt(i,r,y,_,u,V)}r=I,a=S,u=X,Y!=null?He(i,!!a,Y,!1):!!u!=!!a&&(r!=null?He(i,!!a,r,!0):He(i,!!a,a?[]:"",!1));return;case"textarea":X=Y=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:tt(i,r,I,null,u,y)}for(S in u)if(y=u[S],_=a[S],u.hasOwnProperty(S)&&(y!=null||_!=null))switch(S){case"value":Y=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==_&&tt(i,r,S,y,u,_)}wr(i,Y,X);return;case"option":for(var he in a)if(Y=a[he],a.hasOwnProperty(he)&&Y!=null&&!u.hasOwnProperty(he))switch(he){case"selected":i.selected=!1;break;default:tt(i,r,he,null,u,Y)}for(V in u)if(Y=u[V],X=a[V],u.hasOwnProperty(V)&&Y!==X&&(Y!=null||X!=null))switch(V){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:tt(i,r,V,Y,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)Y=a[Ee],a.hasOwnProperty(Ee)&&Y!=null&&!u.hasOwnProperty(Ee)&&tt(i,r,Ee,null,u,Y);for(J in u)if(Y=u[J],X=a[J],u.hasOwnProperty(J)&&Y!==X&&(Y!=null||X!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:tt(i,r,J,Y,u,X)}return;default:if(Fa(r)){for(var nt in a)Y=a[nt],a.hasOwnProperty(nt)&&Y!==void 0&&!u.hasOwnProperty(nt)&&Fh(i,r,nt,void 0,u,Y);for(j in u)Y=u[j],X=a[j],!u.hasOwnProperty(j)||Y===X||Y===void 0&&X===void 0||Fh(i,r,j,Y,u,X);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!u.hasOwnProperty(B)&&tt(i,r,B,null,u,Y);for(ne in u)Y=u[ne],X=a[ne],!u.hasOwnProperty(ne)||Y===X||Y==null&&X==null||tt(i,r,ne,Y,u,X)}function H_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],_=y.transferSize,S=y.initiatorType,I=y.duration;if(_&&I&&H_(S)){for(S=0,I=y.responseEnd,u+=1;u<a.length;u++){var V=a[u],J=V.startTime;if(J>I)break;var j=V.transferSize,ne=V.initiatorType;j&&H_(ne)&&(V=V.responseEnd,S+=j*(V<I?1:(I-J)/(V-J)))}if(--u,r+=8*(_+S)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var zh=null,Gh=null;function xc(i){return i.nodeType===9?i:i.ownerDocument}function J_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Hh(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jh=null;function II(){var i=window.event;return i&&i.type==="popstate"?i===Jh?!1:(Jh=i,!0):(Jh=null,!1)}var K_=typeof setTimeout=="function"?setTimeout:void 0,RI=typeof clearTimeout=="function"?clearTimeout:void 0,$_=typeof Promise=="function"?Promise:void 0,wI=typeof queueMicrotask=="function"?queueMicrotask:typeof $_<"u"?function(i){return $_.resolve(null).then(i).catch(bI)}:K_;function bI(i){setTimeout(function(){throw i})}function Ys(i){return i==="head"}function Q_(i,r){var a=r,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),ea(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Al(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Al(a);for(var _=a.firstChild;_;){var S=_.nextSibling,I=_.nodeName;_[Mi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=S}}else a==="body"&&Al(i.ownerDocument.body);a=y}while(a);ea(r)}function X_(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function Yh(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Yh(a),Cr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function NI(i,r,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Mi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Hn(i.nextSibling),i===null)break}return null}function MI(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Hn(i.nextSibling),i===null))return null;return i}function W_(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Hn(i.nextSibling),i===null))return null;return i}function Kh(i){return i.data==="$?"||i.data==="$~"}function $h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function xI(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Hn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Qh=null;function Z_(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Hn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function j_(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function ev(i,r,a){switch(r=xc(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Al(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Cr(i)}var Jn=new Map,tv=new Set;function Dc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Zi=ae.d;ae.d={f:DI,r:PI,D:kI,C:VI,L:UI,m:LI,X:qI,S:OI,M:BI};function DI(){var i=Zi.f(),r=Ac();return i||r}function PI(i){var r=Di(i);r!==null&&r.tag===5&&r.type==="form"?_y(r):Zi.r(i)}var Wo=typeof document>"u"?null:document;function nv(i,r,a){var u=Wo;if(u&&typeof r=="string"&&r){var y=yt(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),tv.has(y)||(tv.add(y),i={rel:i,crossOrigin:a,href:r},u.querySelector(y)===null&&(r=u.createElement("link"),$t(r,"link",i),Tt(r),u.head.appendChild(r)))}}function kI(i){Zi.D(i),nv("dns-prefetch",i,null)}function VI(i,r){Zi.C(i,r),nv("preconnect",i,r)}function UI(i,r,a){Zi.L(i,r,a);var u=Wo;if(u&&i&&r){var y='link[rel="preload"][as="'+yt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+yt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+yt(a.imageSizes)+'"]')):y+='[href="'+yt(i)+'"]';var _=y;switch(r){case"style":_=Zo(i);break;case"script":_=jo(i)}Jn.has(_)||(i=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Jn.set(_,i),u.querySelector(y)!==null||r==="style"&&u.querySelector(Cl(_))||r==="script"&&u.querySelector(Il(_))||(r=u.createElement("link"),$t(r,"link",i),Tt(r),u.head.appendChild(r)))}}function LI(i,r){Zi.m(i,r);var a=Wo;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+yt(u)+'"][href="'+yt(i)+'"]',_=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=jo(i)}if(!Jn.has(_)&&(i=E({rel:"modulepreload",href:i},r),Jn.set(_,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Il(_)))return}u=a.createElement("link"),$t(u,"link",i),Tt(u),a.head.appendChild(u)}}}function OI(i,r,a){Zi.S(i,r,a);var u=Wo;if(u&&i){var y=Zn(u).hoistableStyles,_=Zo(i);r=r||"default";var S=y.get(_);if(!S){var I={loading:0,preload:null};if(S=u.querySelector(Cl(_)))I.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Jn.get(_))&&Xh(i,a);var V=S=u.createElement("link");Tt(V),$t(V,"link",i),V._p=new Promise(function(J,j){V.onload=J,V.onerror=j}),V.addEventListener("load",function(){I.loading|=1}),V.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Pc(S,r,u)}S={type:"stylesheet",instance:S,count:1,state:I},y.set(_,S)}}}function qI(i,r){Zi.X(i,r);var a=Wo;if(a&&i){var u=Zn(a).hoistableScripts,y=jo(i),_=u.get(y);_||(_=a.querySelector(Il(y)),_||(i=E({src:i,async:!0},r),(r=Jn.get(y))&&Wh(i,r),_=a.createElement("script"),Tt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function BI(i,r){Zi.M(i,r);var a=Wo;if(a&&i){var u=Zn(a).hoistableScripts,y=jo(i),_=u.get(y);_||(_=a.querySelector(Il(y)),_||(i=E({src:i,async:!0,type:"module"},r),(r=Jn.get(y))&&Wh(i,r),_=a.createElement("script"),Tt(_),$t(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(y,_))}}function iv(i,r,a,u){var y=(y=Ne.current)?Dc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Zo(a.href),a=Zn(y).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Zo(a.href);var _=Zn(y).hoistableStyles,S=_.get(i);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=y.querySelector(Cl(i)))&&!_._p&&(S.instance=_,S.state.loading=5),Jn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(i,a),_||FI(y,i,a,S.state))),r&&u===null)throw Error(s(528,""));return S}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=jo(a),a=Zn(y).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Zo(i){return'href="'+yt(i)+'"'}function Cl(i){return'link[rel="stylesheet"]['+i+"]"}function sv(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function FI(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),$t(r,"link",a),Tt(r),i.head.appendChild(r))}function jo(i){return'[src="'+yt(i)+'"]'}function Il(i){return"script[async]"+i}function rv(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+yt(a.href)+'"]');if(u)return r.instance=u,Tt(u),u;var y=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Tt(u),$t(u,"style",y),Pc(u,a.precedence,i),r.instance=u;case"stylesheet":y=Zo(a.href);var _=i.querySelector(Cl(y));if(_)return r.state.loading|=4,r.instance=_,Tt(_),_;u=sv(a),(y=Jn.get(y))&&Xh(u,y),_=(i.ownerDocument||i).createElement("link"),Tt(_);var S=_;return S._p=new Promise(function(I,V){S.onload=I,S.onerror=V}),$t(_,"link",u),r.state.loading|=4,Pc(_,a.precedence,i),r.instance=_;case"script":return _=jo(a.src),(y=i.querySelector(Il(_)))?(r.instance=y,Tt(y),y):(u=a,(y=Jn.get(_))&&(u=E({},a),Wh(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),Tt(y),$t(y,"link",u),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Pc(u,a.precedence,i));return r.instance}function Pc(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,_=y,S=0;S<u.length;S++){var I=u[S];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Xh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Wh(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var kc=null;function ov(i,r,a){if(kc===null){var u=new Map,y=kc=new Map;y.set(a,u)}else y=kc,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var _=a[y];if(!(_[Mi]||_[gt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(r)||"";S=i+S;var I=u.get(S);I?I.push(_):u.set(S,[_])}}return u}function av(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function zI(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function lv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function GI(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=Zo(u.href),_=r.querySelector(Cl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Vc.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Tt(_);return}_=r.ownerDocument||r,u=sv(u),(y=Jn.get(y))&&Xh(u,y),_=_.createElement("link"),Tt(_);var S=_;S._p=new Promise(function(I,V){S.onload=I,S.onerror=V}),$t(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Vc.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var Zh=0;function HI(i,r){return i.stylesheets&&i.count===0&&Lc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Lc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&Zh===0&&(Zh=62500*CI());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Lc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Zh?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function Vc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Uc=null;function Lc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Uc=new Map,r.forEach(JI,i),Uc=null,Vc.call(i))}function JI(i,r){if(!(r.state.loading&4)){var a=Uc.get(i);if(a)var u=a.get(null);else{a=new Map,Uc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var S=y[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}y=r.instance,S=y.getAttribute("data-precedence"),_=a.get(S)||u,_===u&&a.set(null,y),a.set(S,y),this.count++,u=Vc.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),_?_.parentNode.insertBefore(y,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var Rl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function YI(i,r,a,u,y,_,S,I,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function uv(i,r,a,u,y,_,S,I,V,J,j,ne){return i=new YI(i,r,a,S,V,J,j,ne,I),r=1,_===!0&&(r|=24),_=In(3,null,null,r),i.current=_,_.stateNode=i,r=xd(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:r},Vd(_),i}function cv(i){return i?(i=Mo,i):Mo}function fv(i,r,a,u,y,_){y=cv(y),u.context===null?u.context=y:u.pendingContext=y,u=Vs(r),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Us(i,u,r),a!==null&&(Tn(a,i,r),sl(a,i,r))}function dv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function jh(i,r){dv(i,r),(i=i.alternate)&&dv(i,r)}function hv(i){if(i.tag===13||i.tag===31){var r=Ur(i,67108864);r!==null&&Tn(r,i,67108864),jh(i,67108864)}}function pv(i){if(i.tag===13||i.tag===31){var r=Mn();r=ka(r);var a=Ur(i,r);a!==null&&Tn(a,i,r),jh(i,r)}}var Oc=!0;function KI(i,r,a,u){var y=F.T;F.T=null;var _=ae.p;try{ae.p=2,ep(i,r,a,u)}finally{ae.p=_,F.T=y}}function $I(i,r,a,u){var y=F.T;F.T=null;var _=ae.p;try{ae.p=8,ep(i,r,a,u)}finally{ae.p=_,F.T=y}}function ep(i,r,a,u){if(Oc){var y=tp(u);if(y===null)Bh(i,r,u,qc,a),gv(i,u);else if(XI(y,i,r,a,u))u.stopPropagation();else if(gv(i,u),r&4&&-1<QI.indexOf(i)){for(;y!==null;){var _=Di(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=Wn(_.pendingLanes);if(S!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var V=1<<31-an(S);I.entanglements[1]|=V,S&=~V}_i(_),($e&6)===0&&(Ec=zt()+500,Tl(0))}}break;case 31:case 13:I=Ur(_,2),I!==null&&Tn(I,_,2),Ac(),jh(_,2)}if(_=tp(u),_===null&&Bh(i,r,u,qc,a),_===y)break;y=_}y!==null&&u.stopPropagation()}else Bh(i,r,u,null,a)}}function tp(i){return i=So(i),np(i)}var qc=null;function np(i){if(qc=null,i=xi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=f(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return qc=i,null}function mv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_u()){case xt:return 2;case Vt:return 8;case wi:case vu:return 32;case Ma:return 268435456;default:return 32}default:return 32}}var ip=!1,Ks=null,$s=null,Qs=null,wl=new Map,bl=new Map,Xs=[],QI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gv(i,r){switch(i){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":wl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":bl.delete(r.pointerId)}}function Nl(i,r,a,u,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Di(r),r!==null&&hv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function XI(i,r,a,u,y){switch(r){case"focusin":return Ks=Nl(Ks,i,r,a,u,y),!0;case"dragenter":return $s=Nl($s,i,r,a,u,y),!0;case"mouseover":return Qs=Nl(Qs,i,r,a,u,y),!0;case"pointerover":var _=y.pointerId;return wl.set(_,Nl(wl.get(_)||null,i,r,a,u,y)),!0;case"gotpointercapture":return _=y.pointerId,bl.set(_,Nl(bl.get(_)||null,i,r,a,u,y)),!0}return!1}function yv(i){var r=xi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,Eu(i.priority,function(){pv(a)});return}}else if(r===31){if(r=f(a),r!==null){i.blockedOn=r,Eu(i.priority,function(){pv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Bc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=tp(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Eo=u,a.target.dispatchEvent(u),Eo=null}else return r=Di(a),r!==null&&hv(r),i.blockedOn=a,!1;r.shift()}return!0}function _v(i,r,a){Bc(i)&&a.delete(r)}function WI(){ip=!1,Ks!==null&&Bc(Ks)&&(Ks=null),$s!==null&&Bc($s)&&($s=null),Qs!==null&&Bc(Qs)&&(Qs=null),wl.forEach(_v),bl.forEach(_v)}function Fc(i,r){i.blockedOn===r&&(i.blockedOn=null,ip||(ip=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WI)))}var zc=null;function vv(i){zc!==i&&(zc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zc===i&&(zc=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],y=i[r+2];if(typeof u!="function"){if(np(u||a)===null)continue;break}var _=Di(a);_!==null&&(i.splice(r,3),r-=3,th(_,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function ea(i){function r(V){return Fc(V,i)}Ks!==null&&Fc(Ks,i),$s!==null&&Fc($s,i),Qs!==null&&Fc(Qs,i),wl.forEach(r),bl.forEach(r);for(var a=0;a<Xs.length;a++){var u=Xs[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Xs.length&&(a=Xs[0],a.blockedOn===null);)yv(a),a.blockedOn===null&&Xs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],_=a[u+1],S=y[Ht]||null;if(typeof _=="function")S||vv(a);else if(S){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,S=_[Ht]||null)I=S.formAction;else if(np(y)!==null)continue}else I=S.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),vv(a)}}}function Tv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function sp(i){this._internalRoot=i}Gc.prototype.render=sp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Mn();fv(a,u,i,r,null,null)},Gc.prototype.unmount=sp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;fv(i.current,2,null,i,null,null),Ac(),r[ui]=null}};function Gc(i){this._internalRoot=i}Gc.prototype.unstable_scheduleHydration=function(i){if(i){var r=Ni();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Xs.length&&r!==0&&r<Xs[a].priority;a++);Xs.splice(a,0,i),a===0&&yv(i)}};var Ev=e.version;if(Ev!=="19.2.0")throw Error(s(527,Ev,"19.2.0"));ae.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var ZI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{cs=Hc.inject(ZI),Zt=Hc}catch{}}return xl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",y=by,_=Ny,S=My;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=uv(i,1,!1,null,null,a,u,null,y,_,S,Tv),i[ui]=r.current,qh(i),new sp(r)},xl.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,y="",_=by,S=Ny,I=My,V=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),r=uv(i,1,!0,r,a??null,u,y,V,_,S,I,Tv),r.context=cv(null),a=r.current,u=Mn(),u=ka(u),y=Vs(u),y.callback=null,Us(a,y,u),a=u,r.current.lanes=a,hs(r,a),_i(r),i[ui]=r.current,qh(i),new Gc(r)},xl.version="19.2.0",xl}var xv;function uR(){if(xv)return ap.exports;xv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ap.exports=lR(),ap.exports}var cR=uR();const fR=R0(cR),dR=()=>{};var Dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},hR=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},b0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let A=(f&15)<<2|m>>6,b=m&63;p||(b=64,c||(A=64)),s.push(t[v],t[E],t[A],t[b])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(w0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||m==null||E==null)throw new pR;const A=l<<2|f>>4;if(s.push(A),m!==64){const b=f<<4&240|m>>2;if(s.push(b),E!==64){const q=m<<6&192|E;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class pR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mR=function(n){const e=w0(n);return b0.encodeByteArray(e,!0)},ff=function(n){return mR(n).replace(/\./g,"")},N0=function(n){try{return b0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=()=>gR().__FIREBASE_DEFAULTS__,_R=()=>{if(typeof process>"u"||typeof Dv>"u")return;const n=Dv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&N0(n[1]);return e&&JSON.parse(e)},kf=()=>{try{return dR()||yR()||_R()||vR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},M0=n=>{var e,t;return(t=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},TR=n=>{const e=M0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},x0=()=>{var n;return(n=kf())===null||n===void 0?void 0:n.config},D0=n=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ff(JSON.stringify(t)),ff(JSON.stringify(c)),""].join(".")}const Bl={};function AR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Bl))Bl[e]?n.emulator.push(e):n.prod.push(e);return n}function CR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Pv=!1;function k0(n,e){if(typeof window>"u"||typeof document>"u"||!va(window.location.host)||Bl[n]===e||Bl[n]||Pv)return;Bl[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=AR().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,b){A.setAttribute("width","24"),A.setAttribute("id",b),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function m(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Pv=!0,c()},A}function v(A,b){A.setAttribute("id",b),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=CR(s),b=t("text"),q=document.getElementById(b)||document.createElement("span"),G=t("learnmore"),$=document.getElementById(G)||document.createElement("a"),te=t("preprendIcon"),K=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Z=A.element;f(Z),v($,G);const oe=m();p(K,te),Z.append(K,q,$,oe),document.body.appendChild(Z)}l?(q.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function RR(){var n;const e=(n=kf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MR(){const n=on();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xR(){return!RR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DR(){try{return typeof indexedDB=="object"}catch{return!1}}function PR(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="FirebaseError";class ls extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=kR,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ru.prototype.create)}}class ru{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?VR(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new ls(o,f,s)}}function VR(n,e){return n.replace(UR,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const UR=/\{\$([^}]+)}/g;function LR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jr(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(kv(l)&&kv(c)){if(!jr(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function kv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Pl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function kl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function OR(n,e){const t=new qR(n,e);return t.subscribe.bind(t)}class qR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");BR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=fp),o.error===void 0&&(o.error=fp),o.complete===void 0&&(o.complete=fp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n){return n&&n._delegate?n._delegate:n}class eo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new ER;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GR(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:zR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zR(n){return n===Qr?void 0:n}function GR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new FR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const JR={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},YR=Oe.INFO,KR={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},$R=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=KR[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sm{constructor(e){this.name=e,this._logLevel=YR,this._logHandler=$R,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const QR=(n,e)=>e.some(t=>n instanceof t);let Vv,Uv;function XR(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WR(){return Uv||(Uv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V0=new WeakMap,Ap=new WeakMap,U0=new WeakMap,dp=new WeakMap,rm=new WeakMap;function ZR(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ir(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&V0.set(t,n)}).catch(()=>{}),rm.set(e,n),e}function jR(n){if(Ap.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ap.set(n,e)}let Cp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||U0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ir(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ew(n){Cp=n(Cp)}function tw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(hp(this),e,...t);return U0.set(s,e.sort?e.sort():[e]),ir(s)}:WR().includes(n)?function(...e){return n.apply(hp(this),e),ir(V0.get(this))}:function(...e){return ir(n.apply(hp(this),e))}}function nw(n){return typeof n=="function"?tw(n):(n instanceof IDBTransaction&&jR(n),QR(n,XR())?new Proxy(n,Cp):n)}function ir(n){if(n instanceof IDBRequest)return ZR(n);if(dp.has(n))return dp.get(n);const e=nw(n);return e!==n&&(dp.set(n,e),rm.set(e,n)),e}const hp=n=>rm.get(n);function iw(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=ir(c);return s&&c.addEventListener("upgradeneeded",p=>{s(ir(c.result),p.oldVersion,p.newVersion,ir(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const sw=["get","getKey","getAll","getAllKeys","count"],rw=["put","add","delete","clear"],pp=new Map;function Lv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pp.get(e))return pp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=rw.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||sw.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),o&&p.done]))[0]};return pp.set(e,l),l}ew(n=>({...n,get:(e,t,s)=>Lv(e,t)||n.get(e,t,s),has:(e,t)=>!!Lv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aw(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function aw(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ip="@firebase/app",Ov="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new sm("@firebase/app"),lw="@firebase/app-compat",uw="@firebase/analytics-compat",cw="@firebase/analytics",fw="@firebase/app-check-compat",dw="@firebase/app-check",hw="@firebase/auth",pw="@firebase/auth-compat",mw="@firebase/database",gw="@firebase/data-connect",yw="@firebase/database-compat",_w="@firebase/functions",vw="@firebase/functions-compat",Tw="@firebase/installations",Ew="@firebase/installations-compat",Sw="@firebase/messaging",Aw="@firebase/messaging-compat",Cw="@firebase/performance",Iw="@firebase/performance-compat",Rw="@firebase/remote-config",ww="@firebase/remote-config-compat",bw="@firebase/storage",Nw="@firebase/storage-compat",Mw="@firebase/firestore",xw="@firebase/ai",Dw="@firebase/firestore-compat",Pw="firebase",kw="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",Vw={[Ip]:"fire-core",[lw]:"fire-core-compat",[cw]:"fire-analytics",[uw]:"fire-analytics-compat",[dw]:"fire-app-check",[fw]:"fire-app-check-compat",[hw]:"fire-auth",[pw]:"fire-auth-compat",[mw]:"fire-rtdb",[gw]:"fire-data-connect",[yw]:"fire-rtdb-compat",[_w]:"fire-fn",[vw]:"fire-fn-compat",[Tw]:"fire-iid",[Ew]:"fire-iid-compat",[Sw]:"fire-fcm",[Aw]:"fire-fcm-compat",[Cw]:"fire-perf",[Iw]:"fire-perf-compat",[Rw]:"fire-rc",[ww]:"fire-rc-compat",[bw]:"fire-gcs",[Nw]:"fire-gcs-compat",[Mw]:"fire-fst",[Dw]:"fire-fst-compat",[xw]:"fire-vertex","fire-js":"fire-js",[Pw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new Map,Uw=new Map,wp=new Map;function qv(n,e){try{n.container.addComponent(e)}catch(t){ss.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ha(n){const e=n.name;if(wp.has(e))return ss.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,n);for(const t of df.values())qv(t,n);for(const t of Uw.values())qv(t,n);return!0}function om(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new ru("app","Firebase",Lw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=kw;function L0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Rp,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw sr.create("bad-app-name",{appName:String(o)});if(t||(t=x0()),!t)throw sr.create("no-options");const l=df.get(o);if(l){if(jr(t,l.options)&&jr(s,l.config))return l;throw sr.create("duplicate-app",{appName:o})}const c=new HR(o);for(const p of wp.values())c.addComponent(p);const f=new Ow(t,s,c);return df.set(o,f),f}function O0(n=Rp){const e=df.get(n);if(!e&&n===Rp&&x0())return L0();if(!e)throw sr.create("no-app",{appName:n});return e}function rr(n,e,t){var s;let o=(s=Vw[n])!==null&&s!==void 0?s:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ss.warn(f.join(" "));return}ha(new eo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="firebase-heartbeat-database",Bw=1,$l="firebase-heartbeat-store";let mp=null;function q0(){return mp||(mp=iw(qw,Bw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($l)}catch(t){console.warn(t)}}}}).catch(n=>{throw sr.create("idb-open",{originalErrorMessage:n.message})})),mp}async function Fw(n){try{const t=(await q0()).transaction($l),s=await t.objectStore($l).get(B0(n));return await t.done,s}catch(e){if(e instanceof ls)ss.warn(e.message);else{const t=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ss.warn(t.message)}}}async function Bv(n,e){try{const s=(await q0()).transaction($l,"readwrite");await s.objectStore($l).put(e,B0(n)),await s.done}catch(t){if(t instanceof ls)ss.warn(t.message);else{const s=sr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ss.warn(s.message)}}}function B0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=1024,Gw=30;class Hw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Yw(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Fv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>Gw){const c=Kw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ss.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Fv(),{heartbeatsToSend:s,unsentEntries:o}=Jw(this._heartbeatsCache.heartbeats),l=ff(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ss.warn(t),""}}}function Fv(){return new Date().toISOString().substring(0,10)}function Jw(n,e=zw){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),zv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),zv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Yw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DR()?PR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Fw(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Bv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Bv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function zv(n){return ff(JSON.stringify({version:2,heartbeats:n})).length}function Kw(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(n){ha(new eo("platform-logger",e=>new ow(e),"PRIVATE")),ha(new eo("heartbeat",e=>new Hw(e),"PRIVATE")),rr(Ip,Ov,n),rr(Ip,Ov,"esm2017"),rr("fire-js","")}$w("");var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var or,F0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function N(){}N.prototype=w.prototype,x.D=w.prototype,x.prototype=new N,x.prototype.constructor=x,x.C=function(D,U,O){for(var k=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)k[rt-2]=arguments[rt];return w.prototype[U].apply(D,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,w,N){N||(N=0);var D=Array(16);if(typeof w=="string")for(var U=0;16>U;++U)D[U]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(U=0;16>U;++U)D[U]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=x.g[0],N=x.g[1],U=x.g[2];var O=x.g[3],k=w+(O^N&(U^O))+D[0]+3614090360&4294967295;w=N+(k<<7&4294967295|k>>>25),k=O+(U^w&(N^U))+D[1]+3905402710&4294967295,O=w+(k<<12&4294967295|k>>>20),k=U+(N^O&(w^N))+D[2]+606105819&4294967295,U=O+(k<<17&4294967295|k>>>15),k=N+(w^U&(O^w))+D[3]+3250441966&4294967295,N=U+(k<<22&4294967295|k>>>10),k=w+(O^N&(U^O))+D[4]+4118548399&4294967295,w=N+(k<<7&4294967295|k>>>25),k=O+(U^w&(N^U))+D[5]+1200080426&4294967295,O=w+(k<<12&4294967295|k>>>20),k=U+(N^O&(w^N))+D[6]+2821735955&4294967295,U=O+(k<<17&4294967295|k>>>15),k=N+(w^U&(O^w))+D[7]+4249261313&4294967295,N=U+(k<<22&4294967295|k>>>10),k=w+(O^N&(U^O))+D[8]+1770035416&4294967295,w=N+(k<<7&4294967295|k>>>25),k=O+(U^w&(N^U))+D[9]+2336552879&4294967295,O=w+(k<<12&4294967295|k>>>20),k=U+(N^O&(w^N))+D[10]+4294925233&4294967295,U=O+(k<<17&4294967295|k>>>15),k=N+(w^U&(O^w))+D[11]+2304563134&4294967295,N=U+(k<<22&4294967295|k>>>10),k=w+(O^N&(U^O))+D[12]+1804603682&4294967295,w=N+(k<<7&4294967295|k>>>25),k=O+(U^w&(N^U))+D[13]+4254626195&4294967295,O=w+(k<<12&4294967295|k>>>20),k=U+(N^O&(w^N))+D[14]+2792965006&4294967295,U=O+(k<<17&4294967295|k>>>15),k=N+(w^U&(O^w))+D[15]+1236535329&4294967295,N=U+(k<<22&4294967295|k>>>10),k=w+(U^O&(N^U))+D[1]+4129170786&4294967295,w=N+(k<<5&4294967295|k>>>27),k=O+(N^U&(w^N))+D[6]+3225465664&4294967295,O=w+(k<<9&4294967295|k>>>23),k=U+(w^N&(O^w))+D[11]+643717713&4294967295,U=O+(k<<14&4294967295|k>>>18),k=N+(O^w&(U^O))+D[0]+3921069994&4294967295,N=U+(k<<20&4294967295|k>>>12),k=w+(U^O&(N^U))+D[5]+3593408605&4294967295,w=N+(k<<5&4294967295|k>>>27),k=O+(N^U&(w^N))+D[10]+38016083&4294967295,O=w+(k<<9&4294967295|k>>>23),k=U+(w^N&(O^w))+D[15]+3634488961&4294967295,U=O+(k<<14&4294967295|k>>>18),k=N+(O^w&(U^O))+D[4]+3889429448&4294967295,N=U+(k<<20&4294967295|k>>>12),k=w+(U^O&(N^U))+D[9]+568446438&4294967295,w=N+(k<<5&4294967295|k>>>27),k=O+(N^U&(w^N))+D[14]+3275163606&4294967295,O=w+(k<<9&4294967295|k>>>23),k=U+(w^N&(O^w))+D[3]+4107603335&4294967295,U=O+(k<<14&4294967295|k>>>18),k=N+(O^w&(U^O))+D[8]+1163531501&4294967295,N=U+(k<<20&4294967295|k>>>12),k=w+(U^O&(N^U))+D[13]+2850285829&4294967295,w=N+(k<<5&4294967295|k>>>27),k=O+(N^U&(w^N))+D[2]+4243563512&4294967295,O=w+(k<<9&4294967295|k>>>23),k=U+(w^N&(O^w))+D[7]+1735328473&4294967295,U=O+(k<<14&4294967295|k>>>18),k=N+(O^w&(U^O))+D[12]+2368359562&4294967295,N=U+(k<<20&4294967295|k>>>12),k=w+(N^U^O)+D[5]+4294588738&4294967295,w=N+(k<<4&4294967295|k>>>28),k=O+(w^N^U)+D[8]+2272392833&4294967295,O=w+(k<<11&4294967295|k>>>21),k=U+(O^w^N)+D[11]+1839030562&4294967295,U=O+(k<<16&4294967295|k>>>16),k=N+(U^O^w)+D[14]+4259657740&4294967295,N=U+(k<<23&4294967295|k>>>9),k=w+(N^U^O)+D[1]+2763975236&4294967295,w=N+(k<<4&4294967295|k>>>28),k=O+(w^N^U)+D[4]+1272893353&4294967295,O=w+(k<<11&4294967295|k>>>21),k=U+(O^w^N)+D[7]+4139469664&4294967295,U=O+(k<<16&4294967295|k>>>16),k=N+(U^O^w)+D[10]+3200236656&4294967295,N=U+(k<<23&4294967295|k>>>9),k=w+(N^U^O)+D[13]+681279174&4294967295,w=N+(k<<4&4294967295|k>>>28),k=O+(w^N^U)+D[0]+3936430074&4294967295,O=w+(k<<11&4294967295|k>>>21),k=U+(O^w^N)+D[3]+3572445317&4294967295,U=O+(k<<16&4294967295|k>>>16),k=N+(U^O^w)+D[6]+76029189&4294967295,N=U+(k<<23&4294967295|k>>>9),k=w+(N^U^O)+D[9]+3654602809&4294967295,w=N+(k<<4&4294967295|k>>>28),k=O+(w^N^U)+D[12]+3873151461&4294967295,O=w+(k<<11&4294967295|k>>>21),k=U+(O^w^N)+D[15]+530742520&4294967295,U=O+(k<<16&4294967295|k>>>16),k=N+(U^O^w)+D[2]+3299628645&4294967295,N=U+(k<<23&4294967295|k>>>9),k=w+(U^(N|~O))+D[0]+4096336452&4294967295,w=N+(k<<6&4294967295|k>>>26),k=O+(N^(w|~U))+D[7]+1126891415&4294967295,O=w+(k<<10&4294967295|k>>>22),k=U+(w^(O|~N))+D[14]+2878612391&4294967295,U=O+(k<<15&4294967295|k>>>17),k=N+(O^(U|~w))+D[5]+4237533241&4294967295,N=U+(k<<21&4294967295|k>>>11),k=w+(U^(N|~O))+D[12]+1700485571&4294967295,w=N+(k<<6&4294967295|k>>>26),k=O+(N^(w|~U))+D[3]+2399980690&4294967295,O=w+(k<<10&4294967295|k>>>22),k=U+(w^(O|~N))+D[10]+4293915773&4294967295,U=O+(k<<15&4294967295|k>>>17),k=N+(O^(U|~w))+D[1]+2240044497&4294967295,N=U+(k<<21&4294967295|k>>>11),k=w+(U^(N|~O))+D[8]+1873313359&4294967295,w=N+(k<<6&4294967295|k>>>26),k=O+(N^(w|~U))+D[15]+4264355552&4294967295,O=w+(k<<10&4294967295|k>>>22),k=U+(w^(O|~N))+D[6]+2734768916&4294967295,U=O+(k<<15&4294967295|k>>>17),k=N+(O^(U|~w))+D[13]+1309151649&4294967295,N=U+(k<<21&4294967295|k>>>11),k=w+(U^(N|~O))+D[4]+4149444226&4294967295,w=N+(k<<6&4294967295|k>>>26),k=O+(N^(w|~U))+D[11]+3174756917&4294967295,O=w+(k<<10&4294967295|k>>>22),k=U+(w^(O|~N))+D[2]+718787259&4294967295,U=O+(k<<15&4294967295|k>>>17),k=N+(O^(U|~w))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(U+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+U&4294967295,x.g[3]=x.g[3]+O&4294967295}s.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var N=w-this.blockSize,D=this.B,U=this.h,O=0;O<w;){if(U==0)for(;O<=N;)o(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<w;)if(D[U++]=x.charCodeAt(O++),U==this.blockSize){o(this,D),U=0;break}}else for(;O<w;)if(D[U++]=x[O++],U==this.blockSize){o(this,D),U=0;break}}this.h=U,this.o+=w},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var N=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=N&255,N/=256;for(this.u(x),x=Array(16),w=N=0;4>w;++w)for(var D=0;32>D;D+=8)x[N++]=this.g[w]>>>D&255;return x};function l(x,w){var N=f;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=w(x)}function c(x,w){this.h=w;for(var N=[],D=!0,U=x.length-1;0<=U;U--){var O=x[U]|0;D&&O==w||(N[U]=O,D=!1)}this.g=N}var f={};function p(x){return-128<=x&&128>x?l(x,function(w){return new c([w|0],0>w?-1:0)}):new c([x|0],0>x?-1:0)}function m(x){if(isNaN(x)||!isFinite(x))return E;if(0>x)return $(m(-x));for(var w=[],N=1,D=0;x>=N;D++)w[D]=x/N|0,N*=4294967296;return new c(w,0)}function v(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return $(v(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(w,8)),D=E,U=0;U<x.length;U+=8){var O=Math.min(8,x.length-U),k=parseInt(x.substring(U,U+O),w);8>O?(O=m(Math.pow(w,O)),D=D.j(O).add(m(k))):(D=D.j(N),D=D.add(m(k)))}return D}var E=p(0),A=p(1),b=p(16777216);n=c.prototype,n.m=function(){if(G(this))return-$(this).m();for(var x=0,w=1,N=0;N<this.g.length;N++){var D=this.i(N);x+=(0<=D?D:4294967296+D)*w,w*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(q(this))return"0";if(G(this))return"-"+$(this).toString(x);for(var w=m(Math.pow(x,6)),N=this,D="";;){var U=oe(N,w).g;N=te(N,U.j(w));var O=((0<N.g.length?N.g[0]:N.h)>>>0).toString(x);if(N=U,q(N))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function q(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function G(x){return x.h==-1}n.l=function(x){return x=te(this,x),G(x)?-1:q(x)?0:1};function $(x){for(var w=x.g.length,N=[],D=0;D<w;D++)N[D]=~x.g[D];return new c(N,~x.h).add(A)}n.abs=function(){return G(this)?$(this):this},n.add=function(x){for(var w=Math.max(this.g.length,x.g.length),N=[],D=0,U=0;U<=w;U++){var O=D+(this.i(U)&65535)+(x.i(U)&65535),k=(O>>>16)+(this.i(U)>>>16)+(x.i(U)>>>16);D=k>>>16,O&=65535,k&=65535,N[U]=k<<16|O}return new c(N,N[N.length-1]&-2147483648?-1:0)};function te(x,w){return x.add($(w))}n.j=function(x){if(q(this)||q(x))return E;if(G(this))return G(x)?$(this).j($(x)):$($(this).j(x));if(G(x))return $(this.j($(x)));if(0>this.l(b)&&0>x.l(b))return m(this.m()*x.m());for(var w=this.g.length+x.g.length,N=[],D=0;D<2*w;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(var U=0;U<x.g.length;U++){var O=this.i(D)>>>16,k=this.i(D)&65535,rt=x.i(U)>>>16,ot=x.i(U)&65535;N[2*D+2*U]+=k*ot,K(N,2*D+2*U),N[2*D+2*U+1]+=O*ot,K(N,2*D+2*U+1),N[2*D+2*U+1]+=k*rt,K(N,2*D+2*U+1),N[2*D+2*U+2]+=O*rt,K(N,2*D+2*U+2)}for(D=0;D<w;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=w;D<2*w;D++)N[D]=0;return new c(N,0)};function K(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function Z(x,w){this.g=x,this.h=w}function oe(x,w){if(q(w))throw Error("division by zero");if(q(x))return new Z(E,E);if(G(x))return w=oe($(x),w),new Z($(w.g),$(w.h));if(G(w))return w=oe(x,$(w)),new Z($(w.g),w.h);if(30<x.g.length){if(G(x)||G(w))throw Error("slowDivide_ only works with positive integers.");for(var N=A,D=w;0>=D.l(x);)N=fe(N),D=fe(D);var U=ce(N,1),O=ce(D,1);for(D=ce(D,2),N=ce(N,2);!q(D);){var k=O.add(D);0>=k.l(x)&&(U=U.add(N),O=k),D=ce(D,1),N=ce(N,1)}return w=te(x,U.j(w)),new Z(U,w)}for(U=E;0<=x.l(w);){for(N=Math.max(1,Math.floor(x.m()/w.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=m(N),k=O.j(w);G(k)||0<k.l(x);)N-=D,O=m(N),k=O.j(w);q(O)&&(O=A),U=U.add(O),x=te(x,k)}return new Z(U,x)}n.A=function(x){return oe(this,x).h},n.and=function(x){for(var w=Math.max(this.g.length,x.g.length),N=[],D=0;D<w;D++)N[D]=this.i(D)&x.i(D);return new c(N,this.h&x.h)},n.or=function(x){for(var w=Math.max(this.g.length,x.g.length),N=[],D=0;D<w;D++)N[D]=this.i(D)|x.i(D);return new c(N,this.h|x.h)},n.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),N=[],D=0;D<w;D++)N[D]=this.i(D)^x.i(D);return new c(N,this.h^x.h)};function fe(x){for(var w=x.g.length+1,N=[],D=0;D<w;D++)N[D]=x.i(D)<<1|x.i(D-1)>>>31;return new c(N,x.h)}function ce(x,w){var N=w>>5;w%=32;for(var D=x.g.length-N,U=[],O=0;O<D;O++)U[O]=0<w?x.i(O+N)>>>w|x.i(O+N+1)<<32-w:x.i(O+N);return new c(U,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,F0=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,or=c}).apply(typeof Gv<"u"?Gv:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z0,Vl,G0,Wc,bp,H0,J0,Y0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,C){return h==Array.prototype||h==Object.prototype||(h[T]=C.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var T=0;T<h.length;++T){var C=h[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(h,T){if(T)e:{var C=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var z=h[R];if(!(z in C))break e;C=C[z]}h=h[h.length-1],R=C[h],T=T(R),T!=R&&T!=null&&e(C,h,{configurable:!0,writable:!0,value:T})}}function l(h,T){h instanceof String&&(h+="");var C=0,R=!1,z={next:function(){if(!R&&C<h.length){var W=C++;return{value:T(W,h[W]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(h){return h||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function m(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function v(h,T,C){return h.call.apply(h.bind,arguments)}function E(h,T,C){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),h.apply(T,z)}}return function(){return h.apply(T,arguments)}}function A(h,T,C){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,A.apply(null,arguments)}function b(h,T){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function q(h,T){function C(){}C.prototype=T.prototype,h.aa=T.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(R,z,W){for(var le=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)le[Qe-2]=arguments[Qe];return T.prototype[z].apply(R,le)}}function G(h){const T=h.length;if(0<T){const C=Array(T);for(let R=0;R<T;R++)C[R]=h[R];return C}return[]}function $(h,T){for(let C=1;C<arguments.length;C++){const R=arguments[C];if(p(R)){const z=h.length||0,W=R.length||0;h.length=z+W;for(let le=0;le<W;le++)h[z+le]=R[le]}else h.push(R)}}class te{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function K(h){return/^[\s\xa0]*$/.test(h)}function Z(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function oe(h){return oe[" "](h),h}oe[" "]=function(){};var fe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ce(h,T,C){for(const R in h)T.call(C,h[R],R,h)}function x(h,T){for(const C in h)T.call(void 0,h[C],C,h)}function w(h){const T={};for(const C in h)T[C]=h[C];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,T){let C,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(C in R)h[C]=R[C];for(let W=0;W<N.length;W++)C=N[W],Object.prototype.hasOwnProperty.call(R,C)&&(h[C]=R[C])}}function U(h){var T=1;h=h.split(":");const C=[];for(;0<T&&h.length;)C.push(h.shift()),T--;return h.length&&C.push(h.join(":")),C}function O(h){f.setTimeout(()=>{throw h},0)}function k(){var h=Fe;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class rt{constructor(){this.h=this.g=null}add(T,C){const R=ot.get();R.set(T,C),this.h?this.h.next=R:this.g=R,this.h=R}}var ot=new te(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ge=!1,Fe=new rt,Ge=()=>{const h=f.Promise.resolve(void 0);ae=()=>{h.then(P)}};var P=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(C){O(C)}var T=ot;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}ge=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ue=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};f.addEventListener("test",C,T),f.removeEventListener("test",C,T)}catch{}return h})();function ye(h,T){if(ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(fe){e:{try{oe(T.nodeName);var z=!0;break e}catch{}z=!1}z||(T=null)}}else C=="mouseover"?T=h.fromElement:C=="mouseout"&&(T=h.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ye.aa.h.call(this)}}q(ye,ie);var Ne={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),We=0;function at(h,T,C,R,z){this.listener=h,this.proxy=null,this.src=T,this.type=C,this.capture=!!R,this.ha=z,this.key=++We,this.da=this.fa=!1}function Pn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function hn(h){this.src=h,this.g={},this.h=0}hn.prototype.add=function(h,T,C,R,z){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var le=fo(h,T,R,z);return-1<le?(T=h[le],C||(T.fa=!1)):(T=new at(T,this.src,W,!!R,z),T.fa=C,h.push(T)),T};function vr(h,T){var C=T.type;if(C in h.g){var R=h.g[C],z=Array.prototype.indexOf.call(R,T,void 0),W;(W=0<=z)&&Array.prototype.splice.call(R,z,1),W&&(Pn(T),h.g[C].length==0&&(delete h.g[C],h.h--))}}function fo(h,T,C,R){for(var z=0;z<h.length;++z){var W=h[z];if(!W.da&&W.listener==T&&W.capture==!!C&&W.ha==R)return z}return-1}var Xn="closure_lm_"+(1e6*Math.random()|0),Tr={};function ho(h,T,C,R,z){if(Array.isArray(T)){for(var W=0;W<T.length;W++)ho(h,T[W],C,R,z);return null}return C=_u(C),h&&h[xe]?h.K(T,C,m(R)?!!R.capture:!1,z):nd(h,T,C,!1,R,z)}function nd(h,T,C,R,z,W){if(!T)throw Error("Invalid event type");var le=m(z)?!!z.capture:!!z,Qe=Na(h);if(Qe||(h[Xn]=Qe=new hn(h)),C=Qe.add(T,C,R,le,W),C.proxy)return C;if(R=yu(),C.proxy=R,R.src=h,R.listener=C,h.addEventListener)ue||(z=le),z===void 0&&(z=!1),h.addEventListener(T.toString(),R,z);else if(h.attachEvent)h.attachEvent(mo(T.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function yu(){function h(C){return T.call(h.src,h.listener,C)}const T=id;return h}function po(h,T,C,R,z){if(Array.isArray(T))for(var W=0;W<T.length;W++)po(h,T[W],C,R,z);else R=m(R)?!!R.capture:!!R,C=_u(C),h&&h[xe]?(h=h.i,T=String(T).toString(),T in h.g&&(W=h.g[T],C=fo(W,C,R,z),-1<C&&(Pn(W[C]),Array.prototype.splice.call(W,C,1),W.length==0&&(delete h.g[T],h.h--)))):h&&(h=Na(h))&&(T=h.g[T.toString()],h=-1,T&&(h=fo(T,C,R,z)),(C=-1<h?T[h]:null)&&Er(C))}function Er(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[xe])vr(T.i,h);else{var C=h.type,R=h.proxy;T.removeEventListener?T.removeEventListener(C,R,h.capture):T.detachEvent?T.detachEvent(mo(C),R):T.addListener&&T.removeListener&&T.removeListener(R),(C=Na(T))?(vr(C,h),C.h==0&&(C.src=null,T[Xn]=null)):Pn(h)}}}function mo(h){return h in Tr?Tr[h]:Tr[h]="on"+h}function id(h,T){if(h.da)h=!0;else{T=new ye(T,this);var C=h.listener,R=h.ha||h.src;h.fa&&Er(h),h=C.call(R,T)}return h}function Na(h){return h=h[Xn],h instanceof hn?h:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _u(h){return typeof h=="function"?h:(h[zt]||(h[zt]=function(T){return h.handleEvent(T)}),h[zt])}function xt(){Q.call(this),this.i=new hn(this),this.M=this,this.F=null}q(xt,Q),xt.prototype[xe]=!0,xt.prototype.removeEventListener=function(h,T,C,R){po(this,h,T,C,R)};function Vt(h,T){var C,R=h.F;if(R)for(C=[];R;R=R.F)C.push(R);if(h=h.M,R=T.type||T,typeof T=="string")T=new ie(T,h);else if(T instanceof ie)T.target=T.target||h;else{var z=T;T=new ie(R,h),D(T,z)}if(z=!0,C)for(var W=C.length-1;0<=W;W--){var le=T.g=C[W];z=wi(le,R,!0,T)&&z}if(le=T.g=h,z=wi(le,R,!0,T)&&z,z=wi(le,R,!1,T)&&z,C)for(W=0;W<C.length;W++)le=T.g=C[W],z=wi(le,R,!1,T)&&z}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var C=h.g[T],R=0;R<C.length;R++)Pn(C[R]);delete h.g[T],h.h--}}this.F=null},xt.prototype.K=function(h,T,C,R){return this.i.add(String(h),T,!1,C,R)},xt.prototype.L=function(h,T,C,R){return this.i.add(String(h),T,!0,C,R)};function wi(h,T,C,R){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var z=!0,W=0;W<T.length;++W){var le=T[W];if(le&&!le.da&&le.capture==C){var Qe=le.listener,Ct=le.ha||le.src;le.fa&&vr(h.i,le),z=Qe.call(Ct,R)!==!1&&z}}return z&&!R.defaultPrevented}function vu(h,T,C){if(typeof h=="function")C&&(h=A(h,C));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:f.setTimeout(h,T||0)}function Ma(h){h.g=vu(()=>{h.g=null,h.i&&(h.i=!1,Ma(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class sd extends Q{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Ma(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(h){Q.call(this),this.h=h,this.g={}}q(Sr,Q);var cs=[];function Zt(h){ce(h.g,function(T,C){this.g.hasOwnProperty(C)&&Er(T)},h),h.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),Zt(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=f.JSON.stringify,an=f.JSON.parse,rd=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function xa(){}xa.prototype.h=null;function Tu(h){return h.h||(h.h=h.i())}function Ar(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fs(){ie.call(this,"d")}q(fs,ie);function Wn(){ie.call(this,"c")}q(Wn,ie);var Vn={},ds=null;function go(){return ds=ds||new xt}Vn.La="serverreachability";function Da(h){ie.call(this,Vn.La,h)}q(Da,ie);function bi(h){const T=go();Vt(T,new Da(T))}Vn.STAT_EVENT="statevent";function hs(h,T){ie.call(this,Vn.STAT_EVENT,h),this.stat=T}q(hs,ie);function Gt(h){const T=go();Vt(T,new hs(T,h))}Vn.Ma="timingevent";function Pa(h,T){ie.call(this,Vn.Ma,h),this.size=T}q(Pa,ie);function ps(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},T)}function ms(){this.g=!0}ms.prototype.xa=function(){this.g=!1};function ka(h,T,C,R,z,W){h.info(function(){if(h.g)if(W)for(var le="",Qe=W.split("&"),Ct=0;Ct<Qe.length;Ct++){var De=Qe[Ct].split("=");if(1<De.length){var Lt=De[0];De=De[1];var Ot=Lt.split("_");le=2<=Ot.length&&Ot[1]=="type"?le+(Lt+"="+De+"&"):le+(Lt+"=redacted&")}}else le=null;else le=W;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+T+`
`+C+`
`+le})}function Va(h,T,C,R,z,W,le){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+T+`
`+C+`
`+W+" "+le})}function Ni(h,T,C,R){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+li(h,C)+(R?" "+R:"")})}function Eu(h,T){h.info(function(){return"TIMEOUT: "+T})}ms.prototype.info=function(){};function li(h,T){if(!h.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var R=C[h];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var W=z[0];if(W!="noop"&&W!="stop"&&W!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return kn(C)}catch{return T}}var gt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ui;function gs(){}q(gs,xa),gs.prototype.g=function(){return new XMLHttpRequest},gs.prototype.i=function(){return{}},ui=new gs;function ci(h,T,C,R){this.j=h,this.i=T,this.l=C,this.R=R||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Su}function Su(){this.i=null,this.g="",this.h=!1}var Ua={},Mi={};function Cr(h,T,C){h.L=1,h.v=wr(yt(T)),h.m=C,h.P=!0,xi(h,null)}function xi(h,T){h.F=Date.now(),Zn(h),h.A=yt(h.v);var C=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),ki(C.i,"t",R),h.C=0,C=h.j.J,h.h=new Su,h.g=Ou(h.j,C?T:null,!h.m),0<h.O&&(h.M=new sd(A(h.Y,h,h.g),h.O)),T=h.U,C=h.g,R=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(cs[0]=z.toString()),z=cs);for(var W=0;W<z.length;W++){var le=ho(C,z[W],R||T.handleEvent,!1,T.h||T);if(!le)break;T.g[le.key]=le}T=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),bi(),ka(h.i,h.u,h.A,h.l,h.R,h.m)}ci.prototype.ca=function(h){h=h.target;const T=this.M;T&&cn(h)==3?T.j():this.Y(h)},ci.prototype.Y=function(h){try{if(h==this.g)e:{const Ot=cn(this.g);var T=this.g.Ba();const Ns=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Mr(this.g)))){this.J||Ot!=4||T==7||(T==8||0>=Ns?bi(3):bi(2)),yo(this);var C=this.g.Z();this.X=C;t:if(Di(this)){var R=Mr(this.g);h="";var z=R.length,W=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),ys(this);var le="";break t}this.h.i=new f.TextDecoder}for(T=0;T<z;T++)this.h.h=!0,h+=this.h.i.decode(R[T],{stream:!(W&&T==z-1)});R.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=C==200,Va(this.i,this.u,this.A,this.l,this.R,Ot,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Ct=this.g;if((Qe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Qe)){var De=Qe;break t}}De=null}if(C=De)Ni(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fi(this,C);else{this.o=!1,this.s=3,Gt(12),ln(this),ys(this);break e}}if(this.P){C=!0;let mn;for(;!this.J&&this.C<le.length;)if(mn=Ir(this,le),mn==Mi){Ot==4&&(this.s=4,Gt(14),C=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Ua){this.s=4,Gt(15),Ni(this.i,this.l,le,"[Invalid Chunk]"),C=!1;break}else Ni(this.i,this.l,mn,null),fi(this,mn);if(Di(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||le.length!=0||this.h.h||(this.s=1,Gt(16),C=!1),this.o=this.o&&C,!C)Ni(this.i,this.l,le,"[Invalid Chunked Response]"),ln(this),ys(this);else if(0<le.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Ka(Lt),Lt.M=!0,Gt(11))}}else Ni(this.i,this.l,le,null),fi(this,le);Ot==4&&ln(this),this.o&&!this.J&&(Ot==4?Vu(this.j,this):(this.o=!1,Zn(this)))}else Nu(this.g),C==400&&0<le.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),ln(this),ys(this)}}}catch{}finally{}};function Di(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ir(h,T){var C=h.C,R=T.indexOf(`
`,C);return R==-1?Mi:(C=Number(T.substring(C,R)),isNaN(C)?Ua:(R+=1,R+C>T.length?Mi:(T=T.slice(R,R+C),h.C=R+C,T)))}ci.prototype.cancel=function(){this.J=!0,ln(this)};function Zn(h){h.S=Date.now()+h.I,Tt(h,h.I)}function Tt(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ps(A(h.ba,h),T)}function yo(h){h.B&&(f.clearTimeout(h.B),h.B=null)}ci.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Eu(this.i,this.A),this.L!=2&&(bi(),Gt(17)),ln(this),this.s=2,ys(this)):Tt(this,this.S-h)};function ys(h){h.j.G==0||h.J||Vu(h.j,h)}function ln(h){yo(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,Zt(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function fi(h,T){try{var C=h.j;if(C.G!=0&&(C.g==h||_s(C.h,h))){if(!h.K&&_s(C.h,h)&&C.G==3){try{var R=C.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)ws(C),Rs(C);else break e;Ya(C),Gt(18)}}else C.za=z[1],0<C.za-C.T&&37500>z[2]&&C.F&&C.v==0&&!C.C&&(C.C=ps(A(C.Za,C),6e3));if(1>=Au(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ui(C,11)}else if((h.K||C.g==h)&&ws(C),!K(T))for(z=C.Da.g.parse(T),T=0;T<z.length;T++){let De=z[T];if(C.T=De[0],De=De[1],C.G==2)if(De[0]=="c"){C.K=De[1],C.ia=De[2];const Lt=De[3];Lt!=null&&(C.la=Lt,C.j.info("VER="+C.la));const Ot=De[4];Ot!=null&&(C.Aa=Ot,C.j.info("SVER="+C.Aa));const Ns=De[5];Ns!=null&&typeof Ns=="number"&&0<Ns&&(R=1.5*Ns,C.L=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const mn=h.g;if(mn){const Pr=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pr){var W=R.h;W.g||Pr.indexOf("spdy")==-1&&Pr.indexOf("quic")==-1&&Pr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(vs(W,W.h),W.h=null))}if(R.D){const Li=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Li&&(R.ya=Li,He(R.I,R.D,Li))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),R=C;var le=h;if(R.qa=Lu(R,R.J?R.ia:null,R.W),le.K){Un(R.h,le);var Qe=le,Ct=R.L;Ct&&(Qe.I=Ct),Qe.B&&(yo(Qe),Zn(Qe)),R.g=le}else Pu(R);0<C.i.length&&Io(C)}else De[0]!="stop"&&De[0]!="close"||Ui(C,7);else C.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Ui(C,7):Ha(C):De[0]!="noop"&&C.l&&C.l.ta(De),C.v=0)}}bi(4)}catch{}}var od=class{constructor(h,T){this.g=h,this.map=T}};function La(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Au(h){return h.h?1:h.g?h.g.size:0}function _s(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function vs(h,T){h.g?h.g.add(T):h.h=T}function Un(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}La.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function un(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const C of h.g.values())T=T.concat(C.D);return T}return G(h.i)}function Cu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var T=[],C=h.length,R=0;R<C;R++)T.push(h[R]);return T}T=[],C=0;for(R in h)T[C++]=h[R];return T}function ad(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var T=[];h=h.length;for(var C=0;C<h;C++)T.push(C);return T}T=[],C=0;for(const R in h)T[C++]=R;return T}}}function _o(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var C=ad(h),R=Cu(h),z=R.length,W=0;W<z;W++)T.call(void 0,R[W],C&&C[W],h)}var qa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vo(h,T){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var R=h[C].indexOf("="),z=null;if(0<=R){var W=h[C].substring(0,R);z=h[C].substring(R+1)}else W=h[C];T(W,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Pi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pi){this.h=h.h,Ts(this,h.j),this.o=h.o,this.g=h.g,Rr(this,h.s),this.l=h.l;var T=h.i,C=new di;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),To(this,C),this.m=h.m}else h&&(T=String(h).match(qa))?(this.h=!1,Ts(this,T[1]||"",!0),this.o=Es(T[2]||""),this.g=Es(T[3]||"",!0),Rr(this,T[4]),this.l=Es(T[5]||"",!0),To(this,T[6]||"",!0),this.m=Es(T[7]||"")):(this.h=!1,this.i=new di(null,this.h))}Pi.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Ln(T,Ba,!0),":");var C=this.g;return(C||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Ln(T,Ba,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Ln(C,C.charAt(0)=="/"?Fa:Iu,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Ln(C,cd)),h.join("")};function yt(h){return new Pi(h)}function Ts(h,T,C){h.j=C?Es(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function Rr(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function To(h,T,C){T instanceof di?(h.i=T,Ru(h.i,h.h)):(C||(T=Ln(T,ud)),h.i=new di(T,h.h))}function He(h,T,C){h.i.set(T,C)}function wr(h){return He(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Es(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ln(h,T,C){return typeof h=="string"?(h=encodeURI(h).replace(T,ld),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ld(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ba=/[#\/\?@]/g,Iu=/[#\?:]/g,Fa=/[#\?]/g,ud=/[#\?@]/g,cd=/#/g;function di(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function Ut(h){h.g||(h.g=new Map,h.h=0,h.i&&vo(h.i,function(T,C){h.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=di.prototype,n.add=function(h,T){Ut(this),this.i=null,h=Sn(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(T),this.h+=1,this};function Eo(h,T){Ut(h),T=Sn(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function So(h,T){return Ut(h),T=Sn(h,T),h.g.has(T)}n.forEach=function(h,T){Ut(this),this.g.forEach(function(C,R){C.forEach(function(z){h.call(T,z,R,this)},this)},this)},n.na=function(){Ut(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let R=0;R<T.length;R++){const z=h[R];for(let W=0;W<z.length;W++)C.push(T[R])}return C},n.V=function(h){Ut(this);let T=[];if(typeof h=="string")So(this,h)&&(T=T.concat(this.g.get(Sn(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)T=T.concat(h[C])}return T},n.set=function(h,T){return Ut(this),this.i=null,h=Sn(this,h),So(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},n.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function ki(h,T,C){Eo(h,T),0<C.length&&(h.i=null,h.g.set(Sn(h,T),G(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var R=T[C];const W=encodeURIComponent(String(R)),le=this.V(R);for(R=0;R<le.length;R++){var z=W;le[R]!==""&&(z+="="+encodeURIComponent(String(le[R]))),h.push(z)}}return this.i=h.join("&")};function Sn(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function Ru(h,T){T&&!h.j&&(Ut(h),h.i=null,h.g.forEach(function(C,R){var z=R.toLowerCase();R!=z&&(Eo(this,R),ki(this,z,C))},h)),h.j=T}function za(h,T){const C=new ms;if(f.Image){const R=new Image;R.onload=b(pn,C,"TestLoadImage: loaded",!0,T,R),R.onerror=b(pn,C,"TestLoadImage: error",!1,T,R),R.onabort=b(pn,C,"TestLoadImage: abort",!1,T,R),R.ontimeout=b(pn,C,"TestLoadImage: timeout",!1,T,R),f.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else T(!1)}function wu(h,T){const C=new ms,R=new AbortController,z=setTimeout(()=>{R.abort(),pn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:R.signal}).then(W=>{clearTimeout(z),W.ok?pn(C,"TestPingServer: ok",!0,T):pn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(z),pn(C,"TestPingServer: error",!1,T)})}function pn(h,T,C,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(C)}catch{}}function jn(){this.g=new rd}function Ga(h,T,C){const R=C||"";try{_o(h,function(z,W){let le=z;m(z)&&(le=kn(z)),T.push(R+W+"="+encodeURIComponent(le))})}catch(z){throw T.push(R+"type="+encodeURIComponent("_badmap")),z}}function hi(h){this.l=h.Ub||null,this.j=h.eb||!1}q(hi,xa),hi.prototype.g=function(){return new An(this.l,this.j)},hi.prototype.i=(function(h){return function(){return h}})({});function An(h,T){xt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(An,xt),n=An.prototype,n.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,Ss(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||f).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ss(this)),this.g&&(this.readyState=3,Ss(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ao(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ao(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?pi(this):Ss(this),this.readyState==3&&Ao(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,pi(this))},n.Qa=function(h){this.g&&(this.response=h,pi(this))},n.ga=function(){this.g&&pi(this)};function pi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ss(h)}n.setRequestHeader=function(h,T){this.u.append(h,T)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=T.next();return h.join(`\r
`)};function Ss(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(An.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function br(h){let T="";return ce(h,function(C,R){T+=R,T+=":",T+=C,T+=`\r
`}),T}function As(h,T,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=br(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):He(h,T,C))}function lt(h){xt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(lt,xt);var jt=/^https?$/i,Vi=["POST","PUT"];n=lt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,T,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ui.g(),this.v=this.o?Tu(this.o):Tu(ui),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(W){Nr(this,W);return}if(h=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)C.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const W of R.keys())C.set(W,R.get(W));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(W=>W.toLowerCase()=="content-type"),z=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Vi,T,void 0))||R||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of C)this.g.setRequestHeader(W,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Co(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){Nr(this,W)}};function Nr(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,Cs(h),Is(h)}function Cs(h){h.A||(h.A=!0,Vt(h,"complete"),Vt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Vt(this,"complete"),Vt(this,"abort"),Is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Is(this,!0)),lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bu(this):this.bb())},n.bb=function(){bu(this)};function bu(h){if(h.h&&typeof c<"u"&&(!h.v[1]||cn(h)!=4||h.Z()!=2)){if(h.u&&cn(h)==4)vu(h.Ea,0,h);else if(Vt(h,"readystatechange"),cn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var R;if(R=le===0){var z=String(h.D).match(qa)[1]||null;!z&&f.self&&f.self.location&&(z=f.self.location.protocol.slice(0,-1)),R=!jt.test(z?z.toLowerCase():"")}C=R}if(C)Vt(h,"complete"),Vt(h,"success");else{h.m=6;try{var W=2<cn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",Cs(h)}}finally{Is(h)}}}}function Is(h,T){if(h.g){Co(h);const C=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||Vt(h,"ready");try{C.onreadystatechange=R}catch{}}}function Co(h){h.I&&(f.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function cn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),an(T)}};function Mr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Nu(h){const T={};h=(h.g&&2<=cn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(K(h[R]))continue;var C=U(h[R]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const W=T[z]||[];T[z]=W,W.push(C)}x(T,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xr(h,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||T}function Mu(h){this.Aa=0,this.i=[],this.j=new ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xr("baseRetryDelayMs",5e3,h),this.cb=xr("retryDelaySeedMs",1e4,h),this.Wa=xr("forwardChannelMaxRetries",2,h),this.wa=xr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new La(h&&h.concurrentRequestLimit),this.Da=new jn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Mu.prototype,n.la=8,n.G=1,n.connect=function(h,T,C,R){Gt(0),this.W=h,this.H=T||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.I=Lu(this,null,this.W),Io(this)};function Ha(h){if(xu(h),h.G==3){var T=h.U++,C=yt(h.I);if(He(C,"SID",h.K),He(C,"RID",T),He(C,"TYPE","terminate"),Dr(h,C),T=new ci(h,h.j,T),T.L=2,T.v=wr(yt(C)),C=!1,f.navigator&&f.navigator.sendBeacon)try{C=f.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&f.Image&&(new Image().src=T.v,C=!0),C||(T.g=Ou(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Zn(T)}$a(h)}function Rs(h){h.g&&(Ka(h),h.g.cancel(),h.g=null)}function xu(h){Rs(h),h.u&&(f.clearTimeout(h.u),h.u=null),ws(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Io(h){if(!Oa(h.h)&&!h.s){h.s=!0;var T=h.Ga;ae||Ge(),ge||(ae(),ge=!0),Fe.add(T,h),h.B=0}}function fd(h,T){return Au(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ps(A(h.Ga,h,T),Uu(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new ci(this,this.j,h);let W=this.o;if(this.S&&(W?(W=w(W),D(W,this.S)):W=this.S),this.m!==null||this.O||(z.H=W,W=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=Ja(this,z,T),C=yt(this.I),He(C,"RID",h),He(C,"CVER",22),this.D&&He(C,"X-HTTP-Session-Id",this.D),Dr(this,C),W&&(this.O?T="headers="+encodeURIComponent(String(br(W)))+"&"+T:this.m&&As(C,this.m,W)),vs(this.h,z),this.Ua&&He(C,"TYPE","init"),this.P?(He(C,"$req",T),He(C,"SID","null"),z.T=!0,Cr(z,C,null)):Cr(z,C,T),this.G=2}}else this.G==3&&(h?Du(this,h):this.i.length==0||Oa(this.h)||Du(this))};function Du(h,T){var C;T?C=T.l:C=h.U++;const R=yt(h.I);He(R,"SID",h.K),He(R,"RID",C),He(R,"AID",h.T),Dr(h,R),h.m&&h.o&&As(R,h.m,h.o),C=new ci(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),T&&(h.i=T.D.concat(h.i)),T=Ja(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),vs(h.h,C),Cr(C,R,T)}function Dr(h,T){h.H&&ce(h.H,function(C,R){He(T,R,C)}),h.l&&_o({},function(C,R){He(T,R,C)})}function Ja(h,T,C){C=Math.min(h.i.length,C);var R=h.l?A(h.l.Na,h.l,h):null;e:{var z=h.i;let W=-1;for(;;){const le=["count="+C];W==-1?0<C?(W=z[0].g,le.push("ofs="+W)):W=0:le.push("ofs="+W);let Qe=!0;for(let Ct=0;Ct<C;Ct++){let De=z[Ct].g;const Lt=z[Ct].map;if(De-=W,0>De)W=Math.max(0,z[Ct].g-100),Qe=!1;else try{Ga(Lt,le,"req"+De+"_")}catch{R&&R(Lt)}}if(Qe){R=le.join("&");break e}}}return h=h.i.splice(0,C),T.D=h,R}function Pu(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;ae||Ge(),ge||(ae(),ge=!0),Fe.add(T,h),h.v=0}}function Ya(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ps(A(h.Fa,h),Uu(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ps(A(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Rs(this),ku(this))};function Ka(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function ku(h){h.g=new ci(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=yt(h.qa);He(T,"RID","rpc"),He(T,"SID",h.K),He(T,"AID",h.T),He(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&He(T,"TO",h.ja),He(T,"TYPE","xmlhttp"),Dr(h,T),h.m&&h.o&&As(T,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=wr(yt(T)),C.m=null,C.P=!0,xi(C,h)}n.Za=function(){this.C!=null&&(this.C=null,Rs(this),Ya(this),Gt(19))};function ws(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function Vu(h,T){var C=null;if(h.g==T){ws(h),Ka(h),h.g=null;var R=2}else if(_s(h.h,T))C=T.D,Un(h.h,T),R=1;else return;if(h.G!=0){if(T.o)if(R==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var z=h.B;R=go(),Vt(R,new Pa(R,C)),Io(h)}else Pu(h);else if(z=T.s,z==3||z==0&&0<T.X||!(R==1&&fd(h,T)||R==2&&Ya(h)))switch(C&&0<C.length&&(T=h.h,T.i=T.i.concat(C)),z){case 1:Ui(h,5);break;case 4:Ui(h,10);break;case 3:Ui(h,6);break;default:Ui(h,2)}}}function Uu(h,T){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*T}function Ui(h,T){if(h.j.info("Error code "+T),T==2){var C=A(h.fb,h),R=h.Xa;const z=!R;R=new Pi(R||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ts(R,"https"),wr(R),z?za(R.toString(),C):wu(R.toString(),C)}else Gt(2);h.G=0,h.l&&h.l.sa(T),$a(h),xu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function $a(h){if(h.G=0,h.ka=[],h.l){const T=un(h.h);(T.length!=0||h.i.length!=0)&&($(h.ka,T),$(h.ka,h.i),h.h.i.length=0,G(h.i),h.i.length=0),h.l.ra()}}function Lu(h,T,C){var R=C instanceof Pi?yt(C):new Pi(C);if(R.g!="")T&&(R.g=T+"."+R.g),Rr(R,R.s);else{var z=f.location;R=z.protocol,T=T?T+"."+z.hostname:z.hostname,z=+z.port;var W=new Pi(null);R&&Ts(W,R),T&&(W.g=T),z&&Rr(W,z),C&&(W.l=C),R=W}return C=h.D,T=h.ya,C&&T&&He(R,C,T),He(R,"VER",h.la),Dr(h,R),R}function Ou(h,T,C){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new lt(new hi({eb:C})):new lt(h.pa),T.Ha(h.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}n=qu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ro(){}Ro.prototype.g=function(h,T){return new fn(h,T)};function fn(h,T){xt.call(this),this.g=new Mu(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!K(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!K(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new bs(this)}q(fn,xt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ha(this.g)},fn.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=kn(h),h=C);T.i.push(new od(T.Ya++,h)),T.G==3&&Io(T)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ha(this.g),delete this.g,fn.aa.N.call(this)};function Bu(h){fs.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const C in T){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}q(Bu,fs);function Fu(){Wn.call(this),this.status=1}q(Fu,Wn);function bs(h){this.g=h}q(bs,qu),bs.prototype.ua=function(){Vt(this.g,"a")},bs.prototype.ta=function(h){Vt(this.g,new Bu(h))},bs.prototype.sa=function(h){Vt(this.g,new Fu)},bs.prototype.ra=function(){Vt(this.g,"b")},Ro.prototype.createWebChannel=Ro.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Y0=function(){return new Ro},J0=function(){return go()},H0=Vn,bp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,Wc=gt,Ht.COMPLETE="complete",G0=Ht,Ar.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Vl=Ar,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,z0=lt}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const Hv="@firebase/firestore",Jv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new sm("@firebase/firestore");function ta(){return to.logLevel}function de(n,...e){if(to.logLevel<=Oe.DEBUG){const t=e.map(am);to.debug(`Firestore (${Ea}): ${n}`,...t)}}function rs(n,...e){if(to.logLevel<=Oe.ERROR){const t=e.map(am);to.error(`Firestore (${Ea}): ${n}`,...t)}}function lr(n,...e){if(to.logLevel<=Oe.WARN){const t=e.map(am);to.warn(`Firestore (${Ea}): ${n}`,...t)}}function am(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,K0(n,s,t)}function K0(n,e,t){let s=`FIRESTORE (${Ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw rs(s),new Error(s)}function Xe(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||K0(e,o,s)}function we(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class Xw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ww{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ar,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ar)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new $0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Zw{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jw{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Zw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Yv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Yv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=t1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Pe(n,e){return n<e?-1:n>e?1:0}function Np(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=n.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Pe(s,o);{const l=Q0(),c=n1(l.encode(Kv(n,t)),l.encode(Kv(e,t)));return c!==0?c:Pe(s,o)}}t+=s>65535?2:1}return Pe(n.length,e.length)}function Kv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function n1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pe(n[t],e[t]);return Pe(n.length,e.length)}function pa(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="__name__";class vi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=vi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const s=vi.isNumericId(e),o=vi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?vi.extractNumericId(e).compare(vi.extractNumericId(t)):Np(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return or.fromString(e.substring(4,e.length-2))}}class pt extends vi{construct(e,t,s){return new pt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const i1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends vi{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return i1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$v}static keyField(){return new Xt([$v])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(pt.fromString(e))}static fromName(e){return new Te(pt.fromString(e).popFirst(5))}static empty(){return new Te(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function r1(n,e,t,s){if(e===!0&&s===!0)throw new _e(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qv(n){if(!Te.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function X0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function um(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function Ql(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=um(n);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n,e){const t={typeString:n};return e&&(t.value=e),t}function au(n,e){if(!X0(n))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new _e(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=-62135596800,Wv=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Wv);return new dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xv)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wv}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(au(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Mt("string",dt._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new dt(0,0))}static max(){return new Ie(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function o1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(s===1e9?new dt(t+1,0):new dt(t,s));return new ur(o,Te.empty(),e)}function a1(n){return new ur(n.readTime,n.key,Xl)}class ur{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ur(Ie.min(),Te.empty(),Xl)}static max(){return new ur(Ie.max(),Te.empty(),Xl)}}function l1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==u1)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((o=>o?se.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((v=>{c[m]=v,++f,f===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function f1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Aa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this._e(s),this.ae=s=>t.writeSequenceNumber(s))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Vf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=-1;function Uf(n){return n==null}function hf(n){return n===0&&1/n==-1/0}function d1(n){return typeof n=="number"&&Number.isInteger(n)&&!hf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="";function h1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zv(e)),e=p1(n.get(t),e);return Zv(e)}function p1(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case W0:t+="";break;default:t+=l}}return t}function Zv(n){return n+W0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Z0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Qt.RED,this.left=o??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Qt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eT(this.data.getIterator())}getIteratorFrom(e){return new eT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class eT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new ii([])}unionWith(e){let t=new kt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new j0("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const m1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=m1.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fr(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="server_timestamp",tS="__type__",nS="__previous_value__",iS="__local_write_time__";function fm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[tS])===null||t===void 0?void 0:t.stringValue)===eS}function Lf(n){const e=n.mapValue.fields[nS];return fm(e)?Lf(e):e}function Wl(n){const e=cr(n.mapValue.fields[iS].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t,s,o,l,c,f,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const pf="(default)";class Zl{constructor(e,t){this.projectId=e,this.database=t||pf}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===pf}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="__type__",y1="__max__",Kc={mapValue:{}},rS="__vector__",mf="value";function dr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fm(n)?4:v1(n)?9007199254740991:_1(n)?10:11:Ae(28295,{value:n})}function Ii(n,e){if(n===e)return!0;const t=dr(n);if(t!==dr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wl(n).isEqual(Wl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=cr(o.timestampValue),f=cr(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return fr(o.bytesValue).isEqual(fr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return At(o.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return At(o.integerValue)===At(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=At(o.doubleValue),f=At(l.doubleValue);return c===f?hf(c)===hf(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return pa(n.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(jv(c)!==jv(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Ii(c[p],f[p])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function jl(n,e){return(n.values||[]).find((t=>Ii(t,e)))!==void 0}function ma(n,e){if(n===e)return 0;const t=dr(n),s=dr(e);if(t!==s)return Pe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=At(l.integerValue||l.doubleValue),p=At(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return tT(n.timestampValue,e.timestampValue);case 4:return tT(Wl(n),Wl(e));case 5:return Np(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=fr(l),p=fr(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let m=0;m<f.length&&m<p.length;m++){const v=Pe(f[m],p[m]);if(v!==0)return v}return Pe(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Pe(At(l.latitude),At(c.latitude));return f!==0?f:Pe(At(l.longitude),At(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return nT(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var f,p,m,v;const E=l.fields||{},A=c.fields||{},b=(f=E[mf])===null||f===void 0?void 0:f.arrayValue,q=(p=A[mf])===null||p===void 0?void 0:p.arrayValue,G=Pe(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((v=q==null?void 0:q.values)===null||v===void 0?void 0:v.length)||0);return G!==0?G:nT(b,q)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Kc.mapValue&&c===Kc.mapValue)return 0;if(l===Kc.mapValue)return 1;if(c===Kc.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const A=Np(p[E],v[E]);if(A!==0)return A;const b=ma(f[p[E]],m[v[E]]);if(b!==0)return b}return Pe(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{le:t})}}function tT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=cr(n),s=cr(e),o=Pe(t.seconds,s.seconds);return o!==0?o:Pe(t.nanos,s.nanos)}function nT(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=ma(t[o],s[o]);if(l)return l}return Pe(t.length,s.length)}function ga(n){return Mp(n)}function Mp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=cr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return fr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Mp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Mp(t.fields[c])}`;return o+"}"})(n.mapValue):Ae(61005,{value:n})}function Zc(n){switch(dr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(n);return e?16+Zc(e):16;case 5:return 2*n.stringValue.length;case 6:return fr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Zc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return oo(s.fields,((l,c)=>{o+=l.length+Zc(c)})),o})(n.mapValue);default:throw Ae(13486,{value:n})}}function xp(n){return!!n&&"integerValue"in n}function dm(n){return!!n&&"arrayValue"in n}function iT(n){return!!n&&"nullValue"in n}function sT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jc(n){return!!n&&"mapValue"in n}function _1(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sS])===null||t===void 0?void 0:t.stringValue)===rS}function Fl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return oo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Fl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===y1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(t)}setAll(e){let t=Xt.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=Fl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];jc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){oo(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Yn(Fl(this.value))}}function oS(n){const e=[];return oo(n.fields,((t,s)=>{const o=new Xt([t]);if(jc(s)){const l=oS(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new sn(e,0,Ie.min(),Ie.min(),Ie.min(),Yn.empty(),0)}static newFoundDocument(e,t,s,o){return new sn(e,1,t,Ie.min(),s,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Ie.min(),Ie.min(),Yn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Ie.min(),Ie.min(),Yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.position=e,this.inclusive=t}}function rT(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Te.comparator(Te.fromName(c.referenceValue),t.key):s=ma(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function oT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ii(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function T1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{}class Pt extends aS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new S1(e,t,s):t==="array-contains"?new I1(e,s):t==="in"?new R1(e,s):t==="not-in"?new w1(e,s):t==="array-contains-any"?new b1(e,s):new Pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new A1(e,s):new C1(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ma(t,this.value)):t!==null&&dr(this.value)===dr(t)&&this.matchesComparison(ma(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends aS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ri(e,t)}matches(e){return lS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function lS(n){return n.op==="and"}function uS(n){return E1(n)&&lS(n)}function E1(n){for(const e of n.filters)if(e instanceof Ri)return!1;return!0}function Dp(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+ga(n.value);if(uS(n))return n.filters.map((e=>Dp(e))).join(",");{const e=n.filters.map((t=>Dp(t))).join(",");return`${n.op}(${e})`}}function cS(n,e){return n instanceof Pt?(function(s,o){return o instanceof Pt&&s.op===o.op&&s.field.isEqual(o.field)&&Ii(s.value,o.value)})(n,e):n instanceof Ri?(function(s,o){return o instanceof Ri&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,f)=>l&&cS(c,o.filters[f])),!0):!1})(n,e):void Ae(19439)}function fS(n){return n instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ga(t.value)}`})(n):n instanceof Ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(fS).join(" ,")+"}"})(n):"Filter"}class S1 extends Pt{constructor(e,t,s){super(e,t,s),this.key=Te.fromName(s.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class A1 extends Pt{constructor(e,t){super(e,"in",t),this.keys=dS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class C1 extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=dS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>Te.fromName(s.referenceValue)))}class I1 extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dm(t)&&jl(t.arrayValue,this.value)}}class R1 extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jl(this.value.arrayValue,t)}}class w1 extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jl(this.value.arrayValue,t)}}class b1 extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>jl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Pe=null}}function aT(n,e=null,t=[],s=[],o=null,l=null,c=null){return new N1(n,e,t,s,o,l,c)}function hm(n){const e=we(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Dp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Uf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ga(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ga(s))).join(",")),e.Pe=t}return e.Pe}function pm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!T1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oT(n.startAt,e.startAt)&&oT(n.endAt,e.endAt)}function Pp(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function M1(n,e,t,s,o,l,c,f){return new Of(n,e,t,s,o,l,c,f)}function mm(n){return new Of(n)}function lT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function x1(n){return n.collectionGroup!==null}function zl(n){const e=we(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new kt(Xt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new yf(l,s))})),t.has(Xt.keyField().canonicalString())||e.Te.push(new yf(Xt.keyField(),s))}return e.Te}function Ti(n){const e=we(n);return e.Ie||(e.Ie=D1(e,zl(n))),e.Ie}function D1(n,e){if(n.limitType==="F")return aT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new yf(o.field,l)}));const t=n.endAt?new gf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new gf(n.startAt.position,n.startAt.inclusive):null;return aT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function kp(n,e,t){return new Of(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qf(n,e){return pm(Ti(n),Ti(e))&&n.limitType===e.limitType}function hS(n){return`${hm(Ti(n))}|lt:${n.limitType}`}function na(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>fS(o))).join(", ")}]`),Uf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>ga(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>ga(o))).join(",")),`Target(${s})`})(Ti(n))}; limitType=${n.limitType})`}function Bf(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Te.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of zl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,f,p){const m=rT(c,f,p);return c.inclusive?m<=0:m<0})(s.startAt,zl(s),o)||s.endAt&&!(function(c,f,p){const m=rT(c,f,p);return c.inclusive?m>=0:m>0})(s.endAt,zl(s),o))})(n,e)}function P1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pS(n){return(e,t)=>{let s=!1;for(const o of zl(n)){const l=k1(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function k1(n,e,t){const s=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),m=f.data.field(l);return p!==null&&m!==null?ma(p,m):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Z0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new mt(Te.comparator);function os(){return V1}const mS=new mt(Te.comparator);function Ul(...n){let e=mS;for(const t of n)e=e.insert(t.key,t);return e}function gS(n){let e=mS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Xr(){return Gl()}function yS(){return Gl()}function Gl(){return new ao((n=>n.toString()),((n,e)=>n.isEqual(e)))}const U1=new mt(Te.comparator),L1=new kt(Te.comparator);function qe(...n){let e=L1;for(const t of n)e=e.add(t);return e}const O1=new kt(Pe);function q1(){return O1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hf(e)?"-0":e}}function _S(n){return{integerValue:""+n}}function B1(n,e){return d1(e)?_S(e):gm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this._=void 0}}function F1(n,e,t){return n instanceof _f?(function(o,l){const c={fields:{[tS]:{stringValue:eS},[iS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&fm(l)&&(l=Lf(l)),l&&(c.fields[nS]=l),{mapValue:c}})(t,e):n instanceof eu?TS(n,e):n instanceof tu?ES(n,e):(function(o,l){const c=vS(o,l),f=uT(c)+uT(o.Ee);return xp(c)&&xp(o.Ee)?_S(f):gm(o.serializer,f)})(n,e)}function z1(n,e,t){return n instanceof eu?TS(n,e):n instanceof tu?ES(n,e):t}function vS(n,e){return n instanceof vf?(function(s){return xp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class _f extends Ff{}class eu extends Ff{constructor(e){super(),this.elements=e}}function TS(n,e){const t=SS(e);for(const s of n.elements)t.some((o=>Ii(o,s)))||t.push(s);return{arrayValue:{values:t}}}class tu extends Ff{constructor(e){super(),this.elements=e}}function ES(n,e){let t=SS(e);for(const s of n.elements)t=t.filter((o=>!Ii(o,s)));return{arrayValue:{values:t}}}class vf extends Ff{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function uT(n){return At(n.integerValue||n.doubleValue)}function SS(n){return dm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function G1(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof eu&&o instanceof eu||s instanceof tu&&o instanceof tu?pa(s.elements,o.elements,Ii):s instanceof vf&&o instanceof vf?Ii(s.Ee,o.Ee):s instanceof _f&&o instanceof _f})(n.transform,e.transform)}class H1{constructor(e,t){this.version=e,this.transformResults=t}}class ns{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ns}static exists(e){return new ns(void 0,e)}static updateTime(e){return new ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ef(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zf{}function AS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new IS(n.key,ns.none()):new lu(n.key,n.data,ns.none());{const t=n.data,s=Yn.empty();let o=new kt(Xt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new lo(n.key,s,new ii(o.toArray()),ns.none())}}function J1(n,e,t){n instanceof lu?(function(o,l,c){const f=o.value.clone(),p=fT(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof lo?(function(o,l,c){if(!ef(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=fT(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(CS(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Hl(n,e,t,s){return n instanceof lu?(function(l,c,f,p){if(!ef(l.precondition,c))return f;const m=l.value.clone(),v=dT(l.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof lo?(function(l,c,f,p){if(!ef(l.precondition,c))return f;const m=dT(l.fieldTransforms,p,c),v=c.data;return v.setAll(CS(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,f){return ef(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function Y1(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=vS(s.transform,o||null);l!=null&&(t===null&&(t=Yn.empty()),t.set(s.field,l))}return t||null}function cT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&pa(s,o,((l,c)=>G1(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class lu extends zf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class lo extends zf{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function CS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function fT(n,e,t){const s=new Map;Xe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,z1(c,f,t[o]))}return s}function dT(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,F1(l,c,e))}return s}class IS extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K1 extends zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&J1(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Hl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Hl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=yS();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=AS(c,f);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,((t,s)=>cT(t,s)))&&pa(this.baseMutations,e.baseMutations,((t,s)=>cT(t,s)))}}class ym{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Xe(e.mutations.length===s.length,58842,{Ve:e.mutations.length,me:s.length});let o=(function(){return U1})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new ym(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,ze;function W1(n){switch(n){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function RS(n){if(n===void 0)return rs("GRPC error has no .code"),re.UNKNOWN;switch(n){case Nt.OK:return re.OK;case Nt.CANCELLED:return re.CANCELLED;case Nt.UNKNOWN:return re.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return re.INTERNAL;case Nt.UNAVAILABLE:return re.UNAVAILABLE;case Nt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Nt.NOT_FOUND:return re.NOT_FOUND;case Nt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Nt.ABORTED:return re.ABORTED;case Nt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Nt.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:n})}}(ze=Nt||(Nt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new or([4294967295,4294967295],0);function hT(n){const e=Q0().encode(n),t=new F0;return t.update(e),new Uint8Array(t.digest())}function pT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new or([t,s],0),new or([o,l],0)]}class _m{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ll(`Invalid padding: ${t}`);if(s<0)throw new Ll(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ll(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ll(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=or.fromNumber(this.fe)}pe(e,t,s){let o=e.add(t.multiply(or.fromNumber(s)));return o.compare(Z1)===1&&(o=new or([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=hT(e),[s,o]=pT(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(s,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new _m(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.fe===0)return;const t=hT(e),[s,o]=pT(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(s,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Gf(Ie.min(),o,new mt(Pe),os(),qe())}}class uu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new uu(s,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.be=o}}class wS{constructor(e,t){this.targetId=e,this.De=t}}class bS{constructor(e,t,s=Wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class mT{constructor(){this.ve=0,this.Ce=gT(),this.Fe=Wt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=qe(),t=qe(),s=qe();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:l})}})),new uu(this.Fe,this.Me,e,t,s)}ke(){this.xe=!1,this.Ce=gT()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class j1{constructor(e){this.We=e,this.Ge=new Map,this.ze=os(),this.je=$c(),this.Je=$c(),this.He=new mt(Pe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const s=this.tt(t);switch(e.state){case 0:this.nt(t)&&s.Be(e.resumeToken);break;case 1:s.Ue(),s.Oe||s.ke(),s.Be(e.resumeToken);break;case 2:s.Ue(),s.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(s.Ke(),s.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),s.Be(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((s,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,s=e.De.count,o=this.st(t);if(o){const l=o.target;if(Pp(l))if(s===0){const c=new Te(l.path);this.Xe(t,c,sn.newNoDocument(c,Ie.min()))}else Xe(s===1,20013,{expectedCount:s});else{const c=this.ot(t);if(c!==s){const f=this._t(e),p=f?this.ut(f,e,c):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=fr(s).toUint8Array()}catch(p){if(p instanceof j0)return lr("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new _m(c,o,l)}catch(p){return lr(p instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.fe===0?null:f}ut(e,t,s){return t.De.count===s-this.ht(e,t.targetId)?0:2}ht(e,t){const s=this.We.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.We.lt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const f=this.st(c);if(f){if(l.current&&Pp(f.target)){const p=new Te(f.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,sn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let s=qe();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new Gf(e,t,this.He,this.ze,s);return this.ze=os(),this.je=$c(),this.Je=$c(),this.He=new mt(Pe),o}Ze(e,t){if(!this.nt(e))return;const s=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,s),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,s){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),s&&(this.ze=this.ze.insert(t,s))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new mT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new kt(Pe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new kt(Pe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mT),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function $c(){return new mt(Te.comparator)}function gT(){return new mt(Te.comparator)}const eb={asc:"ASCENDING",desc:"DESCENDING"},tb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nb={and:"AND",or:"OR"};class ib{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vp(n,e){return n.useProto3Json||Uf(e)?e:{value:e}}function Tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sb(n,e){return Tf(n,e.toTimestamp())}function Ei(n){return Xe(!!n,49232),Ie.fromTimestamp((function(t){const s=cr(t);return new dt(s.seconds,s.nanos)})(n))}function vm(n,e){return Up(n,e).canonicalString()}function Up(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function MS(n){const e=pt.fromString(n);return Xe(VS(e),10190,{key:e.toString()}),e}function Lp(n,e){return vm(n.databaseId,e.path)}function gp(n,e){const t=MS(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(DS(t))}function xS(n,e){return vm(n.databaseId,e)}function rb(n){const e=MS(n);return e.length===4?pt.emptyPath():DS(e)}function Op(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DS(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yT(n,e,t){return{name:Lp(n,e),fields:t.value.mapValue.fields}}function ob(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Xe(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const v=m.code===void 0?re.UNKNOWN:RS(m.code);return new _e(v,m.message||"")})(c);t=new bS(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=gp(n,s.document.name),l=Ei(s.document.updateTime),c=s.document.createTime?Ei(s.document.createTime):Ie.min(),f=new Yn({mapValue:{fields:s.document.fields}}),p=sn.newFoundDocument(o,l,c,f),m=s.targetIds||[],v=s.removedTargetIds||[];t=new tf(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=gp(n,s.document),l=s.readTime?Ei(s.readTime):Ie.min(),c=sn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new tf([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=gp(n,s.document),l=s.removedTargetIds||[];t=new tf([],l,o,null)}else{if(!("filter"in e))return Ae(11601,{At:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new X1(o,l),f=s.targetId;t=new wS(f,c)}}return t}function ab(n,e){let t;if(e instanceof lu)t={update:yT(n,e.key,e.value)};else if(e instanceof IS)t={delete:Lp(n,e.key)};else if(e instanceof lo)t={update:yT(n,e.key,e.data),updateMask:gb(e.fieldMask)};else{if(!(e instanceof K1))return Ae(16599,{Rt:e.type});t={verify:Lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof _f)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof eu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof tu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof vf)return{fieldPath:c.field.canonicalString(),increment:f.Ee};throw Ae(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:sb(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(n,e.precondition)),t}function lb(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?Ei(o.updateTime):Ei(l);return c.isEqual(Ie.min())&&(c=Ei(l)),new H1(c,o.transformResults||[])})(t,e)))):[]}function ub(n,e){return{documents:[xS(n,e.path)]}}function cb(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=xS(n,o);const l=(function(m){if(m.length!==0)return kS(Ri.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(A){return{field:ia(A.field),direction:hb(A.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Vp(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function fb(n){let e=rb(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Xe(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const A=PS(E);return A instanceof Ri&&uS(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(q){return new yf(sa(q.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(A)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let A;return A=typeof E=="object"?E.value:E,Uf(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(E){const A=!!E.before,b=E.values||[];return new gf(b,A)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const A=!E.before,b=E.values||[];return new gf(b,A)})(t.endAt)),M1(e,o,c,l,f,"F",p,m)}function db(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=sa(t.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=sa(t.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=sa(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=sa(t.unaryFilter.field);return Pt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pt.create(sa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ri.create(t.compositeFilter.filters.map((s=>PS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function hb(n){return eb[n]}function pb(n){return tb[n]}function mb(n){return nb[n]}function ia(n){return{fieldPath:n.canonicalString()}}function sa(n){return Xt.fromServerFormat(n.fieldPath)}function kS(n){return n instanceof Pt?(function(t){if(t.op==="=="){if(sT(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NAN"}};if(iT(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sT(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NOT_NAN"}};if(iT(t.value))return{unaryFilter:{field:ia(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ia(t.field),op:pb(t.op),value:t.value}}})(n):n instanceof Ri?(function(t){const s=t.getFilters().map((o=>kS(o)));return s.length===1?s[0]:{compositeFilter:{op:mb(t.op),filters:s}}})(n):Ae(54877,{filter:n})}function gb(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function VS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t,s,o,l=Ie.min(),c=Ie.min(),f=Wt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.gt=e}}function _b(n){const e=fb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.Dn=new Tb}addToCollectionParentIndex(e,t){return this.Dn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(ur.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Tb{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new kt(pt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new kt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},US=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(US,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ya(0)}static ur(){return new ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="LruGarbageCollector",Eb=1048576;function TT([n,e],[t,s]){const o=Pe(n,t);return o===0?Pe(e,s):o}class Sb{constructor(e){this.Tr=e,this.buffer=new kt(TT),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();TT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ab{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){de(vT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Aa(t)?de(vT,"Ignoring IndexedDB error during garbage collection: ",t):await Sa(t)}await this.Rr(3e5)}))}}class Cb{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Vf.ue);const s=new Sb(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(_T)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_T):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let s,o,l,c,f,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),ta()<=Oe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function Ib(n,e){return new Cb(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.changes=new ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Hl(s.mutation,o,ii.empty(),dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=qe()){const o=Xr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Ul();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Xr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,qe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=os();const c=Gl(),f=(function(){return Gl()})();return t.forEach(((p,m)=>{const v=s.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof lo)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Hl(v.mutation,m,v.mutation.getFieldMask(),dt.now())):c.set(m.key,ii.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>{var E;return f.set(m,new wb(v,(E=c.get(m))!==null&&E!==void 0?E:null))})),f)))}recalculateAndSaveOverlays(e,t){const s=Gl();let o=new mt(((c,f)=>c-f)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||ii.empty();v=f.applyToLocalView(m,v),s.set(p,v);const E=(o.get(f.batchId)||qe()).add(p);o=o.insert(f.batchId,E)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),m=p.key,v=p.value,E=yS();v.forEach((A=>{if(!l.has(A)){const b=AS(t.get(A),s.get(A));b!==null&&E.set(A,b),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return Te.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):x1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):se.resolve(Xr());let f=Xl,p=l;return c.next((m=>se.forEach(m,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{p=p.insert(v,A)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,qe()))).next((v=>({batchId:f,changes:gS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((s=>{let o=Ul();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Ul();return this.indexManager.getCollectionParents(e,l).next((f=>se.forEach(f,(p=>{const m=(function(E,A){return new Of(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,sn.newInvalidDocument(v)))}));let f=Ul();return c.forEach(((p,m)=>{const v=l.get(p);v!==void 0&&Hl(v.mutation,m,ii.empty(),dt.now()),Bf(t,m)&&(f=f.insert(p,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return se.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ei(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:_b(o.bundledQuery),readTime:Ei(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.overlays=new mt(Te.comparator),this.kr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xr();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.wt(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.kr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const o=Xr(),l=t.length+1,c=new Te(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new mt(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=Xr(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const f=Xr(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>f.set(m,v))),!(f.size()>=o)););return se.resolve(f)}wt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(s.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new Q1(t,s));let l=this.kr.get(t);l===void 0&&(l=qe(),this.kr.set(t,l)),this.kr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.qr=new kt(Bt.Qr),this.$r=new kt(Bt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const s=new Bt(e,t);this.qr=this.qr.add(s),this.$r=this.$r.add(s)}Kr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Bt(e,t))}Gr(e,t){e.forEach((s=>this.removeReference(s,t)))}zr(e){const t=new Te(new pt([])),s=new Bt(t,e),o=new Bt(t,e+1),l=[];return this.$r.forEachInRange([s,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Te(new pt([])),s=new Bt(t,e),o=new Bt(t,e+1);let l=qe();return this.$r.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Bt(e,0),s=this.qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Te.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new kt(Bt.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new $1(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Yr=this.Yr.add(new Bt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?cm:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([s,o],(c=>{const f=this.Zr(c.Hr);l.push(f)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kt(Pe);return t.forEach((o=>{const l=new Bt(o,0),c=new Bt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(f=>{s=s.add(f.Hr)}))})),se.resolve(this.ei(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Te.isDocumentKey(l)||(l=l.child(""));const c=new Bt(new Te(l),0);let f=new kt(Pe);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(f=f.add(p.Hr)),!0)}),c),se.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Yr;return se.forEach(t.mutations,(o=>{const l=new Bt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=s}))}rr(e){}containsKey(e,t){const s=new Bt(t,0),o=this.Yr.firstAfterOrEqual(s);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.ni=e,this.docs=(function(){return new mt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let s=os();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():sn.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=os();const c=t.path,f=new Te(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||l1(a1(v),s)<=0||(o.has(v.key)||Bf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ae(9500)}ri(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new kb(this)}getSize(e){return se.resolve(this.size)}}class kb extends Rb{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.persistence=e,this.ii=new ao((t=>hm(t)),pm),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.si=0,this.oi=new Tm,this.targetCount=0,this._i=ya.ar()}forEachTarget(e,t){return this.ii.forEach(((s,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.si&&(this.si=t),se.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ya(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.hr(t),se.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ii.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ii.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.oi.Kr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.oi.Gr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.oi.Jr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,t){this.ai={},this.overlays={},this.ui=new Vf(0),this.ci=!1,this.ci=!0,this.li=new xb,this.referenceDelegate=e(this),this.hi=new Vb(this),this.indexManager=new vb,this.remoteDocumentCache=(function(o){return new Pb(o)})((s=>this.referenceDelegate.Pi(s))),this.serializer=new yb(t),this.Ti=new Nb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ai[e.toKey()];return s||(s=new Db(t,this.referenceDelegate),this.ai[e.toKey()]=s),s}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const o=new Ub(this.ui.next());return this.referenceDelegate.Ii(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return se.or(Object.values(this.ai).map((s=>()=>s.containsKey(e,t))))}}class Ub extends c1{constructor(e){super(),this.currentSequenceNumber=e}}class Em{constructor(e){this.persistence=e,this.Ai=new Tm,this.Ri=null}static Vi(e){return new Em(e)}get mi(){if(this.Ri)return this.Ri;throw Ae(60996)}addReference(e,t,s){return this.Ai.addReference(s,t),this.mi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ai.removeReference(s,t),this.mi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,(s=>{const o=Te.fromPath(s);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((s=>{s?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return se.or([()=>se.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ef{constructor(e,t){this.persistence=e,this.gi=new ao((s=>h1(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=Ib(this,t)}static Vi(e,t){return new Ef(e,t)}Ii(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}yr(e){let t=0;return this.gr(e,(s=>{t++})).next((()=>t))}gr(e,t){return se.forEach(this.gi,((s,o)=>this.Sr(e,s,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Ie.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.gi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),se.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zc(e.data.value)),t}Sr(e,t,s){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Is=s,this.ds=o}static Es(e,t){let s=qe(),o=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Sm(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return xR()?8:f1(on())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Lb;return this.ws(e,t,c).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,c,f.size)}))})).next((()=>l.result))}Ss(e,t,s,o){return s.documentReadCount<this.Vs?(ta()<=Oe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",na(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(ta()<=Oe.DEBUG&&de("QueryEngine","Query:",na(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.fs*o?(ta()<=Oe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",na(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):se.resolve())}ps(e,t){if(lT(t))return se.resolve(null);let s=Ti(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=kp(t,null,"F"),s=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=qe(...l);return this.gs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.bs(t,f);return this.Ds(t,m,c,p.readTime)?this.ps(e,kp(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,s,o){return lT(t)||o.isEqual(Ie.min())?se.resolve(null):this.gs.getDocuments(e,s).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,s,o)?se.resolve(null):(ta()<=Oe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),na(t)),this.vs(e,c,t,o1(o,Xl)).next((f=>f)))}))}bs(e,t){let s=new kt(pS(e));return t.forEach(((o,l)=>{Bf(e,l)&&(s=s.add(l))})),s}Ds(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,s){return ta()<=Oe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",na(t)),this.gs.getDocumentsMatchingQuery(e,t,ur.min(),s)}vs(e,t,s,o){return this.gs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="LocalStore",qb=3e8;class Bb{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new mt(Pe),this.Ms=new ao((l=>hm(l)),pm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(s)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bb(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Fb(n,e,t,s){return new Bb(n,e,t,s)}async function OS(n,e){const t=we(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let p=qe();for(const m of o){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of l){f.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Bs:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function zb(n,e){const t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,p,m,v){const E=m.batch,A=E.keys();let b=se.resolve();return A.forEach((q=>{b=b.next((()=>v.getEntry(p,q))).next((G=>{const $=m.docVersions.get(q);Xe($!==null,48541),G.version.compareTo($)<0&&(E.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))}))})),b.next((()=>f.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=qe();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(p=p.add(f.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function qS(n){const e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function Gb(n,e){const t=we(n),s=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const f=[];e.targetChanges.forEach(((v,E)=>{const A=o.get(E);if(!A)return;f.push(t.hi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,v.addedDocuments,E))));let b=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(Wt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,s)),o=o.insert(E,b),(function(G,$,te){return G.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=qb?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(A,b,v)&&f.push(t.hi.updateTargetData(l,b))}));let p=os(),m=qe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(Hb(l,c,e.documentUpdates).next((v=>{p=v.Ls,m=v.ks}))),!s.isEqual(Ie.min())){const v=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return se.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function Hb(n,e,t){let s=qe(),o=qe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=os();return t.forEach(((f,p)=>{const m=l.get(f);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):de(Am,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function Jb(n,e){const t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=cm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Yb(n,e){const t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.hi.getTargetData(s,e).next((l=>l?(o=l,se.resolve(o)):t.hi.allocateTargetId(s).next((c=>(o=new nr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.hi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Fs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(s.targetId,s),t.Ms.set(e,s.targetId)),s}))}async function qp(n,e,t){const s=we(n),o=s.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Aa(c))throw c;de(Am,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Fs=s.Fs.remove(e),s.Ms.delete(o.target)}function ET(n,e,t){const s=we(n);let o=Ie.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,v){const E=we(p),A=E.Ms.get(v);return A!==void 0?se.resolve(E.Fs.get(A)):E.hi.getTargetData(m,v)})(s,c,Ti(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.hi.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?l:qe()))).next((f=>(Kb(s,P1(e),f),{documents:f,qs:l})))))}function Kb(n,e,t){let s=n.xs.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.xs.set(e,s)}class ST{constructor(){this.activeTargetIds=q1()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $b{constructor(){this.Fo=new ST,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,s){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ST,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="ConnectivityMonitor";class CT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){de(AT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){de(AT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc=null;function Bp(){return Qc===null?Qc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qc++,"0x"+Qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="RestConnection",Xb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wb{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.Ko=this.databaseId.database===pf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const c=Bp(),f=this.Go(e,t.toUriEncodedString());de(yp,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:m}=new URL(f),v=va(m);return this.jo(e,f,p,s,v).then((E=>(de(yp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw lr(yp,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}Jo(e,t,s,o,l,c){return this.Wo(e,t,s,o,l)}zo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ea})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const s=Xb[e];return`${this.$o}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class jb extends Wb{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,s,o,l){const c=Bp();return new Promise(((f,p)=>{const m=new z0;m.setWithCredentials(!0),m.listenOnce(G0.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Wc.NO_ERROR:const E=m.getResponseJson();de(tn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Wc.TIMEOUT:de(tn,`RPC '${e}' ${c} timed out`),p(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const A=m.getStatus();if(de(tn,`RPC '${e}' ${c} failed with status:`,A,"response text:",m.getResponseText()),A>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const q=b==null?void 0:b.error;if(q&&q.status&&q.message){const G=(function(te){const K=te.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(K)>=0?K:re.UNKNOWN})(q.status);p(new _e(G,q.message))}else p(new _e(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new _e(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{de(tn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);de(tn,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",v,s,15)}))}P_(e,t,s){const o=Bp(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Y0(),f=J0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");de(tn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=c.createWebChannel(v,p);this.T_(E);let A=!1,b=!1;const q=new Zb({Ho:$=>{b?de(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(A||(de(tn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),de(tn,`RPC '${e}' stream ${o} sending:`,$),E.send($))},Yo:()=>E.close()}),G=($,te,K)=>{$.listen(te,(Z=>{try{K(Z)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return G(E,Vl.EventType.OPEN,(()=>{b||(de(tn,`RPC '${e}' stream ${o} transport opened.`),q.s_())})),G(E,Vl.EventType.CLOSE,(()=>{b||(b=!0,de(tn,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(E))})),G(E,Vl.EventType.ERROR,($=>{b||(b=!0,lr(tn,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),q.__(new _e(re.UNAVAILABLE,"The operation could not be completed")))})),G(E,Vl.EventType.MESSAGE,($=>{var te;if(!b){const K=$.data[0];Xe(!!K,16349);const Z=K,oe=(Z==null?void 0:Z.error)||((te=Z[0])===null||te===void 0?void 0:te.error);if(oe){de(tn,`RPC '${e}' stream ${o} received error:`,oe);const fe=oe.status;let ce=(function(N){const D=Nt[N];if(D!==void 0)return RS(D)})(fe),x=oe.message;ce===void 0&&(ce=re.INTERNAL,x="Unknown error status: "+fe+" with message "+oe.message),b=!0,q.__(new _e(ce,x)),E.close()}else de(tn,`RPC '${e}' stream ${o} received:`,K),q.a_(K)}})),G(f,H0.STAT_EVENT,($=>{$.stat===bp.PROXY?de(tn,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===bp.NOPROXY&&de(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.o_()}),0),q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function _p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n){return new ib(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=s,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="PersistentStream";class FS{constructor(e,t,s,o,l,c,f,p){this.Fi=e,this.w_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new BS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.b_===t&&this.W_(s,o)}),(s=>{e((()=>{const o=new _e(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.G_(o)}))}))}W_(e,t){const s=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.e_((()=>{s((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{s((()=>this.G_(o)))})),this.stream.onMessage((o=>{s((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return de(IT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(de(IT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eN extends FS{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=ob(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?Ei(c.readTime):Ie.min()})(e);return this.listener.J_(t,s)}H_(e){const t={};t.database=Op(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=Pp(p)?{documents:ub(l,p)}:{query:cb(l,p).Vt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=NS(l,c.resumeToken);const m=Vp(l,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ie.min())>0){f.readTime=Tf(l,c.snapshotVersion.toTimestamp());const m=Vp(l,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const s=db(this.serializer,e);s&&(t.labels=s),this.k_(t)}Y_(e){const t={};t.database=Op(this.serializer),t.removeTarget=e,this.k_(t)}}class tN extends FS{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=lb(e.writeResults,e.commitTime),s=Ei(e.commitTime);return this.listener.ta(s,t)}na(){const e={};e.database=Op(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>ab(this.serializer,s)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{}class iN extends nN{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Up(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(re.UNKNOWN,l.toString())}))}Jo(e,t,s,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Jo(e,Up(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(re.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class sN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(rs(t),this._a=!1):de("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="RemoteStore";class rN{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{s.enqueueAndForget((async()=>{uo(this)&&(de(no,"Restarting streams for network reachability change."),await(async function(p){const m=we(p);m.Ia.add(4),await cu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Jf(m)})(this))}))})),this.Aa=new sN(s,o)}}async function Jf(n){if(uo(n))for(const e of n.da)await e(!0)}async function cu(n){for(const e of n.da)await e(!1)}function zS(n,e){const t=we(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),wm(t)?Rm(t):Ca(t).x_()&&Im(t,e))}function Cm(n,e){const t=we(n),s=Ca(t);t.Ta.delete(e),s.x_()&&GS(t,e),t.Ta.size===0&&(s.x_()?s.B_():uo(t)&&t.Aa.set("Unknown"))}function Im(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ca(n).H_(e)}function GS(n,e){n.Ra.$e(e),Ca(n).Y_(e)}function Rm(n){n.Ra=new j1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ca(n).start(),n.Aa.aa()}function wm(n){return uo(n)&&!Ca(n).M_()&&n.Ta.size>0}function uo(n){return we(n).Ia.size===0}function HS(n){n.Ra=void 0}async function oN(n){n.Aa.set("Online")}async function aN(n){n.Ta.forEach(((e,t)=>{Im(n,e)}))}async function lN(n,e){HS(n),wm(n)?(n.Aa.la(e),Rm(n)):n.Aa.set("Unknown")}async function uN(n,e,t){if(n.Aa.set("Online"),e instanceof bS&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ta.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ta.delete(f),o.Ra.removeTarget(f))})(n,e)}catch(s){de(no,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Sf(n,s)}else if(e instanceof tf?n.Ra.Ye(e):e instanceof wS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ie.min()))try{const s=await qS(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.Ra.Pt(c);return f.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ta.get(m);v&&l.Ta.set(m,v.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,m)=>{const v=l.Ta.get(p);if(!v)return;l.Ta.set(p,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),GS(l,p);const E=new nr(v.target,p,m,v.sequenceNumber);Im(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){de(no,"Failed to raise snapshot:",s),await Sf(n,s)}}async function Sf(n,e,t){if(!Aa(e))throw e;n.Ia.add(1),await cu(n),n.Aa.set("Offline"),t||(t=()=>qS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(no,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Jf(n)}))}function JS(n,e){return e().catch((t=>Sf(n,t,e)))}async function Yf(n){const e=we(n),t=hr(e);let s=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:cm;for(;cN(e);)try{const o=await Jb(e.localStore,s);if(o===null){e.Pa.length===0&&t.B_();break}s=o.batchId,fN(e,o)}catch(o){await Sf(e,o)}YS(e)&&KS(e)}function cN(n){return uo(n)&&n.Pa.length<10}function fN(n,e){n.Pa.push(e);const t=hr(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function YS(n){return uo(n)&&!hr(n).M_()&&n.Pa.length>0}function KS(n){hr(n).start()}async function dN(n){hr(n).na()}async function hN(n){const e=hr(n);for(const t of n.Pa)e.X_(t.mutations)}async function pN(n,e,t){const s=n.Pa.shift(),o=ym.from(s,e,t);await JS(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Yf(n)}async function mN(n,e){e&&hr(n).Z_&&await(async function(s,o){if((function(c){return W1(c)&&c!==re.ABORTED})(o.code)){const l=s.Pa.shift();hr(s).N_(),await JS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Yf(s)}})(n,e),YS(n)&&KS(n)}async function RT(n,e){const t=we(n);t.asyncQueue.verifyOperationInProgress(),de(no,"RemoteStore received new credentials");const s=uo(t);t.Ia.add(3),await cu(t),s&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jf(t)}async function gN(n,e){const t=we(n);e?(t.Ia.delete(2),await Jf(t)):e||(t.Ia.add(2),await cu(t),t.Aa.set("Unknown"))}function Ca(n){return n.Va||(n.Va=(function(t,s,o){const l=we(t);return l.ia(),new eN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:oN.bind(null,n),e_:aN.bind(null,n),n_:lN.bind(null,n),J_:uN.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),wm(n)?Rm(n):n.Aa.set("Unknown")):(await n.Va.stop(),HS(n))}))),n.Va}function hr(n){return n.ma||(n.ma=(function(t,s,o){const l=we(t);return l.ia(),new tN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:dN.bind(null,n),n_:mN.bind(null,n),ea:hN.bind(null,n),ta:pN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await Yf(n)):(await n.ma.stop(),n.Pa.length>0&&(de(no,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new bm(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nm(n,e){if(rs("AsyncQueue",`${e}: ${n}`),Aa(n))return new _e(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{static emptySet(e){return new oa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Te.comparator(t.key,s.key):(t,s)=>Te.comparator(t.key,s.key),this.keyedMap=Ul(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new oa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.fa=new mt(Te.comparator)}track(e){const t=e.doc.key,s=this.fa.get(t);s?e.type!==0&&s.type===3?this.fa=this.fa.insert(t,e):e.type===3&&s.type!==1?this.fa=this.fa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.fa=this.fa.remove(t):e.type===1&&s.type===2?this.fa=this.fa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ae(63341,{At:e,ga:s}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,s)=>{e.push(s)})),e}}class _a{constructor(e,t,s,o,l,c,f,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new _a(e,t,oa.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class _N{constructor(){this.queries=bT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,s){const o=we(t),l=o.queries;o.queries=bT(),l.forEach(((c,f)=>{for(const p of f.wa)p.onError(s)}))})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function bT(){return new ao((n=>hS(n)),qf)}async function vN(n,e){const t=we(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(s=2):(l=new yN,s=e.ba()?0:1);try{switch(s){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Nm(c,`Initialization of query '${na(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Mm(t)}async function TN(n,e){const t=we(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function EN(n,e){const t=we(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.wa)f.Ca(o)&&(s=!0);c.ya=o}}s&&Mm(t)}function SN(n,e,t){const s=we(n),o=s.queries.get(e);if(o)for(const l of o.wa)l.onError(t);s.queries.delete(e)}function Mm(n){n.Da.forEach((e=>{e.next()}))}var Fp,NT;(NT=Fp||(Fp={})).Fa="default",NT.Cache="cache";class AN{constructor(e,t,s){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=s||{}}Ca(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new _a(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const s=t!=="Offline";return(!this.options.ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.key=e}}class QS{constructor(e){this.key=e}}class CN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=qe(),this.mutatedKeys=qe(),this.Xa=pS(e),this.eu=new oa(this.Xa)}get tu(){return this.Ha}nu(e,t){const s=t?t.ru:new wT,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const A=o.get(v),b=Bf(this.query,E)?E:null,q=!!A&&this.mutatedKeys.has(A.key),G=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let $=!1;A&&b?A.data.isEqual(b.data)?q!==G&&(s.track({type:3,doc:b}),$=!0):this.iu(A,b)||(s.track({type:2,doc:b}),$=!0,(p&&this.Xa(b,p)>0||m&&this.Xa(b,m)<0)&&(f=!0)):!A&&b?(s.track({type:0,doc:b}),$=!0):A&&!b&&(s.track({type:1,doc:A}),$=!0,(p||m)&&(f=!0)),$&&(b?(c=c.add(b),l=G?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{eu:c,ru:s,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((v,E)=>(function(b,q){const G=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{At:$})}};return G(b)-G(q)})(v.type,E.type)||this.Xa(v.doc,E.doc))),this.su(s),o=o!=null&&o;const f=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,c.length!==0||m?{snapshot:new _a(this.query,e.eu,l,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new wT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=qe(),this.eu.forEach((s=>{this.au(s.key)&&(this.Za=this.Za.add(s.key))}));const t=[];return e.forEach((s=>{this.Za.has(s)||t.push(new QS(s))})),this.Za.forEach((s=>{e.has(s)||t.push(new $S(s))})),t}uu(e){this.Ha=e.qs,this.Za=qe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return _a.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const xm="SyncEngine";class IN{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class RN{constructor(e){this.key=e,this.lu=!1}}class wN{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new ao((f=>hS(f)),qf),this.Tu=new Map,this.Iu=new Set,this.du=new mt(Te.comparator),this.Eu=new Map,this.Au=new Tm,this.Ru={},this.Vu=new Map,this.mu=ya.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function bN(n,e,t=!0){const s=tA(n);let o;const l=s.Pu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await XS(s,e,t,!0),o}async function NN(n,e){const t=tA(n);await XS(t,e,!0,!1)}async function XS(n,e,t,s){const o=await Yb(n.localStore,Ti(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await MN(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&zS(n.remoteStore,o),f}async function MN(n,e,t,s,o){n.gu=(E,A,b)=>(async function(G,$,te,K){let Z=$.view.nu(te);Z.Ds&&(Z=await ET(G.localStore,$.query,!1).then((({documents:x})=>$.view.nu(x,Z))));const oe=K&&K.targetChanges.get($.targetId),fe=K&&K.targetMismatches.get($.targetId)!=null,ce=$.view.applyChanges(Z,G.isPrimaryClient,oe,fe);return xT(G,$.targetId,ce._u),ce.snapshot})(n,E,A,b);const l=await ET(n.localStore,e,!0),c=new CN(e,l.qs),f=c.nu(l.documents),p=uu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=c.applyChanges(f,n.isPrimaryClient,p);xT(n,t,m._u);const v=new IN(e,t,c);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function xN(n,e,t){const s=we(n),o=s.Pu.get(e),l=s.Tu.get(o.targetId);if(l.length>1)return s.Tu.set(o.targetId,l.filter((c=>!qf(c,e)))),void s.Pu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await qp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Cm(s.remoteStore,o.targetId),zp(s,o.targetId)})).catch(Sa)):(zp(s,o.targetId),await qp(s.localStore,o.targetId,!0))}async function DN(n,e){const t=we(n),s=t.Pu.get(e),o=t.Tu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Cm(t.remoteStore,s.targetId))}async function PN(n,e,t){const s=BN(n);try{const o=await(function(c,f){const p=we(c),m=dt.now(),v=f.reduce(((b,q)=>b.add(q.key)),qe());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let q=os(),G=qe();return p.Os.getEntries(b,v).next(($=>{q=$,q.forEach(((te,K)=>{K.isValidDocument()||(G=G.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(b,q))).next(($=>{E=$;const te=[];for(const K of f){const Z=Y1(K,E.get(K.key).overlayedDocument);Z!=null&&te.push(new lo(K.key,Z,oS(Z.value.mapValue),ns.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,te,f)})).next(($=>{A=$;const te=$.applyToLocalDocumentSet(E,G);return p.documentOverlayCache.saveOverlays(b,$.batchId,te)}))})).then((()=>({batchId:A.batchId,changes:gS(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let m=c.Ru[c.currentUser.toKey()];m||(m=new mt(Pe)),m=m.insert(f,p),c.Ru[c.currentUser.toKey()]=m})(s,o.batchId,t),await fu(s,o.changes),await Yf(s.remoteStore)}catch(o){const l=Nm(o,"Failed to persist write");t.reject(l)}}async function WS(n,e){const t=we(n);try{const s=await Gb(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?Xe(c.lu,14607):o.removedDocuments.size>0&&(Xe(c.lu,42227),c.lu=!1))})),await fu(t,s,e)}catch(s){await Sa(s)}}function MT(n,e,t){const s=we(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Pu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=we(c);p.onlineState=f;let m=!1;p.queries.forEach(((v,E)=>{for(const A of E.wa)A.va(f)&&(m=!0)})),m&&Mm(p)})(s.eventManager,e),o.length&&s.hu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function kN(n,e,t){const s=we(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),l=o&&o.key;if(l){let c=new mt(Te.comparator);c=c.insert(l,sn.newNoDocument(l,Ie.min()));const f=qe().add(l),p=new Gf(Ie.min(),new Map,new mt(Pe),c,f);await WS(s,p),s.du=s.du.remove(l),s.Eu.delete(e),Dm(s)}else await qp(s.localStore,e,!1).then((()=>zp(s,e,t))).catch(Sa)}async function VN(n,e){const t=we(n),s=e.batch.batchId;try{const o=await zb(t.localStore,e);jS(t,s,null),ZS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await fu(t,o)}catch(o){await Sa(o)}}async function UN(n,e,t){const s=we(n);try{const o=await(function(c,f){const p=we(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,f).next((E=>(Xe(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);jS(s,e,t),ZS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await fu(s,o)}catch(o){await Sa(o)}}function ZS(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function jS(n,e,t){const s=we(n);let o=s.Ru[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ru[s.currentUser.toKey()]=o}}function zp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Tu.get(e))n.Pu.delete(s),t&&n.hu.pu(s,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((s=>{n.Au.containsKey(s)||eA(n,s)}))}function eA(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Cm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Dm(n))}function xT(n,e,t){for(const s of t)s instanceof $S?(n.Au.addReference(s.key,e),LN(n,s)):s instanceof QS?(de(xm,"Document no longer in limbo: "+s.key),n.Au.removeReference(s.key,e),n.Au.containsKey(s.key)||eA(n,s.key)):Ae(19791,{yu:s})}function LN(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Iu.has(s)||(de(xm,"New document in limbo: "+t),n.Iu.add(s),Dm(n))}function Dm(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Te(pt.fromString(e)),s=n.mu.next();n.Eu.set(s,new RN(t)),n.du=n.du.insert(t,s),zS(n.remoteStore,new nr(Ti(mm(t.path)),s,"TargetPurposeLimboResolution",Vf.ue))}}async function fu(n,e,t){const s=we(n),o=[],l=[],c=[];s.Pu.isEmpty()||(s.Pu.forEach(((f,p)=>{c.push(s.gu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){o.push(m);const E=Sm.Es(p.targetId,m);l.push(E)}})))})),await Promise.all(c),s.hu.J_(o),await(async function(p,m){const v=we(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(m,(A=>se.forEach(A.Is,(b=>v.persistence.referenceDelegate.addReference(E,A.targetId,b))).next((()=>se.forEach(A.ds,(b=>v.persistence.referenceDelegate.removeReference(E,A.targetId,b)))))))))}catch(E){if(!Aa(E))throw E;de(Am,"Failed to update sequence numbers: "+E)}for(const E of m){const A=E.targetId;if(!E.fromCache){const b=v.Fs.get(A),q=b.snapshotVersion,G=b.withLastLimboFreeSnapshotVersion(q);v.Fs=v.Fs.insert(A,G)}}})(s.localStore,l))}async function ON(n,e){const t=we(n);if(!t.currentUser.isEqual(e)){de(xm,"User change. New user:",e.toKey());const s=await OS(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((f=>{f.forEach((p=>{p.reject(new _e(re.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await fu(t,s.Bs)}}function qN(n,e){const t=we(n),s=t.Eu.get(e);if(s&&s.lu)return qe().add(s.key);{let o=qe();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const f=t.Pu.get(c);o=o.unionWith(f.view.tu)}return o}}function tA(n){const e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kN.bind(null,e),e.hu.J_=EN.bind(null,e.eventManager),e.hu.pu=SN.bind(null,e.eventManager),e}function BN(n){const e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UN.bind(null,e),e}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Fb(this.persistence,new Ob,e.initialUser,this.serializer)}Du(e){return new LS(Em.Vi,this.serializer)}bu(e){return new $b}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class FN extends Af{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof Ef,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Ab(s,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new LS((s=>Ef.Vi(s,t)),this.serializer)}}class Gp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>MT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ON.bind(null,this.syncEngine),await gN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _N})()}createDatastore(e){const t=Hf(e.databaseInfo.databaseId),s=(function(l){return new jb(l)})(e.databaseInfo);return(function(l,c,f,p){return new iN(l,c,f,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,f){return new rN(s,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>MT(this.syncEngine,t,0)),(function(){return CT.C()?new CT:new Qb})())}createSyncEngine(e,t){return(function(o,l,c,f,p,m,v){const E=new wN(o,l,c,f,p,m);return v&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=we(o);de(no,"RemoteStore shutting down."),l.Ia.add(5),await cu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Gp.provider={build:()=>new Gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="FirestoreClient";class GN{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{de(pr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(de(pr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Nm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function vp(n,e){n.asyncQueue.verifyOperationInProgress(),de(pr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await OS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>{lr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{de("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{lr("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function DT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await HN(n);de(pr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>RT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>RT(e.remoteStore,o))),n._onlineComponents=e}async function HN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(pr,"Using user provided OfflineComponentProvider");try{await vp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;lr("Error using user provided cache. Falling back to memory cache: "+t),await vp(n,new Af)}}else de(pr,"Using default OfflineComponentProvider"),await vp(n,new FN(void 0));return n._offlineComponents}async function nA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(pr,"Using user provided OnlineComponentProvider"),await DT(n,n._uninitializedComponentsProvider._online)):(de(pr,"Using default OnlineComponentProvider"),await DT(n,new Gp))),n._onlineComponents}function JN(n){return nA(n).then((e=>e.syncEngine))}async function YN(n){const e=await nA(n),t=e.eventManager;return t.onListen=bN.bind(null,e.syncEngine),t.onUnlisten=xN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=NN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DN.bind(null,e.syncEngine),t}function KN(n,e,t={}){const s=new ar;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,p,m){const v=new zN({next:A=>{v.Ou(),c.enqueueAndForget((()=>TN(l,E)));const b=A.docs.has(f);!b&&A.fromCache?m.reject(new _e(re.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&A.fromCache&&p&&p.source==="server"?m.reject(new _e(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new AN(mm(f.path),v,{includeMetadataChanges:!0,ka:!0});return vN(l,E)})(await YN(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="firestore.googleapis.com",kT=!0;class VT{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sA,this.ssl=kT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:kT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=US;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Eb)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iA((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pm{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Qw;switch(s.type){case"firstParty":return new jw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=PT.get(t);s&&(de("ComponentProvider","Removing Datastore"),PT.delete(t),s.terminate())})(this),Promise.resolve()}}function $N(n,e,t,s={}){var o;n=Ql(n,Pm);const l=va(e),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(P0(`https://${p}`),k0("Firestore",!0)),c.host!==sA&&c.host!==p&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:s});if(!jr(m,f)&&(n._setSettings(m),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=nn.MOCK_USER;else{v=SR(s.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new nn(A)}n._authCredentials=new Xw(new $0(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new km(this.firestore,e,this._query)}}class Ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(au(t,Ft._jsonSchema))return new Ft(e,s||null,new Te(pt.fromString(t.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Mt("string",Ft._jsonSchemaVersion),referencePath:Mt("string")};class nu extends km{constructor(e,t,s){super(e,t,mm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Te(e))}withConverter(e){return new nu(this.firestore,e,this._path)}}function Kf(n,e,...t){if(n=Dn(n),arguments.length===1&&(e=lm.newId()),s1("doc","path",e),n instanceof Pm){const s=pt.fromString(e,...t);return Qv(s),new Ft(n,null,new Te(s))}{if(!(n instanceof Ft||n instanceof nu))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(pt.fromString(e,...t));return Qv(s),new Ft(n.firestore,n instanceof nu?n.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="AsyncQueue";class LT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new BS(this,"async_queue_retry"),this.oc=()=>{const s=_p();s&&de(UT,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;const t=_p();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=_p();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new ar;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Aa(e))throw e;de(UT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((s=>{throw this.tc=s,this.nc=!1,rs("INTERNAL UNHANDLED ERROR: ",OT(s)),s})).then((s=>(this.nc=!1,s))))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=bm.createAndSchedule(this,e,t,s,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Ae(47125,{hc:OT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function OT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Vm extends Pm{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new LT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LT(e),this._firestoreClient=void 0,await e}}}function QN(n,e){const t=typeof n=="object"?n:O0(),s=typeof n=="string"?n:pf,o=om(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=TR("firestore");l&&$N(o,...l)}return o}function rA(n){if(n._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XN(n),n._firestoreClient}function XN(n){var e,t,s;const o=n._freezeSettings(),l=(function(f,p,m,v){return new g1(f,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,iA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new GN(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Wt.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(au(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Mt("string",Kn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Si._jsonSchemaVersion}}static fromJSON(e){if(au(e,Si._jsonSchema))return new Si(e.latitude,e.longitude)}}Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:Mt("string",Si._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(au(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ai(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:Mt("string",Ai._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^__.*__$/;class ZN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new lu(e,this.data,t,this.fieldTransforms)}}function aA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ec:n})}}class Lm{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Lm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.fc(e),o}gc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:s,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Cf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(aA(this.Ec)&&WN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class jN{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Hf(e)}Dc(e,t,s,o=!1){return new Lm({Ec:e,methodName:t,bc:s,path:Xt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eM(n){const e=n._freezeSettings(),t=Hf(n._databaseId);return new jN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tM(n,e,t,s,o,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,o);fA("Data must be an object, but it was:",c,s);const f=uA(s,c);let p,m;if(l.merge)p=new ii(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const A=nM(e,E,t);if(!c.contains(A))throw new _e(re.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);sM(v,A)||v.push(A)}p=new ii(v),m=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,m=c.fieldTransforms;return new ZN(new Yn(f),p,m)}function lA(n,e){if(cA(n=Dn(n)))return fA("Unsupported field value:",e,n),uA(n,e);if(n instanceof oA)return(function(s,o){if(!aA(o.Ec))throw o.wc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const f of s){let p=lA(f,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=Dn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return B1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=dt.fromDate(s);return{timestampValue:Tf(o.serializer,l)}}if(s instanceof dt){const l=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Tf(o.serializer,l)}}if(s instanceof Si)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kn)return{bytesValue:NS(o.serializer,s._byteString)};if(s instanceof Ft){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:vm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ai)return(function(c,f){return{mapValue:{fields:{[sS]:{stringValue:rS},[mf]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw f.wc("VectorValues must only contain numeric values.");return gm(f.serializer,m)}))}}}}}})(s,o);throw o.wc(`Unsupported field value: ${um(s)}`)})(n,e)}function uA(n,e){const t={};return Z0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oo(n,((s,o)=>{const l=lA(o,e.Vc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function cA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Si||n instanceof Kn||n instanceof Ft||n instanceof oA||n instanceof Ai)}function fA(n,e,t){if(!cA(t)||!X0(t)){const s=um(t);throw s==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+s)}}function nM(n,e,t){if((e=Dn(e))instanceof Um)return e._internalPath;if(typeof e=="string")return dA(n,e);throw Cf("Field path arguments must be of type string or ",n,!1,void 0,t)}const iM=new RegExp("[~\\*/\\[\\]]");function dA(n,e,t){if(e.search(iM)>=0)throw Cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Um(...e.split("."))._internalPath}catch{throw Cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cf(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new _e(re.INVALID_ARGUMENT,f+n+p)}function sM(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rM extends hA{data(){return super.data()}}function pA(n,e){return typeof e=="string"?dA(n,e):e instanceof Um?e._internalPath:e._delegate._internalPath}class oM{convertValue(e,t="none"){switch(dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return oo(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[mf].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((c=>At(c.doubleValue)));return new Ai(l)}convertGeoPoint(e){return new Si(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Lf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const t=cr(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=pt.fromString(e);Xe(VS(s),9688,{name:e});const o=new Zl(s.get(1),s.get(3)),l=new Te(s.popFirst(5));return o.isEqual(t)||rs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zr extends hA{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(pA("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zr._jsonSchema={type:Mt("string",Zr._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class nf extends Zr{data(e={}){return super.data(e)}}class Jl{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ol(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new nf(this._firestore,this._userDataWriter,s.key,s,new Ol(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new nf(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ol(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new nf(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ol(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:lM(f.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n){n=Ql(n,Ft);const e=Ql(n.firestore,Vm);return KN(rA(e),n._key).then((t=>fM(e,n,t)))}Jl._jsonSchemaVersion="firestore/querySnapshot/1.0",Jl._jsonSchema={type:Mt("string",Jl._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class uM extends oM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}}function gA(n,e,t){n=Ql(n,Ft);const s=Ql(n.firestore,Vm),o=aM(n.converter,e);return cM(s,[tM(eM(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ns.none())])}function cM(n,e){return(function(s,o){const l=new ar;return s.asyncQueue.enqueueAndForget((async()=>PN(await JN(s),o,l))),l.promise})(rA(n),e)}function fM(n,e,t){const s=t.docs.get(e._key),o=new uM(n);return new Zr(n,o,e._key,s,new Ol(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ea=o})(Ta),ha(new eo("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new Vm(new Ww(s.getProvider("auth-internal")),new e1(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(m.options.projectId,v)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),rr(Hv,Jv,e),rr(Hv,Jv,"esm2017")})();var dM="firebase",hM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(dM,hM,"app");function Om(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function yA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pM=yA,_A=new ru("auth","Firebase",yA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new sm("@firebase/auth");function mM(n,...e){If.logLevel<=Oe.WARN&&If.warn(`Auth (${Ta}): ${n}`,...e)}function sf(n,...e){If.logLevel<=Oe.ERROR&&If.error(`Auth (${Ta}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...e){throw Bm(n,...e)}function ri(n,...e){return Bm(n,...e)}function qm(n,e,t){const s=Object.assign(Object.assign({},pM()),{[e]:t});return new ru("auth","Firebase",s).create(e,{appName:n.name})}function is(n){return qm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gM(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qn(n,"argument-error"),qm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bm(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return _A.create(n,...e)}function Se(n,e,...t){if(!n)throw Bm(e,...t)}function es(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sf(e),new Error(e)}function as(n,e){n||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function yM(){return qT()==="http:"||qT()==="https:"}function qT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yM()||bR()||"connection"in navigator)?navigator.onLine:!0}function vM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t){this.shortDelay=e,this.longDelay=t,as(t>e,"Short delay should be less than long delay!"),this.isMobile=IR()||NR()}get(){return _M()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n,e){as(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SM=new du(3e4,6e4);function mr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function gr(n,e,t,s,o={}){return TA(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=ou(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},l);return wR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&va(n.emulatorConfig.host)&&(m.credentials="include"),vA.fetch()(await EA(n,n.config.apiHost,t,f),m)})}async function TA(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},TM),e);try{const o=new CM(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Xc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,m]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Xc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Xc(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw qm(n,v,m);Qn(n,v)}}catch(o){if(o instanceof ls)throw o;Qn(n,"network-request-failed",{message:String(o)})}}async function hu(n,e,t,s,o={}){const l=await gr(n,e,t,s,o);return"mfaPendingCredential"in l&&Qn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function EA(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Fm(n.config,o):`${n.config.apiScheme}://${o}`;return EM.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function AM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ri(this.auth,"network-request-failed")),SM.get())})}}function Xc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ri(n,e,s);return o.customData._tokenResponse=t,o}function BT(n){return n!==void 0&&n.enterprise!==void 0}class IM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return AM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function RM(n,e){return gr(n,"GET","/v2/recaptchaConfig",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(n,e){return gr(n,"POST","/v1/accounts:delete",e)}async function Rf(n,e){return gr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bM(n,e=!1){const t=Dn(n),s=await t.getIdToken(e),o=zm(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Yl(Tp(o.auth_time)),issuedAtTime:Yl(Tp(o.iat)),expirationTime:Yl(Tp(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Tp(n){return Number(n)*1e3}function zm(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const o=N0(t);return o?JSON.parse(o):(sf("Failed to decode base64 JWT payload"),null)}catch(o){return sf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function FT(n){const e=zm(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ls&&NM(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function NM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wf(n){var e;const t=n.auth,s=await n.getIdToken(),o=await iu(n,Rf(t,{idToken:s}));Se(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?SA(l.providerUserInfo):[],f=DM(n.providerData,c),p=n.isAnonymous,m=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=p?m:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Jp(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function xM(n){const e=Dn(n);await wf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DM(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function SA(n){return n.map(e=>{var{providerId:t}=e,s=Om(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(n,e){const t=await TA(n,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await EA(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&va(n.emulatorConfig.host)&&(p.credentials="include"),vA.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kM(n,e){return gr(n,"POST","/v2/accounts:revokeToken",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=FT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await PM(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new aa;return s&&(Se(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class si{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Om(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Jp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await iu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bM(this,e)}reload(){return xM(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await wf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await iu(this,wM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,c,f,p,m,v;const E=(s=t.displayName)!==null&&s!==void 0?s:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,b=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(c=t.photoURL)!==null&&c!==void 0?c:void 0,G=(f=t.tenantId)!==null&&f!==void 0?f:void 0,$=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,te=(m=t.createdAt)!==null&&m!==void 0?m:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Z,emailVerified:oe,isAnonymous:fe,providerData:ce,stsTokenManager:x}=t;Se(Z&&x,e,"internal-error");const w=aa.fromJSON(this.name,x);Se(typeof Z=="string",e,"internal-error"),Zs(E,e.name),Zs(A,e.name),Se(typeof oe=="boolean",e,"internal-error"),Se(typeof fe=="boolean",e,"internal-error"),Zs(b,e.name),Zs(q,e.name),Zs(G,e.name),Zs($,e.name),Zs(te,e.name),Zs(K,e.name);const N=new si({uid:Z,auth:e,email:A,emailVerified:oe,displayName:E,isAnonymous:fe,photoURL:q,phoneNumber:b,tenantId:G,stsTokenManager:w,createdAt:te,lastLoginAt:K});return ce&&Array.isArray(ce)&&(N.providerData=ce.map(D=>Object.assign({},D))),$&&(N._redirectEventId=$),N}static async _fromIdTokenResponse(e,t,s=!1){const o=new aa;o.updateFromServerResponse(t);const l=new si({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await wf(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?SA(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new aa;f.updateFromIdToken(s);const p=new si({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Jp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=new Map;function ts(n){as(n instanceof Function,"Expected a class definition");let e=zT.get(n);return e?(as(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AA.type="NONE";const GT=AA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n,e,t){return`firebase:${n}:${e}:${t}`}class la{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=rf(this.userKey,o.apiKey,l),this.fullPersistenceKey=rf("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rf(this.auth,{idToken:e}).catch(()=>{});return t?si._fromGetAccountInfoResponse(this.auth,t,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new la(ts(GT),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||ts(GT);const c=rf(s,e.config.apiKey,e.name);let f=null;for(const m of t)try{const v=await m._get(c);if(v){let E;if(typeof v=="string"){const A=await Rf(e,{idToken:v}).catch(()=>{});if(!A)break;E=await si._fromGetAccountInfoResponse(e,A,v)}else E=si._fromJSON(e,v);m!==l&&(f=E),l=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new la(l,e,s):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new la(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NA(e))return"Blackberry";if(MA(e))return"Webos";if(IA(e))return"Safari";if((e.includes("chrome/")||RA(e))&&!e.includes("edge/"))return"Chrome";if(bA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function CA(n=on()){return/firefox\//i.test(n)}function IA(n=on()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RA(n=on()){return/crios\//i.test(n)}function wA(n=on()){return/iemobile/i.test(n)}function bA(n=on()){return/android/i.test(n)}function NA(n=on()){return/blackberry/i.test(n)}function MA(n=on()){return/webos/i.test(n)}function Gm(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VM(n=on()){var e;return Gm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UM(){return MR()&&document.documentMode===10}function xA(n=on()){return Gm(n)||bA(n)||MA(n)||NA(n)||/windows phone/i.test(n)||wA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(n,e=[]){let t;switch(n){case"Browser":t=HT(on());break;case"Worker":t=`${HT(on())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ta}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(n,e={}){return gr(n,"GET","/v2/passwordPolicy",mr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=6;class BM{constructor(e){var t,s,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:qM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,c,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JT(this),this.idTokenSubscription=new JT(this),this.beforeStateQueue=new LM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_A,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ts(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rf(this,{idToken:e}),s=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(is(this));const t=e?Dn(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OM(this),t=new BM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ru("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await kM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ts(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[ts(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&mM(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function yr(n){return Dn(n)}class JT{constructor(e){this.auth=e,this.observer=null,this.addObserver=OR(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zM(n){$f=n}function PA(n){return $f.loadJS(n)}function GM(){return $f.recaptchaEnterpriseScript}function HM(){return $f.gapiScript}function JM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class YM{constructor(){this.enterprise=new KM}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KM{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $M="recaptcha-enterprise",kA="NO_RECAPTCHA";class QM{constructor(e){this.type=$M,this.auth=yr(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{RM(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new IM(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(p=>{f(p)})})}function o(l,c,f){const p=window.grecaptcha;BT(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(kA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YM().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&BT(window.grecaptcha))o(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=GM();p.length!==0&&(p+=f),PA(p).then(()=>{o(f,l,c)}).catch(m=>{c(m)})}}).catch(f=>{c(f)})})}}async function YT(n,e,t,s=!1,o=!1){const l=new QM(n);let c;if(o)c=kA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Yp(n,e,t,s,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await YT(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await YT(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n,e){const t=om(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(jr(l,e??{}))return o;Qn(o,"already-initialized")}return t.initialize({options:e})}function WM(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ts);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function ZM(n,e,t){const s=yr(n);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=VA(e),{host:c,port:f}=jM(e),p=f===null?"":`:${f}`,m={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(jr(m,s.config.emulator)&&jr(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,va(c)?(P0(`${l}//${c}${p}`),k0("Auth",!0)):ex()}function VA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jM(n){const e=VA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:KT(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:KT(c)}}}function KT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ex(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,t){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}async function tx(n,e){return gr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(n,e){return hu(n,"POST","/v1/accounts:signInWithPassword",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(n,e){return hu(n,"POST","/v1/accounts:signInWithEmailLink",mr(n,e))}async function sx(n,e){return hu(n,"POST","/v1/accounts:signInWithEmailLink",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Hm{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new su(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new su(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,t,"signInWithPassword",nx);case"emailLink":return ix(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,s,"signUpPassword",tx);case"emailLink":return sx(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(n,e){return hu(n,"POST","/v1/accounts:signInWithIdp",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="http://localhost";class io extends Hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Om(t,["providerId","signInMethod"]);if(!s||!o)return null;const c=new io(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ua(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ua(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ua(e,t)}buildRequest(){const e={requestUri:rx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ax(n){const e=Pl(kl(n)).link,t=e?Pl(kl(e)).deep_link_id:null,s=Pl(kl(n)).deep_link_id;return(s?Pl(kl(s)).link:null)||s||t||e||n}class Jm{constructor(e){var t,s,o,l,c,f;const p=Pl(kl(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(s=p.oobCode)!==null&&s!==void 0?s:null,E=ox((o=p.mode)!==null&&o!==void 0?o:null);Se(m&&v&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=v,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=ax(e);try{return new Jm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.providerId=Ia.PROVIDER_ID}static credential(e,t){return su._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Jm.parseLink(t);return Se(s,"argument-error"),su._fromEmailAndCode(e,s.code,s.tenantId)}}Ia.PROVIDER_ID="password";Ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends Ym{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends pu{constructor(){super("facebook.com")}static credential(e){return io._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return io._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ji.credential(t,s)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends pu{constructor(){super("github.com")}static credential(e){return io._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.GITHUB_SIGN_IN_METHOD="github.com";er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends pu{constructor(){super("twitter.com")}static credential(e,t){return io._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return tr.credential(t,s)}catch{return null}}}tr.TWITTER_SIGN_IN_METHOD="twitter.com";tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(n,e){return hu(n,"POST","/v1/accounts:signUp",mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await si._fromIdTokenResponse(e,s,o),c=$T(s);return new so({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=$T(s);return new so({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function $T(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf extends ls{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,bf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new bf(e,t,s,o)}}function UA(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?bf._fromErrorAndOperation(n,l,e,s):l})}async function ux(n,e,t=!1){const s=await iu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return so._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(n,e,t=!1){const{auth:s}=n;if(xn(s.app))return Promise.reject(is(s));const o="reauthenticate";try{const l=await iu(n,UA(s,o,e,n),t);Se(l.idToken,s,"internal-error");const c=zm(l.idToken);Se(c,s,"internal-error");const{sub:f}=c;return Se(n.uid===f,s,"user-mismatch"),so._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Qn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(n,e,t=!1){if(xn(n.app))return Promise.reject(is(n));const s="signIn",o=await UA(n,s,e),l=await so._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function fx(n,e){return LA(yr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(n){const e=yr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dx(n,e,t){if(xn(n.app))return Promise.reject(is(n));const s=yr(n),c=await Yp(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lx).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&OA(n),p}),f=await so._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(f.user),f}function hx(n,e,t){return xn(n.app)?Promise.reject(is(n)):fx(Dn(n),Ia.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&OA(n),s})}function px(n,e,t,s){return Dn(n).onIdTokenChanged(e,t,s)}function mx(n,e,t){return Dn(n).beforeAuthStateChanged(e,t)}function gx(n,e,t,s){return Dn(n).onAuthStateChanged(e,t,s)}function yx(n){return Dn(n).signOut()}const Nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nf,"1"),this.storage.removeItem(Nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=1e3,vx=10;class BA extends qA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);UM()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,vx):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},_x)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BA.type="LOCAL";const Tx=BA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA extends qA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FA.type="SESSION";const zA=FA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Qf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async m=>m(t.origin,l)),p=await Ex(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const m=Km("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===m)switch(A.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(A.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function Ax(n){Ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function Cx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ix(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Rx(){return GA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firebaseLocalStorageDb",wx=1,Mf="firebaseLocalStorage",JA="fbase_key";class mu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xf(n,e){return n.transaction([Mf],e?"readwrite":"readonly").objectStore(Mf)}function bx(){const n=indexedDB.deleteDatabase(HA);return new mu(n).toPromise()}function Kp(){const n=indexedDB.open(HA,wx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Mf,{keyPath:JA})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Mf)?e(s):(s.close(),await bx(),e(await Kp()))})})}async function QT(n,e,t){const s=Xf(n,!0).put({[JA]:e,value:t});return new mu(s).toPromise()}async function Nx(n,e){const t=Xf(n,!1).get(e),s=await new mu(t).toPromise();return s===void 0?null:s.value}function XT(n,e){const t=Xf(n,!0).delete(e);return new mu(t).toPromise()}const Mx=800,xx=3;class YA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>xx)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(Rx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Cx(),!this.activeServiceWorker)return;this.sender=new Sx(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ix()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await QT(e,Nf,"1"),await XT(e,Nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>QT(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>Nx(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>XT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Xf(o,!1).getAll();return new mu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Mx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YA.type="LOCAL";const Dx=YA;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(n,e){return e?ts(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends Hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ua(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Px(n){return LA(n.auth,new $m(n),n.bypassAuthState)}function kx(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),cx(t,new $m(n),n.bypassAuthState)}async function Vx(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),ux(t,new $m(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Px;case"linkViaPopup":case"linkViaRedirect":return Vx;case"reauthViaPopup":case"reauthViaRedirect":return kx;default:Qn(this.auth,"internal-error")}}resolve(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new du(2e3,1e4);async function Lx(n,e,t){if(xn(n.app))return Promise.reject(ri(n,"operation-not-supported-in-this-environment"));const s=yr(n);gM(n,e,Ym);const o=KA(s,t);return new Wr(s,"signInViaPopup",e,o).executeNotNull()}class Wr extends $A{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Wr.currentPopupAction&&Wr.currentPopupAction.cancel(),Wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){as(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ux.get())};e()}}Wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="pendingRedirect",of=new Map;class qx extends $A{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=of.get(this.auth._key());if(!e){try{const s=await Bx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bx(n,e){const t=Gx(e),s=zx(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function Fx(n,e){of.set(n._key(),e)}function zx(n){return ts(n._redirectPersistence)}function Gx(n){return rf(Ox,n.config.apiKey,n.name)}async function Hx(n,e,t=!1){if(xn(n.app))return Promise.reject(is(n));const s=yr(n),o=KA(s,e),c=await new qx(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=600*1e3;class Yx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!QA(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(ri(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jx&&this.cachedEventUids.clear(),this.cachedEventUids.has(WT(e))}saveEventToCache(e){this.cachedEventUids.add(WT(e)),this.lastProcessedEventTime=Date.now()}}function WT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Kx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(n,e={}){return gr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xx=/^https?/;async function Wx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $x(n);for(const t of e)try{if(Zx(t))return}catch{}Qn(n,"unauthorized-domain")}function Zx(n){const e=Hp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!Xx.test(t))return!1;if(Qx.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new du(3e4,6e4);function ZT(){const n=Ci().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function eD(n){return new Promise((e,t)=>{var s,o,l;function c(){ZT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZT(),t(ri(n,"network-request-failed"))},timeout:jx.get()})}if(!((o=(s=Ci().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Ci().gapi)===null||l===void 0)&&l.load)c();else{const f=JM("iframefcb");return Ci()[f]=()=>{gapi.load?c():t(ri(n,"network-request-failed"))},PA(`${HM()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw af=null,e})}let af=null;function tD(n){return af=af||eD(n),af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new du(5e3,15e3),iD="__/auth/iframe",sD="emulator/auth/iframe",rD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aD(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Fm(e,sD):`https://${n.config.authDomain}/${iD}`,s={apiKey:e.apiKey,appName:n.name,v:Ta},o=oD.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ou(s).slice(1)}`}async function lD(n){const e=await tD(n),t=Ci().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:aD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rD,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=ri(n,"network-request-failed"),f=Ci().setTimeout(()=>{l(c)},nD.get());function p(){Ci().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cD=500,fD=600,dD="_blank",hD="http://localhost";class jT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pD(n,e,t,s=cD,o=fD){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p=Object.assign(Object.assign({},uD),{width:s.toString(),height:o.toString(),top:l,left:c}),m=on().toLowerCase();t&&(f=RA(m)?dD:t),CA(m)&&(e=e||hD,p.scrollbars="yes");const v=Object.entries(p).reduce((A,[b,q])=>`${A}${b}=${q},`,"");if(VM(m)&&f!=="_self")return mD(e||"",f),new jT(null);const E=window.open(e||"",f,v);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new jT(E)}function mD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="__/auth/handler",yD="emulator/auth/handler",_D=encodeURIComponent("fac");async function eE(n,e,t,s,o,l){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Ta,eventId:o};if(e instanceof Ym){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",LR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof pu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),m=p?`#${_D}=${encodeURIComponent(p)}`:"";return`${vD(n)}?${ou(f).slice(1)}${m}`}function vD({config:n}){return n.emulator?Fm(n,yD):`https://${n.authDomain}/${gD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="webStorageSupport";class TD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zA,this._completeRedirectFn=Hx,this._overrideRedirectResult=Fx}async _openPopup(e,t,s,o){var l;as((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await eE(e,t,s,Hp(),o);return pD(e,c,Km())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await eE(e,t,s,Hp(),o);return Ax(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(as(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await lD(e),s=new Yx(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ep,{type:Ep},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Ep];c!==void 0&&t(!!c),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xA()||IA()||Gm()}}const ED=TD;var tE="@firebase/auth",nE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CD(n){ha(new eo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DA(n)},m=new FM(s,o,l,p);return WM(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ha(new eo("auth-internal",e=>{const t=yr(e.getProvider("auth").getImmediate());return(s=>new SD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(tE,nE,AD(n)),rr(tE,nE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=300,RD=D0("authIdTokenMaxAge")||ID;let iE=null;const wD=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>RD)return;const o=t==null?void 0:t.token;iE!==o&&(iE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bD(n=O0()){const e=om(n,"auth");if(e.isInitialized())return e.getImmediate();const t=XM(n,{popupRedirectResolver:ED,persistence:[Dx,Tx,zA]}),s=D0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=wD(l.toString());mx(t,c,()=>c(t.currentUser)),px(t,f=>c(f))}}const o=M0("auth");return o&&ZM(t,`http://${o}`),t}function ND(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}zM({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=ri("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",ND().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CD("Browser");const MD={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},XA=L0(MD),ql=bD(XA),xD=new ji,Wf=QN(XA),DD=async(n,e)=>{try{const t=Kf(Wf,"users",n,"wardrobe","items");await gA(t,{items:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des vtements:",t),t}},PD=async n=>{try{const e=Kf(Wf,"users",n,"wardrobe","items"),t=await mA(e);return t.exists()?t.data().items||[]:[]}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},kD=async(n,e)=>{try{const t=Kf(Wf,"users",n,"wardrobe","sets");await gA(t,{sets:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des ensembles:",t),t}},VD=async n=>{try{const e=Kf(Wf,"users",n,"wardrobe","sets"),t=await mA(e);return t.exists()?t.data().sets||[]:[]}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let UD,LD;function OD(){return{geminiUrl:UD,vertexUrl:LD}}function qD(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=OD();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class co{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const p=n[f];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(l+1),t[m])}else for(const m of p)g(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const p=n[f];g(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function BD(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),c=new Set;let f=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){f=p;break}if(f!==-1&&l.length>f)for(let p=f;p<l.length;p++){const m=l[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}$p(n,o,l,0,c)}}function $p(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const p of f[c])$p(p,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(m=>!m.startsWith("_")&&!o.has(m)),p={};for(const m of f)p[m]=c[m];for(const[m,v]of Object.entries(p)){const E=[];for(const A of t.slice(s))A==="*"?E.push(m):E.push(A);g(c,E,v)}for(const m of f)delete c[m]}}else{const c=n;l in c&&$p(c[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FD(n){const e={},t=d(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=d(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function zD(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],HD(c)),e}function GD(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["response"]);return c!=null&&g(e,["response"],JD(c)),e}function HD(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>YD(c))),g(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function JD(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>KD(c))),g(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function YD(n){const e={},t=d(n,["video"]);return t!=null&&g(e,["video"],XD(t)),e}function KD(n){const e={},t=d(n,["_self"]);return t!=null&&g(e,["video"],WD(t)),e}function $D(n){const e={},t=d(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function QD(n){const e={},t=d(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function XD(n){const e={},t=d(n,["uri"]);t!=null&&g(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Qm(s));const o=d(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function WD(n){const e={},t=d(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Qm(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(sE||(sE={}));var rE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(rE||(rE={}));var oE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(oE||(oE={}));var st;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(st||(st={}));var aE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(aE||(aE={}));var lE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(lE||(lE={}));var uE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(uE||(uE={}));var cE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(cE||(cE={}));var fE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(fE||(fE={}));var dE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(dE||(dE={}));var hE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(hE||(hE={}));var pE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(pE||(pE={}));var mE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(mE||(mE={}));var gE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gE||(gE={}));var yE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(yE||(yE={}));var _E;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_E||(_E={}));var xf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xf||(xf={}));var vE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vE||(vE={}));var TE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(TE||(TE={}));var EE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(EE||(EE={}));var Qp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qp||(Qp={}));var SE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(SE||(SE={}));var AE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(AE||(AE={}));var CE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(CE||(CE={}));var IE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(IE||(IE={}));var RE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(RE||(RE={}));var wE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(wE||(wE={}));var bE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(bE||(bE={}));var NE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(NE||(NE={}));var ME;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(ME||(ME={}));var xE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(xE||(xE={}));var DE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(DE||(DE={}));var PE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(PE||(PE={}));var kE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(kE||(kE={}));var VE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(VE||(VE={}));var UE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(UE||(UE={}));var LE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(LE||(LE={}));var OE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(OE||(OE={}));var qE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(qE||(qE={}));var BE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(BE||(BE={}));var FE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(FE||(FE={}));var zE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zE||(zE={}));var GE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(GE||(GE={}));var HE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(HE||(HE={}));var JE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JE||(JE={}));var YE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(YE||(YE={}));var KE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(KE||(KE={}));var $E;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})($E||($E={}));var QE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(QE||(QE={}));var ra;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ra||(ra={}));class Xp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dl{get text(){var e,t,s,o,l,c,f,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const A of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[b,q]of Object.entries(A))b!=="text"&&b!=="thought"&&(q!==null||q!==void 0)&&E.push(b);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,m+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,o,l,c,f,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[A,b]of Object.entries(E))A!=="inlineData"&&(b!==null||b!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,o,l,c,f,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,o,l,c,f,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,o,l,c,f,p,m;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class XE{}class WE{}class ZD{}class jD{}class eP{}class tP{}class ZE{}class jE{}class e0{}class nP{}class Df{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Df;let o;const l=e;return t?o=GD(l):o=zD(l),Object.assign(s,o),s}}class t0{}class n0{}class i0{}class iP{}class sP{}class rP{}class s0{}class oP{get text(){var e,t,s;let o="",l=!1;const c=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(f))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,p]of Object.entries(c))f!=="inlineData"&&p!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class aP{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function WA(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ZA(n){return Array.isArray(n)?n.map(e=>Pf(e)):[Pf(n)]}function Pf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function jA(n){const e=Pf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function eC(n){const e=Pf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function r0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function tC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>r0(e)):[r0(n)]}function Wp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function o0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function a0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Wp(n)?n:{role:"user",parts:tC(n)}}function Xm(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=rn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(o0(n)||a0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],s=Wp(n[0]);for(const o of n){const l=Wp(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(o0(o)||a0(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:tC(t)}),e}function lP(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(st).includes(t[0].toUpperCase())?t[0].toUpperCase():st.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(st).includes(s.toUpperCase())?s.toUpperCase():st.TYPE_UNSPECIFIED})}}function ca(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&lP(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(st).includes(f.toUpperCase())?f.toUpperCase():st.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=ca(f);else if(s.includes(c)){const p=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}p.push(ca(m))}e[c]=p}else if(o.includes(c)){const p={};for(const[m,v]of Object.entries(f))p[m]=ca(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=f}return e}function Wm(n){return ca(n)}function Zm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function jm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ra(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ca(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ca(e.response));return n}function wa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function uP(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function us(n,e){if(typeof e!="string")throw new Error("name must be a string");return uP(n,e,"cachedContents")}function nC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function _r(n){return Qm(n)}function cP(n){return n!=null&&typeof n=="object"&&"name"in n}function fP(n){return n!=null&&typeof n=="object"&&"video"in n}function dP(n){return n!=null&&typeof n=="object"&&"uri"in n}function iC(n){var e;let t;if(cP(n)&&(t=n.name),!(dP(n)&&(t=n.uri,t===void 0))&&!(fP(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function sC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function rC(n){for(const e of["models","tunedModels","publisherModels"])if(hP(n,e))return n[e];return[]}function hP(n,e){return n!==null&&typeof n=="object"&&e in n}function pP(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function mP(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=pP(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function oC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function gP(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function aC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ba(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function lC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yP(n){const e={},t=d(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=d(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>$P(c))),g(e,["inlinedResponses"],l)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["inlinedEmbedContentResponses"],l)}return e}function _P(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=d(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function vP(n){const e={},t=d(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=d(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const o=d(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function lf(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const o=d(n,["metadata","state"]);o!=null&&g(e,["state"],lC(o));const l=d(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const c=d(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const f=d(n,["metadata","updateTime"]);f!=null&&g(e,["updateTime"],f);const p=d(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=d(n,["metadata","output"]);return m!=null&&g(e,["dest"],yP(aC(m))),e}function Zp(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=d(n,["state"]);o!=null&&g(e,["state"],lC(o));const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["createTime"]);c!=null&&g(e,["createTime"],c);const f=d(n,["startTime"]);f!=null&&g(e,["startTime"],f);const p=d(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=d(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=d(n,["model"]);v!=null&&g(e,["model"],v);const E=d(n,["inputConfig"]);E!=null&&g(e,["src"],TP(E));const A=d(n,["outputConfig"]);return A!=null&&g(e,["dest"],_P(aC(A))),e}function TP(n){const e={},t=d(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=d(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function EP(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&g(t,["fileName"],s);const o=d(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>KP(n,c))),g(t,["requests","requests"],l)}return t}function SP(n){const e={},t=d(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=d(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const o=d(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function AP(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function CP(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],ba(n,s)),t}function IP(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],ba(n,s)),t}function RP(n){const e={},t=d(n,["content"]);t!=null&&g(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],wP(s));const o=d(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=d(n,["index"]);p!=null&&g(e,["index"],p);const m=d(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=d(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>b)),g(e,["safetyRatings"],A)}const E=d(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function wP(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function uC(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>t2(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function bP(n,e){const t={},s=d(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function NP(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=d(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],vP(gP(o))),t}function l0(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["src"]);o!=null&&g(t,["batch","inputConfig"],EP(n,oC(n,o)));const l=d(e,["config"]);return l!=null&&bP(l,t),t}function MP(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["model"],Ke(n,s));const o=d(e,["src"]);o!=null&&g(t,["inputConfig"],SP(oC(n,o)));const l=d(e,["config"]);return l!=null&&NP(l,t),t}function xP(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function DP(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["src"]);o!=null&&g(t,["batch","inputConfig"],qP(n,o));const l=d(e,["config"]);return l!=null&&xP(l,t),t}function PP(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],ba(n,s)),t}function kP(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],ba(n,s)),t}function VP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);return l!=null&&g(e,["error"],l),e}function UP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);return l!=null&&g(e,["error"],l),e}function LP(n,e){const t={},s=d(e,["contents"]);if(s!=null){let l=Xm(n,s);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["requests[]","request","content"],l)}const o=d(e,["config"]);return o!=null&&(g(t,["_self"],OP(o,t)),BD(t,{"requests[].*":"requests[].request.*"})),t}function OP(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function qP(n,e){const t={},s=d(e,["fileName"]);s!=null&&g(t,["file_name"],s);const o=d(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],LP(n,o)),t}function BP(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function FP(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],uC(rn(o)));const l=d(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&g(s,["topP"],c);const f=d(e,["topK"]);f!=null&&g(s,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=d(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const b=d(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=d(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=d(e,["seed"]);G!=null&&g(s,["seed"],G);const $=d(e,["responseMimeType"]);$!=null&&g(s,["responseMimeType"],$);const te=d(e,["responseSchema"]);te!=null&&g(s,["responseSchema"],Wm(te));const K=d(e,["responseJsonSchema"]);if(K!=null&&g(s,["responseJsonSchema"],K),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=d(e,["safetySettings"]);if(t!==void 0&&Z!=null){let O=Z;Array.isArray(O)&&(O=O.map(k=>n2(k))),g(t,["safetySettings"],O)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let O=wa(oe);Array.isArray(O)&&(O=O.map(k=>i2(Ra(k)))),g(t,["tools"],O)}const fe=d(e,["toolConfig"]);if(t!==void 0&&fe!=null&&g(t,["toolConfig"],fe),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=d(e,["cachedContent"]);t!==void 0&&ce!=null&&g(t,["cachedContent"],us(n,ce));const x=d(e,["responseModalities"]);x!=null&&g(s,["responseModalities"],x);const w=d(e,["mediaResolution"]);w!=null&&g(s,["mediaResolution"],w);const N=d(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],Zm(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=d(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const U=d(e,["imageConfig"]);return U!=null&&g(s,["imageConfig"],U),s}function zP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>RP(m))),g(e,["candidates"],p)}const o=d(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function GP(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],ba(n,s)),t}function HP(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],ba(n,s)),t}function JP(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function YP(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function KP(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["request","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let f=$n(o);Array.isArray(f)&&(f=f.map(p=>uC(p))),g(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&g(t,["metadata"],l);const c=d(e,["config"]);return c!=null&&g(t,["request","generationConfig"],FP(n,c,d(t,["request"],{}))),t}function $P(n){const e={},t=d(n,["response"]);t!=null&&g(e,["response"],zP(t));const s=d(n,["error"]);return s!=null&&g(e,["error"],s),e}function QP(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function XP(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function WP(n){const e={},t=d(n,["config"]);return t!=null&&QP(t,e),e}function ZP(n){const e={},t=d(n,["config"]);return t!=null&&XP(t,e),e}function jP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>lf(c))),g(e,["batchJobs"],l)}return e}function e2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Zp(c))),g(e,["batchJobs"],l)}return e}function t2(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],BP(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],AP(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function n2(n){const e={},t=d(n,["category"]);if(t!=null&&g(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function i2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],JP(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],YP(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ro;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_RAG_STORES="ragStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ro||(ro={}));class gu{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s2 extends co{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new gu(ro.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=l0(this.apiClient,e),s=t._url,o=pe("{model}:batchGenerateContent",s),f=t.batch.inputConfig.requests,p=f.requests,m=[];for(const v of p){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const b=E.request;b.systemInstruction=A,E.request=b}m.push(E)}return f.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=MP(this.apiClient,e);return f=pe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Zp(v))}else{const m=l0(this.apiClient,e);return f=pe("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>lf(v))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=DP(this.apiClient,e);return l=pe("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>lf(p))}}async get(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=HP(this.apiClient,e);return f=pe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Zp(v))}else{const m=GP(this.apiClient,e);return f=pe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>lf(v))}}async cancel(e){var t,s,o,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=IP(this.apiClient,e);c=pe("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=CP(this.apiClient,e);c=pe("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ZP(e);return f=pe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=e2(v),A=new s0;return Object.assign(A,E),A})}else{const m=WP(e);return f=pe("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=jP(v),A=new s0;return Object.assign(A,E),A})}}async delete(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=kP(this.apiClient,e);return f=pe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>UP(v))}else{const m=PP(this.apiClient,e);return f=pe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>VP(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r2(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function u0(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>R2(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function o2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let v=$n(c);Array.isArray(v)&&(v=v.map(E=>u0(E))),g(e,["contents"],v)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],u0(rn(f)));const p=d(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>w2(E))),g(e,["tools"],v)}const m=d(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function a2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const l=d(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const c=d(n,["contents"]);if(e!==void 0&&c!=null){let E=$n(c);Array.isArray(E)&&(E=E.map(A=>A)),g(e,["contents"],E)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],rn(f));const p=d(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>b2(A))),g(e,["tools"],E)}const m=d(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function l2(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["model"],WA(n,s));const o=d(e,["config"]);return o!=null&&o2(o,t),t}function u2(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["model"],WA(n,s));const o=d(e,["config"]);return o!=null&&a2(o,t),t}function c2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],us(n,s)),t}function f2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],us(n,s)),t}function d2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function h2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function p2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function m2(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&g(e,["description"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&g(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function g2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],us(n,s)),t}function y2(n,e){const t={},s=d(e,["name"]);return s!=null&&g(t,["_url","name"],us(n,s)),t}function _2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function v2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function T2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function E2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function S2(n){const e={},t=d(n,["config"]);return t!=null&&T2(t,e),e}function A2(n){const e={},t=d(n,["config"]);return t!=null&&E2(t,e),e}function C2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function I2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["cachedContents"],l)}return e}function R2(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],p2(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],r2(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function w2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],_2(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],v2(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function b2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>m2(A))),g(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=d(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=d(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const f=d(n,["codeExecution"]);f!=null&&g(e,["codeExecution"],f);const p=d(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=d(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function N2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function M2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function x2(n,e){const t={},s=d(e,["name"]);s!=null&&g(t,["_url","name"],us(n,s));const o=d(e,["config"]);return o!=null&&N2(o,t),t}function D2(n,e){const t={},s=d(e,["name"]);s!=null&&g(t,["_url","name"],us(n,s));const o=d(e,["config"]);return o!=null&&M2(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P2 extends co{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gu(ro.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=u2(this.apiClient,e);return f=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=l2(this.apiClient,e);return f=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=y2(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=g2(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=f2(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=h2(v),A=new n0;return Object.assign(A,E),A})}else{const m=c2(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=d2(v),A=new n0;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=D2(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=x2(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=A2(e);return f=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=I2(v),A=new i0;return Object.assign(A,E),A})}else{const m=S2(e);return f=pe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=C2(v),A=new i0;return Object.assign(A,E),A})}}}function c0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(n){return this instanceof ft?(this.v=n,this):new ft(n)}function fa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(b){return function(q){return Promise.resolve(q).then(b,E)}}function f(b,q){s[b]&&(o[b]=function(G){return new Promise(function($,te){l.push([b,G,$,te])>1||p(b,G)})},q&&(o[b]=q(o[b])))}function p(b,q){try{m(s[b](q))}catch(G){A(l[0][3],G)}}function m(b){b.value instanceof ft?Promise.resolve(b.value.v).then(v,E):A(l[0][2],b)}function v(b){p("next",b)}function E(b){p("throw",b)}function A(b,q){b(q),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Kl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof c0=="function"?c0(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(f,p){c=n[l](c),o(f,p,c.done,c.value)})}}function o(l,c,f,p){Promise.resolve(p).then(function(m){l({value:m,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:cC(t)}function cC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function V2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function f0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!cC(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class U2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new L2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class L2{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),V2(l)}async sendMessage(e){var t;await this.sendPromise;const s=rn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,f;const p=await o,m=(c=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(f=v.slice(E))!==null&&f!==void 0?f:[]);const b=m?[m]:[];this.recordHistory(s,b,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=rn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?f0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return fa(this,arguments,function*(){var c,f,p,m;const v=[];try{for(var E=!0,A=Kl(e),b;b=yield ft(A.next()),c=b.done,!c;E=!0){m=b.value,E=!1;const q=m;if(k2(q)){const G=(o=(s=q.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;G!==void 0&&v.push(G)}yield yield ft(q)}}catch(q){f={error:q}}finally{try{!E&&!c&&(p=A.return)&&(yield ft(p.call(A)))}finally{if(f)throw f.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...f0(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Zf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O2(n){const e={},t=d(n,["file"]);return t!=null&&g(e,["file"],t),e}function q2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function B2(n){const e={},t=d(n,["name"]);return t!=null&&g(e,["_url","file"],iC(t)),e}function F2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function z2(n){const e={},t=d(n,["name"]);return t!=null&&g(e,["_url","file"],iC(t)),e}function G2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function H2(n){const e={},t=d(n,["config"]);return t!=null&&G2(t,e),e}function J2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y2 extends co{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new gu(ro.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=H2(e);return l=pe("files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=J2(p),v=new iP;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=O2(e);return l=pe("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=q2(p),v=new sP;return Object.assign(v,m),v})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=z2(e);return l=pe("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=B2(e);return l=pe("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=F2(p),v=new rP;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uf(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function K2(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>lk(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function $2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Q2(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&g(e,["description"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&g(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function X2(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=d(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=d(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=d(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=d(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const f=d(n,["logprobs"]);f!=null&&g(e,["logprobs"],f);const p=d(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=d(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=d(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=d(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=d(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const b=d(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=d(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const G=d(n,["responseSchema"]);G!=null&&g(e,["responseSchema"],G);const $=d(n,["routingConfig"]);$!=null&&g(e,["routingConfig"],$);const te=d(n,["seed"]);te!=null&&g(e,["seed"],te);const K=d(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],fC(K));const Z=d(n,["stopSequences"]);Z!=null&&g(e,["stopSequences"],Z);const oe=d(n,["temperature"]);oe!=null&&g(e,["temperature"],oe);const fe=d(n,["thinkingConfig"]);fe!=null&&g(e,["thinkingConfig"],fe);const ce=d(n,["topK"]);ce!=null&&g(e,["topK"],ce);const x=d(n,["topP"]);if(x!=null&&g(e,["topP"],x),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function W2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Z2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function j2(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],jm(E));const A=d(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],K2(rn(q)));const G=d(n,["tools"]);if(e!==void 0&&G!=null){let ce=wa(G);Array.isArray(ce)&&(ce=ce.map(x=>ck(Ra(x)))),g(e,["setup","tools"],ce)}const $=d(n,["sessionResumption"]);e!==void 0&&$!=null&&g(e,["setup","sessionResumption"],uk($));const te=d(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=d(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&g(e,["setup","realtimeInputConfig"],Z);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&g(e,["setup","contextWindowCompression"],oe);const fe=d(n,["proactivity"]);return e!==void 0&&fe!=null&&g(e,["setup","proactivity"],fe),t}function ek(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],X2(s));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],fC(jm(E)));const A=d(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],rn(q));const G=d(n,["tools"]);if(e!==void 0&&G!=null){let ce=wa(G);Array.isArray(ce)&&(ce=ce.map(x=>fk(Ra(x)))),g(e,["setup","tools"],ce)}const $=d(n,["sessionResumption"]);e!==void 0&&$!=null&&g(e,["setup","sessionResumption"],$);const te=d(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=d(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&g(e,["setup","realtimeInputConfig"],Z);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&g(e,["setup","contextWindowCompression"],oe);const fe=d(n,["proactivity"]);return e!==void 0&&fe!=null&&g(e,["setup","proactivity"],fe),t}function tk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=d(e,["config"]);return o!=null&&g(t,["config"],j2(o,t)),t}function nk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=d(e,["config"]);return o!=null&&g(t,["config"],ek(o,t)),t}function ik(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function sk(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["weightedPrompts"],s)}return e}function rk(n){const e={},t=d(n,["media"]);if(t!=null){let m=ZA(t);Array.isArray(m)&&(m=m.map(v=>uf(v))),g(e,["mediaChunks"],m)}const s=d(n,["audio"]);s!=null&&g(e,["audio"],uf(eC(s)));const o=d(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&g(e,["video"],uf(jA(l)));const c=d(n,["text"]);c!=null&&g(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=d(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function ok(n){const e={},t=d(n,["media"]);if(t!=null){let m=ZA(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=d(n,["audio"]);s!=null&&g(e,["audio"],eC(s));const o=d(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const l=d(n,["video"]);l!=null&&g(e,["video"],jA(l));const c=d(n,["text"]);c!=null&&g(e,["text"],c);const f=d(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=d(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function ak(n){const e={},t=d(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=d(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const o=d(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const l=d(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const c=d(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],dk(c));const f=d(n,["goAway"]);f!=null&&g(e,["goAway"],f);const p=d(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function lk(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],$2(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],uf(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function uk(n){const e={},t=d(n,["handle"]);if(t!=null&&g(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fC(n){const e={},t=d(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ck(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],W2(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],Z2(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function fk(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>Q2(A))),g(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=d(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=d(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const f=d(n,["codeExecution"]);f!=null&&g(e,["codeExecution"],f);const p=d(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=d(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function dk(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=d(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const o=d(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const c=d(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const f=d(n,["totalTokenCount"]);f!=null&&g(e,["totalTokenCount"],f);const p=d(n,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["promptTokensDetails"],b)}const m=d(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["cacheTokensDetails"],b)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["responseTokensDetails"],b)}const E=d(n,["toolUsePromptTokensDetails"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["toolUsePromptTokensDetails"],b)}const A=d(n,["trafficType"]);return A!=null&&g(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hk(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function pk(n){const e={},t=d(n,["content"]);t!=null&&g(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],mk(s));const o=d(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const l=d(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const c=d(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=d(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=d(n,["index"]);p!=null&&g(e,["index"],p);const m=d(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=d(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>b)),g(e,["safetyRatings"],A)}const E=d(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function mk(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),g(e,["citations"],s)}return e}function gk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let l=$n(o);Array.isArray(l)&&(l=l.map(c=>c)),g(t,["contents"],l)}return t}function yk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["tokensInfo"],o)}return e}function _k(n){const e={},t=d(n,["values"]);t!=null&&g(e,["values"],t);const s=d(n,["statistics"]);return s!=null&&g(e,["statistics"],vk(s)),e}function vk(n){const e={},t=d(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=d(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function jf(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>CV(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function Tk(n){const e={},t=d(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=d(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function Ek(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Sk(n,e){const t={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],rn(s));const o=d(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>gC(f))),g(e,["tools"],c)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],fV(l)),t}function Ak(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=$n(o);Array.isArray(c)&&(c=c.map(f=>jf(f))),g(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&Ek(l),t}function Ck(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=$n(o);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&Sk(l,t),t}function Ik(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const o=d(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function Rk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function wk(n,e){const t={},s=d(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function bk(n,e){const t={},s=d(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function Nk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Mk(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function xk(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=d(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=d(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const b=d(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=d(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const G=d(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&g(e,["parameters","outputOptions","compressionQuality"],G);const $=d(n,["addWatermark"]);e!==void 0&&$!=null&&g(e,["parameters","addWatermark"],$);const te=d(n,["labels"]);e!==void 0&&te!=null&&g(e,["labels"],te);const K=d(n,["editMode"]);e!==void 0&&K!=null&&g(e,["parameters","editMode"],K);const Z=d(n,["baseSteps"]);return e!==void 0&&Z!=null&&g(e,["parameters","editConfig","baseSteps"],Z),t}function Dk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>MV(p))),g(t,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&xk(c,t),t}function Pk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>ed(l))),g(e,["generatedImages"],o)}return e}function kk(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Vk(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const o=d(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const c=d(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&g(e,["parameters","autoTruncate"],f),t}function Uk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let f=Xm(n,o);Array.isArray(f)&&(f=f.map(p=>p)),g(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&kk(l,t);const c=d(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],Ke(n,c)),t}function Lk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=Xm(n,o);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&Vk(l,t),t}function Ok(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),g(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function qk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_k(c))),g(e,["embeddings"],l)}const o=d(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function Bk(n){const e={},t=d(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=d(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function Fk(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function zk(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&g(e,["description"],t);const s=d(n,["name"]);s!=null&&g(e,["name"],s);const o=d(n,["parameters"]);o!=null&&g(e,["parameters"],o);const l=d(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const c=d(n,["response"]);c!=null&&g(e,["response"],c);const f=d(n,["responseJsonSchema"]);return f!=null&&g(e,["responseJsonSchema"],f),e}function Gk(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],jf(rn(o)));const l=d(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&g(s,["topP"],c);const f=d(e,["topK"]);f!=null&&g(s,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=d(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const b=d(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=d(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=d(e,["seed"]);G!=null&&g(s,["seed"],G);const $=d(e,["responseMimeType"]);$!=null&&g(s,["responseMimeType"],$);const te=d(e,["responseSchema"]);te!=null&&g(s,["responseSchema"],Wm(te));const K=d(e,["responseJsonSchema"]);if(K!=null&&g(s,["responseJsonSchema"],K),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=d(e,["safetySettings"]);if(t!==void 0&&Z!=null){let O=Z;Array.isArray(O)&&(O=O.map(k=>xV(k))),g(t,["safetySettings"],O)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let O=wa(oe);Array.isArray(O)&&(O=O.map(k=>LV(Ra(k)))),g(t,["tools"],O)}const fe=d(e,["toolConfig"]);if(t!==void 0&&fe!=null&&g(t,["toolConfig"],fe),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=d(e,["cachedContent"]);t!==void 0&&ce!=null&&g(t,["cachedContent"],us(n,ce));const x=d(e,["responseModalities"]);x!=null&&g(s,["responseModalities"],x);const w=d(e,["mediaResolution"]);w!=null&&g(s,["mediaResolution"],w);const N=d(e,["speechConfig"]);if(N!=null&&g(s,["speechConfig"],Zm(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=d(e,["thinkingConfig"]);D!=null&&g(s,["thinkingConfig"],D);const U=d(e,["imageConfig"]);return U!=null&&g(s,["imageConfig"],U),s}function Hk(n,e,t){const s={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],rn(o));const l=d(e,["temperature"]);l!=null&&g(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&g(s,["topP"],c);const f=d(e,["topK"]);f!=null&&g(s,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=d(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&g(s,["responseLogprobs"],E);const A=d(e,["logprobs"]);A!=null&&g(s,["logprobs"],A);const b=d(e,["presencePenalty"]);b!=null&&g(s,["presencePenalty"],b);const q=d(e,["frequencyPenalty"]);q!=null&&g(s,["frequencyPenalty"],q);const G=d(e,["seed"]);G!=null&&g(s,["seed"],G);const $=d(e,["responseMimeType"]);$!=null&&g(s,["responseMimeType"],$);const te=d(e,["responseSchema"]);te!=null&&g(s,["responseSchema"],Wm(te));const K=d(e,["responseJsonSchema"]);K!=null&&g(s,["responseJsonSchema"],K);const Z=d(e,["routingConfig"]);Z!=null&&g(s,["routingConfig"],Z);const oe=d(e,["modelSelectionConfig"]);oe!=null&&g(s,["modelConfig"],oe);const fe=d(e,["safetySettings"]);if(t!==void 0&&fe!=null){let F=fe;Array.isArray(F)&&(F=F.map(ae=>ae)),g(t,["safetySettings"],F)}const ce=d(e,["tools"]);if(t!==void 0&&ce!=null){let F=wa(ce);Array.isArray(F)&&(F=F.map(ae=>gC(Ra(ae)))),g(t,["tools"],F)}const x=d(e,["toolConfig"]);t!==void 0&&x!=null&&g(t,["toolConfig"],x);const w=d(e,["labels"]);t!==void 0&&w!=null&&g(t,["labels"],w);const N=d(e,["cachedContent"]);t!==void 0&&N!=null&&g(t,["cachedContent"],us(n,N));const D=d(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const U=d(e,["mediaResolution"]);U!=null&&g(s,["mediaResolution"],U);const O=d(e,["speechConfig"]);O!=null&&g(s,["speechConfig"],mC(Zm(O)));const k=d(e,["audioTimestamp"]);k!=null&&g(s,["audioTimestamp"],k);const rt=d(e,["thinkingConfig"]);rt!=null&&g(s,["thinkingConfig"],rt);const ot=d(e,["imageConfig"]);return ot!=null&&g(s,["imageConfig"],ot),s}function d0(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=$n(o);Array.isArray(c)&&(c=c.map(f=>jf(f))),g(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&g(t,["generationConfig"],Gk(n,l,t)),t}function h0(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["contents"]);if(o!=null){let c=$n(o);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const l=d(e,["config"]);return l!=null&&g(t,["generationConfig"],Hk(n,l,t)),t}function p0(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>pk(m))),g(e,["candidates"],p)}const o=d(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function m0(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=d(n,["createTime"]);o!=null&&g(e,["createTime"],o);const l=d(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const c=d(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const f=d(n,["responseId"]);f!=null&&g(e,["responseId"],f);const p=d(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function Jk(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const p=d(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=d(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=d(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=d(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const A=d(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&g(e,["parameters","outputOptions","compressionQuality"],A),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=d(n,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Yk(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const c=d(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=d(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const A=d(n,["includeRaiReason"]);e!==void 0&&A!=null&&g(e,["parameters","includeRaiReason"],A);const b=d(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=d(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const G=d(n,["outputCompressionQuality"]);e!==void 0&&G!=null&&g(e,["parameters","outputOptions","compressionQuality"],G);const $=d(n,["addWatermark"]);e!==void 0&&$!=null&&g(e,["parameters","addWatermark"],$);const te=d(n,["labels"]);e!==void 0&&te!=null&&g(e,["labels"],te);const K=d(n,["imageSize"]);e!==void 0&&K!=null&&g(e,["parameters","sampleImageSize"],K);const Z=d(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&g(e,["parameters","enhancePrompt"],Z),t}function Kk(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&Jk(l,t),t}function $k(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&Yk(l,t),t}function Qk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>aV(c))),g(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],hC(o)),e}function Xk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>ed(c))),g(e,["generatedImages"],l)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],pC(o)),e}function Wk(n,e){const t={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=d(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=d(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],td(v));const E=d(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(b=>XV(b))),g(e,["instances[0]","referenceImages"],A)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Zk(n,e){const t={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const l=d(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const c=d(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const f=d(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const p=d(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=d(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=d(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const A=d(n,["negativePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","negativePrompt"],A);const b=d(n,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const q=d(n,["generateAudio"]);e!==void 0&&q!=null&&g(e,["parameters","generateAudio"],q);const G=d(n,["lastFrame"]);e!==void 0&&G!=null&&g(e,["instances[0]","lastFrame"],oi(G));const $=d(n,["referenceImages"]);if(e!==void 0&&$!=null){let Z=$;Array.isArray(Z)&&(Z=Z.map(oe=>WV(oe))),g(e,["instances[0]","referenceImages"],Z)}const te=d(n,["mask"]);e!==void 0&&te!=null&&g(e,["instances[0]","mask"],QV(te));const K=d(n,["compressionQuality"]);return e!==void 0&&K!=null&&g(e,["parameters","compressionQuality"],K),t}function jk(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],iV(c)),e}function eV(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["metadata"]);s!=null&&g(e,["metadata"],s);const o=d(n,["done"]);o!=null&&g(e,["done"],o);const l=d(n,["error"]);l!=null&&g(e,["error"],l);const c=d(n,["response"]);return c!=null&&g(e,["response"],sV(c)),e}function tV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&g(t,["instances[0]","image"],td(l));const c=d(e,["video"]);c!=null&&g(t,["instances[0]","video"],yC(c));const f=d(e,["source"]);f!=null&&rV(f,t);const p=d(e,["config"]);return p!=null&&Wk(p,t),t}function nV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&g(t,["instances[0]","image"],oi(l));const c=d(e,["video"]);c!=null&&g(t,["instances[0]","video"],_C(c));const f=d(e,["source"]);f!=null&&oV(f,t);const p=d(e,["config"]);return p!=null&&Zk(p,t),t}function iV(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>uV(c))),g(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function sV(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>cV(c))),g(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function rV(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],td(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],yC(l)),t}function oV(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],oi(o));const l=d(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],_C(l)),t}function aV(n){const e={},t=d(n,["_self"]);t!=null&&g(e,["image"],gV(t));const s=d(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=d(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],hC(o)),e}function ed(n){const e={},t=d(n,["_self"]);t!=null&&g(e,["image"],dC(t));const s=d(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const o=d(n,["_self"]);o!=null&&g(e,["safetyAttributes"],pC(o));const l=d(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function lV(n){const e={},t=d(n,["_self"]);t!=null&&g(e,["mask"],dC(t));const s=d(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(e,["labels"],o)}return e}function uV(n){const e={},t=d(n,["video"]);return t!=null&&g(e,["video"],KV(t)),e}function cV(n){const e={},t=d(n,["_self"]);return t!=null&&g(e,["video"],$V(t)),e}function fV(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=d(n,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const o=d(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const l=d(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=d(n,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const f=d(n,["logprobs"]);f!=null&&g(e,["logprobs"],f);const p=d(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const m=d(n,["mediaResolution"]);m!=null&&g(e,["mediaResolution"],m);const v=d(n,["presencePenalty"]);v!=null&&g(e,["presencePenalty"],v);const E=d(n,["responseJsonSchema"]);E!=null&&g(e,["responseJsonSchema"],E);const A=d(n,["responseLogprobs"]);A!=null&&g(e,["responseLogprobs"],A);const b=d(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=d(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const G=d(n,["responseSchema"]);G!=null&&g(e,["responseSchema"],G);const $=d(n,["routingConfig"]);$!=null&&g(e,["routingConfig"],$);const te=d(n,["seed"]);te!=null&&g(e,["seed"],te);const K=d(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],mC(K));const Z=d(n,["stopSequences"]);Z!=null&&g(e,["stopSequences"],Z);const oe=d(n,["temperature"]);oe!=null&&g(e,["temperature"],oe);const fe=d(n,["thinkingConfig"]);fe!=null&&g(e,["thinkingConfig"],fe);const ce=d(n,["topK"]);ce!=null&&g(e,["topK"],ce);const x=d(n,["topP"]);if(x!=null&&g(e,["topP"],x),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function dV(n,e){const t={},s=d(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function hV(n,e){const t={},s=d(e,["model"]);return s!=null&&g(t,["_url","name"],Ke(n,s)),t}function pV(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function mV(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function gV(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],_r(t));const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function dC(n){const e={},t=d(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],_r(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function td(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],_r(t));const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function oi(n){const e={},t=d(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=d(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],_r(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function yV(n,e,t){const s={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],sC(n,f)),s}function _V(n,e,t){const s={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const c=d(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],sC(n,f)),s}function vV(n,e){const t={},s=d(e,["config"]);return s!=null&&yV(n,s,t),t}function TV(n,e){const t={},s=d(e,["config"]);return s!=null&&_V(n,s,t),t}function EV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["_self"]);if(o!=null){let l=rC(o);Array.isArray(l)&&(l=l.map(c=>jp(c))),g(e,["models"],l)}return e}function SV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const o=d(n,["_self"]);if(o!=null){let l=rC(o);Array.isArray(l)&&(l=l.map(c=>em(c))),g(e,["models"],l)}return e}function AV(n){const e={},t=d(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=d(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const o=d(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function jp(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=d(n,["description"]);o!=null&&g(e,["description"],o);const l=d(n,["version"]);l!=null&&g(e,["version"],l);const c=d(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],OV(c));const f=d(n,["inputTokenLimit"]);f!=null&&g(e,["inputTokenLimit"],f);const p=d(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=d(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function em(n){const e={},t=d(n,["name"]);t!=null&&g(e,["name"],t);const s=d(n,["displayName"]);s!=null&&g(e,["displayName"],s);const o=d(n,["description"]);o!=null&&g(e,["description"],o);const l=d(n,["versionId"]);l!=null&&g(e,["version"],l);const c=d(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>Bk(A))),g(e,["endpoints"],E)}const f=d(n,["labels"]);f!=null&&g(e,["labels"],f);const p=d(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],qV(p));const m=d(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=d(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),g(e,["checkpoints"],E)}return e}function CV(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],Fk(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],hk(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function IV(n){const e={},t=d(n,["productImage"]);return t!=null&&g(e,["image"],oi(t)),e}function RV(n,e){const t={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const o=d(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const p=d(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=d(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const A=d(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const b=d(n,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),t}function wV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["source"]);o!=null&&NV(o,t);const l=d(e,["config"]);return l!=null&&RV(l,t),t}function bV(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>ed(o))),g(e,["generatedImages"],s)}return e}function NV(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=d(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],oi(o));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>IV(f))),g(e,["instances[0]","productImages"],c)}return t}function MV(n){const e={},t=d(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],oi(t));const s=d(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const o=d(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const l=d(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],AV(l));const c=d(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],Tk(c));const f=d(n,["styleImageConfig"]);f!=null&&g(e,["styleImageConfig"],f);const p=d(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function hC(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=d(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function pC(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const o=d(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function xV(n){const e={},t=d(n,["category"]);if(t!=null&&g(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function DV(n){const e={},t=d(n,["image"]);return t!=null&&g(e,["image"],oi(t)),e}function PV(n,e){const t={},s=d(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const o=d(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const c=d(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&g(e,["parameters","binaryColorThreshold"],f);const p=d(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function kV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["source"]);o!=null&&UV(o,t);const l=d(e,["config"]);return l!=null&&PV(l,t),t}function VV(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>lV(o))),g(e,["generatedMasks"],s)}return e}function UV(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const o=d(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],oi(o));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],DV(l)),t}function mC(n){const e={},t=d(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const s=d(n,["voiceConfig"]);if(s!=null&&g(e,["voiceConfig"],s),d(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function LV(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],pV(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],mV(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function gC(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>zk(A))),g(e,["functionDeclarations"],E)}const s=d(n,["retrieval"]);s!=null&&g(e,["retrieval"],s);const o=d(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const l=d(n,["googleMaps"]);l!=null&&g(e,["googleMaps"],l);const c=d(n,["computerUse"]);c!=null&&g(e,["computerUse"],c);const f=d(n,["codeExecution"]);f!=null&&g(e,["codeExecution"],f);const p=d(n,["enterpriseWebSearch"]);p!=null&&g(e,["enterpriseWebSearch"],p);const m=d(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=d(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function OV(n){const e={},t=d(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=d(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function qV(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&g(e,["createTime"],s);const o=d(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function BV(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=d(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function FV(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const o=d(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function zV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","name"],Ke(n,s));const o=d(e,["config"]);return o!=null&&BV(o,t),t}function GV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["config"]);return o!=null&&FV(o,t),t}function HV(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const o=d(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const c=d(n,["includeRaiReason"]);e!==void 0&&c!=null&&g(e,["parameters","includeRaiReason"],c);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","mimeType"],f);const p=d(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=d(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=d(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=d(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const A=d(n,["numberOfImages"]);e!==void 0&&A!=null&&g(e,["parameters","sampleCount"],A);const b=d(n,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),t}function JV(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["_url","model"],Ke(n,s));const o=d(e,["image"]);o!=null&&g(t,["instances[0]","image"],oi(o));const l=d(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&HV(c,t),t}function YV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>ed(l))),g(e,["generatedImages"],o)}return e}function KV(n){const e={},t=d(n,["uri"]);t!=null&&g(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],_r(s));const o=d(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function $V(n){const e={},t=d(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],_r(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function QV(n){const e={},t=d(n,["image"]);t!=null&&g(e,["_self"],oi(t));const s=d(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function XV(n){const e={},t=d(n,["image"]);t!=null&&g(e,["image"],td(t));const s=d(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function WV(n){const e={},t=d(n,["image"]);t!=null&&g(e,["image"],oi(t));const s=d(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function yC(n){const e={},t=d(n,["uri"]);t!=null&&g(e,["uri"],t);const s=d(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],_r(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function _C(n){const e={},t=d(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=d(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],_r(s));const o=d(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZV="Content-Type",jV="X-Server-Timeout",eU="User-Agent",tm="x-goog-api-client",tU="1.28.0",nU=`google-genai-sdk/${tU}`,iU="v1beta1",sU="v1beta",g0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class rU{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:iU,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:sU,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))o.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,o){if(t&&t.timeout||o){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&oU(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await y0(o),new Xp(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await y0(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return fa(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:f,value:p}=yield ft(o.read());if(f){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(p,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const A=JSON.parse(JSON.stringify(E.error)),b=A.status,q=A.code,G=`got status: ${b}. ${JSON.stringify(E)}`;if(q>=400&&q<600)throw new Zf({message:G,status:q})}}catch(E){if(E.name==="ApiError")throw E}c+=m;let v=c.match(g0);for(;v;){const E=v[1];try{const A=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ft(new Xp(A)),c=c.slice(v[0].length),v=c.match(g0)}catch(A){throw new Error(`exception parsing stream chunk ${E}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=nU+" "+this.clientOptions.userAgentExtra;return e[eU]=t,e[tm]=t,e[ZV]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(jV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}async uploadFile(e,t){var s,o;const l={};t!=null&&(l.mimeType=t.mimeType,l.name=t.name,l.displayName=t.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const c=this.clientOptions.uploader,f=await c.stat(e);l.sizeBytes=String(f.size);const p=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:f.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=p;let m="";typeof e=="string"&&(m=e.replace(/[/\\]+$/,""),m=(o=m.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const v=await this.fetchUploadUrl(l,m,t);return c.upload(e,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s){var o;let l={};s!=null&&s.httpOptions?l=s.httpOptions:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},t?{"X-Goog-Upload-File-Name":t}:{})};const c={file:e},f=await this.request({path:pe("upload/v1beta/files",c._url),body:JSON.stringify(c),httpMethod:"POST",httpOptions:l});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(o=f==null?void 0:f.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function y0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Zf({message:o,status:t}):new Error(o)}}function oU(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const f=Object.assign({},l);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=f[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?f[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),f[p]=m)}return f}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aU="mcp_used/unknown";let lU=!1;function vC(n){for(const e of n)if(uU(e)||typeof e=="object"&&"inputSchema"in e)return!0;return lU}function TC(n){var e;const t=(e=n[tm])!==null&&e!==void 0?e:"";n[tm]=(t+` ${aU}`).trimStart()}function uU(n){return n!==null&&typeof n=="object"&&n instanceof eg}function cU(n,e=100){return fa(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield ft(n.listTools({cursor:s}));for(const c of l.tools)yield yield ft(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class eg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new eg(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var f=!0,p=(t=void 0,Kl(cU(v))),m;m=await p.next(),e=m.done,!e;f=!0){o=m.value,f=!1;const E=o;c.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=v}}catch(E){t={error:E}}finally{try{!f&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),mP(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fU(n,e,t){const s=new aP;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class dU{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=mU(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const v=new Promise(Z=>{m=Z}),E=e.callbacks,A=function(){m({})},b=this.apiClient,q={onopen:A,onmessage:Z=>{fU(b,E.onmessage,Z)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(Z){}},G=this.webSocketFactory.create(p,pU(c),q);G.connect(),await v;const K={setup:{model:Ke(this.apiClient,e.model)}};return G.send(JSON.stringify(K)),new hU(G,this.apiClient)}}class hU{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=sk(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=ik(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ra.PLAY)}pause(){this.sendPlaybackControl(ra.PAUSE)}stop(){this.sendPlaybackControl(ra.STOP)}resetContext(){this.sendPlaybackControl(ra.RESET_CONTEXT)}close(){this.conn.close()}}function pU(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function mU(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function yU(n,e,t){const s=new oP;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=ak(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class _U{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new dU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&vC(e.config.tools)&&TC(E);const A=SU(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,v);else{const N=this.apiClient.getApiKey();let D="BidiGenerateContent",U="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",U="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${D}?${U}=${N}`}let b=()=>{};const q=new Promise(N=>{b=N}),G=e.callbacks,$=function(){var N;(N=G==null?void 0:G.onopen)===null||N===void 0||N.call(G),b({})},te=this.apiClient,K={onopen:$,onmessage:N=>{yU(te,G.onmessage,N)},onerror:(t=G==null?void 0:G.onerror)!==null&&t!==void 0?t:function(N){},onclose:(s=G==null?void 0:G.onclose)!==null&&s!==void 0?s:function(N){}},Z=this.webSocketFactory.create(v,EU(A),K);Z.connect(),await q;let oe=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const N=this.apiClient.getProject(),D=this.apiClient.getLocation();oe=`projects/${N}/locations/${D}/`+oe}let fe={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xf.AUDIO]}:e.config.responseModalities=[xf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],x=[];for(const N of ce)if(this.isCallableTool(N)){const D=N;x.push(await D.tool())}else x.push(N);x.length>0&&(e.config.tools=x);const w={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=nk(this.apiClient,w):fe=tk(this.apiClient,w),delete fe.config,Z.send(JSON.stringify(fe)),new TU(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const vU={turnComplete:!0};class TU{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=$n(t.turns),e.isVertexAI()||(s=s.map(o=>jf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(gU)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},vU),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:ok(e)}:t={realtimeInput:rk(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function EU(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function SU(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _0=10;function v0(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(da(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function da(n){return"callTool"in n&&typeof n.callTool=="function"}function AU(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>da(o)))!==null&&s!==void 0?s:!1}function CU(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!da(o)))!==null&&s!==void 0?s:!1}function T0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IU extends co{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,f;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!AU(t)||v0(t.config))return await this.generateContentInternal(p);if(CU(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m,v;const E=$n(p.contents),A=(l=(o=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:_0;let b=0;for(;b<A&&(m=await this.generateContentInternal(p),!(!m.functionCalls||m.functionCalls.length===0));){const q=m.candidates[0].content,G=[];for(const $ of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(da($)){const K=await $.callTool(m.functionCalls);G.push(...K)}b++,v={role:"user",parts:G},p.contents=$n(p.contents),p.contents.push(q),p.contents.push(v),T0(p.config)&&(E.push(q),E.push(v))}return T0(p.config)&&(m.automaticFunctionCallingHistory=E),m},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),v0(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new gu(ro.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,c,f,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((p=(f=t.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async p=>da(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&vC(e.config.tools)){const p=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),TC(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(da(c)){const f=c,p=await f.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,f)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:_0;let c=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(m,v,E){var A,b;return fa(this,arguments,function*(){for(var q,G,$,te;f<l;){c&&(f++,c=!1);const fe=yield ft(m.processParamsMaybeAddMcpUsage(E)),ce=yield ft(m.generateContentStreamInternal(fe)),x=[],w=[];try{for(var K=!0,Z=(G=void 0,Kl(ce)),oe;oe=yield ft(Z.next()),q=oe.done,!q;K=!0){te=oe.value,K=!1;const N=te;if(yield yield ft(N),N.candidates&&(!((A=N.candidates[0])===null||A===void 0)&&A.content)){w.push(N.candidates[0].content);for(const D of(b=N.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(f<l&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(D.functionCall.name)){const U=yield ft(v.get(D.functionCall.name).callTool([D.functionCall]));x.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(N){G={error:N}}finally{try{!K&&!q&&($=Z.return)&&(yield ft($.call(Z)))}finally{if(G)throw G.error}}if(x.length>0){c=!0;const N=new Dl;N.candidates=[{content:{role:"user",parts:x}}],yield yield ft(N);const D=[];D.push(...w),D.push({role:"user",parts:x});const U=$n(E.contents).concat(D);E.contents=U}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=h0(this.apiClient,e);return f=pe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=m0(v),A=new Dl;return Object.assign(A,E),A})}else{const m=d0(this.apiClient,e);return f=pe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=p0(v),A=new Dl;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=h0(this.apiClient,e);return f=pe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return fa(this,arguments,function*(){var A,b,q,G;try{for(var $=!0,te=Kl(E),K;K=yield ft(te.next()),A=K.done,!A;$=!0){G=K.value,$=!1;const Z=G,oe=m0(yield ft(Z.json()));oe.sdkHttpResponse={headers:Z.headers};const fe=new Dl;Object.assign(fe,oe),yield yield ft(fe)}}catch(Z){b={error:Z}}finally{try{!$&&!A&&(q=te.return)&&(yield ft(q.call(te)))}finally{if(b)throw b.error}}})})}else{const m=d0(this.apiClient,e);return f=pe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return fa(this,arguments,function*(){var A,b,q,G;try{for(var $=!0,te=Kl(E),K;K=yield ft(te.next()),A=K.done,!A;$=!0){G=K.value,$=!1;const Z=G,oe=p0(yield ft(Z.json()));oe.sdkHttpResponse={headers:Z.headers};const fe=new Dl;Object.assign(fe,oe),yield yield ft(fe)}}catch(Z){b={error:Z}}finally{try{!$&&!A&&(q=te.return)&&(yield ft(q.call(te)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Lk(this.apiClient,e);return f=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=qk(v),A=new XE;return Object.assign(A,E),A})}else{const m=Uk(this.apiClient,e);return f=pe("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Ok(v),A=new XE;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=$k(this.apiClient,e);return f=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Xk(v),A=new WE;return Object.assign(A,E),A})}else{const m=Kk(this.apiClient,e);return f=pe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Qk(v),A=new WE;return Object.assign(A,E),A})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=Dk(this.apiClient,e);return l=pe("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=Pk(p),v=new ZD;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=JV(this.apiClient,e);return l=pe("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=YV(p),v=new jD;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=wV(this.apiClient,e);return l=pe("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=bV(p),v=new eP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=kV(this.apiClient,e);return l=pe("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>{const m=VV(p),v=new tP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=hV(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>em(v))}else{const m=dV(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>jp(v))}}async listInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=TV(this.apiClient,e);return f=pe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=SV(v),A=new ZE;return Object.assign(A,E),A})}else{const m=vV(this.apiClient,e);return f=pe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=EV(v),A=new ZE;return Object.assign(A,E),A})}}async update(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=GV(this.apiClient,e);return f=pe("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>em(v))}else{const m=zV(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>jp(v))}}async delete(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=bk(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Mk(v),A=new jE;return Object.assign(A,E),A})}else{const m=wk(this.apiClient,e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Nk(v),A=new jE;return Object.assign(A,E),A})}}async countTokens(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Ck(this.apiClient,e);return f=pe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Rk(v),A=new e0;return Object.assign(A,E),A})}else{const m=Ak(this.apiClient,e);return f=pe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Ik(v),A=new e0;return Object.assign(A,E),A})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=gk(this.apiClient,e);return l=pe("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=yk(p),v=new nP;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=nV(this.apiClient,e);return f=pe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const E=eV(v),A=new Df;return Object.assign(A,E),A})}else{const m=tV(this.apiClient,e);return f=pe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=jk(v),A=new Df;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RU extends co{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=QD(e);return f=pe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=$D(e);return f=pe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=FD(e);return l=pe("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wU(n){const e={},t=d(n,["data"]);if(t!=null&&g(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function bU(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>UU(l))),g(e,["parts"],o)}const s=d(n,["role"]);return s!=null&&g(e,["role"],s),e}function NU(n,e,t){const s={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const c=d(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&g(t,["bidiGenerateContentSetup"],VU(n,f));const p=d(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function MU(n,e){const t={},s=d(e,["config"]);return s!=null&&g(t,["config"],NU(n,s,t)),t}function xU(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function DU(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function PU(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function kU(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const l=d(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const c=d(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=d(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=d(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=d(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],jm(E));const A=d(n,["thinkingConfig"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","thinkingConfig"],A);const b=d(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=d(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],bU(rn(q)));const G=d(n,["tools"]);if(e!==void 0&&G!=null){let ce=wa(G);Array.isArray(ce)&&(ce=ce.map(x=>OU(Ra(x)))),g(e,["setup","tools"],ce)}const $=d(n,["sessionResumption"]);e!==void 0&&$!=null&&g(e,["setup","sessionResumption"],LU($));const te=d(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=d(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&g(e,["setup","realtimeInputConfig"],Z);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&g(e,["setup","contextWindowCompression"],oe);const fe=d(n,["proactivity"]);return e!==void 0&&fe!=null&&g(e,["setup","proactivity"],fe),t}function VU(n,e){const t={},s=d(e,["model"]);s!=null&&g(t,["setup","model"],Ke(n,s));const o=d(e,["config"]);return o!=null&&g(t,["config"],kU(o,t)),t}function UU(n){const e={},t=d(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const s=d(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const o=d(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const l=d(n,["fileData"]);l!=null&&g(e,["fileData"],xU(l));const c=d(n,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&g(e,["inlineData"],wU(f));const p=d(n,["text"]);p!=null&&g(e,["text"],p);const m=d(n,["thought"]);m!=null&&g(e,["thought"],m);const v=d(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function LU(n){const e={},t=d(n,["handle"]);if(t!=null&&g(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function OU(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let m=t;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["functionDeclarations"],m)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const o=d(n,["googleMaps"]);o!=null&&g(e,["googleMaps"],DU(o));const l=d(n,["computerUse"]);l!=null&&g(e,["computerUse"],l);const c=d(n,["codeExecution"]);if(c!=null&&g(e,["codeExecution"],c),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],PU(f));const p=d(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function BU(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=qU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];l&&p.push(l),f.length>0&&p.push(...f),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class FU extends co{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=MU(this.apiClient,e);l=pe("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const p=BU(f,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zU(n,e){const t={},s=d(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function GU(n,e){const t={},s=d(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function HU(n,e,t){const s={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(n,["learningRateMultiplier"]);if(c!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function JU(n,e,t){const s={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const b=d(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],E0(b))}else if(o==="PREFERENCE_TUNING"){const b=d(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],E0(b))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const c=d(n,["description"]);e!==void 0&&c!=null&&g(e,["description"],c);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=d(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(f==="PREFERENCE_TUNING"){const b=d(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let p=d(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=d(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(p==="PREFERENCE_TUNING"){const b=d(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let m=d(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=d(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(m==="PREFERENCE_TUNING"){const b=d(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=d(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=d(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=d(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const A=d(n,["beta"]);return e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],A),s}function YU(n,e){const t={},s=d(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const o=d(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=d(n,["trainingDataset"]);l!=null&&iL(l);const c=d(n,["config"]);return c!=null&&HU(c,t),t}function KU(n,e){const t={},s=d(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const o=d(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const l=d(n,["trainingDataset"]);l!=null&&sL(l,t,e);const c=d(n,["config"]);return c!=null&&JU(c,t,e),t}function $U(n,e){const t={},s=d(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function QU(n,e){const t={},s=d(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function XU(n,e,t){const s={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function WU(n,e,t){const s={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const c=d(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function ZU(n,e){const t={},s=d(n,["config"]);return s!=null&&XU(s,t),t}function jU(n,e){const t={},s=d(n,["config"]);return s!=null&&WU(s,t),t}function eL(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=d(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>EC(f))),g(t,["tuningJobs"],c)}return t}function tL(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const l=d(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>nm(f))),g(t,["tuningJobs"],c)}return t}function nL(n,e){const t={},s=d(n,["name"]);s!=null&&g(t,["model"],s);const o=d(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function iL(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(n,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["examples","examples"],o)}return t}function sL(n,e,t){const s={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=d(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function EC(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&g(t,["name"],o);const l=d(n,["state"]);l!=null&&g(t,["state"],nC(l));const c=d(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=d(n,["tuningTask","startTime"]);f!=null&&g(t,["startTime"],f);const p=d(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=d(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=d(n,["description"]);v!=null&&g(t,["description"],v);const E=d(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const A=d(n,["_self"]);return A!=null&&g(t,["tunedModel"],nL(A)),t}function nm(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&g(t,["name"],o);const l=d(n,["state"]);l!=null&&g(t,["state"],nC(l));const c=d(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=d(n,["startTime"]);f!=null&&g(t,["startTime"],f);const p=d(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=d(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=d(n,["error"]);v!=null&&g(t,["error"],v);const E=d(n,["description"]);E!=null&&g(t,["description"],E);const A=d(n,["baseModel"]);A!=null&&g(t,["baseModel"],A);const b=d(n,["tunedModel"]);b!=null&&g(t,["tunedModel"],b);const q=d(n,["preTunedModel"]);q!=null&&g(t,["preTunedModel"],q);const G=d(n,["supervisedTuningSpec"]);G!=null&&g(t,["supervisedTuningSpec"],G);const $=d(n,["preferenceOptimizationSpec"]);$!=null&&g(t,["preferenceOptimizationSpec"],$);const te=d(n,["tuningDataStats"]);te!=null&&g(t,["tuningDataStats"],te);const K=d(n,["encryptionSpec"]);K!=null&&g(t,["encryptionSpec"],K);const Z=d(n,["partnerModelTuningSpec"]);Z!=null&&g(t,["partnerModelTuningSpec"],Z);const oe=d(n,["customBaseModel"]);oe!=null&&g(t,["customBaseModel"],oe);const fe=d(n,["experiment"]);fe!=null&&g(t,["experiment"],fe);const ce=d(n,["labels"]);ce!=null&&g(t,["labels"],ce);const x=d(n,["outputUri"]);x!=null&&g(t,["outputUri"],x);const w=d(n,["pipelineJob"]);w!=null&&g(t,["pipelineJob"],w);const N=d(n,["serviceAccount"]);N!=null&&g(t,["serviceAccount"],N);const D=d(n,["tunedModelDisplayName"]);D!=null&&g(t,["tunedModelDisplayName"],D);const U=d(n,["veoTuningSpec"]);return U!=null&&g(t,["veoTuningSpec"],U),t}function rL(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const o=d(n,["name"]);o!=null&&g(t,["name"],o);const l=d(n,["metadata"]);l!=null&&g(t,["metadata"],l);const c=d(n,["done"]);c!=null&&g(t,["done"],c);const f=d(n,["error"]);return f!=null&&g(t,["error"],f),t}function E0(n,e){const t={},s=d(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const o=d(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oL extends co{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new gu(ro.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Qp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=QU(e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>nm(v))}else{const m=$U(e);return f=pe("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>EC(v))}}async listInternal(e){var t,s,o,l;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=jU(e);return f=pe("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=tL(v),A=new t0;return Object.assign(A,E),A})}else{const m=ZU(e);return f=pe("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=eL(v),A=new t0;return Object.assign(A,E),A})}}async cancel(e){var t,s,o,l;let c="",f={};if(this.apiClient.isVertexAI()){const p=GU(e);c=pe("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=zU(e);c=pe("{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=KU(e,e);return l=pe("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>nm(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=YU(e);return l=pe("tunedModels",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>rL(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aL{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lL=1024*1024*8,uL=3,cL=1e3,fL=2,Sp="x-goog-upload-status";async function dL(n,e,t){var s,o,l;let c=0,f=0,p=new Xp(new Response),m="upload";for(c=n.size;f<c;){const E=Math.min(lL,c-f),A=n.slice(f,f+E);f+E>=c&&(m+=", finalize");let b=0,q=cL;for(;b<uL&&(p=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(f),"Content-Length":String(E)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[Sp]));)b++,await pL(q),q=q*fL;if(f+=E,((o=p==null?void 0:p.headers)===null||o===void 0?void 0:o[Sp])!=="active")break;if(c<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(p==null?void 0:p.json());if(((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[Sp])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function hL(n){return{size:n.size,type:n.type}}function pL(n){return new Promise(e=>setTimeout(e,n))}class mL{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dL(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hL(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gL{create(e,t,s){return new yL(e,t,s)}}class yL{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S0="x-goog-api-key";class _L{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(S0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(S0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vL="gl-node/";class TL{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=qD(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new _L(this.apiKey);this.apiClient=new rU({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:vL+"web",uploader:new mL,downloader:new aL}),this.models=new IU(this.apiClient),this.live=new _U(this.apiClient,o,new gL),this.batches=new s2(this.apiClient),this.chats=new U2(this.models,this.apiClient),this.caches=new P2(this.apiClient),this.files=new Y2(this.apiClient),this.operations=new RU(this.apiClient),this.authTokens=new FU(this.apiClient),this.tunings=new oL(this.apiClient)}}const EL={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY"},tg=new TL({apiKey:EL.geminiApiKey});async function SL(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),s=await tg.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{items:{type:st.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:st.OBJECT,properties:{analysis:{type:st.STRING,description:"La description concise du vtement."},category:{type:st.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:st.STRING,description:"La couleur principale du vtement."},material:{type:st.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(s.text),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(c=>{l.includes(c.category)||(console.warn(`Catgorie invalide reue de l'IA: ${c.category}, fallback sur "Accessoires"`),c.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",s.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function AL(n){return n&&n.name&&Array.isArray(n.itemIds)}async function CL(n,e,t,s){const o=new Set(e.flatMap(A=>A.itemIds)),c=n.filter(A=>!o.has(A.id)).map(A=>`- ${A.analysis} (Catgorie: ${A.category}, Couleur: ${A.color}, Matire: ${A.material})`).join(`
`),f=e.map(A=>`- ${A.name} (Ensemble)`).join(`
`),p=[c,f].filter(Boolean).join(`
`),m=s?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${AL(s)?s.name:s.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${p}
    ${m}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,E=await tg.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{tenues:{type:st.ARRAY,description:"La liste des suggestions de tenues.",items:{type:st.OBJECT,properties:{titre:{type:st.STRING,description:"Le nom de la tenue."},description:{type:st.STRING,description:"Une brve description du style de la tenue."},vetements:{type:st.ARRAY,items:{type:st.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(A){throw console.error("Erreur de parsing JSON de la rponse Gemini:",A),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function IL(n,e,t,s){const o=new Set(e.flatMap(E=>E.itemIds)),c=n.filter(E=>!o.has(E.id)).map(E=>`- ${E.analysis} (Catgorie: ${E.category}, Couleur: ${E.color}, Matire: ${E.material})`).join(`
`),f=e.map(E=>`- ${E.name} (Ensemble)`).join(`
`),p=[c,f].filter(Boolean).join(`
`),m=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${s}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${p}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale. Les articles doivent pouvoir tre combins pour crer plusieurs tenues diffrentes.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables. Si tu utilises un ensemble, liste-le par son nom (ex: "Costume bleu marine").
    4. Assure-toi que la quantit de vtements est approprie pour la dure du voyage de ${t} jour(s). Pense  la rutilisation des pices (comme les pantalons ou les vestes).

    Fournis le rsultat en franais sous la forme suivante :
    1. Un "titre" accrocheur pour le plan de valise.
    2. Un "resume" court qui explique la stratgie de la valise (ex: "Une slection capsule pour un weekend ensoleill...").
    3. Une "valise" qui est une liste des descriptions exactes des vtements ou des noms d'ensembles de la liste fournie  emporter.
    `,v=await tg.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:st.OBJECT,properties:{titre:{type:st.STRING,description:"Le nom du plan de valise."},resume:{type:st.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:st.ARRAY,items:{type:st.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(E){throw console.error("Erreur de parsing JSON de la rponse Gemini pour la valise:",E),console.error("Rponse reue:",v.text),new Error("L'IA a renvoy une rponse malforme pour le plan de valise.")}}const RL=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),wL=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),A0=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),cf=()=>M.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[M.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),M.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ng=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),ig=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),bL=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),SC=()=>M.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),NL=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),ML=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),xL=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),DL=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),PL=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),AC=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),CC=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),kL=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),IC=()=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),VL=()=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[M.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),M.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),C0=({theme:n,toggleTheme:e,children:t})=>M.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:M.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[M.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:[M.jsx("span",{className:"text-gold",children:"DRESS"}),"CODE"]}),M.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?M.jsx(wL,{}):M.jsx(RL,{})})]})}),I0=({user:n})=>{const[e,t]=Ce.useState(""),[s,o]=Ce.useState(""),[l,c]=Ce.useState(!1),f=async()=>{try{await Lx(ql,xD)}catch(v){console.error("Erreur de connexion Google:",v)}},p=async v=>{v.preventDefault();try{l?await dx(ql,e,s):await hx(ql,e,s)}catch(E){console.error("Erreur d'authentification:",E)}},m=async()=>{try{await yx(ql)}catch(v){console.error("Erreur de dconnexion:",v)}};return n?M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsxs("span",{className:"text-sm",children:["Bonjour, ",n.displayName||n.email]}),M.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:"Dconnexion"})]}):M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-xl p-6 max-w-md mx-auto",children:[M.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:l?"Crer un compte":"Se connecter"}),M.jsxs("button",{onClick:f,className:"w-full mb-4 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition flex items-center justify-center gap-2",children:[M.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-6 h-6"}),"Continuer avec Google"]}),M.jsxs("div",{className:"relative my-6",children:[M.jsx("div",{className:"absolute inset-0 flex items-center",children:M.jsx("div",{className:"w-full border-t border-gray-300"})}),M.jsx("div",{className:"relative flex justify-center text-sm",children:M.jsx("span",{className:"px-2 bg-white dark:bg-raisin-black text-gray-500",children:"Ou"})})]}),M.jsxs("form",{onSubmit:p,className:"space-y-4",children:[M.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:v=>t(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0}),M.jsx("input",{type:"password",placeholder:"Mot de passe",value:s,onChange:v=>o(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gold",required:!0}),M.jsx("button",{type:"submit",className:"w-full px-4 py-3 bg-gold text-onyx rounded-lg hover:bg-gold-dark transition font-semibold",children:l?"Crer un compte":"Se connecter"})]}),M.jsx("button",{onClick:()=>c(!l),className:"w-full mt-4 text-sm text-gray-500 hover:text-gold transition",children:l?"Dj un compte ? Se connecter":"Pas de compte ? S'inscrire"})]})},UL=({onAnalyze:n,isAnalyzing:e})=>{const t=Ce.useRef(null),[s,o]=Ce.useState([]),[l,c]=Ce.useState(!1),[f,p]=Ce.useState(!1);Ce.useEffect(()=>{const K=()=>p(window.innerWidth<1024);return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),Ce.useEffect(()=>()=>{s.forEach(K=>URL.revokeObjectURL(K.preview))},[s]);const m=K=>{const Z=K.map(oe=>({id:`${oe.name}-${oe.lastModified}-${Math.random()}`,file:oe,preview:URL.createObjectURL(oe)}));o(oe=>[...oe,...Z])},v=K=>{K.target.files&&(m(Array.from(K.target.files)),K.target.value="")},E=()=>{var K;e||(K=t.current)==null||K.click()},A=K=>{f||(K.preventDefault(),K.stopPropagation(),c(!0))},b=K=>{f||(K.preventDefault(),K.stopPropagation(),c(!1))},q=K=>{f||(K.preventDefault(),K.stopPropagation())},G=K=>{f||(K.preventDefault(),K.stopPropagation(),c(!1),K.dataTransfer.files&&K.dataTransfer.files.length>0&&(m(Array.from(K.dataTransfer.files)),K.dataTransfer.clearData()))},$=K=>{const Z=s.find(oe=>oe.id===K);Z&&URL.revokeObjectURL(Z.preview),o(oe=>oe.filter(fe=>fe.id!==K))},te=()=>{s.length>0&&!e&&(n(s.map(K=>K.file)),o([]))};return M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:A,onDragLeave:b,onDragOver:q,onDrop:G,children:[M.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),M.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[M.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),M.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?M.jsxs(M.Fragment,{children:[M.jsx(cf,{}),M.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:M.jsx(A0,{})}),M.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:f?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),M.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",M.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),l&&!f&&M.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[M.jsx("div",{className:"text-black transform-gpu scale-110",children:M.jsx(A0,{})}),M.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),s.length>0&&!e&&M.jsxs("div",{className:"mt-8",children:[M.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),M.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:s.map(K=>M.jsxs("div",{className:"relative group aspect-square",children:[M.jsx("img",{src:K.preview,alt:K.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),M.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),M.jsx("button",{onClick:()=>$(K.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:M.jsx(ig,{})})]},K.id))}),M.jsxs("button",{onClick:te,disabled:e||s.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[M.jsx(ng,{}),"Analyser les ",s.length," article(s)"]})]})]})},LL=({imageSrc:n,analysis:e,onClick:t,onRemove:s,isSelected:o,isSet:l})=>M.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[M.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),M.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),M.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l&&!o&&M.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:M.jsx(CC,{})}),o&&M.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:M.jsx(kL,{})}),M.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:M.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),M.jsx("button",{onClick:s,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:M.jsx(ig,{})})]}),OL={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},qL=({clothingItems:n,clothingSets:e,onRemoveItem:t,onRemoveSet:s,onSelectItem:o,onCreateSet:l})=>{const[c,f]=Ce.useState("Hauts"),[p,m]=Ce.useState(OL),[v,E]=Ce.useState(!1),[A,b]=Ce.useState([]),[q,G]=Ce.useState(!1),$=Ce.useMemo(()=>new Set(e.flatMap(w=>w.itemIds)),[e]),te=n.length,K=[{name:"Hauts",icon:NL},{name:"Bas",icon:ML},{name:"Chaussures",icon:xL},{name:"Accessoires",icon:DL}],Z=()=>{E(!v),b([]),G(!1)},oe=w=>{v?b(N=>N.includes(w.id)?N.filter(D=>D!==w.id):[...N,w.id]):o(w)},fe=Ce.useMemo(()=>A.length<2?null:e.find(w=>w.itemIds.length===A.length&&w.itemIds.every(N=>A.includes(N))),[A,e]);if(te===0)return M.jsxs("div",{className:"text-center py-20 px-6 bg-white dark:bg-raisin-black rounded-xl border border-dashed border-gray-300/50 dark:border-gray-700/50 flex flex-col items-center",children:[M.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:M.jsx(bL,{})}),M.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide."}),M.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ajoutez des vtements pour commencer  crer."})]});const ce=w=>f(N=>N===w?null:w),x=(w,N,D)=>{m(U=>({...U,[w]:{...U[w],[N]:D}}))};return M.jsxs("div",{children:[M.jsxs("div",{className:"flex justify-between items-center mb-8",children:[M.jsxs("h2",{className:"text-3xl font-serif font-bold",children:["Ma Garde-Robe ",M.jsxs("span",{className:"text-gray-500",children:["(",te,")"]})]}),M.jsx("button",{onClick:Z,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${v?"bg-gold/20 text-gold":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700"}`,children:v?"Annuler la slection":"Crer un ensemble"})]}),M.jsx("div",{className:"space-y-4",children:K.map(({name:w,icon:N})=>{const D=n.filter(F=>F.category===w);if(D.length===0)return null;const U=c===w,O=["Hauts","Bas","Chaussures"].includes(w),k=[...new Set(D.map(F=>F.color))].sort(),rt=[...new Set(D.map(F=>F.material))].sort(),ot=D.filter(F=>{const{color:ae,material:ge}=p[w];return(ae==="Toutes"||F.color===ae)&&(ge==="Toutes"||F.material===ge)});return M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-lg shadow-black/5 dark:shadow-black/10 ring-1 ring-black/5 dark:ring-white/10 overflow-hidden transition-all duration-300",children:[M.jsxs("button",{onClick:()=>ce(w),className:"w-full flex justify-between items-center p-4 lg:p-5 text-left","aria-expanded":U,children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsx("span",{className:"text-gold",children:M.jsx(N,{})}),M.jsx("span",{className:"font-serif font-bold text-xl text-raisin-black dark:text-snow",children:w}),M.jsx("span",{className:"text-sm font-medium bg-snow dark:bg-onyx px-2 py-0.5 rounded-full text-gray-500 dark:text-gray-400",children:D.length})]}),M.jsx(PL,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${U?"rotate-180":""}`})]}),M.jsx("div",{className:`grid transition-all duration-500 ease-in-out ${U?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:M.jsx("div",{className:"overflow-hidden",children:M.jsxs("div",{className:"p-4 lg:p-5 border-t border-black/5 dark:border-white/10",children:[O&&M.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:`${w}-color-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Couleur"}),M.jsxs("select",{id:`${w}-color-filter`,value:p[w].color,onChange:F=>x(w,"color",F.target.value),onClick:F=>F.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[M.jsx("option",{value:"Toutes",children:"Toutes"}),k.map(F=>M.jsx("option",{value:F,children:F},F))]})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:`${w}-material-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Matire"}),M.jsxs("select",{id:`${w}-material-filter`,value:p[w].material,onChange:F=>x(w,"material",F.target.value),onClick:F=>F.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[M.jsx("option",{value:"Toutes",children:"Toutes"}),rt.map(F=>M.jsx("option",{value:F,children:F},F))]})]})]}),M.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:ot.map(F=>M.jsx(LL,{imageSrc:F.imageSrc,analysis:F.analysis,onClick:()=>oe(F),onRemove:ae=>{ae.stopPropagation(),t(F.id)},isSelected:v&&A.includes(F.id),isSet:$.has(F.id)},F.id))})]})})})]},w)})}),v&&M.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[60] w-full max-w-md px-4",children:q?M.jsxs("form",{onSubmit:w=>{w.preventDefault();const D=new FormData(w.currentTarget).get("setName");D&&D.trim()&&(l(A,D.trim()),Z())},className:"flex items-center gap-2 bg-white dark:bg-raisin-black p-2 rounded-full shadow-2xl ring-1 ring-gold/50",children:[M.jsx("input",{type:"text",name:"setName",placeholder:"Nom de l'ensemble...",className:"flex-grow bg-transparent px-4 py-1 text-onyx dark:text-snow focus:outline-none",autoFocus:!0}),M.jsx("button",{type:"submit",className:"bg-gold text-onyx font-bold px-4 py-1.5 rounded-full hover:bg-gold-dark transition-colors",children:"Crer"}),M.jsx("button",{type:"button",onClick:()=>G(!1),className:"text-gray-500 dark:text-gray-400 p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:M.jsx(ig,{})})]}):fe?M.jsxs("button",{onClick:()=>{s(fe.id),Z()},className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-rose-500 text-white font-bold rounded-full shadow-2xl hover:bg-rose-600 transition-all duration-300 transform hover:scale-105",children:[M.jsx(IC,{}),"Dissocier l'ensemble"]}):A.length>1&&M.jsxs("button",{onClick:()=>G(!0),className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-gold text-onyx font-bold rounded-full shadow-2xl hover:bg-gold-dark transition-all duration-300 transform hover:scale-105",children:[M.jsx(CC,{}),"Crer un ensemble avec ",A.length," articles"]})})]})},BL=({onGenerate:n,isGenerating:e,context:t,setContext:s})=>{const o=c=>{c.preventDefault(),t.trim()&&n(t)},l=["Casual","Chic","Formel"];return M.jsxs("div",{children:[M.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),M.jsx("form",{onSubmit:o,children:M.jsxs("div",{className:"space-y-6",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"context",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ou mto ?"}),M.jsx("div",{className:"flex justify-center gap-2 mb-4",children:l.map(c=>M.jsx("button",{type:"button",onClick:()=>s(c),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${t===c?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:e,children:c},c))}),M.jsx("input",{id:"context",type:"text",value:t,onChange:c=>s(c.target.value),placeholder:"Ou dcrivez... Ex: un brunch ensoleill",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e})]}),M.jsxs("button",{type:"submit",disabled:e||!t.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[M.jsx(ng,{}),e?"Gnration...":"Gnrer des Tenues"]})]})})]})},FL=({outfits:n,allClothingItems:e})=>{const[t,s]=Ce.useState(null);Ce.useEffect(()=>{if(!t)return;const l=c=>{c.key==="Escape"&&s(null)};return window.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",l),document.body.style.overflow="auto"}},[t]);const o=l=>{const c=l.toLowerCase(),f=e.find(p=>{if(p.analysis.toLowerCase()===c)return!0;const m=new Set(p.analysis.toLowerCase().split(/\s+/)),v=c.split(/\s+/);return v.filter(A=>m.has(A)).length/v.length>.5});return f?f.imageSrc:null};return M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"mt-10 space-y-8",children:n.map((l,c)=>M.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[M.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:l.titre}),M.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:l.description}),M.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:l.vetements.map((f,p)=>{const m=o(f);return M.jsx("button",{onClick:()=>m&&s(m),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!m,"aria-label":`Agrandir l'image de : ${f}`,children:m?M.jsx("img",{src:m,alt:f,className:"w-full h-full object-cover"}):M.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:M.jsx(SC,{})})},p)})}),M.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:l.vetements.map((f,p)=>M.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:f},p))})]},c))}),t&&M.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>s(null),role:"dialog","aria-modal":"true",children:M.jsxs("div",{className:"relative",onClick:l=>l.stopPropagation(),children:[M.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),M.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:M.jsx(AC,{})})]})})]})},zL=({item:n,clothingSets:e,onClose:t,onUpdate:s,onGenerateFrom:o,onRemoveSet:l})=>{const[c,f]=Ce.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(E=>E.itemIds.includes(n.id));Ce.useEffect(()=>{f({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),Ce.useEffect(()=>{const E=A=>{A.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",E),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",E)}},[t]);const m=E=>{const{name:A,value:b}=E.target;f(q=>({...q,[A]:b}))},v=E=>{E.preventDefault(),s({...n,...c})};return M.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:E=>E.stopPropagation(),children:[M.jsxs("div",{className:"relative",children:[M.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),M.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:M.jsx(AC,{})})]}),M.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[M.jsxs("div",{className:"space-y-4 flex-grow",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),M.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:m,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),M.jsx("select",{id:"category",name:"category",value:c.category,onChange:m,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(E=>M.jsx("option",{value:E,children:E},E))})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),M.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),M.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&M.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[M.jsxs("div",{children:[M.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),M.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),M.jsxs("button",{type:"button",onClick:()=>{l(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[M.jsx(IC,{}),M.jsx("span",{children:"Dissocier"})]})]})]}),M.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[M.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[M.jsx(ng,{}),"Crer une tenue avec cet article"]}),M.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},GL=({onGenerate:n,isGenerating:e})=>{const[t,s]=Ce.useState(3),[o,l]=Ce.useState(""),c=f=>{f.preventDefault(),o.trim()&&t>0&&n(t,o)};return M.jsxs("div",{children:[M.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),M.jsxs("form",{onSubmit:c,className:"space-y-6",children:[M.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[M.jsxs("div",{className:"sm:col-span-1",children:[M.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),M.jsx("input",{id:"days",type:"number",value:t,onChange:f=>s(parseInt(f.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e,required:!0})]}),M.jsxs("div",{className:"sm:col-span-2",children:[M.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),M.jsx("input",{id:"vacation-context",type:"text",value:o,onChange:f=>l(f.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:e,required:!0})]})]}),M.jsxs("button",{type:"submit",disabled:e||!o.trim()||t<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[M.jsx(VL,{}),e?"Prparation...":"Gnrer la valise"]})]})]})},HL=({plan:n,allClothingItems:e})=>{const t=s=>{const o=s.toLowerCase(),l=e.find(f=>f.analysis.toLowerCase()===o);if(l)return l.imageSrc;const c=e.map(f=>{const p=new Set(f.analysis.toLowerCase().split(/\s+/)),m=o.split(/\s+/),E=m.filter(A=>p.has(A)).length/m.length;return{item:f,score:E}}).filter(f=>f.score>.5).sort((f,p)=>p.score-f.score)[0];return c?c.item.imageSrc:null};return M.jsx("div",{className:"mt-10",children:M.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[M.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),M.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),M.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((s,o)=>{const l=t(s);return M.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s,children:[l?M.jsx("img",{src:l,alt:s,className:"w-full h-full object-cover"}):M.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:M.jsx(SC,{})}),M.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:M.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s})})]},o)})}),M.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((s,o)=>M.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s},o))})]})})},JL=()=>{const[n,e]=Ce.useState(null),[t,s]=Ce.useState(!0),[o,l]=Ce.useState("dark"),[c,f]=Ce.useState([]),[p,m]=Ce.useState([]),[v,E]=Ce.useState([]),[A,b]=Ce.useState(!1),[q,G]=Ce.useState(!1),[$,te]=Ce.useState(null),[K,Z]=Ce.useState(null),[oe,fe]=Ce.useState(""),[ce,x]=Ce.useState(null),[w,N]=Ce.useState(!1);Ce.useEffect(()=>{const P=gx(ql,Q=>{e(Q),s(!1)});return()=>P()},[]),Ce.useEffect(()=>{n&&(async()=>{try{const Q=await PD(n.uid),ie=await VD(n.uid);f(Q),m(ie)}catch(Q){console.error("Erreur lors du chargement des donnes:",Q)}})()},[n]),Ce.useEffect(()=>{console.log(" Save Effect:",{user:!!n,itemsLength:c.length}),n&&c.length>0&&(console.log(" SAVING ITEMS..."),DD(n.uid,c).then(()=>console.log(" SAVE SUCCESS!")).catch(P=>console.error(" SAVE ERROR:",P)))},[c,n]),Ce.useEffect(()=>{n&&p.length>0&&kD(n.uid,p).catch(console.error)},[p,n]),Ce.useEffect(()=>{const P=window.document.documentElement;P.classList.remove(o==="light"?"dark":"light"),P.classList.add(o)},[o]);const D=()=>{l(P=>P==="light"?"dark":"light")},U=Ce.useCallback(async P=>{if(P.length!==0){b(!0),te(null);try{const Q=P.map(We=>new Promise((at,Pn)=>{const hn=new FileReader;hn.onload=()=>at(hn.result),hn.onerror=Pn,hn.readAsDataURL(We)})),ie=await Promise.all(Q),ue=ie.map(We=>We.split(",")[1]),ye=await SL(ue),Ne=Math.min(ye.length,P.length),xe=[];for(let We=0;We<Ne;We++)xe.push({id:`${Date.now()}-${P[We].name}-${Math.random()}`,imageSrc:ie[We],...ye[We]});ye.length!==P.length&&(console.warn(`Le nombre de rsultats d'analyse (${ye.length}) ne correspond pas au nombre de fichiers (${P.length}).`),te(`L'IA a analys ${xe.length} sur ${P.length} image(s). Certaines ont peut-tre t ignores.`)),f(We=>[...We,...xe])}catch(Q){console.error("Erreur lors de l'analyse par lot des images:",Q),te("Une erreur est survenue lors de l'analyse des images. L'IA a peut-tre rencontr un problme. Veuillez ressayer.")}finally{b(!1)}}},[]),O=Ce.useCallback(async(P,Q)=>{if(c.length-p.flatMap(ue=>ue.itemIds).length+p.length<2){te("Veuillez avoir au moins deux articles ou ensembles pour gnrer des tenues.");return}G(!0),te(null),E([]);try{const ue=await CL(c,p,P,Q);E(ue)}catch(ue){console.error("Erreur lors de la gnration des tenues:",ue),te("Impossible de gnrer des tenues. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{G(!1)}},[c,p]),k=Ce.useCallback(async(P,Q)=>{if(c.length<P){te(`Veuillez avoir au moins ${P} articles dans votre garde-robe pour un voyage de ${P} jours.`);return}N(!0),te(null),x(null);try{const ie=await IL(c,p,P,Q);x(ie)}catch(ie){console.error("Erreur lors de la gnration du plan de valise:",ie),te("Impossible de gnrer le plan de valise. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{N(!1)}},[c,p]),rt=P=>{f(Q=>Q.filter(ie=>ie.id!==P)),m(Q=>Q.map(ue=>ue.itemIds.includes(P)?{...ue,itemIds:ue.itemIds.filter(ye=>ye!==P)}:ue).filter(ue=>ue.itemIds.length>1))},ot=P=>{m(Q=>Q.filter(ie=>ie.id!==P))},F=P=>{Z(P)},ae=()=>{Z(null)},ge=P=>{f(Q=>Q.map(ie=>ie.id===P.id?P:ie)),ae()},Fe=P=>{if(!oe.trim()){te("Veuillez d'abord dcrire une occasion ou une mto dans le crateur de tenues.");return}ae(),O(oe,P)},Ge=(P,Q)=>{if(P.length<2||!Q.trim())return;const ie=c.find(ye=>ye.id===P[0]);if(!ie)return;const ue={id:`${Date.now()}-set-${Math.random()}`,name:Q,itemIds:P,imageSrc:ie.imageSrc};m(ye=>[...ye,ue])};return t?M.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx flex items-center justify-center",children:M.jsx(cf,{})}):n?M.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[M.jsx(C0,{theme:o,toggleTheme:D,children:M.jsx(I0,{user:n})}),M.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",background:n?"green":"red",color:"white",padding:"10px",zIndex:9999,borderRadius:"8px"},children:n?` Connect: ${n.email||n.displayName}`:" NON CONNECT"}),M.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[$&&M.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[M.jsx("strong",{className:"font-bold",children:"Erreur: "}),M.jsx("span",{className:"block sm:inline",children:$})]}),M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[M.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[M.jsx(UL,{onAnalyze:U,isAnalyzing:A}),M.jsx(qL,{clothingItems:c,clothingSets:p,onRemoveItem:rt,onRemoveSet:ot,onSelectItem:F,onCreateSet:Ge})]}),M.jsx("div",{className:"space-y-10",children:M.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8 sticky top-28",children:[M.jsx(GL,{onGenerate:k,isGenerating:w}),w&&M.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[M.jsx(cf,{}),M.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA prpare votre valise..."})]}),ce&&M.jsx(HL,{plan:ce,allClothingItems:c}),(ce||w||v.length>0)&&M.jsx("hr",{className:"my-8 border-dashed border-gray-200 dark:border-gray-700"}),M.jsx(BL,{onGenerate:O,isGenerating:q,context:oe,setContext:fe}),q&&M.jsxs("div",{className:"flex flex-col items-center justify-center mt-8",children:[M.jsx(cf,{}),M.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium tracking-wide",children:"L'IA compose vos tenues..."})]}),v.length>0&&M.jsx(FL,{outfits:v,allClothingItems:c})]})})]}),K&&M.jsx(zL,{item:K,clothingSets:p,onClose:ae,onUpdate:ge,onGenerateFrom:Fe,onRemoveSet:ot})]})]}):M.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-500",children:[M.jsx(C0,{theme:o,toggleTheme:D}),M.jsx("main",{className:"container mx-auto px-4 py-20 flex items-center justify-center min-h-[calc(100vh-200px)]",children:M.jsx(I0,{user:n})})]})},RC=document.getElementById("root");if(!RC)throw new Error("L'lment root est introuvable dans le DOM");const YL=fR.createRoot(RC);YL.render(M.jsx(iR.StrictMode,{children:M.jsx(JL,{})}));
