(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function TC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qg={exports:{}},Yu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uS;function hD(){if(uS)return Yu;uS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Yu.Fragment=e,Yu.jsx=n,Yu.jsxs=n,Yu}var cS;function pD(){return cS||(cS=1,qg.exports=hD()),qg.exports}var A=pD(),zg={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS;function mD(){if(fS)return Fe;fS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,L={};function z(H,te,fe){this.props=H,this.context=te,this.refs=L,this.updater=fe||R}z.prototype.isReactComponent={},z.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},z.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function F(){}F.prototype=z.prototype;function B(H,te,fe){this.props=H,this.context=te,this.refs=L,this.updater=fe||R}var K=B.prototype=new F;K.constructor=B,k(K,z.prototype),K.isPureReactComponent=!0;var X=Array.isArray;function G(){}var I={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function N(H,te,fe){var pe=fe.ref;return{$$typeof:t,type:H,key:te,ref:pe!==void 0?pe:null,props:fe}}function V(H,te){return N(H.type,te,H.props)}function M(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function O(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(fe){return te[fe]})}var U=/\/+/g;function be(H,te){return typeof H=="object"&&H!==null&&H.key!=null?O(""+H.key):te.toString(36)}function ve(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(G,G):(H.status="pending",H.then(function(te){H.status==="pending"&&(H.status="fulfilled",H.value=te)},function(te){H.status==="pending"&&(H.status="rejected",H.reason=te)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ee(H,te,fe,pe,we){var Me=typeof H;(Me==="undefined"||Me==="boolean")&&(H=null);var Ue=!1;if(H===null)Ue=!0;else switch(Me){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(H.$$typeof){case t:case e:Ue=!0;break;case y:return Ue=H._init,ee(Ue(H._payload),te,fe,pe,we)}}if(Ue)return we=we(H),Ue=pe===""?"."+be(H,0):pe,X(we)?(fe="",Ue!=null&&(fe=Ue.replace(U,"$&/")+"/"),ee(we,te,fe,"",function(Cn){return Cn})):we!=null&&(M(we)&&(we=V(we,fe+(we.key==null||H&&H.key===we.key?"":(""+we.key).replace(U,"$&/")+"/")+Ue)),te.push(we)),1;Ue=0;var jt=pe===""?".":pe+":";if(X(H))for(var xe=0;xe<H.length;xe++)pe=H[xe],Me=jt+be(pe,xe),Ue+=ee(pe,te,fe,Me,we);else if(xe=w(H),typeof xe=="function")for(H=xe.call(H),xe=0;!(pe=H.next()).done;)pe=pe.value,Me=jt+be(pe,xe++),Ue+=ee(pe,te,fe,Me,we);else if(Me==="object"){if(typeof H.then=="function")return ee(ve(H),te,fe,pe,we);throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function ce(H,te,fe){if(H==null)return H;var pe=[],we=0;return ee(H,pe,"","",function(Me){return te.call(fe,Me,we++)}),pe}function he(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(fe){(H._status===0||H._status===-1)&&(H._status=1,H._result=fe)},function(fe){(H._status===0||H._status===-1)&&(H._status=2,H._result=fe)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var Ie=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},De={map:ce,forEach:function(H,te,fe){ce(H,function(){te.apply(this,arguments)},fe)},count:function(H){var te=0;return ce(H,function(){te++}),te},toArray:function(H){return ce(H,function(te){return te})||[]},only:function(H){if(!M(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Fe.Activity=E,Fe.Children=De,Fe.Component=z,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=B,Fe.StrictMode=i,Fe.Suspense=d,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(H){return I.H.useMemoCache(H)}},Fe.cache=function(H){return function(){return H.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(H,te,fe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var pe=k({},H.props),we=H.key;if(te!=null)for(Me in te.key!==void 0&&(we=""+te.key),te)!x.call(te,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&te.ref===void 0||(pe[Me]=te[Me]);var Me=arguments.length-2;if(Me===1)pe.children=fe;else if(1<Me){for(var Ue=Array(Me),jt=0;jt<Me;jt++)Ue[jt]=arguments[jt+2];pe.children=Ue}return N(H.type,we,pe)},Fe.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},Fe.createElement=function(H,te,fe){var pe,we={},Me=null;if(te!=null)for(pe in te.key!==void 0&&(Me=""+te.key),te)x.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(we[pe]=te[pe]);var Ue=arguments.length-2;if(Ue===1)we.children=fe;else if(1<Ue){for(var jt=Array(Ue),xe=0;xe<Ue;xe++)jt[xe]=arguments[xe+2];we.children=jt}if(H&&H.defaultProps)for(pe in Ue=H.defaultProps,Ue)we[pe]===void 0&&(we[pe]=Ue[pe]);return N(H,Me,we)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(H){return{$$typeof:c,render:H}},Fe.isValidElement=M,Fe.lazy=function(H){return{$$typeof:y,_payload:{_status:-1,_result:H},_init:he}},Fe.memo=function(H,te){return{$$typeof:h,type:H,compare:te===void 0?null:te}},Fe.startTransition=function(H){var te=I.T,fe={};I.T=fe;try{var pe=H(),we=I.S;we!==null&&we(fe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(G,Ie)}catch(Me){Ie(Me)}finally{te!==null&&fe.types!==null&&(te.types=fe.types),I.T=te}},Fe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Fe.use=function(H){return I.H.use(H)},Fe.useActionState=function(H,te,fe){return I.H.useActionState(H,te,fe)},Fe.useCallback=function(H,te){return I.H.useCallback(H,te)},Fe.useContext=function(H){return I.H.useContext(H)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(H,te){return I.H.useDeferredValue(H,te)},Fe.useEffect=function(H,te){return I.H.useEffect(H,te)},Fe.useEffectEvent=function(H){return I.H.useEffectEvent(H)},Fe.useId=function(){return I.H.useId()},Fe.useImperativeHandle=function(H,te,fe){return I.H.useImperativeHandle(H,te,fe)},Fe.useInsertionEffect=function(H,te){return I.H.useInsertionEffect(H,te)},Fe.useLayoutEffect=function(H,te){return I.H.useLayoutEffect(H,te)},Fe.useMemo=function(H,te){return I.H.useMemo(H,te)},Fe.useOptimistic=function(H,te){return I.H.useOptimistic(H,te)},Fe.useReducer=function(H,te,fe){return I.H.useReducer(H,te,fe)},Fe.useRef=function(H){return I.H.useRef(H)},Fe.useState=function(H){return I.H.useState(H)},Fe.useSyncExternalStore=function(H,te,fe){return I.H.useSyncExternalStore(H,te,fe)},Fe.useTransition=function(){return I.H.useTransition()},Fe.version="19.2.0",Fe}var dS;function gv(){return dS||(dS=1,zg.exports=mD()),zg.exports}var j=gv();const wn=TC(j);var Hg={exports:{}},Wu={},Gg={exports:{}},$g={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS;function gD(){return hS||(hS=1,(function(t){function e(ee,ce){var he=ee.length;ee.push(ce);e:for(;0<he;){var Ie=he-1>>>1,De=ee[Ie];if(0<s(De,ce))ee[Ie]=ce,ee[he]=De,he=Ie;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],he=ee.pop();if(he!==ce){ee[0]=he;e:for(var Ie=0,De=ee.length,H=De>>>1;Ie<H;){var te=2*(Ie+1)-1,fe=ee[te],pe=te+1,we=ee[pe];if(0>s(fe,he))pe<De&&0>s(we,fe)?(ee[Ie]=we,ee[pe]=he,Ie=pe):(ee[Ie]=fe,ee[te]=he,Ie=te);else if(pe<De&&0>s(we,he))ee[Ie]=we,ee[pe]=he,Ie=pe;else break e}}return ce}function s(ee,ce){var he=ee.sortIndex-ce.sortIndex;return he!==0?he:ee.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],y=1,E=null,T=3,w=!1,R=!1,k=!1,L=!1,z=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function K(ee){for(var ce=n(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=ee)i(h),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(h)}}function X(ee){if(k=!1,K(ee),!R)if(n(d)!==null)R=!0,G||(G=!0,O());else{var ce=n(h);ce!==null&&ve(X,ce.startTime-ee)}}var G=!1,I=-1,x=5,N=-1;function V(){return L?!0:!(t.unstable_now()-N<x)}function M(){if(L=!1,G){var ee=t.unstable_now();N=ee;var ce=!0;try{e:{R=!1,k&&(k=!1,F(I),I=-1),w=!0;var he=T;try{t:{for(K(ee),E=n(d);E!==null&&!(E.expirationTime>ee&&V());){var Ie=E.callback;if(typeof Ie=="function"){E.callback=null,T=E.priorityLevel;var De=Ie(E.expirationTime<=ee);if(ee=t.unstable_now(),typeof De=="function"){E.callback=De,K(ee),ce=!0;break t}E===n(d)&&i(d),K(ee)}else i(d);E=n(d)}if(E!==null)ce=!0;else{var H=n(h);H!==null&&ve(X,H.startTime-ee),ce=!1}}break e}finally{E=null,T=he,w=!1}ce=void 0}}finally{ce?O():G=!1}}}var O;if(typeof B=="function")O=function(){B(M)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,be=U.port2;U.port1.onmessage=M,O=function(){be.postMessage(null)}}else O=function(){z(M,0)};function ve(ee,ce){I=z(function(){ee(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var he=T;T=ce;try{return ee()}finally{T=he}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=T;T=ee;try{return ce()}finally{T=he}},t.unstable_scheduleCallback=function(ee,ce,he){var Ie=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ie+he:Ie):he=Ie,ee){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=he+De,ee={id:y++,callback:ce,priorityLevel:ee,startTime:he,expirationTime:De,sortIndex:-1},he>Ie?(ee.sortIndex=he,e(h,ee),n(d)===null&&ee===n(h)&&(k?(F(I),I=-1):k=!0,ve(X,he-Ie))):(ee.sortIndex=De,e(d,ee),R||w||(R=!0,G||(G=!0,O()))),ee},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ee){var ce=T;return function(){var he=T;T=ce;try{return ee.apply(this,arguments)}finally{T=he}}}})($g)),$g}var pS;function yD(){return pS||(pS=1,Gg.exports=gD()),Gg.exports}var jg={exports:{}},Jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS;function vD(){if(mS)return Jn;mS=1;var t=gv();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,h,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:d,containerInfo:h,implementation:y}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jn.createPortal=function(d,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,y)},Jn.flushSync=function(d){var h=l.T,y=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=y,i.d.f()}},Jn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},Jn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Jn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:w}):y==="script"&&i.d.X(d,{crossOrigin:E,integrity:T,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Jn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},Jn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin);i.d.L(d,y,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Jn.preloadModule=function(d,h){if(typeof d=="string")if(h){var y=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},Jn.requestFormReset=function(d){i.d.r(d)},Jn.unstable_batchedUpdates=function(d,h){return d(h)},Jn.useFormState=function(d,h,y){return l.H.useFormState(d,h,y)},Jn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Jn.version="19.2.0",Jn}var gS;function SC(){if(gS)return jg.exports;gS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jg.exports=vD(),jg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yS;function _D(){if(yS)return Wu;yS=1;var t=yD(),e=gv(),n=SC();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,f=o;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return d(v),r;if(_===f)return d(v),o;_=_.sibling}throw Error(i(188))}if(u.return!==f.return)u=v,f=_;else{for(var b=!1,D=v.child;D;){if(D===u){b=!0,u=v,f=_;break}if(D===f){b=!0,f=v,u=_;break}D=D.sibling}if(!b){for(D=_.child;D;){if(D===u){b=!0,u=_,f=v;break}if(D===f){b=!0,f=_,u=v;break}D=D.sibling}if(!b)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function y(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=y(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),B=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var U=Symbol.for("react.client.reference");function be(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===U?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case z:return"Profiler";case L:return"StrictMode";case X:return"Suspense";case G:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case B:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case K:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return o=r.displayName||null,o!==null?o:be(r.type)||"Memo";case x:o=r._payload,r=r._init;try{return be(r(o))}catch{}}return null}var ve=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ie=[],De=-1;function H(r){return{current:r}}function te(r){0>De||(r.current=Ie[De],Ie[De]=null,De--)}function fe(r,o){De++,Ie[De]=r.current,r.current=o}var pe=H(null),we=H(null),Me=H(null),Ue=H(null);function jt(r,o){switch(fe(Me,o),fe(we,r),fe(pe,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?MT(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=MT(o),r=kT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(pe),fe(pe,r)}function xe(){te(pe),te(we),te(Me)}function Cn(r){r.memoizedState!==null&&fe(Ue,r);var o=pe.current,u=kT(o,r.type);o!==u&&(fe(we,r),fe(pe,u))}function ut(r){we.current===r&&(te(pe),te(we)),Ue.current===r&&(te(Ue),$u._currentValue=he)}var _n,Ln;function In(r){if(_n===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);_n=o&&o[1]||"",Ln=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_n+r+Ln}var En=!1;function xn(r,o){if(!r||En)return"";En=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ne){var Z=ne}Reflect.construct(r,[],ae)}else{try{ae.call()}catch(ne){Z=ne}r.call(ae.prototype)}}else{try{throw Error()}catch(ne){Z=ne}(ae=r())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ne){if(ne&&Z&&typeof ne.stack=="string")return[ne.stack,Z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),b=_[0],D=_[1];if(b&&D){var q=b.split(`
`),Q=D.split(`
`);for(v=f=0;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(f===q.length||v===Q.length)for(f=q.length-1,v=Q.length-1;1<=f&&0<=v&&q[f]!==Q[v];)v--;for(;1<=f&&0<=v;f--,v--)if(q[f]!==Q[v]){if(f!==1||v!==1)do if(f--,v--,0>v||q[f]!==Q[v]){var re=`
`+q[f].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=f&&0<=v);break}}}finally{En=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?In(u):""}function zi(r,o){switch(r.tag){case 26:case 27:case 5:return In(r.type);case 16:return In("Lazy");case 13:return r.child!==o&&o!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return xn(r.type,!1);case 11:return xn(r.type.render,!1);case 1:return xn(r.type,!0);case 31:return In("Activity");default:return""}}function Ii(r){try{var o="",u=null;do o+=zi(r,u),u=r,r=r.return;while(r);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var mi=Object.prototype.hasOwnProperty,ni=t.unstable_scheduleCallback,ii=t.unstable_cancelCallback,fr=t.unstable_shouldYield,Hi=t.unstable_requestPaint,ct=t.unstable_now,Tn=t.unstable_getCurrentPriorityLevel,ze=t.unstable_ImmediatePriority,Ct=t.unstable_UserBlockingPriority,Yt=t.unstable_NormalPriority,me=t.unstable_LowPriority,ft=t.unstable_IdlePriority,nn=t.log,It=t.unstable_setDisableYieldValue,Rn=null,un=null;function oe(r){if(typeof nn=="function"&&It(r),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Rn,r)}catch{}}var Te=Math.clz32?Math.clz32:St,Se=Math.log,$e=Math.LN2;function St(r){return r>>>=0,r===0?32:31-(Se(r)/$e|0)|0}var Ye=256,We=262144,at=4194304;function rt(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ke(r,o,u){var f=r.pendingLanes;if(f===0)return 0;var v=0,_=r.suspendedLanes,b=r.pingedLanes;r=r.warmLanes;var D=f&134217727;return D!==0?(f=D&~_,f!==0?v=rt(f):(b&=D,b!==0?v=rt(b):u||(u=D&~r,u!==0&&(v=rt(u))))):(D=f&~_,D!==0?v=rt(D):b!==0?v=rt(b):u||(u=f&~r,u!==0&&(v=rt(u)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:v}function je(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Sn(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gi(){var r=at;return at<<=1,(at&62914560)===0&&(at=4194304),r}function rn(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function kt(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function At(r,o,u,f,v,_){var b=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var D=r.entanglements,q=r.expirationTimes,Q=r.hiddenUpdates;for(u=b&~u;0<u;){var re=31-Te(u),ae=1<<re;D[re]=0,q[re]=-1;var Z=Q[re];if(Z!==null)for(Q[re]=null,re=0;re<Z.length;re++){var ne=Z[re];ne!==null&&(ne.lane&=-536870913)}u&=~ae}f!==0&&ri(r,f,0),_!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=_&~(b&~o))}function ri(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-Te(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|u&261930}function Ht(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var f=31-Te(u),v=1<<f;v&o|r[f]&o&&(r[f]|=o),u&=~v}}function jn(r,o){var u=o&-o;return u=(u&42)!==0?1:$i(u),(u&(r.suspendedLanes|o))!==0?0:u}function $i(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function On(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function si(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:nS(r.type))}function Kr(r,o){var u=ce.p;try{return ce.p=r,o()}finally{ce.p=u}}var xi=Math.random().toString(36).slice(2),Lt="__reactFiber$"+xi,sn="__reactProps$"+xi,Ri="__reactContainer$"+xi,ji="__reactEvents$"+xi,Ni="__reactListeners$"+xi,Oo="__reactHandles$"+xi,dr="__reactResources$"+xi,Ki="__reactMarker$"+xi;function Ji(r){delete r[Lt],delete r[sn],delete r[ji],delete r[Ni],delete r[Oo]}function gi(r){var o=r[Lt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[Ri]||u[Lt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=BT(r);r!==null;){if(u=r[Lt])return u;r=BT(r)}return o}r=u,u=r.parentNode}return null}function Yi(r){if(r=r[Lt]||r[Ri]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Rr(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function oi(r){var o=r[dr];return o||(o=r[dr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Gt(r){r[Ki]=!0}var hr=new Set,pr={};function ai(r,o){Nr(r,o),Nr(r+"Capture",o)}function Nr(r,o){for(pr[r]=o,r=0;r<o.length;r++)hr.add(o[r])}var zp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nu={},iu={};function uf(r){return mi.call(iu,r)?!0:mi.call(nu,r)?!1:zp.test(r)?iu[r]=!0:(nu[r]=!0,!1)}function Is(r,o,u){if(uf(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function xs(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Wi(r,o,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+f)}}function li(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function cf(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Hp(r,o,u){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(b){u=""+b,_.call(this,b)}}),Object.defineProperty(r,o,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(b){u=""+b},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ra(r){if(!r._valueTracker){var o=cf(r)?"checked":"value";r._valueTracker=Hp(r,o,""+r[o])}}function ru(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return r&&(f=cf(r)?r.checked?"true":"false":r.value),r=f,r!==u?(o.setValue(r),!0):!1}function Na(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Jr=/[\n"\\]/g;function Wt(r){return r.replace(Jr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Rs(r,o,u,f,v,_,b,D){r.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.type=b:r.removeAttribute("type"),o!=null?b==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+li(o)):r.value!==""+li(o)&&(r.value=""+li(o)):b!=="submit"&&b!=="reset"||r.removeAttribute("value"),o!=null?Da(r,b,li(o)):u!=null?Da(r,b,li(u)):f!=null&&r.removeAttribute("value"),v==null&&_!=null&&(r.defaultChecked=!!_),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.name=""+li(D):r.removeAttribute("name")}function Uo(r,o,u,f,v,_,b,D){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Ra(r);return}u=u!=null?""+li(u):"",o=o!=null?""+li(o):u,D||o===r.value||(r.value=o),r.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=D?r.checked:!!f,r.defaultChecked=!!f,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.name=b),Ra(r)}function Da(r,o,u){o==="number"&&Na(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function dt(r,o,u,f){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&f&&(r[u].defaultSelected=!0)}else{for(u=""+li(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function Fo(r,o,u){if(o!=null&&(o=""+li(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+li(u):""}function Ns(r,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(i(92));if(ve(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=li(o),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f),Ra(r)}function Qi(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Gp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(r,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,u):typeof u!="number"||u===0||Gp.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function ff(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&u[v]!==f&&su(r,v,f)}else for(var _ in o)o.hasOwnProperty(_)&&su(r,_,o[_])}function ou(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $p=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dr(r){return jp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Nn(){}var Ma=null;function ka(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Yr=null,Di=null;function df(r){var o=Yi(r);if(o&&(r=o.stateNode)){var u=r[sn]||null;e:switch(r=o.stateNode,o.type){case"input":if(Rs(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Wt(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==r&&f.form===r.form){var v=f[sn]||null;if(!v)throw Error(i(90));Rs(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===r.form&&ru(f)}break e;case"textarea":Fo(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&dt(r,!!u.multiple,o,!1)}}}var au=!1;function hf(r,o,u){if(au)return r(o,u);au=!0;try{var f=r(o);return f}finally{if(au=!1,(Yr!==null||Di!==null)&&(ud(),Yr&&(o=Yr,r=Di,Di=Yr=null,df(o),r)))for(o=0;o<r.length;o++)df(r[o])}}function yi(r,o){var u=r.stateNode;if(u===null)return null;var f=u[sn]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lu=!1;if(mr)try{var Mr={};Object.defineProperty(Mr,"passive",{get:function(){lu=!0}}),window.addEventListener("test",Mr,Mr),window.removeEventListener("test",Mr,Mr)}catch{lu=!1}var Mi=null,Pa=null,kr=null;function Ds(){if(kr)return kr;var r,o=Pa,u=o.length,f,v="value"in Mi?Mi.value:Mi.textContent,_=v.length;for(r=0;r<u&&o[r]===v[r];r++);var b=u-r;for(f=1;f<=b&&o[u-f]===v[_-f];f++);return kr=v.slice(r,1<f?1-f:void 0)}function Bo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ms(){return!0}function Ot(){return!1}function Kn(r){function o(u,f,v,_,b){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=b,this.currentTarget=null;for(var D in r)r.hasOwnProperty(D)&&(u=r[D],this[D]=u?u(_):_[D]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ms:Ot,this.isPropagationStopped=Ot,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),o}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=Kn(Wr),ks=E({},Wr,{view:0,detail:0}),pf=Kn(ks),Ps,Va,ui,zo=E({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ui&&(ui&&r.type==="mousemove"?(Ps=r.screenX-ui.screenX,Va=r.screenY-ui.screenY):Va=Ps=0,ui=r),Ps)},movementY:function(r){return"movementY"in r?r.movementY:Va}}),mf=Kn(zo),Ho=E({},zo,{dataTransfer:0}),gf=Kn(Ho),uu=E({},ks,{relatedTarget:0}),Vs=Kn(uu),yf=E({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),La=Kn(yf),Kp=E({},Wr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),vf=Kn(Kp),Go=E({},Wr,{data:0}),cu=Kn(Go),_f={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ef(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=du[r])?!!o[r]:!1}function Ls(){return Ef}var Tf=E({},ks,{key:function(r){if(r.key){var o=_f[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Bo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?fu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(r){return r.type==="keypress"?Bo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Bo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Sf=Kn(Tf),Qr=E({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hu=Kn(Qr),Af=E({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),wf=Kn(Af),bf=E({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oa=Kn(bf),ci=E({},zo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Cf=Kn(ci),If=E({},Wr,{newState:0,oldState:0}),Os=Kn(If),m=[9,13,27,32],S=mr&&"CompositionEvent"in window,C=null;mr&&"documentMode"in document&&(C=document.documentMode);var P=mr&&"TextEvent"in window&&!C,Y=mr&&(!S||C&&8<C&&11>=C),ie=" ",de=!1;function _t(r,o){switch(r){case"keyup":return m.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cn(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ke=!1;function Dn(r,o){switch(r){case"compositionend":return cn(o);case"keypress":return o.which!==32?null:(de=!0,ie);case"textInput":return r=o.data,r===ie&&de?null:r;default:return null}}function Mn(r,o){if(Ke)return r==="compositionend"||!S&&_t(r,o)?(r=Ds(),kr=Pa=Mi=null,Ke=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Y&&o.locale!=="ko"?null:o.data;default:return null}}var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vi(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Us[r.type]:o==="textarea"}function $o(r,o,u,f){Yr?Di?Di.push(f):Di=[f]:Yr=f,o=gd(o,"onChange"),0<o.length&&(u=new qo("onChange","change",null,u,f),r.push({event:u,listeners:o}))}var Xr=null,pu=null;function B1(r){CT(r,0)}function xf(r){var o=Rr(r);if(ru(o))return r}function $0(r,o){if(r==="change")return o}var j0=!1;if(mr){var Jp;if(mr){var Yp="oninput"in document;if(!Yp){var K0=document.createElement("div");K0.setAttribute("oninput","return;"),Yp=typeof K0.oninput=="function"}Jp=Yp}else Jp=!1;j0=Jp&&(!document.documentMode||9<document.documentMode)}function J0(){Xr&&(Xr.detachEvent("onpropertychange",Y0),pu=Xr=null)}function Y0(r){if(r.propertyName==="value"&&xf(pu)){var o=[];$o(o,pu,r,ka(r)),hf(B1,o)}}function q1(r,o,u){r==="focusin"?(J0(),Xr=o,pu=u,Xr.attachEvent("onpropertychange",Y0)):r==="focusout"&&J0()}function z1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xf(pu)}function H1(r,o){if(r==="click")return xf(o)}function G1(r,o){if(r==="input"||r==="change")return xf(o)}function $1(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var ki=typeof Object.is=="function"?Object.is:$1;function mu(r,o){if(ki(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!mi.call(o,v)||!ki(r[v],o[v]))return!1}return!0}function W0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Q0(r,o){var u=W0(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=o&&f>=o)return{node:u,offset:o-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=W0(u)}}function X0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?X0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Z0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Na(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Na(r.document)}return o}function Wp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var j1=mr&&"documentMode"in document&&11>=document.documentMode,Ua=null,Qp=null,gu=null,Xp=!1;function e_(r,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Xp||Ua==null||Ua!==Na(f)||(f=Ua,"selectionStart"in f&&Wp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),gu&&mu(gu,f)||(gu=f,f=gd(Qp,"onSelect"),0<f.length&&(o=new qo("onSelect","select",null,o,u),r.push({event:o,listeners:f}),o.target=Ua)))}function jo(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Fa={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionrun:jo("Transition","TransitionRun"),transitionstart:jo("Transition","TransitionStart"),transitioncancel:jo("Transition","TransitionCancel"),transitionend:jo("Transition","TransitionEnd")},Zp={},t_={};mr&&(t_=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Ko(r){if(Zp[r])return Zp[r];if(!Fa[r])return r;var o=Fa[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in t_)return Zp[r]=o[u];return r}var n_=Ko("animationend"),i_=Ko("animationiteration"),r_=Ko("animationstart"),K1=Ko("transitionrun"),J1=Ko("transitionstart"),Y1=Ko("transitioncancel"),s_=Ko("transitionend"),o_=new Map,em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");em.push("scrollEnd");function gr(r,o){o_.set(r,o),ai(o,[r])}var Rf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Xi=[],Ba=0,tm=0;function Nf(){for(var r=Ba,o=tm=Ba=0;o<r;){var u=Xi[o];Xi[o++]=null;var f=Xi[o];Xi[o++]=null;var v=Xi[o];Xi[o++]=null;var _=Xi[o];if(Xi[o++]=null,f!==null&&v!==null){var b=f.pending;b===null?v.next=v:(v.next=b.next,b.next=v),f.pending=v}_!==0&&a_(u,v,_)}}function Df(r,o,u,f){Xi[Ba++]=r,Xi[Ba++]=o,Xi[Ba++]=u,Xi[Ba++]=f,tm|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function nm(r,o,u,f){return Df(r,o,u,f),Mf(r)}function Jo(r,o){return Df(r,null,null,o),Mf(r)}function a_(r,o,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var v=!1,_=r.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(v=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,v&&o!==null&&(v=31-Te(u),r=_.hiddenUpdates,f=r[v],f===null?r[v]=[o]:f.push(o),o.lane=u|536870912),_):null}function Mf(r){if(50<Uu)throw Uu=0,fg=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var qa={};function W1(r,o,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(r,o,u,f){return new W1(r,o,u,f)}function im(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Zr(r,o){var u=r.alternate;return u===null?(u=Pi(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function l_(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function kf(r,o,u,f,v,_){var b=0;if(f=r,typeof r=="function")im(r)&&(b=1);else if(typeof r=="string")b=tD(r,u,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=Pi(31,u,o,v),r.elementType=N,r.lanes=_,r;case k:return Yo(u.children,v,_,o);case L:b=8,v|=24;break;case z:return r=Pi(12,u,o,v|2),r.elementType=z,r.lanes=_,r;case X:return r=Pi(13,u,o,v),r.elementType=X,r.lanes=_,r;case G:return r=Pi(19,u,o,v),r.elementType=G,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:b=10;break e;case F:b=9;break e;case K:b=11;break e;case I:b=14;break e;case x:b=16,f=null;break e}b=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return o=Pi(b,u,o,v),o.elementType=r,o.type=f,o.lanes=_,o}function Yo(r,o,u,f){return r=Pi(7,r,f,o),r.lanes=u,r}function rm(r,o,u){return r=Pi(6,r,null,o),r.lanes=u,r}function u_(r){var o=Pi(18,null,null,0);return o.stateNode=r,o}function sm(r,o,u){return o=Pi(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var c_=new WeakMap;function Zi(r,o){if(typeof r=="object"&&r!==null){var u=c_.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Ii(o)},c_.set(r,o),o)}return{value:r,source:o,stack:Ii(o)}}var za=[],Ha=0,Pf=null,yu=0,er=[],tr=0,Fs=null,Pr=1,Vr="";function es(r,o){za[Ha++]=yu,za[Ha++]=Pf,Pf=r,yu=o}function f_(r,o,u){er[tr++]=Pr,er[tr++]=Vr,er[tr++]=Fs,Fs=r;var f=Pr;r=Vr;var v=32-Te(f)-1;f&=~(1<<v),u+=1;var _=32-Te(o)+v;if(30<_){var b=v-v%5;_=(f&(1<<b)-1).toString(32),f>>=b,v-=b,Pr=1<<32-Te(o)+v|u<<v|f,Vr=_+r}else Pr=1<<_|u<<v|f,Vr=r}function om(r){r.return!==null&&(es(r,1),f_(r,1,0))}function am(r){for(;r===Pf;)Pf=za[--Ha],za[Ha]=null,yu=za[--Ha],za[Ha]=null;for(;r===Fs;)Fs=er[--tr],er[tr]=null,Vr=er[--tr],er[tr]=null,Pr=er[--tr],er[tr]=null}function d_(r,o){er[tr++]=Pr,er[tr++]=Vr,er[tr++]=Fs,Pr=o.id,Vr=o.overflow,Fs=r}var Un=null,Ut=null,st=!1,Bs=null,nr=!1,lm=Error(i(519));function qs(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vu(Zi(o,r)),lm}function h_(r){var o=r.stateNode,u=r.type,f=r.memoizedProps;switch(o[Lt]=r,o[sn]=f,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<Bu.length;u++)Xe(Bu[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),Uo(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Ns(o,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||NT(o.textContent,u)?(f.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),f.onScroll!=null&&Xe("scroll",o),f.onScrollEnd!=null&&Xe("scrollend",o),f.onClick!=null&&(o.onclick=Nn),o=!0):o=!1,o||qs(r,!0)}function p_(r){for(Un=r.return;Un;)switch(Un.tag){case 5:case 31:case 13:nr=!1;return;case 27:case 3:nr=!0;return;default:Un=Un.return}}function Ga(r){if(r!==Un)return!1;if(!st)return p_(r),st=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Cg(r.type,r.memoizedProps)),u=!u),u&&Ut&&qs(r),p_(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ut=FT(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Ut=FT(r)}else o===27?(o=Ut,to(r.type)?(r=Dg,Dg=null,Ut=r):Ut=o):Ut=Un?rr(r.stateNode.nextSibling):null;return!0}function Wo(){Ut=Un=null,st=!1}function um(){var r=Bs;return r!==null&&(Si===null?Si=r:Si.push.apply(Si,r),Bs=null),r}function vu(r){Bs===null?Bs=[r]:Bs.push(r)}var cm=H(null),Qo=null,ts=null;function zs(r,o,u){fe(cm,o._currentValue),o._currentValue=u}function ns(r){r._currentValue=cm.current,te(cm)}function fm(r,o,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===u)break;r=r.return}}function dm(r,o,u,f){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){var b=v.child;_=_.firstContext;e:for(;_!==null;){var D=_;_=v;for(var q=0;q<o.length;q++)if(D.context===o[q]){_.lanes|=u,D=_.alternate,D!==null&&(D.lanes|=u),fm(_.return,u,r),f||(b=null);break e}_=D.next}}else if(v.tag===18){if(b=v.return,b===null)throw Error(i(341));b.lanes|=u,_=b.alternate,_!==null&&(_.lanes|=u),fm(b,u,r),b=null}else b=v.child;if(b!==null)b.return=v;else for(b=v;b!==null;){if(b===r){b=null;break}if(v=b.sibling,v!==null){v.return=b.return,b=v;break}b=b.return}v=b}}function $a(r,o,u,f){r=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var b=v.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var D=v.type;ki(v.pendingProps.value,b.value)||(r!==null?r.push(D):r=[D])}}else if(v===Ue.current){if(b=v.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push($u):r=[$u])}v=v.return}r!==null&&dm(o,r,u,f),o.flags|=262144}function Vf(r){for(r=r.firstContext;r!==null;){if(!ki(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Xo(r){Qo=r,ts=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Fn(r){return m_(Qo,r)}function Lf(r,o){return Qo===null&&Xo(r),m_(r,o)}function m_(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},ts===null){if(r===null)throw Error(i(308));ts=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else ts=ts.next=o;return u}var Q1=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},X1=t.unstable_scheduleCallback,Z1=t.unstable_NormalPriority,fn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hm(){return{controller:new Q1,data:new Map,refCount:0}}function _u(r){r.refCount--,r.refCount===0&&X1(Z1,function(){r.controller.abort()})}var Eu=null,pm=0,ja=0,Ka=null;function eN(r,o){if(Eu===null){var u=Eu=[];pm=0,ja=yg(),Ka={status:"pending",value:void 0,then:function(f){u.push(f)}}}return pm++,o.then(g_,g_),o}function g_(){if(--pm===0&&Eu!==null){Ka!==null&&(Ka.status="fulfilled");var r=Eu;Eu=null,ja=0,Ka=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function tN(r,o){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var y_=ee.S;ee.S=function(r,o){eT=ct(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&eN(r,o),y_!==null&&y_(r,o)};var Zo=H(null);function mm(){var r=Zo.current;return r!==null?r:Mt.pooledCache}function Of(r,o){o===null?fe(Zo,Zo.current):fe(Zo,o.pool)}function v_(){var r=mm();return r===null?null:{parent:fn._currentValue,pool:r}}var Ja=Error(i(460)),gm=Error(i(474)),Uf=Error(i(542)),Ff={then:function(){}};function __(r){return r=r.status,r==="fulfilled"||r==="rejected"}function E_(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Nn,Nn),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,S_(r),r;default:if(typeof o.status=="string")o.then(Nn,Nn);else{if(r=Mt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,S_(r),r}throw ta=o,Ja}}function ea(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ta=u,Ja):u}}var ta=null;function T_(){if(ta===null)throw Error(i(459));var r=ta;return ta=null,r}function S_(r){if(r===Ja||r===Uf)throw Error(i(483))}var Ya=null,Tu=0;function Bf(r){var o=Tu;return Tu+=1,Ya===null&&(Ya=[]),E_(Ya,r,o)}function Su(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function qf(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function A_(r){function o(J,$){if(r){var W=J.deletions;W===null?(J.deletions=[$],J.flags|=16):W.push($)}}function u(J,$){if(!r)return null;for(;$!==null;)o(J,$),$=$.sibling;return null}function f(J){for(var $=new Map;J!==null;)J.key!==null?$.set(J.key,J):$.set(J.index,J),J=J.sibling;return $}function v(J,$){return J=Zr(J,$),J.index=0,J.sibling=null,J}function _(J,$,W){return J.index=W,r?(W=J.alternate,W!==null?(W=W.index,W<$?(J.flags|=67108866,$):W):(J.flags|=67108866,$)):(J.flags|=1048576,$)}function b(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function D(J,$,W,se){return $===null||$.tag!==6?($=rm(W,J.mode,se),$.return=J,$):($=v($,W),$.return=J,$)}function q(J,$,W,se){var Re=W.type;return Re===k?re(J,$,W.props.children,se,W.key):$!==null&&($.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&ea(Re)===$.type)?($=v($,W.props),Su($,W),$.return=J,$):($=kf(W.type,W.key,W.props,null,J.mode,se),Su($,W),$.return=J,$)}function Q(J,$,W,se){return $===null||$.tag!==4||$.stateNode.containerInfo!==W.containerInfo||$.stateNode.implementation!==W.implementation?($=sm(W,J.mode,se),$.return=J,$):($=v($,W.children||[]),$.return=J,$)}function re(J,$,W,se,Re){return $===null||$.tag!==7?($=Yo(W,J.mode,se,Re),$.return=J,$):($=v($,W),$.return=J,$)}function ae(J,$,W){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=rm(""+$,J.mode,W),$.return=J,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return W=kf($.type,$.key,$.props,null,J.mode,W),Su(W,$),W.return=J,W;case R:return $=sm($,J.mode,W),$.return=J,$;case x:return $=ea($),ae(J,$,W)}if(ve($)||O($))return $=Yo($,J.mode,W,null),$.return=J,$;if(typeof $.then=="function")return ae(J,Bf($),W);if($.$$typeof===B)return ae(J,Lf(J,$),W);qf(J,$)}return null}function Z(J,$,W,se){var Re=$!==null?$.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Re!==null?null:D(J,$,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return W.key===Re?q(J,$,W,se):null;case R:return W.key===Re?Q(J,$,W,se):null;case x:return W=ea(W),Z(J,$,W,se)}if(ve(W)||O(W))return Re!==null?null:re(J,$,W,se,null);if(typeof W.then=="function")return Z(J,$,Bf(W),se);if(W.$$typeof===B)return Z(J,$,Lf(J,W),se);qf(J,W)}return null}function ne(J,$,W,se,Re){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return J=J.get(W)||null,D($,J,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return J=J.get(se.key===null?W:se.key)||null,q($,J,se,Re);case R:return J=J.get(se.key===null?W:se.key)||null,Q($,J,se,Re);case x:return se=ea(se),ne(J,$,W,se,Re)}if(ve(se)||O(se))return J=J.get(W)||null,re($,J,se,Re,null);if(typeof se.then=="function")return ne(J,$,W,Bf(se),Re);if(se.$$typeof===B)return ne(J,$,W,Lf($,se),Re);qf($,se)}return null}function Ae(J,$,W,se){for(var Re=null,ht=null,Ce=$,Ge=$=0,tt=null;Ce!==null&&Ge<W.length;Ge++){Ce.index>Ge?(tt=Ce,Ce=null):tt=Ce.sibling;var pt=Z(J,Ce,W[Ge],se);if(pt===null){Ce===null&&(Ce=tt);break}r&&Ce&&pt.alternate===null&&o(J,Ce),$=_(pt,$,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt,Ce=tt}if(Ge===W.length)return u(J,Ce),st&&es(J,Ge),Re;if(Ce===null){for(;Ge<W.length;Ge++)Ce=ae(J,W[Ge],se),Ce!==null&&($=_(Ce,$,Ge),ht===null?Re=Ce:ht.sibling=Ce,ht=Ce);return st&&es(J,Ge),Re}for(Ce=f(Ce);Ge<W.length;Ge++)tt=ne(Ce,J,Ge,W[Ge],se),tt!==null&&(r&&tt.alternate!==null&&Ce.delete(tt.key===null?Ge:tt.key),$=_(tt,$,Ge),ht===null?Re=tt:ht.sibling=tt,ht=tt);return r&&Ce.forEach(function(oo){return o(J,oo)}),st&&es(J,Ge),Re}function Pe(J,$,W,se){if(W==null)throw Error(i(151));for(var Re=null,ht=null,Ce=$,Ge=$=0,tt=null,pt=W.next();Ce!==null&&!pt.done;Ge++,pt=W.next()){Ce.index>Ge?(tt=Ce,Ce=null):tt=Ce.sibling;var oo=Z(J,Ce,pt.value,se);if(oo===null){Ce===null&&(Ce=tt);break}r&&Ce&&oo.alternate===null&&o(J,Ce),$=_(oo,$,Ge),ht===null?Re=oo:ht.sibling=oo,ht=oo,Ce=tt}if(pt.done)return u(J,Ce),st&&es(J,Ge),Re;if(Ce===null){for(;!pt.done;Ge++,pt=W.next())pt=ae(J,pt.value,se),pt!==null&&($=_(pt,$,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt);return st&&es(J,Ge),Re}for(Ce=f(Ce);!pt.done;Ge++,pt=W.next())pt=ne(Ce,J,Ge,pt.value,se),pt!==null&&(r&&pt.alternate!==null&&Ce.delete(pt.key===null?Ge:pt.key),$=_(pt,$,Ge),ht===null?Re=pt:ht.sibling=pt,ht=pt);return r&&Ce.forEach(function(dD){return o(J,dD)}),st&&es(J,Ge),Re}function Nt(J,$,W,se){if(typeof W=="object"&&W!==null&&W.type===k&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case w:e:{for(var Re=W.key;$!==null;){if($.key===Re){if(Re=W.type,Re===k){if($.tag===7){u(J,$.sibling),se=v($,W.props.children),se.return=J,J=se;break e}}else if($.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&ea(Re)===$.type){u(J,$.sibling),se=v($,W.props),Su(se,W),se.return=J,J=se;break e}u(J,$);break}else o(J,$);$=$.sibling}W.type===k?(se=Yo(W.props.children,J.mode,se,W.key),se.return=J,J=se):(se=kf(W.type,W.key,W.props,null,J.mode,se),Su(se,W),se.return=J,J=se)}return b(J);case R:e:{for(Re=W.key;$!==null;){if($.key===Re)if($.tag===4&&$.stateNode.containerInfo===W.containerInfo&&$.stateNode.implementation===W.implementation){u(J,$.sibling),se=v($,W.children||[]),se.return=J,J=se;break e}else{u(J,$);break}else o(J,$);$=$.sibling}se=sm(W,J.mode,se),se.return=J,J=se}return b(J);case x:return W=ea(W),Nt(J,$,W,se)}if(ve(W))return Ae(J,$,W,se);if(O(W)){if(Re=O(W),typeof Re!="function")throw Error(i(150));return W=Re.call(W),Pe(J,$,W,se)}if(typeof W.then=="function")return Nt(J,$,Bf(W),se);if(W.$$typeof===B)return Nt(J,$,Lf(J,W),se);qf(J,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,$!==null&&$.tag===6?(u(J,$.sibling),se=v($,W),se.return=J,J=se):(u(J,$),se=rm(W,J.mode,se),se.return=J,J=se),b(J)):u(J,$)}return function(J,$,W,se){try{Tu=0;var Re=Nt(J,$,W,se);return Ya=null,Re}catch(Ce){if(Ce===Ja||Ce===Uf)throw Ce;var ht=Pi(29,Ce,null,J.mode);return ht.lanes=se,ht.return=J,ht}finally{}}}var na=A_(!0),w_=A_(!1),Hs=!1;function ym(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vm(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Gs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function $s(r,o,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(yt&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=Mf(r),a_(r,null,u),o}return Df(r,f,o,u),Mf(r)}function Au(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ht(r,u)}}function _m(r,o){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var b={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=b:_=_.next=b,u=u.next}while(u!==null);_===null?v=_=o:_=_.next=o}else v=_=o;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var Em=!1;function wu(){if(Em){var r=Ka;if(r!==null)throw r}}function bu(r,o,u,f){Em=!1;var v=r.updateQueue;Hs=!1;var _=v.firstBaseUpdate,b=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var q=D,Q=q.next;q.next=null,b===null?_=Q:b.next=Q,b=q;var re=r.alternate;re!==null&&(re=re.updateQueue,D=re.lastBaseUpdate,D!==b&&(D===null?re.firstBaseUpdate=Q:D.next=Q,re.lastBaseUpdate=q))}if(_!==null){var ae=v.baseState;b=0,re=Q=q=null,D=_;do{var Z=D.lane&-536870913,ne=Z!==D.lane;if(ne?(et&Z)===Z:(f&Z)===Z){Z!==0&&Z===ja&&(Em=!0),re!==null&&(re=re.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ae=r,Pe=D;Z=o;var Nt=u;switch(Pe.tag){case 1:if(Ae=Pe.payload,typeof Ae=="function"){ae=Ae.call(Nt,ae,Z);break e}ae=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Pe.payload,Z=typeof Ae=="function"?Ae.call(Nt,ae,Z):Ae,Z==null)break e;ae=E({},ae,Z);break e;case 2:Hs=!0}}Z=D.callback,Z!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[Z]:ne.push(Z))}else ne={lane:Z,tag:D.tag,payload:D.payload,callback:D.callback,next:null},re===null?(Q=re=ne,q=ae):re=re.next=ne,b|=Z;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);re===null&&(q=ae),v.baseState=q,v.firstBaseUpdate=Q,v.lastBaseUpdate=re,_===null&&(v.shared.lanes=0),Ws|=b,r.lanes=b,r.memoizedState=ae}}function b_(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function C_(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)b_(u[r],o)}var Wa=H(null),zf=H(0);function I_(r,o){r=fs,fe(zf,r),fe(Wa,o),fs=r|o.baseLanes}function Tm(){fe(zf,fs),fe(Wa,Wa.current)}function Sm(){fs=zf.current,te(Wa),te(zf)}var Vi=H(null),ir=null;function js(r){var o=r.alternate;fe(on,on.current&1),fe(Vi,r),ir===null&&(o===null||Wa.current!==null||o.memoizedState!==null)&&(ir=r)}function Am(r){fe(on,on.current),fe(Vi,r),ir===null&&(ir=r)}function x_(r){r.tag===22?(fe(on,on.current),fe(Vi,r),ir===null&&(ir=r)):Ks()}function Ks(){fe(on,on.current),fe(Vi,Vi.current)}function Li(r){te(Vi),ir===r&&(ir=null),te(on)}var on=H(0);function Hf(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Rg(u)||Ng(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var is=0,He=null,xt=null,dn=null,Gf=!1,Qa=!1,ia=!1,$f=0,Cu=0,Xa=null,nN=0;function Qt(){throw Error(i(321))}function wm(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!ki(r[u],o[u]))return!1;return!0}function bm(r,o,u,f,v,_){return is=_,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ee.H=r===null||r.memoizedState===null?fE:Bm,ia=!1,_=u(f,v),ia=!1,Qa&&(_=N_(o,u,f,v)),R_(r),_}function R_(r){ee.H=Ru;var o=xt!==null&&xt.next!==null;if(is=0,dn=xt=He=null,Gf=!1,Cu=0,Xa=null,o)throw Error(i(300));r===null||hn||(r=r.dependencies,r!==null&&Vf(r)&&(hn=!0))}function N_(r,o,u,f){He=r;var v=0;do{if(Qa&&(Xa=null),Cu=0,Qa=!1,25<=v)throw Error(i(301));if(v+=1,dn=xt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ee.H=dE,_=o(u,f)}while(Qa);return _}function iN(){var r=ee.H,o=r.useState()[0];return o=typeof o.then=="function"?Iu(o):o,r=r.useState()[0],(xt!==null?xt.memoizedState:null)!==r&&(He.flags|=1024),o}function Cm(){var r=$f!==0;return $f=0,r}function Im(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function xm(r){if(Gf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Gf=!1}is=0,dn=xt=He=null,Qa=!1,Cu=$f=0,Xa=null}function fi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?He.memoizedState=dn=r:dn=dn.next=r,dn}function an(){if(xt===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var o=dn===null?He.memoizedState:dn.next;if(o!==null)dn=o,xt=r;else{if(r===null)throw He.alternate===null?Error(i(467)):Error(i(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},dn===null?He.memoizedState=dn=r:dn=dn.next=r}return dn}function jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Iu(r){var o=Cu;return Cu+=1,Xa===null&&(Xa=[]),r=E_(Xa,r,o),o=He,(dn===null?o.memoizedState:dn.next)===null&&(o=o.alternate,ee.H=o===null||o.memoizedState===null?fE:Bm),r}function Kf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Iu(r);if(r.$$typeof===B)return Fn(r)}throw Error(i(438,String(r)))}function Rm(r){var o=null,u=He.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=He.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=jf(),He.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),f=0;f<r;f++)u[f]=V;return o.index++,u}function rs(r,o){return typeof o=="function"?o(r):o}function Jf(r){var o=an();return Nm(o,xt,r)}function Nm(r,o,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var v=r.baseQueue,_=f.pending;if(_!==null){if(v!==null){var b=v.next;v.next=_.next,_.next=b}o.baseQueue=v=_,f.pending=null}if(_=r.baseState,v===null)r.memoizedState=_;else{o=v.next;var D=b=null,q=null,Q=o,re=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(et&ae)===ae:(is&ae)===ae){var Z=Q.revertLane;if(Z===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===ja&&(re=!0);else if((is&Z)===Z){Q=Q.next,Z===ja&&(re=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},q===null?(D=q=ae,b=_):q=q.next=ae,He.lanes|=Z,Ws|=Z;ae=Q.action,ia&&u(_,ae),_=Q.hasEagerState?Q.eagerState:u(_,ae)}else Z={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},q===null?(D=q=Z,b=_):q=q.next=Z,He.lanes|=ae,Ws|=ae;Q=Q.next}while(Q!==null&&Q!==o);if(q===null?b=_:q.next=D,!ki(_,r.memoizedState)&&(hn=!0,re&&(u=Ka,u!==null)))throw u;r.memoizedState=_,r.baseState=b,r.baseQueue=q,f.lastRenderedState=_}return v===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Dm(r){var o=an(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,v=u.pending,_=o.memoizedState;if(v!==null){u.pending=null;var b=v=v.next;do _=r(_,b.action),b=b.next;while(b!==v);ki(_,o.memoizedState)||(hn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function D_(r,o,u){var f=He,v=an(),_=st;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=o();var b=!ki((xt||v).memoizedState,u);if(b&&(v.memoizedState=u,hn=!0),v=v.queue,Pm(P_.bind(null,f,v,r),[r]),v.getSnapshot!==o||b||dn!==null&&dn.memoizedState.tag&1){if(f.flags|=2048,Za(9,{destroy:void 0},k_.bind(null,f,v,u,o),null),Mt===null)throw Error(i(349));_||(is&127)!==0||M_(f,o,u)}return u}function M_(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=He.updateQueue,o===null?(o=jf(),He.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function k_(r,o,u,f){o.value=u,o.getSnapshot=f,V_(o)&&L_(r)}function P_(r,o,u){return u(function(){V_(o)&&L_(r)})}function V_(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!ki(r,u)}catch{return!0}}function L_(r){var o=Jo(r,2);o!==null&&Ai(o,r,2)}function Mm(r){var o=fi();if(typeof r=="function"){var u=r;if(r=u(),ia){oe(!0);try{u()}finally{oe(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:r},o}function O_(r,o,u,f){return r.baseState=u,Nm(r,xt,typeof f=="function"?f:rs)}function rN(r,o,u,f,v){if(Qf(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){_.listeners.push(b)}};ee.T!==null?u(!0):_.isTransition=!1,f(_),u=o.pending,u===null?(_.next=o.pending=_,U_(o,_)):(_.next=u.next,o.pending=u.next=_)}}function U_(r,o){var u=o.action,f=o.payload,v=r.state;if(o.isTransition){var _=ee.T,b={};ee.T=b;try{var D=u(v,f),q=ee.S;q!==null&&q(b,D),F_(r,o,D)}catch(Q){km(r,o,Q)}finally{_!==null&&b.types!==null&&(_.types=b.types),ee.T=_}}else try{_=u(v,f),F_(r,o,_)}catch(Q){km(r,o,Q)}}function F_(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){B_(r,o,f)},function(f){return km(r,o,f)}):B_(r,o,u)}function B_(r,o,u){o.status="fulfilled",o.value=u,q_(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,U_(r,u)))}function km(r,o,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,q_(o),o=o.next;while(o!==f)}r.action=null}function q_(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function z_(r,o){return o}function H_(r,o){if(st){var u=Mt.formState;if(u!==null){e:{var f=He;if(st){if(Ut){t:{for(var v=Ut,_=nr;v.nodeType!==8;){if(!_){v=null;break t}if(v=rr(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Ut=rr(v.nextSibling),f=v.data==="F!";break e}}qs(f)}f=!1}f&&(o=u[0])}}return u=fi(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z_,lastRenderedState:o},u.queue=f,u=lE.bind(null,He,f),f.dispatch=u,f=Mm(!1),_=Fm.bind(null,He,!1,f.queue),f=fi(),v={state:o,dispatch:null,action:r,pending:null},f.queue=v,u=rN.bind(null,He,v,_,u),v.dispatch=u,f.memoizedState=r,[o,u,!1]}function G_(r){var o=an();return $_(o,xt,r)}function $_(r,o,u){if(o=Nm(r,o,z_)[0],r=Jf(rs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Iu(o)}catch(b){throw b===Ja?Uf:b}else f=o;o=an();var v=o.queue,_=v.dispatch;return u!==o.memoizedState&&(He.flags|=2048,Za(9,{destroy:void 0},sN.bind(null,v,u),null)),[f,_,r]}function sN(r,o){r.action=o}function j_(r){var o=an(),u=xt;if(u!==null)return $_(o,u,r);an(),o=o.memoizedState,u=an();var f=u.queue.dispatch;return u.memoizedState=r,[o,f,!1]}function Za(r,o,u,f){return r={tag:r,create:u,deps:f,inst:o,next:null},o=He.updateQueue,o===null&&(o=jf(),He.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,o.lastEffect=r),r}function K_(){return an().memoizedState}function Yf(r,o,u,f){var v=fi();He.flags|=r,v.memoizedState=Za(1|o,{destroy:void 0},u,f===void 0?null:f)}function Wf(r,o,u,f){var v=an();f=f===void 0?null:f;var _=v.memoizedState.inst;xt!==null&&f!==null&&wm(f,xt.memoizedState.deps)?v.memoizedState=Za(o,_,u,f):(He.flags|=r,v.memoizedState=Za(1|o,_,u,f))}function J_(r,o){Yf(8390656,8,r,o)}function Pm(r,o){Wf(2048,8,r,o)}function oN(r){He.flags|=4;var o=He.updateQueue;if(o===null)o=jf(),He.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function Y_(r){var o=an().memoizedState;return oN({ref:o,nextImpl:r}),function(){if((yt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function W_(r,o){return Wf(4,2,r,o)}function Q_(r,o){return Wf(4,4,r,o)}function X_(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Z_(r,o,u){u=u!=null?u.concat([r]):null,Wf(4,4,X_.bind(null,o,r),u)}function Vm(){}function eE(r,o){var u=an();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&wm(o,f[1])?f[0]:(u.memoizedState=[r,o],r)}function tE(r,o){var u=an();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&wm(o,f[1]))return f[0];if(f=r(),ia){oe(!0);try{r()}finally{oe(!1)}}return u.memoizedState=[f,o],f}function Lm(r,o,u){return u===void 0||(is&1073741824)!==0&&(et&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=nT(),He.lanes|=r,Ws|=r,u)}function nE(r,o,u,f){return ki(u,o)?u:Wa.current!==null?(r=Lm(r,u,f),ki(r,o)||(hn=!0),r):(is&42)===0||(is&1073741824)!==0&&(et&261930)===0?(hn=!0,r.memoizedState=u):(r=nT(),He.lanes|=r,Ws|=r,o)}function iE(r,o,u,f,v){var _=ce.p;ce.p=_!==0&&8>_?_:8;var b=ee.T,D={};ee.T=D,Fm(r,!1,o,u);try{var q=v(),Q=ee.S;if(Q!==null&&Q(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var re=tN(q,f);xu(r,o,re,Fi(r))}else xu(r,o,f,Fi(r))}catch(ae){xu(r,o,{then:function(){},status:"rejected",reason:ae},Fi())}finally{ce.p=_,b!==null&&D.types!==null&&(b.types=D.types),ee.T=b}}function aN(){}function Om(r,o,u,f){if(r.tag!==5)throw Error(i(476));var v=rE(r).queue;iE(r,v,o,he,u===null?aN:function(){return sE(r),u(f)})}function rE(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:he},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function sE(r){var o=rE(r);o.next===null&&(o=r.alternate.memoizedState),xu(r,o.next.queue,{},Fi())}function Um(){return Fn($u)}function oE(){return an().memoizedState}function aE(){return an().memoizedState}function lN(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Fi();r=Gs(u);var f=$s(o,r,u);f!==null&&(Ai(f,o,u),Au(f,o,u)),o={cache:hm()},r.payload=o;return}o=o.return}}function uN(r,o,u){var f=Fi();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Qf(r)?uE(o,u):(u=nm(r,o,u,f),u!==null&&(Ai(u,r,f),cE(u,o,f)))}function lE(r,o,u){var f=Fi();xu(r,o,u,f)}function xu(r,o,u,f){var v={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Qf(r))uE(o,v);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var b=o.lastRenderedState,D=_(b,u);if(v.hasEagerState=!0,v.eagerState=D,ki(D,b))return Df(r,o,v,0),Mt===null&&Nf(),!1}catch{}finally{}if(u=nm(r,o,v,f),u!==null)return Ai(u,r,f),cE(u,o,f),!0}return!1}function Fm(r,o,u,f){if(f={lane:2,revertLane:yg(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Qf(r)){if(o)throw Error(i(479))}else o=nm(r,u,f,2),o!==null&&Ai(o,r,2)}function Qf(r){var o=r.alternate;return r===He||o!==null&&o===He}function uE(r,o){Qa=Gf=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function cE(r,o,u){if((u&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ht(r,u)}}var Ru={readContext:Fn,use:Kf,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Ru.useEffectEvent=Qt;var fE={readContext:Fn,use:Kf,useCallback:function(r,o){return fi().memoizedState=[r,o===void 0?null:o],r},useContext:Fn,useEffect:J_,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Yf(4194308,4,X_.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Yf(4194308,4,r,o)},useInsertionEffect:function(r,o){Yf(4,2,r,o)},useMemo:function(r,o){var u=fi();o=o===void 0?null:o;var f=r();if(ia){oe(!0);try{r()}finally{oe(!1)}}return u.memoizedState=[f,o],f},useReducer:function(r,o,u){var f=fi();if(u!==void 0){var v=u(o);if(ia){oe(!0);try{u(o)}finally{oe(!1)}}}else v=o;return f.memoizedState=f.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},f.queue=r,r=r.dispatch=uN.bind(null,He,r),[f.memoizedState,r]},useRef:function(r){var o=fi();return r={current:r},o.memoizedState=r},useState:function(r){r=Mm(r);var o=r.queue,u=lE.bind(null,He,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Vm,useDeferredValue:function(r,o){var u=fi();return Lm(u,r,o)},useTransition:function(){var r=Mm(!1);return r=iE.bind(null,He,r.queue,!0,!1),fi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var f=He,v=fi();if(st){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Mt===null)throw Error(i(349));(et&127)!==0||M_(f,o,u)}v.memoizedState=u;var _={value:u,getSnapshot:o};return v.queue=_,J_(P_.bind(null,f,_,r),[r]),f.flags|=2048,Za(9,{destroy:void 0},k_.bind(null,f,_,u,o),null),u},useId:function(){var r=fi(),o=Mt.identifierPrefix;if(st){var u=Vr,f=Pr;u=(f&~(1<<32-Te(f)-1)).toString(32)+u,o="_"+o+"R_"+u,u=$f++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=nN++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Um,useFormState:H_,useActionState:H_,useOptimistic:function(r){var o=fi();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Fm.bind(null,He,!0,u),u.dispatch=o,[r,o]},useMemoCache:Rm,useCacheRefresh:function(){return fi().memoizedState=lN.bind(null,He)},useEffectEvent:function(r){var o=fi(),u={impl:r};return o.memoizedState=u,function(){if((yt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Bm={readContext:Fn,use:Kf,useCallback:eE,useContext:Fn,useEffect:Pm,useImperativeHandle:Z_,useInsertionEffect:W_,useLayoutEffect:Q_,useMemo:tE,useReducer:Jf,useRef:K_,useState:function(){return Jf(rs)},useDebugValue:Vm,useDeferredValue:function(r,o){var u=an();return nE(u,xt.memoizedState,r,o)},useTransition:function(){var r=Jf(rs)[0],o=an().memoizedState;return[typeof r=="boolean"?r:Iu(r),o]},useSyncExternalStore:D_,useId:oE,useHostTransitionStatus:Um,useFormState:G_,useActionState:G_,useOptimistic:function(r,o){var u=an();return O_(u,xt,r,o)},useMemoCache:Rm,useCacheRefresh:aE};Bm.useEffectEvent=Y_;var dE={readContext:Fn,use:Kf,useCallback:eE,useContext:Fn,useEffect:Pm,useImperativeHandle:Z_,useInsertionEffect:W_,useLayoutEffect:Q_,useMemo:tE,useReducer:Dm,useRef:K_,useState:function(){return Dm(rs)},useDebugValue:Vm,useDeferredValue:function(r,o){var u=an();return xt===null?Lm(u,r,o):nE(u,xt.memoizedState,r,o)},useTransition:function(){var r=Dm(rs)[0],o=an().memoizedState;return[typeof r=="boolean"?r:Iu(r),o]},useSyncExternalStore:D_,useId:oE,useHostTransitionStatus:Um,useFormState:j_,useActionState:j_,useOptimistic:function(r,o){var u=an();return xt!==null?O_(u,xt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Rm,useCacheRefresh:aE};dE.useEffectEvent=Y_;function qm(r,o,u,f){o=r.memoizedState,u=u(f,o),u=u==null?o:E({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var zm={enqueueSetState:function(r,o,u){r=r._reactInternals;var f=Fi(),v=Gs(f);v.payload=o,u!=null&&(v.callback=u),o=$s(r,v,f),o!==null&&(Ai(o,r,f),Au(o,r,f))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var f=Fi(),v=Gs(f);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=$s(r,v,f),o!==null&&(Ai(o,r,f),Au(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Fi(),f=Gs(u);f.tag=2,o!=null&&(f.callback=o),o=$s(r,f,u),o!==null&&(Ai(o,r,u),Au(o,r,u))}};function hE(r,o,u,f,v,_,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,_,b):o.prototype&&o.prototype.isPureReactComponent?!mu(u,f)||!mu(v,_):!0}function pE(r,o,u,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==r&&zm.enqueueReplaceState(o,o.state,null)}function ra(r,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(r=r.defaultProps){u===o&&(u=E({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function mE(r){Rf(r)}function gE(r){console.error(r)}function yE(r){Rf(r)}function Xf(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function vE(r,o,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Hm(r,o,u){return u=Gs(u),u.tag=3,u.payload={element:null},u.callback=function(){Xf(r,o)},u}function _E(r){return r=Gs(r),r.tag=3,r}function EE(r,o,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;r.payload=function(){return v(_)},r.callback=function(){vE(o,u,f)}}var b=u.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(r.callback=function(){vE(o,u,f),typeof v!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function cN(r,o,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&$a(o,u,v,!0),u=Vi.current,u!==null){switch(u.tag){case 31:case 13:return ir===null?cd():u.alternate===null&&Xt===0&&(Xt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===Ff?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),pg(r,f,v)),!1;case 22:return u.flags|=65536,f===Ff?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),pg(r,f,v)),!1}throw Error(i(435,u.tag))}return pg(r,f,v),cd(),!1}if(st)return o=Vi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==lm&&(r=Error(i(422),{cause:f}),vu(Zi(r,u)))):(f!==lm&&(o=Error(i(423),{cause:f}),vu(Zi(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,f=Zi(f,u),v=Hm(r.stateNode,f,v),_m(r,v),Xt!==4&&(Xt=2)),!1;var _=Error(i(520),{cause:f});if(_=Zi(_,u),Ou===null?Ou=[_]:Ou.push(_),Xt!==4&&(Xt=2),o===null)return!0;f=Zi(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Hm(u.stateNode,f,r),_m(u,r),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qs===null||!Qs.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=_E(v),EE(v,r,u,f),_m(u,v),!1}u=u.return}while(u!==null);return!1}var Gm=Error(i(461)),hn=!1;function Bn(r,o,u,f){o.child=r===null?w_(o,null,u,f):na(o,r.child,u,f)}function TE(r,o,u,f,v){u=u.render;var _=o.ref;if("ref"in f){var b={};for(var D in f)D!=="ref"&&(b[D]=f[D])}else b=f;return Xo(o),f=bm(r,o,u,b,_,v),D=Cm(),r!==null&&!hn?(Im(r,o,v),ss(r,o,v)):(st&&D&&om(o),o.flags|=1,Bn(r,o,f,v),o.child)}function SE(r,o,u,f,v){if(r===null){var _=u.type;return typeof _=="function"&&!im(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,AE(r,o,_,f,v)):(r=kf(u.type,null,f,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!Xm(r,v)){var b=_.memoizedProps;if(u=u.compare,u=u!==null?u:mu,u(b,f)&&r.ref===o.ref)return ss(r,o,v)}return o.flags|=1,r=Zr(_,f),r.ref=o.ref,r.return=o,o.child=r}function AE(r,o,u,f,v){if(r!==null){var _=r.memoizedProps;if(mu(_,f)&&r.ref===o.ref)if(hn=!1,o.pendingProps=f=_,Xm(r,v))(r.flags&131072)!==0&&(hn=!0);else return o.lanes=r.lanes,ss(r,o,v)}return $m(r,o,u,f,v)}function wE(r,o,u,f){var v=f.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,r!==null){for(f=o.child=r.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,o.child=null;return bE(r,o,_,u,f)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Of(o,_!==null?_.cachePool:null),_!==null?I_(o,_):Tm(),x_(o);else return f=o.lanes=536870912,bE(r,o,_!==null?_.baseLanes|u:u,u,f)}else _!==null?(Of(o,_.cachePool),I_(o,_),Ks(),o.memoizedState=null):(r!==null&&Of(o,null),Tm(),Ks());return Bn(r,o,v,u),o.child}function Nu(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function bE(r,o,u,f,v){var _=mm();return _=_===null?null:{parent:fn._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},r!==null&&Of(o,null),Tm(),x_(o),r!==null&&$a(r,o,f,!0),o.childLanes=v,null}function Zf(r,o){return o=td({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function CE(r,o,u){return na(o,r.child,null,u),r=Zf(o,o.pendingProps),r.flags|=2,Li(o),o.memoizedState=null,r}function fN(r,o,u){var f=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(st){if(f.mode==="hidden")return r=Zf(o,f),o.lanes=536870912,Nu(null,r);if(Am(o),(r=Ut)?(r=UT(r,nr),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Fs!==null?{id:Pr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},u=u_(r),u.return=o,o.child=u,Un=o,Ut=null)):r=null,r===null)throw qs(o);return o.lanes=536870912,null}return Zf(o,f)}var _=r.memoizedState;if(_!==null){var b=_.dehydrated;if(Am(o),v)if(o.flags&256)o.flags&=-257,o=CE(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(hn||$a(r,o,u,!1),v=(u&r.childLanes)!==0,hn||v){if(f=Mt,f!==null&&(b=jn(f,u),b!==0&&b!==_.retryLane))throw _.retryLane=b,Jo(r,b),Ai(f,r,b),Gm;cd(),o=CE(r,o,u)}else r=_.treeContext,Ut=rr(b.nextSibling),Un=o,st=!0,Bs=null,nr=!1,r!==null&&d_(o,r),o=Zf(o,f),o.flags|=4096;return o}return r=Zr(r.child,{mode:f.mode,children:f.children}),r.ref=o.ref,o.child=r,r.return=o,r}function ed(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function $m(r,o,u,f,v){return Xo(o),u=bm(r,o,u,f,void 0,v),f=Cm(),r!==null&&!hn?(Im(r,o,v),ss(r,o,v)):(st&&f&&om(o),o.flags|=1,Bn(r,o,u,v),o.child)}function IE(r,o,u,f,v,_){return Xo(o),o.updateQueue=null,u=N_(o,f,u,v),R_(r),f=Cm(),r!==null&&!hn?(Im(r,o,_),ss(r,o,_)):(st&&f&&om(o),o.flags|=1,Bn(r,o,u,_),o.child)}function xE(r,o,u,f,v){if(Xo(o),o.stateNode===null){var _=qa,b=u.contextType;typeof b=="object"&&b!==null&&(_=Fn(b)),_=new u(f,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=zm,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=f,_.state=o.memoizedState,_.refs={},ym(o),b=u.contextType,_.context=typeof b=="object"&&b!==null?Fn(b):qa,_.state=o.memoizedState,b=u.getDerivedStateFromProps,typeof b=="function"&&(qm(o,u,b,f),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(b=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),b!==_.state&&zm.enqueueReplaceState(_,_.state,null),bu(o,f,_,v),wu(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){_=o.stateNode;var D=o.memoizedProps,q=ra(u,D);_.props=q;var Q=_.context,re=u.contextType;b=qa,typeof re=="object"&&re!==null&&(b=Fn(re));var ae=u.getDerivedStateFromProps;re=typeof ae=="function"||typeof _.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(D||Q!==b)&&pE(o,_,f,b),Hs=!1;var Z=o.memoizedState;_.state=Z,bu(o,f,_,v),wu(),Q=o.memoizedState,D||Z!==Q||Hs?(typeof ae=="function"&&(qm(o,u,ae,f),Q=o.memoizedState),(q=Hs||hE(o,u,q,f,Z,Q,b))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=Q),_.props=f,_.state=Q,_.context=b,f=q):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{_=o.stateNode,vm(r,o),b=o.memoizedProps,re=ra(u,b),_.props=re,ae=o.pendingProps,Z=_.context,Q=u.contextType,q=qa,typeof Q=="object"&&Q!==null&&(q=Fn(Q)),D=u.getDerivedStateFromProps,(Q=typeof D=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==ae||Z!==q)&&pE(o,_,f,q),Hs=!1,Z=o.memoizedState,_.state=Z,bu(o,f,_,v),wu();var ne=o.memoizedState;b!==ae||Z!==ne||Hs||r!==null&&r.dependencies!==null&&Vf(r.dependencies)?(typeof D=="function"&&(qm(o,u,D,f),ne=o.memoizedState),(re=Hs||hE(o,u,re,f,Z,ne,q)||r!==null&&r.dependencies!==null&&Vf(r.dependencies))?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,ne,q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,ne,q)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||b===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ne),_.props=f,_.state=ne,_.context=q,f=re):(typeof _.componentDidUpdate!="function"||b===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),f=!1)}return _=f,ed(r,o),f=(o.flags&128)!==0,_||f?(_=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&f?(o.child=na(o,r.child,null,v),o.child=na(o,null,u,v)):Bn(r,o,u,v),o.memoizedState=_.state,r=o.child):r=ss(r,o,v),r}function RE(r,o,u,f){return Wo(),o.flags|=256,Bn(r,o,u,f),o.child}var jm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Km(r){return{baseLanes:r,cachePool:v_()}}function Jm(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Ui),r}function NE(r,o,u){var f=o.pendingProps,v=!1,_=(o.flags&128)!==0,b;if((b=_)||(b=r!==null&&r.memoizedState===null?!1:(on.current&2)!==0),b&&(v=!0,o.flags&=-129),b=(o.flags&32)!==0,o.flags&=-33,r===null){if(st){if(v?js(o):Ks(),(r=Ut)?(r=UT(r,nr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Fs!==null?{id:Pr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},u=u_(r),u.return=o,o.child=u,Un=o,Ut=null)):r=null,r===null)throw qs(o);return Ng(r)?o.lanes=32:o.lanes=536870912,null}var D=f.children;return f=f.fallback,v?(Ks(),v=o.mode,D=td({mode:"hidden",children:D},v),f=Yo(f,v,u,null),D.return=o,f.return=o,D.sibling=f,o.child=D,f=o.child,f.memoizedState=Km(u),f.childLanes=Jm(r,b,u),o.memoizedState=jm,Nu(null,f)):(js(o),Ym(o,D))}var q=r.memoizedState;if(q!==null&&(D=q.dehydrated,D!==null)){if(_)o.flags&256?(js(o),o.flags&=-257,o=Wm(r,o,u)):o.memoizedState!==null?(Ks(),o.child=r.child,o.flags|=128,o=null):(Ks(),D=f.fallback,v=o.mode,f=td({mode:"visible",children:f.children},v),D=Yo(D,v,u,null),D.flags|=2,f.return=o,D.return=o,f.sibling=D,o.child=f,na(o,r.child,null,u),f=o.child,f.memoizedState=Km(u),f.childLanes=Jm(r,b,u),o.memoizedState=jm,o=Nu(null,f));else if(js(o),Ng(D)){if(b=D.nextSibling&&D.nextSibling.dataset,b)var Q=b.dgst;b=Q,f=Error(i(419)),f.stack="",f.digest=b,vu({value:f,source:null,stack:null}),o=Wm(r,o,u)}else if(hn||$a(r,o,u,!1),b=(u&r.childLanes)!==0,hn||b){if(b=Mt,b!==null&&(f=jn(b,u),f!==0&&f!==q.retryLane))throw q.retryLane=f,Jo(r,f),Ai(b,r,f),Gm;Rg(D)||cd(),o=Wm(r,o,u)}else Rg(D)?(o.flags|=192,o.child=r.child,o=null):(r=q.treeContext,Ut=rr(D.nextSibling),Un=o,st=!0,Bs=null,nr=!1,r!==null&&d_(o,r),o=Ym(o,f.children),o.flags|=4096);return o}return v?(Ks(),D=f.fallback,v=o.mode,q=r.child,Q=q.sibling,f=Zr(q,{mode:"hidden",children:f.children}),f.subtreeFlags=q.subtreeFlags&65011712,Q!==null?D=Zr(Q,D):(D=Yo(D,v,u,null),D.flags|=2),D.return=o,f.return=o,f.sibling=D,o.child=f,Nu(null,f),f=o.child,D=r.child.memoizedState,D===null?D=Km(u):(v=D.cachePool,v!==null?(q=fn._currentValue,v=v.parent!==q?{parent:q,pool:q}:v):v=v_(),D={baseLanes:D.baseLanes|u,cachePool:v}),f.memoizedState=D,f.childLanes=Jm(r,b,u),o.memoizedState=jm,Nu(r.child,f)):(js(o),u=r.child,r=u.sibling,u=Zr(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,r!==null&&(b=o.deletions,b===null?(o.deletions=[r],o.flags|=16):b.push(r)),o.child=u,o.memoizedState=null,u)}function Ym(r,o){return o=td({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function td(r,o){return r=Pi(22,r,null,o),r.lanes=0,r}function Wm(r,o,u){return na(o,r.child,null,u),r=Ym(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function DE(r,o,u){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),fm(r.return,o,u)}function Qm(r,o,u,f,v,_){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v,treeForkCount:_}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=u,b.tailMode=v,b.treeForkCount=_)}function ME(r,o,u){var f=o.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var b=on.current,D=(b&2)!==0;if(D?(b=b&1|2,o.flags|=128):b&=1,fe(on,b),Bn(r,o,f,u),f=st?yu:0,!D&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&DE(r,u,o);else if(r.tag===19)DE(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&Hf(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Qm(o,!1,v,u,_,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Hf(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}Qm(o,!0,u,null,_,f);break;case"together":Qm(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function ss(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Ws|=o.lanes,(u&o.childLanes)===0)if(r!==null){if($a(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=Zr(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Zr(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Xm(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Vf(r)))}function dN(r,o,u){switch(o.tag){case 3:jt(o,o.stateNode.containerInfo),zs(o,fn,r.memoizedState.cache),Wo();break;case 27:case 5:Cn(o);break;case 4:jt(o,o.stateNode.containerInfo);break;case 10:zs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Am(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(js(o),o.flags|=128,null):(u&o.child.childLanes)!==0?NE(r,o,u):(js(o),r=ss(r,o,u),r!==null?r.sibling:null);js(o);break;case 19:var v=(r.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||($a(r,o,u,!1),f=(u&o.childLanes)!==0),v){if(f)return ME(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),fe(on,on.current),f)break;return null;case 22:return o.lanes=0,wE(r,o,u,o.pendingProps);case 24:zs(o,fn,r.memoizedState.cache)}return ss(r,o,u)}function kE(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)hn=!0;else{if(!Xm(r,u)&&(o.flags&128)===0)return hn=!1,dN(r,o,u);hn=(r.flags&131072)!==0}else hn=!1,st&&(o.flags&1048576)!==0&&f_(o,yu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(r=ea(o.elementType),o.type=r,typeof r=="function")im(r)?(f=ra(r,f),o.tag=1,o=xE(null,o,r,f,u)):(o.tag=0,o=$m(null,o,r,f,u));else{if(r!=null){var v=r.$$typeof;if(v===K){o.tag=11,o=TE(null,o,r,f,u);break e}else if(v===I){o.tag=14,o=SE(null,o,r,f,u);break e}}throw o=be(r)||r,Error(i(306,o,""))}}return o;case 0:return $m(r,o,o.type,o.pendingProps,u);case 1:return f=o.type,v=ra(f,o.pendingProps),xE(r,o,f,v,u);case 3:e:{if(jt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));f=o.pendingProps;var _=o.memoizedState;v=_.element,vm(r,o),bu(o,f,null,u);var b=o.memoizedState;if(f=b.cache,zs(o,fn,f),f!==_.cache&&dm(o,[fn],u,!0),wu(),f=b.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:b.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=RE(r,o,f,u);break e}else if(f!==v){v=Zi(Error(i(424)),o),vu(v),o=RE(r,o,f,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ut=rr(r.firstChild),Un=o,st=!0,Bs=null,nr=!0,u=w_(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Wo(),f===v){o=ss(r,o,u);break e}Bn(r,o,f,u)}o=o.child}return o;case 26:return ed(r,o),r===null?(u=GT(o.type,null,o.pendingProps,null))?o.memoizedState=u:st||(u=o.type,r=o.pendingProps,f=yd(Me.current).createElement(u),f[Lt]=o,f[sn]=r,qn(f,u,r),Gt(f),o.stateNode=f):o.memoizedState=GT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Cn(o),r===null&&st&&(f=o.stateNode=qT(o.type,o.pendingProps,Me.current),Un=o,nr=!0,v=Ut,to(o.type)?(Dg=v,Ut=rr(f.firstChild)):Ut=v),Bn(r,o,o.pendingProps.children,u),ed(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&st&&((v=f=Ut)&&(f=zN(f,o.type,o.pendingProps,nr),f!==null?(o.stateNode=f,Un=o,Ut=rr(f.firstChild),nr=!1,v=!0):v=!1),v||qs(o)),Cn(o),v=o.type,_=o.pendingProps,b=r!==null?r.memoizedProps:null,f=_.children,Cg(v,_)?f=null:b!==null&&Cg(v,b)&&(o.flags|=32),o.memoizedState!==null&&(v=bm(r,o,iN,null,null,u),$u._currentValue=v),ed(r,o),Bn(r,o,f,u),o.child;case 6:return r===null&&st&&((r=u=Ut)&&(u=HN(u,o.pendingProps,nr),u!==null?(o.stateNode=u,Un=o,Ut=null,r=!0):r=!1),r||qs(o)),null;case 13:return NE(r,o,u);case 4:return jt(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=na(o,null,f,u):Bn(r,o,f,u),o.child;case 11:return TE(r,o,o.type,o.pendingProps,u);case 7:return Bn(r,o,o.pendingProps,u),o.child;case 8:return Bn(r,o,o.pendingProps.children,u),o.child;case 12:return Bn(r,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,zs(o,o.type,f.value),Bn(r,o,f.children,u),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,Xo(o),v=Fn(v),f=f(v),o.flags|=1,Bn(r,o,f,u),o.child;case 14:return SE(r,o,o.type,o.pendingProps,u);case 15:return AE(r,o,o.type,o.pendingProps,u);case 19:return ME(r,o,u);case 31:return fN(r,o,u);case 22:return wE(r,o,u,o.pendingProps);case 24:return Xo(o),f=Fn(fn),r===null?(v=mm(),v===null&&(v=Mt,_=hm(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),o.memoizedState={parent:f,cache:v},ym(o),zs(o,fn,v)):((r.lanes&u)!==0&&(vm(r,o),bu(o,null,null,u),wu()),v=r.memoizedState,_=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),zs(o,fn,f)):(f=_.cache,zs(o,fn,f),f!==v.cache&&dm(o,[fn],u,!0))),Bn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function os(r){r.flags|=4}function Zm(r,o,u,f,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(oT())r.flags|=8192;else throw ta=Ff,gm}else r.flags&=-16777217}function PE(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!YT(o))if(oT())r.flags|=8192;else throw ta=Ff,gm}function nd(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Gi():536870912,r.lanes|=o,il|=o)}function Du(r,o){if(!st)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Ft(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=u,o}function hN(r,o,u){var f=o.pendingProps;switch(am(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(o),null;case 1:return Ft(o),null;case 3:return u=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),ns(fn),xe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Ga(o)?os(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,um())),Ft(o),null;case 26:var v=o.type,_=o.memoizedState;return r===null?(os(o),_!==null?(Ft(o),PE(o,_)):(Ft(o),Zm(o,v,null,f,u))):_?_!==r.memoizedState?(os(o),Ft(o),PE(o,_)):(Ft(o),o.flags&=-16777217):(r=r.memoizedProps,r!==f&&os(o),Ft(o),Zm(o,v,r,f,u)),null;case 27:if(ut(o),u=Me.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&os(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Ft(o),null}r=pe.current,Ga(o)?h_(o):(r=qT(v,f,u),o.stateNode=r,os(o))}return Ft(o),null;case 5:if(ut(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&os(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Ft(o),null}if(_=pe.current,Ga(o))h_(o);else{var b=yd(Me.current);switch(_){case 1:_=b.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=b.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=b.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=b.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=b.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?b.createElement("select",{is:f.is}):b.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?b.createElement(v,{is:f.is}):b.createElement(v)}}_[Lt]=o,_[sn]=f;e:for(b=o.child;b!==null;){if(b.tag===5||b.tag===6)_.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===o)break e;for(;b.sibling===null;){if(b.return===null||b.return===o)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}o.stateNode=_;e:switch(qn(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&os(o)}}return Ft(o),Zm(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&os(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(r=Me.current,Ga(o)){if(r=o.stateNode,u=o.memoizedProps,f=null,v=Un,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}r[Lt]=o,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||NT(r.nodeValue,u)),r||qs(o,!0)}else r=yd(r).createTextNode(f),r[Lt]=o,o.stateNode=r}return Ft(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(f=Ga(o),u!==null){if(r===null){if(!f)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Lt]=o}else Wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ft(o),r=!1}else u=um(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(Li(o),o):(Li(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Ft(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Ga(o),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Lt]=o}else Wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ft(o),v=!1}else v=um(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Li(o),o):(Li(o),null)}return Li(o),(o.flags&128)!==0?(o.lanes=u,o):(u=f!==null,r=r!==null&&r.memoizedState!==null,u&&(f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),nd(o,o.updateQueue),Ft(o),null);case 4:return xe(),r===null&&Tg(o.stateNode.containerInfo),Ft(o),null;case 10:return ns(o.type),Ft(o),null;case 19:if(te(on),f=o.memoizedState,f===null)return Ft(o),null;if(v=(o.flags&128)!==0,_=f.rendering,_===null)if(v)Du(f,!1);else{if(Xt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=Hf(r),_!==null){for(o.flags|=128,Du(f,!1),r=_.updateQueue,o.updateQueue=r,nd(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)l_(u,r),u=u.sibling;return fe(on,on.current&1|2),st&&es(o,f.treeForkCount),o.child}r=r.sibling}f.tail!==null&&ct()>ad&&(o.flags|=128,v=!0,Du(f,!1),o.lanes=4194304)}else{if(!v)if(r=Hf(_),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,nd(o,r),Du(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!st)return Ft(o),null}else 2*ct()-f.renderingStartTime>ad&&u!==536870912&&(o.flags|=128,v=!0,Du(f,!1),o.lanes=4194304);f.isBackwards?(_.sibling=o.child,o.child=_):(r=f.last,r!==null?r.sibling=_:o.child=_,f.last=_)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=ct(),r.sibling=null,u=on.current,fe(on,v?u&1|2:u&1),st&&es(o,f.treeForkCount),r):(Ft(o),null);case 22:case 23:return Li(o),Sm(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(Ft(o),o.subtreeFlags&6&&(o.flags|=8192)):Ft(o),u=o.updateQueue,u!==null&&nd(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),r!==null&&te(Zo),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ns(fn),Ft(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function pN(r,o){switch(am(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ns(fn),xe(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ut(o),null;case 31:if(o.memoizedState!==null){if(Li(o),o.alternate===null)throw Error(i(340));Wo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Li(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Wo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return te(on),null;case 4:return xe(),null;case 10:return ns(o.type),null;case 22:case 23:return Li(o),Sm(),r!==null&&te(Zo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ns(fn),null;case 25:return null;default:return null}}function VE(r,o){switch(am(o),o.tag){case 3:ns(fn),xe();break;case 26:case 27:case 5:ut(o);break;case 4:xe();break;case 31:o.memoizedState!==null&&Li(o);break;case 13:Li(o);break;case 19:te(on);break;case 10:ns(o.type);break;case 22:case 23:Li(o),Sm(),r!==null&&te(Zo);break;case 24:ns(fn)}}function Mu(r,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&r)===r){f=void 0;var _=u.create,b=u.inst;f=_(),b.destroy=f}u=u.next}while(u!==v)}}catch(D){bt(o,o.return,D)}}function Js(r,o,u){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&r)===r){var b=f.inst,D=b.destroy;if(D!==void 0){b.destroy=void 0,v=o;var q=u,Q=D;try{Q()}catch(re){bt(v,q,re)}}}f=f.next}while(f!==_)}}catch(re){bt(o,o.return,re)}}function LE(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{C_(o,u)}catch(f){bt(r,r.return,f)}}}function OE(r,o,u){u.props=ra(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){bt(r,o,f)}}function ku(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(v){bt(r,o,v)}}function Lr(r,o){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){bt(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){bt(r,o,v)}else u.current=null}function UE(r){var o=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){bt(r,r.return,v)}}function eg(r,o,u){try{var f=r.stateNode;LN(f,r.type,u,o),f[sn]=o}catch(v){bt(r,r.return,v)}}function FE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&to(r.type)||r.tag===4}function tg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||FE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&to(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ng(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Nn));else if(f!==4&&(f===27&&to(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(ng(r,o,u),r=r.sibling;r!==null;)ng(r,o,u),r=r.sibling}function id(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(f!==4&&(f===27&&to(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(id(r,o,u),r=r.sibling;r!==null;)id(r,o,u),r=r.sibling}function BE(r){var o=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);qn(o,f,u),o[Lt]=r,o[sn]=u}catch(_){bt(r,r.return,_)}}var as=!1,pn=!1,ig=!1,qE=typeof WeakSet=="function"?WeakSet:Set,kn=null;function mN(r,o){if(r=r.containerInfo,wg=wd,r=Z0(r),Wp(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var b=0,D=-1,q=-1,Q=0,re=0,ae=r,Z=null;t:for(;;){for(var ne;ae!==u||v!==0&&ae.nodeType!==3||(D=b+v),ae!==_||f!==0&&ae.nodeType!==3||(q=b+f),ae.nodeType===3&&(b+=ae.nodeValue.length),(ne=ae.firstChild)!==null;)Z=ae,ae=ne;for(;;){if(ae===r)break t;if(Z===u&&++Q===v&&(D=b),Z===_&&++re===f&&(q=b),(ne=ae.nextSibling)!==null)break;ae=Z,Z=ae.parentNode}ae=ne}u=D===-1||q===-1?null:{start:D,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(bg={focusedElem:r,selectionRange:u},wd=!1,kn=o;kn!==null;)if(o=kn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,kn=r;else for(;kn!==null;){switch(o=kn,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=o,v=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var Ae=ra(u.type,v);r=f.getSnapshotBeforeUpdate(Ae,_),f.__reactInternalSnapshotBeforeUpdate=r}catch(Pe){bt(u,u.return,Pe)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)xg(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":xg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,kn=r;break}kn=o.return}}function zE(r,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:us(r,u),f&4&&Mu(5,u);break;case 1:if(us(r,u),f&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(b){bt(u,u.return,b)}else{var v=ra(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(b){bt(u,u.return,b)}}f&64&&LE(u),f&512&&ku(u,u.return);break;case 3:if(us(r,u),f&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{C_(r,o)}catch(b){bt(u,u.return,b)}}break;case 27:o===null&&f&4&&BE(u);case 26:case 5:us(r,u),o===null&&f&4&&UE(u),f&512&&ku(u,u.return);break;case 12:us(r,u);break;case 31:us(r,u),f&4&&$E(r,u);break;case 13:us(r,u),f&4&&jE(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=wN.bind(null,u),GN(r,u))));break;case 22:if(f=u.memoizedState!==null||as,!f){o=o!==null&&o.memoizedState!==null||pn,v=as;var _=pn;as=f,(pn=o)&&!_?cs(r,u,(u.subtreeFlags&8772)!==0):us(r,u),as=v,pn=_}break;case 30:break;default:us(r,u)}}function HE(r){var o=r.alternate;o!==null&&(r.alternate=null,HE(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Ji(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var $t=null,_i=!1;function ls(r,o,u){for(u=u.child;u!==null;)GE(r,o,u),u=u.sibling}function GE(r,o,u){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Rn,u)}catch{}switch(u.tag){case 26:pn||Lr(u,o),ls(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:pn||Lr(u,o);var f=$t,v=_i;to(u.type)&&($t=u.stateNode,_i=!1),ls(r,o,u),zu(u.stateNode),$t=f,_i=v;break;case 5:pn||Lr(u,o);case 6:if(f=$t,v=_i,$t=null,ls(r,o,u),$t=f,_i=v,$t!==null)if(_i)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(u.stateNode)}catch(_){bt(u,o,_)}else try{$t.removeChild(u.stateNode)}catch(_){bt(u,o,_)}break;case 18:$t!==null&&(_i?(r=$t,LT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),fl(r)):LT($t,u.stateNode));break;case 4:f=$t,v=_i,$t=u.stateNode.containerInfo,_i=!0,ls(r,o,u),$t=f,_i=v;break;case 0:case 11:case 14:case 15:Js(2,u,o),pn||Js(4,u,o),ls(r,o,u);break;case 1:pn||(Lr(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&OE(u,o,f)),ls(r,o,u);break;case 21:ls(r,o,u);break;case 22:pn=(f=pn)||u.memoizedState!==null,ls(r,o,u),pn=f;break;default:ls(r,o,u)}}function $E(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{fl(r)}catch(u){bt(o,o.return,u)}}}function jE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{fl(r)}catch(u){bt(o,o.return,u)}}function gN(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new qE),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new qE),o;default:throw Error(i(435,r.tag))}}function rd(r,o){var u=gN(r);o.forEach(function(f){if(!u.has(f)){u.add(f);var v=bN.bind(null,r,f);f.then(v,v)}})}function Ei(r,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],_=r,b=o,D=b;e:for(;D!==null;){switch(D.tag){case 27:if(to(D.type)){$t=D.stateNode,_i=!1;break e}break;case 5:$t=D.stateNode,_i=!1;break e;case 3:case 4:$t=D.stateNode.containerInfo,_i=!0;break e}D=D.return}if($t===null)throw Error(i(160));GE(_,b,v),$t=null,_i=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)KE(o,r),o=o.sibling}var yr=null;function KE(r,o){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ei(o,r),Ti(r),f&4&&(Js(3,r,r.return),Mu(3,r),Js(5,r,r.return));break;case 1:Ei(o,r),Ti(r),f&512&&(pn||u===null||Lr(u,u.return)),f&64&&as&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=yr;if(Ei(o,r),Ti(r),f&512&&(pn||u===null||Lr(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Ki]||_[Lt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),qn(_,f,u),_[Lt]=r,Gt(_),f=_;break e;case"link":var b=KT("link","href",v).get(f+(u.href||""));if(b){for(var D=0;D<b.length;D++)if(_=b[D],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){b.splice(D,1);break t}}_=v.createElement(f),qn(_,f,u),v.head.appendChild(_);break;case"meta":if(b=KT("meta","content",v).get(f+(u.content||""))){for(D=0;D<b.length;D++)if(_=b[D],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){b.splice(D,1);break t}}_=v.createElement(f),qn(_,f,u),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[Lt]=r,Gt(_),f=_}r.stateNode=f}else JT(v,r.type,r.stateNode);else r.stateNode=jT(v,f,r.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?JT(v,r.type,r.stateNode):jT(v,f,r.memoizedProps)):f===null&&r.stateNode!==null&&eg(r,r.memoizedProps,u.memoizedProps)}break;case 27:Ei(o,r),Ti(r),f&512&&(pn||u===null||Lr(u,u.return)),u!==null&&f&4&&eg(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Ei(o,r),Ti(r),f&512&&(pn||u===null||Lr(u,u.return)),r.flags&32){v=r.stateNode;try{Qi(v,"")}catch(Ae){bt(r,r.return,Ae)}}f&4&&r.stateNode!=null&&(v=r.memoizedProps,eg(r,v,u!==null?u.memoizedProps:v)),f&1024&&(ig=!0);break;case 6:if(Ei(o,r),Ti(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(Ae){bt(r,r.return,Ae)}}break;case 3:if(Ed=null,v=yr,yr=vd(o.containerInfo),Ei(o,r),yr=v,Ti(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{fl(o.containerInfo)}catch(Ae){bt(r,r.return,Ae)}ig&&(ig=!1,JE(r));break;case 4:f=yr,yr=vd(r.stateNode.containerInfo),Ei(o,r),Ti(r),yr=f;break;case 12:Ei(o,r),Ti(r);break;case 31:Ei(o,r),Ti(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,rd(r,f)));break;case 13:Ei(o,r),Ti(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(od=ct()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,rd(r,f)));break;case 22:v=r.memoizedState!==null;var q=u!==null&&u.memoizedState!==null,Q=as,re=pn;if(as=Q||v,pn=re||q,Ei(o,r),pn=re,as=Q,Ti(r),f&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||q||as||pn||sa(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){q=u=o;try{if(_=q.stateNode,v)b=_.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{D=q.stateNode;var ae=q.memoizedProps.style,Z=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;D.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ae){bt(q,q.return,Ae)}}}else if(o.tag===6){if(u===null){q=o;try{q.stateNode.nodeValue=v?"":q.memoizedProps}catch(Ae){bt(q,q.return,Ae)}}}else if(o.tag===18){if(u===null){q=o;try{var ne=q.stateNode;v?OT(ne,!0):OT(q.stateNode,!1)}catch(Ae){bt(q,q.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,rd(r,u))));break;case 19:Ei(o,r),Ti(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,rd(r,f)));break;case 30:break;case 21:break;default:Ei(o,r),Ti(r)}}function Ti(r){var o=r.flags;if(o&2){try{for(var u,f=r.return;f!==null;){if(FE(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,_=tg(r);id(r,_,v);break;case 5:var b=u.stateNode;u.flags&32&&(Qi(b,""),u.flags&=-33);var D=tg(r);id(r,D,b);break;case 3:case 4:var q=u.stateNode.containerInfo,Q=tg(r);ng(r,Q,q);break;default:throw Error(i(161))}}catch(re){bt(r,r.return,re)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function JE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;JE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function us(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)zE(r,o.alternate,o),o=o.sibling}function sa(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Js(4,o,o.return),sa(o);break;case 1:Lr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&OE(o,o.return,u),sa(o);break;case 27:zu(o.stateNode);case 26:case 5:Lr(o,o.return),sa(o);break;case 22:o.memoizedState===null&&sa(o);break;case 30:sa(o);break;default:sa(o)}r=r.sibling}}function cs(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=r,_=o,b=_.flags;switch(_.tag){case 0:case 11:case 15:cs(v,_,u),Mu(4,_);break;case 1:if(cs(v,_,u),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){bt(f,f.return,Q)}if(f=_,v=f.updateQueue,v!==null){var D=f.stateNode;try{var q=v.shared.hiddenCallbacks;if(q!==null)for(v.shared.hiddenCallbacks=null,v=0;v<q.length;v++)b_(q[v],D)}catch(Q){bt(f,f.return,Q)}}u&&b&64&&LE(_),ku(_,_.return);break;case 27:BE(_);case 26:case 5:cs(v,_,u),u&&f===null&&b&4&&UE(_),ku(_,_.return);break;case 12:cs(v,_,u);break;case 31:cs(v,_,u),u&&b&4&&$E(v,_);break;case 13:cs(v,_,u),u&&b&4&&jE(v,_);break;case 22:_.memoizedState===null&&cs(v,_,u),ku(_,_.return);break;case 30:break;default:cs(v,_,u)}o=o.sibling}}function rg(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&_u(u))}function sg(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&_u(r))}function vr(r,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)YE(r,o,u,f),o=o.sibling}function YE(r,o,u,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:vr(r,o,u,f),v&2048&&Mu(9,o);break;case 1:vr(r,o,u,f);break;case 3:vr(r,o,u,f),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&_u(r)));break;case 12:if(v&2048){vr(r,o,u,f),r=o.stateNode;try{var _=o.memoizedProps,b=_.id,D=_.onPostCommit;typeof D=="function"&&D(b,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(q){bt(o,o.return,q)}}else vr(r,o,u,f);break;case 31:vr(r,o,u,f);break;case 13:vr(r,o,u,f);break;case 23:break;case 22:_=o.stateNode,b=o.alternate,o.memoizedState!==null?_._visibility&2?vr(r,o,u,f):Pu(r,o):_._visibility&2?vr(r,o,u,f):(_._visibility|=2,el(r,o,u,f,(o.subtreeFlags&10256)!==0||!1)),v&2048&&rg(b,o);break;case 24:vr(r,o,u,f),v&2048&&sg(o.alternate,o);break;default:vr(r,o,u,f)}}function el(r,o,u,f,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,b=o,D=u,q=f,Q=b.flags;switch(b.tag){case 0:case 11:case 15:el(_,b,D,q,v),Mu(8,b);break;case 23:break;case 22:var re=b.stateNode;b.memoizedState!==null?re._visibility&2?el(_,b,D,q,v):Pu(_,b):(re._visibility|=2,el(_,b,D,q,v)),v&&Q&2048&&rg(b.alternate,b);break;case 24:el(_,b,D,q,v),v&&Q&2048&&sg(b.alternate,b);break;default:el(_,b,D,q,v)}o=o.sibling}}function Pu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,f=o,v=f.flags;switch(f.tag){case 22:Pu(u,f),v&2048&&rg(f.alternate,f);break;case 24:Pu(u,f),v&2048&&sg(f.alternate,f);break;default:Pu(u,f)}o=o.sibling}}var Vu=8192;function tl(r,o,u){if(r.subtreeFlags&Vu)for(r=r.child;r!==null;)WE(r,o,u),r=r.sibling}function WE(r,o,u){switch(r.tag){case 26:tl(r,o,u),r.flags&Vu&&r.memoizedState!==null&&nD(u,yr,r.memoizedState,r.memoizedProps);break;case 5:tl(r,o,u);break;case 3:case 4:var f=yr;yr=vd(r.stateNode.containerInfo),tl(r,o,u),yr=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=Vu,Vu=16777216,tl(r,o,u),Vu=f):tl(r,o,u));break;default:tl(r,o,u)}}function QE(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Lu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];kn=f,ZE(f,r)}QE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)XE(r),r=r.sibling}function XE(r){switch(r.tag){case 0:case 11:case 15:Lu(r),r.flags&2048&&Js(9,r,r.return);break;case 3:Lu(r);break;case 12:Lu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,sd(r)):Lu(r);break;default:Lu(r)}}function sd(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];kn=f,ZE(f,r)}QE(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Js(8,o,o.return),sd(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,sd(o));break;default:sd(o)}r=r.sibling}}function ZE(r,o){for(;kn!==null;){var u=kn;switch(u.tag){case 0:case 11:case 15:Js(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:_u(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,kn=f;else e:for(u=r;kn!==null;){f=kn;var v=f.sibling,_=f.return;if(HE(f),f===u){kn=null;break e}if(v!==null){v.return=_,kn=v;break e}kn=_}}}var yN={getCacheForType:function(r){var o=Fn(fn),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return Fn(fn).controller.signal}},vN=typeof WeakMap=="function"?WeakMap:Map,yt=0,Mt=null,Qe=null,et=0,wt=0,Oi=null,Ys=!1,nl=!1,og=!1,fs=0,Xt=0,Ws=0,oa=0,ag=0,Ui=0,il=0,Ou=null,Si=null,lg=!1,od=0,eT=0,ad=1/0,ld=null,Qs=null,An=0,Xs=null,rl=null,ds=0,ug=0,cg=null,tT=null,Uu=0,fg=null;function Fi(){return(yt&2)!==0&&et!==0?et&-et:ee.T!==null?yg():si()}function nT(){if(Ui===0)if((et&536870912)===0||st){var r=We;We<<=1,(We&3932160)===0&&(We=262144),Ui=r}else Ui=536870912;return r=Vi.current,r!==null&&(r.flags|=32),Ui}function Ai(r,o,u){(r===Mt&&(wt===2||wt===9)||r.cancelPendingCommit!==null)&&(sl(r,0),Zs(r,et,Ui,!1)),kt(r,u),((yt&2)===0||r!==Mt)&&(r===Mt&&((yt&2)===0&&(oa|=u),Xt===4&&Zs(r,et,Ui,!1)),Or(r))}function iT(r,o,u){if((yt&6)!==0)throw Error(i(327));var f=!u&&(o&127)===0&&(o&r.expiredLanes)===0||je(r,o),v=f?TN(r,o):hg(r,o,!0),_=f;do{if(v===0){nl&&!f&&Zs(r,o,0,!1);break}else{if(u=r.current.alternate,_&&!_N(u)){v=hg(r,o,!1),_=!1;continue}if(v===2){if(_=o,r.errorRecoveryDisabledLanes&_)var b=0;else b=r.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){o=b;e:{var D=r;v=Ou;var q=D.current.memoizedState.isDehydrated;if(q&&(sl(D,b).flags|=256),b=hg(D,b,!1),b!==2){if(og&&!q){D.errorRecoveryDisabledLanes|=_,oa|=_,v=4;break e}_=Si,Si=v,_!==null&&(Si===null?Si=_:Si.push.apply(Si,_))}v=b}if(_=!1,v!==2)continue}}if(v===1){sl(r,0),Zs(r,o,0,!0);break}e:{switch(f=r,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Zs(f,o,Ui,!Ys);break e;case 2:Si=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=od+300-ct(),10<v)){if(Zs(f,o,Ui,!Ys),ke(f,0,!0)!==0)break e;ds=o,f.timeoutHandle=PT(rT.bind(null,f,u,Si,ld,lg,o,Ui,oa,il,Ys,_,"Throttled",-0,0),v);break e}rT(f,u,Si,ld,lg,o,Ui,oa,il,Ys,_,null,-0,0)}}break}while(!0);Or(r)}function rT(r,o,u,f,v,_,b,D,q,Q,re,ae,Z,ne){if(r.timeoutHandle=-1,ae=o.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nn},WE(o,_,ae);var Ae=(_&62914560)===_?od-ct():(_&4194048)===_?eT-ct():0;if(Ae=iD(ae,Ae),Ae!==null){ds=_,r.cancelPendingCommit=Ae(dT.bind(null,r,o,_,u,f,v,b,D,q,re,ae,null,Z,ne)),Zs(r,_,b,!Q);return}}dT(r,o,_,u,f,v,b,D,q)}function _N(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],_=v.getSnapshot;v=v.value;try{if(!ki(_(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Zs(r,o,u,f){o&=~ag,o&=~oa,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var v=o;0<v;){var _=31-Te(v),b=1<<_;f[_]=-1,v&=~b}u!==0&&ri(r,u,o)}function ud(){return(yt&6)===0?(Fu(0),!1):!0}function dg(){if(Qe!==null){if(wt===0)var r=Qe.return;else r=Qe,ts=Qo=null,xm(r),Ya=null,Tu=0,r=Qe;for(;r!==null;)VE(r.alternate,r),r=r.return;Qe=null}}function sl(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,FN(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),ds=0,dg(),Mt=r,Qe=u=Zr(r.current,null),et=o,wt=0,Oi=null,Ys=!1,nl=je(r,o),og=!1,il=Ui=ag=oa=Ws=Xt=0,Si=Ou=null,lg=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var v=31-Te(f),_=1<<v;o|=r[v],f&=~_}return fs=o,Nf(),u}function sT(r,o){He=null,ee.H=Ru,o===Ja||o===Uf?(o=T_(),wt=3):o===gm?(o=T_(),wt=4):wt=o===Gm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Oi=o,Qe===null&&(Xt=1,Xf(r,Zi(o,r.current)))}function oT(){var r=Vi.current;return r===null?!0:(et&4194048)===et?ir===null:(et&62914560)===et||(et&536870912)!==0?r===ir:!1}function aT(){var r=ee.H;return ee.H=Ru,r===null?Ru:r}function lT(){var r=ee.A;return ee.A=yN,r}function cd(){Xt=4,Ys||(et&4194048)!==et&&Vi.current!==null||(nl=!0),(Ws&134217727)===0&&(oa&134217727)===0||Mt===null||Zs(Mt,et,Ui,!1)}function hg(r,o,u){var f=yt;yt|=2;var v=aT(),_=lT();(Mt!==r||et!==o)&&(ld=null,sl(r,o)),o=!1;var b=Xt;e:do try{if(wt!==0&&Qe!==null){var D=Qe,q=Oi;switch(wt){case 8:dg(),b=6;break e;case 3:case 2:case 9:case 6:Vi.current===null&&(o=!0);var Q=wt;if(wt=0,Oi=null,ol(r,D,q,Q),u&&nl){b=0;break e}break;default:Q=wt,wt=0,Oi=null,ol(r,D,q,Q)}}EN(),b=Xt;break}catch(re){sT(r,re)}while(!0);return o&&r.shellSuspendCounter++,ts=Qo=null,yt=f,ee.H=v,ee.A=_,Qe===null&&(Mt=null,et=0,Nf()),b}function EN(){for(;Qe!==null;)uT(Qe)}function TN(r,o){var u=yt;yt|=2;var f=aT(),v=lT();Mt!==r||et!==o?(ld=null,ad=ct()+500,sl(r,o)):nl=je(r,o);e:do try{if(wt!==0&&Qe!==null){o=Qe;var _=Oi;t:switch(wt){case 1:wt=0,Oi=null,ol(r,o,_,1);break;case 2:case 9:if(__(_)){wt=0,Oi=null,cT(o);break}o=function(){wt!==2&&wt!==9||Mt!==r||(wt=7),Or(r)},_.then(o,o);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:__(_)?(wt=0,Oi=null,cT(o)):(wt=0,Oi=null,ol(r,o,_,7));break;case 5:var b=null;switch(Qe.tag){case 26:b=Qe.memoizedState;case 5:case 27:var D=Qe;if(b?YT(b):D.stateNode.complete){wt=0,Oi=null;var q=D.sibling;if(q!==null)Qe=q;else{var Q=D.return;Q!==null?(Qe=Q,fd(Q)):Qe=null}break t}}wt=0,Oi=null,ol(r,o,_,5);break;case 6:wt=0,Oi=null,ol(r,o,_,6);break;case 8:dg(),Xt=6;break e;default:throw Error(i(462))}}SN();break}catch(re){sT(r,re)}while(!0);return ts=Qo=null,ee.H=f,ee.A=v,yt=u,Qe!==null?0:(Mt=null,et=0,Nf(),Xt)}function SN(){for(;Qe!==null&&!fr();)uT(Qe)}function uT(r){var o=kE(r.alternate,r,fs);r.memoizedProps=r.pendingProps,o===null?fd(r):Qe=o}function cT(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=IE(u,o,o.pendingProps,o.type,void 0,et);break;case 11:o=IE(u,o,o.pendingProps,o.type.render,o.ref,et);break;case 5:xm(o);default:VE(u,o),o=Qe=l_(o,fs),o=kE(u,o,fs)}r.memoizedProps=r.pendingProps,o===null?fd(r):Qe=o}function ol(r,o,u,f){ts=Qo=null,xm(o),Ya=null,Tu=0;var v=o.return;try{if(cN(r,v,o,u,et)){Xt=1,Xf(r,Zi(u,r.current)),Qe=null;return}}catch(_){if(v!==null)throw Qe=v,_;Xt=1,Xf(r,Zi(u,r.current)),Qe=null;return}o.flags&32768?(st||f===1?r=!0:nl||(et&536870912)!==0?r=!1:(Ys=r=!0,(f===2||f===9||f===3||f===6)&&(f=Vi.current,f!==null&&f.tag===13&&(f.flags|=16384))),fT(o,r)):fd(o)}function fd(r){var o=r;do{if((o.flags&32768)!==0){fT(o,Ys);return}r=o.return;var u=hN(o.alternate,o,fs);if(u!==null){Qe=u;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=r}while(o!==null);Xt===0&&(Xt=5)}function fT(r,o){do{var u=pN(r.alternate,r);if(u!==null){u.flags&=32767,Qe=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Qe=r;return}Qe=r=u}while(r!==null);Xt=6,Qe=null}function dT(r,o,u,f,v,_,b,D,q){r.cancelPendingCommit=null;do dd();while(An!==0);if((yt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=tm,At(r,u,_,b,D,q),r===Mt&&(Qe=Mt=null,et=0),rl=o,Xs=r,ds=u,ug=_,cg=v,tT=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,CN(Yt,function(){return yT(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=ee.T,ee.T=null,v=ce.p,ce.p=2,b=yt,yt|=4;try{mN(r,o,u)}finally{yt=b,ce.p=v,ee.T=f}}An=1,hT(),pT(),mT()}}function hT(){if(An===1){An=0;var r=Xs,o=rl,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var f=ce.p;ce.p=2;var v=yt;yt|=4;try{KE(o,r);var _=bg,b=Z0(r.containerInfo),D=_.focusedElem,q=_.selectionRange;if(b!==D&&D&&D.ownerDocument&&X0(D.ownerDocument.documentElement,D)){if(q!==null&&Wp(D)){var Q=q.start,re=q.end;if(re===void 0&&(re=Q),"selectionStart"in D)D.selectionStart=Q,D.selectionEnd=Math.min(re,D.value.length);else{var ae=D.ownerDocument||document,Z=ae&&ae.defaultView||window;if(Z.getSelection){var ne=Z.getSelection(),Ae=D.textContent.length,Pe=Math.min(q.start,Ae),Nt=q.end===void 0?Pe:Math.min(q.end,Ae);!ne.extend&&Pe>Nt&&(b=Nt,Nt=Pe,Pe=b);var J=Q0(D,Pe),$=Q0(D,Nt);if(J&&$&&(ne.rangeCount!==1||ne.anchorNode!==J.node||ne.anchorOffset!==J.offset||ne.focusNode!==$.node||ne.focusOffset!==$.offset)){var W=ae.createRange();W.setStart(J.node,J.offset),ne.removeAllRanges(),Pe>Nt?(ne.addRange(W),ne.extend($.node,$.offset)):(W.setEnd($.node,$.offset),ne.addRange(W))}}}}for(ae=[],ne=D;ne=ne.parentNode;)ne.nodeType===1&&ae.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ae.length;D++){var se=ae[D];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}wd=!!wg,bg=wg=null}finally{yt=v,ce.p=f,ee.T=u}}r.current=o,An=2}}function pT(){if(An===2){An=0;var r=Xs,o=rl,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var f=ce.p;ce.p=2;var v=yt;yt|=4;try{zE(r,o.alternate,o)}finally{yt=v,ce.p=f,ee.T=u}}An=3}}function mT(){if(An===4||An===3){An=0,Hi();var r=Xs,o=rl,u=ds,f=tT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?An=5:(An=0,rl=Xs=null,gT(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Qs=null),On(u),o=o.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Rn,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=ee.T,v=ce.p,ce.p=2,ee.T=null;try{for(var _=r.onRecoverableError,b=0;b<f.length;b++){var D=f[b];_(D.value,{componentStack:D.stack})}}finally{ee.T=o,ce.p=v}}(ds&3)!==0&&dd(),Or(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===fg?Uu++:(Uu=0,fg=r):Uu=0,Fu(0)}}function gT(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,_u(o)))}function dd(){return hT(),pT(),mT(),yT()}function yT(){if(An!==5)return!1;var r=Xs,o=ug;ug=0;var u=On(ds),f=ee.T,v=ce.p;try{ce.p=32>u?32:u,ee.T=null,u=cg,cg=null;var _=Xs,b=ds;if(An=0,rl=Xs=null,ds=0,(yt&6)!==0)throw Error(i(331));var D=yt;if(yt|=4,XE(_.current),YE(_,_.current,b,u),yt=D,Fu(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Rn,_)}catch{}return!0}finally{ce.p=v,ee.T=f,gT(r,o)}}function vT(r,o,u){o=Zi(u,o),o=Hm(r.stateNode,o,2),r=$s(r,o,2),r!==null&&(kt(r,2),Or(r))}function bt(r,o,u){if(r.tag===3)vT(r,r,u);else for(;o!==null;){if(o.tag===3){vT(o,r,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Qs===null||!Qs.has(f))){r=Zi(u,r),u=_E(2),f=$s(o,u,2),f!==null&&(EE(u,f,o,r),kt(f,2),Or(f));break}}o=o.return}}function pg(r,o,u){var f=r.pingCache;if(f===null){f=r.pingCache=new vN;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(u)||(og=!0,v.add(u),r=AN.bind(null,r,o,u),o.then(r,r))}function AN(r,o,u){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Mt===r&&(et&u)===u&&(Xt===4||Xt===3&&(et&62914560)===et&&300>ct()-od?(yt&2)===0&&sl(r,0):ag|=u,il===et&&(il=0)),Or(r)}function _T(r,o){o===0&&(o=Gi()),r=Jo(r,o),r!==null&&(kt(r,o),Or(r))}function wN(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),_T(r,u)}function bN(r,o){var u=0;switch(r.tag){case 31:case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),_T(r,u)}function CN(r,o){return ni(r,o)}var hd=null,al=null,mg=!1,pd=!1,gg=!1,eo=0;function Or(r){r!==al&&r.next===null&&(al===null?hd=al=r:al=al.next=r),pd=!0,mg||(mg=!0,xN())}function Fu(r,o){if(!gg&&pd){gg=!0;do for(var u=!1,f=hd;f!==null;){if(r!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var b=f.suspendedLanes,D=f.pingedLanes;_=(1<<31-Te(42|r)+1)-1,_&=v&~(b&~D),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,AT(f,_))}else _=et,_=ke(f,f===Mt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||je(f,_)||(u=!0,AT(f,_));f=f.next}while(u);gg=!1}}function IN(){ET()}function ET(){pd=mg=!1;var r=0;eo!==0&&UN()&&(r=eo);for(var o=ct(),u=null,f=hd;f!==null;){var v=f.next,_=TT(f,o);_===0?(f.next=null,u===null?hd=v:u.next=v,v===null&&(al=u)):(u=f,(r!==0||(_&3)!==0)&&(pd=!0)),f=v}An!==0&&An!==5||Fu(r),eo!==0&&(eo=0)}function TT(r,o){for(var u=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var b=31-Te(_),D=1<<b,q=v[b];q===-1?((D&u)===0||(D&f)!==0)&&(v[b]=Sn(D,o)):q<=o&&(r.expiredLanes|=D),_&=~D}if(o=Mt,u=et,u=ke(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===o&&(wt===2||wt===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&ii(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||je(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(f!==null&&ii(f),On(u)){case 2:case 8:u=Ct;break;case 32:u=Yt;break;case 268435456:u=ft;break;default:u=Yt}return f=ST.bind(null,r),u=ni(u,f),r.callbackPriority=o,r.callbackNode=u,o}return f!==null&&f!==null&&ii(f),r.callbackPriority=2,r.callbackNode=null,2}function ST(r,o){if(An!==0&&An!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(dd()&&r.callbackNode!==u)return null;var f=et;return f=ke(r,r===Mt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(iT(r,f,o),TT(r,ct()),r.callbackNode!=null&&r.callbackNode===u?ST.bind(null,r):null)}function AT(r,o){if(dd())return null;iT(r,o,!0)}function xN(){BN(function(){(yt&6)!==0?ni(ze,IN):ET()})}function yg(){if(eo===0){var r=ja;r===0&&(r=Ye,Ye<<=1,(Ye&261888)===0&&(Ye=256)),eo=r}return eo}function wT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Dr(""+r)}function bT(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function RN(r,o,u,f,v){if(o==="submit"&&u&&u.stateNode===v){var _=wT((v[sn]||null).action),b=f.submitter;b&&(o=(o=b[sn]||null)?wT(o.formAction):b.getAttribute("formAction"),o!==null&&(_=o,b=null));var D=new qo("action","action",null,f,v);r.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(eo!==0){var q=b?bT(v,b):new FormData(v);Om(u,{pending:!0,data:q,method:v.method,action:_},null,q)}}else typeof _=="function"&&(D.preventDefault(),q=b?bT(v,b):new FormData(v),Om(u,{pending:!0,data:q,method:v.method,action:_},_,q))},currentTarget:v}]})}}for(var vg=0;vg<em.length;vg++){var _g=em[vg],NN=_g.toLowerCase(),DN=_g[0].toUpperCase()+_g.slice(1);gr(NN,"on"+DN)}gr(n_,"onAnimationEnd"),gr(i_,"onAnimationIteration"),gr(r_,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(K1,"onTransitionRun"),gr(J1,"onTransitionStart"),gr(Y1,"onTransitionCancel"),gr(s_,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bu));function CT(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],v=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var b=f.length-1;0<=b;b--){var D=f[b],q=D.instance,Q=D.currentTarget;if(D=D.listener,q!==_&&v.isPropagationStopped())break e;_=D,v.currentTarget=Q;try{_(v)}catch(re){Rf(re)}v.currentTarget=null,_=q}else for(b=0;b<f.length;b++){if(D=f[b],q=D.instance,Q=D.currentTarget,D=D.listener,q!==_&&v.isPropagationStopped())break e;_=D,v.currentTarget=Q;try{_(v)}catch(re){Rf(re)}v.currentTarget=null,_=q}}}}function Xe(r,o){var u=o[ji];u===void 0&&(u=o[ji]=new Set);var f=r+"__bubble";u.has(f)||(IT(o,r,2,!1),u.add(f))}function Eg(r,o,u){var f=0;o&&(f|=4),IT(u,r,f,o)}var md="_reactListening"+Math.random().toString(36).slice(2);function Tg(r){if(!r[md]){r[md]=!0,hr.forEach(function(u){u!=="selectionchange"&&(MN.has(u)||Eg(u,!1,r),Eg(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[md]||(o[md]=!0,Eg("selectionchange",!1,o))}}function IT(r,o,u,f){switch(nS(o)){case 2:var v=oD;break;case 8:v=aD;break;default:v=Lg}u=v.bind(null,o,u,r),v=void 0,!lu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function Sg(r,o,u,f,v){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var D=f.stateNode.containerInfo;if(D===v)break;if(b===4)for(b=f.return;b!==null;){var q=b.tag;if((q===3||q===4)&&b.stateNode.containerInfo===v)return;b=b.return}for(;D!==null;){if(b=gi(D),b===null)return;if(q=b.tag,q===5||q===6||q===26||q===27){f=_=b;continue e}D=D.parentNode}}f=f.return}hf(function(){var Q=_,re=ka(u),ae=[];e:{var Z=o_.get(r);if(Z!==void 0){var ne=qo,Ae=r;switch(r){case"keypress":if(Bo(u)===0)break e;case"keydown":case"keyup":ne=Sf;break;case"focusin":Ae="focus",ne=Vs;break;case"focusout":Ae="blur",ne=Vs;break;case"beforeblur":case"afterblur":ne=Vs;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=mf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=wf;break;case n_:case i_:case r_:ne=La;break;case s_:ne=Oa;break;case"scroll":case"scrollend":ne=pf;break;case"wheel":ne=Cf;break;case"copy":case"cut":case"paste":ne=vf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=hu;break;case"toggle":case"beforetoggle":ne=Os}var Pe=(o&4)!==0,Nt=!Pe&&(r==="scroll"||r==="scrollend"),J=Pe?Z!==null?Z+"Capture":null:Z;Pe=[];for(var $=Q,W;$!==null;){var se=$;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||J===null||(se=yi($,J),se!=null&&Pe.push(qu($,se,W))),Nt)break;$=$.return}0<Pe.length&&(Z=new ne(Z,Ae,null,u,re),ae.push({event:Z,listeners:Pe}))}}if((o&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",Z&&u!==Ma&&(Ae=u.relatedTarget||u.fromElement)&&(gi(Ae)||Ae[Ri]))break e;if((ne||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,ne?(Ae=u.relatedTarget||u.toElement,ne=Q,Ae=Ae?gi(Ae):null,Ae!==null&&(Nt=a(Ae),Pe=Ae.tag,Ae!==Nt||Pe!==5&&Pe!==27&&Pe!==6)&&(Ae=null)):(ne=null,Ae=Q),ne!==Ae)){if(Pe=mf,se="onMouseLeave",J="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=hu,se="onPointerLeave",J="onPointerEnter",$="pointer"),Nt=ne==null?Z:Rr(ne),W=Ae==null?Z:Rr(Ae),Z=new Pe(se,$+"leave",ne,u,re),Z.target=Nt,Z.relatedTarget=W,se=null,gi(re)===Q&&(Pe=new Pe(J,$+"enter",Ae,u,re),Pe.target=W,Pe.relatedTarget=Nt,se=Pe),Nt=se,ne&&Ae)t:{for(Pe=kN,J=ne,$=Ae,W=0,se=J;se;se=Pe(se))W++;se=0;for(var Re=$;Re;Re=Pe(Re))se++;for(;0<W-se;)J=Pe(J),W--;for(;0<se-W;)$=Pe($),se--;for(;W--;){if(J===$||$!==null&&J===$.alternate){Pe=J;break t}J=Pe(J),$=Pe($)}Pe=null}else Pe=null;ne!==null&&xT(ae,Z,ne,Pe,!1),Ae!==null&&Nt!==null&&xT(ae,Nt,Ae,Pe,!0)}}e:{if(Z=Q?Rr(Q):window,ne=Z.nodeName&&Z.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Z.type==="file")var ht=$0;else if(vi(Z))if(j0)ht=G1;else{ht=z1;var Ce=q1}else ne=Z.nodeName,!ne||ne.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&ou(Q.elementType)&&(ht=$0):ht=H1;if(ht&&(ht=ht(r,Q))){$o(ae,ht,u,re);break e}Ce&&Ce(r,Z,Q),r==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&Da(Z,"number",Z.value)}switch(Ce=Q?Rr(Q):window,r){case"focusin":(vi(Ce)||Ce.contentEditable==="true")&&(Ua=Ce,Qp=Q,gu=null);break;case"focusout":gu=Qp=Ua=null;break;case"mousedown":Xp=!0;break;case"contextmenu":case"mouseup":case"dragend":Xp=!1,e_(ae,u,re);break;case"selectionchange":if(j1)break;case"keydown":case"keyup":e_(ae,u,re)}var Ge;if(S)e:{switch(r){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Ke?_t(r,u)&&(tt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(tt="onCompositionStart");tt&&(Y&&u.locale!=="ko"&&(Ke||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Ke&&(Ge=Ds()):(Mi=re,Pa="value"in Mi?Mi.value:Mi.textContent,Ke=!0)),Ce=gd(Q,tt),0<Ce.length&&(tt=new cu(tt,r,null,u,re),ae.push({event:tt,listeners:Ce}),Ge?tt.data=Ge:(Ge=cn(u),Ge!==null&&(tt.data=Ge)))),(Ge=P?Dn(r,u):Mn(r,u))&&(tt=gd(Q,"onBeforeInput"),0<tt.length&&(Ce=new cu("onBeforeInput","beforeinput",null,u,re),ae.push({event:Ce,listeners:tt}),Ce.data=Ge)),RN(ae,r,Q,u,re)}CT(ae,o)})}function qu(r,o,u){return{instance:r,listener:o,currentTarget:u}}function gd(r,o){for(var u=o+"Capture",f=[];r!==null;){var v=r,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=yi(r,u),v!=null&&f.unshift(qu(r,v,_)),v=yi(r,o),v!=null&&f.push(qu(r,v,_))),r.tag===3)return f;r=r.return}return[]}function kN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function xT(r,o,u,f,v){for(var _=o._reactName,b=[];u!==null&&u!==f;){var D=u,q=D.alternate,Q=D.stateNode;if(D=D.tag,q!==null&&q===f)break;D!==5&&D!==26&&D!==27||Q===null||(q=Q,v?(Q=yi(u,_),Q!=null&&b.unshift(qu(u,Q,q))):v||(Q=yi(u,_),Q!=null&&b.push(qu(u,Q,q)))),u=u.return}b.length!==0&&r.push({event:o,listeners:b})}var PN=/\r\n?/g,VN=/\u0000|\uFFFD/g;function RT(r){return(typeof r=="string"?r:""+r).replace(PN,`
`).replace(VN,"")}function NT(r,o){return o=RT(o),RT(r)===o}function Rt(r,o,u,f,v,_){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Qi(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Qi(r,""+f);break;case"className":xs(r,"class",f);break;case"tabIndex":xs(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":xs(r,u,f);break;case"style":ff(r,f,_);break;case"data":if(o!=="object"){xs(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Dr(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&Rt(r,o,"name",v.name,v,null),Rt(r,o,"formEncType",v.formEncType,v,null),Rt(r,o,"formMethod",v.formMethod,v,null),Rt(r,o,"formTarget",v.formTarget,v,null)):(Rt(r,o,"encType",v.encType,v,null),Rt(r,o,"method",v.method,v,null),Rt(r,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Dr(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=Nn);break;case"onScroll":f!=null&&Xe("scroll",r);break;case"onScrollEnd":f!=null&&Xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=Dr(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Xe("beforetoggle",r),Xe("toggle",r),Is(r,"popover",f);break;case"xlinkActuate":Wi(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Wi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Wi(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Wi(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Wi(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Wi(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Wi(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Wi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Wi(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Is(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=$p.get(u)||u,Is(r,u,f))}}function Ag(r,o,u,f,v,_){switch(u){case"style":ff(r,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?Qi(r,f):(typeof f=="number"||typeof f=="bigint")&&Qi(r,""+f);break;case"onScroll":f!=null&&Xe("scroll",r);break;case"onScrollEnd":f!=null&&Xe("scrollend",r);break;case"onClick":f!=null&&(r.onclick=Nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),_=r[sn]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(o,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,f,v);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):Is(r,u,f)}}}function qn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",r),Xe("load",r);var f=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var b=u[_];if(b!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Rt(r,o,_,b,u,null)}}v&&Rt(r,o,"srcSet",u.srcSet,u,null),f&&Rt(r,o,"src",u.src,u,null);return;case"input":Xe("invalid",r);var D=_=b=v=null,q=null,Q=null;for(f in u)if(u.hasOwnProperty(f)){var re=u[f];if(re!=null)switch(f){case"name":v=re;break;case"type":b=re;break;case"checked":q=re;break;case"defaultChecked":Q=re;break;case"value":_=re;break;case"defaultValue":D=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:Rt(r,o,f,re,u,null)}}Uo(r,_,D,q,Q,b,v,!1);return;case"select":Xe("invalid",r),f=b=_=null;for(v in u)if(u.hasOwnProperty(v)&&(D=u[v],D!=null))switch(v){case"value":_=D;break;case"defaultValue":b=D;break;case"multiple":f=D;default:Rt(r,o,v,D,u,null)}o=_,u=b,r.multiple=!!f,o!=null?dt(r,!!f,o,!1):u!=null&&dt(r,!!f,u,!0);return;case"textarea":Xe("invalid",r),_=v=f=null;for(b in u)if(u.hasOwnProperty(b)&&(D=u[b],D!=null))switch(b){case"value":f=D;break;case"defaultValue":v=D;break;case"children":_=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:Rt(r,o,b,D,u,null)}Ns(r,f,v,_);return;case"option":for(q in u)if(u.hasOwnProperty(q)&&(f=u[q],f!=null))switch(q){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Rt(r,o,q,f,u,null)}return;case"dialog":Xe("beforetoggle",r),Xe("toggle",r),Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":Xe("load",r);break;case"video":case"audio":for(f=0;f<Bu.length;f++)Xe(Bu[f],r);break;case"image":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"embed":case"source":case"link":Xe("error",r),Xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(f=u[Q],f!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Rt(r,o,Q,f,u,null)}return;default:if(ou(o)){for(re in u)u.hasOwnProperty(re)&&(f=u[re],f!==void 0&&Ag(r,o,re,f,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(f=u[D],f!=null&&Rt(r,o,D,f,u,null))}function LN(r,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,b=null,D=null,q=null,Q=null,re=null;for(ne in u){var ae=u[ne];if(u.hasOwnProperty(ne)&&ae!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":q=ae;default:f.hasOwnProperty(ne)||Rt(r,o,ne,null,f,ae)}}for(var Z in f){var ne=f[Z];if(ae=u[Z],f.hasOwnProperty(Z)&&(ne!=null||ae!=null))switch(Z){case"type":_=ne;break;case"name":v=ne;break;case"checked":Q=ne;break;case"defaultChecked":re=ne;break;case"value":b=ne;break;case"defaultValue":D=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ne!==ae&&Rt(r,o,Z,ne,f,ae)}}Rs(r,b,D,q,Q,re,_,v);return;case"select":ne=b=D=Z=null;for(_ in u)if(q=u[_],u.hasOwnProperty(_)&&q!=null)switch(_){case"value":break;case"multiple":ne=q;default:f.hasOwnProperty(_)||Rt(r,o,_,null,f,q)}for(v in f)if(_=f[v],q=u[v],f.hasOwnProperty(v)&&(_!=null||q!=null))switch(v){case"value":Z=_;break;case"defaultValue":D=_;break;case"multiple":b=_;default:_!==q&&Rt(r,o,v,_,f,q)}o=D,u=b,f=ne,Z!=null?dt(r,!!u,Z,!1):!!f!=!!u&&(o!=null?dt(r,!!u,o,!0):dt(r,!!u,u?[]:"",!1));return;case"textarea":ne=Z=null;for(D in u)if(v=u[D],u.hasOwnProperty(D)&&v!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Rt(r,o,D,null,f,v)}for(b in f)if(v=f[b],_=u[b],f.hasOwnProperty(b)&&(v!=null||_!=null))switch(b){case"value":Z=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&Rt(r,o,b,v,f,_)}Fo(r,Z,ne);return;case"option":for(var Ae in u)if(Z=u[Ae],u.hasOwnProperty(Ae)&&Z!=null&&!f.hasOwnProperty(Ae))switch(Ae){case"selected":r.selected=!1;break;default:Rt(r,o,Ae,null,f,Z)}for(q in f)if(Z=f[q],ne=u[q],f.hasOwnProperty(q)&&Z!==ne&&(Z!=null||ne!=null))switch(q){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Rt(r,o,q,Z,f,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in u)Z=u[Pe],u.hasOwnProperty(Pe)&&Z!=null&&!f.hasOwnProperty(Pe)&&Rt(r,o,Pe,null,f,Z);for(Q in f)if(Z=f[Q],ne=u[Q],f.hasOwnProperty(Q)&&Z!==ne&&(Z!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Rt(r,o,Q,Z,f,ne)}return;default:if(ou(o)){for(var Nt in u)Z=u[Nt],u.hasOwnProperty(Nt)&&Z!==void 0&&!f.hasOwnProperty(Nt)&&Ag(r,o,Nt,void 0,f,Z);for(re in f)Z=f[re],ne=u[re],!f.hasOwnProperty(re)||Z===ne||Z===void 0&&ne===void 0||Ag(r,o,re,Z,f,ne);return}}for(var J in u)Z=u[J],u.hasOwnProperty(J)&&Z!=null&&!f.hasOwnProperty(J)&&Rt(r,o,J,null,f,Z);for(ae in f)Z=f[ae],ne=u[ae],!f.hasOwnProperty(ae)||Z===ne||Z==null&&ne==null||Rt(r,o,ae,Z,f,ne)}function DT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ON(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var v=u[f],_=v.transferSize,b=v.initiatorType,D=v.duration;if(_&&D&&DT(b)){for(b=0,D=v.responseEnd,f+=1;f<u.length;f++){var q=u[f],Q=q.startTime;if(Q>D)break;var re=q.transferSize,ae=q.initiatorType;re&&DT(ae)&&(q=q.responseEnd,b+=re*(q<D?1:(D-Q)/(q-Q)))}if(--f,o+=8*(_+b)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var wg=null,bg=null;function yd(r){return r.nodeType===9?r:r.ownerDocument}function MT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Cg(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ig=null;function UN(){var r=window.event;return r&&r.type==="popstate"?r===Ig?!1:(Ig=r,!0):(Ig=null,!1)}var PT=typeof setTimeout=="function"?setTimeout:void 0,FN=typeof clearTimeout=="function"?clearTimeout:void 0,VT=typeof Promise=="function"?Promise:void 0,BN=typeof queueMicrotask=="function"?queueMicrotask:typeof VT<"u"?function(r){return VT.resolve(null).then(r).catch(qN)}:PT;function qN(r){setTimeout(function(){throw r})}function to(r){return r==="head"}function LT(r,o){var u=o,f=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(f===0){r.removeChild(v),fl(o);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")zu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,zu(u);for(var _=u.firstChild;_;){var b=_.nextSibling,D=_.nodeName;_[Ki]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=b}}else u==="body"&&zu(r.ownerDocument.body);u=v}while(u);fl(o)}function OT(r,o){var u=r;r=0;do{var f=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=f}while(u)}function xg(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":xg(u),Ji(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function zN(r,o,u,f){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Ki])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=rr(r.nextSibling),r===null)break}return null}function HN(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=rr(r.nextSibling),r===null))return null;return r}function UT(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=rr(r.nextSibling),r===null))return null;return r}function Rg(r){return r.data==="$?"||r.data==="$~"}function Ng(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function GN(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function rr(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Dg=null;function FT(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return rr(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function BT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function qT(r,o,u){switch(o=yd(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function zu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Ji(r)}var sr=new Map,zT=new Set;function vd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var hs=ce.d;ce.d={f:$N,r:jN,D:KN,C:JN,L:YN,m:WN,X:XN,S:QN,M:ZN};function $N(){var r=hs.f(),o=ud();return r||o}function jN(r){var o=Yi(r);o!==null&&o.tag===5&&o.type==="form"?sE(o):hs.r(r)}var ll=typeof document>"u"?null:document;function HT(r,o,u){var f=ll;if(f&&typeof o=="string"&&o){var v=Wt(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),zT.has(v)||(zT.add(v),r={rel:r,crossOrigin:u,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),qn(o,"link",r),Gt(o),f.head.appendChild(o)))}}function KN(r){hs.D(r),HT("dns-prefetch",r,null)}function JN(r,o){hs.C(r,o),HT("preconnect",r,o)}function YN(r,o,u){hs.L(r,o,u);var f=ll;if(f&&r&&o){var v='link[rel="preload"][as="'+Wt(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Wt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Wt(u.imageSizes)+'"]')):v+='[href="'+Wt(r)+'"]';var _=v;switch(o){case"style":_=ul(r);break;case"script":_=cl(r)}sr.has(_)||(r=E({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),sr.set(_,r),f.querySelector(v)!==null||o==="style"&&f.querySelector(Hu(_))||o==="script"&&f.querySelector(Gu(_))||(o=f.createElement("link"),qn(o,"link",r),Gt(o),f.head.appendChild(o)))}}function WN(r,o){hs.m(r,o);var u=ll;if(u&&r){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Wt(f)+'"][href="'+Wt(r)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=cl(r)}if(!sr.has(_)&&(r=E({rel:"modulepreload",href:r},o),sr.set(_,r),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Gu(_)))return}f=u.createElement("link"),qn(f,"link",r),Gt(f),u.head.appendChild(f)}}}function QN(r,o,u){hs.S(r,o,u);var f=ll;if(f&&r){var v=oi(f).hoistableStyles,_=ul(r);o=o||"default";var b=v.get(_);if(!b){var D={loading:0,preload:null};if(b=f.querySelector(Hu(_)))D.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},u),(u=sr.get(_))&&Mg(r,u);var q=b=f.createElement("link");Gt(q),qn(q,"link",r),q._p=new Promise(function(Q,re){q.onload=Q,q.onerror=re}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,_d(b,o,f)}b={type:"stylesheet",instance:b,count:1,state:D},v.set(_,b)}}}function XN(r,o){hs.X(r,o);var u=ll;if(u&&r){var f=oi(u).hoistableScripts,v=cl(r),_=f.get(v);_||(_=u.querySelector(Gu(v)),_||(r=E({src:r,async:!0},o),(o=sr.get(v))&&kg(r,o),_=u.createElement("script"),Gt(_),qn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function ZN(r,o){hs.M(r,o);var u=ll;if(u&&r){var f=oi(u).hoistableScripts,v=cl(r),_=f.get(v);_||(_=u.querySelector(Gu(v)),_||(r=E({src:r,async:!0,type:"module"},o),(o=sr.get(v))&&kg(r,o),_=u.createElement("script"),Gt(_),qn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function GT(r,o,u,f){var v=(v=Me.current)?vd(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ul(u.href),u=oi(v).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ul(u.href);var _=oi(v).hoistableStyles,b=_.get(r);if(b||(v=v.ownerDocument||v,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,b),(_=v.querySelector(Hu(r)))&&!_._p&&(b.instance=_,b.state.loading=5),sr.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},sr.set(r,u),_||eD(v,r,u,b.state))),o&&f===null)throw Error(i(528,""));return b}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=cl(u),u=oi(v).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ul(r){return'href="'+Wt(r)+'"'}function Hu(r){return'link[rel="stylesheet"]['+r+"]"}function $T(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function eD(r,o,u,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),qn(o,"link",u),Gt(o),r.head.appendChild(o))}function cl(r){return'[src="'+Wt(r)+'"]'}function Gu(r){return"script[async]"+r}function jT(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+Wt(u.href)+'"]');if(f)return o.instance=f,Gt(f),f;var v=E({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Gt(f),qn(f,"style",v),_d(f,u.precedence,r),o.instance=f;case"stylesheet":v=ul(u.href);var _=r.querySelector(Hu(v));if(_)return o.state.loading|=4,o.instance=_,Gt(_),_;f=$T(u),(v=sr.get(v))&&Mg(f,v),_=(r.ownerDocument||r).createElement("link"),Gt(_);var b=_;return b._p=new Promise(function(D,q){b.onload=D,b.onerror=q}),qn(_,"link",f),o.state.loading|=4,_d(_,u.precedence,r),o.instance=_;case"script":return _=cl(u.src),(v=r.querySelector(Gu(_)))?(o.instance=v,Gt(v),v):(f=u,(v=sr.get(_))&&(f=E({},u),kg(f,v)),r=r.ownerDocument||r,v=r.createElement("script"),Gt(v),qn(v,"link",f),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,_d(f,u.precedence,r));return o.instance}function _d(r,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,b=0;b<f.length;b++){var D=f[b];if(D.dataset.precedence===o)_=D;else if(_!==v)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Mg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function kg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Ed=null;function KT(r,o,u){if(Ed===null){var f=new Map,v=Ed=new Map;v.set(u,f)}else v=Ed,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var _=u[v];if(!(_[Ki]||_[Lt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var b=_.getAttribute(o)||"";b=r+b;var D=f.get(b);D?D.push(_):f.set(b,[_])}}return f}function JT(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function tD(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function YT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function nD(r,o,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=ul(f.href),_=o.querySelector(Hu(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=Td.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=_,Gt(_);return}_=o.ownerDocument||o,f=$T(f),(v=sr.get(v))&&Mg(f,v),_=_.createElement("link"),Gt(_);var b=_;b._p=new Promise(function(D,q){b.onload=D,b.onerror=q}),qn(_,"link",f),u.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Td.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var Pg=0;function iD(r,o){return r.stylesheets&&r.count===0&&Ad(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var f=setTimeout(function(){if(r.stylesheets&&Ad(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&Pg===0&&(Pg=62500*ON());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ad(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>Pg?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function Td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ad(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Sd=null;function Ad(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Sd=new Map,o.forEach(rD,r),Sd=null,Td.call(r))}function rD(r,o){if(!(o.state.loading&4)){var u=Sd.get(r);if(u)var f=u.get(null);else{u=new Map,Sd.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var b=v[_];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(u.set(b.dataset.precedence,b),f=b)}f&&u.set(null,f)}v=o.instance,b=v.getAttribute("data-precedence"),_=u.get(b)||f,_===f&&u.set(null,v),u.set(b,v),this.count++,f=Td.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var $u={$$typeof:B,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function sD(r,o,u,f,v,_,b,D,q){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.hiddenUpdates=rn(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function WT(r,o,u,f,v,_,b,D,q,Q,re,ae){return r=new sD(r,o,u,b,q,Q,re,ae,D),o=1,_===!0&&(o|=24),_=Pi(3,null,null,o),r.current=_,_.stateNode=r,o=hm(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:o},ym(_),r}function QT(r){return r?(r=qa,r):qa}function XT(r,o,u,f,v,_){v=QT(v),f.context===null?f.context=v:f.pendingContext=v,f=Gs(o),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=$s(r,f,o),u!==null&&(Ai(u,r,o),Au(u,r,o))}function ZT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Vg(r,o){ZT(r,o),(r=r.alternate)&&ZT(r,o)}function eS(r){if(r.tag===13||r.tag===31){var o=Jo(r,67108864);o!==null&&Ai(o,r,67108864),Vg(r,67108864)}}function tS(r){if(r.tag===13||r.tag===31){var o=Fi();o=$i(o);var u=Jo(r,o);u!==null&&Ai(u,r,o),Vg(r,o)}}var wd=!0;function oD(r,o,u,f){var v=ee.T;ee.T=null;var _=ce.p;try{ce.p=2,Lg(r,o,u,f)}finally{ce.p=_,ee.T=v}}function aD(r,o,u,f){var v=ee.T;ee.T=null;var _=ce.p;try{ce.p=8,Lg(r,o,u,f)}finally{ce.p=_,ee.T=v}}function Lg(r,o,u,f){if(wd){var v=Og(f);if(v===null)Sg(r,o,f,bd,u),iS(r,f);else if(uD(v,r,o,u,f))f.stopPropagation();else if(iS(r,f),o&4&&-1<lD.indexOf(r)){for(;v!==null;){var _=Yi(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var b=rt(_.pendingLanes);if(b!==0){var D=_;for(D.pendingLanes|=2,D.entangledLanes|=2;b;){var q=1<<31-Te(b);D.entanglements[1]|=q,b&=~q}Or(_),(yt&6)===0&&(ad=ct()+500,Fu(0))}}break;case 31:case 13:D=Jo(_,2),D!==null&&Ai(D,_,2),ud(),Vg(_,2)}if(_=Og(f),_===null&&Sg(r,o,f,bd,u),_===v)break;v=_}v!==null&&f.stopPropagation()}else Sg(r,o,f,null,u)}}function Og(r){return r=ka(r),Ug(r)}var bd=null;function Ug(r){if(bd=null,r=gi(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return bd=r,null}function nS(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tn()){case ze:return 2;case Ct:return 8;case Yt:case me:return 32;case ft:return 268435456;default:return 32}default:return 32}}var Fg=!1,no=null,io=null,ro=null,ju=new Map,Ku=new Map,so=[],lD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iS(r,o){switch(r){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":io=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":ju.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(o.pointerId)}}function Ju(r,o,u,f,v,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},o!==null&&(o=Yi(o),o!==null&&eS(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function uD(r,o,u,f,v){switch(o){case"focusin":return no=Ju(no,r,o,u,f,v),!0;case"dragenter":return io=Ju(io,r,o,u,f,v),!0;case"mouseover":return ro=Ju(ro,r,o,u,f,v),!0;case"pointerover":var _=v.pointerId;return ju.set(_,Ju(ju.get(_)||null,r,o,u,f,v)),!0;case"gotpointercapture":return _=v.pointerId,Ku.set(_,Ju(Ku.get(_)||null,r,o,u,f,v)),!0}return!1}function rS(r){var o=gi(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,Kr(r.priority,function(){tS(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,Kr(r.priority,function(){tS(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Cd(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Og(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Ma=f,u.target.dispatchEvent(f),Ma=null}else return o=Yi(u),o!==null&&eS(o),r.blockedOn=u,!1;o.shift()}return!0}function sS(r,o,u){Cd(r)&&u.delete(o)}function cD(){Fg=!1,no!==null&&Cd(no)&&(no=null),io!==null&&Cd(io)&&(io=null),ro!==null&&Cd(ro)&&(ro=null),ju.forEach(sS),Ku.forEach(sS)}function Id(r,o){r.blockedOn===o&&(r.blockedOn=null,Fg||(Fg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,cD)))}var xd=null;function oS(r){xd!==r&&(xd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){xd===r&&(xd=null);for(var o=0;o<r.length;o+=3){var u=r[o],f=r[o+1],v=r[o+2];if(typeof f!="function"){if(Ug(f||u)===null)continue;break}var _=Yi(u);_!==null&&(r.splice(o,3),o-=3,Om(_,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function fl(r){function o(q){return Id(q,r)}no!==null&&Id(no,r),io!==null&&Id(io,r),ro!==null&&Id(ro,r),ju.forEach(o),Ku.forEach(o);for(var u=0;u<so.length;u++){var f=so[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<so.length&&(u=so[0],u.blockedOn===null);)rS(u),u.blockedOn===null&&so.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],_=u[f+1],b=v[sn]||null;if(typeof _=="function")b||oS(u);else if(b){var D=null;if(_&&_.hasAttribute("formAction")){if(v=_,b=_[sn]||null)D=b.formAction;else if(Ug(v)!==null)continue}else D=b.action;typeof D=="function"?u[f+1]=D:(u.splice(f,3),f-=3),oS(u)}}}function aS(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(b){return v=b})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Bg(r){this._internalRoot=r}Rd.prototype.render=Bg.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,f=Fi();XT(u,f,r,o,null,null)},Rd.prototype.unmount=Bg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;XT(r.current,2,null,r,null,null),ud(),o[Ri]=null}};function Rd(r){this._internalRoot=r}Rd.prototype.unstable_scheduleHydration=function(r){if(r){var o=si();r={blockedOn:null,target:r,priority:o};for(var u=0;u<so.length&&o!==0&&o<so[u].priority;u++);so.splice(u,0,r),u===0&&rS(r)}};var lS=e.version;if(lS!=="19.2.0")throw Error(i(527,lS,"19.2.0"));ce.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var fD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{Rn=Nd.inject(fD),un=Nd}catch{}}return Wu.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,f="",v=mE,_=gE,b=yE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError)),o=WT(r,1,!1,null,null,u,f,null,v,_,b,aS),r[Ri]=o.current,Tg(r),new Bg(o)},Wu.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var f=!1,v="",_=mE,b=gE,D=yE,q=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(b=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.formState!==void 0&&(q=u.formState)),o=WT(r,1,!0,o,u??null,f,v,q,_,b,D,aS),o.context=QT(null),u=o.current,f=Fi(),f=$i(f),v=Gs(f),v.callback=null,$s(u,v,f),u=f,o.current.lanes=u,kt(o,u),Or(o),r[Ri]=o.current,Tg(r),new Rd(o)},Wu.version="19.2.0",Wu}var vS;function ED(){if(vS)return Hg.exports;vS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hg.exports=_D(),Hg.exports}var TD=ED();const SD=TC(TD),AD=()=>{};var _S={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},wD=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],c=t[n++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},wC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,c=l?t[s+1]:0,d=s+2<t.length,h=d?t[s+2]:0,y=a>>2,E=(a&3)<<4|c>>4;let T=(c&15)<<2|h>>6,w=h&63;d||(w=64,l||(T=64)),i.push(n[y],n[E],n[T],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||h==null||E==null)throw new bD;const T=a<<2|c>>4;if(i.push(T),h!==64){const w=c<<4&240|h>>2;if(i.push(w),E!==64){const R=h<<6&192|E;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CD=function(t){const e=AC(t);return wC.encodeByteArray(e,!0)},Th=function(t){return CD(t).replace(/\./g,"")},bC=function(t){try{return wC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=()=>ID().__FIREBASE_DEFAULTS__,RD=()=>{if(typeof process>"u"||typeof _S>"u")return;const t=_S.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ND=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bC(t[1]);return e&&JSON.parse(e)},op=()=>{try{return AD()||xD()||RD()||ND()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CC=t=>{var e,n;return(n=(e=op())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yv=t=>{const e=CC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},IC=()=>{var t;return(t=op())===null||t===void 0?void 0:t.config},xC=t=>{var e;return(e=op())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ap(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Th(JSON.stringify(n)),Th(JSON.stringify(l)),""].join(".")}const mc={};function MD(){const t={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?t.emulator.push(e):t.prod.push(e);return t}function kD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ES=!1;function lp(t,e){if(typeof window>"u"||typeof document>"u"||!ws(window.location.host)||mc[t]===e||mc[t]||ES)return;mc[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=MD().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ES=!0,l()},T}function y(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=kD(i),w=n("text"),R=document.getElementById(w)||document.createElement("span"),k=n("learnmore"),L=document.getElementById(k)||document.createElement("a"),z=n("preprendIcon"),F=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;c(B),y(L,k);const K=h();d(F,z),B.append(F,R,L,K),document.body.appendChild(B)}a?(R.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ti())}function VD(){var t;const e=(t=op())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FD(){const t=ti();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BD(){return!VD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qD(){try{return typeof indexedDB=="object"}catch{return!1}}function zD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="FirebaseError";class Ir extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=HD,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?GD(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Ir(s,c,i)}}function GD(t,e){return t.replace($D,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const $D=/\{\$([^}]+)}/g;function jD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function va(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],l=e[s];if(TS(a)&&TS(l)){if(!va(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function TS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function sc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KD(t,e){const n=new JD(t,e);return n.subscribe.bind(n)}class JD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");YD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Kg),s.error===void 0&&(s.error=Kg),s.complete===void 0&&(s.complete=Kg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class vs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new DD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XD(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QD(t){return t===la?void 0:t}function XD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const eM={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},tM=nt.INFO,nM={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},iM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=nM[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vv{constructor(e){this.name=e,this._logLevel=tM,this._logHandler=iM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const rM=(t,e)=>e.some(n=>t instanceof n);let SS,AS;function sM(){return SS||(SS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oM(){return AS||(AS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NC=new WeakMap,my=new WeakMap,DC=new WeakMap,Jg=new WeakMap,_v=new WeakMap;function aM(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(vo(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&NC.set(n,t)}).catch(()=>{}),_v.set(e,t),e}function lM(t){if(my.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});my.set(t,e)}let gy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return my.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uM(t){gy=t(gy)}function cM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Yg(this),e,...n);return DC.set(i,e.sort?e.sort():[e]),vo(i)}:oM().includes(t)?function(...e){return t.apply(Yg(this),e),vo(NC.get(this))}:function(...e){return vo(t.apply(Yg(this),e))}}function fM(t){return typeof t=="function"?cM(t):(t instanceof IDBTransaction&&lM(t),rM(t,sM())?new Proxy(t,gy):t)}function vo(t){if(t instanceof IDBRequest)return aM(t);if(Jg.has(t))return Jg.get(t);const e=fM(t);return e!==t&&(Jg.set(t,e),_v.set(e,t)),e}const Yg=t=>_v.get(t);function dM(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),c=vo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(vo(l.result),d.oldVersion,d.newVersion,vo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const hM=["get","getKey","getAll","getAllKeys","count"],pM=["put","add","delete","clear"],Wg=new Map;function wS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wg.get(e))return Wg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=pM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||hM.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,s?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&d.done]))[0]};return Wg.set(e,a),a}uM(t=>({...t,get:(e,n,i)=>wS(e,n)||t.get(e,n,i),has:(e,n)=>!!wS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function gM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yy="@firebase/app",bS="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new vv("@firebase/app"),yM="@firebase/app-compat",vM="@firebase/analytics-compat",_M="@firebase/analytics",EM="@firebase/app-check-compat",TM="@firebase/app-check",SM="@firebase/auth",AM="@firebase/auth-compat",wM="@firebase/database",bM="@firebase/data-connect",CM="@firebase/database-compat",IM="@firebase/functions",xM="@firebase/functions-compat",RM="@firebase/installations",NM="@firebase/installations-compat",DM="@firebase/messaging",MM="@firebase/messaging-compat",kM="@firebase/performance",PM="@firebase/performance-compat",VM="@firebase/remote-config",LM="@firebase/remote-config-compat",OM="@firebase/storage",UM="@firebase/storage-compat",FM="@firebase/firestore",BM="@firebase/ai",qM="@firebase/firestore-compat",zM="firebase",HM="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="[DEFAULT]",GM={[yy]:"fire-core",[yM]:"fire-core-compat",[_M]:"fire-analytics",[vM]:"fire-analytics-compat",[TM]:"fire-app-check",[EM]:"fire-app-check-compat",[SM]:"fire-auth",[AM]:"fire-auth-compat",[wM]:"fire-rtdb",[bM]:"fire-data-connect",[CM]:"fire-rtdb-compat",[IM]:"fire-fn",[xM]:"fire-fn-compat",[RM]:"fire-iid",[NM]:"fire-iid-compat",[DM]:"fire-fcm",[MM]:"fire-fcm-compat",[kM]:"fire-perf",[PM]:"fire-perf-compat",[VM]:"fire-rc",[LM]:"fire-rc-compat",[OM]:"fire-gcs",[UM]:"fire-gcs-compat",[FM]:"fire-fst",[qM]:"fire-fst-compat",[BM]:"fire-vertex","fire-js":"fire-js",[zM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,$M=new Map,_y=new Map;function CS(t,e){try{t.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ao(t){const e=t.name;if(_y.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;_y.set(e,t);for(const n of Sh.values())CS(n,t);for(const n of $M.values())CS(n,t);return!0}function Kc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_o=new $c("app","Firebase",jM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _o.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=HM;function MC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vy,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw _o.create("bad-app-name",{appName:String(s)});if(n||(n=IC()),!n)throw _o.create("no-options");const a=Sh.get(s);if(a){if(va(n,a.options)&&va(i,a.config))return a;throw _o.create("duplicate-app",{appName:s})}const l=new ZD(s);for(const d of _y.values())l.addComponent(d);const c=new KM(n,i,l);return Sh.set(s,c),c}function up(t=vy){const e=Sh.get(t);if(!e&&t===vy&&IC())return MC();if(!e)throw _o.create("no-app",{appName:t});return e}function lr(t,e,n){var i;let s=(i=GM[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}Ao(new vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="firebase-heartbeat-database",YM=1,kc="firebase-heartbeat-store";let Qg=null;function kC(){return Qg||(Qg=dM(JM,YM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kc)}catch(n){console.warn(n)}}}}).catch(t=>{throw _o.create("idb-open",{originalErrorMessage:t.message})})),Qg}async function WM(t){try{const n=(await kC()).transaction(kc),i=await n.objectStore(kc).get(PC(t));return await n.done,i}catch(e){if(e instanceof Ir)_s.warn(e.message);else{const n=_o.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(n.message)}}}async function IS(t,e){try{const i=(await kC()).transaction(kc,"readwrite");await i.objectStore(kc).put(e,PC(t)),await i.done}catch(n){if(n instanceof Ir)_s.warn(n.message);else{const i=_o.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_s.warn(i.message)}}}function PC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=1024,XM=30;class ZM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new t2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=xS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>XM){const l=n2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){_s.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xS(),{heartbeatsToSend:i,unsentEntries:s}=e2(this._heartbeatsCache.heartbeats),a=Th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return _s.warn(n),""}}}function xS(){return new Date().toISOString().substring(0,10)}function e2(t,e=QM){const n=[];let i=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),RS(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),RS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class t2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qD()?zD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return IS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return IS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function RS(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}function n2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){Ao(new vs("platform-logger",e=>new mM(e),"PRIVATE")),Ao(new vs("heartbeat",e=>new ZM(e),"PRIVATE")),lr(yy,bS,t),lr(yy,bS,"esm2017"),lr("fire-js","")}i2("");function Ev(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function VC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r2=VC,LC=new $c("auth","Firebase",VC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new vv("@firebase/auth");function s2(t,...e){Ah.logLevel<=nt.WARN&&Ah.warn(`Auth (${ba}): ${t}`,...e)}function nh(t,...e){Ah.logLevel<=nt.ERROR&&Ah.error(`Auth (${ba}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t,...e){throw Sv(t,...e)}function wr(t,...e){return Sv(t,...e)}function Tv(t,e,n){const i=Object.assign(Object.assign({},r2()),{[e]:n});return new $c("auth","Firebase",i).create(e,{appName:t.name})}function ys(t){return Tv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function o2(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&cr(t,"argument-error"),Tv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return LC.create(t,...e)}function Ve(t,e,...n){if(!t)throw Sv(e,...n)}function ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nh(e),new Error(e)}function Es(t,e){t||ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function a2(){return NS()==="http:"||NS()==="https:"}function NS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(a2()||OD()||"connection"in navigator)?navigator.onLine:!0}function u2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Es(n>e,"Short delay should be less than long delay!"),this.isMobile=PD()||UD()}get(){return l2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e){Es(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],d2=new Jc(3e4,6e4);function Do(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mo(t,e,n,i,s={}){return UC(t,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=jc(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return LD()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&ws(t.emulatorConfig.host)&&(h.credentials="include"),OC.fetch()(await FC(t,t.config.apiHost,n,c),h)})}async function UC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},c2),e);try{const s=new p2(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Dd(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dd(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Dd(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Dd(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Tv(t,y,h);cr(t,y)}}catch(s){if(s instanceof Ir)throw s;cr(t,"network-request-failed",{message:String(s)})}}async function Yc(t,e,n,i,s={}){const a=await Mo(t,e,n,i,s);return"mfaPendingCredential"in a&&cr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function FC(t,e,n,i){const s=`${e}${n}?${i}`,a=t,l=a.config.emulator?Av(t.config,s):`${t.config.apiScheme}://${s}`;return f2.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function h2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class p2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(wr(this.auth,"network-request-failed")),d2.get())})}}function Dd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=wr(t,e,i);return s.customData._tokenResponse=n,s}function DS(t){return t!==void 0&&t.enterprise!==void 0}class m2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return h2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function g2(t,e){return Mo(t,"GET","/v2/recaptchaConfig",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(t,e){return Mo(t,"POST","/v1/accounts:delete",e)}async function wh(t,e){return Mo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function v2(t,e=!1){const n=Vt(t),i=await n.getIdToken(e),s=wv(i);Ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:gc(Xg(s.auth_time)),issuedAtTime:gc(Xg(s.iat)),expirationTime:gc(Xg(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Xg(t){return Number(t)*1e3}function wv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const s=bC(n);return s?JSON.parse(s):(nh("Failed to decode base64 JWT payload"),null)}catch(s){return nh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function MS(t){const e=wv(t);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ir&&_2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function _2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Pc(t,wh(n,{idToken:i}));Ve(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?BC(a.providerUserInfo):[],c=S2(t.providerData,l),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),y=d?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Ty(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(t,E)}async function T2(t){const e=Vt(t);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S2(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function BC(t){return t.map(e=>{var{providerId:n}=e,i=Ev(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(t,e){const n=await UC(t,{},async()=>{const i=jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=await FC(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&ws(t.emulatorConfig.host)&&(d.credentials="include"),OC.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function w2(t,e){return Mo(t,"POST","/v2/accounts:revokeToken",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const n=MS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await A2(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,l=new wl;return i&&(Ve(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Ve(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Ve(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wl,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t,e){Ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tr{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,a=Ev(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new E2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ty(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return v2(this,e)}reload(){return T2(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await bh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await Pc(this,y2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,a,l,c,d,h,y;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,R=(l=n.photoURL)!==null&&l!==void 0?l:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,L=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,z=(h=n.createdAt)!==null&&h!==void 0?h:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:B,emailVerified:K,isAnonymous:X,providerData:G,stsTokenManager:I}=n;Ve(B&&I,e,"internal-error");const x=wl.fromJSON(this.name,I);Ve(typeof B=="string",e,"internal-error"),ao(E,e.name),ao(T,e.name),Ve(typeof K=="boolean",e,"internal-error"),Ve(typeof X=="boolean",e,"internal-error"),ao(w,e.name),ao(R,e.name),ao(k,e.name),ao(L,e.name),ao(z,e.name),ao(F,e.name);const N=new Tr({uid:B,auth:e,email:T,emailVerified:K,displayName:E,isAnonymous:X,photoURL:R,phoneNumber:w,tenantId:k,stsTokenManager:x,createdAt:z,lastLoginAt:F});return G&&Array.isArray(G)&&(N.providerData=G.map(V=>Object.assign({},V))),L&&(N._redirectEventId=L),N}static async _fromIdTokenResponse(e,n,i=!1){const s=new wl;s.updateFromServerResponse(n);const a=new Tr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await bh(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Ve(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?BC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new wl;c.updateFromIdToken(i);const d=new Tr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ty(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new Map;function gs(t){Es(t instanceof Function,"Expected a class definition");let e=kS.get(t);return e?(Es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qC.type="NONE";const PS=qC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t,e,n){return`firebase:${t}:${e}:${n}`}class bl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=ih(this.userKey,s.apiKey,a),this.fullPersistenceKey=ih("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wh(this.auth,{idToken:e}).catch(()=>{});return n?Tr._fromGetAccountInfoResponse(this.auth,n,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new bl(gs(PS),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||gs(PS);const l=ih(i,e.config.apiKey,e.name);let c=null;for(const h of n)try{const y=await h._get(l);if(y){let E;if(typeof y=="string"){const T=await wh(e,{idToken:y}).catch(()=>{});if(!T)break;E=await Tr._fromGetAccountInfoResponse(e,T,y)}else E=Tr._fromJSON(e,y);h!==a&&(c=E),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new bl(a,e,i):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new bl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($C(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KC(e))return"Blackberry";if(JC(e))return"Webos";if(HC(e))return"Safari";if((e.includes("chrome/")||GC(e))&&!e.includes("edge/"))return"Chrome";if(jC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zC(t=ti()){return/firefox\//i.test(t)}function HC(t=ti()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GC(t=ti()){return/crios\//i.test(t)}function $C(t=ti()){return/iemobile/i.test(t)}function jC(t=ti()){return/android/i.test(t)}function KC(t=ti()){return/blackberry/i.test(t)}function JC(t=ti()){return/webos/i.test(t)}function bv(t=ti()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function b2(t=ti()){var e;return bv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C2(){return FD()&&document.documentMode===10}function YC(t=ti()){return bv(t)||jC(t)||JC(t)||KC(t)||/windows phone/i.test(t)||$C(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t,e=[]){let n;switch(t){case"Browser":n=VS(ti());break;case"Worker":n=`${VS(ti())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e={}){return Mo(t,"GET","/v2/passwordPolicy",Do(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=6;class N2{constructor(e){var n,i,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:R2,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LS(this),this.idTokenSubscription=new LS(this),this.beforeStateQueue=new I2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gs(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wh(this,{idToken:e}),i=await Tr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(ys(this));const n=e?Vt(e):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x2(this),n=new N2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await w2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gs(e)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[gs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&s2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ko(t){return Vt(t)}class LS{constructor(e){this.auth=e,this.observer=null,this.addObserver=KD(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M2(t){cp=t}function QC(t){return cp.loadJS(t)}function k2(){return cp.recaptchaEnterpriseScript}function P2(){return cp.gapiScript}function V2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class L2{constructor(){this.enterprise=new O2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class O2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const U2="recaptcha-enterprise",XC="NO_RECAPTCHA";class F2{constructor(e){this.type=U2,this.auth=ko(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{g2(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new m2(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(d=>{c(d)})})}function s(a,l,c){const d=window.grecaptcha;DS(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(XC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new L2().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!n&&DS(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=k2();d.length!==0&&(d+=c),QC(d).then(()=>{s(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function OS(t,e,n,i=!1,s=!1){const a=new F2(t);let l;if(s)l=XC;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Sy(t,e,n,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await OS(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await OS(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t,e){const n=Kc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(va(a,e??{}))return s;cr(s,"already-initialized")}return n.initialize({options:e})}function q2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(gs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function z2(t,e,n){const i=ko(t);Ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=ZC(e),{host:l,port:c}=H2(e),d=c===null?"":`:${c}`,h={url:`${a}//${l}${d}/`},y=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ve(va(h,i.config.emulator)&&va(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,ws(l)?(ap(`${a}//${l}${d}`),lp("Auth",!0)):G2()}function ZC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function H2(t){const e=ZC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:US(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:US(l)}}}function US(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function G2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function $2(t,e){return Mo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e){return Yc(t,"POST","/v1/accounts:signInWithPassword",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K2(t,e){return Yc(t,"POST","/v1/accounts:signInWithEmailLink",Do(t,e))}async function J2(t,e){return Yc(t,"POST","/v1/accounts:signInWithEmailLink",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Cv{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Vc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Vc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sy(e,n,"signInWithPassword",j2);case"emailLink":return K2(e,{email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sy(e,i,"signUpPassword",$2);case"emailLink":return J2(e,{idToken:n,email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t,e){return Yc(t,"POST","/v1/accounts:signInWithIdp",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="http://localhost";class _a extends Cv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,a=Ev(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new _a(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Cl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Cl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cl(e,n)}buildRequest(){const e={requestUri:Y2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Q2(t){const e=rc(sc(t)).link,n=e?rc(sc(e)).deep_link_id:null,i=rc(sc(t)).deep_link_id;return(i?rc(sc(i)).link:null)||i||n||e||t}class Iv{constructor(e){var n,i,s,a,l,c;const d=rc(sc(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(i=d.oobCode)!==null&&i!==void 0?i:null,E=W2((s=d.mode)!==null&&s!==void 0?s:null);Ve(h&&y&&E,"argument-error"),this.apiKey=h,this.operation=E,this.code=y,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=Q2(e);try{return new Iv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,n){return Vc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Iv.parseLink(n);return Ve(i,"argument-error"),Vc._fromEmailAndCode(e,i.code,i.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends xv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Wc{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.FACEBOOK_SIGN_IN_METHOD="facebook.com";lo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _a._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ps.credential(n,i)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Wc{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.GITHUB_SIGN_IN_METHOD="github.com";uo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends Wc{constructor(){super("twitter.com")}static credential(e,n){return _a._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return co.credential(n,i)}catch{return null}}}co.TWITTER_SIGN_IN_METHOD="twitter.com";co.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return Yc(t,"POST","/v1/accounts:signUp",Do(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await Tr._fromIdTokenResponse(e,i,s),l=FS(i);return new Ea({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=FS(i);return new Ea({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function FS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends Ir{constructor(e,n,i,s){var a;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Ch(e,n,i,s)}}function eI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(t,a,e,i):a})}async function Z2(t,e,n=!1){const i=await Pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ea._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t,e,n=!1){const{auth:i}=t;if(hi(i.app))return Promise.reject(ys(i));const s="reauthenticate";try{const a=await Pc(t,eI(i,s,e,t),n);Ve(a.idToken,i,"internal-error");const l=wv(a.idToken);Ve(l,i,"internal-error");const{sub:c}=l;return Ve(t.uid===c,i,"user-mismatch"),Ea._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&cr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(t,e,n=!1){if(hi(t.app))return Promise.reject(ys(t));const i="signIn",s=await eI(t,i,e),a=await Ea._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function tk(t,e){return tI(ko(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(t){const e=ko(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nk(t,e,n){if(hi(t.app))return Promise.reject(ys(t));const i=ko(t),l=await Sy(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",X2).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&nI(t),d}),c=await Ea._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function ik(t,e,n){return hi(t.app)?Promise.reject(ys(t)):tk(Vt(t),$l.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&nI(t),i})}function rk(t,e,n,i){return Vt(t).onIdTokenChanged(e,n,i)}function sk(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function ok(t,e,n,i){return Vt(t).onAuthStateChanged(e,n,i)}function ak(t){return Vt(t).signOut()}const Ih="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ih,"1"),this.storage.removeItem(Ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=1e3,uk=10;class rI extends iI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);C2()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,uk):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},lk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rI.type="LOCAL";const ck=rI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends iI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sI.type="SESSION";const oI=sI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new fp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,a)),d=await fk(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const h=Rv("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(T.data.response);break;default:clearTimeout(y),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function hk(t){Br().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function pk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gk(){return aI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebaseLocalStorageDb",yk=1,xh="firebaseLocalStorage",uI="fbase_key";class Qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dp(t,e){return t.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function vk(){const t=indexedDB.deleteDatabase(lI);return new Qc(t).toPromise()}function Ay(){const t=indexedDB.open(lI,yk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xh,{keyPath:uI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xh)?e(i):(i.close(),await vk(),e(await Ay()))})})}async function BS(t,e,n){const i=dp(t,!0).put({[uI]:e,value:n});return new Qc(i).toPromise()}async function _k(t,e){const n=dp(t,!1).get(e),i=await new Qc(n).toPromise();return i===void 0?null:i.value}function qS(t,e){const n=dp(t,!0).delete(e);return new Qc(n).toPromise()}const Ek=800,Tk=3;class cI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ay(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Tk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fp._getInstance(gk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pk(),!this.activeServiceWorker)return;this.sender=new dk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ay();return await BS(e,Ih,"1"),await qS(e,Ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>BS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>_k(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=dp(s,!1).getAll();return new Qc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cI.type="LOCAL";const Sk=cI;new Jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e){return e?gs(e):(Ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv extends Cv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ak(t){return tI(t.auth,new Nv(t),t.bypassAuthState)}function wk(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),ek(n,new Nv(t),t.bypassAuthState)}async function bk(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),Z2(n,new Nv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ak;case"linkViaPopup":case"linkViaRedirect":return bk;case"reauthViaPopup":case"reauthViaRedirect":return wk;default:cr(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new Jc(2e3,1e4);async function Ik(t,e,n){if(hi(t.app))return Promise.reject(wr(t,"operation-not-supported-in-this-environment"));const i=ko(t);o2(t,e,xv);const s=fI(i,n);return new ca(i,"signInViaPopup",e,s).executeNotNull()}class ca extends dI{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=Rv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ck.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="pendingRedirect",rh=new Map;class Rk extends dI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const i=await Nk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nk(t,e){const n=kk(e),i=Mk(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function Dk(t,e){rh.set(t._key(),e)}function Mk(t){return gs(t._redirectPersistence)}function kk(t){return ih(xk,t.config.apiKey,t.name)}async function Pk(t,e,n=!1){if(hi(t.app))return Promise.reject(ys(t));const i=ko(t),s=fI(i,e),l=await new Rk(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=600*1e3;class Lk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ok(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!hI(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(wr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vk&&this.cachedEventUids.clear(),this.cachedEventUids.has(zS(e))}saveEventToCache(e){this.cachedEventUids.add(zS(e)),this.lastProcessedEventTime=Date.now()}}function zS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ok(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e={}){return Mo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bk=/^https?/;async function qk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uk(t);for(const n of e)try{if(zk(n))return}catch{}cr(t,"unauthorized-domain")}function zk(t){const e=Ey(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Bk.test(n))return!1;if(Fk.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new Jc(3e4,6e4);function HS(){const t=Br().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Gk(t){return new Promise((e,n)=>{var i,s,a;function l(){HS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HS(),n(wr(t,"network-request-failed"))},timeout:Hk.get()})}if(!((s=(i=Br().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Br().gapi)===null||a===void 0)&&a.load)l();else{const c=V2("iframefcb");return Br()[c]=()=>{gapi.load?l():n(wr(t,"network-request-failed"))},QC(`${P2()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw sh=null,e})}let sh=null;function $k(t){return sh=sh||Gk(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new Jc(5e3,15e3),Kk="__/auth/iframe",Jk="emulator/auth/iframe",Yk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qk(t){const e=t.config;Ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Av(e,Jk):`https://${t.config.authDomain}/${Kk}`,i={apiKey:e.apiKey,appName:t.name,v:ba},s=Wk.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${jc(i).slice(1)}`}async function Xk(t){const e=await $k(t),n=Br().gapi;return Ve(n,t,"internal-error"),e.open({where:document.body,url:Qk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yk,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=wr(t,"network-request-failed"),c=Br().setTimeout(()=>{a(l)},jk.get());function d(){Br().clearTimeout(c),s(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eP=500,tP=600,nP="_blank",iP="http://localhost";class GS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rP(t,e,n,i=eP,s=tP){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},Zk),{width:i.toString(),height:s.toString(),top:a,left:l}),h=ti().toLowerCase();n&&(c=GC(h)?nP:n),zC(h)&&(e=e||iP,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[w,R])=>`${T}${w}=${R},`,"");if(b2(h)&&c!=="_self")return sP(e||"",c),new GS(null);const E=window.open(e||"",c,y);Ve(E,t,"popup-blocked");try{E.focus()}catch{}return new GS(E)}function sP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="__/auth/handler",aP="emulator/auth/handler",lP=encodeURIComponent("fac");async function $S(t,e,n,i,s,a){Ve(t.config.authDomain,t,"auth-domain-config-required"),Ve(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ba,eventId:s};if(e instanceof xv){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",jD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))l[y]=E}if(e instanceof Wc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const d=await t._getAppCheckToken(),h=d?`#${lP}=${encodeURIComponent(d)}`:"";return`${uP(t)}?${jc(c).slice(1)}${h}`}function uP({config:t}){return t.emulator?Av(t,aP):`https://${t.authDomain}/${oP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="webStorageSupport";class cP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oI,this._completeRedirectFn=Pk,this._overrideRedirectResult=Dk}async _openPopup(e,n,i,s){var a;Es((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await $S(e,n,i,Ey(),s);return rP(e,l,Rv())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await $S(e,n,i,Ey(),s);return hk(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Es(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Xk(e),i=new Lk(e);return n.register("authEvent",s=>(Ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zg,{type:Zg},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Zg];l!==void 0&&n(!!l),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YC()||HC()||bv()}}const fP=cP;var jS="@firebase/auth",KS="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pP(t){Ao(new vs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Ve(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WC(t)},h=new D2(i,s,a,d);return q2(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ao(new vs("auth-internal",e=>{const n=ko(e.getProvider("auth").getImmediate());return(i=>new dP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(jS,KS,hP(t)),lr(jS,KS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=300,gP=xC("authIdTokenMaxAge")||mP;let JS=null;const yP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>gP)return;const s=n==null?void 0:n.token;JS!==s&&(JS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vP(t=up()){const e=Kc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=B2(t,{popupRedirectResolver:fP,persistence:[Sk,ck,oI]}),i=xC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=yP(a.toString());sk(n,l,()=>l(n.currentUser)),rk(n,c=>l(c))}}const s=CC("auth");return s&&z2(n,`http://${s}`),n}function _P(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}M2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=wr("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",_P().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pP("Browser");var EP="firebase",TP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(EP,TP,"app");var YS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eo,pI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function N(){}N.prototype=x.prototype,I.D=x.prototype,I.prototype=new N,I.prototype.constructor=I,I.C=function(V,M,O){for(var U=Array(arguments.length-2),be=2;be<arguments.length;be++)U[be-2]=arguments[be];return x.prototype[M].apply(V,U)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,x,N){N||(N=0);var V=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)V[M]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(M=0;16>M;++M)V[M]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=I.g[0],N=I.g[1],M=I.g[2];var O=I.g[3],U=x+(O^N&(M^O))+V[0]+3614090360&4294967295;x=N+(U<<7&4294967295|U>>>25),U=O+(M^x&(N^M))+V[1]+3905402710&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(N^O&(x^N))+V[2]+606105819&4294967295,M=O+(U<<17&4294967295|U>>>15),U=N+(x^M&(O^x))+V[3]+3250441966&4294967295,N=M+(U<<22&4294967295|U>>>10),U=x+(O^N&(M^O))+V[4]+4118548399&4294967295,x=N+(U<<7&4294967295|U>>>25),U=O+(M^x&(N^M))+V[5]+1200080426&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(N^O&(x^N))+V[6]+2821735955&4294967295,M=O+(U<<17&4294967295|U>>>15),U=N+(x^M&(O^x))+V[7]+4249261313&4294967295,N=M+(U<<22&4294967295|U>>>10),U=x+(O^N&(M^O))+V[8]+1770035416&4294967295,x=N+(U<<7&4294967295|U>>>25),U=O+(M^x&(N^M))+V[9]+2336552879&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(N^O&(x^N))+V[10]+4294925233&4294967295,M=O+(U<<17&4294967295|U>>>15),U=N+(x^M&(O^x))+V[11]+2304563134&4294967295,N=M+(U<<22&4294967295|U>>>10),U=x+(O^N&(M^O))+V[12]+1804603682&4294967295,x=N+(U<<7&4294967295|U>>>25),U=O+(M^x&(N^M))+V[13]+4254626195&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(N^O&(x^N))+V[14]+2792965006&4294967295,M=O+(U<<17&4294967295|U>>>15),U=N+(x^M&(O^x))+V[15]+1236535329&4294967295,N=M+(U<<22&4294967295|U>>>10),U=x+(M^O&(N^M))+V[1]+4129170786&4294967295,x=N+(U<<5&4294967295|U>>>27),U=O+(N^M&(x^N))+V[6]+3225465664&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^N&(O^x))+V[11]+643717713&4294967295,M=O+(U<<14&4294967295|U>>>18),U=N+(O^x&(M^O))+V[0]+3921069994&4294967295,N=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(N^M))+V[5]+3593408605&4294967295,x=N+(U<<5&4294967295|U>>>27),U=O+(N^M&(x^N))+V[10]+38016083&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^N&(O^x))+V[15]+3634488961&4294967295,M=O+(U<<14&4294967295|U>>>18),U=N+(O^x&(M^O))+V[4]+3889429448&4294967295,N=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(N^M))+V[9]+568446438&4294967295,x=N+(U<<5&4294967295|U>>>27),U=O+(N^M&(x^N))+V[14]+3275163606&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^N&(O^x))+V[3]+4107603335&4294967295,M=O+(U<<14&4294967295|U>>>18),U=N+(O^x&(M^O))+V[8]+1163531501&4294967295,N=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(N^M))+V[13]+2850285829&4294967295,x=N+(U<<5&4294967295|U>>>27),U=O+(N^M&(x^N))+V[2]+4243563512&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^N&(O^x))+V[7]+1735328473&4294967295,M=O+(U<<14&4294967295|U>>>18),U=N+(O^x&(M^O))+V[12]+2368359562&4294967295,N=M+(U<<20&4294967295|U>>>12),U=x+(N^M^O)+V[5]+4294588738&4294967295,x=N+(U<<4&4294967295|U>>>28),U=O+(x^N^M)+V[8]+2272392833&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^N)+V[11]+1839030562&4294967295,M=O+(U<<16&4294967295|U>>>16),U=N+(M^O^x)+V[14]+4259657740&4294967295,N=M+(U<<23&4294967295|U>>>9),U=x+(N^M^O)+V[1]+2763975236&4294967295,x=N+(U<<4&4294967295|U>>>28),U=O+(x^N^M)+V[4]+1272893353&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^N)+V[7]+4139469664&4294967295,M=O+(U<<16&4294967295|U>>>16),U=N+(M^O^x)+V[10]+3200236656&4294967295,N=M+(U<<23&4294967295|U>>>9),U=x+(N^M^O)+V[13]+681279174&4294967295,x=N+(U<<4&4294967295|U>>>28),U=O+(x^N^M)+V[0]+3936430074&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^N)+V[3]+3572445317&4294967295,M=O+(U<<16&4294967295|U>>>16),U=N+(M^O^x)+V[6]+76029189&4294967295,N=M+(U<<23&4294967295|U>>>9),U=x+(N^M^O)+V[9]+3654602809&4294967295,x=N+(U<<4&4294967295|U>>>28),U=O+(x^N^M)+V[12]+3873151461&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^N)+V[15]+530742520&4294967295,M=O+(U<<16&4294967295|U>>>16),U=N+(M^O^x)+V[2]+3299628645&4294967295,N=M+(U<<23&4294967295|U>>>9),U=x+(M^(N|~O))+V[0]+4096336452&4294967295,x=N+(U<<6&4294967295|U>>>26),U=O+(N^(x|~M))+V[7]+1126891415&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~N))+V[14]+2878612391&4294967295,M=O+(U<<15&4294967295|U>>>17),U=N+(O^(M|~x))+V[5]+4237533241&4294967295,N=M+(U<<21&4294967295|U>>>11),U=x+(M^(N|~O))+V[12]+1700485571&4294967295,x=N+(U<<6&4294967295|U>>>26),U=O+(N^(x|~M))+V[3]+2399980690&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~N))+V[10]+4293915773&4294967295,M=O+(U<<15&4294967295|U>>>17),U=N+(O^(M|~x))+V[1]+2240044497&4294967295,N=M+(U<<21&4294967295|U>>>11),U=x+(M^(N|~O))+V[8]+1873313359&4294967295,x=N+(U<<6&4294967295|U>>>26),U=O+(N^(x|~M))+V[15]+4264355552&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~N))+V[6]+2734768916&4294967295,M=O+(U<<15&4294967295|U>>>17),U=N+(O^(M|~x))+V[13]+1309151649&4294967295,N=M+(U<<21&4294967295|U>>>11),U=x+(M^(N|~O))+V[4]+4149444226&4294967295,x=N+(U<<6&4294967295|U>>>26),U=O+(N^(x|~M))+V[11]+3174756917&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~N))+V[2]+718787259&4294967295,M=O+(U<<15&4294967295|U>>>17),U=N+(O^(M|~x))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(M+(U<<21&4294967295|U>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+O&4294967295}i.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var N=x-this.blockSize,V=this.B,M=this.h,O=0;O<x;){if(M==0)for(;O<=N;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<x;)if(V[M++]=I.charCodeAt(O++),M==this.blockSize){s(this,V),M=0;break}}else for(;O<x;)if(V[M++]=I[O++],M==this.blockSize){s(this,V),M=0;break}}this.h=M,this.o+=x},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var N=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=N&255,N/=256;for(this.u(I),I=Array(16),x=N=0;4>x;++x)for(var V=0;32>V;V+=8)I[N++]=this.g[x]>>>V&255;return I};function a(I,x){var N=c;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=x(I)}function l(I,x){this.h=x;for(var N=[],V=!0,M=I.length-1;0<=M;M--){var O=I[M]|0;V&&O==x||(N[M]=O,V=!1)}this.g=N}var c={};function d(I){return-128<=I&&128>I?a(I,function(x){return new l([x|0],0>x?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return L(h(-I));for(var x=[],N=1,V=0;I>=N;V++)x[V]=I/N|0,N*=4294967296;return new l(x,0)}function y(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return L(y(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(x,8)),V=E,M=0;M<I.length;M+=8){var O=Math.min(8,I.length-M),U=parseInt(I.substring(M,M+O),x);8>O?(O=h(Math.pow(x,O)),V=V.j(O).add(h(U))):(V=V.j(N),V=V.add(h(U)))}return V}var E=d(0),T=d(1),w=d(16777216);t=l.prototype,t.m=function(){if(k(this))return-L(this).m();for(var I=0,x=1,N=0;N<this.g.length;N++){var V=this.i(N);I+=(0<=V?V:4294967296+V)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R(this))return"0";if(k(this))return"-"+L(this).toString(I);for(var x=h(Math.pow(I,6)),N=this,V="";;){var M=K(N,x).g;N=z(N,M.j(x));var O=((0<N.g.length?N.g[0]:N.h)>>>0).toString(I);if(N=M,R(N))return O+V;for(;6>O.length;)O="0"+O;V=O+V}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function R(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=z(this,I),k(I)?-1:R(I)?0:1};function L(I){for(var x=I.g.length,N=[],V=0;V<x;V++)N[V]=~I.g[V];return new l(N,~I.h).add(T)}t.abs=function(){return k(this)?L(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),N=[],V=0,M=0;M<=x;M++){var O=V+(this.i(M)&65535)+(I.i(M)&65535),U=(O>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);V=U>>>16,O&=65535,U&=65535,N[M]=U<<16|O}return new l(N,N[N.length-1]&-2147483648?-1:0)};function z(I,x){return I.add(L(x))}t.j=function(I){if(R(this)||R(I))return E;if(k(this))return k(I)?L(this).j(L(I)):L(L(this).j(I));if(k(I))return L(this.j(L(I)));if(0>this.l(w)&&0>I.l(w))return h(this.m()*I.m());for(var x=this.g.length+I.g.length,N=[],V=0;V<2*x;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<I.g.length;M++){var O=this.i(V)>>>16,U=this.i(V)&65535,be=I.i(M)>>>16,ve=I.i(M)&65535;N[2*V+2*M]+=U*ve,F(N,2*V+2*M),N[2*V+2*M+1]+=O*ve,F(N,2*V+2*M+1),N[2*V+2*M+1]+=U*be,F(N,2*V+2*M+1),N[2*V+2*M+2]+=O*be,F(N,2*V+2*M+2)}for(V=0;V<x;V++)N[V]=N[2*V+1]<<16|N[2*V];for(V=x;V<2*x;V++)N[V]=0;return new l(N,0)};function F(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function B(I,x){this.g=I,this.h=x}function K(I,x){if(R(x))throw Error("division by zero");if(R(I))return new B(E,E);if(k(I))return x=K(L(I),x),new B(L(x.g),L(x.h));if(k(x))return x=K(I,L(x)),new B(L(x.g),x.h);if(30<I.g.length){if(k(I)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var N=T,V=x;0>=V.l(I);)N=X(N),V=X(V);var M=G(N,1),O=G(V,1);for(V=G(V,2),N=G(N,2);!R(V);){var U=O.add(V);0>=U.l(I)&&(M=M.add(N),O=U),V=G(V,1),N=G(N,1)}return x=z(I,M.j(x)),new B(M,x)}for(M=E;0<=I.l(x);){for(N=Math.max(1,Math.floor(I.m()/x.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),O=h(N),U=O.j(x);k(U)||0<U.l(I);)N-=V,O=h(N),U=O.j(x);R(O)&&(O=T),M=M.add(O),I=z(I,U)}return new B(M,I)}t.A=function(I){return K(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),N=[],V=0;V<x;V++)N[V]=this.i(V)&I.i(V);return new l(N,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),N=[],V=0;V<x;V++)N[V]=this.i(V)|I.i(V);return new l(N,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),N=[],V=0;V<x;V++)N[V]=this.i(V)^I.i(V);return new l(N,this.h^I.h)};function X(I){for(var x=I.g.length+1,N=[],V=0;V<x;V++)N[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(N,I.h)}function G(I,x){var N=x>>5;x%=32;for(var V=I.g.length-N,M=[],O=0;O<V;O++)M[O]=0<x?I.i(O+N)>>>x|I.i(O+N+1)<<32-x:I.i(O+N);return new l(M,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,pI=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=y,Eo=l}).apply(typeof YS<"u"?YS:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mI,oc,gI,oh,wy,yI,vI,_I;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,C){return m==Array.prototype||m==Object.prototype||(m[S]=C.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var S=0;S<m.length;++S){var C=m[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function s(m,S){if(S)e:{var C=i;m=m.split(".");for(var P=0;P<m.length-1;P++){var Y=m[P];if(!(Y in C))break e;C=C[Y]}m=m[m.length-1],P=C[m],S=S(P),S!=P&&S!=null&&e(C,m,{configurable:!0,writable:!0,value:S})}}function a(m,S){m instanceof String&&(m+="");var C=0,P=!1,Y={next:function(){if(!P&&C<m.length){var ie=C++;return{value:S(ie,m[ie]),done:!1}}return P=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(m){return m||function(){return a(this,function(S,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function h(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function y(m,S,C){return m.call.apply(m.bind,arguments)}function E(m,S,C){if(!m)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,P),m.apply(S,Y)}}return function(){return m.apply(S,arguments)}}function T(m,S,C){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:E,T.apply(null,arguments)}function w(m,S){var C=Array.prototype.slice.call(arguments,1);return function(){var P=C.slice();return P.push.apply(P,arguments),m.apply(this,P)}}function R(m,S){function C(){}C.prototype=S.prototype,m.aa=S.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(P,Y,ie){for(var de=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)de[_t-2]=arguments[_t];return S.prototype[Y].apply(P,de)}}function k(m){const S=m.length;if(0<S){const C=Array(S);for(let P=0;P<S;P++)C[P]=m[P];return C}return[]}function L(m,S){for(let C=1;C<arguments.length;C++){const P=arguments[C];if(d(P)){const Y=m.length||0,ie=P.length||0;m.length=Y+ie;for(let de=0;de<ie;de++)m[Y+de]=P[de]}else m.push(P)}}class z{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(m){return/^[\s\xa0]*$/.test(m)}function B(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function K(m){return K[" "](m),m}K[" "]=function(){};var X=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function G(m,S,C){for(const P in m)S.call(C,m[P],P,m)}function I(m,S){for(const C in m)S.call(void 0,m[C],C,m)}function x(m){const S={};for(const C in m)S[C]=m[C];return S}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(m,S){let C,P;for(let Y=1;Y<arguments.length;Y++){P=arguments[Y];for(C in P)m[C]=P[C];for(let ie=0;ie<N.length;ie++)C=N[ie],Object.prototype.hasOwnProperty.call(P,C)&&(m[C]=P[C])}}function M(m){var S=1;m=m.split(":");const C=[];for(;0<S&&m.length;)C.push(m.shift()),S--;return m.length&&C.push(m.join(":")),C}function O(m){c.setTimeout(()=>{throw m},0)}function U(){var m=Ie;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class be{constructor(){this.h=this.g=null}add(S,C){const P=ve.get();P.set(S,C),this.h?this.h.next=P:this.g=P,this.h=P}}var ve=new z(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,he=!1,Ie=new be,De=()=>{const m=c.Promise.resolve(void 0);ce=()=>{m.then(H)}};var H=()=>{for(var m;m=U();){try{m.h.call(m.g)}catch(C){O(C)}var S=ve;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}he=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};c.addEventListener("test",C,S),c.removeEventListener("test",C,S)}catch{}return m})();function we(m,S){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,P=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if(X){e:{try{K(S.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(S=null)}}else C=="mouseover"?S=m.fromElement:C=="mouseout"&&(S=m.toElement);this.relatedTarget=S,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Me[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&we.aa.h.call(this)}}R(we,fe);var Me={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),jt=0;function xe(m,S,C,P,Y){this.listener=m,this.proxy=null,this.src=S,this.type=C,this.capture=!!P,this.ha=Y,this.key=++jt,this.da=this.fa=!1}function Cn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ut(m){this.src=m,this.g={},this.h=0}ut.prototype.add=function(m,S,C,P,Y){var ie=m.toString();m=this.g[ie],m||(m=this.g[ie]=[],this.h++);var de=Ln(m,S,P,Y);return-1<de?(S=m[de],C||(S.fa=!1)):(S=new xe(S,this.src,ie,!!P,Y),S.fa=C,m.push(S)),S};function _n(m,S){var C=S.type;if(C in m.g){var P=m.g[C],Y=Array.prototype.indexOf.call(P,S,void 0),ie;(ie=0<=Y)&&Array.prototype.splice.call(P,Y,1),ie&&(Cn(S),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Ln(m,S,C,P){for(var Y=0;Y<m.length;++Y){var ie=m[Y];if(!ie.da&&ie.listener==S&&ie.capture==!!C&&ie.ha==P)return Y}return-1}var In="closure_lm_"+(1e6*Math.random()|0),En={};function xn(m,S,C,P,Y){if(Array.isArray(S)){for(var ie=0;ie<S.length;ie++)xn(m,S[ie],C,P,Y);return null}return C=Tn(C),m&&m[Ue]?m.K(S,C,h(P)?!!P.capture:!1,Y):zi(m,S,C,!1,P,Y)}function zi(m,S,C,P,Y,ie){if(!S)throw Error("Invalid event type");var de=h(Y)?!!Y.capture:!!Y,_t=Hi(m);if(_t||(m[In]=_t=new ut(m)),C=_t.add(S,C,P,de,ie),C.proxy)return C;if(P=Ii(),C.proxy=P,P.src=m,P.listener=C,m.addEventListener)pe||(Y=de),Y===void 0&&(Y=!1),m.addEventListener(S.toString(),P,Y);else if(m.attachEvent)m.attachEvent(ii(S.toString()),P);else if(m.addListener&&m.removeListener)m.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ii(){function m(C){return S.call(m.src,m.listener,C)}const S=fr;return m}function mi(m,S,C,P,Y){if(Array.isArray(S))for(var ie=0;ie<S.length;ie++)mi(m,S[ie],C,P,Y);else P=h(P)?!!P.capture:!!P,C=Tn(C),m&&m[Ue]?(m=m.i,S=String(S).toString(),S in m.g&&(ie=m.g[S],C=Ln(ie,C,P,Y),-1<C&&(Cn(ie[C]),Array.prototype.splice.call(ie,C,1),ie.length==0&&(delete m.g[S],m.h--)))):m&&(m=Hi(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Ln(S,C,P,Y)),(C=-1<m?S[m]:null)&&ni(C))}function ni(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[Ue])_n(S.i,m);else{var C=m.type,P=m.proxy;S.removeEventListener?S.removeEventListener(C,P,m.capture):S.detachEvent?S.detachEvent(ii(C),P):S.addListener&&S.removeListener&&S.removeListener(P),(C=Hi(S))?(_n(C,m),C.h==0&&(C.src=null,S[In]=null)):Cn(m)}}}function ii(m){return m in En?En[m]:En[m]="on"+m}function fr(m,S){if(m.da)m=!0;else{S=new we(S,this);var C=m.listener,P=m.ha||m.src;m.fa&&ni(m),m=C.call(P,S)}return m}function Hi(m){return m=m[In],m instanceof ut?m:null}var ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(m){return typeof m=="function"?m:(m[ct]||(m[ct]=function(S){return m.handleEvent(S)}),m[ct])}function ze(){te.call(this),this.i=new ut(this),this.M=this,this.F=null}R(ze,te),ze.prototype[Ue]=!0,ze.prototype.removeEventListener=function(m,S,C,P){mi(this,m,S,C,P)};function Ct(m,S){var C,P=m.F;if(P)for(C=[];P;P=P.F)C.push(P);if(m=m.M,P=S.type||S,typeof S=="string")S=new fe(S,m);else if(S instanceof fe)S.target=S.target||m;else{var Y=S;S=new fe(P,m),V(S,Y)}if(Y=!0,C)for(var ie=C.length-1;0<=ie;ie--){var de=S.g=C[ie];Y=Yt(de,P,!0,S)&&Y}if(de=S.g=m,Y=Yt(de,P,!0,S)&&Y,Y=Yt(de,P,!1,S)&&Y,C)for(ie=0;ie<C.length;ie++)de=S.g=C[ie],Y=Yt(de,P,!1,S)&&Y}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var C=m.g[S],P=0;P<C.length;P++)Cn(C[P]);delete m.g[S],m.h--}}this.F=null},ze.prototype.K=function(m,S,C,P){return this.i.add(String(m),S,!1,C,P)},ze.prototype.L=function(m,S,C,P){return this.i.add(String(m),S,!0,C,P)};function Yt(m,S,C,P){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var Y=!0,ie=0;ie<S.length;++ie){var de=S[ie];if(de&&!de.da&&de.capture==C){var _t=de.listener,cn=de.ha||de.src;de.fa&&_n(m.i,de),Y=_t.call(cn,P)!==!1&&Y}}return Y&&!P.defaultPrevented}function me(m,S,C){if(typeof m=="function")C&&(m=T(m,C));else if(m&&typeof m.handleEvent=="function")m=T(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(m,S||0)}function ft(m){m.g=me(()=>{m.g=null,m.i&&(m.i=!1,ft(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class nn extends te{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function It(m){te.call(this),this.h=m,this.g={}}R(It,te);var Rn=[];function un(m){G(m.g,function(S,C){this.g.hasOwnProperty(C)&&ni(S)},m),m.g={}}It.prototype.N=function(){It.aa.N.call(this),un(this)},It.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=c.JSON.stringify,Te=c.JSON.parse,Se=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function $e(){}$e.prototype.h=null;function St(m){return m.h||(m.h=m.i())}function Ye(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function at(){fe.call(this,"d")}R(at,fe);function rt(){fe.call(this,"c")}R(rt,fe);var ke={},je=null;function Sn(){return je=je||new ze}ke.La="serverreachability";function Gi(m){fe.call(this,ke.La,m)}R(Gi,fe);function rn(m){const S=Sn();Ct(S,new Gi(S))}ke.STAT_EVENT="statevent";function kt(m,S){fe.call(this,ke.STAT_EVENT,m),this.stat=S}R(kt,fe);function At(m){const S=Sn();Ct(S,new kt(S,m))}ke.Ma="timingevent";function ri(m,S){fe.call(this,ke.Ma,m),this.size=S}R(ri,fe);function Ht(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function jn(){this.g=!0}jn.prototype.xa=function(){this.g=!1};function $i(m,S,C,P,Y,ie){m.info(function(){if(m.g)if(ie)for(var de="",_t=ie.split("&"),cn=0;cn<_t.length;cn++){var Ke=_t[cn].split("=");if(1<Ke.length){var Dn=Ke[0];Ke=Ke[1];var Mn=Dn.split("_");de=2<=Mn.length&&Mn[1]=="type"?de+(Dn+"="+Ke+"&"):de+(Dn+"=redacted&")}}else de=null;else de=ie;return"XMLHTTP REQ ("+P+") [attempt "+Y+"]: "+S+`
`+C+`
`+de})}function On(m,S,C,P,Y,ie,de){m.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Y+"]: "+S+`
`+C+`
`+ie+" "+de})}function si(m,S,C,P){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+xi(m,C)+(P?" "+P:"")})}function Kr(m,S){m.info(function(){return"TIMEOUT: "+S})}jn.prototype.info=function(){};function xi(m,S){if(!m.g)return S;if(!S)return null;try{var C=JSON.parse(S);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var P=C[m];if(!(2>P.length)){var Y=P[1];if(Array.isArray(Y)&&!(1>Y.length)){var ie=Y[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var de=1;de<Y.length;de++)Y[de]=""}}}}return oe(C)}catch{return S}}var Lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ri;function ji(){}R(ji,$e),ji.prototype.g=function(){return new XMLHttpRequest},ji.prototype.i=function(){return{}},Ri=new ji;function Ni(m,S,C,P){this.j=m,this.i=S,this.l=C,this.R=P||1,this.U=new It(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oo}function Oo(){this.i=null,this.g="",this.h=!1}var dr={},Ki={};function Ji(m,S,C){m.L=1,m.v=Fo(Wt(S)),m.m=C,m.P=!0,gi(m,null)}function gi(m,S){m.F=Date.now(),oi(m),m.A=Wt(m.v);var C=m.A,P=m.R;Array.isArray(P)||(P=[String(P)]),Yr(C.i,"t",P),m.C=0,C=m.j.J,m.h=new Oo,m.g=wf(m.j,C?S:null,!m.m),0<m.O&&(m.M=new nn(T(m.Y,m,m.g),m.O)),S=m.U,C=m.g,P=m.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Rn[0]=Y.toString()),Y=Rn);for(var ie=0;ie<Y.length;ie++){var de=xn(C,Y[ie],P||S.handleEvent,!1,S.h||S);if(!de)break;S.g[de.key]=de}S=m.H?x(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),rn(),$i(m.i,m.u,m.A,m.l,m.R,m.m)}Ni.prototype.ca=function(m){m=m.target;const S=this.M;S&&ui(m)==3?S.j():this.Y(m)},Ni.prototype.Y=function(m){try{if(m==this.g)e:{const Mn=ui(this.g);var S=this.g.Ba();const Us=this.g.Z();if(!(3>Mn)&&(Mn!=3||this.g&&(this.h.h||this.g.oa()||zo(this.g)))){this.J||Mn!=4||S==7||(S==8||0>=Us?rn(3):rn(2)),hr(this);var C=this.g.Z();this.X=C;t:if(Yi(this)){var P=zo(this.g);m="";var Y=P.length,ie=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),pr(this);var de="";break t}this.h.i=new c.TextDecoder}for(S=0;S<Y;S++)this.h.h=!0,m+=this.h.i.decode(P[S],{stream:!(ie&&S==Y-1)});P.length=0,this.h.g+=m,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=C==200,On(this.i,this.u,this.A,this.l,this.R,Mn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,cn=this.g;if((_t=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(_t)){var Ke=_t;break t}}Ke=null}if(C=Ke)si(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nr(this,C);else{this.o=!1,this.s=3,At(12),ai(this),pr(this);break e}}if(this.P){C=!0;let vi;for(;!this.J&&this.C<de.length;)if(vi=Rr(this,de),vi==Ki){Mn==4&&(this.s=4,At(14),C=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(vi==dr){this.s=4,At(15),si(this.i,this.l,de,"[Invalid Chunk]"),C=!1;break}else si(this.i,this.l,vi,null),Nr(this,vi);if(Yi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mn!=4||de.length!=0||this.h.h||(this.s=1,At(16),C=!1),this.o=this.o&&C,!C)si(this.i,this.l,de,"[Invalid Chunked Response]"),ai(this),pr(this);else if(0<de.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),du(Dn),Dn.M=!0,At(11))}}else si(this.i,this.l,de,null),Nr(this,de);Mn==4&&ai(this),this.o&&!this.J&&(Mn==4?Tf(this.j,this):(this.o=!1,oi(this)))}else mf(this.g),C==400&&0<de.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),ai(this),pr(this)}}}catch{}finally{}};function Yi(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Rr(m,S){var C=m.C,P=S.indexOf(`
`,C);return P==-1?Ki:(C=Number(S.substring(C,P)),isNaN(C)?dr:(P+=1,P+C>S.length?Ki:(S=S.slice(P,P+C),m.C=P+C,S)))}Ni.prototype.cancel=function(){this.J=!0,ai(this)};function oi(m){m.S=Date.now()+m.I,Gt(m,m.I)}function Gt(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ht(T(m.ba,m),S)}function hr(m){m.B&&(c.clearTimeout(m.B),m.B=null)}Ni.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Kr(this.i,this.A),this.L!=2&&(rn(),At(17)),ai(this),this.s=2,pr(this)):Gt(this,this.S-m)};function pr(m){m.j.G==0||m.J||Tf(m.j,m)}function ai(m){hr(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,un(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function Nr(m,S){try{var C=m.j;if(C.G!=0&&(C.g==m||Is(C.h,m))){if(!m.K&&Is(C.h,m)&&C.G==3){try{var P=C.Da.g.parse(S)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Y=P;if(Y[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)Ls(C),Vs(C);else break e;fu(C),At(18)}}else C.za=Y[1],0<C.za-C.T&&37500>Y[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ht(T(C.Za,C),6e3));if(1>=uf(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Qr(C,11)}else if((m.K||C.g==m)&&Ls(C),!F(S))for(Y=C.Da.g.parse(S),S=0;S<Y.length;S++){let Ke=Y[S];if(C.T=Ke[0],Ke=Ke[1],C.G==2)if(Ke[0]=="c"){C.K=Ke[1],C.ia=Ke[2];const Dn=Ke[3];Dn!=null&&(C.la=Dn,C.j.info("VER="+C.la));const Mn=Ke[4];Mn!=null&&(C.Aa=Mn,C.j.info("SVER="+C.Aa));const Us=Ke[5];Us!=null&&typeof Us=="number"&&0<Us&&(P=1.5*Us,C.L=P,C.j.info("backChannelRequestTimeoutMs_="+P)),P=C;const vi=m.g;if(vi){const $o=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($o){var ie=P.h;ie.g||$o.indexOf("spdy")==-1&&$o.indexOf("quic")==-1&&$o.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(xs(ie,ie.h),ie.h=null))}if(P.D){const Xr=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;Xr&&(P.ya=Xr,dt(P.I,P.D,Xr))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),P=C;var de=m;if(P.qa=Af(P,P.J?P.ia:null,P.W),de.K){Wi(P.h,de);var _t=de,cn=P.L;cn&&(_t.I=cn),_t.B&&(hr(_t),oi(_t)),P.g=de}else _f(P);0<C.i.length&&La(C)}else Ke[0]!="stop"&&Ke[0]!="close"||Qr(C,7);else C.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Qr(C,7):uu(C):Ke[0]!="noop"&&C.l&&C.l.ta(Ke),C.v=0)}}rn(4)}catch{}}var zp=class{constructor(m,S){this.g=m,this.map=S}};function nu(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function uf(m){return m.h?1:m.g?m.g.size:0}function Is(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function xs(m,S){m.g?m.g.add(S):m.h=S}function Wi(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}nu.prototype.cancel=function(){if(this.i=li(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function li(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const C of m.g.values())S=S.concat(C.D);return S}return k(m.i)}function cf(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var S=[],C=m.length,P=0;P<C;P++)S.push(m[P]);return S}S=[],C=0;for(P in m)S[C++]=m[P];return S}function Hp(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var S=[];m=m.length;for(var C=0;C<m;C++)S.push(C);return S}S=[],C=0;for(const P in m)S[C++]=P;return S}}}function Ra(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var C=Hp(m),P=cf(m),Y=P.length,ie=0;ie<Y;ie++)S.call(void 0,P[ie],C&&C[ie],m)}var ru=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Na(m,S){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var P=m[C].indexOf("="),Y=null;if(0<=P){var ie=m[C].substring(0,P);Y=m[C].substring(P+1)}else ie=m[C];S(ie,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Jr(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Jr){this.h=m.h,Rs(this,m.j),this.o=m.o,this.g=m.g,Uo(this,m.s),this.l=m.l;var S=m.i,C=new Dr;C.i=S.i,S.g&&(C.g=new Map(S.g),C.h=S.h),Da(this,C),this.m=m.m}else m&&(S=String(m).match(ru))?(this.h=!1,Rs(this,S[1]||"",!0),this.o=Ns(S[2]||""),this.g=Ns(S[3]||"",!0),Uo(this,S[4]),this.l=Ns(S[5]||"",!0),Da(this,S[6]||"",!0),this.m=Ns(S[7]||"")):(this.h=!1,this.i=new Dr(null,this.h))}Jr.prototype.toString=function(){var m=[],S=this.j;S&&m.push(Qi(S,su,!0),":");var C=this.g;return(C||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Qi(S,su,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Qi(C,C.charAt(0)=="/"?ou:ff,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Qi(C,jp)),m.join("")};function Wt(m){return new Jr(m)}function Rs(m,S,C){m.j=C?Ns(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Uo(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function Da(m,S,C){S instanceof Dr?(m.i=S,df(m.i,m.h)):(C||(S=Qi(S,$p)),m.i=new Dr(S,m.h))}function dt(m,S,C){m.i.set(S,C)}function Fo(m){return dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ns(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Qi(m,S,C){return typeof m=="string"?(m=encodeURI(m).replace(S,Gp),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Gp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var su=/[#\/\?@]/g,ff=/[#\?:]/g,ou=/[#\?]/g,$p=/[#\?@]/g,jp=/#/g;function Dr(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Nn(m){m.g||(m.g=new Map,m.h=0,m.i&&Na(m.i,function(S,C){m.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}t=Dr.prototype,t.add=function(m,S){Nn(this),this.i=null,m=Di(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(S),this.h+=1,this};function Ma(m,S){Nn(m),S=Di(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function ka(m,S){return Nn(m),S=Di(m,S),m.g.has(S)}t.forEach=function(m,S){Nn(this),this.g.forEach(function(C,P){C.forEach(function(Y){m.call(S,Y,P,this)},this)},this)},t.na=function(){Nn(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),C=[];for(let P=0;P<S.length;P++){const Y=m[P];for(let ie=0;ie<Y.length;ie++)C.push(S[P])}return C},t.V=function(m){Nn(this);let S=[];if(typeof m=="string")ka(this,m)&&(S=S.concat(this.g.get(Di(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)S=S.concat(m[C])}return S},t.set=function(m,S){return Nn(this),this.i=null,m=Di(this,m),ka(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function Yr(m,S,C){Ma(m,S),0<C.length&&(m.i=null,m.g.set(Di(m,S),k(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var C=0;C<S.length;C++){var P=S[C];const ie=encodeURIComponent(String(P)),de=this.V(P);for(P=0;P<de.length;P++){var Y=ie;de[P]!==""&&(Y+="="+encodeURIComponent(String(de[P]))),m.push(Y)}}return this.i=m.join("&")};function Di(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function df(m,S){S&&!m.j&&(Nn(m),m.i=null,m.g.forEach(function(C,P){var Y=P.toLowerCase();P!=Y&&(Ma(this,P),Yr(this,Y,C))},m)),m.j=S}function au(m,S){const C=new jn;if(c.Image){const P=new Image;P.onload=w(yi,C,"TestLoadImage: loaded",!0,S,P),P.onerror=w(yi,C,"TestLoadImage: error",!1,S,P),P.onabort=w(yi,C,"TestLoadImage: abort",!1,S,P),P.ontimeout=w(yi,C,"TestLoadImage: timeout",!1,S,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=m}else S(!1)}function hf(m,S){const C=new jn,P=new AbortController,Y=setTimeout(()=>{P.abort(),yi(C,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:P.signal}).then(ie=>{clearTimeout(Y),ie.ok?yi(C,"TestPingServer: ok",!0,S):yi(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),yi(C,"TestPingServer: error",!1,S)})}function yi(m,S,C,P,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),P(C)}catch{}}function mr(){this.g=new Se}function lu(m,S,C){const P=C||"";try{Ra(m,function(Y,ie){let de=Y;h(Y)&&(de=oe(Y)),S.push(P+ie+"="+encodeURIComponent(de))})}catch(Y){throw S.push(P+"type="+encodeURIComponent("_badmap")),Y}}function Mr(m){this.l=m.Ub||null,this.j=m.eb||!1}R(Mr,$e),Mr.prototype.g=function(){return new Mi(this.l,this.j)},Mr.prototype.i=(function(m){return function(){return m}})({});function Mi(m,S){ze.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Mi,ze),t=Mi.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,Ds(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ds(this)),this.g&&(this.readyState=3,Ds(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pa(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pa(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?kr(this):Ds(this),this.readyState==3&&Pa(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,kr(this))},t.Qa=function(m){this.g&&(this.response=m,kr(this))},t.ga=function(){this.g&&kr(this)};function kr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ds(m)}t.setRequestHeader=function(m,S){this.u.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=S.next();return m.join(`\r
`)};function Ds(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Bo(m){let S="";return G(m,function(C,P){S+=P,S+=":",S+=C,S+=`\r
`}),S}function Ms(m,S,C){e:{for(P in C){var P=!1;break e}P=!0}P||(C=Bo(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):dt(m,S,C))}function Ot(m){ze.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ot,ze);var Kn=/^https?$/i,Wr=["POST","PUT"];t=Ot.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,S,C,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ri.g(),this.v=this.o?St(this.o):St(Ri),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ie){qo(this,ie);return}if(m=C||"",C=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Y in P)C.set(Y,P[Y]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ie of P.keys())C.set(ie,P.get(ie));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),Y=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Wr,S,void 0))||P||Y||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,de]of C)this.g.setRequestHeader(ie,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Va(this),this.u=!0,this.g.send(m),this.u=!1}catch(ie){qo(this,ie)}};function qo(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,ks(m),Ps(m)}function ks(m){m.A||(m.A=!0,Ct(m,"complete"),Ct(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ct(this,"complete"),Ct(this,"abort"),Ps(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ps(this,!0)),Ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pf(this):this.bb())},t.bb=function(){pf(this)};function pf(m){if(m.h&&typeof l<"u"&&(!m.v[1]||ui(m)!=4||m.Z()!=2)){if(m.u&&ui(m)==4)me(m.Ea,0,m);else if(Ct(m,"readystatechange"),ui(m)==4){m.h=!1;try{const de=m.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var P;if(P=de===0){var Y=String(m.D).match(ru)[1]||null;!Y&&c.self&&c.self.location&&(Y=c.self.location.protocol.slice(0,-1)),P=!Kn.test(Y?Y.toLowerCase():"")}C=P}if(C)Ct(m,"complete"),Ct(m,"success");else{m.m=6;try{var ie=2<ui(m)?m.g.statusText:""}catch{ie=""}m.l=ie+" ["+m.Z()+"]",ks(m)}}finally{Ps(m)}}}}function Ps(m,S){if(m.g){Va(m);const C=m.g,P=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||Ct(m,"ready");try{C.onreadystatechange=P}catch{}}}function Va(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ui(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Te(S)}};function zo(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function mf(m){const S={};m=(m.g&&2<=ui(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<m.length;P++){if(F(m[P]))continue;var C=M(m[P]);const Y=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=S[Y]||[];S[Y]=ie,ie.push(C)}I(S,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ho(m,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||S}function gf(m){this.Aa=0,this.i=[],this.j=new jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ho("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ho("baseRetryDelayMs",5e3,m),this.cb=Ho("retryDelaySeedMs",1e4,m),this.Wa=Ho("forwardChannelMaxRetries",2,m),this.wa=Ho("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new nu(m&&m.concurrentRequestLimit),this.Da=new mr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gf.prototype,t.la=8,t.G=1,t.connect=function(m,S,C,P){At(0),this.W=m,this.H=S||{},C&&P!==void 0&&(this.H.OSID=C,this.H.OAID=P),this.F=this.X,this.I=Af(this,null,this.W),La(this)};function uu(m){if(yf(m),m.G==3){var S=m.U++,C=Wt(m.I);if(dt(C,"SID",m.K),dt(C,"RID",S),dt(C,"TYPE","terminate"),Go(m,C),S=new Ni(m,m.j,S),S.L=2,S.v=Fo(Wt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=S.v,C=!0),C||(S.g=wf(S.j,null),S.g.ea(S.v)),S.F=Date.now(),oi(S)}hu(m)}function Vs(m){m.g&&(du(m),m.g.cancel(),m.g=null)}function yf(m){Vs(m),m.u&&(c.clearTimeout(m.u),m.u=null),Ls(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function La(m){if(!iu(m.h)&&!m.s){m.s=!0;var S=m.Ga;ce||De(),he||(ce(),he=!0),Ie.add(S,m),m.B=0}}function Kp(m,S){return uf(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ht(T(m.Ga,m,S),Sf(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Y=new Ni(this,this.j,m);let ie=this.o;if(this.S&&(ie?(ie=x(ie),V(ie,this.S)):ie=this.S),this.m!==null||this.O||(Y.H=ie,ie=null),this.P)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var P=this.i[C];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(S+=P,4096<S){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=cu(this,Y,S),C=Wt(this.I),dt(C,"RID",m),dt(C,"CVER",22),this.D&&dt(C,"X-HTTP-Session-Id",this.D),Go(this,C),ie&&(this.O?S="headers="+encodeURIComponent(String(Bo(ie)))+"&"+S:this.m&&Ms(C,this.m,ie)),xs(this.h,Y),this.Ua&&dt(C,"TYPE","init"),this.P?(dt(C,"$req",S),dt(C,"SID","null"),Y.T=!0,Ji(Y,C,null)):Ji(Y,C,S),this.G=2}}else this.G==3&&(m?vf(this,m):this.i.length==0||iu(this.h)||vf(this))};function vf(m,S){var C;S?C=S.l:C=m.U++;const P=Wt(m.I);dt(P,"SID",m.K),dt(P,"RID",C),dt(P,"AID",m.T),Go(m,P),m.m&&m.o&&Ms(P,m.m,m.o),C=new Ni(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),S&&(m.i=S.D.concat(m.i)),S=cu(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),xs(m.h,C),Ji(C,P,S)}function Go(m,S){m.H&&G(m.H,function(C,P){dt(S,P,C)}),m.l&&Ra({},function(C,P){dt(S,P,C)})}function cu(m,S,C){C=Math.min(m.i.length,C);var P=m.l?T(m.l.Na,m.l,m):null;e:{var Y=m.i;let ie=-1;for(;;){const de=["count="+C];ie==-1?0<C?(ie=Y[0].g,de.push("ofs="+ie)):ie=0:de.push("ofs="+ie);let _t=!0;for(let cn=0;cn<C;cn++){let Ke=Y[cn].g;const Dn=Y[cn].map;if(Ke-=ie,0>Ke)ie=Math.max(0,Y[cn].g-100),_t=!1;else try{lu(Dn,de,"req"+Ke+"_")}catch{P&&P(Dn)}}if(_t){P=de.join("&");break e}}}return m=m.i.splice(0,C),S.D=m,P}function _f(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;ce||De(),he||(ce(),he=!0),Ie.add(S,m),m.v=0}}function fu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ht(T(m.Fa,m),Sf(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Ef(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ht(T(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Vs(this),Ef(this))};function du(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function Ef(m){m.g=new Ni(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=Wt(m.qa);dt(S,"RID","rpc"),dt(S,"SID",m.K),dt(S,"AID",m.T),dt(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&dt(S,"TO",m.ja),dt(S,"TYPE","xmlhttp"),Go(m,S),m.m&&m.o&&Ms(S,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=Fo(Wt(S)),C.m=null,C.P=!0,gi(C,m)}t.Za=function(){this.C!=null&&(this.C=null,Vs(this),fu(this),At(19))};function Ls(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Tf(m,S){var C=null;if(m.g==S){Ls(m),du(m),m.g=null;var P=2}else if(Is(m.h,S))C=S.D,Wi(m.h,S),P=1;else return;if(m.G!=0){if(S.o)if(P==1){C=S.m?S.m.length:0,S=Date.now()-S.F;var Y=m.B;P=Sn(),Ct(P,new ri(P,C)),La(m)}else _f(m);else if(Y=S.s,Y==3||Y==0&&0<S.X||!(P==1&&Kp(m,S)||P==2&&fu(m)))switch(C&&0<C.length&&(S=m.h,S.i=S.i.concat(C)),Y){case 1:Qr(m,5);break;case 4:Qr(m,10);break;case 3:Qr(m,6);break;default:Qr(m,2)}}}function Sf(m,S){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*S}function Qr(m,S){if(m.j.info("Error code "+S),S==2){var C=T(m.fb,m),P=m.Xa;const Y=!P;P=new Jr(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Rs(P,"https"),Fo(P),Y?au(P.toString(),C):hf(P.toString(),C)}else At(2);m.G=0,m.l&&m.l.sa(S),hu(m),yf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function hu(m){if(m.G=0,m.ka=[],m.l){const S=li(m.h);(S.length!=0||m.i.length!=0)&&(L(m.ka,S),L(m.ka,m.i),m.h.i.length=0,k(m.i),m.i.length=0),m.l.ra()}}function Af(m,S,C){var P=C instanceof Jr?Wt(C):new Jr(C);if(P.g!="")S&&(P.g=S+"."+P.g),Uo(P,P.s);else{var Y=c.location;P=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;var ie=new Jr(null);P&&Rs(ie,P),S&&(ie.g=S),Y&&Uo(ie,Y),C&&(ie.l=C),P=ie}return C=m.D,S=m.ya,C&&S&&dt(P,C,S),dt(P,"VER",m.la),Go(m,P),P}function wf(m,S,C){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new Ot(new Mr({eb:C})):new Ot(m.pa),S.Ha(m.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bf(){}t=bf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oa(){}Oa.prototype.g=function(m,S){return new ci(m,S)};function ci(m,S){ze.call(this),this.g=new gf(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!F(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Os(this)}R(ci,ze),ci.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ci.prototype.close=function(){uu(this.g)},ci.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=oe(m),m=C);S.i.push(new zp(S.Ya++,m)),S.G==3&&La(S)},ci.prototype.N=function(){this.g.l=null,delete this.j,uu(this.g),delete this.g,ci.aa.N.call(this)};function Cf(m){at.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const C in S){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}R(Cf,at);function If(){rt.call(this),this.status=1}R(If,rt);function Os(m){this.g=m}R(Os,bf),Os.prototype.ua=function(){Ct(this.g,"a")},Os.prototype.ta=function(m){Ct(this.g,new Cf(m))},Os.prototype.sa=function(m){Ct(this.g,new If)},Os.prototype.ra=function(){Ct(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,ci.prototype.send=ci.prototype.o,ci.prototype.open=ci.prototype.m,ci.prototype.close=ci.prototype.close,_I=function(){return new Oa},vI=function(){return Sn()},yI=ke,wy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lt.NO_ERROR=0,Lt.TIMEOUT=8,Lt.HTTP_ERROR=6,oh=Lt,sn.COMPLETE="complete",gI=sn,Ye.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",ze.prototype.listen=ze.prototype.K,oc=Ye,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,mI=Ot}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});const WS="@firebase/firestore",QS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new vv("@firebase/firestore");function yl(){return Ta.logLevel}function _e(t,...e){if(Ta.logLevel<=nt.DEBUG){const n=e.map(Dv);Ta.debug(`Firestore (${jl}): ${t}`,...n)}}function Ts(t,...e){if(Ta.logLevel<=nt.ERROR){const n=e.map(Dv);Ta.error(`Firestore (${jl}): ${t}`,...n)}}function wo(t,...e){if(Ta.logLevel<=nt.WARN){const n=e.map(Dv);Ta.warn(`Firestore (${jl}): ${t}`,...n)}}function Dv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,EI(t,i,n)}function EI(t,e,n){let i=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ts(i),new Error(i)}function Tt(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||EI(e,s,i)}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xn.UNAUTHENTICATED)))}shutdown(){}}class AP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class wP{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Tt(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let a=new da;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new da,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new da)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt(typeof i.accessToken=="string",31837,{l:i}),new TI(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class bP{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CP{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new bP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class XS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Tt(this.o===void 0,3512);const i=a=>{a.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new XS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new XS(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=xP(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function Je(t,e){return t<e?-1:t>e?1:0}function by(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return Je(i,s);{const a=SI(),l=RP(a.encode(ZS(t,n)),a.encode(ZS(e,n)));return l!==0?l:Je(i,s)}}n+=i>65535?2:1}return Je(t.length,e.length)}function ZS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function RP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Je(t[n],e[n]);return Je(t.length,e.length)}function Vl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="__name__";class Fr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Le(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Le(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=Fr.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Je(e.length,n.length)}static compareSegments(e,n){const i=Fr.isNumericId(e),s=Fr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Fr.extractNumericId(e).compare(Fr.extractNumericId(n)):by(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Eo.fromString(e.substring(4,e.length-2))}}class Pt extends Fr{construct(e,n,i){return new Pt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new Pt(n)}static emptyPath(){return new Pt([])}}const NP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Fr{construct(e,n,i){return new Gn(e,n,i)}static isValidIdentifier(e){return NP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eA}static keyField(){return new Gn([eA])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(n)}static emptyPath(){return new Gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Pt.fromString(e))}static fromName(e){return new Ne(Pt.fromString(e).popFirst(5))}static empty(){return new Ne(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t,e,n){if(!n)throw new Ee(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DP(t,e,n,i){if(e===!0&&i===!0)throw new Ee(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tA(t){if(!Ne.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nA(t){if(Ne.isDocumentKey(t))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function hp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Le(12329,{type:typeof t})}function To(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hp(t);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Xc(t,e){if(!wI(t))throw new Ee(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Ee(le.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=-62135596800,rA=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*rA);return new zt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iA)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rA}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xc(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:yn("string",zt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new zt(0,0))}static max(){return new Oe(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=-1;function MP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(i===1e9?new zt(n+1,0):new zt(n,i));return new bo(s,Ne.empty(),e)}function kP(t){return new bo(t.readTime,t.key,Lc)}class bo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new bo(Oe.min(),Ne.empty(),Lc)}static max(){return new bo(Oe.max(),Ne.empty(),Lc)}}function PP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==VP)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,i)=>{n(e)}))}static reject(e){return new ue(((n,i)=>{i(e)}))}static waitFor(e){return new ue(((n,i)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&n()}),(d=>i(d)))})),l=!0,a===s&&n()}))}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next((s=>s?ue.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,a)=>{i.push(n.call(this,s,a))})),this.waitFor(i)}static mapArray(e,n){return new ue(((i,s)=>{const a=e.length,l=new Array(a);let c=0;for(let d=0;d<a;d++){const h=d;n(e[h]).next((y=>{l[h]=y,++c,c===a&&i(l)}),(y=>s(y)))}}))}static doWhile(e,n){return new ue(((i,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):i()};a()}))}}function OP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}pp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=-1;function mp(t){return t==null}function Rh(t){return t===0&&1/t==-1/0}function UP(t){return typeof t=="number"&&Number.isInteger(t)&&!Rh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="";function FP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sA(e)),e=BP(t.get(n),e);return sA(e)}function BP(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case bI:n+="";break;default:n+=a}}return n}function sA(t){return t+bI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||Hn.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kd(this.root,e,this.comparator,!0)}}class kd{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??Hn.RED,this.left=s??Hn.EMPTY,this.right=a??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new Hn(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Hn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new Hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aA(this.data.getIterator())}getIteratorFrom(e){return new aA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new bn(this.comparator);return n.data=e,n}}class aA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new Bi([])}unionWith(e){let n=new bn(Gn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Bi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new II("Invalid base64 string: "+a):a}})(e);return new $n(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new $n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const qP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(t){if(Tt(!!t,39018),typeof t=="string"){let e=0;const n=qP.exec(t);if(Tt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ln(t.seconds),nanos:ln(t.nanos)}}function ln(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Io(t){return typeof t=="string"?$n.fromBase64String(t):$n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="server_timestamp",RI="__type__",NI="__previous_value__",DI="__local_write_time__";function Pv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[RI])===null||n===void 0?void 0:n.stringValue)===xI}function gp(t){const e=t.mapValue.fields[NI];return Pv(e)?gp(e):e}function Oc(t){const e=Co(t.mapValue.fields[DI].timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n,i,s,a,l,c,d,h,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=y}}const Nh="(default)";class Uc{constructor(e,n){this.projectId=e,this.database=n||Nh}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===Nh}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="__type__",HP="__max__",Pd={mapValue:{}},kI="__vector__",Dh="value";function xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pv(t)?4:$P(t)?9007199254740991:GP(t)?10:11:Le(28295,{value:t})}function $r(t,e){if(t===e)return!0;const n=xo(t);if(n!==xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oc(t).isEqual(Oc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Co(s.timestampValue),c=Co(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Io(s.bytesValue).isEqual(Io(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return ln(s.geoPointValue.latitude)===ln(a.geoPointValue.latitude)&&ln(s.geoPointValue.longitude)===ln(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return ln(s.integerValue)===ln(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=ln(s.doubleValue),c=ln(a.doubleValue);return l===c?Rh(l)===Rh(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Vl(t.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(oA(l)!==oA(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!$r(l[d],c[d])))return!1;return!0})(t,e);default:return Le(52216,{left:t})}}function Fc(t,e){return(t.values||[]).find((n=>$r(n,e)))!==void 0}function Ll(t,e){if(t===e)return 0;const n=xo(t),i=xo(e);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=ln(a.integerValue||a.doubleValue),d=ln(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return lA(t.timestampValue,e.timestampValue);case 4:return lA(Oc(t),Oc(e));case 5:return by(t.stringValue,e.stringValue);case 6:return(function(a,l){const c=Io(a),d=Io(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),d=l.split("/");for(let h=0;h<c.length&&h<d.length;h++){const y=Je(c[h],d[h]);if(y!==0)return y}return Je(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Je(ln(a.latitude),ln(l.latitude));return c!==0?c:Je(ln(a.longitude),ln(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return uA(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var c,d,h,y;const E=a.fields||{},T=l.fields||{},w=(c=E[Dh])===null||c===void 0?void 0:c.arrayValue,R=(d=T[Dh])===null||d===void 0?void 0:d.arrayValue,k=Je(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((y=R==null?void 0:R.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:uA(w,R)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Pd.mapValue&&l===Pd.mapValue)return 0;if(a===Pd.mapValue)return 1;if(l===Pd.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),h=l.fields||{},y=Object.keys(h);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const T=by(d[E],y[E]);if(T!==0)return T;const w=Ll(c[d[E]],h[y[E]]);if(w!==0)return w}return Je(d.length,y.length)})(t.mapValue,e.mapValue);default:throw Le(23264,{le:n})}}function lA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=Co(t),i=Co(e),s=Je(n.seconds,i.seconds);return s!==0?s:Je(n.nanos,i.nanos)}function uA(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=Ll(n[s],i[s]);if(a)return a}return Je(n.length,i.length)}function Ol(t){return Cy(t)}function Cy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=Co(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Io(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=Cy(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${Cy(n.fields[l])}`;return s+"}"})(t.mapValue):Le(61005,{value:t})}function ah(t){switch(xo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gp(t);return e?16+ah(e):16;case 5:return 2*t.stringValue.length;case 6:return Io(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+ah(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return Po(i.fields,((a,l)=>{s+=a.length+ah(l)})),s})(t.mapValue);default:throw Le(13486,{value:t})}}function cA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Iy(t){return!!t&&"integerValue"in t}function Vv(t){return!!t&&"arrayValue"in t}function fA(t){return!!t&&"nullValue"in t}function dA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lh(t){return!!t&&"mapValue"in t}function GP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[MI])===null||n===void 0?void 0:n.stringValue)===kI}function yc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Po(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=yc(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $P(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(n)}setAll(e){let n=Gn.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=c.popLast()}l?i[c.lastSegment()]=yc(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];lh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Po(n,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new bi(yc(this.value))}}function PI(t){const e=[];return Po(t.fields,((n,i)=>{const s=new Gn([n]);if(lh(i)){const a=PI(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Bi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,i,s,a,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Zn(e,0,Oe.min(),Oe.min(),Oe.min(),bi.empty(),0)}static newFoundDocument(e,n,i,s){return new Zn(e,1,n,Oe.min(),i,s,0)}static newNoDocument(e,n){return new Zn(e,2,n,Oe.min(),Oe.min(),bi.empty(),0)}static newUnknownDocument(e,n){return new Zn(e,3,n,Oe.min(),Oe.min(),bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.position=e,this.inclusive=n}}function hA(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(l.referenceValue),n.key):i=Ll(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function pA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n="asc"){this.field=e,this.dir=n}}function jP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{}class gn extends VI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new JP(e,n,i):n==="array-contains"?new QP(e,i):n==="in"?new XP(e,i):n==="not-in"?new ZP(e,i):n==="array-contains-any"?new eV(e,i):new gn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new YP(e,i):new WP(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ll(n,this.value)):n!==null&&xo(this.value)===xo(n)&&this.matchesComparison(Ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends VI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Cr(e,n)}matches(e){return LI(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function LI(t){return t.op==="and"}function OI(t){return KP(t)&&LI(t)}function KP(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function xy(t){if(t instanceof gn)return t.field.canonicalString()+t.op.toString()+Ol(t.value);if(OI(t))return t.filters.map((e=>xy(e))).join(",");{const e=t.filters.map((n=>xy(n))).join(",");return`${t.op}(${e})`}}function UI(t,e){return t instanceof gn?(function(i,s){return s instanceof gn&&i.op===s.op&&i.field.isEqual(s.field)&&$r(i.value,s.value)})(t,e):t instanceof Cr?(function(i,s){return s instanceof Cr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,l,c)=>a&&UI(l,s.filters[c])),!0):!1})(t,e):void Le(19439)}function FI(t){return t instanceof gn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`})(t):t instanceof Cr?(function(n){return n.op.toString()+" {"+n.getFilters().map(FI).join(" ,")+"}"})(t):"Filter"}class JP extends gn{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class YP extends gn{constructor(e,n){super(e,"in",n),this.keys=BI("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class WP extends gn{constructor(e,n){super(e,"not-in",n),this.keys=BI("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function BI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ne.fromName(i.referenceValue)))}class QP extends gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vv(n)&&Fc(n.arrayValue,this.value)}}class XP extends gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fc(this.value.arrayValue,n)}}class ZP extends gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fc(this.value.arrayValue,n)}}class eV extends gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Fc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n=null,i=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Pe=null}}function mA(t,e=null,n=[],i=[],s=null,a=null,l=null){return new tV(t,e,n,i,s,a,l)}function Lv(t){const e=qe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>xy(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),mp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ol(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ol(i))).join(",")),e.Pe=n}return e.Pe}function Ov(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pA(t.startAt,e.startAt)&&pA(t.endAt,e.endAt)}function Ry(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n=null,i=[],s=[],a=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function nV(t,e,n,i,s,a,l,c){return new Zc(t,e,n,i,s,a,l,c)}function Uv(t){return new Zc(t)}function gA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qI(t){return t.collectionGroup!==null}function vc(t){const e=qe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new bn(Gn.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new kh(a,i))})),n.has(Gn.keyField().canonicalString())||e.Te.push(new kh(Gn.keyField(),i))}return e.Te}function qr(t){const e=qe(t);return e.Ie||(e.Ie=iV(e,vc(t))),e.Ie}function iV(t,e){if(t.limitType==="F")return mA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new kh(s.field,a)}));const n=t.endAt?new Mh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Mh(t.startAt.position,t.startAt.inclusive):null;return mA(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ny(t,e){const n=t.filters.concat([e]);return new Zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dy(t,e,n){return new Zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yp(t,e){return Ov(qr(t),qr(e))&&t.limitType===e.limitType}function zI(t){return`${Lv(qr(t))}|lt:${t.limitType}`}function vl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>FI(s))).join(", ")}]`),mp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Ol(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Ol(s))).join(",")),`Target(${i})`})(qr(t))}; limitType=${t.limitType})`}function vp(t,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,s){for(const a of vc(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,d){const h=hA(l,c,d);return l.inclusive?h<=0:h<0})(i.startAt,vc(i),s)||i.endAt&&!(function(l,c,d){const h=hA(l,c,d);return l.inclusive?h>=0:h>0})(i.endAt,vc(i),s))})(t,e)}function rV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HI(t){return(e,n)=>{let i=!1;for(const s of vc(t)){const a=sV(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function sV(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(a,l,c){const d=l.data.field(a),h=c.data.field(a);return d!==null&&h!==null?Ll(d,h):Le(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,((n,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return CI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new Jt(Ne.comparator);function Ss(){return oV}const GI=new Jt(Ne.comparator);function ac(...t){let e=GI;for(const n of t)e=e.insert(n.key,n);return e}function $I(t){let e=GI;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function fa(){return _c()}function jI(){return _c()}function _c(){return new Ca((t=>t.toString()),((t,e)=>t.isEqual(e)))}const aV=new Jt(Ne.comparator),lV=new bn(Ne.comparator);function it(...t){let e=lV;for(const n of t)e=e.add(n);return e}const uV=new bn(Je);function cV(){return uV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function KI(t){return{integerValue:""+t}}function fV(t,e){return UP(e)?KI(e):Fv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this._=void 0}}function dV(t,e,n){return t instanceof Ph?(function(s,a){const l={fields:{[RI]:{stringValue:xI},[DI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Pv(a)&&(a=gp(a)),a&&(l.fields[NI]=a),{mapValue:l}})(n,e):t instanceof Bc?YI(t,e):t instanceof qc?WI(t,e):(function(s,a){const l=JI(s,a),c=yA(l)+yA(s.Ee);return Iy(l)&&Iy(s.Ee)?KI(c):Fv(s.serializer,c)})(t,e)}function hV(t,e,n){return t instanceof Bc?YI(t,e):t instanceof qc?WI(t,e):n}function JI(t,e){return t instanceof Vh?(function(i){return Iy(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Ph extends _p{}class Bc extends _p{constructor(e){super(),this.elements=e}}function YI(t,e){const n=QI(e);for(const i of t.elements)n.some((s=>$r(s,i)))||n.push(i);return{arrayValue:{values:n}}}class qc extends _p{constructor(e){super(),this.elements=e}}function WI(t,e){let n=QI(e);for(const i of t.elements)n=n.filter((s=>!$r(s,i)));return{arrayValue:{values:n}}}class Vh extends _p{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function yA(t){return ln(t.integerValue||t.doubleValue)}function QI(t){return Vv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pV(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Bc&&s instanceof Bc||i instanceof qc&&s instanceof qc?Vl(i.elements,s.elements,$r):i instanceof Vh&&s instanceof Vh?$r(i.Ee,s.Ee):i instanceof Ph&&s instanceof Ph})(t.transform,e.transform)}class mV{constructor(e,n){this.version=e,this.transformResults=n}}class br{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ep{}function XI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bv(t.key,br.none()):new ef(t.key,t.data,br.none());{const n=t.data,i=bi.empty();let s=new bn(Gn.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Vo(t.key,i,new Bi(s.toArray()),br.none())}}function gV(t,e,n){t instanceof ef?(function(s,a,l){const c=s.value.clone(),d=_A(s.fieldTransforms,a,l.transformResults);c.setAll(d),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Vo?(function(s,a,l){if(!uh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=_A(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(ZI(s)),d.setAll(c),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Ec(t,e,n,i){return t instanceof ef?(function(a,l,c,d){if(!uh(a.precondition,l))return c;const h=a.value.clone(),y=EA(a.fieldTransforms,d,l);return h.setAll(y),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Vo?(function(a,l,c,d){if(!uh(a.precondition,l))return c;const h=EA(a.fieldTransforms,d,l),y=l.data;return y.setAll(ZI(a)),y.setAll(h),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,l,c){return uh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function yV(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=JI(i.transform,s||null);a!=null&&(n===null&&(n=bi.empty()),n.set(i.field,a))}return n||null}function vA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Vl(i,s,((a,l)=>pV(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ef extends Ep{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vo extends Ep{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ZI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function _A(t,e,n){const i=new Map;Tt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,c=e.data.field(a.field);i.set(a.field,hV(l,c,n[s]))}return i}function EA(t,e,n){const i=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);i.set(s.field,dV(a,l,e))}return i}class Bv extends Ep{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vV extends Ep{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&gV(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ec(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ec(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=jI();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=n.has(s.key)?null:c;const d=XI(l,c);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),it())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,((n,i)=>vA(n,i)))&&Vl(this.baseMutations,e.baseMutations,((n,i)=>vA(n,i)))}}class qv{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Tt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=(function(){return aV})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new qv(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,lt;function SV(t){switch(t){case le.OK:return Le(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Le(15467,{code:t})}}function ex(t){if(t===void 0)return Ts("GRPC error has no .code"),le.UNKNOWN;switch(t){case mn.OK:return le.OK;case mn.CANCELLED:return le.CANCELLED;case mn.UNKNOWN:return le.UNKNOWN;case mn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case mn.INTERNAL:return le.INTERNAL;case mn.UNAVAILABLE:return le.UNAVAILABLE;case mn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case mn.NOT_FOUND:return le.NOT_FOUND;case mn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case mn.ABORTED:return le.ABORTED;case mn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case mn.DATA_LOSS:return le.DATA_LOSS;default:return Le(39323,{code:t})}}(lt=mn||(mn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=new Eo([4294967295,4294967295],0);function TA(t){const e=SI().encode(t),n=new pI;return n.update(e),new Uint8Array(n.digest())}function SA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Eo([n,i],0),new Eo([s,a],0)]}class zv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new lc(`Invalid padding: ${n}`);if(i<0)throw new lc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new lc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Eo.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(Eo.fromNumber(i)));return s.compare(AV)===1&&(s=new Eo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=TA(e),[i,s]=SA(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);if(!this.ye(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new zv(a,s,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=TA(e),[i,s]=SA(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,tf.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Tp(Oe.min(),s,new Jt(Je),Ss(),it())}}class tf{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new tf(i,n,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class tx{constructor(e,n){this.targetId=e,this.De=n}}class nx{constructor(e,n,i=$n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class AA{constructor(){this.ve=0,this.Ce=wA(),this.Fe=$n.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=it(),n=it(),i=it();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Le(38017,{changeType:a})}})),new tf(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=wA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class wV{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ss(),this.je=Vd(),this.Je=Vd(),this.He=new Jt(Je)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const a=s.target;if(Ry(a))if(i===0){const l=new Ne(a.path);this.Xe(n,l,Zn.newNoDocument(l,Oe.min()))}else Tt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let l,c;try{l=Io(i).toUint8Array()}catch(d){if(d instanceof II)return wo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new zv(l,s,a)}catch(d){return wo(d instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach((a=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,a,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((a,l)=>{const c=this.st(l);if(c){if(a.current&&Ry(c.target)){const d=new Ne(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,Zn.newNoDocument(d,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}}));let i=it();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((d=>{const h=this.st(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.ze.forEach(((a,l)=>l.setReadTime(e)));const s=new Tp(e,n,this.He,this.ze,i);return this.ze=Ss(),this.je=Vd(),this.Je=Vd(),this.He=new Jt(Je),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new AA,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new bn(Je),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new bn(Je),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new AA),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Vd(){return new Jt(Ne.comparator)}function wA(){return new Jt(Ne.comparator)}const bV={asc:"ASCENDING",desc:"DESCENDING"},CV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IV={and:"AND",or:"OR"};class xV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function My(t,e){return t.useProto3Json||mp(e)?e:{value:e}}function Lh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ix(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RV(t,e){return Lh(t,e.toTimestamp())}function zr(t){return Tt(!!t,49232),Oe.fromTimestamp((function(n){const i=Co(n);return new zt(i.seconds,i.nanos)})(t))}function Hv(t,e){return ky(t,e).canonicalString()}function ky(t,e){const n=(function(s){return new Pt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function rx(t){const e=Pt.fromString(t);return Tt(ux(e),10190,{key:e.toString()}),e}function Py(t,e){return Hv(t.databaseId,e.path)}function ey(t,e){const n=rx(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(ox(n))}function sx(t,e){return Hv(t.databaseId,e)}function NV(t){const e=rx(t);return e.length===4?Pt.emptyPath():ox(e)}function Vy(t){return new Pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ox(t){return Tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bA(t,e,n){return{name:Py(t,e),fields:n.value.mapValue.fields}}function DV(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Le(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,y){return h.useProto3Json?(Tt(y===void 0||typeof y=="string",58123),$n.fromBase64String(y||"")):(Tt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),$n.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(h){const y=h.code===void 0?le.UNKNOWN:ex(h.code);return new Ee(y,h.message||"")})(l);n=new nx(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=ey(t,i.document.name),a=zr(i.document.updateTime),l=i.document.createTime?zr(i.document.createTime):Oe.min(),c=new bi({mapValue:{fields:i.document.fields}}),d=Zn.newFoundDocument(s,a,l,c),h=i.targetIds||[],y=i.removedTargetIds||[];n=new ch(h,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=ey(t,i.document),a=i.readTime?zr(i.readTime):Oe.min(),l=Zn.newNoDocument(s,a),c=i.removedTargetIds||[];n=new ch([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=ey(t,i.document),a=i.removedTargetIds||[];n=new ch([],a,s,null)}else{if(!("filter"in e))return Le(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new TV(s,a),c=i.targetId;n=new tx(c,l)}}return n}function MV(t,e){let n;if(e instanceof ef)n={update:bA(t,e.key,e.value)};else if(e instanceof Bv)n={delete:Py(t,e.key)};else if(e instanceof Vo)n={update:bA(t,e.key,e.data),updateMask:qV(e.fieldMask)};else{if(!(e instanceof vV))return Le(16599,{Rt:e.type});n={verify:Py(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof Ph)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Vh)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Le(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:RV(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Le(27497)})(t,e.precondition)),n}function kV(t,e){return t&&t.length>0?(Tt(e!==void 0,14353),t.map((n=>(function(s,a){let l=s.updateTime?zr(s.updateTime):zr(a);return l.isEqual(Oe.min())&&(l=zr(a)),new mV(l,s.transformResults||[])})(n,e)))):[]}function PV(t,e){return{documents:[sx(t,e.path)]}}function VV(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=sx(t,s);const a=(function(h){if(h.length!==0)return lx(Cr.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((y=>(function(T){return{field:_l(T.field),direction:UV(T.dir)}})(y)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=My(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{Vt:n,parent:s}}function LV(t){let e=NV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Tt(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];n.where&&(a=(function(E){const T=ax(E);return T instanceof Cr&&OI(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(E){return E.map((T=>(function(R){return new kh(El(R.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(E){let T;return T=typeof E=="object"?E.value:E,mp(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(E){const T=!!E.before,w=E.values||[];return new Mh(w,T)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const T=!E.before,w=E.values||[];return new Mh(w,T)})(n.endAt)),nV(e,s,l,a,c,"F",d,h)}function OV(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ax(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=El(n.unaryFilter.field);return gn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=El(n.unaryFilter.field);return gn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=El(n.unaryFilter.field);return gn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=El(n.unaryFilter.field);return gn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(t):t.fieldFilter!==void 0?(function(n){return gn.create(El(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Cr.create(n.compositeFilter.filters.map((i=>ax(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(n.compositeFilter.op))})(t):Le(30097,{filter:t})}function UV(t){return bV[t]}function FV(t){return CV[t]}function BV(t){return IV[t]}function _l(t){return{fieldPath:t.canonicalString()}}function El(t){return Gn.fromServerFormat(t.fieldPath)}function lx(t){return t instanceof gn?(function(n){if(n.op==="=="){if(dA(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NAN"}};if(fA(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dA(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NAN"}};if(fA(n.value))return{unaryFilter:{field:_l(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(n.field),op:FV(n.op),value:n.value}}})(t):t instanceof Cr?(function(n){const i=n.getFilters().map((s=>lx(s)));return i.length===1?i[0]:{compositeFilter:{op:BV(n.op),filters:i}}})(t):Le(54877,{filter:t})}function qV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ux(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,i,s,a=Oe.min(),l=Oe.min(),c=$n.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.gt=e}}function HV(t){const e=LV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(){this.Dn=new $V}addToCollectionParentIndex(e,n){return this.Dn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(bo.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class $V{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new bn(Pt.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new bn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cx=41943040;class wi{static withCacheSize(e){return new wi(e,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wi.DEFAULT=new wi(cx,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wi.DISABLED=new wi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ul(0)}static ur(){return new Ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="LruGarbageCollector",jV=1048576;function xA([t,e],[n,i]){const s=Je(t,n);return s===0?Je(e,i):s}class KV{constructor(e){this.Tr=e,this.buffer=new bn(xA),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();xA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(IA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jl(n)?_e(IA,"Ignoring IndexedDB error during garbage collection: ",n):await Kl(n)}await this.Rr(3e5)}))}}class YV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(pp.ue);const i=new KV(n);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(CA)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CA):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,a,l,c,d,h;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,c=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),yl()<=nt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${E} documents in `+(h-d)+`ms
Total Duration: ${h-y}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function WV(t,e){return new YV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.changes=new Ca((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&Ec(i.mutation,s,Bi.empty(),zt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,it()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=it()){const s=fa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((a=>{let l=ac();return a.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=fa();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,it())))}populateOverlays(e,n,i){const s=[];return i.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,s){let a=Ss();const l=_c(),c=(function(){return _c()})();return n.forEach(((d,h)=>{const y=i.get(h.key);s.has(h.key)&&(y===void 0||y.mutation instanceof Vo)?a=a.insert(h.key,h):y!==void 0?(l.set(h.key,y.mutation.getFieldMask()),Ec(y.mutation,h,y.mutation.getFieldMask(),zt.now())):l.set(h.key,Bi.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,y)=>l.set(h,y))),n.forEach(((h,y)=>{var E;return c.set(h,new XV(y,(E=l.get(h))!==null&&E!==void 0?E:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=_c();let s=new Jt(((l,c)=>l-c)),a=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const h=n.get(d);if(h===null)return;let y=i.get(d)||Bi.empty();y=c.applyToLocalView(h,y),i.set(d,y);const E=(s.get(c.batchId)||it()).add(d);s=s.insert(c.batchId,E)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,y=d.value,E=jI();y.forEach((T=>{if(!a.has(T)){const w=XI(n.get(T),i.get(T));w!==null&&E.set(T,w),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ue.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):ue.resolve(fa());let c=Lc,d=a;return l.next((h=>ue.forEach(h,((y,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),a.get(y)?ue.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{d=d.insert(y,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,it()))).next((y=>({batchId:c,changes:$I(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((i=>{let s=ac();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let l=ac();return this.indexManager.getCollectionParents(e,a).next((c=>ue.forEach(c,(d=>{const h=(function(E,T){return new Zc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((y=>{y.forEach(((E,T)=>{l=l.insert(E,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s)))).next((l=>{a.forEach(((d,h)=>{const y=h.getKey();l.get(y)===null&&(l=l.insert(y,Zn.newInvalidDocument(y)))}));let c=ac();return l.forEach(((d,h)=>{const y=a.get(d);y!==void 0&&Ec(y.mutation,h,Bi.empty(),zt.now()),vp(n,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:zr(s.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:HV(s.bundledQuery),readTime:zr(s.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.overlays=new Jt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=fa();return ue.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,a)=>{this.wt(e,n,a)})),ue.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const s=fa(),a=n.length+1,l=new Ne(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new Jt(((h,y)=>h-y));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let y=a.get(h.largestBatchId);y===null&&(y=fa(),a=a.insert(h.largestBatchId,y)),y.set(h.getKey(),h)}}const c=fa(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,y)=>c.set(h,y))),!(c.size()>=s)););return ue.resolve(c)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new EV(n,i));let a=this.kr.get(n);a===void 0&&(a=it(),this.kr.set(n,a)),this.kr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.qr=new bn(Vn.Qr),this.$r=new bn(Vn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Vn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Vn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Ne(new Pt([])),i=new Vn(n,e),s=new Vn(n,e+1),a=[];return this.$r.forEachInRange([i,s],(l=>{this.Wr(l),a.push(l.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Pt([])),i=new Vn(n,e),s=new Vn(n,e+1);let a=it();return this.$r.forEachInRange([i,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new Vn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Vn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||Je(e.Hr,n.Hr)}static Ur(e,n){return Je(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new bn(Vn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new _V(a,n,i,s);this.mutationQueue.push(l);for(const c of s)this.Yr=this.Yr.add(new Vn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),a=s<0?0:s;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?kv:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Vn(n,0),s=new Vn(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,s],(l=>{const c=this.Zr(l.Hr);a.push(c)})),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bn(Je);return n.forEach((s=>{const a=new Vn(s,0),l=new Vn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],(c=>{i=i.add(c.Hr)}))})),ue.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const l=new Vn(new Ne(a),0);let c=new bn(Je);return this.Yr.forEachWhile((d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Hr)),!0)}),l),ue.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Tt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ue.forEach(n.mutations,(s=>{const a=new Vn(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Vn(n,0),s=this.Yr.firstAfterOrEqual(i);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.ni=e,this.docs=(function(){return new Jt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Zn.newInvalidDocument(n))}getEntries(e,n){let i=Ss();return n.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Zn.newInvalidDocument(s))})),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=Ss();const l=n.path,c=new Ne(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:y}}=d.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||PP(kP(y),i)<=0||(s.has(y.key)||vp(n,y))&&(a=a.insert(y.key,y.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,s){Le(9500)}ri(e,n){return ue.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new sL(this)}getSize(e){return ue.resolve(this.size)}}class sL extends QV{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)})),ue.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.persistence=e,this.ii=new Ca((n=>Lv(n)),Ov),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.si=0,this.oi=new Gv,this.targetCount=0,this._i=Ul.ar()}forEachTarget(e,n){return this.ii.forEach(((i,s)=>n(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),ue.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ul(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.hr(n),ue.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ue.waitFor(a).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n){this.ai={},this.overlays={},this.ui=new pp(0),this.ci=!1,this.ci=!0,this.li=new nL,this.referenceDelegate=e(this),this.hi=new oL(this),this.indexManager=new GV,this.remoteDocumentCache=(function(s){return new rL(s)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new zV(n),this.Ti=new eL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new iL(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const s=new aL(this.ui.next());return this.referenceDelegate.Ii(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,n){return ue.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class aL extends LP{constructor(e){super(),this.currentSequenceNumber=e}}class $v{constructor(e){this.persistence=e,this.Ai=new Gv,this.Ri=null}static Vi(e){return new $v(e)}get mi(){if(this.Ri)return this.Ri;throw Le(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(i=>{const s=Ne.fromPath(i);return this.fi(e,s).next((a=>{a||n.removeEntry(s,Oe.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ue.or([()=>ue.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Oh{constructor(e,n){this.persistence=e,this.gi=new Ca((i=>FP(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=WV(this,n)}static Vi(e,n){return new Oh(e,n)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return ue.forEach(this.gi,((i,s)=>this.Sr(e,i,s).next((a=>a?ue.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,a.removeEntry(l,Oe.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ah(e.data.value)),n}Sr(e,n,i){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ue.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=it(),s=it();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new jv(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return BD()?8:OP(ti())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ps(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ys(e,n,s,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new lL;return this.ws(e,n,l).next((c=>{if(a.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>a.result))}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(yl()<=nt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",vl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(yl()<=nt.DEBUG&&_e("QueryEngine","Query:",vl(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(yl()<=nt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",vl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(n))):ue.resolve())}ps(e,n){if(gA(n))return ue.resolve(null);let i=qr(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Dy(n,null,"F"),i=qr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=it(...a);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const h=this.bs(n,c);return this.Ds(n,h,l,d.readTime)?this.ps(e,Dy(n,null,"F")):this.vs(e,h,n,d)}))))})))))}ys(e,n,i,s){return gA(n)||s.isEqual(Oe.min())?ue.resolve(null):this.gs.getDocuments(e,i).next((a=>{const l=this.bs(n,a);return this.Ds(n,l,i,s)?ue.resolve(null):(yl()<=nt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vl(n)),this.vs(e,l,n,MP(s,Lc)).next((c=>c)))}))}bs(e,n){let i=new bn(HI(e));return n.forEach(((s,a)=>{vp(e,a)&&(i=i.add(a))})),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,i){return yl()<=nt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",vl(n)),this.gs.getDocumentsMatchingQuery(e,n,bo.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="LocalStore",cL=3e8;class fL{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Jt(Je),this.Ms=new Ca((a=>Lv(a)),Ov),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function dL(t,e,n,i){return new fL(t,e,n,i)}async function dx(t,e){const n=qe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let d=it();for(const h of s){l.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}for(const h of a){c.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next((h=>({Bs:h,removedBatchIds:l,addedBatchIds:c})))}))}))}function hL(t,e){const n=qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,y){const E=h.batch,T=E.keys();let w=ue.resolve();return T.forEach((R=>{w=w.next((()=>y.getEntry(d,R))).next((k=>{const L=h.docVersions.get(R);Tt(L!==null,48541),k.version.compareTo(L)<0&&(E.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),y.addEntry(k)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(d,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=it();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function hx(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function pL(t,e){const n=qe(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach(((y,E)=>{const T=s.get(E);if(!T)return;c.push(n.hi.removeMatchingKeys(a,y.removedDocuments,E).next((()=>n.hi.addMatchingKeys(a,y.addedDocuments,E))));let w=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken($n.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),s=s.insert(E,w),(function(k,L,z){return k.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=cL?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,w,y)&&c.push(n.hi.updateTargetData(a,w))}));let d=Ss(),h=it();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,y))})),c.push(mL(a,l,e.documentUpdates).next((y=>{d=y.Ls,h=y.ks}))),!i.isEqual(Oe.min())){const y=n.hi.getLastRemoteSnapshotVersion(a).next((E=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(y)}return ue.waitFor(c).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(n.Fs=s,a)))}function mL(t,e,n){let i=it(),s=it();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let l=Ss();return n.forEach(((c,d)=>{const h=a.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Oe.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):_e(Kv,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ls:l,ks:s}}))}function gL(t,e){const n=qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=kv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function yL(t,e){const n=qe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.hi.getTargetData(i,e).next((a=>a?(s=a,ue.resolve(s)):n.hi.allocateTargetId(i).next((l=>(s=new go(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function Ly(t,e,n){const i=qe(t),s=i.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Jl(l))throw l;_e(Kv,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function RA(t,e,n){const i=qe(t);let s=Oe.min(),a=it();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,h,y){const E=qe(d),T=E.Ms.get(y);return T!==void 0?ue.resolve(E.Fs.get(T)):E.hi.getTargetData(h,y)})(i,l,qr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{a=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:Oe.min(),n?a:it()))).next((c=>(vL(i,rV(e),c),{documents:c,qs:a})))))}function vL(t,e,n){let i=t.xs.get(e)||Oe.min();n.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.xs.set(e,i)}class NA{constructor(){this.activeTargetIds=cV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _L{constructor(){this.Fo=new NA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new NA,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="ConnectivityMonitor";class MA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(DA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_e(DA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld=null;function Oy(){return Ld===null?Ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ld++,"0x"+Ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="RestConnection",TL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Nh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,a){const l=Oy(),c=this.Go(e,n.toUriEncodedString());_e(ty,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,a);const{host:h}=new URL(c),y=ws(h);return this.jo(e,c,d,i,y).then((E=>(_e(ty,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw wo(ty,`RPC '${e}' ${l} failed with error: `,E,"url: ",c,"request:",i),E}))}Jo(e,n,i,s,a,l){return this.Wo(e,n,i,s,a)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Go(e,n){const i=TL[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="WebChannelConnection";class wL extends SL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,a){const l=Oy();return new Promise(((c,d)=>{const h=new mI;h.setWithCredentials(!0),h.listenOnce(gI.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case oh.NO_ERROR:const E=h.getResponseJson();_e(Yn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case oh.TIMEOUT:_e(Yn,`RPC '${e}' ${l} timed out`),d(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const T=h.getStatus();if(_e(Yn,`RPC '${e}' ${l} failed with status:`,T,"response text:",h.getResponseText()),T>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const R=w==null?void 0:w.error;if(R&&R.status&&R.message){const k=(function(z){const F=z.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(F)>=0?F:le.UNKNOWN})(R.status);d(new Ee(k,R.message))}else d(new Ee(le.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{c_:e,streamId:l,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{_e(Yn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(s);_e(Yn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",y,i,15)}))}P_(e,n,i){const s=Oy(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=_I(),c=vI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const y=a.join("");_e(Yn,`Creating RPC '${e}' stream ${s}: ${y}`,d);const E=l.createWebChannel(y,d);this.T_(E);let T=!1,w=!1;const R=new AL({Ho:L=>{w?_e(Yn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(T||(_e(Yn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),_e(Yn,`RPC '${e}' stream ${s} sending:`,L),E.send(L))},Yo:()=>E.close()}),k=(L,z,F)=>{L.listen(z,(B=>{try{F(B)}catch(K){setTimeout((()=>{throw K}),0)}}))};return k(E,oc.EventType.OPEN,(()=>{w||(_e(Yn,`RPC '${e}' stream ${s} transport opened.`),R.s_())})),k(E,oc.EventType.CLOSE,(()=>{w||(w=!0,_e(Yn,`RPC '${e}' stream ${s} transport closed`),R.__(),this.I_(E))})),k(E,oc.EventType.ERROR,(L=>{w||(w=!0,wo(Yn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),R.__(new Ee(le.UNAVAILABLE,"The operation could not be completed")))})),k(E,oc.EventType.MESSAGE,(L=>{var z;if(!w){const F=L.data[0];Tt(!!F,16349);const B=F,K=(B==null?void 0:B.error)||((z=B[0])===null||z===void 0?void 0:z.error);if(K){_e(Yn,`RPC '${e}' stream ${s} received error:`,K);const X=K.status;let G=(function(N){const V=mn[N];if(V!==void 0)return ex(V)})(X),I=K.message;G===void 0&&(G=le.INTERNAL,I="Unknown error status: "+X+" with message "+K.message),w=!0,R.__(new Ee(G,I)),E.close()}else _e(Yn,`RPC '${e}' stream ${s} received:`,F),R.a_(F)}})),k(c,yI.STAT_EVENT,(L=>{L.stat===wy.PROXY?_e(Yn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===wy.NOPROXY&&_e(Yn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.o_()}),0),R}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function ny(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){return new xV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="PersistentStream";class mx{constructor(e,n,i,s,a,l,c,d){this.Fi=e,this.w_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new px(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Ts(n.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.b_===n&&this.W_(i,s)}),(i=>{e((()=>{const s=new Ee(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{i((()=>this.G_(s)))})),this.stream.onMessage((s=>{i((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return _e(kA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(_e(kA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bL extends mx{constructor(e,n,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=DV(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Oe.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?zr(l.readTime):Oe.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Vy(this.serializer),n.addTarget=(function(a,l){let c;const d=l.target;if(c=Ry(d)?{documents:PV(a,d)}:{query:VV(a,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=ix(a,l.resumeToken);const h=My(a,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Oe.min())>0){c.readTime=Lh(a,l.snapshotVersion.toTimestamp());const h=My(a,l.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=OV(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Vy(this.serializer),n.removeTarget=e,this.k_(n)}}class CL extends mx{constructor(e,n,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=kV(e.writeResults,e.commitTime),i=zr(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Vy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>MV(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{}class xL extends IL{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,ky(n,i),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(le.UNKNOWN,a.toString())}))}Jo(e,n,i,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,ky(n,i),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(le.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class RL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ts(n),this._a=!1):_e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class NL{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{Ia(this)&&(_e(Sa,"Restarting streams for network reachability change."),await(async function(d){const h=qe(d);h.Ia.add(4),await nf(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Ap(h)})(this))}))})),this.Aa=new RL(i,s)}}async function Ap(t){if(Ia(t))for(const e of t.da)await e(!0)}async function nf(t){for(const e of t.da)await e(!1)}function gx(t,e){const n=qe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Qv(n)?Wv(n):Yl(n).x_()&&Yv(n,e))}function Jv(t,e){const n=qe(t),i=Yl(n);n.Ta.delete(e),i.x_()&&yx(n,e),n.Ta.size===0&&(i.x_()?i.B_():Ia(n)&&n.Aa.set("Unknown"))}function Yv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(t).H_(e)}function yx(t,e){t.Ra.$e(e),Yl(t).Y_(e)}function Wv(t){t.Ra=new wV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Yl(t).start(),t.Aa.aa()}function Qv(t){return Ia(t)&&!Yl(t).M_()&&t.Ta.size>0}function Ia(t){return qe(t).Ia.size===0}function vx(t){t.Ra=void 0}async function DL(t){t.Aa.set("Online")}async function ML(t){t.Ta.forEach(((e,n)=>{Yv(t,e)}))}async function kL(t,e){vx(t),Qv(t)?(t.Aa.la(e),Wv(t)):t.Aa.set("Unknown")}async function PL(t,e,n){if(t.Aa.set("Online"),e instanceof nx&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ta.delete(c),s.Ra.removeTarget(c))})(t,e)}catch(i){_e(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Uh(t,i)}else if(e instanceof ch?t.Ra.Ye(e):e instanceof tx?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Oe.min()))try{const i=await hx(t.localStore);n.compareTo(i)>=0&&await(function(a,l){const c=a.Ra.Pt(l);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const y=a.Ta.get(h);y&&a.Ta.set(h,y.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,h)=>{const y=a.Ta.get(d);if(!y)return;a.Ta.set(d,y.withResumeToken($n.EMPTY_BYTE_STRING,y.snapshotVersion)),yx(a,d);const E=new go(y.target,d,h,y.sequenceNumber);Yv(a,E)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){_e(Sa,"Failed to raise snapshot:",i),await Uh(t,i)}}async function Uh(t,e,n){if(!Jl(e))throw e;t.Ia.add(1),await nf(t),t.Aa.set("Offline"),n||(n=()=>hx(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_e(Sa,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ap(t)}))}function _x(t,e){return e().catch((n=>Uh(t,n,e)))}async function wp(t){const e=qe(t),n=Ro(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:kv;for(;VL(e);)try{const s=await gL(e.localStore,i);if(s===null){e.Pa.length===0&&n.B_();break}i=s.batchId,LL(e,s)}catch(s){await Uh(e,s)}Ex(e)&&Tx(e)}function VL(t){return Ia(t)&&t.Pa.length<10}function LL(t,e){t.Pa.push(e);const n=Ro(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Ex(t){return Ia(t)&&!Ro(t).M_()&&t.Pa.length>0}function Tx(t){Ro(t).start()}async function OL(t){Ro(t).na()}async function UL(t){const e=Ro(t);for(const n of t.Pa)e.X_(n.mutations)}async function FL(t,e,n){const i=t.Pa.shift(),s=qv.from(i,e,n);await _x(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await wp(t)}async function BL(t,e){e&&Ro(t).Z_&&await(async function(i,s){if((function(l){return SV(l)&&l!==le.ABORTED})(s.code)){const a=i.Pa.shift();Ro(i).N_(),await _x(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await wp(i)}})(t,e),Ex(t)&&Tx(t)}async function PA(t,e){const n=qe(t);n.asyncQueue.verifyOperationInProgress(),_e(Sa,"RemoteStore received new credentials");const i=Ia(n);n.Ia.add(3),await nf(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ap(n)}async function qL(t,e){const n=qe(t);e?(n.Ia.delete(2),await Ap(n)):e||(n.Ia.add(2),await nf(n),n.Aa.set("Unknown"))}function Yl(t){return t.Va||(t.Va=(function(n,i,s){const a=qe(n);return a.ia(),new bL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:DL.bind(null,t),e_:ML.bind(null,t),n_:kL.bind(null,t),J_:PL.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),Qv(t)?Wv(t):t.Aa.set("Unknown")):(await t.Va.stop(),vx(t))}))),t.Va}function Ro(t){return t.ma||(t.ma=(function(n,i,s){const a=qe(n);return a.ia(),new CL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:OL.bind(null,t),n_:BL.bind(null,t),ea:UL.bind(null,t),ta:FL.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await wp(t)):(await t.ma.stop(),t.Pa.length>0&&(_e(Sa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const l=Date.now()+i,c=new Xv(e,n,l,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zv(t,e){if(Ts("AsyncQueue",`${e}: ${t}`),Jl(t))return new Ee(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{static emptySet(e){return new Il(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=ac(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Il)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Il;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.fa=new Jt(Ne.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Le(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Fl{constructor(e,n,i,s,a,l,c,d,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,a){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Fl(e,n,Il.emptySet(n),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class HL{constructor(){this.queries=LA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=qe(n),a=s.queries;s.queries=LA(),a.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function LA(){return new Ca((t=>zI(t)),yp)}async function GL(t,e){const n=qe(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(i=2):(a=new zL,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=Zv(l,`Initialization of query '${vl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&e0(n)}async function $L(t,e){const n=qe(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function jL(t,e){const n=qe(t);let i=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const c of l.wa)c.Ca(s)&&(i=!0);l.ya=s}}i&&e0(n)}function KL(t,e,n){const i=qe(t),s=i.queries.get(e);if(s)for(const a of s.wa)a.onError(n);i.queries.delete(e)}function e0(t){t.Da.forEach((e=>{e.next()}))}var Uy,OA;(OA=Uy||(Uy={})).Fa="default",OA.Cache="cache";class JL{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Fl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.key=e}}class Ax{constructor(e){this.key=e}}class YL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=it(),this.mutatedKeys=it(),this.Xa=HI(e),this.eu=new Il(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new VA,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const T=s.get(y),w=vp(this.query,E)?E:null,R=!!T&&this.mutatedKeys.has(T.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let L=!1;T&&w?T.data.isEqual(w.data)?R!==k&&(i.track({type:3,doc:w}),L=!0):this.iu(T,w)||(i.track({type:2,doc:w}),L=!0,(d&&this.Xa(w,d)>0||h&&this.Xa(w,h)<0)&&(c=!0)):!T&&w?(i.track({type:0,doc:w}),L=!0):T&&!w&&(i.track({type:1,doc:T}),L=!0,(d||h)&&(c=!0)),L&&(w?(l=l.add(w),a=k?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{eu:l,ru:i,Ds:c,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((y,E)=>(function(w,R){const k=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{At:L})}};return k(w)-k(R)})(y.type,E.type)||this.Xa(y.doc,E.doc))),this.su(i),s=s!=null&&s;const c=n&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,h=d!==this.Ya;return this.Ya=d,l.length!==0||h?{snapshot:new Fl(this.query,e.eu,a,l,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new VA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=it(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new Ax(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new Sx(i))})),n}uu(e){this.Ha=e.qs,this.Za=it();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Fl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const t0="SyncEngine";class WL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class QL{constructor(e){this.key=e,this.lu=!1}}class XL{constructor(e,n,i,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new Ca((c=>zI(c)),yp),this.Tu=new Map,this.Iu=new Set,this.du=new Jt(Ne.comparator),this.Eu=new Map,this.Au=new Gv,this.Ru={},this.Vu=new Map,this.mu=Ul.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function ZL(t,e,n=!0){const i=Rx(t);let s;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await wx(i,e,n,!0),s}async function eO(t,e){const n=Rx(t);await wx(n,e,!0,!1)}async function wx(t,e,n,i){const s=await yL(t.localStore,qr(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let c;return i&&(c=await tO(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&gx(t.remoteStore,s),c}async function tO(t,e,n,i,s){t.gu=(E,T,w)=>(async function(k,L,z,F){let B=L.view.nu(z);B.Ds&&(B=await RA(k.localStore,L.query,!1).then((({documents:I})=>L.view.nu(I,B))));const K=F&&F.targetChanges.get(L.targetId),X=F&&F.targetMismatches.get(L.targetId)!=null,G=L.view.applyChanges(B,k.isPrimaryClient,K,X);return FA(k,L.targetId,G._u),G.snapshot})(t,E,T,w);const a=await RA(t.localStore,e,!0),l=new YL(e,a.qs),c=l.nu(a.documents),d=tf.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,d);FA(t,n,h._u);const y=new WL(e,n,l);return t.Pu.set(e,y),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function nO(t,e,n){const i=qe(t),s=i.Pu.get(e),a=i.Tu.get(s.targetId);if(a.length>1)return i.Tu.set(s.targetId,a.filter((l=>!yp(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Ly(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Jv(i.remoteStore,s.targetId),Fy(i,s.targetId)})).catch(Kl)):(Fy(i,s.targetId),await Ly(i.localStore,s.targetId,!0))}async function iO(t,e){const n=qe(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Jv(n.remoteStore,i.targetId))}async function rO(t,e,n){const i=fO(t);try{const s=await(function(l,c){const d=qe(l),h=zt.now(),y=c.reduce(((w,R)=>w.add(R.key)),it());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let R=Ss(),k=it();return d.Os.getEntries(w,y).next((L=>{R=L,R.forEach(((z,F)=>{F.isValidDocument()||(k=k.add(z))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,R))).next((L=>{E=L;const z=[];for(const F of c){const B=yV(F,E.get(F.key).overlayedDocument);B!=null&&z.push(new Vo(F.key,B,PI(B.value.mapValue),br.exists(!0)))}return d.mutationQueue.addMutationBatch(w,h,z,c)})).next((L=>{T=L;const z=L.applyToLocalDocumentSet(E,k);return d.documentOverlayCache.saveOverlays(w,L.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:$I(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,d){let h=l.Ru[l.currentUser.toKey()];h||(h=new Jt(Je)),h=h.insert(c,d),l.Ru[l.currentUser.toKey()]=h})(i,s.batchId,n),await rf(i,s.changes),await wp(i.remoteStore)}catch(s){const a=Zv(s,"Failed to persist write");n.reject(a)}}async function bx(t,e){const n=qe(t);try{const i=await pL(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Eu.get(a);l&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?Tt(l.lu,14607):s.removedDocuments.size>0&&(Tt(l.lu,42227),l.lu=!1))})),await rf(n,i,e)}catch(i){await Kl(i)}}function UA(t,e,n){const i=qe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const d=qe(l);d.onlineState=c;let h=!1;d.queries.forEach(((y,E)=>{for(const T of E.wa)T.va(c)&&(h=!0)})),h&&e0(d)})(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function sO(t,e,n){const i=qe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),a=s&&s.key;if(a){let l=new Jt(Ne.comparator);l=l.insert(a,Zn.newNoDocument(a,Oe.min()));const c=it().add(a),d=new Tp(Oe.min(),new Map,new Jt(Je),l,c);await bx(i,d),i.du=i.du.remove(a),i.Eu.delete(e),n0(i)}else await Ly(i.localStore,e,!1).then((()=>Fy(i,e,n))).catch(Kl)}async function oO(t,e){const n=qe(t),i=e.batch.batchId;try{const s=await hL(n.localStore,e);Ix(n,i,null),Cx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await rf(n,s)}catch(s){await Kl(s)}}async function aO(t,e,n){const i=qe(t);try{const s=await(function(l,c){const d=qe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let y;return d.mutationQueue.lookupMutationBatch(h,c).next((E=>(Tt(E!==null,37113),y=E.keys(),d.mutationQueue.removeMutationBatch(h,E)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,y,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,y))).next((()=>d.localDocuments.getDocuments(h,y)))}))})(i.localStore,e);Ix(i,e,n),Cx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await rf(i,s)}catch(s){await Kl(s)}}function Cx(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function Ix(t,e,n){const i=qe(t);let s=i.Ru[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function Fy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||xx(t,i)}))}function xx(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Jv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),n0(t))}function FA(t,e,n){for(const i of n)i instanceof Sx?(t.Au.addReference(i.key,e),lO(t,i)):i instanceof Ax?(_e(t0,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||xx(t,i.key)):Le(19791,{yu:i})}function lO(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(_e(t0,"New document in limbo: "+n),t.Iu.add(i),n0(t))}function n0(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne(Pt.fromString(e)),i=t.mu.next();t.Eu.set(i,new QL(n)),t.du=t.du.insert(n,i),gx(t.remoteStore,new go(qr(Uv(n.path)),i,"TargetPurposeLimboResolution",pp.ue))}}async function rf(t,e,n){const i=qe(t),s=[],a=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((h=>{var y;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(h){s.push(h);const E=jv.Es(d.targetId,h);a.push(E)}})))})),await Promise.all(l),i.hu.J_(s),await(async function(d,h){const y=qe(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(h,(T=>ue.forEach(T.Is,(w=>y.persistence.referenceDelegate.addReference(E,T.targetId,w))).next((()=>ue.forEach(T.ds,(w=>y.persistence.referenceDelegate.removeReference(E,T.targetId,w)))))))))}catch(E){if(!Jl(E))throw E;_e(Kv,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const w=y.Fs.get(T),R=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(R);y.Fs=y.Fs.insert(T,k)}}})(i.localStore,a))}async function uO(t,e){const n=qe(t);if(!n.currentUser.isEqual(e)){_e(t0,"User change. New user:",e.toKey());const i=await dx(n.localStore,e);n.currentUser=e,(function(a,l){a.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Ee(le.CANCELLED,l))}))})),a.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rf(n,i.Bs)}}function cO(t,e){const n=qe(t),i=n.Eu.get(e);if(i&&i.lu)return it().add(i.key);{let s=it();const a=n.Tu.get(e);if(!a)return s;for(const l of a){const c=n.Pu.get(l);s=s.unionWith(c.view.tu)}return s}}function Rx(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sO.bind(null,e),e.hu.J_=jL.bind(null,e.eventManager),e.hu.pu=KL.bind(null,e.eventManager),e}function fO(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aO.bind(null,e),e}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return dL(this.persistence,new uL,e.initialUser,this.serializer)}Du(e){return new fx($v.Vi,this.serializer)}bu(e){return new _L}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class dO extends Fh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Tt(this.persistence.referenceDelegate instanceof Oh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new JV(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new fx((i=>Oh.Vi(i,n)),this.serializer)}}class By{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>UA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uO.bind(null,this.syncEngine),await qL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HL})()}createDatastore(e){const n=Sp(e.databaseInfo.databaseId),i=(function(a){return new wL(a)})(e.databaseInfo);return(function(a,l,c,d){return new xL(a,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,a,l,c){return new NL(i,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>UA(this.syncEngine,n,0)),(function(){return MA.C()?new MA:new EL})())}createSyncEngine(e,n){return(function(s,a,l,c,d,h,y){const E=new XL(s,a,l,c,d,h);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=qe(s);_e(Sa,"RemoteStore shutting down."),a.Ia.add(5),await nf(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}By.provider={build:()=>new By};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="FirestoreClient";class pO{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Xn.UNAUTHENTICATED,this.clientId=Mv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{_e(No,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(_e(No,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Zv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function iy(t,e){t.asyncQueue.verifyOperationInProgress(),_e(No,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await dx(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>{wo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{wo("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function BA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mO(t);_e(No,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>PA(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>PA(e.remoteStore,s))),t._onlineComponents=e}async function mO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(No,"Using user provided OfflineComponentProvider");try{await iy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;wo("Error using user provided cache. Falling back to memory cache: "+n),await iy(t,new Fh)}}else _e(No,"Using default OfflineComponentProvider"),await iy(t,new dO(void 0));return t._offlineComponents}async function Nx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(No,"Using user provided OnlineComponentProvider"),await BA(t,t._uninitializedComponentsProvider._online)):(_e(No,"Using default OnlineComponentProvider"),await BA(t,new By))),t._onlineComponents}function gO(t){return Nx(t).then((e=>e.syncEngine))}async function qA(t){const e=await Nx(t),n=e.eventManager;return n.onListen=ZL.bind(null,e.syncEngine),n.onUnlisten=nO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iO.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="firestore.googleapis.com",HA=!0;class GA{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mx,this.ssl=HA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:HA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jV)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bp{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new SP;switch(i.type){case"firstParty":return new CP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=zA.get(n);i&&(_e("ComponentProvider","Removing Datastore"),zA.delete(n),i.terminate())})(this),Promise.resolve()}}function yO(t,e,n,i={}){var s;t=To(t,bp);const a=ws(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(ap(`https://${d}`),lp("Firestore",!0)),l.host!==Mx&&l.host!==d&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:d,ssl:a,emulatorOptions:i});if(!va(h,c)&&(t._setSettings(h),i.mockUserToken)){let y,E;if(typeof i.mockUserToken=="string")y=i.mockUserToken,E=Xn.MOCK_USER;else{y=RC(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xn(T)}t._authCredentials=new AP(new TI(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wl(this.firestore,e,this._query)}}class vn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new So(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Xc(n,vn._jsonSchema))return new vn(e,i||null,new Ne(Pt.fromString(n.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:yn("string",vn._jsonSchemaVersion),referencePath:yn("string")};class So extends Wl{constructor(e,n,i){super(e,n,Uv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new Ne(e))}withConverter(e){return new So(this.firestore,e,this._path)}}function Ql(t,e,...n){if(t=Vt(t),AI("collection","path",e),t instanceof bp){const i=Pt.fromString(e,...n);return nA(i),new So(t,null,i)}{if(!(t instanceof vn||t instanceof So))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Pt.fromString(e,...n));return nA(i),new So(t.firestore,null,i)}}function sf(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=Mv.newId()),AI("doc","path",e),t instanceof bp){const i=Pt.fromString(e,...n);return tA(i),new vn(t,null,new Ne(i))}{if(!(t instanceof vn||t instanceof So))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Pt.fromString(e,...n));return tA(i),new vn(t.firestore,t instanceof So?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="AsyncQueue";class jA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new px(this,"async_queue_retry"),this.oc=()=>{const i=ny();i&&_e($A,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=ny();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=ny();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new da;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Jl(e))throw e;_e($A,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Ts("INTERNAL UNHANDLED ERROR: ",KA(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Xv.createAndSchedule(this,e,n,i,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&Le(47125,{hc:KA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function KA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Bl extends bp{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new jA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jA(e),this._firestoreClient=void 0,await e}}}function vO(t,e){const n=typeof t=="object"?t:up(),i=typeof t=="string"?t:Nh,s=Kc(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=yv("firestore");a&&yO(s,...a)}return s}function kx(t){if(t._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_O(t),t._firestoreClient}function _O(t){var e,n,i;const s=t._freezeSettings(),a=(function(c,d,h,y){return new zP(c,d,h,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Dx(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new pO(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar($n.fromBase64String(e))}catch(n){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ar($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xc(e,ar._jsonSchema))return ar.fromBase64String(e.bytes)}}ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:yn("string",ar._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(Xc(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:yn("string",Hr._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xc(e,Gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Gr(e.vectorValues);throw new Ee(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gr._jsonSchemaVersion="firestore/vectorValue/1.0",Gr._jsonSchema={type:yn("string",Gr._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=/^__.*__$/;class TO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Vo(e,this.data,this.fieldMask,n,this.fieldTransforms):new ef(e,this.data,n,this.fieldTransforms)}}class Px{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Vo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ec:t})}}class r0{constructor(e,n,i,s,a,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new r0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Bh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Vx(this.Ec)&&EO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class SO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Sp(e)}Dc(e,n,i,s=!1){return new r0({Ec:e,methodName:n,bc:i,path:Gn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function s0(t){const e=t._freezeSettings(),n=Sp(t._databaseId);return new SO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AO(t,e,n,i,s,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);o0("Data must be an object, but it was:",l,i);const c=Lx(i,l);let d,h;if(a.merge)d=new Bi(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const E of a.mergeFields){const T=qy(e,E,n);if(!l.contains(T))throw new Ee(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Ux(y,T)||y.push(T)}d=new Bi(y),h=l.fieldTransforms.filter((E=>d.covers(E.field)))}else d=null,h=l.fieldTransforms;return new TO(new bi(c),d,h)}class Ip extends i0{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ip}}function wO(t,e,n,i){const s=t.Dc(1,e,n);o0("Data must be an object, but it was:",s,i);const a=[],l=bi.empty();Po(i,((d,h)=>{const y=a0(e,d,n);h=Vt(h);const E=s.gc(y);if(h instanceof Ip)a.push(y);else{const T=of(h,E);T!=null&&(a.push(y),l.set(y,T))}}));const c=new Bi(a);return new Px(l,c,s.fieldTransforms)}function bO(t,e,n,i,s,a){const l=t.Dc(1,e,n),c=[qy(e,i,n)],d=[s];if(a.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)c.push(qy(e,a[T])),d.push(a[T+1]);const h=[],y=bi.empty();for(let T=c.length-1;T>=0;--T)if(!Ux(h,c[T])){const w=c[T];let R=d[T];R=Vt(R);const k=l.gc(w);if(R instanceof Ip)h.push(w);else{const L=of(R,k);L!=null&&(h.push(w),y.set(w,L))}}const E=new Bi(h);return new Px(y,E,l.fieldTransforms)}function CO(t,e,n,i=!1){return of(n,t.Dc(i?4:3,e))}function of(t,e){if(Ox(t=Vt(t)))return o0("Unsupported field value:",e,t),Lx(t,e);if(t instanceof i0)return(function(i,s){if(!Vx(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,s){const a=[];let l=0;for(const c of i){let d=of(c,s.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(t,e)}return(function(i,s){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=zt.fromDate(i);return{timestampValue:Lh(s.serializer,a)}}if(i instanceof zt){const a=new zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Lh(s.serializer,a)}}if(i instanceof Hr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ar)return{bytesValue:ix(s.serializer,i._byteString)};if(i instanceof vn){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Hv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Gr)return(function(l,c){return{mapValue:{fields:{[MI]:{stringValue:kI},[Dh]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return Fv(c.serializer,h)}))}}}}}})(i,s);throw s.wc(`Unsupported field value: ${hp(i)}`)})(t,e)}function Lx(t,e){const n={};return CI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(t,((i,s)=>{const a=of(s,e.Vc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Ox(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zt||t instanceof Hr||t instanceof ar||t instanceof vn||t instanceof i0||t instanceof Gr)}function o0(t,e,n){if(!Ox(n)||!wI(n)){const i=hp(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function qy(t,e,n){if((e=Vt(e))instanceof Cp)return e._internalPath;if(typeof e=="string")return a0(t,e);throw Bh("Field path arguments must be of type string or ",t,!1,void 0,n)}const IO=new RegExp("[~\\*/\\[\\]]");function a0(t,e,n){if(e.search(IO)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cp(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bh(t,e,n,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new Ee(le.INVALID_ARGUMENT,c+t+d)}function Ux(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xO extends Fx{data(){return super.data()}}function Bx(t,e){return typeof e=="string"?a0(t,e):e instanceof Cp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l0{}class NO extends l0{}function u0(t,e,...n){let i=[];e instanceof l0&&i.push(e),i=i.concat(n),(function(a){const l=a.filter((d=>d instanceof f0)).length,c=a.filter((d=>d instanceof c0)).length;if(l>1||l>0&&c>0)throw new Ee(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class c0 extends NO{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new c0(e,n,i)}_apply(e){const n=this._parse(e);return qx(e._query,n),new Wl(e.firestore,e.converter,Ny(e._query,n))}_parse(e){const n=s0(e.firestore);return(function(a,l,c,d,h,y,E){let T;if(h.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){WA(E,y);const R=[];for(const k of E)R.push(YA(d,a,k));T={arrayValue:{values:R}}}else T=YA(d,a,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||WA(E,y),T=CO(c,l,E,y==="in"||y==="not-in");return gn.create(h,y,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class f0 extends l0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new f0(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const d of c)qx(l,d),l=Ny(l,d)})(e._query,n),new Wl(e.firestore,e.converter,Ny(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function YA(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new Ee(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qI(e)&&n.indexOf("/")!==-1)throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Pt.fromString(n));if(!Ne.isDocumentKey(i))throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return cA(t,new Ne(i))}if(n instanceof vn)return cA(t,n._key);throw new Ee(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(n)}.`)}function WA(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qx(t,e){const n=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DO{convertValue(e,n="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Po(e,((s,a)=>{i[s]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,s;const a=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[Dh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map((l=>ln(l.doubleValue)));return new Gr(a)}convertGeoPoint(e){return new Hr(ln(e.latitude),ln(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=gp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const n=Co(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Pt.fromString(e);Tt(ux(i),9688,{name:e});const s=new Uc(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return s.isEqual(n)||Ts(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class uc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends Fx{constructor(e,n,i,s,a,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Bx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:yn("string",ha._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class fh extends ha{data(e={}){return super.data(e)}}class xl{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new uc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new fh(this._firestore,this._userDataWriter,i.key,i,new uc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const d=new fh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new uc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new fh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new uc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,y=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:kO(c.type),doc:d,oldIndex:h,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:t})}}xl._jsonSchemaVersion="firestore/querySnapshot/1.0",xl._jsonSchema={type:yn("string",xl._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class zx extends DO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function PO(t,e,n,...i){t=To(t,vn);const s=To(t.firestore,Bl),a=s0(s);let l;return l=typeof(e=Vt(e))=="string"||e instanceof Cp?bO(a,"updateDoc",t._key,e,n,i):wO(a,"updateDoc",t._key,e),m0(s,[l.toMutation(t._key,br.exists(!0))])}function d0(t){return m0(To(t.firestore,Bl),[new Bv(t._key,br.none())])}function h0(t,e){const n=To(t.firestore,Bl),i=sf(t),s=MO(t.converter,e);return m0(n,[AO(s0(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,br.exists(!1))]).then((()=>i))}function p0(t,...e){var n,i,s;t=Vt(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||JA(e[l])||(a=e[l++]);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(JA(e[l])){const E=e[l];e[l]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[l+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[l+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let d,h,y;if(t instanceof vn)h=To(t.firestore,Bl),y=Uv(t._key.path),d={next:E=>{e[l]&&e[l](VO(h,t,E))},error:e[l+1],complete:e[l+2]};else{const E=To(t,Wl);h=To(E.firestore,Bl),y=E._query;const T=new zx(h);d={next:w=>{e[l]&&e[l](new xl(h,T,E,w))},error:e[l+1],complete:e[l+2]},RO(t._query)}return(function(T,w,R,k){const L=new hO(k),z=new JL(w,L,R);return T.asyncQueue.enqueueAndForget((async()=>GL(await qA(T),z))),()=>{L.Ou(),T.asyncQueue.enqueueAndForget((async()=>$L(await qA(T),z)))}})(kx(h),y,c,d)}function m0(t,e){return(function(i,s){const a=new da;return i.asyncQueue.enqueueAndForget((async()=>rO(await gO(i),s,a))),a.promise})(kx(t),e)}function VO(t,e,n){const i=n.docs.get(e._key),s=new zx(t);return new ha(t,s,e._key,i,new uc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){jl=s})(ba),Ao(new vs("firestore",((i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new Bl(new wP(i.getProvider("auth-internal")),new IP(l,i.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(h.options.projectId,y)})(l,s),l);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),lr(WS,QS,e),lr(WS,QS,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="firebasestorage.googleapis.com",Gx="storageBucket",LO=120*1e3,OO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Ir{constructor(e,n,i=0){super(ry(e),`Firebase Storage: ${n} (${ry(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ry(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var en;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(en||(en={}));function ry(t){return"storage/"+t}function g0(){const t="An unknown error occurred, please check the error payload for server response.";return new tn(en.UNKNOWN,t)}function UO(t){return new tn(en.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function FO(t){return new tn(en.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function BO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(en.UNAUTHENTICATED,t)}function qO(){return new tn(en.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zO(t){return new tn(en.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function HO(){return new tn(en.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GO(){return new tn(en.CANCELED,"User canceled the upload/download.")}function $O(t){return new tn(en.INVALID_URL,"Invalid URL '"+t+"'.")}function jO(t){return new tn(en.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function KO(){return new tn(en.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gx+"' property when initializing the app?")}function JO(){return new tn(en.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YO(){return new tn(en.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function WO(t){return new tn(en.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zy(t){return new tn(en.INVALID_ARGUMENT,t)}function $x(){return new tn(en.APP_DELETED,"The Firebase app was deleted.")}function QO(t){return new tn(en.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tc(t,e){return new tn(en.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qu(t){throw new tn(en.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=qi.makeFromUrl(e,n)}catch{return new qi(e,"")}if(i.path==="")return i;throw jO(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function h(K){K.path_=decodeURIComponent(K.path)}const y="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${y}/b/${s}/o${T}`,"i"),R={bucket:1,path:3},k=n===Hx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",z=new RegExp(`^https?://${k}/${s}/${L}`,"i"),B=[{regex:c,indices:d,postModify:a},{regex:w,indices:R,postModify:h},{regex:z,indices:{bucket:1,path:2},postModify:h}];for(let K=0;K<B.length;K++){const X=B[K],G=X.regex.exec(e);if(G){const I=G[X.indices.bucket];let x=G[X.indices.path];x||(x=""),i=new qi(I,x),X.postModify(i);break}}if(i==null)throw $O(e);return i}}class XO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t,e,n){let i=1,s=null,a=null,l=!1,c=0;function d(){return c===2}let h=!1;function y(...L){h||(h=!0,e.apply(null,L))}function E(L){s=setTimeout(()=>{s=null,t(w,d())},L)}function T(){a&&clearTimeout(a)}function w(L,...z){if(h){T();return}if(L){T(),y.call(null,L,...z);return}if(d()||l){T(),y.call(null,L,...z);return}i<64&&(i*=2);let B;c===1?(c=2,B=0):B=(i+Math.random())*1e3,E(B)}let R=!1;function k(L){R||(R=!0,T(),!h&&(s!==null?(L||(c=2),clearTimeout(s),E(0)):L||(c=1)))}return E(0),a=setTimeout(()=>{l=!0,k(!0)},n),k}function e4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){return t!==void 0}function n4(t){return typeof t=="object"&&!Array.isArray(t)}function y0(t){return typeof t=="string"||t instanceof String}function QA(t){return v0()&&t instanceof Blob}function v0(){return typeof Blob<"u"}function XA(t,e,n,i){if(i<e)throw zy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw zy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function jx(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var pa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(pa||(pa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n,i,s,a,l,c,d,h,y,E,T=!0,w=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=y,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,k)=>{this.resolve_=R,this.reject_=k,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Od(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===pa.NO_ERROR,d=a.getStatus();if(!c||i4(d,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===pa.ABORT;i(!1,new Od(!1,null,y));return}const h=this.successCodes_.indexOf(d)!==-1;i(!0,new Od(h,a))})},n=(i,s)=>{const a=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());t4(d)?a(d):a()}catch(d){l(d)}else if(c!==null){const d=g0();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(s.canceled){const d=this.appDelete_?$x():GO();l(d)}else{const d=HO();l(d)}};this.canceled_?n(!1,new Od(!1,null,!0)):this.backoffId_=ZO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Od{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function s4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function o4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function l4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function u4(t,e,n,i,s,a,l=!0,c=!1){const d=jx(t.urlParams),h=t.url+d,y=Object.assign({},t.headers);return a4(y,e),s4(y,n),o4(y,a),l4(y,i),new r4(h,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function f4(...t){const e=c4();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(v0())return new Blob(t);throw new tn(en.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function d4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t){if(typeof atob>"u")throw WO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sy{constructor(e,n){this.data=e,this.contentType=n||null}}function Kx(t,e){switch(t){case Sr.RAW:return new sy(Jx(e));case Sr.BASE64:case Sr.BASE64URL:return new sy(Yx(t,e));case Sr.DATA_URL:return new sy(m4(e),g4(e))}throw g0()}function Jx(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,l=t.charCodeAt(++n);i=65536|(a&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function p4(t){let e;try{e=decodeURIComponent(t)}catch{throw Tc(Sr.DATA_URL,"Malformed data URL.")}return Jx(e)}function Yx(t,e){switch(t){case Sr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Tc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Sr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Tc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=h4(e)}catch(s){throw s.message.includes("polyfill")?s:Tc(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class Wx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Tc(Sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=y4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function m4(t){const e=new Wx(t);return e.base64?Yx(Sr.BASE64,e.rest):p4(e.rest)}function g4(t){return new Wx(t).contentType}function y4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){let i=0,s="";QA(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(QA(this.data_)){const i=this.data_,s=d4(i,e,n);return s===null?null:new fo(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new fo(i,!0)}}static getBlob(...e){if(v0()){const n=e.map(i=>i instanceof fo?i.data_:i);return new fo(f4.apply(null,n))}else{const n=e.map(l=>y0(l)?Kx(Sr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const s=new Uint8Array(i);let a=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)s[a++]=l[c]}),new fo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t){let e;try{e=JSON.parse(t)}catch{return null}return n4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _4(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Xx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t,e){return e}class di{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||E4}}let Ud=null;function T4(t){return!y0(t)||t.length<2?t:Xx(t)}function Zx(){if(Ud)return Ud;const t=[];t.push(new di("bucket")),t.push(new di("generation")),t.push(new di("metageneration")),t.push(new di("name","fullPath",!0));function e(a,l){return T4(l)}const n=new di("name");n.xform=e,t.push(n);function i(a,l){return l!==void 0?Number(l):l}const s=new di("size");return s.xform=i,t.push(s),t.push(new di("timeCreated")),t.push(new di("updated")),t.push(new di("md5Hash",null,!0)),t.push(new di("cacheControl",null,!0)),t.push(new di("contentDisposition",null,!0)),t.push(new di("contentEncoding",null,!0)),t.push(new di("contentLanguage",null,!0)),t.push(new di("contentType",null,!0)),t.push(new di("metadata","customMetadata",!0)),Ud=t,Ud}function S4(t,e){function n(){const i=t.bucket,s=t.fullPath,a=new qi(i,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function A4(t,e,n){const i={};i.type="file";const s=n.length;for(let a=0;a<s;a++){const l=n[a];i[l.local]=l.xform(i,e[l.server])}return S4(i,t),i}function eR(t,e,n){const i=Qx(e);return i===null?null:A4(t,i,n)}function w4(t,e,n,i){const s=Qx(e);if(s===null||!y0(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(h=>{const y=t.bucket,E=t.fullPath,T="/b/"+l(y)+"/o/"+l(E),w=_0(T,n,i),R=jx({alt:"media",token:h});return w+R})[0]}function b4(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class tR{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){if(!t)throw g0()}function C4(t,e){function n(i,s){const a=eR(t,s,e);return nR(a!==null),a}return n}function I4(t,e){function n(i,s){const a=eR(t,s,e);return nR(a!==null),w4(a,s,t.host,t._protocol)}return n}function iR(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=qO():s=BO():n.getStatus()===402?s=FO(t.bucket):n.getStatus()===403?s=zO(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function x4(t){const e=iR(t);function n(i,s){let a=e(i,s);return i.getStatus()===404&&(a=UO(t.path)),a.serverResponse=s.serverResponse,a}return n}function R4(t,e,n){const i=e.fullServerUrl(),s=_0(i,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,c=new tR(s,a,I4(t,n),l);return c.errorHandler=x4(e),c}function N4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function D4(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=N4(null,e)),i}function M4(t,e,n,i,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let B="";for(let K=0;K<2;K++)B=B+Math.random().toString().slice(2);return B}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const h=D4(e,i,s),y=b4(h,n),E="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,T=`\r
--`+d+"--",w=fo.getBlob(E,i,T);if(w===null)throw JO();const R={name:h.fullPath},k=_0(a,t.host,t._protocol),L="POST",z=t.maxUploadRetryTime,F=new tR(k,L,C4(t,n),z);return F.urlParams=R,F.headers=l,F.body=w.uploadData(),F.errorHandler=iR(e),F}class k4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s,a){if(this.sent_)throw Qu("cannot .send() more than once");if(ws(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class P4 extends k4{initXhr(){this.xhr_.responseType="text"}}function rR(){return new P4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this._service=e,n instanceof qi?this._location=n:this._location=qi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Aa(e,n)}get root(){const e=new qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xx(this._location.path)}get storage(){return this._service}get parent(){const e=v4(this._location.path);if(e===null)return null;const n=new qi(this._location.bucket,e);return new Aa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw QO(e)}}function V4(t,e,n){t._throwIfRoot("uploadBytes");const i=M4(t.storage,t._location,Zx(),new fo(e,!0),n);return t.storage.makeRequestWithTokens(i,rR).then(s=>({metadata:s,ref:t}))}function L4(t,e,n=Sr.RAW,i){t._throwIfRoot("uploadString");const s=Kx(n,e),a=Object.assign({},i);return a.contentType==null&&s.contentType!=null&&(a.contentType=s.contentType),V4(t,s.data,a)}function O4(t){t._throwIfRoot("getDownloadURL");const e=R4(t.storage,t._location,Zx());return t.storage.makeRequestWithTokens(e,rR).then(n=>{if(n===null)throw YO();return n})}function U4(t,e){const n=_4(t._location.path,e),i=new qi(t._location.bucket,n);return new Aa(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){return/^[A-Za-z]+:\/\//.test(t)}function B4(t,e){return new Aa(t,e)}function sR(t,e){if(t instanceof E0){const n=t;if(n._bucket==null)throw KO();const i=new Aa(n,n._bucket);return e!=null?sR(i,e):i}else return e!==void 0?U4(t,e):t}function q4(t,e){if(e&&F4(e)){if(t instanceof E0)return B4(t,e);throw zy("To use ref(service, url), the first argument must be a Storage instance.")}else return sR(t,e)}function ZA(t,e){const n=e==null?void 0:e[Gx];return n==null?null:qi.makeFromBucketSpec(n,t)}function z4(t,e,n,i={}){t.host=`${e}:${n}`;const s=ws(e);s&&(ap(`https://${t.host}/b`),lp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:RC(a,t.app.options.projectId))}class E0{constructor(e,n,i,s,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=Hx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LO,this._maxUploadRetryTime=OO,this._requests=new Set,s!=null?this._bucket=qi.makeFromBucketSpec(s,this._host):this._bucket=ZA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qi.makeFromBucketSpec(this._url,e):this._bucket=ZA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Aa(this,e)}_makeRequest(e,n,i,s,a=!0){if(this._deleted)return new XO($x());{const l=u4(e,this._appId,i,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const ew="@firebase/storage",tw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="storage";function H4(t,e,n,i){return t=Vt(t),L4(t,e,n,i)}function G4(t){return t=Vt(t),O4(t)}function $4(t,e){return t=Vt(t),q4(t,e)}function j4(t=up(),e){t=Vt(t);const i=Kc(t,oR).getImmediate({identifier:e}),s=yv("storage");return s&&K4(i,...s),i}function K4(t,e,n,i={}){z4(t,e,n,i)}function J4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new E0(n,i,s,e,ba)}function Y4(){Ao(new vs(oR,J4,"PUBLIC").setMultipleInstances(!0)),lr(ew,tw,""),lr(ew,tw,"esm2017")}Y4();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="type.googleapis.com/google.protobuf.Int64Value",Q4="type.googleapis.com/google.protobuf.UInt64Value";function aR(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function qh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>qh(e));if(typeof t=="function"||typeof t=="object")return aR(t,e=>qh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ql(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case W4:case Q4:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ql(e)):typeof t=="function"||typeof t=="object"?aR(t,e=>ql(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ci extends Ir{constructor(e,n,i){super(`${T0}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Ci.prototype)}}function X4(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function zh(t,e){let n=X4(t),i=n,s;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!nw[l])return new Ci("internal","internal");n=nw[l],i=l}const c=a.message;typeof c=="string"&&(i=c),s=a.details,s!==void 0&&(s=ql(s))}}catch{}return n==="ok"?null:new Ci(n,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n,i,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||i.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="us-central1",eU=/^data: (.*?)(?:\n|$)/;function tU(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Ci("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class nU{constructor(e,n,i,s,a=Hy,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new Z4(e,n,i,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Hy}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function iU(t,e,n){const i=ws(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(ap(t.emulatorOrigin),lp("Functions",!0))}function rU(t,e,n){const i=s=>oU(t,e,s,{});return i.stream=(s,a)=>lU(t,e,s,a),i}async function sU(t,e,n,i){n["Content-Type"]="application/json";let s;try{s=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function lR(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function oU(t,e,n,i){const s=t._url(e);return aU(t,s,n,i)}async function aU(t,e,n,i){n=qh(n);const s={data:n},a=await lR(t,i),l=i.timeout||7e4,c=tU(l),d=await Promise.race([sU(e,s,a,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!d)throw new Ci("cancelled","Firebase Functions instance was deleted.");const h=zh(d.status,d.json);if(h)throw h;if(!d.json)throw new Ci("internal","Response is not valid JSON object.");let y=d.json.data;if(typeof y>"u"&&(y=d.json.result),typeof y>"u")throw new Ci("internal","Response is missing data field.");return{data:ql(y)}}function lU(t,e,n,i){const s=t._url(e);return uU(t,s,n,i||{})}async function uU(t,e,n,i){var s;n=qh(n);const a={data:n},l=await lR(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:l,signal:i==null?void 0:i.signal})}catch(w){if(w instanceof Error&&w.name==="AbortError"){const k=new Ci("cancelled","Request was cancelled.");return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}const R=zh(0,null);return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}let d,h;const y=new Promise((w,R)=>{d=w,h=R});(s=i==null?void 0:i.signal)===null||s===void 0||s.addEventListener("abort",()=>{const w=new Ci("cancelled","Request was cancelled.");h(w)});const E=c.body.getReader(),T=cU(E,d,h,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const w=T.getReader();return{async next(){const{value:R,done:k}=await w.read();return{value:R,done:k}},async return(){return await w.cancel(),{done:!0,value:void 0}}}}},data:y}}function cU(t,e,n,i){const s=(l,c)=>{const d=l.match(eU);if(!d)return;const h=d[1];try{const y=JSON.parse(h);if("result"in y){e(ql(y.result));return}if("message"in y){c.enqueue(ql(y.message));return}if("error"in y){const E=zh(0,y);c.error(E),n(E);return}}catch(y){if(y instanceof Ci){c.error(y),n(y);return}}},a=new TextDecoder;return new ReadableStream({start(l){let c="";return d();async function d(){if(i!=null&&i.aborted){const h=new Ci("cancelled","Request was cancelled");return l.error(h),n(h),Promise.resolve()}try{const{value:h,done:y}=await t.read();if(y){c.trim()&&s(c.trim(),l),l.close();return}if(i!=null&&i.aborted){const T=new Ci("cancelled","Request was cancelled");l.error(T),n(T),await t.cancel();return}c+=a.decode(h,{stream:!0});const E=c.split(`
`);c=E.pop()||"";for(const T of E)T.trim()&&s(T.trim(),l);return d()}catch(h){const y=h instanceof Ci?h:zh(0,null);l.error(y),n(y)}}},cancel(){return t.cancel()}})}const iw="@firebase/functions",rw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU="auth-internal",dU="app-check-internal",hU="messaging-internal";function pU(t){const e=(n,{instanceIdentifier:i})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(fU),l=n.getProvider(hU),c=n.getProvider(dU);return new nU(s,a,l,c,i)};Ao(new vs(T0,e,"PUBLIC").setMultipleInstances(!0)),lr(iw,rw,t),lr(iw,rw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(t=up(),e=Hy){const i=Kc(Vt(t),T0).getImmediate({identifier:e}),s=yv("functions");return s&&gU(i,...s),i}function gU(t,e,n){iU(Vt(t),e,n)}function yU(t,e,n){return rU(Vt(t),e)}pU();const vU={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},xp=MC(vU),cc=vP(xp),_U=new ps,jr=vO(xp),EU=j4(xp),TU=mU(xp);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let SU,AU;function wU(){return{geminiUrl:SU,vertexUrl:AU}}function bU(t,e,n,i){var s,a;if(!(t!=null&&t.baseUrl)){const l=wU();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bs{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const y=d[h];g(y,e.slice(a+1),n[h])}else for(const h of d)g(h,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];g(d[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function CU(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),a=i.split("."),l=new Set;let c=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){c=d;break}if(c!==-1&&a.length>c)for(let d=c;d<a.length;d++){const h=a[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}Gy(t,s,a,0,l)}}function Gy(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])Gy(d,e,n,i+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),d={};for(const h of c)d[h]=l[h];for(const[h,y]of Object.entries(d)){const E=[];for(const T of n.slice(i))T==="*"?E.push(h):E.push(T);g(l,E,y)}for(const h of c)delete l[h]}}else{const l=t;a in l&&Gy(l[a],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IU(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function xU(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],NU(l)),e}function RU(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],DU(l)),e}function NU(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>MU(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function DU(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>kU(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function MU(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],FU(n)),e}function kU(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],BU(n)),e}function PU(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function VU(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function LU(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],OU(l)),e}function OU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function uR(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],UU(l)),e}function UU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function FU(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],S0(i));const s=p(t,["encoding"]);return s!=null&&g(e,["mimeType"],s),e}function BU(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],S0(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(sw||(sw={}));var ow;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ow||(ow={}));var aw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(aw||(aw={}));var Be;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Be||(Be={}));var lw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(lw||(lw={}));var uw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(uw||(uw={}));var cw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(cw||(cw={}));var fw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(fw||(fw={}));var dw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(dw||(dw={}));var hw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(hw||(hw={}));var pw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(pw||(pw={}));var mw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(mw||(mw={}));var gw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(gw||(gw={}));var yw;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(yw||(yw={}));var vw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(vw||(vw={}));var _w;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_w||(_w={}));var Ew;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ew||(Ew={}));var Tw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Tw||(Tw={}));var Sw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Sw||(Sw={}));var Hh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Hh||(Hh={}));var Aw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Aw||(Aw={}));var ww;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ww||(ww={}));var bw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(bw||(bw={}));var $y;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})($y||($y={}));var Cw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Cw||(Cw={}));var Iw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Iw||(Iw={}));var xw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(xw||(xw={}));var Rw;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Rw||(Rw={}));var Nw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Nw||(Nw={}));var Dw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Dw||(Dw={}));var Mw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Mw||(Mw={}));var kw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(kw||(kw={}));var Pw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Pw||(Pw={}));var Vw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Vw||(Vw={}));var Lw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Lw||(Lw={}));var Ow;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ow||(Ow={}));var Uw;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Uw||(Uw={}));var Fw;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Fw||(Fw={}));var Bw;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Bw||(Bw={}));var qw;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(qw||(qw={}));var zw;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(zw||(zw={}));var Hw;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Hw||(Hw={}));var Gw;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Gw||(Gw={}));var $w;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})($w||($w={}));var jw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(jw||(jw={}));var Kw;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Kw||(Kw={}));var Jw;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Jw||(Jw={}));var Yw;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Yw||(Yw={}));var Ww;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ww||(Ww={}));var Qw;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qw||(Qw={}));var Xw;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Xw||(Xw={}));var Zw;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Zw||(Zw={}));var eb;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(eb||(eb={}));var tb;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(tb||(tb={}));var Sl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Sl||(Sl={}));class jy{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Xu{get text(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const E=[];for(const T of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[w,R]of Object.entries(T))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(R!==null||R!==void 0)&&E.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const E of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,w]of Object.entries(E))T!=="inlineData"&&(w!==null||w!==void 0)&&y.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class nb{}class ib{}class qU{}class zU{}class HU{}class GU{}class rb{}class sb{}class ob{}class $U{}class Gh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Gh;let s;const a=e;return n?s=RU(a):s=xU(a),Object.assign(i,s),i}}class ab{}class lb{}class ub{}class jU{}class KU{}class JU{}class A0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new A0,a=LU(e);return Object.assign(i,a),i}}class YU{}class WU{}class QU{}class cb{}class XU{get text(){var e,n,i;let s="",a=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,i;let s="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class ZU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class w0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new w0,a=uR(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function cR(t,e){const n=gt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function fR(t){return Array.isArray(t)?t.map(e=>$h(e)):[$h(t)]}function $h(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function dR(t){const e=$h(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hR(t){const e=$h(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fb(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function pR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>fb(e)):[fb(t)]}function Ky(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function db(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function hb(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ei(t){if(t==null)throw new Error("ContentUnion is required");return Ky(t)?t:{role:"user",parts:pR(t)}}function b0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=ei(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=ei(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ei(n)):[ei(e)]}function ur(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(db(t)||hb(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ei(t)]}const e=[],n=[],i=Ky(t[0]);for(const s of t){const a=Ky(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(db(s)||hb(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:pR(n)}),e}function e6(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Be).includes(n[0].toUpperCase())?n[0].toUpperCase():Be.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Be).includes(i.toUpperCase())?i.toUpperCase():Be.TYPE_UNSPECIFIED})}}function Rl(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&e6(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Be).includes(c.toUpperCase())?c.toUpperCase():Be.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Rl(c);else if(i.includes(l)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(Rl(h))}e[l]=d}else if(s.includes(l)){const d={};for(const[h,y]of Object.entries(c))d[h]=Rl(y);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function C0(t){return Rl(t)}function I0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function x0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Xl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Rl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Rl(e.response));return t}function Zl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function t6(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Cs(t,e){if(typeof e!="string")throw new Error("name must be a string");return t6(t,e,"cachedContents")}function mR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Lo(t){return S0(t)}function n6(t){return t!=null&&typeof t=="object"&&"name"in t}function i6(t){return t!=null&&typeof t=="object"&&"video"in t}function r6(t){return t!=null&&typeof t=="object"&&"uri"in t}function gR(t){var e;let n;if(n6(t)&&(n=t.name),!(r6(t)&&(n=t.uri,n===void 0))&&!(i6(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function yR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function vR(t){for(const e of["models","tunedModels","publisherModels"])if(s6(t,e))return t[e];return[]}function s6(t,e){return t!==null&&typeof t=="object"&&e in t}function o6(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function a6(t,e={}){const n=[],i=new Set;for(const s of t){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=o6(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function _R(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function l6(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ER(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function eu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function TR(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u6(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>H6(l))),g(e,["inlinedResponses"],a)}const s=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["inlinedEmbedContentResponses"],a)}return e}function c6(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const s=p(t,["bigqueryDestination","outputUri"]);return s!=null&&g(e,["bigqueryUri"],s),e}function f6(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&g(e,["bigqueryDestination","outputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function dh(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["metadata","state"]);s!=null&&g(e,["state"],TR(s));const a=p(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const l=p(t,["metadata","endTime"]);l!=null&&g(e,["endTime"],l);const c=p(t,["metadata","updateTime"]);c!=null&&g(e,["updateTime"],c);const d=p(t,["metadata","model"]);d!=null&&g(e,["model"],d);const h=p(t,["metadata","output"]);return h!=null&&g(e,["dest"],u6(ER(h))),e}function Jy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["state"]);s!=null&&g(e,["state"],TR(s));const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["createTime"]);l!=null&&g(e,["createTime"],l);const c=p(t,["startTime"]);c!=null&&g(e,["startTime"],c);const d=p(t,["endTime"]);d!=null&&g(e,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(e,["updateTime"],h);const y=p(t,["model"]);y!=null&&g(e,["model"],y);const E=p(t,["inputConfig"]);E!=null&&g(e,["src"],d6(E));const T=p(t,["outputConfig"]);T!=null&&g(e,["dest"],c6(ER(T)));const w=p(t,["completionStats"]);return w!=null&&g(e,["completionStats"],w),e}function d6(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const s=p(t,["bigquerySource","inputUri"]);return s!=null&&g(e,["bigqueryUri"],s),e}function h6(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(n,["fileName"],i);const s=p(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>z6(t,l))),g(n,["requests","requests"],a)}return n}function p6(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&g(e,["bigquerySource","inputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function m6(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function g6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],eu(t,i)),n}function y6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],eu(t,i)),n}function v6(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],_6(i));const s=p(t,["tokenCount"]);s!=null&&g(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>w)),g(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function _6(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["citations"],i)}return e}function SR(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>W6(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function E6(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function T6(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["dest"]);return e!==void 0&&s!=null&&g(e,["outputConfig"],f6(l6(s))),n}function pb(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["src"]);s!=null&&g(n,["batch","inputConfig"],h6(t,_R(t,s)));const a=p(e,["config"]);return a!=null&&E6(a,n),n}function S6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],gt(t,i));const s=p(e,["src"]);s!=null&&g(n,["inputConfig"],p6(_R(t,s)));const a=p(e,["config"]);return a!=null&&T6(a,n),n}function A6(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function w6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["src"]);s!=null&&g(n,["batch","inputConfig"],D6(t,s));const a=p(e,["config"]);return a!=null&&A6(a,n),n}function b6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],eu(t,i)),n}function C6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],eu(t,i)),n}function I6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function x6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function R6(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=b0(t,i);Array.isArray(a)&&(a=a.map(l=>l)),g(n,["requests[]","request","content"],a)}const s=p(e,["config"]);return s!=null&&(g(n,["_self"],N6(s,n)),CU(n,{"requests[].*":"requests[].request.*"})),n}function N6(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function D6(t,e){const n={},i=p(e,["fileName"]);i!=null&&g(n,["file_name"],i);const s=p(e,["inlinedRequests"]);return s!=null&&g(n,["requests"],R6(t,s)),n}function M6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function k6(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function P6(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function V6(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],SR(ei(s)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const R=p(e,["frequencyPenalty"]);R!=null&&g(i,["frequencyPenalty"],R);const k=p(e,["seed"]);k!=null&&g(i,["seed"],k);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const z=p(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],C0(z));const F=p(e,["responseJsonSchema"]);if(F!=null&&g(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(n!==void 0&&B!=null){let O=B;Array.isArray(O)&&(O=O.map(U=>Q6(U))),g(n,["safetySettings"],O)}const K=p(e,["tools"]);if(n!==void 0&&K!=null){let O=Zl(K);Array.isArray(O)&&(O=O.map(U=>Z6(Xl(U)))),g(n,["tools"],O)}const X=p(e,["toolConfig"]);if(n!==void 0&&X!=null&&g(n,["toolConfig"],X6(X)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&g(n,["cachedContent"],Cs(t,G));const I=p(e,["responseModalities"]);I!=null&&g(i,["responseModalities"],I);const x=p(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const N=p(e,["speechConfig"]);if(N!=null&&g(i,["speechConfig"],I0(N)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=p(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const M=p(e,["imageConfig"]);return M!=null&&g(i,["imageConfig"],q6(M)),i}function L6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>v6(h))),g(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function O6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],eu(t,i)),n}function U6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],eu(t,i)),n}function F6(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function B6(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function q6(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function z6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["request","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let c=ur(s);Array.isArray(c)&&(c=c.map(d=>SR(d))),g(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&g(n,["metadata"],a);const l=p(e,["config"]);return l!=null&&g(n,["request","generationConfig"],V6(t,l,p(n,["request"],{}))),n}function H6(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],L6(n));const i=p(t,["error"]);return i!=null&&g(e,["error"],i),e}function G6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);if(e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function $6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);e!==void 0&&s!=null&&g(e,["_query","pageToken"],s);const a=p(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function j6(t){const e={},n=p(t,["config"]);return n!=null&&G6(n,e),e}function K6(t){const e={},n=p(t,["config"]);return n!=null&&$6(n,e),e}function J6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>dh(l))),g(e,["batchJobs"],a)}return e}function Y6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Jy(l))),g(e,["batchJobs"],a)}return e}function W6(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],M6(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],k6(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],m6(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function Q6(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function X6(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],P6(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function Z6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],F6(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],B6(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var As;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(As||(As={}));class xa{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e3 extends bs{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new xa(As.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=pb(this.apiClient,e),i=n._url,s=ye("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const y of d){const E=Object.assign({},y);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=T,E.request=w}h.push(E)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=S6(this.apiClient,e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Jy(y))}else{const h=pb(this.apiClient,e);return c=ye("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>dh(y))}}async createEmbeddingsInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=w6(this.apiClient,e);return a=ye("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>dh(d))}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=U6(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Jy(y))}else{const h=O6(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>dh(y))}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=y6(this.apiClient,e);l=ye("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=g6(this.apiClient,e);l=ye("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=K6(e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=Y6(y),T=new cb;return Object.assign(T,E),T})}else{const h=j6(e);return c=ye("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=J6(y),T=new cb;return Object.assign(T,E),T})}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=C6(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>x6(y))}else{const h=b6(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>I6(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t3(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function mb(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>w3(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function n3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&g(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let y=ur(l);Array.isArray(y)&&(y=y.map(E=>mb(E))),g(e,["contents"],y)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],mb(ei(c)));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(E=>C3(E))),g(e,["tools"],y)}const h=p(t,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],b3(h)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function i3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&g(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let E=ur(l);Array.isArray(E)&&(E=E.map(T=>T)),g(e,["contents"],E)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],ei(c));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let E=d;Array.isArray(E)&&(E=E.map(T=>I3(T))),g(e,["tools"],E)}const h=p(t,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const y=p(t,["kmsKeyName"]);return e!==void 0&&y!=null&&g(e,["encryption_spec","kmsKeyName"],y),n}function r3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],cR(t,i));const s=p(e,["config"]);return s!=null&&n3(s,n),n}function s3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],cR(t,i));const s=p(e,["config"]);return s!=null&&i3(s,n),n}function o3(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Cs(t,i)),n}function a3(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Cs(t,i)),n}function l3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function u3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function c3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function f3(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d3(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function h3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function p3(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Cs(t,i)),n}function m3(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Cs(t,i)),n}function g3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function y3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function v3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function _3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function E3(t){const e={},n=p(t,["config"]);return n!=null&&v3(n,e),e}function T3(t){const e={},n=p(t,["config"]);return n!=null&&_3(n,e),e}function S3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function A3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function w3(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],c3(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],f3(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],t3(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function b3(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],d3(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function C3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],g3(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],y3(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function I3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>h3(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function x3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&g(e,["expireTime"],s),n}function R3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&g(e,["expireTime"],s),n}function N3(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],Cs(t,i));const s=p(e,["config"]);return s!=null&&x3(s,n),n}function D3(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],Cs(t,i));const s=p(e,["config"]);return s!=null&&R3(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M3 extends bs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xa(As.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=s3(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=r3(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=m3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=p3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=a3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=u3(y),T=new lb;return Object.assign(T,E),T})}else{const h=o3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=l3(y),T=new lb;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=D3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=N3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=T3(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=A3(y),T=new ub;return Object.assign(T,E),T})}else{const h=E3(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=S3(y),T=new ub;return Object.assign(T,E),T})}}}function gb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qt(t){return this instanceof qt?(this.v=t,this):new qt(t)}function Nl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(w){return function(R){return Promise.resolve(R).then(w,E)}}function c(w,R){i[w]&&(s[w]=function(k){return new Promise(function(L,z){a.push([w,k,L,z])>1||d(w,k)})},R&&(s[w]=R(s[w])))}function d(w,R){try{h(i[w](R))}catch(k){T(a[0][3],k)}}function h(w){w.value instanceof qt?Promise.resolve(w.value.v).then(y,E):T(a[0][2],w)}function y(w){d("next",w)}function E(w){d("throw",w)}function T(w,R){w(R),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Sc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gb=="function"?gb(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,d){l=t[a](l),s(c,d,l.done,l.value)})}}function s(a,l,c,d){Promise.resolve(d).then(function(h){a({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:AR(n)}function AR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function P3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function yb(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let a=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),a&&!AR(t[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class V3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new L3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class L3{constructor(e,n,i,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),P3(a)}async sendMessage(e){var n;await this.sendPromise;const i=ei(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;const d=await s,h=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=d.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];y!=null&&(T=(c=y.slice(E))!==null&&c!==void 0?c:[]);const w=h?[h]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=ei(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?yb(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return Nl(this,arguments,function*(){var l,c,d,h;const y=[];try{for(var E=!0,T=Sc(e),w;w=yield qt(T.next()),l=w.done,!l;E=!0){h=w.value,E=!1;const R=h;if(k3(R)){const k=(s=(i=R.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;k!==void 0&&y.push(k)}yield yield qt(R)}}catch(R){c={error:R}}finally{try{!E&&!l&&(d=T.return)&&(yield qt(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,y)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...yb(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Rp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O3(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function U3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function F3(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],gR(n)),e}function B3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function q3(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],gR(n)),e}function z3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function H3(t){const e={},n=p(t,["config"]);return n!=null&&z3(n,e),e}function G3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $3 extends bs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new xa(As.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=H3(e);return a=ye("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=G3(d),y=new YU;return Object.assign(y,h),y})}}async createInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=O3(e);return a=ye("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=U3(d),y=new WU;return Object.assign(y,h),y})}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=q3(e);return a=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=F3(e);return a=ye("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=B3(d),y=new QU;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hh(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function j3(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>l5(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function K3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function J3(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Y3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function W3(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const w=p(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const R=p(t,["responseModalities"]);R!=null&&g(e,["responseModalities"],R);const k=p(t,["responseSchema"]);k!=null&&g(e,["responseSchema"],k);const L=p(t,["routingConfig"]);L!=null&&g(e,["routingConfig"],L);const z=p(t,["seed"]);z!=null&&g(e,["seed"],z);const F=p(t,["speechConfig"]);F!=null&&g(e,["speechConfig"],wR(F));const B=p(t,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const K=p(t,["temperature"]);K!=null&&g(e,["temperature"],K);const X=p(t,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const G=p(t,["topK"]);G!=null&&g(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&g(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Q3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function X3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function Z3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],x0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const R=p(t,["systemInstruction"]);e!==void 0&&R!=null&&g(e,["setup","systemInstruction"],j3(ei(R)));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let G=Zl(k);Array.isArray(G)&&(G=G.map(I=>c5(Xl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],u5(L));const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&g(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function e5(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],W3(i));const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],wR(x0(E)));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const R=p(t,["systemInstruction"]);e!==void 0&&R!=null&&g(e,["setup","systemInstruction"],ei(R));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let G=Zl(k);Array.isArray(G)&&(G=G.map(I=>f5(Xl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],L);const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&g(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function t5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],Z3(s,n)),n}function n5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],e5(s,n)),n}function i5(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function r5(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["weightedPrompts"],i)}return e}function s5(t){const e={},n=p(t,["media"]);if(n!=null){let h=fR(n);Array.isArray(h)&&(h=h.map(y=>hh(y))),g(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],hh(hR(i)));const s=p(t,["audioStreamEnd"]);s!=null&&g(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&g(e,["video"],hh(dR(a)));const l=p(t,["text"]);l!=null&&g(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function o5(t){const e={},n=p(t,["media"]);if(n!=null){let h=fR(n);Array.isArray(h)&&(h=h.map(y=>y)),g(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],hR(i));const s=p(t,["audioStreamEnd"]);s!=null&&g(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&g(e,["video"],dR(a));const l=p(t,["text"]);l!=null&&g(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function a5(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const s=p(t,["toolCall"]);s!=null&&g(e,["toolCall"],s);const a=p(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const l=p(t,["usageMetadata"]);l!=null&&g(e,["usageMetadata"],d5(l));const c=p(t,["goAway"]);c!=null&&g(e,["goAway"],c);const d=p(t,["sessionResumptionUpdate"]);return d!=null&&g(e,["sessionResumptionUpdate"],d),e}function l5(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],K3(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],J3(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],hh(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function u5(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wR(t){const e={},n=p(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function c5(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],Q3(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],X3(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function f5(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>Y3(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function d5(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const s=p(t,["candidatesTokenCount"]);s!=null&&g(e,["responseTokenCount"],s);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const l=p(t,["thoughtsTokenCount"]);l!=null&&g(e,["thoughtsTokenCount"],l);const c=p(t,["totalTokenCount"]);c!=null&&g(e,["totalTokenCount"],c);const d=p(t,["promptTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(R=>R)),g(e,["promptTokensDetails"],w)}const h=p(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(R=>R)),g(e,["cacheTokensDetails"],w)}const y=p(t,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(R=>R)),g(e,["responseTokensDetails"],w)}const E=p(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(R=>R)),g(e,["toolUsePromptTokensDetails"],w)}const T=p(t,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h5(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function p5(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],m5(i));const s=p(t,["tokenCount"]);s!=null&&g(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>w)),g(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function m5(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["citations"],i)}return e}function g5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let a=ur(s);Array.isArray(a)&&(a=a.map(l=>l)),g(n,["contents"],a)}return n}function y5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["tokensInfo"],s)}return e}function v5(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&g(e,["statistics"],_5(i)),e}function _5(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Np(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>xF(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function E5(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function T5(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function S5(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],ei(i));const s=p(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>RR(c))),g(e,["tools"],l)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],hF(a)),n}function A5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=ur(s);Array.isArray(l)&&(l=l.map(c=>Np(c))),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&T5(a),n}function w5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=ur(s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&S5(a,n),n}function b5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const s=p(t,["cachedContentTokenCount"]);return s!=null&&g(e,["cachedContentTokenCount"],s),e}function C5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function I5(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],gt(t,i)),n}function x5(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],gt(t,i)),n}function R5(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function N5(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function D5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const w=p(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const R=p(t,["outputMimeType"]);e!==void 0&&R!=null&&g(e,["parameters","outputOptions","mimeType"],R);const k=p(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","compressionQuality"],k);const L=p(t,["addWatermark"]);e!==void 0&&L!=null&&g(e,["parameters","addWatermark"],L);const z=p(t,["labels"]);e!==void 0&&z!=null&&g(e,["labels"],z);const F=p(t,["editMode"]);e!==void 0&&F!=null&&g(e,["parameters","editMode"],F);const B=p(t,["baseSteps"]);return e!==void 0&&B!=null&&g(e,["parameters","editConfig","baseSteps"],B),n}function M5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>PF(d))),g(n,["instances[0]","referenceImages"],c)}const l=p(e,["config"]);return l!=null&&D5(l,n),n}function k5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Dp(a))),g(e,["generatedImages"],s)}return e}function P5(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function V5(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["instances[]","title"],s);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const l=p(t,["mimeType"]);e!==void 0&&l!=null&&g(e,["instances[]","mimeType"],l);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&g(e,["parameters","autoTruncate"],c),n}function L5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let c=b0(t,s);Array.isArray(c)&&(c=c.map(d=>d)),g(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&P5(a,n);const l=p(e,["model"]);return l!==void 0&&g(n,["requests[]","model"],gt(t,l)),n}function O5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=b0(t,s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["instances[]","content"],l)}const a=p(e,["config"]);return a!=null&&V5(a,n),n}function U5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&g(e,["metadata"],s),e}function F5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>v5(l))),g(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&g(e,["metadata"],s),e}function B5(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function q5(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function z5(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H5(t){const e={},n=p(t,["mode"]);n!=null&&g(e,["mode"],n);const i=p(t,["allowedFunctionNames"]);if(i!=null&&g(e,["allowedFunctionNames"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function G5(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function $5(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],Np(ei(s)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const R=p(e,["frequencyPenalty"]);R!=null&&g(i,["frequencyPenalty"],R);const k=p(e,["seed"]);k!=null&&g(i,["seed"],k);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const z=p(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],C0(z));const F=p(e,["responseJsonSchema"]);if(F!=null&&g(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(n!==void 0&&B!=null){let O=B;Array.isArray(O)&&(O=O.map(U=>VF(U))),g(n,["safetySettings"],O)}const K=p(e,["tools"]);if(n!==void 0&&K!=null){let O=Zl(K);Array.isArray(O)&&(O=O.map(U=>zF(Xl(U)))),g(n,["tools"],O)}const X=p(e,["toolConfig"]);if(n!==void 0&&X!=null&&g(n,["toolConfig"],qF(X)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&g(n,["cachedContent"],Cs(t,G));const I=p(e,["responseModalities"]);I!=null&&g(i,["responseModalities"],I);const x=p(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const N=p(e,["speechConfig"]);if(N!=null&&g(i,["speechConfig"],I0(N)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=p(e,["thinkingConfig"]);V!=null&&g(i,["thinkingConfig"],V);const M=p(e,["imageConfig"]);return M!=null&&g(i,["imageConfig"],vF(M)),i}function j5(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],ei(s));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const R=p(e,["frequencyPenalty"]);R!=null&&g(i,["frequencyPenalty"],R);const k=p(e,["seed"]);k!=null&&g(i,["seed"],k);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const z=p(e,["responseSchema"]);z!=null&&g(i,["responseSchema"],C0(z));const F=p(e,["responseJsonSchema"]);F!=null&&g(i,["responseJsonSchema"],F);const B=p(e,["routingConfig"]);B!=null&&g(i,["routingConfig"],B);const K=p(e,["modelSelectionConfig"]);K!=null&&g(i,["modelConfig"],K);const X=p(e,["safetySettings"]);if(n!==void 0&&X!=null){let ee=X;Array.isArray(ee)&&(ee=ee.map(ce=>ce)),g(n,["safetySettings"],ee)}const G=p(e,["tools"]);if(n!==void 0&&G!=null){let ee=Zl(G);Array.isArray(ee)&&(ee=ee.map(ce=>RR(Xl(ce)))),g(n,["tools"],ee)}const I=p(e,["toolConfig"]);n!==void 0&&I!=null&&g(n,["toolConfig"],I);const x=p(e,["labels"]);n!==void 0&&x!=null&&g(n,["labels"],x);const N=p(e,["cachedContent"]);n!==void 0&&N!=null&&g(n,["cachedContent"],Cs(t,N));const V=p(e,["responseModalities"]);V!=null&&g(i,["responseModalities"],V);const M=p(e,["mediaResolution"]);M!=null&&g(i,["mediaResolution"],M);const O=p(e,["speechConfig"]);O!=null&&g(i,["speechConfig"],xR(I0(O)));const U=p(e,["audioTimestamp"]);U!=null&&g(i,["audioTimestamp"],U);const be=p(e,["thinkingConfig"]);be!=null&&g(i,["thinkingConfig"],be);const ve=p(e,["imageConfig"]);return ve!=null&&g(i,["imageConfig"],_F(ve)),i}function vb(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=ur(s);Array.isArray(l)&&(l=l.map(c=>Np(c))),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],$5(t,a,n)),n}function _b(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["contents"]);if(s!=null){let l=ur(s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],j5(t,a,n)),n}function Eb(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>p5(h))),g(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function Tb(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(y=>y)),g(e,["candidates"],h)}const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(t,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=p(t,["responseId"]);c!=null&&g(e,["responseId"],c);const d=p(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function K5(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&g(e,["parameters","aspectRatio"],s);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&g(e,["parameters","includeSafetyAttributes"],d);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const y=p(t,["language"]);e!==void 0&&y!=null&&g(e,["parameters","language"],y);const E=p(t,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const T=p(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=p(t,["imageSize"]);if(e!==void 0&&w!=null&&g(e,["parameters","sampleImageSize"],w),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function J5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const w=p(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const R=p(t,["outputMimeType"]);e!==void 0&&R!=null&&g(e,["parameters","outputOptions","mimeType"],R);const k=p(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","compressionQuality"],k);const L=p(t,["addWatermark"]);e!==void 0&&L!=null&&g(e,["parameters","addWatermark"],L);const z=p(t,["labels"]);e!==void 0&&z!=null&&g(e,["labels"],z);const F=p(t,["imageSize"]);e!==void 0&&F!=null&&g(e,["parameters","sampleImageSize"],F);const B=p(t,["enhancePrompt"]);return e!==void 0&&B!=null&&g(e,["parameters","enhancePrompt"],B),n}function Y5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&K5(a,n),n}function W5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&J5(a,n),n}function Q5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>uF(l))),g(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&g(e,["positivePromptSafetyAttributes"],CR(s)),e}function X5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Dp(l))),g(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&g(e,["positivePromptSafetyAttributes"],IR(s)),e}function Z5(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=p(t,["durationSeconds"]);if(e!==void 0&&s!=null&&g(e,["parameters","durationSeconds"],s),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=p(t,["resolution"]);e!==void 0&&l!=null&&g(e,["parameters","resolution"],l);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(t,["negativePrompt"]);e!==void 0&&d!=null&&g(e,["parameters","negativePrompt"],d);const h=p(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=p(t,["lastFrame"]);e!==void 0&&y!=null&&g(e,["instances[0]","lastFrame"],Mp(y));const E=p(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(w=>t9(w))),g(e,["instances[0]","referenceImages"],T)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function eF(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const l=p(t,["durationSeconds"]);e!==void 0&&l!=null&&g(e,["parameters","durationSeconds"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&g(e,["parameters","aspectRatio"],d);const h=p(t,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const T=p(t,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const w=p(t,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const R=p(t,["generateAudio"]);e!==void 0&&R!=null&&g(e,["parameters","generateAudio"],R);const k=p(t,["lastFrame"]);e!==void 0&&k!=null&&g(e,["instances[0]","lastFrame"],xr(k));const L=p(t,["referenceImages"]);if(e!==void 0&&L!=null){let B=L;Array.isArray(B)&&(B=B.map(K=>n9(K))),g(e,["instances[0]","referenceImages"],B)}const z=p(t,["mask"]);e!==void 0&&z!=null&&g(e,["instances[0]","mask"],e9(z));const F=p(t,["compressionQuality"]);return e!==void 0&&F!=null&&g(e,["parameters","compressionQuality"],F),n}function tF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],sF(l)),e}function nF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],oF(l)),e}function iF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],Mp(a));const l=p(e,["video"]);l!=null&&g(n,["instances[0]","video"],NR(l));const c=p(e,["source"]);c!=null&&aF(c,n);const d=p(e,["config"]);return d!=null&&Z5(d,n),n}function rF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],xr(a));const l=p(e,["video"]);l!=null&&g(n,["instances[0]","video"],DR(l));const c=p(e,["source"]);c!=null&&lF(c,n);const d=p(e,["config"]);return d!=null&&eF(d,n),n}function sF(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>fF(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function oF(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>dF(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function aF(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Mp(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],NR(a)),n}function lF(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],xr(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],DR(a)),n}function uF(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],EF(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const s=p(t,["_self"]);return s!=null&&g(e,["safetyAttributes"],CR(s)),e}function Dp(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],bR(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const s=p(t,["_self"]);s!=null&&g(e,["safetyAttributes"],IR(s));const a=p(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function cF(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],bR(n));const i=p(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["labels"],s)}return e}function fF(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],XF(n)),e}function dF(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],ZF(n)),e}function hF(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const w=p(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const R=p(t,["responseModalities"]);R!=null&&g(e,["responseModalities"],R);const k=p(t,["responseSchema"]);k!=null&&g(e,["responseSchema"],k);const L=p(t,["routingConfig"]);L!=null&&g(e,["routingConfig"],L);const z=p(t,["seed"]);z!=null&&g(e,["seed"],z);const F=p(t,["speechConfig"]);F!=null&&g(e,["speechConfig"],xR(F));const B=p(t,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const K=p(t,["temperature"]);K!=null&&g(e,["temperature"],K);const X=p(t,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const G=p(t,["topK"]);G!=null&&g(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&g(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function pF(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],gt(t,i)),n}function mF(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],gt(t,i)),n}function gF(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function yF(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function vF(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _F(t){const e={},n=p(t,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=p(t,["imageSize"]);i!=null&&g(e,["imageSize"],i);const s=p(t,["outputMimeType"]);s!=null&&g(e,["imageOutputOptions","mimeType"],s);const a=p(t,["outputCompressionQuality"]);return a!=null&&g(e,["imageOutputOptions","compressionQuality"],a),e}function EF(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],Lo(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function bR(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Mp(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],Lo(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function xr(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function TF(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&g(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],yR(t,c)),i}function SF(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&g(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],yR(t,c)),i}function AF(t,e){const n={},i=p(e,["config"]);return i!=null&&TF(t,i,n),n}function wF(t,e){const n={},i=p(e,["config"]);return i!=null&&SF(t,i,n),n}function bF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=vR(s);Array.isArray(a)&&(a=a.map(l=>Yy(l))),g(e,["models"],a)}return e}function CF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=vR(s);Array.isArray(a)&&(a=a.map(l=>Wy(l))),g(e,["models"],a)}return e}function IF(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const s=p(t,["maskDilation"]);return s!=null&&g(e,["dilation"],s),e}function Yy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);s!=null&&g(e,["description"],s);const a=p(t,["version"]);a!=null&&g(e,["version"],a);const l=p(t,["_self"]);l!=null&&g(e,["tunedModelInfo"],HF(l));const c=p(t,["inputTokenLimit"]);c!=null&&g(e,["inputTokenLimit"],c);const d=p(t,["outputTokenLimit"]);d!=null&&g(e,["outputTokenLimit"],d);const h=p(t,["supportedGenerationMethods"]);h!=null&&g(e,["supportedActions"],h);const y=p(t,["temperature"]);y!=null&&g(e,["temperature"],y);const E=p(t,["maxTemperature"]);E!=null&&g(e,["maxTemperature"],E);const T=p(t,["topP"]);T!=null&&g(e,["topP"],T);const w=p(t,["topK"]);w!=null&&g(e,["topK"],w);const R=p(t,["thinking"]);return R!=null&&g(e,["thinking"],R),e}function Wy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);s!=null&&g(e,["description"],s);const a=p(t,["versionId"]);a!=null&&g(e,["version"],a);const l=p(t,["deployedModels"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(T=>B5(T))),g(e,["endpoints"],E)}const c=p(t,["labels"]);c!=null&&g(e,["labels"],c);const d=p(t,["_self"]);d!=null&&g(e,["tunedModelInfo"],GF(d));const h=p(t,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const y=p(t,["checkpoints"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(T=>T)),g(e,["checkpoints"],E)}return e}function xF(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],q5(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],z5(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],h5(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function RF(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],xr(n)),e}function NF(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["baseSteps"]);e!==void 0&&s!=null&&g(e,["parameters","baseSteps"],s);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=p(t,["seed"]);e!==void 0&&l!=null&&g(e,["parameters","seed"],l);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const h=p(t,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const E=p(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const T=p(t,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const w=p(t,["labels"]);return e!==void 0&&w!=null&&g(e,["labels"],w),n}function DF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["source"]);s!=null&&kF(s,n);const a=p(e,["config"]);return a!=null&&NF(a,n),n}function MF(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Dp(s))),g(e,["generatedImages"],i)}return e}function kF(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["personImage"]);e!==void 0&&s!=null&&g(e,["instances[0]","personImage","image"],xr(s));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>RF(c))),g(e,["instances[0]","productImages"],l)}return n}function PF(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],xr(n));const i=p(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const s=p(t,["referenceType"]);s!=null&&g(e,["referenceType"],s);const a=p(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],IF(a));const l=p(t,["controlImageConfig"]);l!=null&&g(e,["controlImageConfig"],E5(l));const c=p(t,["styleImageConfig"]);c!=null&&g(e,["styleImageConfig"],c);const d=p(t,["subjectImageConfig"]);return d!=null&&g(e,["subjectImageConfig"],d),e}function CR(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&g(e,["contentType"],s),e}function IR(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&g(e,["contentType"],s),e}function VF(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function LF(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],xr(n)),e}function OF(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const s=p(t,["maxPredictions"]);e!==void 0&&s!=null&&g(e,["parameters","maxPredictions"],s);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const l=p(t,["maskDilation"]);e!==void 0&&l!=null&&g(e,["parameters","maskDilation"],l);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&g(e,["parameters","binaryColorThreshold"],c);const d=p(t,["labels"]);return e!==void 0&&d!=null&&g(e,["labels"],d),n}function UF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["source"]);s!=null&&BF(s,n);const a=p(e,["config"]);return a!=null&&OF(a,n),n}function FF(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>cF(s))),g(e,["generatedMasks"],i)}return e}function BF(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],xr(s));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],LF(a)),n}function xR(t){const e={},n=p(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function qF(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&g(e,["functionCallingConfig"],H5(n));const i=p(t,["retrievalConfig"]);return i!=null&&g(e,["retrievalConfig"],i),e}function zF(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],gF(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],yF(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function RR(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>G5(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function HF(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&g(e,["updateTime"],s),e}function GF(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&g(e,["updateTime"],s),e}function $F(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function jF(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function KF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","name"],gt(t,i));const s=p(e,["config"]);return s!=null&&$F(s,n),n}function JF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&jF(s,n),n}function YF(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&g(e,["parameters","safetySetting"],s);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const l=p(t,["includeRaiReason"]);e!==void 0&&l!=null&&g(e,["parameters","includeRaiReason"],l);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","compressionQuality"],d);const h=p(t,["enhanceInputImage"]);e!==void 0&&h!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=p(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const E=p(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(t,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const w=p(t,["mode"]);return e!==void 0&&w!=null&&g(e,["parameters","mode"],w),n}function WF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],gt(t,i));const s=p(e,["image"]);s!=null&&g(n,["instances[0]","image"],xr(s));const a=p(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=p(e,["config"]);return l!=null&&YF(l,n),n}function QF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Dp(a))),g(e,["generatedImages"],s)}return e}function XF(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Lo(i));const s=p(t,["encoding"]);return s!=null&&g(e,["mimeType"],s),e}function ZF(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function e9(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],xr(n));const i=p(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function t9(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Mp(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function n9(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],xr(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function NR(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["encoding"],s),e}function DR(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Lo(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i9="Content-Type",r9="X-Server-Timeout",s9="User-Agent",Qy="x-goog-api-client",o9="1.30.0",a9=`google-genai-sdk/${o9}`,l9="v1beta1",u9="v1beta",Sb=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class c9{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:l9,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:u9,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&f9(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await Ab(s),new jy(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await Ab(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Nl(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield qt(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(d,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const T=JSON.parse(JSON.stringify(E.error)),w=T.status,R=T.code,k=`got status: ${w}. ${JSON.stringify(E)}`;if(R>=400&&R<600)throw new Rp({message:k,status:R})}}catch(E){if(E.name==="ApiError")throw E}l+=h;let y=l.match(Sb);for(;y;){const E=y[1];try{const T=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield qt(new jy(T)),l=l.slice(y[0].length),y=l.match(Sb)}catch(T){throw new Error(`exception parsing stream chunk ${E}. ${T}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=a9+" "+this.clientOptions.userAgentExtra;return e[s9]=n,e[Qy]=n,e[i9]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(r9,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const d={file:s},h=this.getFileName(e),y=ye("upload/v1beta/files",d._url),E=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,d,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var s;const a=this.clientOptions.uploader,l=await a.stat(n),c=String(l.size),d=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(h,c,d,y,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,s,a,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function Ab(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Rp({message:s,status:n}):new Error(s)}}function f9(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],y=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?c[d]=i(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d9="mcp_used/unknown";let h9=!1;function MR(t){for(const e of t)if(p9(e)||typeof e=="object"&&"inputSchema"in e)return!0;return h9}function kR(t){var e;const n=(e=t[Qy])!==null&&e!==void 0?e:"";t[Qy]=(n+` ${d9}`).trimStart()}function p9(t){return t!==null&&typeof t=="object"&&t instanceof R0}function m9(t,e=100){return Nl(this,arguments,function*(){let i,s=0;for(;s<e;){const a=yield qt(t.listTools({cursor:i}));for(const l of a.tools)yield yield qt(l),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class R0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new R0(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const y of this.mcpClients)try{for(var c=!0,d=(n=void 0,Sc(m9(y))),h;h=await d.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const E=s;l.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=y}}catch(E){n={error:E}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),a6(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function g9(t,e,n){const i=new ZU;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class y9{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=E9(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const y=new Promise(B=>{h=B}),E=e.callbacks,T=function(){h({})},w=this.apiClient,R={onopen:T,onmessage:B=>{g9(w,E.onmessage,B)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(B){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(B){}},k=this.webSocketFactory.create(d,_9(l),R);k.connect(),await y;const F={setup:{model:gt(this.apiClient,e.model)}};return k.send(JSON.stringify(F)),new v9(k,this.apiClient)}}class v9{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=r5(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=i5(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Sl.PLAY)}pause(){this.sendPlaybackControl(Sl.PAUSE)}stop(){this.sendPlaybackControl(Sl.STOP)}resetContext(){this.sendPlaybackControl(Sl.RESET_CONTEXT)}close(){this.conn.close()}}function _9(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function E9(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T9="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function S9(t,e,n){const i=new XU;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const l=a5(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class A9{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new y9(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&MR(e.config.tools)&&kR(E);const T=I9(E);if(this.apiClient.isVertexAI())y=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const N=this.apiClient.getApiKey();let V="BidiGenerateContent",M="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",M="access_token"),y=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${V}?${M}=${N}`}let w=()=>{};const R=new Promise(N=>{w=N}),k=e.callbacks,L=function(){var N;(N=k==null?void 0:k.onopen)===null||N===void 0||N.call(k),w({})},z=this.apiClient,F={onopen:L,onmessage:N=>{S9(z,k.onmessage,N)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(N){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(N){}},B=this.webSocketFactory.create(y,C9(T),F);B.connect(),await R;let K=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&K.startsWith("publishers/")){const N=this.apiClient.getProject(),V=this.apiClient.getLocation();K=`projects/${N}/locations/${V}/`+K}let X={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Hh.AUDIO]}:e.config.responseModalities=[Hh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],I=[];for(const N of G)if(this.isCallableTool(N)){const V=N;I.push(await V.tool())}else I.push(N);I.length>0&&(e.config.tools=I);const x={model:K,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=n5(this.apiClient,x):X=t5(this.apiClient,x),delete X.config,B.send(JSON.stringify(X)),new b9(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const w9={turnComplete:!0};class b9{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ur(n.turns),e.isVertexAI()||(i=i.map(s=>Np(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(T9)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},w9),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:o5(e)}:n={realtimeInput:s5(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function C9(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function I9(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wb=10;function bb(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Dl(l)){s=!0;break}if(!s)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Dl(t){return"callTool"in t&&typeof t.callTool=="function"}function x9(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Dl(s)))!==null&&i!==void 0?i:!1}function Cb(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(Dl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function Ib(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R9 extends bs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,a,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!x9(n)||bb(n.config))return await this.generateContentInternal(d);const h=Cb(n);if(h.length>0){const k=h.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let y,E;const T=ur(d.contents),w=(a=(s=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:wb;let R=0;for(;R<w&&(y=await this.generateContentInternal(d),!(!y.functionCalls||y.functionCalls.length===0));){const k=y.candidates[0].content,L=[];for(const z of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Dl(z)){const B=await z.callTool(y.functionCalls);L.push(...B)}R++,E={role:"user",parts:L},d.contents=ur(d.contents),d.contents.push(k),d.contents.push(E),Ib(d.config)&&(T.push(k),T.push(E))}return Ib(d.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async n=>{var i,s,a,l,c;if(this.maybeMoveToResponseJsonSchem(n),bb(n.config)){const E=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(E)}const d=Cb(n);if(d.length>0){const E=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(s=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,y=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let a;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new xa(As.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,a,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>Dl(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&MR(e.config.tools)){const d=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),kR(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,s;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Dl(l)){const c=l,d=await c.tool();for(const h of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,c)}}return a}async processAfcStream(e){var n,i,s;const a=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:wb;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,y,E){var T,w;return Nl(this,arguments,function*(){for(var R,k,L,z;c<a;){l&&(c++,l=!1);const X=yield qt(h.processParamsMaybeAddMcpUsage(E)),G=yield qt(h.generateContentStreamInternal(X)),I=[],x=[];try{for(var F=!0,B=(k=void 0,Sc(G)),K;K=yield qt(B.next()),R=K.done,!R;F=!0){z=K.value,F=!1;const N=z;if(yield yield qt(N),N.candidates&&(!((T=N.candidates[0])===null||T===void 0)&&T.content)){x.push(N.candidates[0].content);for(const V of(w=N.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(V.functionCall.name)){const M=yield qt(y.get(V.functionCall.name).callTool([V.functionCall]));I.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(N){k={error:N}}finally{try{!F&&!R&&(L=B.return)&&(yield qt(L.call(B)))}finally{if(k)throw k.error}}if(I.length>0){l=!0;const N=new Xu;N.candidates=[{content:{role:"user",parts:I}}],yield yield qt(N);const V=[];V.push(...x),V.push({role:"user",parts:I});const M=ur(E.contents).concat(V);E.contents=M}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=_b(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=Tb(y),T=new Xu;return Object.assign(T,E),T})}else{const h=vb(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=Eb(y),T=new Xu;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=_b(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(E){return Nl(this,arguments,function*(){var T,w,R,k;try{for(var L=!0,z=Sc(E),F;F=yield qt(z.next()),T=F.done,!T;L=!0){k=F.value,L=!1;const B=k,K=Tb(yield qt(B.json()));K.sdkHttpResponse={headers:B.headers};const X=new Xu;Object.assign(X,K),yield yield qt(X)}}catch(B){w={error:B}}finally{try{!L&&!T&&(R=z.return)&&(yield qt(R.call(z)))}finally{if(w)throw w.error}}})})}else{const h=vb(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(E){return Nl(this,arguments,function*(){var T,w,R,k;try{for(var L=!0,z=Sc(E),F;F=yield qt(z.next()),T=F.done,!T;L=!0){k=F.value,L=!1;const B=k,K=Eb(yield qt(B.json()));K.sdkHttpResponse={headers:B.headers};const X=new Xu;Object.assign(X,K),yield yield qt(X)}}catch(B){w={error:B}}finally{try{!L&&!T&&(R=z.return)&&(yield qt(R.call(z)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=O5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=F5(y),T=new nb;return Object.assign(T,E),T})}else{const h=L5(this.apiClient,e);return c=ye("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=U5(y),T=new nb;return Object.assign(T,E),T})}}async generateImagesInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=W5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=X5(y),T=new ib;return Object.assign(T,E),T})}else{const h=Y5(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=Q5(y),T=new ib;return Object.assign(T,E),T})}}async editImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=M5(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=k5(d),y=new qU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=WF(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=QF(d),y=new zU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=DF(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=MF(d),y=new HU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=UF(this.apiClient,e);return a=ye("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=FF(d),y=new GU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=mF(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Wy(y))}else{const h=pF(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Yy(y))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=wF(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=CF(y),T=new rb;return Object.assign(T,E),T})}else{const h=AF(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=bF(y),T=new rb;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=JF(this.apiClient,e);return c=ye("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Wy(y))}else{const h=KF(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Yy(y))}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=x5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=N5(y),T=new sb;return Object.assign(T,E),T})}else{const h=I5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=R5(y),T=new sb;return Object.assign(T,E),T})}}async countTokens(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=w5(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=C5(y),T=new ob;return Object.assign(T,E),T})}else{const h=A5(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=b5(y),T=new ob;return Object.assign(T,E),T})}}async computeTokens(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=g5(this.apiClient,e);return a=ye("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=y5(d),y=new $U;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=rF(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>{const E=nF(y),T=new Gh;return Object.assign(T,E),T})}else{const h=iF(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const E=tF(y),T=new Gh;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N9 extends bs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=VU(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l}else{const h=PU(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=IU(e);return a=ye("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D9(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function M9(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>q9(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function k9(t,e,n){const i={},s=p(e,["expireTime"]);n!==void 0&&s!=null&&g(n,["expireTime"],s);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const l=p(e,["uses"]);n!==void 0&&l!=null&&g(n,["uses"],l);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&g(n,["bidiGenerateContentSetup"],B9(t,c));const d=p(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&g(n,["fieldMask"],d),i}function P9(t,e){const n={},i=p(e,["config"]);return i!=null&&g(n,["config"],k9(t,i,n)),n}function V9(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function L9(t){const e={},n=p(t,["id"]);n!=null&&g(e,["id"],n);const i=p(t,["args"]);i!=null&&g(e,["args"],i);const s=p(t,["name"]);if(s!=null&&g(e,["name"],s),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function O9(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function U9(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function F9(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],x0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const R=p(t,["systemInstruction"]);e!==void 0&&R!=null&&g(e,["setup","systemInstruction"],M9(ei(R)));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let G=Zl(k);Array.isArray(G)&&(G=G.map(I=>H9(Xl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],z9(L));const z=p(t,["inputAudioTranscription"]);e!==void 0&&z!=null&&g(e,["setup","inputAudioTranscription"],z);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const K=p(t,["contextWindowCompression"]);e!==void 0&&K!=null&&g(e,["setup","contextWindowCompression"],K);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function B9(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],gt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],F9(s,n)),n}function q9(t){const e={},n=p(t,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],V9(a));const l=p(t,["functionCall"]);l!=null&&g(e,["functionCall"],L9(l));const c=p(t,["functionResponse"]);c!=null&&g(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&g(e,["inlineData"],D9(d));const h=p(t,["text"]);h!=null&&g(e,["text"],h);const y=p(t,["thought"]);y!=null&&g(e,["thought"],y);const E=p(t,["thoughtSignature"]);E!=null&&g(e,["thoughtSignature"],E);const T=p(t,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function z9(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function H9(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],O9(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],U9(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G9(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function $9(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=G9(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];a&&d.push(a),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class j9 extends bs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=P9(this.apiClient,e);a=ye("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=$9(c,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K9(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function J9(t){const e={},n=p(t,["config"]);return n!=null&&K9(n,e),e}function Y9(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function W9(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&Y9(i,e),e}function Q9(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function X9(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["customMetadata"],a)}const s=p(t,["chunkingConfig"]);return e!==void 0&&s!=null&&g(e,["chunkingConfig"],s),n}function Z9(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],tB(l)),e}function eB(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&g(e,["fileName"],i);const s=p(t,["config"]);return s!=null&&X9(s,e),e}function tB(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function nB(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function iB(t){const e={},n=p(t,["config"]);return n!=null&&nB(n,e),e}function rB(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["fileSearchStores"],a)}return e}function sB(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),g(e,["customMetadata"],c)}const l=p(t,["chunkingConfig"]);return e!==void 0&&l!=null&&g(e,["chunkingConfig"],l),n}function oB(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&sB(i,e),e}function aB(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lB(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function uB(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&lB(i,e),e}function cB(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function fB(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function dB(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&fB(i,e),e}function hB(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pB extends bs{constructor(e){super(),this.apiClient=e,this.list=async n=>new xa(As.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=cB(e);return a=ye("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uB(e);s=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dB(e);return a=ye("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=hB(d),y=new jU;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mB extends bs{constructor(e,n=new pB(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new xa(As.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=J9(e);return a=ye("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Q9(e);return a=ye("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=W9(e);s=ye("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iB(e);return a=ye("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=rB(d),y=new KU;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oB(e);return a=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=aB(d),y=new JU;return Object.assign(y,h),y})}}async importFile(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eB(e);return a=ye("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=Z9(d),y=new A0;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gB(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function yB(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function vB(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=p(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(t,["learningRateMultiplier"]);if(l!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=p(t,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function _B(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec"],xb(w))}else if(s==="PREFERENCE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec"],xb(w))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const l=p(t,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(d==="PREFERENCE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let y=p(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(y==="PREFERENCE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(t,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function EB(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&g(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&DB(a);const l=p(t,["config"]);return l!=null&&vB(l,n),n}function TB(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&g(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&MB(a,n,e);const l=p(t,["config"]);return l!=null&&_B(l,n,e),n}function SB(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function AB(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function wB(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function bB(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function CB(t,e){const n={},i=p(t,["config"]);return i!=null&&wB(i,n),n}function IB(t,e){const n={},i=p(t,["config"]);return i!=null&&bB(i,n),n}function xB(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&g(n,["nextPageToken"],s);const a=p(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>PR(c))),g(n,["tuningJobs"],l)}return n}function RB(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&g(n,["nextPageToken"],s);const a=p(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Xy(c))),g(n,["tuningJobs"],l)}return n}function NB(t,e){const n={},i=p(t,["name"]);i!=null&&g(n,["model"],i);const s=p(t,["name"]);return s!=null&&g(n,["endpoint"],s),n}function DB(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(n,["examples","examples"],s)}return n}function MB(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function PR(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["state"]);a!=null&&g(n,["state"],mR(a));const l=p(t,["createTime"]);l!=null&&g(n,["createTime"],l);const c=p(t,["tuningTask","startTime"]);c!=null&&g(n,["startTime"],c);const d=p(t,["tuningTask","completeTime"]);d!=null&&g(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const E=p(t,["baseModel"]);E!=null&&g(n,["baseModel"],E);const T=p(t,["_self"]);return T!=null&&g(n,["tunedModel"],NB(T)),n}function Xy(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["state"]);a!=null&&g(n,["state"],mR(a));const l=p(t,["createTime"]);l!=null&&g(n,["createTime"],l);const c=p(t,["startTime"]);c!=null&&g(n,["startTime"],c);const d=p(t,["endTime"]);d!=null&&g(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const y=p(t,["error"]);y!=null&&g(n,["error"],y);const E=p(t,["description"]);E!=null&&g(n,["description"],E);const T=p(t,["baseModel"]);T!=null&&g(n,["baseModel"],T);const w=p(t,["tunedModel"]);w!=null&&g(n,["tunedModel"],w);const R=p(t,["preTunedModel"]);R!=null&&g(n,["preTunedModel"],R);const k=p(t,["supervisedTuningSpec"]);k!=null&&g(n,["supervisedTuningSpec"],k);const L=p(t,["preferenceOptimizationSpec"]);L!=null&&g(n,["preferenceOptimizationSpec"],L);const z=p(t,["tuningDataStats"]);z!=null&&g(n,["tuningDataStats"],z);const F=p(t,["encryptionSpec"]);F!=null&&g(n,["encryptionSpec"],F);const B=p(t,["partnerModelTuningSpec"]);B!=null&&g(n,["partnerModelTuningSpec"],B);const K=p(t,["customBaseModel"]);K!=null&&g(n,["customBaseModel"],K);const X=p(t,["experiment"]);X!=null&&g(n,["experiment"],X);const G=p(t,["labels"]);G!=null&&g(n,["labels"],G);const I=p(t,["outputUri"]);I!=null&&g(n,["outputUri"],I);const x=p(t,["pipelineJob"]);x!=null&&g(n,["pipelineJob"],x);const N=p(t,["serviceAccount"]);N!=null&&g(n,["serviceAccount"],N);const V=p(t,["tunedModelDisplayName"]);V!=null&&g(n,["tunedModelDisplayName"],V);const M=p(t,["veoTuningSpec"]);return M!=null&&g(n,["veoTuningSpec"],M),n}function kB(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["metadata"]);a!=null&&g(n,["metadata"],a);const l=p(t,["done"]);l!=null&&g(n,["done"],l);const c=p(t,["error"]);return c!=null&&g(n,["error"],c),n}function xb(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const s=p(t,["vertexDatasetResource"]);return s!=null&&g(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PB extends bs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new xa(As.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:$y.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=AB(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>Xy(y))}else{const h=SB(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>PR(y))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=IB(e);return c=ye("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=RB(y),T=new ab;return Object.assign(T,E),T})}else{const h=CB(e);return c=ye("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=xB(y),T=new ab;return Object.assign(T,E),T})}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=yB(e);l=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=gB(e);l=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=TB(e,e);return a=ye("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>Xy(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=EB(e);return a=ye("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>kB(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const LB=1024*1024*8,OB=3,UB=1e3,FB=2,jh="x-goog-upload-status";async function BB(t,e,n){var i;const s=await VR(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[jh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function qB(t,e,n){var i;const s=await VR(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[jh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=uR(a),c=new w0;return Object.assign(c,l),c}async function VR(t,e,n){var i,s;let a=0,l=0,c=new jy(new Response),d="upload";for(a=t.size;l<a;){const h=Math.min(LB,a-l),y=t.slice(l,l+h);l+h>=a&&(d+=", finalize");let E=0,T=UB;for(;E<OB&&(c=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[jh]));)E++,await HB(T),T=T*FB;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[jh])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function zB(t){return{size:t.size,type:t.type}}function HB(t){return new Promise(e=>setTimeout(e,t))}class GB{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await BB(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qB(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $B{create(e,n,i){return new jB(e,n,i)}}class jB{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rb="x-goog-api-key";class KB{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Rb)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Rb,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JB="gl-node/";class YB{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=bU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new KB(this.apiKey);this.apiClient=new c9({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:JB+"web",uploader:new GB,downloader:new VB}),this.models=new R9(this.apiClient),this.live=new A9(this.apiClient,s,new $B),this.batches=new e3(this.apiClient),this.chats=new V3(this.models,this.apiClient),this.caches=new M3(this.apiClient),this.files=new $3(this.apiClient),this.operations=new N9(this.apiClient),this.authTokens=new j9(this.apiClient),this.tunings=new PB(this.apiClient),this.fileSearchStores=new mB(this.apiClient)}}const LR={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},kp=new YB({apiKey:LR.geminiApiKey});function Pp(t){try{if(typeof t.text=="function")return t.text();if(t.candidates&&t.candidates.length>0){const e=t.candidates[0];if(e.content&&e.content.parts&&e.content.parts.length>0)return e.content.parts[0].text||"{}"}return"{}"}catch(e){return console.error("Erreur lors de l'extraction du texte Gemini:",e),"{}"}}async function WB(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets.`},n=t.map(s=>({inlineData:{data:s,mimeType:"image/jpeg"}})),i=await kp.models.generateContent({model:"gemini-1.5-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:Be.OBJECT,properties:{items:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{analysis:{type:Be.STRING},category:{type:Be.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Be.STRING},material:{type:Be.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const s=Pp(i),a=JSON.parse(s),l=["Hauts","Bas","Chaussures","Accessoires"];return a.items?(a.items.forEach(c=>{l.includes(c.category)||(c.category="Accessoires")}),a.items):[]}catch(s){throw console.error("Erreur parsing Gemini:",s),new Error("L'IA a renvoy une rponse malforme.")}}async function QB(t,e,n,i){const s=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!s.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",y=`
    Tu es un styliste expert. Cre 3 tenues compltes et harmonieuses bases sur le contexte : "${n}".
    
    Vtements disponibles :
    ${d}
    ${h}

    Rgles :
    1. Utilise UNIQUEMENT les articles lists.
    2. Chaque tenue doit tre complte (Haut + Bas + Chaussures si dispo).
    3. IMPORTANT : Renvoie l'ID EXACT et la description EXACTE pour chaque article.

    Rponds en JSON avec une liste "tenues".
  `,E=await kp.models.generateContent({model:"gemini-1.5-flash",contents:y,config:{responseMimeType:"application/json",responseSchema:{type:Be.OBJECT,properties:{tenues:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{titre:{type:Be.STRING},description:{type:Be.STRING},vetements:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{id:{type:Be.STRING},description:{type:Be.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{const T=Pp(E);return JSON.parse(T).tenues}catch(T){throw console.error("Erreur parsing Gemini:",T),new Error("Rponse malforme.")}}async function XB(t,e){const n=t.map(l=>`${l.category}: ${l.analysis}`).join(`
`),i=`Analyse cette garde-robe (${t.length} pices) et suggre 3-5 achats stratgiques.
  
  Garde-robe :
  ${n}
  
  Renvoie un rsum, les points forts, les manques, et des suggestions avec priorit et prix estim.`,s=await kp.models.generateContent({model:"gemini-1.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Be.OBJECT,properties:{summary:{type:Be.STRING},strengths:{type:Be.ARRAY,items:{type:Be.STRING}},gaps:{type:Be.ARRAY,items:{type:Be.STRING}},suggestions:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{category:{type:Be.STRING},description:{type:Be.STRING},reason:{type:Be.STRING},priority:{type:Be.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Be.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}}),a=Pp(s);return JSON.parse(a)}async function ZB(t,e,n,i){const s=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!s.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=`Cre une valise optimise pour ${n} jours. Contexte : ${i}.
    Utilise ces vtements :
    ${d}
    
    Renvoie un titre, un rsum et la liste des articles (id et description).`,y=await kp.models.generateContent({model:"gemini-1.5-flash",contents:h,config:{responseMimeType:"application/json",responseSchema:{type:Be.OBJECT,properties:{titre:{type:Be.STRING},resume:{type:Be.STRING},valise:{type:Be.ARRAY,items:{type:Be.OBJECT,properties:{id:{type:Be.STRING},description:{type:Be.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}}),E=Pp(y);return JSON.parse(E)}const eq=yU(TU,"generateVisualOutfit");async function tq(t,e){console.log(" Prparation du Virtual Try-On...");const n=t[0];if(!n||!n.imageSrc)throw new Error("Aucun vtement valide trouv pour l'essayage.");try{const s=(await eq({garmentUrl:n.imageSrc,category:n.category,description:n.analysis})).data;if(!s||!s.imageUrl)throw new Error("Pas d'image retourne par le serveur.");return console.log(" Image reue de Replicate !"),s.imageUrl}catch(i){throw console.error(" Erreur lors de l'appel Cloud Function :",i),i}}const nq=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),iq=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),Nb=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),OR=({className:t="h-8 w-8 text-gold"})=>A.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),N0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),D0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Db=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),UR=()=>A.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),rq=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),sq=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),oq=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),aq=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),lq=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),M0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Vp=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),k0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),uq=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),cq=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[A.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),A.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),P0=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Lp=()=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),fq=()=>A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]}),dq=({theme:t,toggleTheme:e,children:n})=>A.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:A.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[A.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsxs("div",{className:"flex items-center gap-4",children:[n,A.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?A.jsx(iq,{}):A.jsx(nq,{})})]})]})}),Mb=({user:t})=>{var w,R,k;const[e,n]=j.useState(""),[i,s]=j.useState(""),[a,l]=j.useState(!1),[c,d]=j.useState(!1),h=j.useRef(null);j.useEffect(()=>{const L=z=>{h.current&&!h.current.contains(z.target)&&d(!1)};return c&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[c]);const y=async()=>{try{await Ik(cc,_U)}catch(L){console.error("Erreur de connexion Google:",L)}},E=async L=>{L.preventDefault();try{a?await nk(cc,e,i):await ik(cc,e,i)}catch(z){console.error("Erreur d'authentification:",z)}},T=async()=>{try{await ak(cc)}catch(L){console.error("Erreur de dconnexion:",L)}};return t?A.jsxs("div",{className:"relative",ref:h,children:[A.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((w=t.displayName)==null?void 0:w[0])||((R=t.email)==null?void 0:R[0])||"U").toUpperCase()}),A.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((k=t.email)==null?void 0:k.split("@")[0])})]}),c&&A.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[A.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[A.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email})]}),A.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",A.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),A.jsxs("button",{onClick:y,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[A.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[A.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),A.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),A.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),A.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),A.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),A.jsxs("div",{className:"relative my-6",children:[A.jsx("div",{className:"absolute inset-0 flex items-center",children:A.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),A.jsx("div",{className:"relative flex justify-center text-sm",children:A.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),A.jsxs("form",{onSubmit:E,className:"space-y-4",children:[A.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:L=>n(L.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:L=>s(L.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),A.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),A.jsx("button",{onClick:()=>l(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},hq=({onAnalyze:t,isAnalyzing:e})=>{const n=j.useRef(null),[i,s]=j.useState([]),[a,l]=j.useState(!1),[c,d]=j.useState(!1);j.useEffect(()=>{const F=()=>d(window.innerWidth<1024);return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),j.useEffect(()=>()=>{i.forEach(F=>URL.revokeObjectURL(F.preview))},[i]);const h=F=>{const B=F.map(K=>({id:`${K.name}-${K.lastModified}-${Math.random()}`,file:K,preview:URL.createObjectURL(K)}));s(K=>[...K,...B])},y=F=>{F.target.files&&(h(Array.from(F.target.files)),F.target.value="")},E=()=>{var F;e||(F=n.current)==null||F.click()},T=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!0))},w=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1))},R=F=>{c||(F.preventDefault(),F.stopPropagation())},k=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1),F.dataTransfer.files&&F.dataTransfer.files.length>0&&(h(Array.from(F.dataTransfer.files)),F.dataTransfer.clearData()))},L=F=>{const B=i.find(K=>K.id===F);B&&URL.revokeObjectURL(B.preview),s(K=>K.filter(X=>X.id!==F))},z=()=>{i.length>0&&!e&&(t(i.map(F=>F.file)),s([]))};return A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:w,onDragOver:R,onDrop:k,children:[A.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),A.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[A.jsx("input",{type:"file",ref:n,onChange:y,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),A.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?A.jsxs(A.Fragment,{children:[A.jsx(OR,{}),A.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:A.jsx(Nb,{})}),A.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",A.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!c&&A.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[A.jsx("div",{className:"text-black transform-gpu scale-110",children:A.jsx(Nb,{})}),A.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&A.jsxs("div",{className:"mt-8",children:[A.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(F=>A.jsxs("div",{className:"relative group aspect-square",children:[A.jsx("img",{src:F.preview,alt:F.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),A.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),A.jsx("button",{onClick:()=>L(F.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:A.jsx(D0,{})})]},F.id))}),A.jsxs("button",{onClick:z,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(N0,{}),"Analyser les ",i.length," article(s)"]})]})]})},pq=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:s,isSet:a,isFavorite:l})=>A.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[A.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),A.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${s?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),s?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:A.jsx(k0,{})}):l?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:A.jsx(Lp,{})}):a?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:A.jsx(Vp,{})}):null,A.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:A.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),A.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:A.jsx(D0,{})})]}),mq={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},gq=({clothingItems:t,clothingSets:e=[],onItemClick:n,onDeleteItem:i,onCreateSet:s})=>{const[a,l]=j.useState("Hauts"),[c,d]=j.useState(mq),[h,y]=j.useState(!1),[E,T]=j.useState(new Set),w=j.useMemo(()=>e||[],[e]),R=j.useMemo(()=>new Set(w.flatMap(M=>M.itemIds||[])),[w]),k=t.length,L=[{name:"Hauts",icon:rq},{name:"Bas",icon:sq},{name:"Chaussures",icon:oq},{name:"Accessoires",icon:aq}],z=M=>{h?T(O=>{const U=new Set(O);return U.has(M.id)?U.delete(M.id):U.add(M.id),U}):n(M)},F=(M,O)=>{M.stopPropagation(),E.has(O)&&T(U=>{const be=new Set(U);return be.delete(O),be}),i(O)},B=j.useMemo(()=>t.filter(M=>{if(!(M.category===a))return!1;const U=a?c[a]:{color:"Toutes",material:"Toutes"},be=U.color==="Toutes"||M.color===U.color,ve=U.material==="Toutes"||M.material===U.material;return be&&ve}),[t,a,c]),K=j.useMemo(()=>{if(!a)return[];const M=t.filter(O=>O.category===a).map(O=>O.color);return["Toutes",...Array.from(new Set(M))]},[t,a]),X=j.useMemo(()=>{if(!a)return[];const M=t.filter(O=>O.category===a).map(O=>O.material);return["Toutes",...Array.from(new Set(M))]},[t,a]),G=M=>{a&&d(O=>({...O,[a]:{...O[a],color:M}}))},I=M=>{a&&d(O=>({...O,[a]:{...O[a],material:M}}))},x=M=>{l(a===M?null:M)},N=()=>{y(!h),T(new Set)},V=()=>{if(E.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const M=window.prompt("Donnez un nom  cet ensemble :");M&&(s(M,Array.from(E)),N())};return k===0?A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[A.jsx(Db,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),A.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(Db,{className:"w-8 h-8 text-gold"}),A.jsxs("div",{children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[k," vtement",k>1?"s":""]})]})]}),h?A.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.jsx("button",{onClick:N,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),A.jsxs("button",{onClick:V,disabled:E.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",E.size,")"]})]}):A.jsxs("button",{onClick:N,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[A.jsx(Vp,{}),"Crer un ensemble"]})]}),h&&A.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[A.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),A.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),A.jsx("div",{className:"space-y-6",children:L.map(({name:M,icon:O})=>{const U=t.filter(ve=>ve.category===M),be=a===M;return A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[A.jsxs("button",{onClick:()=>x(M),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(O,{className:"w-5 h-5 text-gold"}),A.jsx("span",{className:"font-semibold text-lg",children:M}),A.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",U.length,")"]})]}),A.jsx(lq,{className:`w-5 h-5 transition-transform ${be?"rotate-180":""}`})]}),be&&A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"flex flex-wrap gap-4",children:[A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),A.jsx("select",{value:c[M].color,onChange:ve=>G(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:K.map(ve=>A.jsx("option",{value:ve,children:ve},ve))})]}),A.jsxs("div",{className:"flex-1 min-w-[200px]",children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),A.jsx("select",{value:c[M].material,onChange:ve=>I(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:X.map(ve=>A.jsx("option",{value:ve,children:ve},ve))})]})]}),B.length>0?A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:B.map(ve=>A.jsx(pq,{imageSrc:ve.imageSrc,analysis:ve.analysis,onClick:()=>z(ve),onRemove:ee=>F(ee,ve.id),isSelected:E.has(ve.id),isSet:R.has(ve.id),isFavorite:ve.isFavorite},ve.id))}):A.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},M)})})]})},FR=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:s,weatherError:a})=>{const[l,c]=wn.useState(""),d=y=>{y.preventDefault(),n(l||"Casual")},h=["Casual","Soire chic","Travail (formel)"];return A.jsxs("div",{children:[A.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&A.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),a&&A.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!s&&!a&&A.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),A.jsx("form",{onSubmit:d,children:A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),A.jsx("div",{className:"flex justify-center gap-2 mb-4",children:h.map(y=>A.jsx("button",{type:"button",onClick:()=>c(y),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===y?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:y},y))}),A.jsx("input",{id:"occasion",type:"text",value:l,onChange:y=>c(y.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),A.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(N0,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},Kh=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:s,onGenerateVisual:a,generatingVisualFor:l})=>{const[c,d]=j.useState(null);j.useEffect(()=>{if(!c)return;const y=E=>{E.key==="Escape"&&d(null)};return window.addEventListener("keydown",y),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",y),document.body.style.overflow="auto"}},[c]);const h=y=>{const{id:E,description:T}=y;let w=e.find(k=>k.id===E);if(w)return w;let R=n.find(k=>k.id===E);if(R)return R;if(w=e.find(k=>k.analysis===E),w||(w=e.find(k=>k.analysis===T),w))return w};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"mt-10 space-y-8",children:t.map((y,E)=>{const T=i.some(R=>R.titre===y.titre&&R.description===y.description),w=l===y.titre;return A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[A.jsxs("div",{className:"flex justify-between items-start",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:y.titre}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{onClick:()=>a(y),disabled:w,className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors disabled:cursor-not-allowed","aria-label":"Gnrer un rendu visuel",title:"Gnrer un rendu visuel",children:w?A.jsx(OR,{className:"h-5 w-5"}):A.jsx(fq,{})}),A.jsx("button",{onClick:()=>s(y),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":T?"Retirer des favoris":"Ajouter aux favoris",children:T?A.jsx(Lp,{className:"w-6 h-6 text-gold"}):A.jsx(P0,{className:"w-6 h-6"})})]})]})," ",A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:y.description}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:y.vetements.map((R,k)=>{const L=h(R),z=L?L.imageSrc:null;return A.jsx("button",{onClick:()=>z&&d(z),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!z,"aria-label":`Agrandir l'image de : ${R.description}`,children:z?A.jsx("img",{src:z,alt:R.description,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(UR,{})})},k)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:y.vetements.map((R,k)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:R.description},k))})]},E)})}),c&&A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>d(null),role:"dialog","aria-modal":"true",children:A.jsxs("div",{className:"relative",onClick:y=>y.stopPropagation(),children:[A.jsx("img",{src:c,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),A.jsx("button",{onClick:()=>d(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:A.jsx(M0,{})})]})})]})},yq=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:s,onRemoveSet:a,onDelete:l})=>{const[c,d]=j.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[h,y]=j.useState(!1),E=e.find(L=>L.itemIds.includes(t.id));j.useEffect(()=>{d({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),j.useEffect(()=>{const L=z=>{z.key==="Escape"&&n()};return document.body.style.overflow="hidden",window.addEventListener("keydown",L),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",L)}},[n]);const T=L=>{const{name:z,value:F}=L.target;d(B=>({...B,[z]:F}))},w=L=>{L.preventDefault(),i({...t,...c}),y(!0),setTimeout(()=>{y(!1)},2e3)},R=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},k=L=>{L.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return A.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:L=>L.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),A.jsx("button",{onClick:k,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?A.jsx(Lp,{className:"w-6 h-6 text-red-500"}):A.jsx(P0,{className:"w-6 h-6"})}),A.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:A.jsx(M0,{})})]}),A.jsxs("form",{onSubmit:w,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[A.jsxs("div",{className:"space-y-4 flex-grow",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),A.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),A.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(L=>A.jsx("option",{value:L,children:L},L))})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),A.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),A.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),E&&A.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),A.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:E.name,children:E.name})]}),A.jsxs("button",{type:"button",onClick:()=>{a(E.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[A.jsx(uq,{}),A.jsx("span",{children:"Dissocier"})]})]})]}),A.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[A.jsxs("button",{type:"button",onClick:R,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[A.jsx(D0,{}),"Supprimer"]}),A.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[A.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[A.jsx(N0,{}),"Crer une tenue"]}),A.jsx("button",{type:"submit",disabled:h,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${h?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:h?A.jsxs(A.Fragment,{children:[A.jsx(k0,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},BR=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[s,a]=j.useState(3),[l,c]=j.useState(""),d=h=>{h.preventDefault();const y=l||"";y.trim()&&s>0&&n(s,y)};return A.jsxs("form",{onSubmit:d,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[A.jsxs("div",{className:"sm:col-span-1",children:[A.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),A.jsx("input",{id:"days",type:"number",value:s,onChange:h=>a(parseInt(h.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),A.jsxs("div",{className:"sm:col-span-2",children:[A.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),A.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:h=>c(h.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),A.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[A.jsx(cq,{}),i?"Prparation...":"Gnrer la valise"]})]})},qR=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=s=>{const{id:a,description:l}=s;let c=e.find(h=>h.id===a);if(c)return c;let d=n.find(h=>h.id===a);if(d)return d;if(c=e.find(h=>h.analysis===a),c||(c=e.find(h=>h.analysis===l),c))return c};return A.jsx("div",{className:"mt-10",children:A.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[A.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),A.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,a)=>{const l=i(s),c=l?l.imageSrc:null;return A.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[c?A.jsx("img",{src:c,alt:s.description,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:A.jsx(UR,{})}),A.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:A.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},a)})}),A.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,a)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},a))})]})})},vq=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,s]=j.useState(!1),a=l=>{const c=Array.from(l.target.files||[]);c.length>0&&(t(c),s(!1))};return A.jsxs(A.Fragment,{children:[!n&&A.jsx("button",{onClick:()=>s(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?A.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),i&&A.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>s(!1),children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:l=>l.stopPropagation(),children:[A.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),A.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:a,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:A.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),A.jsxs("label",{className:"block",children:[A.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden"}),A.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[A.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-semibold",children:"Galerie"}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),A.jsx("button",{onClick:()=>s(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},_q=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:s,isAnalyzingWardrobe:a,clothingCount:l,favoriteOutfitCount:c})=>A.jsxs("div",{className:"space-y-4 pb-24",children:[A.jsxs("div",{className:"text-center py-6",children:[A.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[A.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),A.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&A.jsx("button",{onClick:t,disabled:a,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:a?A.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),A.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),A.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),A.jsx("div",{className:"px-4 pt-6",children:A.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[A.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),A.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[A.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),A.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),A.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[A.jsx("div",{className:"text-green-500",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),A.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),A.jsxs("button",{onClick:s,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[A.jsxs("div",{className:"text-red-500",children:[A.jsx(P0,{})," "]}),A.jsx("p",{className:"text-2xl font-bold",children:c}),A.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),Eq=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return A.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:A.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(s=>{const a=t===s.id;return A.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[A.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&A.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),A.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:s.label})]},s.id)})})})},Tq=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return A.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:A.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[A.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:A.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),A.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-green-500 mt-0.5",children:""}),A.jsx("span",{children:s})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[A.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),A.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,a)=>A.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[A.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),A.jsx("span",{children:s})]},a))})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[A.jsx("span",{children:""})," Pices recommandes"]}),A.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,a)=>A.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-bold text-lg",children:s.description}),A.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),A.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:i[s.priority]})]}),A.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[A.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),s.estimatedPrice&&A.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]})]},a))})]})]})]})})};var Sq=Aq()?j.useLayoutEffect:j.useEffect;function Aq(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function wq(){var t=j.useState(Object.create(null)),e=t[1];return j.useCallback(function(){e(Object.create(null))},[])}var bq=SC(),Cq=function(e){var n=e.children,i=e.type,s=i===void 0?"reach-portal":i,a=j.useRef(null),l=j.useRef(null),c=wq();return Sq(function(){if(a.current){var d=a.current.ownerDocument;return l.current=d==null?void 0:d.createElement(s),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[s,c]),l.current?bq.createPortal(n,l.current):j.createElement("span",{ref:a})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ge=function(){return ge=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ge.apply(this,arguments)};function V0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function ot(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function Bt(t,e,n){if(arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var Dt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Dt||(Dt={}));var zl;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(zl||(zl={}));var Zy=Dt.Start,L0=Dt.Stop,af=Dt.Raise,Op=Dt.Send,zR=Dt.Cancel,Iq=Dt.NullEvent,O0=Dt.Assign;Dt.After;Dt.DoneState;var HR=Dt.Log,xq=Dt.Init,ev=Dt.Invoke;Dt.ErrorExecution;var kb=Dt.ErrorPlatform,Rq=Dt.ErrorCustom,GR=Dt.Update,Nq=Dt.Choose,Dq=Dt.Pure,$R=".",Pb={},tv="xstate.guard",Mq="",Fd;function U0(t,e,n){n===void 0&&(n=$R);var i=Ac(t,n),s=Ac(e,n);return Et(s)?Et(i)?s===i:!1:Et(i)?i in s:Object.keys(i).every(function(a){return a in s?U0(i[a],s[a]):!1})}function jR(t){try{return Et(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function nv(t,e){try{return tu(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function kq(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Ac(t,e){if(kq(t))return t.value;if(tu(t))return Jh(t);if(typeof t!="string")return t;var n=nv(t,e);return Jh(n)}function Jh(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function fc(t,e){for(var n={},i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];n[a]=e(t[a],a,t,s)}return n}function Vb(t,e,n){var i,s,a={};try{for(var l=ot(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];n(h)&&(a[d]=e(h,d,t))}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}var Pq=function(t){return function(e){var n,i,s=e;try{for(var a=ot(t),l=a.next();!l.done;l=a.next()){var c=l.value;s=s[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}};function Vq(t,e){return function(n){var i,s,a=n;try{for(var l=ot(t),c=l.next();!c.done;c=l.next()){var d=c.value;a=a[e][d]}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}}function ph(t){if(!t)return[[]];if(Et(t))return[[t]];var e=Kt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:ph(t[n]).map(function(s){return[n].concat(s)})}));return e}function Kt(t){var e;return(e=[]).concat.apply(e,Bt([],mt(t),!1))}function KR(t){return tu(t)?t:[t]}function _r(t){return t===void 0?[]:KR(t)}function Yh(t,e,n){var i,s;if(vt(t))return t(e,n.data);var a={};try{for(var l=ot(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];vt(h)?a[d]=h(e,n.data):a[d]=h}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}function Lq(t){return/^(done|error)\./.test(t)}function Lb(t){return!!(t instanceof Promise||t!==null&&(vt(t)||typeof t=="object")&&vt(t.then))}function Oq(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Uq(t,e){var n,i,s=mt([[],[]],2),a=s[0],l=s[1];try{for(var c=ot(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}function JR(t,e){return fc(t.states,function(n,i){if(n){var s=(Et(e)?void 0:e[i])||(n?n.current:void 0);if(s)return{current:s,states:JR(n,s)}}})}function Fq(t,e){return{current:e,states:JR(t,e)}}function Ob(t,e,n,i){var s=t&&n.reduce(function(a,l){var c,d,h=l.assignment,y={state:i,action:l,_event:e},E={};if(vt(h))E=h(a,e.data,y);else try{for(var T=ot(Object.keys(h)),w=T.next();!w.done;w=T.next()){var R=w.value,k=h[R];E[R]=vt(k)?k(a,e.data,y):k}}catch(L){c={error:L}}finally{try{w&&!w.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},a,E)},t);return s}var Bq=function(){};function tu(t){return Array.isArray(t)}function vt(t){return typeof t=="function"}function Et(t){return typeof t=="string"}function YR(t,e){if(t)return Et(t)?{type:tv,name:t,predicate:e?e[t]:void 0}:vt(t)?{type:tv,name:t.name,predicate:t}:t}function qq(t){try{return"subscribe"in t&&vt(t.subscribe)}catch{return!1}}var ho=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Fd={},Fd[ho]=function(){return this},Fd[Symbol.observable]=function(){return this};function Hl(t){return!!t&&"__xstatenode"in t}function zq(t){return!!t&&typeof t.send=="function"}function Up(t,e){return Et(t)||typeof t=="number"?ge({type:t},e):t}function zn(t,e){if(!Et(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Up(t);return ge({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function dl(t,e){var n=KR(e).map(function(i){return typeof i>"u"||typeof i=="string"||Hl(i)?{target:i,event:t}:ge(ge({},i),{event:t})});return n}function Hq(t){if(!(t===void 0||t===Mq))return _r(t)}function WR(t,e,n,i,s){var a=t.options.guards,l={state:s,cond:e,_event:i};if(e.type===tv)return((a==null?void 0:a[e.name])||e.predicate)(n,i.data,l);var c=a==null?void 0:a[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function QR(t){return typeof t=="string"?{type:t}:t}function mh(t,e,n){var i=function(){},s=typeof t=="object",a=s?t:null;return{next:((s?t.next:t)||i).bind(a),error:((s?t.error:e)||i).bind(a),complete:((s?t.complete:n)||i).bind(a)}}function Bd(t,e){return"".concat(t,":invocation[").concat(e,"]")}function iv(t){return(t.type===af||t.type===Op&&t.to===zl.Internal)&&typeof t.delay!="number"}var Ml=zn({type:xq});function rv(t,e){return e&&e[t]||void 0}function zc(t,e){var n;if(Et(t)||typeof t=="number"){var i=rv(t,e);vt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(vt(t))n={type:t.name||t.toString(),exec:t};else{var i=rv(t.type,e);if(vt(i))n=ge(ge({},t),{exec:i});else if(i){var s=i.type||t.type;n=ge(ge(ge({},i),t),{type:s})}else n=t}return n}var po=function(t,e){if(!t)return[];var n=tu(t)?t:[t];return n.map(function(i){return zc(i,e)})};function F0(t){var e=zc(t);return ge(ge({id:Et(t)?t:e.id},e),{type:e.type})}function Gq(t,e){return{type:af,event:typeof t=="function"?t:Up(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function $q(t,e,n,i){var s={_event:n},a=zn(vt(t.event)?t.event(e,n.data,s):t.event),l;if(Et(t.delay)){var c=i&&i[t.delay];l=vt(c)?c(e,n.data,s):c}else l=vt(t.delay)?t.delay(e,n.data,s):t.delay;return ge(ge({},t),{type:af,_event:a,delay:l})}function jq(t,e){return{to:e?e.to:void 0,type:Op,event:vt(t)?t:Up(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:vt(t)?t.name:jR(t)}}function Kq(t,e,n,i){var s={_event:n},a=zn(vt(t.event)?t.event(e,n.data,s):t.event),l;if(Et(t.delay)){var c=i&&i[t.delay];l=vt(c)?c(e,n.data,s):c}else l=vt(t.delay)?t.delay(e,n.data,s):t.delay;var d=vt(t.to)?t.to(e,n.data,s):t.to;return ge(ge({},t),{to:d,_event:a,event:a.data,delay:l})}var Jq=function(t,e,n){return ge(ge({},t),{value:Et(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},Yq=function(t){return{type:zR,sendId:t}};function Wq(t){var e=F0(t);return{type:Dt.Start,activity:e,exec:void 0}}function Qq(t){var e=vt(t)?t:F0(t);return{type:Dt.Stop,activity:e,exec:void 0}}function Xq(t,e,n){var i=vt(t.activity)?t.activity(e,n.data):t.activity,s=typeof i=="string"?{id:i}:i,a={type:Dt.Stop,activity:s};return a}var Zq=function(t){return{type:O0,assignment:t}};function ez(t,e){var n=e?"#".concat(e):"";return"".concat(Dt.After,"(").concat(t,")").concat(n)}function qd(t,e){var n="".concat(Dt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function gh(t,e){var n="".concat(Dt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function dc(t,e){var n="".concat(Dt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var tz=function(t){var e,n,i=[];try{for(var s=ot(t),a=s.next();!a.done;a=s.next())for(var l=a.value,c=0;c<l.actions.length;){if(l.actions[c].type===O0){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i};function Wh(t,e,n,i,s,a,l){l===void 0&&(l=!1);var c=l?[]:tz(s),d=c.length?Ob(n,i,c,e):n,h=l?[n]:void 0,y=[];function E(R,k){var L;switch(k.type){case af:{var z=$q(k,d,i,t.options.delays);return a&&typeof z.delay=="number"&&a(z,d,i),z}case Op:var F=Kq(k,d,i,t.options.delays);return a&&F.to!==zl.Internal&&(R==="entry"?y.push(F):a(F,d,i)),F;case HR:{var B=Jq(k,d,i);return a==null||a(B,d,i),B}case Nq:{var K=k,X=(L=K.conds.find(function(ee){var ce=YR(ee.cond,t.options.guards);return!ce||WR(t,ce,d,i,a?void 0:e)}))===null||L===void 0?void 0:L.actions;if(!X)return[];var G=mt(Wh(t,e,d,i,[{type:R,actions:po(_r(X),t.options.actions)}],a,l),2),I=G[0],x=G[1];return d=x,h==null||h.push(d),I}case Dq:{var X=k.get(d,i.data);if(!X)return[];var N=mt(Wh(t,e,d,i,[{type:R,actions:po(_r(X),t.options.actions)}],a,l),2),V=N[0],M=N[1];return d=M,h==null||h.push(d),V}case L0:{var B=Xq(k,d,i);return a==null||a(B,n,i),B}case O0:{d=Ob(d,i,[k],a?void 0:e),h==null||h.push(d);break}default:var O=zc(k,t.options.actions),U=O.exec;if(a)a(O,d,i);else if(U&&h){var be=h.length-1,ve=ge(ge({},O),{exec:function(ee){for(var ce=[],he=1;he<arguments.length;he++)ce[he-1]=arguments[he];U.apply(void 0,Bt([h[be]],mt(ce),!1))}});O=ve}return O}}function T(R){var k,L,z=[];try{for(var F=ot(R.actions),B=F.next();!B.done;B=F.next()){var K=B.value,X=E(R.type,K);X&&(z=z.concat(X))}}catch(G){k={error:G}}finally{try{B&&!B.done&&(L=F.return)&&L.call(F)}finally{if(k)throw k.error}}return y.forEach(function(G){a(G,d,i)}),y.length=0,z}var w=Kt(s.map(T));return[w,d]}var Tl=function(t,e){var n=e(t);return n};function XR(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[ho]=function(){return this},e}function nz(t,e,n,i){var s,a=QR(t.src),l=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[a.type],c=t.data?Yh(t.data,n,i):void 0,d=l?ZR(l,t.id,c):XR(t.id);return d.meta=t,d}function ZR(t,e,n){var i=XR(e);if(i.deferred=!0,Hl(t)){var s=i.state=Tl(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return s}}return i}function iz(t){try{return typeof t.send=="function"}catch{return!1}}function rz(t){return iz(t)&&"id"in t}function sz(t){var e;return ge((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[ho]=function(){return this},e),t)}var Qh=function(t){return t.type==="atomic"||t.type==="final"};function e1(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Hc(t){return e1(t).filter(function(e){return e.type!=="history"})}function t1(t){var e=[t];return Qh(t)?e:e.concat(Kt(Hc(t).map(t1)))}function hc(t,e){var n,i,s,a,l,c,d,h,y=new Set(t),E=sv(y),T=new Set(e);try{for(var w=ot(T),R=w.next();!R.done;R=w.next())for(var k=R.value,L=k.parent;L&&!T.has(L);)T.add(L),L=L.parent}catch(N){n={error:N}}finally{try{R&&!R.done&&(i=w.return)&&i.call(w)}finally{if(n)throw n.error}}var z=sv(T);try{for(var F=ot(T),B=F.next();!B.done;B=F.next()){var k=B.value;if(k.type==="compound"&&(!z.get(k)||!z.get(k).length))E.get(k)?E.get(k).forEach(function(V){return T.add(V)}):k.initialStateNodes.forEach(function(V){return T.add(V)});else if(k.type==="parallel")try{for(var K=(l=void 0,ot(Hc(k))),X=K.next();!X.done;X=K.next()){var G=X.value;T.has(G)||(T.add(G),E.get(G)?E.get(G).forEach(function(V){return T.add(V)}):G.initialStateNodes.forEach(function(V){return T.add(V)}))}}catch(V){l={error:V}}finally{try{X&&!X.done&&(c=K.return)&&c.call(K)}finally{if(l)throw l.error}}}}catch(N){s={error:N}}finally{try{B&&!B.done&&(a=F.return)&&a.call(F)}finally{if(s)throw s.error}}try{for(var I=ot(T),x=I.next();!x.done;x=I.next())for(var k=x.value,L=k.parent;L&&!T.has(L);)T.add(L),L=L.parent}catch(N){d={error:N}}finally{try{x&&!x.done&&(h=I.return)&&h.call(I)}finally{if(d)throw d.error}}return T}function n1(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Qh(i))return i.key}else return{}}var s={};return n.forEach(function(a){s[a.key]=n1(a,e)}),s}function sv(t){var e,n,i=new Map;try{for(var s=ot(t),a=s.next();!a.done;a=s.next()){var l=a.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}function oz(t,e){var n=hc([t],e);return n1(t,sv(n))}function pc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function az(t){return Bt([],mt(new Set(Kt(Bt([],mt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function yh(t,e){return e.type==="compound"?Hc(e).some(function(n){return n.type==="final"&&pc(t,n)}):e.type==="parallel"?Hc(e).every(function(n){return yh(t,n)}):!1}function lz(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function Ub(t){return new Set(Kt(t.map(function(e){return e.tags})))}function i1(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(Et(t)||Et(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(s){return i1(t[s],e[s])})}function uz(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function cz(t,e){var n=t.exec,i=ge(ge({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var or=(function(){function t(e){var n=this,i;this.actions=[],this.activities=Pb,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Pb,this.meta=lz(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return az(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=Ml;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=Ml;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),Et(e))return[e];var s=Object.keys(e);return s.concat.apply(s,Bt([],mt(s.map(function(a){return i.toStrings(e[a],n).map(function(l){return a+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=V0(e,["configuration","transitions","tags","machine"]);return ge(ge({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return U0(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;Bq(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),fz={deferEvents:!1},Fb=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ge(ge({},fz),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),oy=new Map,dz=0,Zu={bookId:function(){return"x:".concat(dz++)},register:function(t,e){return oy.set(t,e),t},get:function(t){return oy.get(t)},free:function(t){oy.delete(t)}};function B0(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function hz(){var t=B0();if(t&&"__xstate__"in t)return t.__xstate__}function pz(t){if(B0()){var e=hz();e&&e.register(t)}}function mz(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,s=[],a=!1,l=function(){if(!a){for(a=!0;s.length>0;){var h=s.shift();n=t.transition(n,h,d),i.forEach(function(y){return y.next(n)})}a=!1}},c=sz({id:e.id,send:function(h){s.push(h),l()},getSnapshot:function(){return n},subscribe:function(h,y,E){var T=mh(h,y,E);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var gz={sync:!1,autoForward:!1},Pn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Pn||(Pn={}));var yz=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Pn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(y,E){if(tu(y))return i.batch(y),i.state;var T=zn(Up(y,E));if(i.status===Pn.Stopped)return i.state;if(i.status!==Pn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var w=i._nextState(T);i.update(w,T)}),i._state},this.sendTo=function(y,E,T){var w=i.parent&&(E===zl.Parent||i.parent.id===E),R=w?i.parent:Et(E)?E===zl.Internal?i:i.children.get(E)||Zu.get(E):zq(E)?E:void 0;if(!R){if(!w)throw new Error("Unable to send event to child '".concat(E,"' from service '").concat(i.id,"'."));return}if("machine"in R){if(i.status!==Pn.Stopped||i.parent!==R||i.state.done){var k=ge(ge({},y),{name:y.name===Rq?"".concat(dc(i.id)):y.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([R,k]):R.send(k)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([R,y.data]):R.send(y.data)},this._exec=function(y,E,T,w){w===void 0&&(w=i.machine.options.actions);var R=y.exec||rv(y.type,w),k=vt(R)?R:R?R.exec:y.exec;if(k)try{return k(E,T.data,i.machine.config.predictableActionArguments?{action:y,_event:T}:{action:y,state:i.state,_event:T})}catch(be){throw i.parent&&i.parent.send({type:"xstate.error",data:be}),be}switch(y.type){case af:{var L=y;i.defer(L);break}case Op:var z=y;if(typeof z.delay=="number"){i.defer(z);return}else z.to?i.sendTo(z._event,z.to,T===Ml):i.send(z._event);break;case zR:i.cancel(y.sendId);break;case Zy:{if(i.status!==Pn.Running)return;var F=y.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[F.id||F.type])break;if(F.type===Dt.Invoke){var B=QR(F.src),K=i.machine.options.services?i.machine.options.services[B.type]:void 0,X=F.id,G=F.data,I="autoForward"in F?F.autoForward:!!F.forward;if(!K)return;var x=G?Yh(G,E,T):void 0;if(typeof K=="string")return;var N=vt(K)?K(E,T.data,{data:x,src:B,meta:F.meta}):K;if(!N)return;var V=void 0;Hl(N)&&(N=x?N.withContext(x):N,V={autoForward:I}),i.spawn(N,X,V)}else i.spawnActivity(F);break}case L0:{i.stopChild(y.activity.id);break}case HR:var M=y,O=M.label,U=M.value;O?i.logger(O,U):i.logger(U);break}};var s=ge(ge({},t.defaultOptions),n),a=s.clock,l=s.logger,c=s.parent,d=s.id,h=d!==void 0?d:e.id;this.id=h,this.logger=l,this.clock=a,this.parent=c,this.options=s,this.scheduler=new Fb({deferEvents:this.options.deferEvents}),this.sessionId=Zu.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Tl(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,s;try{for(var a=ot(e.actions),l=a.next();!l.done;l=a.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,s,a,l,c,d,h,y,E=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===Ml)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(N){E.state.children[N.id]=N}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var w=ot(this.eventListeners),R=w.next();!R.done;R=w.next()){var k=R.value;k(e.event)}}catch(N){i={error:N}}finally{try{R&&!R.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}try{for(var L=ot(this.listeners),z=L.next();!z.done;z=L.next()){var k=z.value;k(e,e.event)}}catch(N){a={error:N}}finally{try{z&&!z.done&&(l=L.return)&&l.call(L)}finally{if(a)throw a.error}}try{for(var F=ot(this.contextListeners),B=F.next();!B.done;B=F.next()){var K=B.value;K(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(N){c={error:N}}finally{try{B&&!B.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(this.state.done){var X=e.configuration.find(function(N){return N.type==="final"&&N.parent===E.machine}),G=X&&X.doneData?Yh(X.doneData,e.context,n):void 0;this._doneEvent=gh(this.id,G);try{for(var I=ot(this.doneListeners),x=I.next();!x.done;x=I.next()){var k=x.value;k(this._doneEvent)}}catch(N){h={error:N}}finally{try{x&&!x.done&&(y=I.return)&&y.call(I)}finally{if(h)throw h.error}}this._stop(),this._stopChildren(),Zu.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Pn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var s=this,a=mh(e,n,i);this.listeners.add(a.next),this.status!==Pn.NotStarted&&a.next(this.state);var l=function(){s.doneListeners.delete(l),s.stopListeners.delete(l),a.complete()};return this.status===Pn.Stopped?a.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){s.listeners.delete(a.next),s.doneListeners.delete(l),s.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Pn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Pn.Running)return this;this.machine._init(),Zu.register(this.sessionId,this),this.initialized=!0,this.status=Pn.Running;var i=e===void 0?this.initialState:Tl(this,function(){return uz(e)?n.machine.resolveState(e):n.machine.resolveState(or.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,Ml)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){vt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,s,a,l,c,d,h,y;try{for(var E=ot(this.listeners),T=E.next();!T.done;T=E.next()){var w=T.value;this.listeners.delete(w)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=E.return)&&n.call(E)}finally{if(e)throw e.error}}try{for(var R=ot(this.stopListeners),k=R.next();!k.done;k=R.next()){var w=k.value;w(),this.stopListeners.delete(w)}}catch(I){i={error:I}}finally{try{k&&!k.done&&(s=R.return)&&s.call(R)}finally{if(i)throw i.error}}try{for(var L=ot(this.contextListeners),z=L.next();!z.done;z=L.next()){var w=z.value;this.contextListeners.delete(w)}}catch(I){a={error:I}}finally{try{z&&!z.done&&(l=L.return)&&l.call(L)}finally{if(a)throw a.error}}try{for(var F=ot(this.doneListeners),B=F.next();!B.done;B=F.next()){var w=B.value;this.doneListeners.delete(w)}}catch(I){c={error:I}}finally{try{B&&!B.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Pn.Stopped,this._initialState=void 0;try{for(var K=ot(Object.keys(this.delayedEventsMap)),X=K.next();!X.done;X=K.next()){var G=X.value;this.clock.clearTimeout(this.delayedEventsMap[G])}}catch(I){h={error:I}}finally{try{X&&!X.done&&(y=K.return)&&y.call(K)}finally{if(h)throw h.error}}this.scheduler.clear(),this.scheduler=new Fb({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var s=zn({type:"xstate.stop"}),a=Tl(e,function(){var l=Kt(Bt([],mt(e.state.configuration),!1).sort(function(E,T){return T.order-E.order}).map(function(E){return po(E.onExit,e.machine.options.actions)})),c=mt(Wh(e.machine,e.state,e.state.context,s,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],h=c[1],y=new or({value:e.state.value,context:h,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(E){return!iv(E)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return y.changed=!0,y});e.update(a,s),e._stopChildren(),Zu.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Pn.NotStarted&&this.options.deferEvents)){if(this.status!==Pn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,a,l=n.state,c=!1,d=[],h=function(w){var R=zn(w);n.forward(R),l=Tl(n,function(){return n.machine.transition(l,R,void 0,i||void 0)}),d.push.apply(d,Bt([],mt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(k){return cz(k,l)})),!1)),c=c||!!l.changed};try{for(var y=ot(e),E=y.next();!E.done;E=y.next()){var T=E.value;h(T)}}catch(w){s={error:w}}finally{try{E&&!E.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}l.changed=c,l.actions=d,n.update(l,zn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=zn(e);if(s.name.indexOf(kb)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(kb)===0}))throw s.data.data;var a=Tl(this,function(){return i.machine.transition(i.state,s,void 0,n||void 0)});return a},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var s=ot(this.forwardTo),a=s.next();!a.done;a=s.next()){var l=a.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),vt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Pn.Running)return ZR(e,n);if(Lb(e))return this.spawnPromise(Promise.resolve(e),n);if(vt(e))return this.spawnCallback(e,n);if(rz(e))return this.spawnActor(e,n);if(qq(e))return this.spawnObservable(e,n);if(Hl(e))return this.spawnMachine(e,ge(ge({},i),{id:n}));if(Oq(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var s=new t(e,ge(ge({},this.options),{parent:this,id:n.id||e.id})),a=ge(ge({},gz),n);a.sync&&s.onTransition(function(c){i.send(GR,{state:c,id:s.id})});var l=s;return this.children.set(s.id,l),a.autoForward&&this.forwardTo.add(s.id),s.onDone(function(c){i.removeChild(s.id),i.send(zn(c,{origin:s.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=mz(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,s=this,a=!1,l;e.then(function(d){a||(l=d,s.removeChild(n),s.send(zn(gh(n,d),{origin:n})))},function(d){if(!a){s.removeChild(n);var h=dc(n,d);try{s.send(zn(h,{origin:n}))}catch{s.devTools&&s.devTools.send(h,s.state),s.machine.strict&&s.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,h,y){var E=mh(d,h,y),T=!1;return e.then(function(w){T||(E.next(w),!T&&E.complete())},function(w){T||E.error(w)}),{unsubscribe:function(){return T=!0}}},stop:function(){a=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[ho]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,s=this,a=!1,l=new Set,c=new Set,d,h=function(T){d=T,c.forEach(function(w){return w(T)}),!a&&s.send(zn(T,{origin:n}))},y;try{y=e(h,function(T){l.add(T)})}catch(T){this.send(dc(n,T))}if(Lb(y))return this.spawnPromise(y,n);var E=(i={id:n,send:function(T){return l.forEach(function(w){return w(T)})},subscribe:function(T){var w=mh(T);return c.add(w.next),{unsubscribe:function(){c.delete(w.next)}}},stop:function(){a=!0,vt(y)&&y()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[ho]=function(){return this},i);return this.children.set(n,E),E},t.prototype.spawnObservable=function(e,n){var i,s=this,a,l=e.subscribe(function(d){a=d,s.send(zn(d,{origin:n}))},function(d){s.removeChild(n),s.send(zn(dc(n,d),{origin:n}))},function(){s.removeChild(n),s.send(zn(gh(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,h,y){return e.subscribe(d,h,y)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:n}}},i[ho]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[ho]=function(){return this},i))},t.prototype.attachDev=function(){var e=B0();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ge(ge({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ge({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}pz(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[ho]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Pn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=r1,t})();function r1(t,e){var n=new yz(t,e);return n}function vz(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function zd(t){return ge(ge({type:ev},t),{toJSON:function(){t.onDone,t.onError;var e=V0(t,["onDone","onError"]);return ge(ge({},e),{type:ev,src:vz(t.src)})}})}var Hd="",ov="#",ay="*",hl={},pl=function(t){return t[0]===ov},_z=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Ez=(function(){function t(e,n,i,s){i===void 0&&(i="context"in e?e.context:void 0);var a=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(_z(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:$R),this.id=this.config.id||Bt([this.machine.key],mt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?fc(this.config.states,function(h,y){var E,T=new t(h,{},void 0,{parent:a,key:y});return Object.assign(a.idMap,ge((E={},E[T.id]=T,E),T.idMap)),T}):hl;var c=0;function d(h){var y,E;h.order=c++;try{for(var T=ot(e1(h)),w=T.next();!w.done;w=T.next()){var R=w.value;d(R)}}catch(k){y={error:k}}finally{try{w&&!w.done&&(E=T.return)&&E.call(T)}finally{if(y)throw y.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(h){var y=h.event;return y===Hd}):Hd in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=_r(this.config.entry||this.config.onEntry).map(function(h){return zc(h)}),this.onExit=_r(this.config.exit||this.config.onExit).map(function(h){return zc(h)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=_r(this.config.invoke).map(function(h,y){var E,T;if(Hl(h)){var w=Bd(a.id,y);return a.machine.options.services=ge((E={},E[w]=h,E),a.machine.options.services),zd({src:w,id:w})}else if(Et(h.src)){var w=h.id||Bd(a.id,y);return zd(ge(ge({},h),{id:w,src:h.src}))}else if(Hl(h.src)||vt(h.src)){var w=h.id||Bd(a.id,y);return a.machine.options.services=ge((T={},T[w]=h.src,T),a.machine.options.services),zd(ge(ge({id:w},h),{src:w}))}else{var R=h.src;return zd(ge(ge({id:Bd(a.id,y)},h),{src:R}))}}),this.activities=_r(this.config.activities).concat(this.invoke).map(function(h){return F0(h)}),this.transition=this.transition.bind(this),this.tags=_r(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||t1(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,s=i.actions,a=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:ge(ge({},s),e.actions),activities:ge(ge({},a),e.activities),guards:ge(ge({},l),e.guards),services:ge(ge({},c),e.services),delays:ge(ge({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return vt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:fc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Hd,i=this.transitions.filter(function(s){var a=s.eventType===e;return n?a:a||s.eventType===ay});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(a,l){var c=vt(a)?"".concat(e.id,":delay[").concat(l,"]"):a,d=ez(c,e.id);return e.onEntry.push(jq(d,{delay:a})),e.onExit.push(Yq(d)),d},s=tu(n)?n.map(function(a,l){var c=i(a.delay,l);return ge(ge({},a),{event:c})}):Kt(Object.keys(n).map(function(a,l){var c=n[a],d=Et(c)?{target:c}:c,h=isNaN(+a)?a:+a,y=i(h,l);return _r(d).map(function(E){return ge(ge({},E),{event:y,delay:h})})}));return s.map(function(a){var l=a.delay;return ge(ge({},e.formatTransition(a)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var s=e instanceof or?e.value:Ac(e,this.delimiter);if(Et(s)){var a=this.getStateNode(s).initial;return a!==void 0?this.getStateNodes((n={},n[s]=a,n)):[this,this.states[s]]}var l=Object.keys(s),c=[this];return c.push.apply(c,Bt([],mt(Kt(l.map(function(d){return i.getStateNode(d).getStateNodes(s[d])}))),!1)),c},t.prototype.handles=function(e){var n=jR(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof or?e:or.create(e),i=Array.from(hc([],this.getStateNodes(n.value)));return new or(ge(ge({},n),{value:this.resolve(n.value),configuration:i,done:yh(i,this),tags:Ub(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var s=this.getStateNode(e),a=s.next(n,i);return!a||!a.transitions.length?this.next(n,i):a},t.prototype.transitionCompoundNode=function(e,n,i){var s=Object.keys(e),a=this.getStateNode(s[0]),l=a._transition(e[s[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var s,a,l={};try{for(var c=ot(Object.keys(e)),d=c.next();!d.done;d=c.next()){var h=d.value,y=e[h];if(y){var E=this.getStateNode(h),T=E._transition(y,n,i);T&&(l[h]=T)}}}catch(z){s={error:z}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}var w=Object.keys(l).map(function(z){return l[z]}),R=Kt(w.map(function(z){return z.transitions})),k=w.some(function(z){return z.transitions.length>0});if(!k)return this.next(n,i);var L=Kt(Object.keys(l).map(function(z){return l[z].configuration}));return{transitions:R,exitSet:Kt(w.map(function(z){return z.exitSet})),configuration:L,source:n,actions:Kt(Object.keys(l).map(function(z){return l[z].actions}))}},t.prototype._transition=function(e,n,i){return Et(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,zn(n))},t.prototype.next=function(e,n){var i,s,a=this,l=n.name,c=[],d=[],h;try{for(var y=ot(this.getCandidates(l)),E=y.next();!E.done;E=y.next()){var T=E.value,w=T.cond,R=T.in,k=e.context,L=R?Et(R)&&pl(R)?e.matches(Ac(this.getStateNodeById(R).path,this.delimiter)):U0(Ac(R,this.delimiter),Pq(this.path.slice(0,-2))(e.value)):!0,z=!1;try{z=!w||WR(this.machine,w,k,n,e)}catch(K){throw new Error("Unable to evaluate guard '".concat(w.name||w.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(K.message))}if(z&&L){T.target!==void 0&&(d=T.target),c.push.apply(c,Bt([],mt(T.actions),!1)),h=T;break}}}catch(K){i={error:K}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(h){if(!d.length)return{transitions:[h],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var F=Kt(d.map(function(K){return a.getRelativeStateNodes(K,e.historyValue)})),B=!!h.internal;return{transitions:[h],exitSet:B?[]:Kt(d.map(function(K){return a.getPotentiallyReenteringNodes(K)})),configuration:F,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,s=e;i&&i!==s;)n.push(i),i=i.parent;return i!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,i,s,a,l,c){var d,h,y,E,T=this,w=l?hc([],this.getStateNodes(l.value)):[],R=new Set;try{for(var k=ot(Array.from(e).sort(function(M,O){return M.order-O.order})),L=k.next();!L.done;L=k.next()){var z=L.value;(!pc(w,z)||pc(i.exitSet,z)||z.parent&&R.has(z.parent))&&R.add(z)}}catch(M){d={error:M}}finally{try{L&&!L.done&&(h=k.return)&&h.call(k)}finally{if(d)throw d.error}}try{for(var F=ot(w),B=F.next();!B.done;B=F.next()){var z=B.value;(!pc(e,z)||pc(i.exitSet,z.parent))&&i.exitSet.push(z)}}catch(M){y={error:M}}finally{try{B&&!B.done&&(E=F.return)&&E.call(F)}finally{if(y)throw y.error}}i.exitSet.sort(function(M,O){return O.order-M.order});var K=Array.from(R).sort(function(M,O){return M.order-O.order}),X=new Set(i.exitSet),G=Kt(K.map(function(M){var O=[];if(M.type!=="final")return O;var U=M.parent;if(!U.parent)return O;O.push(qd(M.id,M.doneData),qd(U.id,M.doneData?Yh(M.doneData,s,a):void 0));var be=U.parent;return be.type==="parallel"&&Hc(be).every(function(ve){return yh(i.configuration,ve)})&&O.push(qd(be.id)),O})),I=K.map(function(M){var O=M.onEntry,U=M.activities.map(function(be){return Wq(be)});return{type:"entry",actions:po(c?Bt(Bt([],mt(O),!1),mt(U),!1):Bt(Bt([],mt(U),!1),mt(O),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:G.map(function(M){return Gq(M)})}),x=Array.from(X).map(function(M){return{type:"exit",actions:po(Bt(Bt([],mt(M.onExit),!1),mt(M.activities.map(function(O){return Qq(O)})),!1),T.machine.options.actions)}}),N=x.concat({type:"transition",actions:po(i.actions,this.machine.options.actions)}).concat(I);if(n){var V=po(Kt(Bt([],mt(e),!1).sort(function(M,O){return O.order-M.order}).map(function(M){return M.onExit})),this.machine.options.actions).filter(function(M){return!iv(M)});return N.concat({type:"stop",actions:V})}return N},t.prototype.transition=function(e,n,i,s){e===void 0&&(e=this.initialState);var a=zn(n),l;if(e instanceof or)l=i===void 0?e:this.resolveState(or.from(e,i));else{var c=Et(e)?this.resolve(Jh(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(or.from(c,d))}if(this.strict&&!this.events.includes(a.name)&&!Lq(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var h=this._transition(l.value,l,a)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},y=hc([],this.getStateNodes(l.value)),E=h.configuration.length?hc(y,h.configuration):y;return h.configuration=Bt([],mt(E),!1),this.resolveTransition(h,l,l.context,s,a)},t.prototype.resolveRaisedTransition=function(e,n,i,s){var a,l=e.actions;return e=this.transition(e,n,void 0,s),e._event=i,e.event=i.data,(a=e.actions).unshift.apply(a,Bt([],mt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,s,a){var l,c,d,h,y=this;a===void 0&&(a=Ml);var E=e.configuration,T=!n||e.transitions.length>0,w=T?e.configuration:n?n.configuration:[],R=yh(w,this),k=T?oz(this.machine,E):void 0,L=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,z=this.getActions(new Set(w),R,e,i,a,n,s),F=n?ge({},n.activities):{};try{for(var B=ot(z),K=B.next();!K.done;K=B.next()){var X=K.value;try{for(var G=(d=void 0,ot(X.actions)),I=G.next();!I.done;I=G.next()){var x=I.value;x.type===Zy?F[x.activity.id||x.activity.type]=x:x.type===L0&&(F[x.activity.id||x.activity.type]=!1)}}catch(pe){d={error:pe}}finally{try{I&&!I.done&&(h=G.return)&&h.call(G)}finally{if(d)throw d.error}}}}catch(pe){l={error:pe}}finally{try{K&&!K.done&&(c=B.return)&&c.call(B)}finally{if(l)throw l.error}}var N=mt(Wh(this,n,i,a,z,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=N[0],M=N[1],O=mt(Uq(V,iv),2),U=O[0],be=O[1],ve=V.filter(function(pe){var we;return pe.type===Zy&&((we=pe.activity)===null||we===void 0?void 0:we.type)===ev}),ee=ve.reduce(function(pe,we){return pe[we.activity.id]=nz(we.activity,y.machine,M,a),pe},n?ge({},n.children):{}),ce=new or({value:k||n.value,context:M,_event:a,_sessionid:n?n._sessionid:null,historyValue:k?L?Fq(L,k):void 0:n?n.historyValue:void 0,history:!k||e.source?n:void 0,actions:k?be:[],activities:k?F:n?n.activities:{},events:[],configuration:w,transitions:e.transitions,children:ee,done:R,tags:Ub(w),machine:this}),he=i!==M;ce.changed=a.name===GR||he;var Ie=ce.history;Ie&&delete Ie.history;var De=!R&&(this._transient||E.some(function(pe){return pe._transient}));if(!T&&(!De||a.name===Hd))return ce;var H=ce;if(!R)for(De&&(H=this.resolveRaisedTransition(H,{type:Iq},a,s));U.length;){var te=U.shift();H=this.resolveRaisedTransition(H,te._event,a,s)}var fe=H.changed||(Ie?!!H.actions.length||he||typeof Ie.value!=typeof H.value||!i1(H.value,Ie.value):void 0);return H.changed=fe,H.history=Ie,H},t.prototype.getStateNode=function(e){if(pl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=pl(e)?e.slice(ov.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&pl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=nv(e,this.delimiter).slice(),i=this;n.length;){var s=n.shift();if(!s.length)break;i=i.getStateNode(s)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||hl;switch(this.type){case"parallel":return fc(this.initialStateValue,function(a,l){return a?i.getStateNode(l).resolve(e[l]||a):hl});case"compound":if(Et(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?fc(e,function(a,l){return a?i.getStateNode(l).resolve(a):hl}):this.initialStateValue||{};default:return e||hl}},t.prototype.getResolvedPath=function(e){if(pl(e)){var n=this.machine.idMap[e.slice(ov.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return nv(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Vb(this.states,function(i){return i.initialStateValue||hl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Qh(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;Et(n.target)?e=pl(n.target)?Jh(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Qh(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=ph(this.initialStateValue);return Kt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=mt(e),i=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var a=this.getStateNode(i);if(a.type==="history")return a.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Vb(this.states,function(n,i){if(!e)return n.historyValue();var s=Et(e)?void 0:e[i];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var s=this.target;return s?Kt(ph(s).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var a=Vq(i.path,"states")(e).current;return Et(a)?[i.getStateNode(a)]:Kt(ph(a).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Kt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,s;if(this.__cache.events)return this.__cache.events;var a=this.states,l=new Set(this.ownEvents);if(a)try{for(var c=ot(Object.keys(a)),d=c.next();!d.done;d=c.next()){var h=d.value,y=a[h];if(y.states)try{for(var E=(i=void 0,ot(y.events)),T=E.next();!T.done;T=E.next()){var w=T.value;l.add("".concat(w))}}catch(R){i={error:R}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}}}catch(R){e={error:R}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!Et(i))return i;var s=i[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(i.slice(1));var a=s?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(a);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(a)})},t.prototype.formatTransition=function(e){var n=this,i=Hq(e.target),s="internal"in e?e.internal:i?i.some(function(d){return Et(d)&&d[0]===n.delimiter}):!0,a=this.machine.options.guards,l=this.resolveTarget(i),c=ge(ge({},e),{actions:po(_r(e.actions)),cond:YR(e.cond,a),target:l,source:this,internal:s,eventType:e.event,toJSON:function(){return ge(ge({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var a=this.config.on,l=ay,c=a[l],d=c===void 0?[]:c,h=V0(a,[typeof l=="symbol"?l:l+""]);s=Kt(Object.keys(h).map(function(F){var B=dl(F,h[F]);return B}).concat(dl(ay,d)))}var y=this.config.always?dl("",this.config.always):[],E=this.config.onDone?dl(String(qd(this.id)),this.config.onDone):[],T=Kt(this.invoke.map(function(F){var B=[];return F.onDone&&B.push.apply(B,Bt([],mt(dl(String(gh(F.id)),F.onDone)),!1)),F.onError&&B.push.apply(B,Bt([],mt(dl(String(dc(F.id)),F.onError)),!1)),B})),w=this.after,R=Kt(Bt(Bt(Bt(Bt([],mt(E),!1),mt(T),!1),mt(s),!1),mt(y),!1).map(function(F){return _r(F).map(function(B){return i.formatTransition(B)})}));try{for(var k=ot(w),L=k.next();!L.done;L=k.next()){var z=L.value;R.push(z)}}catch(F){e={error:F}}finally{try{L&&!L.done&&(n=k.return)&&n.call(k)}finally{if(e)throw e.error}}return R},t})();function Tz(t,e,n){return n===void 0&&(n=t.context),new Ez(t,e,n)}var Sz=Zq,av;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(av||(av={}));var wc=j.useLayoutEffect;function Bb(t){var e=j.useRef();return e.current||(e.current={v:t()}),e.current.v}var Az=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},wz=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function bz(t,e){var n,i,s=Az([[],[]],2),a=s[0],l=s[1];try{for(var c=wz(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}var ec=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},qb=function(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))};function zb(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function Cz(t){var e=j.useRef([]),n=j.useRef([]);wc(function(){var i=t.subscribe(function(s){var a,l;if(s.actions.length){var c=s.actions.filter(function(E){return typeof E.exec=="function"&&"__effect"in E.exec}),d=ec(bz(c,function(E){return E.exec.__effect===av.Effect}),2),h=d[0],y=d[1];(a=e.current).push.apply(a,qb([],ec(h.map(function(E){return[E,s]})),!1)),(l=n.current).push.apply(l,qb([],ec(y.map(function(E){return[E,s]})),!1))}});return function(){i.unsubscribe()}},[]),wc(function(){for(;n.current.length;){var i=ec(n.current.shift(),2),s=i[0],a=i[1];zb(s,a)}}),j.useEffect(function(){for(;e.current.length;){var i=ec(e.current.shift(),2),s=i[0],a=i[1];zb(s,a)}})}var bc=function(){return bc=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},bc.apply(this,arguments)},Iz=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function xz(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function Rz(t,e,n){e===void 0&&(e={});var i=Bb(function(){return typeof t=="function"?t():t}),s=e.context,a=e.guards,l=e.actions,c=e.activities,d=e.services,h=e.delays,y=e.state,E=Iz(e,["context","guards","actions","activities","services","delays","state"]),T=Bb(function(){var w={context:s,guards:a,actions:l,activities:c,services:d,delays:h},R=i.withConfig(w,function(){return bc(bc({},i.context),s)});return r1(R,bc({deferEvents:!0},E))});return wc(function(){var w;return n&&(w=T.subscribe(xz(n))),function(){w==null||w.unsubscribe()}},[n]),wc(function(){return T.start(y?or.create(y):void 0),function(){T.stop()}},[]),wc(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,a),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,h)},[l,a,c,d,h]),Cz(T),T}var Nz=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a};function Dz(t,e){e===void 0&&(e={});var n=j.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=Rz(t,e,n),s=Nz(j.useState(function(){var c=i.machine.initialState;return e.state?or.create(e.state):c}),2),a=s[0],l=s[1];return[a,i.send,i]}function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zt.apply(null,arguments)}function kl(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const Ze={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(Ze.str(t)||Ze.num(t))return t===e;if(Ze.obj(t)&&Ze.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return Ze.und(n)?t===e:!0}};function Mz(t,e){return n=>(Ze.arr(n)?n:Object.keys(n)).reduce((i,s)=>{const a=s;return i[a]=t(a),i},t)}function kz(){const t=j.useState(!1),e=t[1];return j.useCallback(()=>e(i=>!i),[])}function aa(t,e){return Ze.und(t)||Ze.nul(t)?e:t}function Gd(t){return Ze.und(t)?[]:Ze.arr(t)?t:[t]}function Al(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ze.fun(t)?t(...n):t}function Pz(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,kl(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function ly(t){const e=Pz(t);if(Ze.und(e))return Zt({to:e},t);const n=Object.keys(t).reduce((i,s)=>Ze.und(e[s])?Zt({},i,{[s]:t[s]}):i,{});return Zt({to:e},n)}function Vz(t,e){return e&&(Ze.fun(e)?e(t):Ze.obj(e)&&(e.current=t)),t}class Er{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class lv extends Er{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Er&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Er&&e.removeChild(this))}}class s1 extends Er{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Er&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Er&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const s=this.payload[i];e&&!(s instanceof Er)||(n[i]=s instanceof Er?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let q0;function Lz(t,e){q0={fn:t,transform:e}}let o1;function Oz(t){o1=t}let a1=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Xh;function Uz(t){Xh=t}let l1=()=>Date.now(),Fz=t=>t.current,u1;function Bz(t){u1=t}class qz extends s1{constructor(e,n){super(),this.update=void 0,this.payload=e.style?Zt({},e,{style:u1(e.style)}):e,this.update=n,this.attach()}}const zz=t=>Ze.fun(t)&&!(t.prototype instanceof wn.Component),Hz=t=>j.forwardRef((n,i)=>{const s=kz(),a=j.useRef(!0),l=j.useRef(null),c=j.useRef(null),d=j.useCallback(T=>{const w=l.current,R=()=>{let k=!1;c.current&&(k=q0.fn(c.current,l.current.getAnimatedValue())),(!c.current||k===!1)&&s()};l.current=new qz(T,R),w&&w.detach()},[]);j.useEffect(()=>()=>{a.current=!1,l.current&&l.current.detach()},[]),j.useImperativeHandle(i,()=>Fz(c)),d(n);const h=l.current.getValue();h.scrollTop,h.scrollLeft;const y=kl(h,["scrollTop","scrollLeft"]),E=zz(t)?void 0:T=>c.current=Vz(T,i);return wn.createElement(t,Zt({},y,{ref:E}))});let Cc=!1;const ma=new Set,c1=()=>{if(!Cc)return!1;let t=l1();for(let e of ma){let n=!1;for(let i=0;i<e.configs.length;i++){let s=e.configs[i],a,l;for(let c=0;c<s.animatedValues.length;c++){let d=s.animatedValues[c];if(d.done)continue;let h=s.fromValues[c],y=s.toValues[c],E=d.lastPosition,T=y instanceof Er,w=Array.isArray(s.initialVelocity)?s.initialVelocity[c]:s.initialVelocity;if(T&&(y=y.getValue()),s.immediate){d.setValue(y),d.done=!0;continue}if(typeof h=="string"||typeof y=="string"){d.setValue(y),d.done=!0;continue}if(s.duration!==void 0)E=h+s.easing((t-d.startTime)/s.duration)*(y-h),a=t>=d.startTime+s.duration;else if(s.decay)E=h+w/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),a=Math.abs(d.lastPosition-E)<.1,a&&(y=E);else{l=d.lastTime!==void 0?d.lastTime:t,w=d.lastVelocity!==void 0?d.lastVelocity:s.initialVelocity,t>l+64&&(l=t);let R=Math.floor(t-l);for(let F=0;F<R;++F){let B=-s.tension*(E-y),K=-s.friction*w,X=(B+K)/s.mass;w=w+X*1/1e3,E=E+w*1/1e3}let k=s.clamp&&s.tension!==0?h<y?E>y:E<y:!1,L=Math.abs(w)<=s.precision,z=s.tension!==0?Math.abs(y-E)<=s.precision:!0;a=k||L&&z,d.lastVelocity=w,d.lastTime=t}T&&!s.toValues[c].done&&(a=!1),a?(d.value!==y&&(E=y),d.done=!0):n=!0,d.setValue(E),d.lastPosition=E}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(ma.delete(e),e.stop(!0))}return ma.size?a1(c1):Cc=!1,Cc},Gz=t=>{ma.has(t)||ma.add(t),Cc||(Cc=!0,a1(c1))},$z=t=>{ma.has(t)&&ma.delete(t)};function Zh(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Zh({range:t,output:e,extrapolate:n});if(Xh&&typeof t.output[0]=="string")return Xh(t);const i=t,s=i.output,a=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(h=>h);return h=>{const y=Kz(h,a);return jz(h,a[y],a[y+1],s[y],s[y+1],d,l,c,i.map)}}function jz(t,e,n,i,s,a,l,c,d){let h=d?d(t):t;if(h<e){if(l==="identity")return h;l==="clamp"&&(h=e)}if(h>n){if(c==="identity")return h;c==="clamp"&&(h=n)}return i===s?i:e===n?t<=e?i:s:(e===-1/0?h=-h:n===1/0?h=h-e:h=(h-e)/(n-e),h=a(h),i===-1/0?h=-h:s===1/0?h=h+i:h=h*(s-i)+i,h)}function Kz(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Gl extends lv{constructor(e,n,i,s){super(),this.calc=void 0,this.payload=e instanceof lv&&!(e instanceof Gl)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Zh(n,i,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=Zh(e,n,i)}interpolate(e,n,i){return new Gl(this,e,n,i)}}const ml=(t,e,n)=>t&&new Gl(t,e,n),Jz={default:{tension:170,friction:26}};function f1(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>f1(n,e))}class uv extends Er{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,s){s===void 0&&(s=!0),n.value=i,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&f1(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Gl(this,e,n,i)}}class Yz extends lv{constructor(e){super(),this.payload=e.map(n=>new uv(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,s)=>this.payload[s].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Gl(this,e,n)}}let Wz=0,Qz=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=Wz++}update(e){if(!e)return this;const n=ly(e),i=n.delay,s=i===void 0?0:i,a=n.to,l=kl(n,["delay","to"]);if(Ze.arr(a)||Ze.fun(a))this.queue.push(Zt({},l,{delay:s,to:a}));else if(a){let c={};Object.entries(a).forEach(d=>{let h=d[0],y=d[1];const E=Zt({to:{[h]:y},delay:Al(s,h)},l),T=c[E.delay]&&c[E.delay].to;c[E.delay]=Zt({},c[E.delay],E,{to:Zt({},T,E.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let a=s.from,l=a===void 0?{}:a,c=s.to,d=c===void 0?{}:c;Ze.obj(l)&&(this.merged=Zt({},l,this.merged)),Ze.obj(d)&&(this.merged=Zt({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((s,a)=>{let l=s.delay,c=kl(s,["delay"]);const d=y=>{a===i.length-1&&n===this.guid&&y&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let h=Ze.arr(c.to)||Ze.fun(c.to);l?setTimeout(()=>{n===this.guid&&(h?this.runAsync(c,d):this.diff(c).start(d))},l):h?this.runAsync(c,d):this.diff(c).start(d)})}else Ze.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),Gz(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&$z(this),this}runAsync(e,n){var i=this;e.delay;let s=kl(e,["delay"]);const a=this.local;let l=Promise.resolve(void 0);if(Ze.arr(s.to))for(let c=0;c<s.to.length;c++){const d=c,h=Zt({},s,ly(s.to[d]));Ze.arr(h.config)&&(h.config=h.config[d]),l=l.then(()=>{if(a===this.guid)return new Promise(y=>this.diff(h).start(y))})}else if(Ze.fun(s.to)){let c=0,d;l=l.then(()=>s.to(h=>{const y=Zt({},s,ly(h));if(Ze.arr(y.config)&&(y.config=y.config[c]),c++,a===this.guid)return d=new Promise(E=>this.diff(y).start(E))},function(h){return h===void 0&&(h=!0),i.stop(h)}).then(()=>d))}l.then(n)}diff(e){this.props=Zt({},this.props,e);let n=this.props,i=n.from,s=i===void 0?{}:i,a=n.to,l=a===void 0?{}:a,c=n.config,d=c===void 0?{}:c,h=n.reverse,y=n.attach,E=n.reset,T=n.immediate;if(h){var w=[l,s];s=w[0],l=w[1]}this.merged=Zt({},s,this.merged,l),this.hasChanged=!1;let R=y&&y(this);if(this.animations=Object.entries(this.merged).reduce((k,L)=>{let z=L[0],F=L[1],B=k[z]||{};const K=Ze.num(F),X=Ze.str(F)&&!F.startsWith("#")&&!/\d/.test(F)&&!o1[F],G=Ze.arr(F),I=!K&&!G&&!X;let x=Ze.und(s[z])?F:s[z],N=K||G||X?F:1,V=Al(d,z);R&&(N=R.animations[z].parent);let M=B.parent,O=B.interpolation,U=Gd(R?N.getPayload():N),be,ve=F;I&&(ve=Xh({range:[0,1],output:[F,F]})(1));let ee=O&&O.getValue();const he=!Ze.und(M)&&B.animatedValues.some(te=>!te.done),Ie=!Ze.equ(ve,ee),De=!Ze.equ(ve,B.previous),H=!Ze.equ(V,B.config);if(E||De&&Ie||H){if(K||X)M=O=B.parent||new uv(x);else if(G)M=O=B.parent||new Yz(x);else if(I){let te=B.interpolation&&B.interpolation.calc(B.parent.value);te=te!==void 0&&!E?te:x,B.parent?(M=B.parent,M.setValue(0,!1)):M=new uv(0);const fe={output:[te,F]};B.interpolation?(O=B.interpolation,B.interpolation.updateConfig(fe)):O=M.interpolate(fe)}return U=Gd(R?N.getPayload():N),be=Gd(M.getPayload()),E&&!I&&M.setValue(x,!1),this.hasChanged=!0,be.forEach(te=>{te.startPosition=te.value,te.lastPosition=te.value,te.lastVelocity=he?te.lastVelocity:void 0,te.lastTime=he?te.lastTime:void 0,te.startTime=l1(),te.done=!1,te.animatedStyles.clear()}),Al(T,z)&&M.setValue(I?N:F,!1),Zt({},k,{[z]:Zt({},B,{name:z,parent:M,interpolation:O,animatedValues:be,toValues:U,previous:ve,config:V,fromValues:Gd(M.getValue()),immediate:Al(T,z),initialVelocity:aa(V.velocity,0),clamp:aa(V.clamp,!1),precision:aa(V.precision,.01),tension:aa(V.tension,170),friction:aa(V.friction,26),mass:aa(V.mass,1),duration:V.duration,easing:aa(V.easing,te=>te),decay:V.decay})})}else return Ie?k:(I&&(M.setValue(1,!1),O.updateConfig({output:[ve,ve]})),M.done=!0,this.hasChanged=!0,Zt({},k,{[z]:Zt({},k[z],{previous:ve})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let k in this.animations)this.interpolations[k]=this.animations[k].interpolation,this.values[k]=this.animations[k].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const Xz=(t,e)=>{const n=j.useRef(!1),i=j.useRef(),s=Ze.fun(e),a=j.useMemo(()=>{i.current&&(i.current.map(E=>E.destroy()),i.current=void 0);let y;return[new Array(t).fill().map((E,T)=>{const w=new Qz,R=s?Al(e,T,w):e[T];return T===0&&(y=R.ref),w.update(R),y||w.start(),w}),y]},[t]),l=a[0],c=a[1];i.current=l,j.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(y=>new Promise(E=>y.start(E)))),stop:y=>i.current.forEach(E=>E.stop(y)),get controllers(){return i.current}}));const d=j.useMemo(()=>y=>i.current.map((E,T)=>{E.update(s?Al(y,T,E):y[T]),c||E.start()}),[t]);j.useEffect(()=>{n.current?s||d(e):c||i.current.forEach(y=>y.start())}),j.useEffect(()=>(n.current=!0,()=>i.current.forEach(y=>y.destroy())),[]);const h=i.current.map(y=>y.getValues());return s?[h,d,y=>i.current.forEach(E=>E.pause(y))]:h},Zz=t=>{const e=Ze.fun(t),n=Xz(1,e?t:[t]),i=n[0],s=n[1],a=n[2];return e?[i[0],s,a]:i};class eH extends s1{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Er)&&(e=q0.transform(e)),this.payload=e}}const ep={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ar="[-+]?\\d*\\.?\\d+",tp=Ar+"%";function Fp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const tH=new RegExp("rgb"+Fp(Ar,Ar,Ar)),nH=new RegExp("rgba"+Fp(Ar,Ar,Ar,Ar)),iH=new RegExp("hsl"+Fp(Ar,tp,tp)),rH=new RegExp("hsla"+Fp(Ar,tp,tp,Ar)),sH=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,oH=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,aH=/^#([0-9a-fA-F]{6})$/,lH=/^#([0-9a-fA-F]{8})$/;function uH(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=aH.exec(t))?parseInt(e[1]+"ff",16)>>>0:ep.hasOwnProperty(t)?ep[t]:(e=tH.exec(t))?(gl(e[1])<<24|gl(e[2])<<16|gl(e[3])<<8|255)>>>0:(e=nH.exec(t))?(gl(e[1])<<24|gl(e[2])<<16|gl(e[3])<<8|$b(e[4]))>>>0:(e=sH.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=lH.exec(t))?parseInt(e[1],16)>>>0:(e=oH.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=iH.exec(t))?(Hb(Gb(e[1]),$d(e[2]),$d(e[3]))|255)>>>0:(e=rH.exec(t))?(Hb(Gb(e[1]),$d(e[2]),$d(e[3]))|$b(e[4]))>>>0:null}function uy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Hb(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i,a=uy(s,i,t+1/3),l=uy(s,i,t),c=uy(s,i,t-1/3);return Math.round(a*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function gl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Gb(t){return(parseFloat(t)%360+360)%360/360}function $b(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function $d(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function jb(t){let e=uH(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,s=(e&65280)>>>8,a=(e&255)/255;return`rgba(${n}, ${i}, ${s}, ${a})`}const jd=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,cH=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,fH=new RegExp(`(${Object.keys(ep).join("|")})`,"g"),dH=t=>{const e=t.output.map(s=>s.replace(cH,jb)).map(s=>s.replace(fH,jb)),n=e[0].match(jd).map(()=>[]);e.forEach(s=>{s.match(jd).forEach((a,l)=>n[l].push(+a))});const i=e[0].match(jd).map((s,a)=>Zh(Zt({},t,{output:n[a]})));return s=>{let a=0;return e[0].replace(jd,()=>i[a++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,h,y)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(h)}, ${y})`)}};let Ic={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const hH=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),pH=["Webkit","Ms","Moz","O"];Ic=Object.keys(Ic).reduce((t,e)=>(pH.forEach(n=>t[hH(n,e)]=t[e]),t),Ic);function mH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(Ic.hasOwnProperty(t)&&Ic[t])?e+"px":(""+e).trim()}const Kb={};Bz(t=>new eH(t));Uz(dH);Oz(ep);Lz((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,a=e.children,l=e.scrollTop,c=e.scrollLeft,d=kl(e,["style","children","scrollTop","scrollLeft"]),h=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),a!==void 0&&(t.textContent=a);for(let y in s)if(s.hasOwnProperty(y)){var n=y.indexOf("--")===0,i=mH(y,s[y],n);y==="float"&&(y="cssFloat"),n?t.style.setProperty(y,i):t.style[y]=i}for(let y in d){const E=h?y:Kb[y]||(Kb[y]=y.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(E)<"u"&&t.setAttribute(E,d[y])}return}else return!1},t=>t);const gH=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],yH=Mz(Hz),vH=yH(gH);function Jb(t,e){return t.map(function(n,i){return n+e[i]})}function d1(t,e){return t.map(function(n,i){return n-e[i]})}function cv(t){return Math.hypot.apply(Math,t)}function _H(t,e,n){var i=cv(e),s=i===0?0:1/i,a=n===0?0:1/n,l=a*i,c=e.map(function(y){return a*y}),d=e.map(function(y){return s*y}),h=cv(t);return{velocities:c,velocity:l,distance:h,direction:d}}function fv(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function EH(t,e,n){return Math.max(e,Math.min(t,n))}function TH(t,e){return Math.pow(t,e*5)}function Yb(t,e,n){return e===0||Math.abs(e)===1/0?TH(t,n):t*e*n/(e+n*t)}function xc(t,e,n,i){return i===void 0&&(i=.15),i===0?EH(t,e,n):t<e?-Yb(e-t,n-e,i)+e:t>n?+Yb(t-n,n-e,i)+n:t}function SH(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function AH(t,e,n){return e&&SH(t.prototype,e),t}function pi(){return pi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pi.apply(this,arguments)}function h1(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function wH(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Kd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bH(t,e){if(t){if(typeof t=="string")return Wb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wb(t,e)}}function Wb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Bp(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=bH(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function p1(){}function m1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?p1:e.length===1?e[0]:function(){for(var i,s=Bp(e),a;!(a=s()).done;){var l=a.value;i=l.apply(this,arguments)||i}return i}}function mo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function Jd(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function z0(t,e){t===void 0&&(t={});for(var n={},i=0,s=Object.entries(e);i<s.length;i++){var a=s[i],l=a[0],c=a[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=z0(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var CH=180,IH=.15,xH=.5,RH=60,NH={threshold:function(e){return e===void 0&&(e=0),mo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return mo(IH);case!1:return mo(0);default:return mo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:mo(e)}},g1=pi({},NH,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(E){return g1.bounds(e(E))};var n=e,i=n.left,s=i===void 0?-1/0:i,a=n.right,l=a===void 0?1/0:a,c=n.top,d=c===void 0?-1/0:c,h=n.bottom,y=h===void 0?1/0:h;return[[s,l],[d,y]]}}),DH=typeof window<"u"&&window.document&&window.document.createElement,MH={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=DH?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,s=i===void 0?!0:i,a=n.capture,l=a===void 0?!1:a;return{passive:s,capture:l}}},kH=pi({},g1,{threshold:function(e,n,i){var s=i.filterTaps,a=s===void 0?!1:s,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,h=d===void 0?void 0:d,y=mo(e,a?3:c||h?1:0);return this.filterTaps=a||y[0]+y[1]>0,y},swipeVelocity:function(e){return e===void 0&&(e=xH),mo(e)},swipeDistance:function(e){return e===void 0&&(e=RH),mo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return CH;case!1:return 0;default:return e}}});function PH(t){return t===void 0&&(t={}),z0(t,MH)}function VH(t){return t===void 0&&(t={}),z0(t,kH)}function LH(t){var e=t.domTarget,n=t.eventOptions,i=t.window,s=t.enabled,a=wH(t,["domTarget","eventOptions","window","enabled"]),l=PH({domTarget:e,eventOptions:n,window:i,enabled:s});return l.drag=VH(a),l}function tc(t){return pi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:p1,canceled:!1,memo:void 0,args:void 0},t)}function y1(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=tc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=tc({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=tc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=tc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=tc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:s,scroll:a}}var ua=new Map,OH=(function(){function t(n,i){var s=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(a,l){var c;l===void 0&&(l=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var d=arguments.length,h=new Array(d>2?d-2:0),y=2;y<d;y++)h[y-2]=arguments[y];s.controller.timeouts[s.stateKey]=(c=window).setTimeout.apply(c,[a,l].concat(h))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(a){if(a===void 0&&(a=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!a&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var l=s.state.active,c=s.state._active;s.state.active=c,s.state.first=c&&!l,s.state.last=l&&!c,s.controller.state.shared[s.ingKey]=c}var d=pi({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),h=s.handler(d);return s.state.memo=h!==void 0?h:s.state.memo,s.state._active||s.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,s){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var s=this.config,a=s.initial,l=s.bounds,c=s.rubberband,d=s.threshold,h=this.state,y=h._bounds,E=h._initial,T=h._active,w=h._intentional,R=h.lastOffset,k=h.movement,L=this.getInternalMovement(i,this.state),z=w[0]===!1?Qb(L[0],d[0]):w[0],F=w[1]===!1?Qb(L[1],d[1]):w[1],B=this.checkIntentionality([z,F],L);if(B._blocked)return pi({},B,{_movement:L,delta:[0,0]});var K=B._intentional,X=L,G,I;if(K[0]!==!1&&w[0]===!1&&(I=Jd(a,this.state),G=Jd(l,this.state),E[0]=I[0],y[0]=G[0]),K[1]!==!1&&w[1]===!1){var x,N;I=(x=I)!=null?x:Jd(a,this.state),G=(N=G)!=null?N:Jd(l,this.state),E[1]=I[1],y[1]=G[1]}var V=[K[0]!==!1?L[0]-K[0]:E[0],K[1]!==!1?L[1]-K[1]:E[1]],M=Jb(V,R),O=T?c:[0,0];return V=Xb(y,Jb(V,E),O),pi({},B,{intentional:K[0]!==!1||K[1]!==!1,_initial:E,_movement:X,movement:V,values:i,offset:Xb(y,M,O),delta:d1(V,k)})},e.clean=function(){this.clearTimeout()},AH(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function Qb(t,e){return Math.abs(t)>=e?fv(t)*e:!1}function Xb(t,e,n){var i=e[0],s=e[1],a=n[0],l=n[1],c=t[0],d=c[0],h=c[1],y=t[1],E=y[0],T=y[1];return[xc(i,d,h,a),xc(s,E,T,l)]}function cy(t,e,n){var i=t.state,s=t.args,a=e.timeStamp,l=e.type,c=i.values,d=n?0:a-i.startTime;return{_lastEventType:l,event:e,timeStamp:a,elapsedTime:d,args:s,previous:c}}function UH(t,e,n){var i=t.state.offset,s=n.timeStamp;return pi({},y1()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:s})}function FH(t,e){return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return t.call.apply(t,[this,pi({},e,{event:n})].concat(s))}}var BH=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];for(var c=Bp(n.classes),d;!(d=c()).done;){var h=d.value;new h(n,a).addBindings(i)}for(var y=0,E=Object.entries(n.nativeRefs);y<E.length;y++){var T=E[y],w=T[0],R=T[1];dv(i,w,FH(R,pi({},n.state.shared,{args:a})))}return n.config.domTarget?GH(n,i):$H(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=_1(n.config),s=n.config.eventOptions;i&&lf(i,v1(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),qH(n)},this.state=y1(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function qH(t){var e=t.config,n=e.window,i=e.eventOptions,s=t.windowListeners;if(n){for(var a in s){var l=s[a];lf(n,l,i)}t.windowListeners={}}}function zH(t,e){var n=t.config,i=t.windowListeners;n.window&&(lf(n.window,i[e],n.eventOptions),delete i[e])}function HH(t,e,n){var i=t.config,s=t.windowListeners;n===void 0&&(n=[]),i.window&&(lf(i.window,s[e],i.eventOptions),E1(i.window,s[e]=n,i.eventOptions))}function GH(t,e){var n=t.config,i=t.domListeners,s=_1(n);if(!s)throw new Error("domTarget must be defined");var a=n.eventOptions;lf(s,v1(i),a);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],h=d[0],y=d[1],E=h.slice(2).toLowerCase();i.push([E,m1.apply(void 0,y)])}E1(s,i,a)}function $H(t,e){for(var n=t.config,i={},s=n.eventOptions.capture?"Capture":"",a=0,l=Object.entries(e);a<l.length;a++){var c=l[a],d=c[0],h=c[1],y=Array.isArray(h)?h:[h],E=d+s;i[E]=m1.apply(void 0,y)}return i}function v1(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function _1(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function dv(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function E1(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Bp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.addEventListener(l,c,n)}}function lf(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Bp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.removeEventListener(l,c,n)}}function jH(t,e,n){n===void 0&&(n={});var i=JH(t),s=wn.useMemo(function(){return new BH(i)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,wn.useEffect(s.effect,[]),s.config.domTarget?KH:s.bind}function KH(){}function JH(t){var e=new Set;return t.drag&&e.add(ua.get("drag")),t.wheel&&e.add(ua.get("wheel")),t.scroll&&e.add(ua.get("scroll")),t.move&&e.add(ua.get("move")),t.pinch&&e.add(ua.get("pinch")),t.hover&&e.add(ua.get("hover")),e}var YH=(function(t){h1(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,a){return d1(s,a.initial)},n.checkIntentionality=function(s,a){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var l=a.map(Math.abs),c=l[0],d=l[1],h=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:h}:h?this.config.axis&&h!==this.config.axis?{_intentional:s,_blocked:!0,axis:h}:(s[h==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:h}):{_intentional:[!1,!1],_blocked:!1,axis:h}},n.getKinematics=function(s,a){var l=this.getMovement(s);if(!l._blocked){var c=a.timeStamp-this.state.timeStamp;Object.assign(l,_H(l.movement,l.delta,c))}return l},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(OH);function T1(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function Zb(t){var e="buttons"in t?t.buttons:0,n=T1(t),i=n&&n.length||0,s=i>0||e>0,a=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:s,buttons:e,shiftKey:a,altKey:l,metaKey:c,ctrlKey:d}}function eC(t){var e=T1(t),n=e?e[0]:t,i=n.clientX,s=n.clientY;return[i,s]}var WH=3,QH=220,XH=(function(t){h1(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(s){!i.enabled||i.state._active||(HH(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:s.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),i.setTimeout(i.startDrag.bind(Kd(i)),i.config.delay,s)):i.startDrag(s))},i.onDragChange=function(s){if(!i.state.canceled&&s.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(s));return}var a=Zb(s);if(!a.down){i.onDragEnd(s);return}i.updateSharedState(a);var l=eC(s),c=i.getKinematics(l,s),d=cy(Kd(i),s),h=i.state._isTap,y=cv(c._movement);h&&y>=WH&&(h=!1),i.updateGestureState(pi({},d,c,{_isTap:h})),i.fireGestureHandler()}},i.onDragEnd=function(s){if(s.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var a=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],h=i.state.movement,y=h[0],E=h[1],T=i.state._intentional,w=T[0],R=T[1],k=i.config.swipeVelocity,L=k[0],z=k[1],F=i.config.swipeDistance,B=F[0],K=F[1],X=pi({},cy(Kd(i),s),i.getMovement(i.state.values)),G=[0,0];X.elapsedTime<QH&&(w!==!1&&Math.abs(c)>L&&Math.abs(y)>B&&(G[0]=fv(c)),R!==!1&&Math.abs(d)>z&&Math.abs(E)>K&&(G[1]=fv(d))),i.updateGestureState(pi({},X,{tap:a,swipe:G})),i.fireGestureHandler(a===!0)}},i.clean=function(){t.prototype.clean.call(Kd(i)),i.state._delayedEvent=!1,zH(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(s){i.state._isTap||s.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(s){var a=eC(s);this.updateSharedState(Zb(s)),this.updateGestureState(pi({},UH(this,a,s),cy(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},n.addBindings=function(s){if(dv(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var a=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";dv(s,a,this.onClick)}},e})(YH);function ZH(t,e){var n,i=[],s,a=!1;function l(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return a&&n===this&&e(d,i)||(s=t.apply(this,d),a=!0,n=this,i=d),s}return l}function vh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!vh(t[i],e[i]))return!1;return!0}var a;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;for(a=t.entries();!(i=a.next()).done;)if(!vh(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(s[i]==="_owner"&&t.$$typeof)&&!vh(t[s[i]],e[s[i]]))return!1;return!0}return t!==t&&e!==e}function e8(t,e){try{return vh(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function t8(t,e){e===void 0&&(e={}),ua.set("drag",XH);var n=j.useRef();return n.current||(n.current=ZH(LH,e8)),jH({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var S1=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],np=S1.join(","),A1=typeof Element>"u",wa=A1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,hv=!A1&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},w1=function(e,n,i){var s=Array.prototype.slice.apply(e.querySelectorAll(np));return n&&wa.call(e,np)&&s.unshift(e),s=s.filter(i),s},b1=function t(e,n,i){for(var s=[],a=Array.from(e);a.length;){var l=a.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,h=t(d,!0,i);i.flatten?s.push.apply(s,h):s.push({scope:l,candidates:h})}else{var y=wa.call(l,np);y&&i.filter(l)&&(n||!e.includes(l))&&s.push(l);var E=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(E&&T){var w=t(E===!0?l.children:E.children,!0,i);i.flatten?s.push.apply(s,w):s.push({scope:l,candidates:w})}else a.unshift.apply(a,l.children)}}return s},C1=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},n8=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},I1=function(e){return e.tagName==="INPUT"},i8=function(e){return I1(e)&&e.type==="hidden"},r8=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},s8=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},o8=function(e){if(!e.name)return!0;var n=e.form||hv(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=i(window.CSS.escape(e.name));else try{s=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=s8(s,e.form);return!a||a===e},a8=function(e){return I1(e)&&e.type==="radio"},l8=function(e){return a8(e)&&!o8(e)},tC=function(e){var n=e.getBoundingClientRect(),i=n.width,s=n.height;return i===0&&s===0},u8=function(e,n){var i=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=wa.call(e,"details>summary:first-of-type"),l=a?e.parentElement:e;if(wa.call(l,"details:not([open]) *"))return!0;var c=hv(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof s=="function"){for(var h=e;e;){var y=e.parentElement,E=hv(e);if(y&&!y.shadowRoot&&s(y)===!0)return tC(e);e.assignedSlot?e=e.assignedSlot:!y&&E!==e.ownerDocument?e=E.host:e=y}e=h}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return tC(e);return!1},c8=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var s=n.children.item(i);if(s.tagName==="LEGEND")return wa.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},ip=function(e,n){return!(n.disabled||i8(n)||u8(n,e)||r8(n)||c8(n))},pv=function(e,n){return!(l8(n)||C1(n)<0||!ip(e,n))},f8=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},d8=function t(e){var n=[],i=[];return e.forEach(function(s,a){var l=!!s.scope,c=l?s.scope:s,d=C1(c,l),h=l?t(s.candidates):c;d===0?l?n.push.apply(n,h):n.push(c):i.push({documentOrder:a,tabIndex:d,item:s,isScope:l,content:h})}),i.sort(n8).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(n)},h8=function(e,n){n=n||{};var i;return n.getShadowRoot?i=b1([e],n.includeContainer,{filter:pv.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:f8}):i=w1(e,n.includeContainer,pv.bind(null,n)),d8(i)},p8=function(e,n){n=n||{};var i;return n.getShadowRoot?i=b1([e],n.includeContainer,{filter:ip.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=w1(e,n.includeContainer,ip.bind(null,n)),i},Yd=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return wa.call(e,np)===!1?!1:pv(n,e)},m8=S1.concat("iframe").join(","),fy=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return wa.call(e,m8)===!1?!1:ip(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function nC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function iC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nC(Object(n),!0).forEach(function(i){g8(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function g8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rC=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),y8=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},v8=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},_8=function(e){return e.key==="Tab"||e.keyCode===9},sC=function(e){return setTimeout(e,0)},oC=function(e,n){var i=-1;return e.every(function(s,a){return n(s)?(i=a,!1):!0}),i},nc=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,i):e},Wd=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},E8=function(e,n){var i=(n==null?void 0:n.document)||document,s=iC({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(G,I,x){return G&&G[I]!==void 0?G[I]:s[x||I]},d=function(G){return a.containerGroups.findIndex(function(I){var x=I.container,N=I.tabbableNodes;return x.contains(G)||N.find(function(V){return V===G})})},h=function(G){var I=s[G];if(typeof I=="function"){for(var x=arguments.length,N=new Array(x>1?x-1:0),V=1;V<x;V++)N[V-1]=arguments[V];I=I.apply(void 0,N)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(G,"` was specified but was not a node, or did not return a node"))}var M=I;if(typeof I=="string"&&(M=i.querySelector(I),!M))throw new Error("`".concat(G,"` as selector refers to no known node"));return M},y=function(){var G=h("initialFocus");if(G===!1)return!1;if(G===void 0)if(d(i.activeElement)>=0)G=i.activeElement;else{var I=a.tabbableGroups[0],x=I&&I.firstTabbableNode;G=x||h("fallbackFocus")}if(!G)throw new Error("Your focus-trap needs to have at least one focusable element");return G},E=function(){if(a.containerGroups=a.containers.map(function(G){var I=h8(G,s.tabbableOptions),x=p8(G,s.tabbableOptions);return{container:G,tabbableNodes:I,focusableNodes:x,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(V){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=x.findIndex(function(U){return U===V});if(!(O<0))return M?x.slice(O+1).find(function(U){return Yd(U,s.tabbableOptions)}):x.slice(0,O).reverse().find(function(U){return Yd(U,s.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(G){return G.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function X(G){if(G!==!1&&G!==i.activeElement){if(!G||!G.focus){X(y());return}G.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=G,y8(G)&&G.select()}},w=function(G){var I=h("setReturnFocus",G);return I||(I===!1?!1:G)},R=function(G){var I=Wd(G);if(!(d(I)>=0)){if(nc(s.clickOutsideDeactivates,G)){l.deactivate({returnFocus:s.returnFocusOnDeactivate&&!fy(I,s.tabbableOptions)});return}nc(s.allowOutsideClick,G)||G.preventDefault()}},k=function(G){var I=Wd(G),x=d(I)>=0;x||I instanceof Document?x&&(a.mostRecentlyFocusedNode=I):(G.stopImmediatePropagation(),T(a.mostRecentlyFocusedNode||y()))},L=function(G){var I=Wd(G);E();var x=null;if(a.tabbableGroups.length>0){var N=d(I),V=N>=0?a.containerGroups[N]:void 0;if(N<0)G.shiftKey?x=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:x=a.tabbableGroups[0].firstTabbableNode;else if(G.shiftKey){var M=oC(a.tabbableGroups,function(ce){var he=ce.firstTabbableNode;return I===he});if(M<0&&(V.container===I||fy(I,s.tabbableOptions)&&!Yd(I,s.tabbableOptions)&&!V.nextTabbableNode(I,!1))&&(M=N),M>=0){var O=M===0?a.tabbableGroups.length-1:M-1,U=a.tabbableGroups[O];x=U.lastTabbableNode}}else{var be=oC(a.tabbableGroups,function(ce){var he=ce.lastTabbableNode;return I===he});if(be<0&&(V.container===I||fy(I,s.tabbableOptions)&&!Yd(I,s.tabbableOptions)&&!V.nextTabbableNode(I))&&(be=N),be>=0){var ve=be===a.tabbableGroups.length-1?0:be+1,ee=a.tabbableGroups[ve];x=ee.firstTabbableNode}}}else x=h("fallbackFocus");x&&(G.preventDefault(),T(x))},z=function(G){if(v8(G)&&nc(s.escapeDeactivates,G)!==!1){G.preventDefault(),l.deactivate();return}if(_8(G)){L(G);return}},F=function(G){var I=Wd(G);d(I)>=0||nc(s.clickOutsideDeactivates,G)||nc(s.allowOutsideClick,G)||(G.preventDefault(),G.stopImmediatePropagation())},B=function(){if(a.active)return rC.activateTrap(l),a.delayInitialFocusTimer=s.delayInitialFocus?sC(function(){T(y())}):T(y()),i.addEventListener("focusin",k,!0),i.addEventListener("mousedown",R,{capture:!0,passive:!1}),i.addEventListener("touchstart",R,{capture:!0,passive:!1}),i.addEventListener("click",F,{capture:!0,passive:!1}),i.addEventListener("keydown",z,{capture:!0,passive:!1}),l},K=function(){if(a.active)return i.removeEventListener("focusin",k,!0),i.removeEventListener("mousedown",R,!0),i.removeEventListener("touchstart",R,!0),i.removeEventListener("click",F,!0),i.removeEventListener("keydown",z,!0),l};return l={get active(){return a.active},get paused(){return a.paused},activate:function(G){if(a.active)return this;var I=c(G,"onActivate"),x=c(G,"onPostActivate"),N=c(G,"checkCanFocusTrap");N||E(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=i.activeElement,I&&I();var V=function(){N&&E(),B(),x&&x()};return N?(N(a.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(G){if(!a.active)return this;var I=iC({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},G);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,K(),a.active=!1,a.paused=!1,rC.deactivateTrap(l);var x=c(I,"onDeactivate"),N=c(I,"onPostDeactivate"),V=c(I,"checkCanReturnFocus"),M=c(I,"returnFocus","returnFocusOnDeactivate");x&&x();var O=function(){sC(function(){M&&T(w(a.nodeFocusedBeforeActivation)),N&&N()})};return M&&V?(V(w(a.nodeFocusedBeforeActivation)).then(O,O),this):(O(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,K(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,E(),B(),this)},updateContainerElements:function(G){var I=[].concat(G).filter(Boolean);return a.containers=I.map(function(x){return typeof x=="string"?i.querySelector(x):x}),a.active&&E(),this}},l.updateContainerElements(e),l};function T8(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var H0=!1;if(typeof window<"u"){var aC={get passive(){H0=!0}};window.addEventListener("testPassive",null,aC),window.removeEventListener("testPassive",null,aC)}var x1=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),yo=[],rp=!1,R1=-1,Rc=void 0,Nc=void 0,N1=function(e){return yo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},sp=function(e){var n=e||window.event;return N1(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},S8=function(e){if(Nc===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(Nc=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Rc===void 0&&(Rc=document.body.style.overflow,document.body.style.overflow="hidden")},A8=function(){Nc!==void 0&&(document.body.style.paddingRight=Nc,Nc=void 0),Rc!==void 0&&(document.body.style.overflow=Rc,Rc=void 0)},w8=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},b8=function(e,n){var i=e.targetTouches[0].clientY-R1;return N1(e.target)?!1:n&&n.scrollTop===0&&i>0||w8(n)&&i<0?sp(e):(e.stopPropagation(),!0)},C8=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!yo.some(function(s){return s.targetElement===e})){var i={targetElement:e,options:n||{}};yo=[].concat(T8(yo),[i]),x1?(e.ontouchstart=function(s){s.targetTouches.length===1&&(R1=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&b8(s,e)},rp||(document.addEventListener("touchmove",sp,H0?{passive:!1}:void 0),rp=!0)):S8(n)}},I8=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}yo=yo.filter(function(n){return n.targetElement!==e}),x1?(e.ontouchstart=null,e.ontouchmove=null,rp&&yo.length===0&&(document.removeEventListener("touchmove",sp,H0?{passive:!1}:void 0),rp=!1)):yo.length||A8()},ga=[],x8=function(){return ga.some(function(t){return t.activeTargets.length>0})},R8=function(){return ga.some(function(t){return t.skippedTargets.length>0})},lC="ResizeObserver loop completed with undelivered notifications.",N8=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:lC}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=lC),window.dispatchEvent(t)},Gc;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Gc||(Gc={}));var ya=function(t){return Object.freeze(t)},D8=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,ya(this)}return t})(),D1=(function(){function t(e,n,i,s){return this.x=e,this.y=n,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ya(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,s=e.top,a=e.right,l=e.bottom,c=e.left,d=e.width,h=e.height;return{x:n,y:i,top:s,right:a,bottom:l,left:c,width:d,height:h}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),G0=function(t){return t instanceof SVGElement&&"getBBox"in t},M1=function(t){if(G0(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var s=t,a=s.offsetWidth,l=s.offsetHeight;return!(a||l||t.getClientRects().length)},uC=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},M8=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Dc=typeof window<"u"?window:{},Qd=new WeakMap,cC=/auto|scroll/,k8=/^tb|vertical/,P8=/msie|trident/i.test(Dc.navigator&&Dc.navigator.userAgent),Ur=function(t){return parseFloat(t||"0")},Pl=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new D8((n?e:t)||0,(n?t:e)||0)},fC=ya({devicePixelContentBoxSize:Pl(),borderBoxSize:Pl(),contentBoxSize:Pl(),contentRect:new D1(0,0,0,0)}),k1=function(t,e){if(e===void 0&&(e=!1),Qd.has(t)&&!e)return Qd.get(t);if(M1(t))return Qd.set(t,fC),fC;var n=getComputedStyle(t),i=G0(t)&&t.ownerSVGElement&&t.getBBox(),s=!P8&&n.boxSizing==="border-box",a=k8.test(n.writingMode||""),l=!i&&cC.test(n.overflowY||""),c=!i&&cC.test(n.overflowX||""),d=i?0:Ur(n.paddingTop),h=i?0:Ur(n.paddingRight),y=i?0:Ur(n.paddingBottom),E=i?0:Ur(n.paddingLeft),T=i?0:Ur(n.borderTopWidth),w=i?0:Ur(n.borderRightWidth),R=i?0:Ur(n.borderBottomWidth),k=i?0:Ur(n.borderLeftWidth),L=E+h,z=d+y,F=k+w,B=T+R,K=c?t.offsetHeight-B-t.clientHeight:0,X=l?t.offsetWidth-F-t.clientWidth:0,G=s?L+F:0,I=s?z+B:0,x=i?i.width:Ur(n.width)-G-X,N=i?i.height:Ur(n.height)-I-K,V=x+L+X+F,M=N+z+K+B,O=ya({devicePixelContentBoxSize:Pl(Math.round(x*devicePixelRatio),Math.round(N*devicePixelRatio),a),borderBoxSize:Pl(V,M,a),contentBoxSize:Pl(x,N,a),contentRect:new D1(E,d,x,N)});return Qd.set(t,O),O},P1=function(t,e,n){var i=k1(t,n),s=i.borderBoxSize,a=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case Gc.DEVICE_PIXEL_CONTENT_BOX:return l;case Gc.BORDER_BOX:return s;default:return a}},V8=(function(){function t(e){var n=k1(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=ya([n.borderBoxSize]),this.contentBoxSize=ya([n.contentBoxSize]),this.devicePixelContentBoxSize=ya([n.devicePixelContentBoxSize])}return t})(),V1=function(t){if(M1(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},L8=function(){var t=1/0,e=[];ga.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(h){var y=new V8(h.target),E=V1(h.target);c.push(y),h.lastReportedSize=P1(h.target,h.observedBox),E<t&&(t=E)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var s=i[n];s()}return t},dC=function(t){ga.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(V1(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},O8=function(){var t=0;for(dC(t);x8();)t=L8(),dC(t);return R8()&&N8(),t>0},dy,L1=[],U8=function(){return L1.splice(0).forEach(function(t){return t()})},F8=function(t){if(!dy){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return U8()}).observe(n,i),dy=function(){n.textContent="".concat(e?e--:e++)}}L1.push(t),dy()},B8=function(t){F8(function(){requestAnimationFrame(t)})},_h=0,q8=function(){return!!_h},z8=250,H8={attributes:!0,characterData:!0,childList:!0,subtree:!0},hC=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],pC=function(t){return t===void 0&&(t=0),Date.now()+t},hy=!1,G8=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=z8),!hy){hy=!0;var i=pC(e);B8(function(){var s=!1;try{s=O8()}finally{if(hy=!1,e=i-pC(),!q8())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,H8)};document.body?n():Dc.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),hC.forEach(function(n){return Dc.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),hC.forEach(function(n){return Dc.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),mv=new G8,mC=function(t){!_h&&t>0&&mv.start(),_h+=t,!_h&&mv.stop()},$8=function(t){return!G0(t)&&!M8(t)&&getComputedStyle(t).display==="inline"},j8=(function(){function t(e,n){this.target=e,this.observedBox=n||Gc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=P1(this.target,this.observedBox,!0);return $8(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),K8=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Xd=new WeakMap,gC=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Zd=(function(){function t(){}return t.connect=function(e,n){var i=new K8(e,n);Xd.set(e,i)},t.observe=function(e,n,i){var s=Xd.get(e),a=s.observationTargets.length===0;gC(s.observationTargets,n)<0&&(a&&ga.push(s),s.observationTargets.push(new j8(n,i&&i.box)),mC(1),mv.schedule())},t.unobserve=function(e,n){var i=Xd.get(e),s=gC(i.observationTargets,n),a=i.observationTargets.length===1;s>=0&&(a&&ga.splice(ga.indexOf(i),1),i.observationTargets.splice(s,1),mC(-1))},t.disconnect=function(e){var n=this,i=Xd.get(e);i.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),J8=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Zd.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!uC(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Zd.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!uC(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Zd.unobserve(this,e)},t.prototype.disconnect=function(){Zd.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function Qn(){return Qn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qn.apply(this,arguments)}function Eh(t,e){if(t==null)return{};var n,i,s={},a=Object.keys(t);for(i=0;i<a.length;i++)e.indexOf(n=a[i])>=0||(s[n]=t[n]);return s}var Mc=typeof window<"u"?j.useLayoutEffect:j.useEffect;function ic(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function eh(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var Y8={box:"border-box"};function py(t,e){var n=e.label,i=e.enabled,s=e.resizeSourceRef,a=j.useState(0),l=a[0],c=a[1];j.useDebugValue(n+": "+l);var d=j.useCallback(function(h){c(h[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return Mc(function(){if(t.current&&i){var h=new J8(d);return h.observe(t.current,Y8),function(){h.disconnect()}}},[t,d,i]),i?l:0}function Wn(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var yC={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},vC={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},W8=Tz({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:Qn({},yC,vC)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:Qn({},yC,vC)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:Qn({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[Sz({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(Wn()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(Wn()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),Q8=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],X8=["velocity"],Z8=["onRest","config"],O1=Jz.default,eG=O1.tension,th=O1.friction,tG=wn.forwardRef(function(t,e){var n=t.children,i=t.sibling,s=t.className,a=t.footer,l=t.header,c=t.open,d=t.initialState,h=t.lastSnapRef,y=t.initialFocusRef,E=t.onDismiss,T=t.maxHeight,w=t.defaultSnap,R=w===void 0?iG:w,k=t.snapPoints,L=k===void 0?rG:k,z=t.blocking,F=z===void 0||z,B=t.scrollLocking,K=B===void 0||B,X=t.style,G=t.onSpringStart,I=t.onSpringCancel,x=t.onSpringEnd,N=t.reserveScrollBarGap,V=N===void 0?F:N,M=t.expandOnContentDrag,O=M!==void 0&&M,U=Eh(t,Q8),be=(function(){var oe=j.useState(!1),Te=oe[0],Se=oe[1],$e=j.useState({}),St=$e[0],Ye=$e[1],We=j.useCallback(function(at){return Ye(function(rt){var ke;return Qn({},rt,((ke={})[at]=!1,ke))}),function(){Ye(function(rt){var ke;return Qn({},rt,((ke={})[at]=!0,ke))})}},[]);return j.useEffect(function(){var at=Object.values(St);at.length!==0&&at.every(Boolean)&&Se(!0)},[St]),{ready:Te,registerReady:We}})(),ve=be.ready,ee=be.registerReady,ce=j.useRef(!1),he=j.useRef(G),Ie=j.useRef(I),De=j.useRef(x);j.useEffect(function(){he.current=G,Ie.current=I,De.current=x},[I,G,x]);var H,te,fe=Zz(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),pe=fe[0],we=fe[1],Me=j.useRef(null),Ue=j.useRef(null),jt=j.useRef(null),xe=j.useRef(null),Cn=j.useRef(null),ut=j.useRef(null),_n=j.useRef(0),Ln=j.useRef(),In=j.useRef(!1),En=(H=j.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),te=j.useRef(H==null?void 0:H.matches),j.useDebugValue(te.current?"reduce":"no-preference"),j.useEffect(function(){var oe=function(Te){te.current=Te.matches};return H==null||H.addListener(oe),function(){return H==null?void 0:H.removeListener(oe)}},[H]),te),xn=(function(oe){var Te=oe.targetRef,Se=oe.enabled,$e=oe.reserveScrollBarGap,St=j.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return j.useDebugValue(Se?"Enabled":"Disabled"),j.useEffect(function(){if(!Se)return St.current.deactivate(),void(St.current={activate:function(){},deactivate:function(){}});var Ye=Te.current,We=!1;St.current={activate:function(){We||(We=!0,C8(Ye,{allowTouchMove:function(at){return at.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:$e}))},deactivate:function(){We&&(We=!1,I8(Ye))}}},[Se,Te,$e]),St})({targetRef:Ue,enabled:ve&&K,reserveScrollBarGap:V}),zi=(function(oe){var Te=oe.targetRef,Se=oe.enabled,$e=j.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return j.useDebugValue(Se?"Enabled":"Disabled"),j.useEffect(function(){if(!Se)return $e.current.deactivate(),void($e.current={activate:function(){},deactivate:function(){}});var St=Te.current,Ye=!1,We=[],at=[];$e.current={activate:function(){if(!Ye){Ye=!0;var rt=St.parentNode;document.querySelectorAll("body > *").forEach(function(ke){if(ke!==rt){var je=ke.getAttribute("aria-hidden");je!==null&&je!=="false"||(We.push(je),at.push(ke),ke.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Ye&&(Ye=!1,at.forEach(function(rt,ke){var je=We[ke];je===null?rt.removeAttribute("aria-hidden"):rt.setAttribute("aria-hidden",je)}),We=[],at=[])}}},[Te,Se]),$e})({targetRef:Me,enabled:ve&&F}),Ii=(function(oe){var Te=oe.targetRef,Se=oe.fallbackRef,$e=oe.initialFocusRef,St=oe.enabled,Ye=j.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return j.useDebugValue(St?"Enabled":"Disabled"),j.useEffect(function(){if(!St)return Ye.current.deactivate(),void(Ye.current={activate:function(){},deactivate:function(){}});var We=Se.current,at=E8(Te.current,{onActivate:void 0,initialFocus:$e?function(){return($e==null?void 0:$e.current)||We}:void 0,fallbackFocus:We,escapeDeactivates:!1,clickOutsideDeactivates:!1}),rt=!1;Ye.current={activate:function(){try{return rt?Promise.resolve():(rt=!0,Promise.resolve(at.activate()).then(function(){return Promise.resolve(new Promise(function(ke){return setTimeout(function(){return ke(void 0)},0)})).then(function(){})}))}catch(ke){return Promise.reject(ke)}},deactivate:function(){rt&&(rt=!1,at.deactivate())}}},[St,Se,$e,Te]),Ye})({targetRef:Me,fallbackRef:ut,initialFocusRef:y||void 0,enabled:ve&&F&&y!==!1}),mi=(function(oe){var Te=oe.getSnapPoints,Se=oe.heightRef,$e=oe.lastSnapRef,St=oe.ready,Ye=(function(kt){var At=kt.contentRef,ri=kt.controlledMaxHeight,Ht=kt.footerEnabled,jn=kt.footerRef,$i=kt.headerEnabled,On=kt.headerRef,si=kt.registerReady,Kr=kt.resizeSourceRef,xi=j.useMemo(function(){return si("contentHeight")},[si]),Lt=(function(dr,Ki,Ji){var gi=j.useMemo(function(){return Ki("maxHeight")},[Ki]),Yi=j.useState(function(){return eh(dr)||typeof window<"u"?window.innerHeight:0}),Rr=Yi[0],oi=Yi[1],Gt=Rr>0,hr=j.useRef(0);return j.useDebugValue(dr?"controlled":"auto"),j.useEffect(function(){Gt&&gi()},[Gt,gi]),Mc(function(){if(dr)return oi(eh(dr)),void(Ji.current="maxheightprop");var pr=function(){hr.current||(hr.current=requestAnimationFrame(function(){oi(window.innerHeight),Ji.current="window",hr.current=0}))};return window.addEventListener("resize",pr),oi(window.innerHeight),Ji.current="window",gi(),function(){window.removeEventListener("resize",pr),cancelAnimationFrame(hr.current)}},[dr,gi,Ji]),Rr})(ri,si,Kr),sn=py(On,{label:"headerHeight",enabled:$i,resizeSourceRef:Kr}),Ri=py(At,{label:"contentHeight",enabled:!0,resizeSourceRef:Kr}),ji=py(jn,{label:"footerHeight",enabled:Ht,resizeSourceRef:Kr}),Ni=Math.min(Lt-sn-ji,Ri)+sn+ji;j.useDebugValue("minHeight: "+Ni);var Oo=Ri>0;return j.useEffect(function(){Oo&&xi()},[Oo,xi]),{maxHeight:Lt,minHeight:Ni,headerHeight:sn,footerHeight:ji}})({contentRef:oe.contentRef,controlledMaxHeight:oe.controlledMaxHeight,footerEnabled:oe.footerEnabled,footerRef:oe.footerRef,headerEnabled:oe.headerEnabled,headerRef:oe.headerRef,registerReady:oe.registerReady,resizeSourceRef:oe.resizeSourceRef}),We=Ye.maxHeight,at=Ye.minHeight,rt=Ye.headerHeight,ke=Ye.footerHeight,je=(function(kt,At){var ri=[].concat(kt).map(eh).reduce(function(On,si){return On.add(ic(si,0,At)),On},new Set),Ht=Array.from(ri),jn=Math.min.apply(Math,Ht);if(Number.isNaN(jn))throw new TypeError("minSnap is NaN");var $i=Math.max.apply(Math,Ht);if(Number.isNaN($i))throw new TypeError("maxSnap is NaN");return{snapPoints:Ht,minSnap:jn,maxSnap:$i}})(St?Te({height:Se.current,footerHeight:ke,headerHeight:rt,minHeight:at,maxHeight:We}):[0],We),Sn=je.snapPoints,Gi=je.minSnap,rn=je.maxSnap;return j.useDebugValue("minSnap: "+Gi+", maxSnap:"+rn),{minSnap:Gi,maxSnap:rn,findSnap:function(kt){var At=eh(typeof kt=="function"?kt({footerHeight:ke,headerHeight:rt,height:Se.current,minHeight:at,maxHeight:We,snapPoints:Sn,lastSnap:$e.current}):kt);return Sn.reduce(function(ri,Ht){return Math.abs(Ht-At)<Math.abs(ri-At)?Ht:ri},Gi)},maxHeight:We}})({contentRef:jt,controlledMaxHeight:T,footerEnabled:!!a,footerRef:Cn,getSnapPoints:L,headerEnabled:l!==!1,headerRef:xe,heightRef:_n,lastSnapRef:h,ready:ve,registerReady:ee,resizeSourceRef:Ln}),ni=mi.minSnap,ii=mi.maxSnap,fr=mi.maxHeight,Hi=mi.findSnap,ct=j.useRef(fr),Tn=j.useRef(ni),ze=j.useRef(ii),Ct=j.useRef(Hi),Yt=j.useRef(0);Mc(function(){ct.current=fr,ze.current=ii,Tn.current=ni,Ct.current=Hi,Yt.current=Hi(R)},[Hi,R,fr,ii,ni]);var me=j.useCallback(function(oe){var Te=oe.onRest,Se=oe.config,$e=(Se=Se===void 0?{}:Se).velocity,St=$e===void 0?1:$e,Ye=Eh(Se,X8),We=Eh(oe,Z8);return new Promise(function(at){return we(Qn({},We,{config:Qn({velocity:St},Ye,{mass:1,tension:eG,friction:Math.max(th,th+(th-th*St))}),onRest:function(){var rt=[].slice.call(arguments);at.apply(void 0,rt),Te==null||Te.apply(void 0,rt)}}))})},[we]),ft=Dz(W8,{devTools:!1,actions:{onOpenCancel:j.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"OPEN"})},[]),onSnapCancel:j.useCallback(function(oe){return Ie.current==null?void 0:Ie.current({type:"SNAP",source:oe.snapSource})},[]),onCloseCancel:j.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"CLOSE"})},[]),onResizeCancel:j.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"RESIZE",source:Ln.current})},[]),onOpenEnd:j.useCallback(function(){return De.current==null?void 0:De.current({type:"OPEN"})},[]),onSnapEnd:j.useCallback(function(oe,Te){return De.current==null?void 0:De.current({type:"SNAP",source:oe.snapSource})},[]),onResizeEnd:j.useCallback(function(){return De.current==null?void 0:De.current({type:"RESIZE",source:Ln.current})},[])},context:{initialState:d},services:{onSnapStart:j.useCallback(function(oe,Te){try{return Promise.resolve(he.current==null?void 0:he.current({type:"SNAP",source:Te.payload.source||"custom"}))}catch(Se){return Promise.reject(Se)}},[]),onOpenStart:j.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"OPEN"}))}catch(oe){return Promise.reject(oe)}},[]),onCloseStart:j.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"CLOSE"}))}catch(oe){return Promise.reject(oe)}},[]),onResizeStart:j.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"RESIZE",source:Ln.current}))}catch(oe){return Promise.reject(oe)}},[]),onSnapEnd:j.useCallback(function(oe,Te){try{return Promise.resolve(De.current==null?void 0:De.current({type:"SNAP",source:oe.snapSource}))}catch(Se){return Promise.reject(Se)}},[]),onOpenEnd:j.useCallback(function(){try{return Promise.resolve(De.current==null?void 0:De.current({type:"OPEN"}))}catch(oe){return Promise.reject(oe)}},[]),onCloseEnd:j.useCallback(function(){try{return Promise.resolve(De.current==null?void 0:De.current({type:"CLOSE"}))}catch(oe){return Promise.reject(oe)}},[]),onResizeEnd:j.useCallback(function(){try{return Promise.resolve(De.current==null?void 0:De.current({type:"RESIZE",source:Ln.current}))}catch(oe){return Promise.reject(oe)}},[]),renderVisuallyHidden:j.useCallback(function(oe,Te){try{return Promise.resolve(me({y:Yt.current,ready:0,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){})}catch(Se){return Promise.reject(Se)}},[me]),activate:j.useCallback(function(oe,Te){try{return ce.current=!0,Promise.resolve(Promise.all([xn.current.activate(),Ii.current.activate(),zi.current.activate()])).then(function(){})}catch(Se){return Promise.reject(Se)}},[zi,Ii,xn]),deactivate:j.useCallback(function(){try{return xn.current.deactivate(),Ii.current.deactivate(),zi.current.deactivate(),ce.current=!1,Promise.resolve()}catch(oe){return Promise.reject(oe)}},[zi,Ii,xn]),openImmediately:j.useCallback(function(){try{return _n.current=Yt.current,Promise.resolve(me({y:Yt.current,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){})}catch(oe){return Promise.reject(oe)}},[me]),openSmoothly:j.useCallback(function(){try{return Promise.resolve(me({y:0,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:!0})).then(function(){return _n.current=Yt.current,Promise.resolve(me({y:Yt.current,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Yt.current,immediate:En.current})).then(function(){})})}catch(oe){return Promise.reject(oe)}},[me,En]),snapSmoothly:j.useCallback(function(oe,Te){try{var Se=Ct.current(oe.y);return _n.current=Se,h.current=Se,Promise.resolve(me({y:Se,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:En.current,config:{velocity:oe.velocity}})).then(function(){})}catch($e){return Promise.reject($e)}},[me,h,En]),resizeSmoothly:j.useCallback(function(){try{var oe=Ct.current(_n.current);return _n.current=oe,h.current=oe,Promise.resolve(me({y:oe,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:Ln.current!=="element"||En.current})).then(function(){})}catch(Te){return Promise.reject(Te)}},[me,h,En]),closeSmoothly:j.useCallback(function(oe,Te){try{return me({minSnap:_n.current,immediate:!0}),_n.current=0,Promise.resolve(me({y:0,maxHeight:ct.current,maxSnap:ze.current,immediate:En.current})).then(function(){return Promise.resolve(me({ready:0,immediate:!0})).then(function(){})})}catch(Se){return Promise.reject(Se)}},[me,En])}}),nn=ft[0],It=ft[1];j.useEffect(function(){ve&&It(c?"OPEN":"CLOSE")},[c,It,ve]),Mc(function(){(fr||ii||ni)&&It("RESIZE")},[fr,ii,ni,It]),j.useEffect(function(){return function(){xn.current.deactivate(),Ii.current.deactivate(),zi.current.deactivate()}},[zi,Ii,xn]),j.useImperativeHandle(e,function(){return{snapTo:function(oe,Te){var Se=Te===void 0?{}:Te,$e=Se.velocity,St=$e===void 0?1:$e,Ye=Se.source,We=Ye===void 0?"custom":Ye;It("SNAP",{payload:{y:Ct.current(oe),velocity:St,source:We}})},get height(){return _n.current}}},[It]),j.useEffect(function(){var oe=Ue.current,Te=function($e){In.current&&$e.preventDefault()},Se=function($e){oe.scrollTop<0&&(requestAnimationFrame(function(){oe.style.overflow="hidden",oe.scrollTop=0,oe.style.removeProperty("overflow")}),$e.preventDefault())};return O&&(oe.addEventListener("scroll",Te),oe.addEventListener("touchmove",Te),oe.addEventListener("touchstart",Se)),function(){oe.removeEventListener("scroll",Te),oe.removeEventListener("touchmove",Te),oe.removeEventListener("touchstart",Se)}},[O,Ue]);var Rn=t8(function(oe){var Te=oe.args,Se=(Te=Te===void 0?[]:Te)[0],$e=(Se=Se===void 0?{}:Se).closeOnTap,St=$e!==void 0&&$e,Ye=Se.isContentDragging,We=Ye!==void 0&&Ye,at=oe.cancel,rt=oe.direction[1],ke=oe.down,je=oe.first,Sn=oe.last,Gi=oe.memo,rn=Gi===void 0?pe.y.getValue():Gi,kt=oe.tap,At=oe.velocity,ri=-1*oe.movement[1];if(!ce.current)return at(),rn;if(E&&St&&kt)return at(),setTimeout(function(){return E()},0),rn;if(kt)return rn;var Ht=rn+ri,jn=ri*At,$i=Math.max(Tn.current,Math.min(ze.current,Ht+2*jn));if(!ke&&E&&rt>0&&Ht+jn<Tn.current/2)return at(),E(),rn;var On=ke?E||Tn.current!==ze.current?xc(Ht,E?0:Tn.current,ze.current,.55):Ht<Tn.current?xc(Ht,Tn.current,2*ze.current,.55):xc(Ht,Tn.current/2,ze.current,.55):$i;return O&&We?(On>=ze.current&&(On=ze.current),rn===ze.current&&Ue.current.scrollTop>0&&(On=ze.current),In.current=On<ze.current):In.current=!1,je&&It("DRAG"),Sn?(It("SNAP",{payload:{y:On,velocity:At>.05?At:1,source:"dragging"}}),rn):(we({y:On,ready:1,maxHeight:ct.current,maxSnap:ze.current,minSnap:Tn.current,immediate:!0,config:{velocity:At}}),rn)},{filterTaps:!0});if(Number.isNaN(ze.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(Tn.current))throw new TypeError("minSnapRef is NaN!!");var un=(function(oe){var Te,Se=oe.spring,$e=ml([Se.y,Se.maxHeight],function(ke,je){return Math.round(ic(je-ke,0,16))+"px"}),St=ml([Se.y,Se.minSnap,Se.maxSnap],function(ke,je,Sn){return ic(ke,je,Sn)+"px"}),Ye=ml([Se.y,Se.minSnap,Se.maxSnap],function(ke,je,Sn){return ke<je?je-ke+"px":ke>Sn?Sn-ke+"px":"0px"}),We=ml([Se.y,Se.maxSnap],function(ke,je){return ke>=je?Math.ceil(ke-je):0}),at=ml([Se.y,Se.minSnap],function(ke,je){if(!je)return 0;var Sn=Math.max(je/2-45,0);return ic((ke-Sn)*(1/(Math.min(je/2+45,je)-Sn)+0),0,1)}),rt=ml([Se.y,Se.minSnap],function(ke,je){return je?ic(ke/je,0,1):0});return(Te={})["--rsbs-content-opacity"]=at,Te["--rsbs-backdrop-opacity"]=rt,Te["--rsbs-antigap-scale-y"]=We,Te["--rsbs-overlay-translate-y"]=Ye,Te["--rsbs-overlay-rounded"]=$e,Te["--rsbs-overlay-h"]=St,Te})({spring:pe});return wn.createElement(vH.div,Qn({},U,{"data-rsbs-root":!0,"data-rsbs-state":nG.find(nn.matches),"data-rsbs-is-blocking":F,"data-rsbs-is-dismissable":!!E,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!a,className:s,ref:Me,style:Qn({},un,X,{opacity:pe.ready})}),i,F&&wn.createElement("div",Qn({key:"backdrop","data-rsbs-backdrop":!0},Rn({closeOnTap:!0}))),wn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:ut,onKeyDown:function(oe){oe.key==="Escape"&&(oe.stopPropagation(),E&&E())}},l!==!1&&wn.createElement("div",Qn({key:"header","data-rsbs-header":!0,ref:xe},Rn()),l),wn.createElement("div",Qn({key:"scroll","data-rsbs-scroll":!0,ref:Ue},O?Rn({isContentDragging:!0}):{}),wn.createElement("div",{"data-rsbs-content":!0,ref:jt},n)),a&&wn.createElement("div",Qn({key:"footer",ref:Cn,"data-rsbs-footer":!0},Rn()),a)))}),nG=["closed","opening","open","closing","dragging","snapping","resizing"];function iG(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function rG(t){return t.minHeight}var sG=["onSpringStart","onSpringEnd","skipInitialTransition"],qp=j.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,s=t.skipInitialTransition,a=Eh(t,sG),l=j.useState(!1),c=l[0],d=l[1],h=j.useRef(),y=j.useRef(null),E=j.useRef(s&&a.open?"OPEN":"CLOSED");Mc(function(){if(a.open)return cancelAnimationFrame(h.current),d(!0),function(){E.current="CLOSED"}},[a.open]);var T=j.useCallback(function(R){return Promise.resolve(n==null?void 0:n(R)).then(function(){R.type==="OPEN"&&cancelAnimationFrame(h.current)})},[n]),w=j.useCallback(function(R){return Promise.resolve(i==null?void 0:i(R)).then(function(){R.type==="CLOSE"&&(h.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?wn.createElement(Cq,{"data-rsbs-portal":!0},wn.createElement(tG,Qn({},a,{lastSnapRef:y,ref:e,initialState:E.current,onSpringStart:T,onSpringEnd:w}))):null});const oG=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,suggestedOutfits:a,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:h,onToggleFavorite:y,onGenerateVisual:E,generatingVisualFor:T})=>{const w=document.documentElement.classList.contains("dark"),R=j.useRef(null);return j.useEffect(()=>{!s&&a.length>0&&R.current&&R.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[s,a.length]),A.jsx(qp,{open:t,onDismiss:l,className:w?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crateur de Tenues"}),A.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:k})=>k*.65,snapPoints:({minHeight:k,maxHeight:L})=>[k,L*.65,L*.85],children:A.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[A.jsx(FR,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,weatherInfo:c,weatherError:d}),s&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),A.jsx("div",{ref:R,children:a.length>0&&A.jsx(Kh,{outfits:a,allClothingItems:e,allClothingSets:n,favoriteOutfits:h,onToggleFavorite:y,onGenerateVisual:E,generatingVisualFor:T})})]})})},aG=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s,vacationPlan:a,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return A.jsx(qp,{open:t,onDismiss:c,className:d?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Planificateur de Valise"}),A.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.6,snapPoints:({maxHeight:h})=>[h*.55,h*.85],children:A.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[A.jsx(BR,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s}),s&&A.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[A.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),a&&A.jsx(qR,{plan:a,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},lG=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:s})=>{const[a,l]=j.useState(new Set),c=new Set(n.flatMap(w=>w.itemIds)),h=e.filter(w=>!c.has(w.id)).reduce((w,R)=>(w[R.category]||(w[R.category]=[]),w[R.category].push(R),w),{}),y=w=>{l(R=>{const k=new Set(R);return k.has(w)?k.delete(w):k.add(w),k})},E=()=>{if(a.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const w=window.prompt("Donnez un nom  cet ensemble :");w&&s(w,Array.from(a))},T=document.documentElement.classList.contains("dark");return A.jsx(qp,{open:t,onDismiss:i,className:T?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crer un ensemble"}),A.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:a.size>0&&A.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:A.jsxs("button",{onClick:E,disabled:a.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[A.jsx(Vp,{}),"Lier ",a.size," article",a.size>1?"s":""]})}),defaultSnap:({maxHeight:w})=>w*.6,snapPoints:({maxHeight:w})=>[w*.6,w*.85],children:A.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[A.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),A.jsx("div",{className:"space-y-4",children:Object.keys(h).map(w=>h[w].length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:w}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:h[w].map(R=>{const k=a.has(R.id);return A.jsxs("button",{onClick:()=>y(R.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:k?"#D4AF37":"transparent"},children:[k&&A.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:A.jsx(k0,{})}),A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:R.imageSrc,alt:R.analysis,className:"w-full h-full object-cover"})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),A.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:R.analysis})]},R.id)})})]},w))})]})})},uG=(t,e)=>{const n=Ql(jr,"users",t,"items"),i=u0(n);return p0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (items listener):",a)})},cG=async(t,e)=>{try{const n=Ql(jr,"users",t,"items");return(await h0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},_C=async(t,e,n)=>{try{const i=sf(jr,"users",t,"items",e);await PO(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},EC=async(t,e)=>{try{const n=sf(jr,"users",t,"items",e);await d0(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},fG=(t,e)=>{const n=Ql(jr,"users",t,"favoriteOutfits"),i=u0(n);return p0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (favoriteOutfits listener):",a)})},dG=async(t,e)=>{try{const n=Ql(jr,"users",t,"favoriteOutfits");return(await h0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},hG=async(t,e)=>{try{const n=sf(jr,"users",t,"favoriteOutfits",e);await d0(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},pG=(t,e)=>{const n=Ql(jr,"users",t,"sets"),i=u0(n);return p0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (sets listener):",a)})},mG=async(t,e)=>{try{const n=Ql(jr,"users",t,"sets");return(await h0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},gG=async(t,e)=>{try{const n=sf(jr,"users",t,"sets",e);await d0(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},yG=async(t,e,n)=>{try{const i=$4(EU,`users/${t}/clothing/${n}.jpg`);return await H4(i,e,"data_url"),await G4(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},U1=j.createContext(void 0),vG=({children:t,user:e})=>{const[n,i]=j.useState([]),[s,a]=j.useState([]),[l,c]=j.useState([]),[d,h]=j.useState(!1);j.useEffect(()=>{if(e){const F=uG(e.uid,X=>{i(X)}),B=pG(e.uid,X=>{a(X)}),K=fG(e.uid,X=>{c(X)});return()=>{F(),B(),K()}}else i([]),a([]),c([])},[e]);const y=j.useCallback(async F=>{if(!(F.length===0||!e)){h(!0);try{const B=F.map(x=>new Promise((N,V)=>{const M=new FileReader;M.onload=()=>N(M.result),M.onerror=V,M.readAsDataURL(x)})),K=await Promise.all(B),X=K.map(x=>x.split(",")[1]),G=await WB(X),I=Math.min(G.length,F.length);for(let x=0;x<I;x++){const N=G[x];let V="";try{V=await cG(e.uid,N);const M=await yG(e.uid,K[x],V);await _C(e.uid,V,{imageSrc:M})}catch(M){if(console.error(`chec de cration/upload pour ${F[x].name}.`,M),V){console.log(`Tentative de suppression de l'article orphelin: ${V}`);try{await EC(e.uid,V),console.log(`Article orphelin ${V} supprim avec succs.`)}catch(O){console.error(`chec de la suppression de l'article orphelin ${V}:`,O)}}}}}catch(B){console.error("Erreur lors de l'analyse par lot:",B)}finally{h(!1)}}},[e]),E=j.useCallback(async F=>{if(e)try{await EC(e.uid,F)}catch(B){console.error("Erreur suppression item:",B)}},[e]),T=j.useCallback(async F=>{if(e)try{await _C(e.uid,F.id,F)}catch(B){console.error("Erreur mise  jour item:",B)}},[e]),w=j.useCallback(async F=>{if(e)try{const{id:B,...K}=F;await dG(e.uid,K)}catch(B){console.error("Erreur ajout favori:",B)}},[e]),R=j.useCallback(async F=>{if(e)try{await hG(e.uid,F)}catch(B){console.error("Erreur suppression favori:",B)}},[e]),k=j.useCallback(async(F,B)=>{var G;if(!e)return;const K=((G=n.find(I=>I.id===B[0]))==null?void 0:G.imageSrc)||"",X={name:F,itemIds:B,imageSrc:K};try{await mG(e.uid,X)}catch(I){console.error("Erreur cration set:",I)}},[e,n]),L=j.useCallback(async F=>{if(e)try{await gG(e.uid,F)}catch(B){console.error("Erreur suppression set:",B)}},[e]),z={clothingItems:n,clothingSets:s,favoriteOutfits:l,isAnalyzing:d,analyzeClothingItems:y,deleteClothingItem:E,updateClothingItem:T,createClothingSet:k,deleteClothingSet:L,addFavoriteOutfit:w,deleteFavoriteOutfit:R};return A.jsx(U1.Provider,{value:z,children:t})},_G=()=>{const t=j.useContext(U1);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},EG=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:s,onToggleFavorite:a,onGenerateVisual:l,generatingVisualFor:c})=>{const d=document.documentElement.classList.contains("dark");return A.jsx(qp,{open:t,onDismiss:e,className:d?"dark":"",header:A.jsxs("div",{className:"flex items-center justify-between w-full",children:[A.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Tenues Favorites"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.9,snapPoints:({minHeight:h,maxHeight:y})=>[h,y*.9,y*.9],children:A.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:s.length>0?A.jsx(Kh,{outfits:s,allClothingItems:n,allClothingSets:i,favoriteOutfits:s,onToggleFavorite:a,onGenerateVisual:l,generatingVisualFor:c}):A.jsxs("div",{className:"text-center py-12",children:[A.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),A.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},TG=({imageUrl:t,onClose:e})=>(j.useEffect(()=>{const n=i=>{i.key==="Escape"&&e()};return window.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e]),A.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:999999},onClick:e,role:"dialog","aria-modal":"true",children:[A.jsx("div",{className:"absolute inset-0 bg-onyx/80 backdrop-blur-md",style:{zIndex:999999}}),A.jsxs("div",{className:"relative bg-white dark:bg-raisin-black rounded-lg shadow-2xl p-4",style:{zIndex:1e6},onClick:n=>n.stopPropagation(),children:[A.jsx("img",{src:t,alt:"Rendu visuel de la tenue",className:"max-w-[85vw] max-h-[75vh] object-contain rounded-lg"}),A.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Rendu gnr par IA (image factice)."}),A.jsx("button",{onClick:n=>{n.stopPropagation(),e()},onTouchEnd:n=>{n.stopPropagation(),e()},className:"absolute -top-3 -right-3 p-3 bg-red-500 border-4 border-white rounded-full text-white shadow-2xl hover:bg-red-600 active:scale-95 touch-none",style:{zIndex:1000001},"aria-label":"Fermer",children:A.jsx(M0,{})})]})]})),SG=()=>{const[t,e]=j.useState(null),[n,i]=j.useState(null),[s,a]=j.useState([]),[l,c]=j.useState(!1),[d,h]=j.useState(null),[y,E]=j.useState(!1),[T,w]=j.useState(null),[R,k]=j.useState(!1),[L,z]=j.useState("home"),[F,B]=j.useState(!1),[K,X]=j.useState(!1),[G,I]=j.useState(!1),[x,N]=j.useState(!1),[V,M]=j.useState(null),[O,U]=j.useState(null),[be,ve]=j.useState(null),[ee,ce]=j.useState(null),{clothingItems:he,clothingSets:Ie,isAnalyzing:De,analyzeClothingItems:H,deleteClothingItem:te,createClothingSet:fe,updateClothingItem:pe,deleteClothingSet:we,favoriteOutfits:Me,addFavoriteOutfit:Ue,deleteFavoriteOutfit:jt}=_G(),xe=wn.useMemo(()=>(he||[]).sort((ft,nn)=>(nn.isFavorite?1:0)-(ft.isFavorite?1:0)),[he]),Cn=j.useCallback(me=>{const ft=Me.find(nn=>nn.titre===me.titre&&nn.description===me.description);ft?jt(ft.id):Ue(me)},[Me,Ue,jt]),ut=wn.useMemo(()=>Ie||[],[Ie]),_n=wn.useMemo(()=>new Set(ut.flatMap(me=>me.itemIds||[])),[ut]);j.useEffect(()=>{const me=async ft=>{const nn=ft.coords.latitude,It=ft.coords.longitude,Rn=LR.openWeatherApiKey,un=`https://api.openweathermap.org/data/2.5/weather?lat=${nn}&lon=${It}&appid=${Rn}&units=metric&lang=fr`;try{const oe=await fetch(un);if(!oe.ok)throw new Error("Impossible de rcuprer la mto.");const Te=await oe.json(),Se=`${Math.round(Te.main.temp)}C, ${Te.weather[0].description},  ${Te.name}`;M(Se),U(null)}catch{U("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(me,()=>U("Activez la golocalisation pour la mto.")):U("Golocalisation non supporte.")},[]);const Ln=j.useCallback(async(me,ft)=>{if(xe.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const nn=V?`Mto actuelle : ${V}. Occasion : ${me}`:`Occasion : ${me}`;try{const It=await QB(xe,ut,nn,ft);a(It)}catch(It){i(It instanceof Error?It.message:"Erreur inconnue")}finally{c(!1)}},[xe,ut,V]),In=j.useCallback(async(me,ft)=>{if(xe.length===0){i("Veuillez d'abord ajouter des vtements.");return}E(!0),i(null);try{const nn=await ZB(xe,ut,me,ft);h(nn)}catch(nn){i(nn instanceof Error?nn.message:"Erreur inconnue")}finally{E(!1)}},[xe,ut]),En=j.useCallback(async()=>{if(xe.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}k(!0),i(null);try{const me=await XB(xe,ut);w(me)}catch(me){i(me instanceof Error?me.message:"Erreur inconnue")}finally{k(!1)}},[xe,ut]),xn=j.useCallback(async me=>{ve(me.titre),i(null);try{const ft=me.vetements.map(It=>xe.find(Rn=>Rn.id===It.id||Rn.analysis===It.description)).filter(It=>!!It);if(ft.length===0)throw new Error("Impossible de retrouver les articles originaux pour le rendu.");const nn=await tq(ft,me.description);ce(nn)}catch(ft){i(ft instanceof Error?ft.message:"Erreur inconnue lors du rendu visuel")}finally{ve(null)}},[xe]),zi=j.useCallback(()=>B(!0),[]),Ii=j.useCallback(()=>X(!0),[]),mi=me=>e(me),ni=()=>e(null),ii=me=>{te(me).catch(i),e(null)},fr=me=>{pe(me).catch(i),e(me)},Hi=me=>{const ft=`Focus sur l'article : ${me.analysis}`;Ln(ft,me),e(null),window.innerWidth<768&&B(!0)},ct=j.useCallback((me,ft)=>{fe(me,ft).catch(i)},[fe]),Tn=j.useCallback(me=>{we(me).catch(i)},[we]),ze={hauts:xe.filter(me=>me.category==="Hauts").length,bas:xe.filter(me=>me.category==="Bas").length,chaussures:xe.filter(me=>me.category==="Chaussures").length,accessoires:xe.filter(me=>me.category==="Accessoires").length},Ct=L==="home"?[]:xe.filter(me=>L==="hauts"?me.category==="Hauts":L==="bas"?me.category==="Bas":L==="chaussures"?me.category==="Chaussures":L==="accessoires"?me.category==="Accessoires":!1),Yt=F||K||G||!!t||!!T||!!ee;return A.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&A.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[A.jsx("strong",{className:"font-bold",children:"Erreur: "}),A.jsx("span",{className:"block sm:inline",children:n})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[xe.length>=3&&A.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),A.jsx("button",{onClick:En,disabled:R,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:R?"Analyse...":"Analyser ma garde-robe"})]}),A.jsx("div",{className:"hidden md:block",children:A.jsx(hq,{onAnalyze:H,isAnalyzing:De})}),A.jsx("div",{className:"hidden md:block",children:A.jsx(gq,{clothingItems:xe,clothingSets:ut,onItemClick:mi,onDeleteItem:ii,onCreateSet:ct})}),A.jsxs("div",{className:"md:hidden",children:[L==="home"&&A.jsx(_q,{onAnalyzeWardrobe:En,onScrollToOutfits:zi,onScrollToVacation:Ii,onStartSetCreation:()=>I(!0),onShowFavorites:()=>N(!0),isAnalyzingWardrobe:R,clothingCount:xe.length,favoriteOutfitCount:Me.length}),L!=="home"&&A.jsxs("div",{className:"pb-24",children:[A.jsxs("div",{className:"text-center py-6 px-4",children:[A.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:L}),A.jsxs("p",{className:"text-sm text-gray-500",children:[Ct.length," vtement",Ct.length>1?"s":""]})]}),Ct.length>0?A.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Ct.map(me=>A.jsxs("div",{onClick:()=>mi(me),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[me.isFavorite?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:A.jsx(Lp,{})}):_n.has(me.id)?A.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:A.jsx(Vp,{})}):null,A.jsx("div",{className:"aspect-square",children:A.jsx("img",{src:me.imageSrc,alt:me.analysis,className:"w-full h-full object-cover"})}),A.jsxs("div",{className:"p-3",children:[A.jsx("p",{className:"text-sm font-medium line-clamp-2",children:me.analysis}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:me.color})]})]},me.id))}):A.jsx("div",{className:"text-center py-12 px-4",children:A.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),A.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[A.jsx("div",{id:"outfit-generator",children:A.jsx(FR,{clothingItems:xe,clothingSets:ut,onGenerate:Ln,isGenerating:l,weatherInfo:V,weatherError:O})}),s.length>0&&A.jsx(Kh,{outfits:s,allClothingItems:xe,allClothingSets:ut,favoriteOutfits:Me,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:be}),Me.length>0&&A.jsxs("div",{className:"mt-10",children:[A.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Mes Tenues Favorites"}),A.jsx(Kh,{outfits:Me,allClothingItems:xe,allClothingSets:ut,favoriteOutfits:Me,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:be})]}),A.jsx("div",{id:"vacation-planner",children:A.jsx(BR,{clothingItems:xe,clothingSets:ut,onGeneratePlan:In,isGenerating:y})}),d&&A.jsx(qR,{plan:d,allClothingItems:xe,allClothingSets:ut,onCreateSet:ct})]})]}),t&&A.jsx(yq,{item:t,clothingSets:ut,onClose:ni,onUpdate:fr,onGenerateFrom:Hi,onRemoveSet:Tn,onDelete:ii}),T&&A.jsx(Tq,{analysis:T,onClose:()=>w(null)}),ee&&A.jsx(TG,{imageUrl:ee,onClose:()=>ce(null)}),A.jsx(vq,{onFilesSelected:H,isAnalyzing:De,isOtherModalOpen:Yt}),A.jsx(Eq,{activeTab:L,onTabChange:z,counts:ze}),A.jsx(oG,{open:F,clothingItems:xe,clothingSets:ut,onGenerate:Ln,isGenerating:l,suggestedOutfits:s,onClose:()=>B(!1),weatherInfo:V,weatherError:O,favoriteOutfits:Me,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:be}),A.jsx(aG,{open:K,clothingItems:xe,clothingSets:ut,onGeneratePlan:In,isGenerating:y,vacationPlan:d,onCreateSet:ct,onClose:()=>X(!1)}),A.jsx(lG,{open:G,clothingItems:xe,clothingSets:ut,onClose:()=>I(!1),onCreateSet:(me,ft)=>{ct(me,ft),I(!1)}}),A.jsx(EG,{open:x,onClose:()=>N(!1),allClothingItems:xe,allClothingSets:ut,favoriteOutfits:Me,onToggleFavorite:Cn,onGenerateVisual:xn,generatingVisualFor:be})]})},AG=()=>{const[t,e]=j.useState(null),[n,i]=j.useState("dark");j.useEffect(()=>{const a=ok(cc,l=>{e(l)});return()=>a()},[]),j.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const s=()=>{i(a=>a==="light"?"dark":"light")};return A.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?A.jsxs(A.Fragment,{children:[A.jsx(dq,{theme:n,toggleTheme:s,children:A.jsx(Mb,{user:t})}),A.jsx(vG,{user:t,children:A.jsx(SG,{})})]}):A.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:A.jsx(Mb,{user:t})})})},F1=document.getElementById("root");if(!F1)throw new Error("L'lment root est introuvable dans le DOM");const wG=SD.createRoot(F1);wG.render(A.jsx(wn.StrictMode,{children:A.jsx(AG,{})}));
