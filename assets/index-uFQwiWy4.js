(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Nw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ag={exports:{}},zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function IN(){if(NT)return zu;NT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,a){var u=null;if(a!==void 0&&(u=""+a),s.key!==void 0&&(u=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:i,key:u,ref:s!==void 0?s:null,props:a}}return zu.Fragment=e,zu.jsx=n,zu.jsxs=n,zu}var DT;function RN(){return DT||(DT=1,Ag.exports=IN()),Ag.exports}var b=RN(),bg={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT;function xN(){if(MT)return Oe;MT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function C(q){return q===null||typeof q!="object"?null:(q=T&&q[T]||q["@@iterator"],typeof q=="function"?q:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,U={};function H(q,ee,fe){this.props=q,this.context=ee,this.refs=U,this.updater=fe||D}H.prototype.isReactComponent={},H.prototype.setState=function(q,ee){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ee,"setState")},H.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function F(){}F.prototype=H.prototype;function B(q,ee,fe){this.props=q,this.context=ee,this.refs=U,this.updater=fe||D}var Y=B.prototype=new F;Y.constructor=B,k(Y,H.prototype),Y.isPureReactComponent=!0;var X=Array.isArray;function G(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function x(q,ee,fe){var he=fe.ref;return{$$typeof:t,type:q,key:ee,ref:he!==void 0?he:null,props:fe}}function L(q,ee){return x(q.type,ee,q.props)}function M(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function V(q){var ee={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(fe){return ee[fe]})}var O=/\/+/g;function Ce(q,ee){return typeof q=="object"&&q!==null&&q.key!=null?V(""+q.key):ee.toString(36)}function ve(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(G,G):(q.status="pending",q.then(function(ee){q.status==="pending"&&(q.status="fulfilled",q.value=ee)},function(ee){q.status==="pending"&&(q.status="rejected",q.reason=ee)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function te(q,ee,fe,he,Ae){var Le=typeof q;(Le==="undefined"||Le==="boolean")&&(q=null);var Be=!1;if(q===null)Be=!0;else switch(Le){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(q.$$typeof){case t:case e:Be=!0;break;case y:return Be=q._init,te(Be(q._payload),ee,fe,he,Ae)}}if(Be)return Ae=Ae(q),Be=he===""?"."+Ce(q,0):he,X(Ae)?(fe="",Be!=null&&(fe=Be.replace(O,"$&/")+"/"),te(Ae,ee,fe,"",function(ti){return ti})):Ae!=null&&(M(Ae)&&(Ae=L(Ae,fe+(Ae.key==null||q&&q.key===Ae.key?"":(""+Ae.key).replace(O,"$&/")+"/")+Be)),ee.push(Ae)),1;Be=0;var zt=he===""?".":he+":";if(X(q))for(var At=0;At<q.length;At++)he=q[At],Le=zt+Ce(he,At),Be+=te(he,ee,fe,Le,Ae);else if(At=C(q),typeof At=="function")for(q=At.call(q),At=0;!(he=q.next()).done;)he=he.value,Le=zt+Ce(he,At++),Be+=te(he,ee,fe,Le,Ae);else if(Le==="object"){if(typeof q.then=="function")return te(ve(q),ee,fe,he,Ae);throw ee=String(q),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Be}function ue(q,ee,fe){if(q==null)return q;var he=[],Ae=0;return te(q,he,"","",function(Le){return ee.call(fe,Le,Ae++)}),he}function pe(q){if(q._status===-1){var ee=q._result;ee=ee(),ee.then(function(fe){(q._status===0||q._status===-1)&&(q._status=1,q._result=fe)},function(fe){(q._status===0||q._status===-1)&&(q._status=2,q._result=fe)}),q._status===-1&&(q._status=0,q._result=ee)}if(q._status===1)return q._result.default;throw q._result}var Re=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},ge={map:ue,forEach:function(q,ee,fe){ue(q,function(){ee.apply(this,arguments)},fe)},count:function(q){var ee=0;return ue(q,function(){ee++}),ee},toArray:function(q){return ue(q,function(ee){return ee})||[]},only:function(q){if(!M(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Oe.Activity=E,Oe.Children=ge,Oe.Component=H,Oe.Fragment=n,Oe.Profiler=s,Oe.PureComponent=B,Oe.StrictMode=i,Oe.Suspense=d,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(q){return I.H.useMemoCache(q)}},Oe.cache=function(q){return function(){return q.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(q,ee,fe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var he=k({},q.props),Ae=q.key;if(ee!=null)for(Le in ee.key!==void 0&&(Ae=""+ee.key),ee)!R.call(ee,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&ee.ref===void 0||(he[Le]=ee[Le]);var Le=arguments.length-2;if(Le===1)he.children=fe;else if(1<Le){for(var Be=Array(Le),zt=0;zt<Le;zt++)Be[zt]=arguments[zt+2];he.children=Be}return x(q.type,Ae,he)},Oe.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Oe.createElement=function(q,ee,fe){var he,Ae={},Le=null;if(ee!=null)for(he in ee.key!==void 0&&(Le=""+ee.key),ee)R.call(ee,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ae[he]=ee[he]);var Be=arguments.length-2;if(Be===1)Ae.children=fe;else if(1<Be){for(var zt=Array(Be),At=0;At<Be;At++)zt[At]=arguments[At+2];Ae.children=zt}if(q&&q.defaultProps)for(he in Be=q.defaultProps,Be)Ae[he]===void 0&&(Ae[he]=Be[he]);return x(q,Le,Ae)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(q){return{$$typeof:c,render:q}},Oe.isValidElement=M,Oe.lazy=function(q){return{$$typeof:y,_payload:{_status:-1,_result:q},_init:pe}},Oe.memo=function(q,ee){return{$$typeof:h,type:q,compare:ee===void 0?null:ee}},Oe.startTransition=function(q){var ee=I.T,fe={};I.T=fe;try{var he=q(),Ae=I.S;Ae!==null&&Ae(fe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(G,Re)}catch(Le){Re(Le)}finally{ee!==null&&fe.types!==null&&(ee.types=fe.types),I.T=ee}},Oe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Oe.use=function(q){return I.H.use(q)},Oe.useActionState=function(q,ee,fe){return I.H.useActionState(q,ee,fe)},Oe.useCallback=function(q,ee){return I.H.useCallback(q,ee)},Oe.useContext=function(q){return I.H.useContext(q)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(q,ee){return I.H.useDeferredValue(q,ee)},Oe.useEffect=function(q,ee){return I.H.useEffect(q,ee)},Oe.useEffectEvent=function(q){return I.H.useEffectEvent(q)},Oe.useId=function(){return I.H.useId()},Oe.useImperativeHandle=function(q,ee,fe){return I.H.useImperativeHandle(q,ee,fe)},Oe.useInsertionEffect=function(q,ee){return I.H.useInsertionEffect(q,ee)},Oe.useLayoutEffect=function(q,ee){return I.H.useLayoutEffect(q,ee)},Oe.useMemo=function(q,ee){return I.H.useMemo(q,ee)},Oe.useOptimistic=function(q,ee){return I.H.useOptimistic(q,ee)},Oe.useReducer=function(q,ee,fe){return I.H.useReducer(q,ee,fe)},Oe.useRef=function(q){return I.H.useRef(q)},Oe.useState=function(q){return I.H.useState(q)},Oe.useSyncExternalStore=function(q,ee,fe){return I.H.useSyncExternalStore(q,ee,fe)},Oe.useTransition=function(){return I.H.useTransition()},Oe.version="19.2.0",Oe}var PT;function jy(){return PT||(PT=1,bg.exports=xN()),bg.exports}var J=jy();const _n=Nw(J);var wg={exports:{}},Hu={},Cg={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT;function NN(){return kT||(kT=1,(function(t){function e(te,ue){var pe=te.length;te.push(ue);e:for(;0<pe;){var Re=pe-1>>>1,ge=te[Re];if(0<s(ge,ue))te[Re]=ue,te[pe]=ge,pe=Re;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ue=te[0],pe=te.pop();if(pe!==ue){te[0]=pe;e:for(var Re=0,ge=te.length,q=ge>>>1;Re<q;){var ee=2*(Re+1)-1,fe=te[ee],he=ee+1,Ae=te[he];if(0>s(fe,pe))he<ge&&0>s(Ae,fe)?(te[Re]=Ae,te[he]=pe,Re=he):(te[Re]=fe,te[ee]=pe,Re=ee);else if(he<ge&&0>s(Ae,pe))te[Re]=Ae,te[he]=pe,Re=he;else break e}}return ue}function s(te,ue){var pe=te.sortIndex-ue.sortIndex;return pe!==0?pe:te.id-ue.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var d=[],h=[],y=1,E=null,T=3,C=!1,D=!1,k=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function Y(te){for(var ue=n(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=te)i(h),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(h)}}function X(te){if(k=!1,Y(te),!D)if(n(d)!==null)D=!0,G||(G=!0,V());else{var ue=n(h);ue!==null&&ve(X,ue.startTime-te)}}var G=!1,I=-1,R=5,x=-1;function L(){return U?!0:!(t.unstable_now()-x<R)}function M(){if(U=!1,G){var te=t.unstable_now();x=te;var ue=!0;try{e:{D=!1,k&&(k=!1,F(I),I=-1),C=!0;var pe=T;try{t:{for(Y(te),E=n(d);E!==null&&!(E.expirationTime>te&&L());){var Re=E.callback;if(typeof Re=="function"){E.callback=null,T=E.priorityLevel;var ge=Re(E.expirationTime<=te);if(te=t.unstable_now(),typeof ge=="function"){E.callback=ge,Y(te),ue=!0;break t}E===n(d)&&i(d),Y(te)}else i(d);E=n(d)}if(E!==null)ue=!0;else{var q=n(h);q!==null&&ve(X,q.startTime-te),ue=!1}}break e}finally{E=null,T=pe,C=!1}ue=void 0}}finally{ue?V():G=!1}}}var V;if(typeof B=="function")V=function(){B(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ce=O.port2;O.port1.onmessage=M,V=function(){Ce.postMessage(null)}}else V=function(){H(M,0)};function ve(te,ue){I=H(function(){te(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(te){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var pe=T;T=ue;try{return te()}finally{T=pe}},t.unstable_requestPaint=function(){U=!0},t.unstable_runWithPriority=function(te,ue){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var pe=T;T=te;try{return ue()}finally{T=pe}},t.unstable_scheduleCallback=function(te,ue,pe){var Re=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Re+pe:Re):pe=Re,te){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=pe+ge,te={id:y++,callback:ue,priorityLevel:te,startTime:pe,expirationTime:ge,sortIndex:-1},pe>Re?(te.sortIndex=pe,e(h,te),n(d)===null&&te===n(h)&&(k?(F(I),I=-1):k=!0,ve(X,pe-Re))):(te.sortIndex=ge,e(d,te),D||C||(D=!0,G||(G=!0,V()))),te},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(te){var ue=T;return function(){var pe=T;T=ue;try{return te.apply(this,arguments)}finally{T=pe}}}})(Ig)),Ig}var LT;function DN(){return LT||(LT=1,Cg.exports=NN()),Cg.exports}var Rg={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function MN(){if(VT)return Yn;VT=1;var t=jy();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,h,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:d,containerInfo:h,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yn.createPortal=function(d,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,y)},Yn.flushSync=function(d){var h=u.T,y=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=h,i.p=y,i.d.f()}},Yn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},Yn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Yn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:C}):y==="script"&&i.d.X(d,{crossOrigin:E,integrity:T,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Yn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},Yn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin);i.d.L(d,y,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Yn.preloadModule=function(d,h){if(typeof d=="string")if(h){var y=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},Yn.requestFormReset=function(d){i.d.r(d)},Yn.unstable_batchedUpdates=function(d,h){return d(h)},Yn.useFormState=function(d,h,y){return u.H.useFormState(d,h,y)},Yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Yn.version="19.2.0",Yn}var OT;function Dw(){if(OT)return Rg.exports;OT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rg.exports=MN(),Rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function PN(){if(UT)return Hu;UT=1;var t=DN(),e=jy(),n=Dw();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function u(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var l=r,f=o;;){var v=l.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===l)return d(v),r;if(_===f)return d(v),o;_=_.sibling}throw Error(i(188))}if(l.return!==f.return)l=v,f=_;else{for(var A=!1,N=v.child;N;){if(N===l){A=!0,l=v,f=_;break}if(N===f){A=!0,f=v,l=_;break}N=N.sibling}if(!A){for(N=_.child;N;){if(N===l){A=!0,l=_,f=v;break}if(N===f){A=!0,f=_,l=v;break}N=N.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==f)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:o}function y(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=y(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),B=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function Ce(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case H:return"Profiler";case U:return"StrictMode";case X:return"Suspense";case G:return"SuspenseList";case x:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case D:return"Portal";case B:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case Y:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return o=r.displayName||null,o!==null?o:Ce(r.type)||"Memo";case R:o=r._payload,r=r._init;try{return Ce(r(o))}catch{}}return null}var ve=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Re=[],ge=-1;function q(r){return{current:r}}function ee(r){0>ge||(r.current=Re[ge],Re[ge]=null,ge--)}function fe(r,o){ge++,Re[ge]=r.current,r.current=o}var he=q(null),Ae=q(null),Le=q(null),Be=q(null);function zt(r,o){switch(fe(Le,o),fe(Ae,r),fe(he,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?ZE(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=ZE(o),r=eT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(he),fe(he,r)}function At(){ee(he),ee(Ae),ee(Le)}function ti(r){r.memoizedState!==null&&fe(Be,r);var o=he.current,l=eT(o,r.type);o!==l&&(fe(Ae,r),fe(he,l))}function di(r){Ae.current===r&&(ee(he),ee(Ae)),Be.current===r&&(ee(Be),Uu._currentValue=pe)}var mn,Mn;function Pn(r){if(mn===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);mn=o&&o[1]||"",Mn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mn+r+Mn}var Sn=!1;function An(r,o){if(!r||Sn)return"";Sn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ne){var Z=ne}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(ne){Z=ne}r.call(oe.prototype)}}else{try{throw Error()}catch(ne){Z=ne}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ne){if(ne&&Z&&typeof ne.stack=="string")return[ne.stack,Z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),A=_[0],N=_[1];if(A&&N){var z=A.split(`
`),Q=N.split(`
`);for(v=f=0;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(f===z.length||v===Q.length)for(f=z.length-1,v=Q.length-1;1<=f&&0<=v&&z[f]!==Q[v];)v--;for(;1<=f&&0<=v;f--,v--)if(z[f]!==Q[v]){if(f!==1||v!==1)do if(f--,v--,0>v||z[f]!==Q[v]){var re=`
`+z[f].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=f&&0<=v);break}}}finally{Sn=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Pn(l):""}function Oi(r,o){switch(r.tag){case 26:case 27:case 5:return Pn(r.type);case 16:return Pn("Lazy");case 13:return r.child!==o&&o!==null?Pn("Suspense Fallback"):Pn("Suspense");case 19:return Pn("SuspenseList");case 0:case 15:return An(r.type,!1);case 11:return An(r.type.render,!1);case 1:return An(r.type,!0);case 31:return Pn("Activity");default:return""}}function be(r){try{var o="",l=null;do o+=Oi(r,l),l=r,r=r.return;while(r);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Ut=Object.prototype.hasOwnProperty,Jt=t.unstable_scheduleCallback,gn=t.unstable_cancelCallback,or=t.unstable_shouldYield,Ui=t.unstable_requestPaint,ht=t.unstable_now,Zt=t.unstable_getCurrentPriorityLevel,qe=t.unstable_ImmediatePriority,Ht=t.unstable_UserBlockingPriority,on=t.unstable_NormalPriority,an=t.unstable_LowPriority,Ts=t.unstable_IdlePriority,$l=t.log,Gn=t.unstable_setDisableYieldValue,Ai=null,bn=null;function ae(r){if(typeof $l=="function"&&Gn(r),bn&&typeof bn.setStrictMode=="function")try{bn.setStrictMode(Ai,r)}catch{}}var Se=Math.clz32?Math.clz32:_t,Te=Math.log,Ge=Math.LN2;function _t(r){return r>>>=0,r===0?32:31-(Te(r)/Ge|0)|0}var $e=256,je=262144,ot=4194304;function it(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function De(r,o,l){var f=r.pendingLanes;if(f===0)return 0;var v=0,_=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var N=f&134217727;return N!==0?(f=N&~_,f!==0?v=it(f):(A&=N,A!==0?v=it(A):l||(l=N&~r,l!==0&&(v=it(l))))):(N=f&~_,N!==0?v=it(N):A!==0?v=it(A):l||(l=f&~r,l!==0&&(v=it(l)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,l=o&-o,_>=l||_===32&&(l&4194048)!==0)?o:v}function Ke(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function yn(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fi(){var r=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),r}function en(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function xt(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Et(r,o,l,f,v,_){var A=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var N=r.entanglements,z=r.expirationTimes,Q=r.hiddenUpdates;for(l=A&~l;0<l;){var re=31-Se(l),oe=1<<re;N[re]=0,z[re]=-1;var Z=Q[re];if(Z!==null)for(Q[re]=null,re=0;re<Z.length;re++){var ne=Z[re];ne!==null&&(ne.lane&=-536870913)}l&=~oe}f!==0&&ni(r,f,0),_!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=_&~(A&~o))}function ni(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-Se(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|l&261930}function Ft(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var f=31-Se(l),v=1<<f;v&o|r[f]&o&&(r[f]|=o),l&=~v}}function Kn(r,o){var l=o&-o;return l=(l&42)!==0?1:Bi(l),(l&(r.suspendedLanes|o))!==0?0:l}function Bi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function kn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ii(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:AT(r.type))}function zr(r,o){var l=ue.p;try{return ue.p=r,o()}finally{ue.p=l}}var bi=Math.random().toString(36).slice(2),Nt="__reactFiber$"+bi,tn="__reactProps$"+bi,wi="__reactContainer$"+bi,qi="__reactEvents$"+bi,Ci="__reactListeners$"+bi,Do="__reactHandles$"+bi,ar="__reactResources$"+bi,zi="__reactMarker$"+bi;function Hi(r){delete r[Nt],delete r[tn],delete r[qi],delete r[Ci],delete r[Do]}function hi(r){var o=r[Nt];if(o)return o;for(var l=r.parentNode;l;){if(o=l[wi]||l[Nt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=aT(r);r!==null;){if(l=r[Nt])return l;r=aT(r)}return o}r=l,l=r.parentNode}return null}function Gi(r){if(r=r[Nt]||r[wi]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Sr(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function ri(r){var o=r[ar];return o||(o=r[ar]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Bt(r){r[zi]=!0}var lr=new Set,ur={};function si(r,o){Ar(r,o),Ar(r+"Capture",o)}function Ar(r,o){for(ur[r]=o,r=0;r<o.length;r++)lr.add(o[r])}var bp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jl={},Wl={};function Wc(r){return Ut.call(Wl,r)?!0:Ut.call(jl,r)?!1:bp.test(r)?Wl[r]=!0:(jl[r]=!0,!1)}function Ss(r,o,l){if(Wc(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function As(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function Ki(r,o,l,f){if(f===null)r.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+f)}}function oi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qc(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wp(r,o,l){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(r,o,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function ba(r){if(!r._valueTracker){var o=Qc(r)?"checked":"value";r._valueTracker=wp(r,o,""+r[o])}}function Ql(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return r&&(f=Qc(r)?r.checked?"true":"false":r.value),r=f,r!==l?(o.setValue(r),!0):!1}function wa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Hr=/[\n"\\]/g;function Yt(r){return r.replace(Hr,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function bs(r,o,l,f,v,_,A,N){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),o!=null?A==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+oi(o)):r.value!==""+oi(o)&&(r.value=""+oi(o)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),o!=null?Ca(r,A,oi(o)):l!=null?Ca(r,A,oi(l)):f!=null&&r.removeAttribute("value"),v==null&&_!=null&&(r.defaultChecked=!!_),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.name=""+oi(N):r.removeAttribute("name")}function Mo(r,o,l,f,v,_,A,N){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){ba(r);return}l=l!=null?""+oi(l):"",o=o!=null?""+oi(o):l,N||o===r.value||(r.value=o),r.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=N?r.checked:!!f,r.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A),ba(r)}function Ca(r,o,l){o==="number"&&wa(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function lt(r,o,l,f){if(r=r.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<r.length;l++)v=o.hasOwnProperty("$"+r[l].value),r[l].selected!==v&&(r[l].selected=v),v&&f&&(r[l].defaultSelected=!0)}else{for(l=""+oi(l),o=null,v=0;v<r.length;v++){if(r[v].value===l){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function Po(r,o,l){if(o!=null&&(o=""+oi(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+oi(l):""}function ws(r,o,l,f){if(o==null){if(f!=null){if(l!=null)throw Error(i(92));if(ve(f)){if(1<f.length)throw Error(i(93));f=f[0]}l=f}l==null&&(l=""),o=l}l=oi(o),r.defaultValue=l,f=r.textContent,f===l&&f!==""&&f!==null&&(r.value=f),ba(r)}function Ji(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var Cp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xl(r,o,l){var f=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,l):typeof l!="number"||l===0||Cp.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function Xc(r,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&l[v]!==f&&Xl(r,v,f)}else for(var _ in o)o.hasOwnProperty(_)&&Xl(r,_,o[_])}function Zl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ip=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function br(r){return Rp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function wn(){}var Ia=null;function Ra(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Gr=null,Ii=null;function Zc(r){var o=Gi(r);if(o&&(r=o.stateNode)){var l=r[tn]||null;e:switch(r=o.stateNode,o.type){case"input":if(bs(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Yt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==r&&f.form===r.form){var v=f[tn]||null;if(!v)throw Error(i(90));bs(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<l.length;o++)f=l[o],f.form===r.form&&Ql(f)}break e;case"textarea":Po(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&lt(r,!!l.multiple,o,!1)}}}var eu=!1;function ef(r,o,l){if(eu)return r(o,l);eu=!0;try{var f=r(o);return f}finally{if(eu=!1,(Gr!==null||Ii!==null)&&(Qf(),Gr&&(o=Gr,r=Ii,Ii=Gr=null,Zc(o),r)))for(o=0;o<r.length;o++)Zc(r[o])}}function pi(r,o){var l=r.stateNode;if(l===null)return null;var f=l[tn]||null;if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tu=!1;if(cr)try{var wr={};Object.defineProperty(wr,"passive",{get:function(){tu=!0}}),window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch{tu=!1}var Ri=null,xa=null,Cr=null;function Cs(){if(Cr)return Cr;var r,o=xa,l=o.length,f,v="value"in Ri?Ri.value:Ri.textContent,_=v.length;for(r=0;r<l&&o[r]===v[r];r++);var A=l-r;for(f=1;f<=A&&o[l-f]===v[_-f];f++);return Cr=v.slice(r,1<f?1-f:void 0)}function ko(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Is(){return!0}function Dt(){return!1}function Jn(r){function o(l,f,v,_,A){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(l=r[N],this[N]=l?l(_):_[N]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Is:Dt,this.isPropagationStopped=Dt,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Is)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Is)},persist:function(){},isPersistent:Is}),o}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lo=Jn(Kr),Rs=E({},Kr,{view:0,detail:0}),tf=Jn(Rs),xs,Na,ai,Vo=E({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ai&&(ai&&r.type==="mousemove"?(xs=r.screenX-ai.screenX,Na=r.screenY-ai.screenY):Na=xs=0,ai=r),xs)},movementY:function(r){return"movementY"in r?r.movementY:Na}}),nf=Jn(Vo),Oo=E({},Vo,{dataTransfer:0}),rf=Jn(Oo),nu=E({},Rs,{relatedTarget:0}),Ns=Jn(nu),sf=E({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Da=Jn(sf),xp=E({},Kr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),of=Jn(xp),Uo=E({},Kr,{data:0}),iu=Jn(Uo),af={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lf(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=su[r])?!!o[r]:!1}function Ds(){return lf}var uf=E({},Rs,{key:function(r){if(r.key){var o=af[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ko(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ru[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(r){return r.type==="keypress"?ko(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ko(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),cf=Jn(uf),Jr=E({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ou=Jn(Jr),ff=E({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),df=Jn(ff),hf=E({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ma=Jn(hf),li=E({},Vo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),pf=Jn(li),mf=E({},Kr,{newState:0,oldState:0}),Ms=Jn(mf),m=[9,13,27,32],S=cr&&"CompositionEvent"in window,w=null;cr&&"documentMode"in document&&(w=document.documentMode);var P=cr&&"TextEvent"in window&&!w,j=cr&&(!S||w&&8<w&&11>=w),ie=" ",de=!1;function gt(r,o){switch(r){case"keyup":return m.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ln(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Je=!1;function Cn(r,o){switch(r){case"compositionend":return ln(o);case"keypress":return o.which!==32?null:(de=!0,ie);case"textInput":return r=o.data,r===ie&&de?null:r;default:return null}}function In(r,o){if(Je)return r==="compositionend"||!S&&gt(r,o)?(r=Cs(),Cr=xa=Ri=null,Je=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return j&&o.locale!=="ko"?null:o.data;default:return null}}var Ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mi(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Ps[r.type]:o==="textarea"}function Fo(r,o,l,f){Gr?Ii?Ii.push(f):Ii=[f]:Gr=f,o=rd(o,"onChange"),0<o.length&&(l=new Lo("onChange","change",null,l,f),r.push({event:l,listeners:o}))}var Yr=null,au=null;function e1(r){YE(r,0)}function gf(r){var o=Sr(r);if(Ql(o))return r}function d0(r,o){if(r==="change")return o}var h0=!1;if(cr){var Np;if(cr){var Dp="oninput"in document;if(!Dp){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),Dp=typeof p0.oninput=="function"}Np=Dp}else Np=!1;h0=Np&&(!document.documentMode||9<document.documentMode)}function m0(){Yr&&(Yr.detachEvent("onpropertychange",g0),au=Yr=null)}function g0(r){if(r.propertyName==="value"&&gf(au)){var o=[];Fo(o,au,r,Ra(r)),ef(e1,o)}}function t1(r,o,l){r==="focusin"?(m0(),Yr=o,au=l,Yr.attachEvent("onpropertychange",g0)):r==="focusout"&&m0()}function n1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return gf(au)}function i1(r,o){if(r==="click")return gf(o)}function r1(r,o){if(r==="input"||r==="change")return gf(o)}function s1(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var xi=typeof Object.is=="function"?Object.is:s1;function lu(r,o){if(xi(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!Ut.call(o,v)||!xi(r[v],o[v]))return!1}return!0}function y0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function v0(r,o){var l=y0(r);r=0;for(var f;l;){if(l.nodeType===3){if(f=r+l.textContent.length,r<=o&&f>=o)return{node:l,offset:o-r};r=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=y0(l)}}function _0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?_0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function E0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=wa(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=wa(r.document)}return o}function Mp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var o1=cr&&"documentMode"in document&&11>=document.documentMode,Pa=null,Pp=null,uu=null,kp=!1;function T0(r,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;kp||Pa==null||Pa!==wa(f)||(f=Pa,"selectionStart"in f&&Mp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),uu&&lu(uu,f)||(uu=f,f=rd(Pp,"onSelect"),0<f.length&&(o=new Lo("onSelect","select",null,o,l),r.push({event:o,listeners:f}),o.target=Pa)))}function Bo(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var ka={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionrun:Bo("Transition","TransitionRun"),transitionstart:Bo("Transition","TransitionStart"),transitioncancel:Bo("Transition","TransitionCancel"),transitionend:Bo("Transition","TransitionEnd")},Lp={},S0={};cr&&(S0=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function qo(r){if(Lp[r])return Lp[r];if(!ka[r])return r;var o=ka[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in S0)return Lp[r]=o[l];return r}var A0=qo("animationend"),b0=qo("animationiteration"),w0=qo("animationstart"),a1=qo("transitionrun"),l1=qo("transitionstart"),u1=qo("transitioncancel"),C0=qo("transitionend"),I0=new Map,Vp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vp.push("scrollEnd");function fr(r,o){I0.set(r,o),si(o,[r])}var yf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Yi=[],La=0,Op=0;function vf(){for(var r=La,o=Op=La=0;o<r;){var l=Yi[o];Yi[o++]=null;var f=Yi[o];Yi[o++]=null;var v=Yi[o];Yi[o++]=null;var _=Yi[o];if(Yi[o++]=null,f!==null&&v!==null){var A=f.pending;A===null?v.next=v:(v.next=A.next,A.next=v),f.pending=v}_!==0&&R0(l,v,_)}}function _f(r,o,l,f){Yi[La++]=r,Yi[La++]=o,Yi[La++]=l,Yi[La++]=f,Op|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function Up(r,o,l,f){return _f(r,o,l,f),Ef(r)}function zo(r,o){return _f(r,null,null,o),Ef(r)}function R0(r,o,l){r.lanes|=l;var f=r.alternate;f!==null&&(f.lanes|=l);for(var v=!1,_=r.return;_!==null;)_.childLanes|=l,f=_.alternate,f!==null&&(f.childLanes|=l),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(v=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,v&&o!==null&&(v=31-Se(l),r=_.hiddenUpdates,f=r[v],f===null?r[v]=[o]:f.push(o),o.lane=l|536870912),_):null}function Ef(r){if(50<Du)throw Du=0,Ym=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Va={};function c1(r,o,l,f){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(r,o,l,f){return new c1(r,o,l,f)}function Fp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $r(r,o){var l=r.alternate;return l===null?(l=Ni(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function x0(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Tf(r,o,l,f,v,_){var A=0;if(f=r,typeof r=="function")Fp(r)&&(A=1);else if(typeof r=="string")A=mN(r,l,he.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case x:return r=Ni(31,l,o,v),r.elementType=x,r.lanes=_,r;case k:return Ho(l.children,v,_,o);case U:A=8,v|=24;break;case H:return r=Ni(12,l,o,v|2),r.elementType=H,r.lanes=_,r;case X:return r=Ni(13,l,o,v),r.elementType=X,r.lanes=_,r;case G:return r=Ni(19,l,o,v),r.elementType=G,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:A=10;break e;case F:A=9;break e;case Y:A=11;break e;case I:A=14;break e;case R:A=16,f=null;break e}A=29,l=Error(i(130,r===null?"null":typeof r,"")),f=null}return o=Ni(A,l,o,v),o.elementType=r,o.type=f,o.lanes=_,o}function Ho(r,o,l,f){return r=Ni(7,r,f,o),r.lanes=l,r}function Bp(r,o,l){return r=Ni(6,r,null,o),r.lanes=l,r}function N0(r){var o=Ni(18,null,null,0);return o.stateNode=r,o}function qp(r,o,l){return o=Ni(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var D0=new WeakMap;function $i(r,o){if(typeof r=="object"&&r!==null){var l=D0.get(r);return l!==void 0?l:(o={value:r,source:o,stack:be(o)},D0.set(r,o),o)}return{value:r,source:o,stack:be(o)}}var Oa=[],Ua=0,Sf=null,cu=0,ji=[],Wi=0,ks=null,Ir=1,Rr="";function jr(r,o){Oa[Ua++]=cu,Oa[Ua++]=Sf,Sf=r,cu=o}function M0(r,o,l){ji[Wi++]=Ir,ji[Wi++]=Rr,ji[Wi++]=ks,ks=r;var f=Ir;r=Rr;var v=32-Se(f)-1;f&=~(1<<v),l+=1;var _=32-Se(o)+v;if(30<_){var A=v-v%5;_=(f&(1<<A)-1).toString(32),f>>=A,v-=A,Ir=1<<32-Se(o)+v|l<<v|f,Rr=_+r}else Ir=1<<_|l<<v|f,Rr=r}function zp(r){r.return!==null&&(jr(r,1),M0(r,1,0))}function Hp(r){for(;r===Sf;)Sf=Oa[--Ua],Oa[Ua]=null,cu=Oa[--Ua],Oa[Ua]=null;for(;r===ks;)ks=ji[--Wi],ji[Wi]=null,Rr=ji[--Wi],ji[Wi]=null,Ir=ji[--Wi],ji[Wi]=null}function P0(r,o){ji[Wi++]=Ir,ji[Wi++]=Rr,ji[Wi++]=ks,Ir=o.id,Rr=o.overflow,ks=r}var Ln=null,Mt=null,rt=!1,Ls=null,Qi=!1,Gp=Error(i(519));function Vs(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fu($i(o,r)),Gp}function k0(r){var o=r.stateNode,l=r.type,f=r.memoizedProps;switch(o[Nt]=r,o[tn]=f,l){case"dialog":Qe("cancel",o),Qe("close",o);break;case"iframe":case"object":case"embed":Qe("load",o);break;case"video":case"audio":for(l=0;l<Pu.length;l++)Qe(Pu[l],o);break;case"source":Qe("error",o);break;case"img":case"image":case"link":Qe("error",o),Qe("load",o);break;case"details":Qe("toggle",o);break;case"input":Qe("invalid",o),Mo(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Qe("invalid",o);break;case"textarea":Qe("invalid",o),ws(o,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||f.suppressHydrationWarning===!0||QE(o.textContent,l)?(f.popover!=null&&(Qe("beforetoggle",o),Qe("toggle",o)),f.onScroll!=null&&Qe("scroll",o),f.onScrollEnd!=null&&Qe("scrollend",o),f.onClick!=null&&(o.onclick=wn),o=!0):o=!1,o||Vs(r,!0)}function L0(r){for(Ln=r.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:Qi=!1;return;case 27:case 3:Qi=!0;return;default:Ln=Ln.return}}function Fa(r){if(r!==Ln)return!1;if(!rt)return L0(r),rt=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||lg(r.type,r.memoizedProps)),l=!l),l&&Mt&&Vs(r),L0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Mt=oT(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Mt=oT(r)}else o===27?(o=Mt,Ws(r.type)?(r=hg,hg=null,Mt=r):Mt=o):Mt=Ln?Zi(r.stateNode.nextSibling):null;return!0}function Go(){Mt=Ln=null,rt=!1}function Kp(){var r=Ls;return r!==null&&(_i===null?_i=r:_i.push.apply(_i,r),Ls=null),r}function fu(r){Ls===null?Ls=[r]:Ls.push(r)}var Jp=q(null),Ko=null,Wr=null;function Os(r,o,l){fe(Jp,o._currentValue),o._currentValue=l}function Qr(r){r._currentValue=Jp.current,ee(Jp)}function Yp(r,o,l){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===l)break;r=r.return}}function $p(r,o,l,f){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){var A=v.child;_=_.firstContext;e:for(;_!==null;){var N=_;_=v;for(var z=0;z<o.length;z++)if(N.context===o[z]){_.lanes|=l,N=_.alternate,N!==null&&(N.lanes|=l),Yp(_.return,l,r),f||(A=null);break e}_=N.next}}else if(v.tag===18){if(A=v.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),Yp(A,l,r),A=null}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===r){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}}function Ba(r,o,l,f){r=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var A=v.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var N=v.type;xi(v.pendingProps.value,A.value)||(r!==null?r.push(N):r=[N])}}else if(v===Be.current){if(A=v.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Uu):r=[Uu])}v=v.return}r!==null&&$p(o,r,l,f),o.flags|=262144}function Af(r){for(r=r.firstContext;r!==null;){if(!xi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Jo(r){Ko=r,Wr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Vn(r){return V0(Ko,r)}function bf(r,o){return Ko===null&&Jo(r),V0(r,o)}function V0(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Wr===null){if(r===null)throw Error(i(308));Wr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Wr=Wr.next=o;return l}var f1=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},d1=t.unstable_scheduleCallback,h1=t.unstable_NormalPriority,un={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jp(){return{controller:new f1,data:new Map,refCount:0}}function du(r){r.refCount--,r.refCount===0&&d1(h1,function(){r.controller.abort()})}var hu=null,Wp=0,qa=0,za=null;function p1(r,o){if(hu===null){var l=hu=[];Wp=0,qa=Zm(),za={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Wp++,o.then(O0,O0),o}function O0(){if(--Wp===0&&hu!==null){za!==null&&(za.status="fulfilled");var r=hu;hu=null,qa=0,za=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function m1(r,o){var l=[],f={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<l.length;v++)(0,l[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),f}var U0=te.S;te.S=function(r,o){TE=ht(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&p1(r,o),U0!==null&&U0(r,o)};var Yo=q(null);function Qp(){var r=Yo.current;return r!==null?r:Rt.pooledCache}function wf(r,o){o===null?fe(Yo,Yo.current):fe(Yo,o.pool)}function F0(){var r=Qp();return r===null?null:{parent:un._currentValue,pool:r}}var Ha=Error(i(460)),Xp=Error(i(474)),Cf=Error(i(542)),If={then:function(){}};function B0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function q0(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(wn,wn),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,H0(r),r;default:if(typeof o.status=="string")o.then(wn,wn);else{if(r=Rt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,H0(r),r}throw jo=o,Ha}}function $o(r){try{var o=r._init;return o(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(jo=l,Ha):l}}var jo=null;function z0(){if(jo===null)throw Error(i(459));var r=jo;return jo=null,r}function H0(r){if(r===Ha||r===Cf)throw Error(i(483))}var Ga=null,pu=0;function Rf(r){var o=pu;return pu+=1,Ga===null&&(Ga=[]),q0(Ga,r,o)}function mu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function xf(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function G0(r){function o($,K){if(r){var W=$.deletions;W===null?($.deletions=[K],$.flags|=16):W.push(K)}}function l($,K){if(!r)return null;for(;K!==null;)o($,K),K=K.sibling;return null}function f($){for(var K=new Map;$!==null;)$.key!==null?K.set($.key,$):K.set($.index,$),$=$.sibling;return K}function v($,K){return $=$r($,K),$.index=0,$.sibling=null,$}function _($,K,W){return $.index=W,r?(W=$.alternate,W!==null?(W=W.index,W<K?($.flags|=67108866,K):W):($.flags|=67108866,K)):($.flags|=1048576,K)}function A($){return r&&$.alternate===null&&($.flags|=67108866),$}function N($,K,W,se){return K===null||K.tag!==6?(K=Bp(W,$.mode,se),K.return=$,K):(K=v(K,W),K.return=$,K)}function z($,K,W,se){var xe=W.type;return xe===k?re($,K,W.props.children,se,W.key):K!==null&&(K.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&$o(xe)===K.type)?(K=v(K,W.props),mu(K,W),K.return=$,K):(K=Tf(W.type,W.key,W.props,null,$.mode,se),mu(K,W),K.return=$,K)}function Q($,K,W,se){return K===null||K.tag!==4||K.stateNode.containerInfo!==W.containerInfo||K.stateNode.implementation!==W.implementation?(K=qp(W,$.mode,se),K.return=$,K):(K=v(K,W.children||[]),K.return=$,K)}function re($,K,W,se,xe){return K===null||K.tag!==7?(K=Ho(W,$.mode,se,xe),K.return=$,K):(K=v(K,W),K.return=$,K)}function oe($,K,W){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Bp(""+K,$.mode,W),K.return=$,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return W=Tf(K.type,K.key,K.props,null,$.mode,W),mu(W,K),W.return=$,W;case D:return K=qp(K,$.mode,W),K.return=$,K;case R:return K=$o(K),oe($,K,W)}if(ve(K)||V(K))return K=Ho(K,$.mode,W,null),K.return=$,K;if(typeof K.then=="function")return oe($,Rf(K),W);if(K.$$typeof===B)return oe($,bf($,K),W);xf($,K)}return null}function Z($,K,W,se){var xe=K!==null?K.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return xe!==null?null:N($,K,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case C:return W.key===xe?z($,K,W,se):null;case D:return W.key===xe?Q($,K,W,se):null;case R:return W=$o(W),Z($,K,W,se)}if(ve(W)||V(W))return xe!==null?null:re($,K,W,se,null);if(typeof W.then=="function")return Z($,K,Rf(W),se);if(W.$$typeof===B)return Z($,K,bf($,W),se);xf($,W)}return null}function ne($,K,W,se,xe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return $=$.get(W)||null,N(K,$,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return $=$.get(se.key===null?W:se.key)||null,z(K,$,se,xe);case D:return $=$.get(se.key===null?W:se.key)||null,Q(K,$,se,xe);case R:return se=$o(se),ne($,K,W,se,xe)}if(ve(se)||V(se))return $=$.get(W)||null,re(K,$,se,xe,null);if(typeof se.then=="function")return ne($,K,W,Rf(se),xe);if(se.$$typeof===B)return ne($,K,W,bf(K,se),xe);xf(K,se)}return null}function Ee($,K,W,se){for(var xe=null,ut=null,we=K,He=K=0,et=null;we!==null&&He<W.length;He++){we.index>He?(et=we,we=null):et=we.sibling;var ct=Z($,we,W[He],se);if(ct===null){we===null&&(we=et);break}r&&we&&ct.alternate===null&&o($,we),K=_(ct,K,He),ut===null?xe=ct:ut.sibling=ct,ut=ct,we=et}if(He===W.length)return l($,we),rt&&jr($,He),xe;if(we===null){for(;He<W.length;He++)we=oe($,W[He],se),we!==null&&(K=_(we,K,He),ut===null?xe=we:ut.sibling=we,ut=we);return rt&&jr($,He),xe}for(we=f(we);He<W.length;He++)et=ne(we,$,He,W[He],se),et!==null&&(r&&et.alternate!==null&&we.delete(et.key===null?He:et.key),K=_(et,K,He),ut===null?xe=et:ut.sibling=et,ut=et);return r&&we.forEach(function(to){return o($,to)}),rt&&jr($,He),xe}function Me($,K,W,se){if(W==null)throw Error(i(151));for(var xe=null,ut=null,we=K,He=K=0,et=null,ct=W.next();we!==null&&!ct.done;He++,ct=W.next()){we.index>He?(et=we,we=null):et=we.sibling;var to=Z($,we,ct.value,se);if(to===null){we===null&&(we=et);break}r&&we&&to.alternate===null&&o($,we),K=_(to,K,He),ut===null?xe=to:ut.sibling=to,ut=to,we=et}if(ct.done)return l($,we),rt&&jr($,He),xe;if(we===null){for(;!ct.done;He++,ct=W.next())ct=oe($,ct.value,se),ct!==null&&(K=_(ct,K,He),ut===null?xe=ct:ut.sibling=ct,ut=ct);return rt&&jr($,He),xe}for(we=f(we);!ct.done;He++,ct=W.next())ct=ne(we,$,He,ct.value,se),ct!==null&&(r&&ct.alternate!==null&&we.delete(ct.key===null?He:ct.key),K=_(ct,K,He),ut===null?xe=ct:ut.sibling=ct,ut=ct);return r&&we.forEach(function(CN){return o($,CN)}),rt&&jr($,He),xe}function Ct($,K,W,se){if(typeof W=="object"&&W!==null&&W.type===k&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case C:e:{for(var xe=W.key;K!==null;){if(K.key===xe){if(xe=W.type,xe===k){if(K.tag===7){l($,K.sibling),se=v(K,W.props.children),se.return=$,$=se;break e}}else if(K.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&$o(xe)===K.type){l($,K.sibling),se=v(K,W.props),mu(se,W),se.return=$,$=se;break e}l($,K);break}else o($,K);K=K.sibling}W.type===k?(se=Ho(W.props.children,$.mode,se,W.key),se.return=$,$=se):(se=Tf(W.type,W.key,W.props,null,$.mode,se),mu(se,W),se.return=$,$=se)}return A($);case D:e:{for(xe=W.key;K!==null;){if(K.key===xe)if(K.tag===4&&K.stateNode.containerInfo===W.containerInfo&&K.stateNode.implementation===W.implementation){l($,K.sibling),se=v(K,W.children||[]),se.return=$,$=se;break e}else{l($,K);break}else o($,K);K=K.sibling}se=qp(W,$.mode,se),se.return=$,$=se}return A($);case R:return W=$o(W),Ct($,K,W,se)}if(ve(W))return Ee($,K,W,se);if(V(W)){if(xe=V(W),typeof xe!="function")throw Error(i(150));return W=xe.call(W),Me($,K,W,se)}if(typeof W.then=="function")return Ct($,K,Rf(W),se);if(W.$$typeof===B)return Ct($,K,bf($,W),se);xf($,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,K!==null&&K.tag===6?(l($,K.sibling),se=v(K,W),se.return=$,$=se):(l($,K),se=Bp(W,$.mode,se),se.return=$,$=se),A($)):l($,K)}return function($,K,W,se){try{pu=0;var xe=Ct($,K,W,se);return Ga=null,xe}catch(we){if(we===Ha||we===Cf)throw we;var ut=Ni(29,we,null,$.mode);return ut.lanes=se,ut.return=$,ut}finally{}}}var Wo=G0(!0),K0=G0(!1),Us=!1;function Zp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function em(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Bs(r,o,l){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(pt&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=Ef(r),R0(r,null,l),o}return _f(r,f,o,l),Ef(r)}function gu(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,l|=f,o.lanes=l,Ft(r,l)}}function tm(r,o){var l=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?v=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?v=_=o:_=_.next=o}else v=_=o;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var nm=!1;function yu(){if(nm){var r=za;if(r!==null)throw r}}function vu(r,o,l,f){nm=!1;var v=r.updateQueue;Us=!1;var _=v.firstBaseUpdate,A=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var z=N,Q=z.next;z.next=null,A===null?_=Q:A.next=Q,A=z;var re=r.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==A&&(N===null?re.firstBaseUpdate=Q:N.next=Q,re.lastBaseUpdate=z))}if(_!==null){var oe=v.baseState;A=0,re=Q=z=null,N=_;do{var Z=N.lane&-536870913,ne=Z!==N.lane;if(ne?(Ze&Z)===Z:(f&Z)===Z){Z!==0&&Z===qa&&(nm=!0),re!==null&&(re=re.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ee=r,Me=N;Z=o;var Ct=l;switch(Me.tag){case 1:if(Ee=Me.payload,typeof Ee=="function"){oe=Ee.call(Ct,oe,Z);break e}oe=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Me.payload,Z=typeof Ee=="function"?Ee.call(Ct,oe,Z):Ee,Z==null)break e;oe=E({},oe,Z);break e;case 2:Us=!0}}Z=N.callback,Z!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[Z]:ne.push(Z))}else ne={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(Q=re=ne,z=oe):re=re.next=ne,A|=Z;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;ne=N,N=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);re===null&&(z=oe),v.baseState=z,v.firstBaseUpdate=Q,v.lastBaseUpdate=re,_===null&&(v.shared.lanes=0),Ks|=A,r.lanes=A,r.memoizedState=oe}}function J0(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function Y0(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)J0(l[r],o)}var Ka=q(null),Nf=q(0);function $0(r,o){r=os,fe(Nf,r),fe(Ka,o),os=r|o.baseLanes}function im(){fe(Nf,os),fe(Ka,Ka.current)}function rm(){os=Nf.current,ee(Ka),ee(Nf)}var Di=q(null),Xi=null;function qs(r){var o=r.alternate;fe(nn,nn.current&1),fe(Di,r),Xi===null&&(o===null||Ka.current!==null||o.memoizedState!==null)&&(Xi=r)}function sm(r){fe(nn,nn.current),fe(Di,r),Xi===null&&(Xi=r)}function j0(r){r.tag===22?(fe(nn,nn.current),fe(Di,r),Xi===null&&(Xi=r)):zs()}function zs(){fe(nn,nn.current),fe(Di,Di.current)}function Mi(r){ee(Di),Xi===r&&(Xi=null),ee(nn)}var nn=q(0);function Df(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||fg(l)||dg(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Xr=0,ze=null,bt=null,cn=null,Mf=!1,Ja=!1,Qo=!1,Pf=0,_u=0,Ya=null,g1=0;function $t(){throw Error(i(321))}function om(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!xi(r[l],o[l]))return!1;return!0}function am(r,o,l,f,v,_){return Xr=_,ze=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,te.H=r===null||r.memoizedState===null?M_:Sm,Qo=!1,_=l(f,v),Qo=!1,Ja&&(_=Q0(o,l,f,v)),W0(r),_}function W0(r){te.H=Su;var o=bt!==null&&bt.next!==null;if(Xr=0,cn=bt=ze=null,Mf=!1,_u=0,Ya=null,o)throw Error(i(300));r===null||fn||(r=r.dependencies,r!==null&&Af(r)&&(fn=!0))}function Q0(r,o,l,f){ze=r;var v=0;do{if(Ja&&(Ya=null),_u=0,Ja=!1,25<=v)throw Error(i(301));if(v+=1,cn=bt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}te.H=P_,_=o(l,f)}while(Ja);return _}function y1(){var r=te.H,o=r.useState()[0];return o=typeof o.then=="function"?Eu(o):o,r=r.useState()[0],(bt!==null?bt.memoizedState:null)!==r&&(ze.flags|=1024),o}function lm(){var r=Pf!==0;return Pf=0,r}function um(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function cm(r){if(Mf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Mf=!1}Xr=0,cn=bt=ze=null,Ja=!1,_u=Pf=0,Ya=null}function ui(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?ze.memoizedState=cn=r:cn=cn.next=r,cn}function rn(){if(bt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=bt.next;var o=cn===null?ze.memoizedState:cn.next;if(o!==null)cn=o,bt=r;else{if(r===null)throw ze.alternate===null?Error(i(467)):Error(i(310));bt=r,r={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},cn===null?ze.memoizedState=cn=r:cn=cn.next=r}return cn}function kf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eu(r){var o=_u;return _u+=1,Ya===null&&(Ya=[]),r=q0(Ya,r,o),o=ze,(cn===null?o.memoizedState:cn.next)===null&&(o=o.alternate,te.H=o===null||o.memoizedState===null?M_:Sm),r}function Lf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Eu(r);if(r.$$typeof===B)return Vn(r)}throw Error(i(438,String(r)))}function fm(r){var o=null,l=ze.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var f=ze.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=kf(),ze.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),f=0;f<r;f++)l[f]=L;return o.index++,l}function Zr(r,o){return typeof o=="function"?o(r):o}function Vf(r){var o=rn();return dm(o,bt,r)}function dm(r,o,l){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=l;var v=r.baseQueue,_=f.pending;if(_!==null){if(v!==null){var A=v.next;v.next=_.next,_.next=A}o.baseQueue=v=_,f.pending=null}if(_=r.baseState,v===null)r.memoizedState=_;else{o=v.next;var N=A=null,z=null,Q=o,re=!1;do{var oe=Q.lane&-536870913;if(oe!==Q.lane?(Ze&oe)===oe:(Xr&oe)===oe){var Z=Q.revertLane;if(Z===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),oe===qa&&(re=!0);else if((Xr&Z)===Z){Q=Q.next,Z===qa&&(re=!0);continue}else oe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(N=z=oe,A=_):z=z.next=oe,ze.lanes|=Z,Ks|=Z;oe=Q.action,Qo&&l(_,oe),_=Q.hasEagerState?Q.eagerState:l(_,oe)}else Z={lane:oe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(N=z=Z,A=_):z=z.next=Z,ze.lanes|=oe,Ks|=oe;Q=Q.next}while(Q!==null&&Q!==o);if(z===null?A=_:z.next=N,!xi(_,r.memoizedState)&&(fn=!0,re&&(l=za,l!==null)))throw l;r.memoizedState=_,r.baseState=A,r.baseQueue=z,f.lastRenderedState=_}return v===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function hm(r){var o=rn(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var f=l.dispatch,v=l.pending,_=o.memoizedState;if(v!==null){l.pending=null;var A=v=v.next;do _=r(_,A.action),A=A.next;while(A!==v);xi(_,o.memoizedState)||(fn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),l.lastRenderedState=_}return[_,f]}function X0(r,o,l){var f=ze,v=rn(),_=rt;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=o();var A=!xi((bt||v).memoizedState,l);if(A&&(v.memoizedState=l,fn=!0),v=v.queue,gm(t_.bind(null,f,v,r),[r]),v.getSnapshot!==o||A||cn!==null&&cn.memoizedState.tag&1){if(f.flags|=2048,$a(9,{destroy:void 0},e_.bind(null,f,v,l,o),null),Rt===null)throw Error(i(349));_||(Xr&127)!==0||Z0(f,o,l)}return l}function Z0(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=ze.updateQueue,o===null?(o=kf(),ze.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function e_(r,o,l,f){o.value=l,o.getSnapshot=f,n_(o)&&i_(r)}function t_(r,o,l){return l(function(){n_(o)&&i_(r)})}function n_(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!xi(r,l)}catch{return!0}}function i_(r){var o=zo(r,2);o!==null&&Ei(o,r,2)}function pm(r){var o=ui();if(typeof r=="function"){var l=r;if(r=l(),Qo){ae(!0);try{l()}finally{ae(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:r},o}function r_(r,o,l,f){return r.baseState=l,dm(r,bt,typeof f=="function"?f:Zr)}function v1(r,o,l,f,v){if(Ff(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};te.T!==null?l(!0):_.isTransition=!1,f(_),l=o.pending,l===null?(_.next=o.pending=_,s_(o,_)):(_.next=l.next,o.pending=l.next=_)}}function s_(r,o){var l=o.action,f=o.payload,v=r.state;if(o.isTransition){var _=te.T,A={};te.T=A;try{var N=l(v,f),z=te.S;z!==null&&z(A,N),o_(r,o,N)}catch(Q){mm(r,o,Q)}finally{_!==null&&A.types!==null&&(_.types=A.types),te.T=_}}else try{_=l(v,f),o_(r,o,_)}catch(Q){mm(r,o,Q)}}function o_(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){a_(r,o,f)},function(f){return mm(r,o,f)}):a_(r,o,l)}function a_(r,o,l){o.status="fulfilled",o.value=l,l_(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,s_(r,l)))}function mm(r,o,l){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=l,l_(o),o=o.next;while(o!==f)}r.action=null}function l_(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function u_(r,o){return o}function c_(r,o){if(rt){var l=Rt.formState;if(l!==null){e:{var f=ze;if(rt){if(Mt){t:{for(var v=Mt,_=Qi;v.nodeType!==8;){if(!_){v=null;break t}if(v=Zi(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Mt=Zi(v.nextSibling),f=v.data==="F!";break e}}Vs(f)}f=!1}f&&(o=l[0])}}return l=ui(),l.memoizedState=l.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u_,lastRenderedState:o},l.queue=f,l=x_.bind(null,ze,f),f.dispatch=l,f=pm(!1),_=Tm.bind(null,ze,!1,f.queue),f=ui(),v={state:o,dispatch:null,action:r,pending:null},f.queue=v,l=v1.bind(null,ze,v,_,l),v.dispatch=l,f.memoizedState=r,[o,l,!1]}function f_(r){var o=rn();return d_(o,bt,r)}function d_(r,o,l){if(o=dm(r,o,u_)[0],r=Vf(Zr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Eu(o)}catch(A){throw A===Ha?Cf:A}else f=o;o=rn();var v=o.queue,_=v.dispatch;return l!==o.memoizedState&&(ze.flags|=2048,$a(9,{destroy:void 0},_1.bind(null,v,l),null)),[f,_,r]}function _1(r,o){r.action=o}function h_(r){var o=rn(),l=bt;if(l!==null)return d_(o,l,r);rn(),o=o.memoizedState,l=rn();var f=l.queue.dispatch;return l.memoizedState=r,[o,f,!1]}function $a(r,o,l,f){return r={tag:r,create:l,deps:f,inst:o,next:null},o=ze.updateQueue,o===null&&(o=kf(),ze.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(f=l.next,l.next=r,r.next=f,o.lastEffect=r),r}function p_(){return rn().memoizedState}function Of(r,o,l,f){var v=ui();ze.flags|=r,v.memoizedState=$a(1|o,{destroy:void 0},l,f===void 0?null:f)}function Uf(r,o,l,f){var v=rn();f=f===void 0?null:f;var _=v.memoizedState.inst;bt!==null&&f!==null&&om(f,bt.memoizedState.deps)?v.memoizedState=$a(o,_,l,f):(ze.flags|=r,v.memoizedState=$a(1|o,_,l,f))}function m_(r,o){Of(8390656,8,r,o)}function gm(r,o){Uf(2048,8,r,o)}function E1(r){ze.flags|=4;var o=ze.updateQueue;if(o===null)o=kf(),ze.updateQueue=o,o.events=[r];else{var l=o.events;l===null?o.events=[r]:l.push(r)}}function g_(r){var o=rn().memoizedState;return E1({ref:o,nextImpl:r}),function(){if((pt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function y_(r,o){return Uf(4,2,r,o)}function v_(r,o){return Uf(4,4,r,o)}function __(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function E_(r,o,l){l=l!=null?l.concat([r]):null,Uf(4,4,__.bind(null,o,r),l)}function ym(){}function T_(r,o){var l=rn();o=o===void 0?null:o;var f=l.memoizedState;return o!==null&&om(o,f[1])?f[0]:(l.memoizedState=[r,o],r)}function S_(r,o){var l=rn();o=o===void 0?null:o;var f=l.memoizedState;if(o!==null&&om(o,f[1]))return f[0];if(f=r(),Qo){ae(!0);try{r()}finally{ae(!1)}}return l.memoizedState=[f,o],f}function vm(r,o,l){return l===void 0||(Xr&1073741824)!==0&&(Ze&261930)===0?r.memoizedState=o:(r.memoizedState=l,r=AE(),ze.lanes|=r,Ks|=r,l)}function A_(r,o,l,f){return xi(l,o)?l:Ka.current!==null?(r=vm(r,l,f),xi(r,o)||(fn=!0),r):(Xr&42)===0||(Xr&1073741824)!==0&&(Ze&261930)===0?(fn=!0,r.memoizedState=l):(r=AE(),ze.lanes|=r,Ks|=r,o)}function b_(r,o,l,f,v){var _=ue.p;ue.p=_!==0&&8>_?_:8;var A=te.T,N={};te.T=N,Tm(r,!1,o,l);try{var z=v(),Q=te.S;if(Q!==null&&Q(N,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var re=m1(z,f);Tu(r,o,re,Li(r))}else Tu(r,o,f,Li(r))}catch(oe){Tu(r,o,{then:function(){},status:"rejected",reason:oe},Li())}finally{ue.p=_,A!==null&&N.types!==null&&(A.types=N.types),te.T=A}}function T1(){}function _m(r,o,l,f){if(r.tag!==5)throw Error(i(476));var v=w_(r).queue;b_(r,v,o,pe,l===null?T1:function(){return C_(r),l(f)})}function w_(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:pe},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function C_(r){var o=w_(r);o.next===null&&(o=r.alternate.memoizedState),Tu(r,o.next.queue,{},Li())}function Em(){return Vn(Uu)}function I_(){return rn().memoizedState}function R_(){return rn().memoizedState}function S1(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=Li();r=Fs(l);var f=Bs(o,r,l);f!==null&&(Ei(f,o,l),gu(f,o,l)),o={cache:jp()},r.payload=o;return}o=o.return}}function A1(r,o,l){var f=Li();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ff(r)?N_(o,l):(l=Up(r,o,l,f),l!==null&&(Ei(l,r,f),D_(l,o,f)))}function x_(r,o,l){var f=Li();Tu(r,o,l,f)}function Tu(r,o,l,f){var v={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ff(r))N_(o,v);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,N=_(A,l);if(v.hasEagerState=!0,v.eagerState=N,xi(N,A))return _f(r,o,v,0),Rt===null&&vf(),!1}catch{}finally{}if(l=Up(r,o,v,f),l!==null)return Ei(l,r,f),D_(l,o,f),!0}return!1}function Tm(r,o,l,f){if(f={lane:2,revertLane:Zm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ff(r)){if(o)throw Error(i(479))}else o=Up(r,l,f,2),o!==null&&Ei(o,r,2)}function Ff(r){var o=r.alternate;return r===ze||o!==null&&o===ze}function N_(r,o){Ja=Mf=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function D_(r,o,l){if((l&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,l|=f,o.lanes=l,Ft(r,l)}}var Su={readContext:Vn,use:Lf,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};Su.useEffectEvent=$t;var M_={readContext:Vn,use:Lf,useCallback:function(r,o){return ui().memoizedState=[r,o===void 0?null:o],r},useContext:Vn,useEffect:m_,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,Of(4194308,4,__.bind(null,o,r),l)},useLayoutEffect:function(r,o){return Of(4194308,4,r,o)},useInsertionEffect:function(r,o){Of(4,2,r,o)},useMemo:function(r,o){var l=ui();o=o===void 0?null:o;var f=r();if(Qo){ae(!0);try{r()}finally{ae(!1)}}return l.memoizedState=[f,o],f},useReducer:function(r,o,l){var f=ui();if(l!==void 0){var v=l(o);if(Qo){ae(!0);try{l(o)}finally{ae(!1)}}}else v=o;return f.memoizedState=f.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},f.queue=r,r=r.dispatch=A1.bind(null,ze,r),[f.memoizedState,r]},useRef:function(r){var o=ui();return r={current:r},o.memoizedState=r},useState:function(r){r=pm(r);var o=r.queue,l=x_.bind(null,ze,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:ym,useDeferredValue:function(r,o){var l=ui();return vm(l,r,o)},useTransition:function(){var r=pm(!1);return r=b_.bind(null,ze,r.queue,!0,!1),ui().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var f=ze,v=ui();if(rt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),Rt===null)throw Error(i(349));(Ze&127)!==0||Z0(f,o,l)}v.memoizedState=l;var _={value:l,getSnapshot:o};return v.queue=_,m_(t_.bind(null,f,_,r),[r]),f.flags|=2048,$a(9,{destroy:void 0},e_.bind(null,f,_,l,o),null),l},useId:function(){var r=ui(),o=Rt.identifierPrefix;if(rt){var l=Rr,f=Ir;l=(f&~(1<<32-Se(f)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Pf++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=g1++,o="_"+o+"r_"+l.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Em,useFormState:c_,useActionState:c_,useOptimistic:function(r){var o=ui();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Tm.bind(null,ze,!0,l),l.dispatch=o,[r,o]},useMemoCache:fm,useCacheRefresh:function(){return ui().memoizedState=S1.bind(null,ze)},useEffectEvent:function(r){var o=ui(),l={impl:r};return o.memoizedState=l,function(){if((pt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Sm={readContext:Vn,use:Lf,useCallback:T_,useContext:Vn,useEffect:gm,useImperativeHandle:E_,useInsertionEffect:y_,useLayoutEffect:v_,useMemo:S_,useReducer:Vf,useRef:p_,useState:function(){return Vf(Zr)},useDebugValue:ym,useDeferredValue:function(r,o){var l=rn();return A_(l,bt.memoizedState,r,o)},useTransition:function(){var r=Vf(Zr)[0],o=rn().memoizedState;return[typeof r=="boolean"?r:Eu(r),o]},useSyncExternalStore:X0,useId:I_,useHostTransitionStatus:Em,useFormState:f_,useActionState:f_,useOptimistic:function(r,o){var l=rn();return r_(l,bt,r,o)},useMemoCache:fm,useCacheRefresh:R_};Sm.useEffectEvent=g_;var P_={readContext:Vn,use:Lf,useCallback:T_,useContext:Vn,useEffect:gm,useImperativeHandle:E_,useInsertionEffect:y_,useLayoutEffect:v_,useMemo:S_,useReducer:hm,useRef:p_,useState:function(){return hm(Zr)},useDebugValue:ym,useDeferredValue:function(r,o){var l=rn();return bt===null?vm(l,r,o):A_(l,bt.memoizedState,r,o)},useTransition:function(){var r=hm(Zr)[0],o=rn().memoizedState;return[typeof r=="boolean"?r:Eu(r),o]},useSyncExternalStore:X0,useId:I_,useHostTransitionStatus:Em,useFormState:h_,useActionState:h_,useOptimistic:function(r,o){var l=rn();return bt!==null?r_(l,bt,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:fm,useCacheRefresh:R_};P_.useEffectEvent=g_;function Am(r,o,l,f){o=r.memoizedState,l=l(f,o),l=l==null?o:E({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var bm={enqueueSetState:function(r,o,l){r=r._reactInternals;var f=Li(),v=Fs(f);v.payload=o,l!=null&&(v.callback=l),o=Bs(r,v,f),o!==null&&(Ei(o,r,f),gu(o,r,f))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var f=Li(),v=Fs(f);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=Bs(r,v,f),o!==null&&(Ei(o,r,f),gu(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Li(),f=Fs(l);f.tag=2,o!=null&&(f.callback=o),o=Bs(r,f,l),o!==null&&(Ei(o,r,l),gu(o,r,l))}};function k_(r,o,l,f,v,_,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,_,A):o.prototype&&o.prototype.isPureReactComponent?!lu(l,f)||!lu(v,_):!0}function L_(r,o,l,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==r&&bm.enqueueReplaceState(o,o.state,null)}function Xo(r,o){var l=o;if("ref"in o){l={};for(var f in o)f!=="ref"&&(l[f]=o[f])}if(r=r.defaultProps){l===o&&(l=E({},l));for(var v in r)l[v]===void 0&&(l[v]=r[v])}return l}function V_(r){yf(r)}function O_(r){console.error(r)}function U_(r){yf(r)}function Bf(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function F_(r,o,l){try{var f=r.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function wm(r,o,l){return l=Fs(l),l.tag=3,l.payload={element:null},l.callback=function(){Bf(r,o)},l}function B_(r){return r=Fs(r),r.tag=3,r}function q_(r,o,l,f){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;r.payload=function(){return v(_)},r.callback=function(){F_(o,l,f)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){F_(o,l,f),typeof v!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var N=f.stack;this.componentDidCatch(f.value,{componentStack:N!==null?N:""})})}function b1(r,o,l,f,v){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=l.alternate,o!==null&&Ba(o,l,v,!0),l=Di.current,l!==null){switch(l.tag){case 31:case 13:return Xi===null?Xf():l.alternate===null&&jt===0&&(jt=3),l.flags&=-257,l.flags|=65536,l.lanes=v,f===If?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([f]):o.add(f),Wm(r,f,v)),!1;case 22:return l.flags|=65536,f===If?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([f]):l.add(f)),Wm(r,f,v)),!1}throw Error(i(435,l.tag))}return Wm(r,f,v),Xf(),!1}if(rt)return o=Di.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==Gp&&(r=Error(i(422),{cause:f}),fu($i(r,l)))):(f!==Gp&&(o=Error(i(423),{cause:f}),fu($i(o,l))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,f=$i(f,l),v=wm(r.stateNode,f,v),tm(r,v),jt!==4&&(jt=2)),!1;var _=Error(i(520),{cause:f});if(_=$i(_,l),Nu===null?Nu=[_]:Nu.push(_),jt!==4&&(jt=2),o===null)return!0;f=$i(f,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=v&-v,l.lanes|=r,r=wm(l.stateNode,f,r),tm(l,r),!1;case 1:if(o=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Js===null||!Js.has(_))))return l.flags|=65536,v&=-v,l.lanes|=v,v=B_(v),q_(v,r,l,f),tm(l,v),!1}l=l.return}while(l!==null);return!1}var Cm=Error(i(461)),fn=!1;function On(r,o,l,f){o.child=r===null?K0(o,null,l,f):Wo(o,r.child,l,f)}function z_(r,o,l,f,v){l=l.render;var _=o.ref;if("ref"in f){var A={};for(var N in f)N!=="ref"&&(A[N]=f[N])}else A=f;return Jo(o),f=am(r,o,l,A,_,v),N=lm(),r!==null&&!fn?(um(r,o,v),es(r,o,v)):(rt&&N&&zp(o),o.flags|=1,On(r,o,f,v),o.child)}function H_(r,o,l,f,v){if(r===null){var _=l.type;return typeof _=="function"&&!Fp(_)&&_.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=_,G_(r,o,_,f,v)):(r=Tf(l.type,null,f,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!km(r,v)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:lu,l(A,f)&&r.ref===o.ref)return es(r,o,v)}return o.flags|=1,r=$r(_,f),r.ref=o.ref,r.return=o,o.child=r}function G_(r,o,l,f,v){if(r!==null){var _=r.memoizedProps;if(lu(_,f)&&r.ref===o.ref)if(fn=!1,o.pendingProps=f=_,km(r,v))(r.flags&131072)!==0&&(fn=!0);else return o.lanes=r.lanes,es(r,o,v)}return Im(r,o,l,f,v)}function K_(r,o,l,f){var v=f.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,r!==null){for(f=o.child=r.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,o.child=null;return J_(r,o,_,l,f)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&wf(o,_!==null?_.cachePool:null),_!==null?$0(o,_):im(),j0(o);else return f=o.lanes=536870912,J_(r,o,_!==null?_.baseLanes|l:l,l,f)}else _!==null?(wf(o,_.cachePool),$0(o,_),zs(),o.memoizedState=null):(r!==null&&wf(o,null),im(),zs());return On(r,o,v,l),o.child}function Au(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function J_(r,o,l,f,v){var _=Qp();return _=_===null?null:{parent:un._currentValue,pool:_},o.memoizedState={baseLanes:l,cachePool:_},r!==null&&wf(o,null),im(),j0(o),r!==null&&Ba(r,o,f,!0),o.childLanes=v,null}function qf(r,o){return o=Hf({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Y_(r,o,l){return Wo(o,r.child,null,l),r=qf(o,o.pendingProps),r.flags|=2,Mi(o),o.memoizedState=null,r}function w1(r,o,l){var f=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(rt){if(f.mode==="hidden")return r=qf(o,f),o.lanes=536870912,Au(null,r);if(sm(o),(r=Mt)?(r=sT(r,Qi),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:ks!==null?{id:Ir,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},l=N0(r),l.return=o,o.child=l,Ln=o,Mt=null)):r=null,r===null)throw Vs(o);return o.lanes=536870912,null}return qf(o,f)}var _=r.memoizedState;if(_!==null){var A=_.dehydrated;if(sm(o),v)if(o.flags&256)o.flags&=-257,o=Y_(r,o,l);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(fn||Ba(r,o,l,!1),v=(l&r.childLanes)!==0,fn||v){if(f=Rt,f!==null&&(A=Kn(f,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,zo(r,A),Ei(f,r,A),Cm;Xf(),o=Y_(r,o,l)}else r=_.treeContext,Mt=Zi(A.nextSibling),Ln=o,rt=!0,Ls=null,Qi=!1,r!==null&&P0(o,r),o=qf(o,f),o.flags|=4096;return o}return r=$r(r.child,{mode:f.mode,children:f.children}),r.ref=o.ref,o.child=r,r.return=o,r}function zf(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function Im(r,o,l,f,v){return Jo(o),l=am(r,o,l,f,void 0,v),f=lm(),r!==null&&!fn?(um(r,o,v),es(r,o,v)):(rt&&f&&zp(o),o.flags|=1,On(r,o,l,v),o.child)}function $_(r,o,l,f,v,_){return Jo(o),o.updateQueue=null,l=Q0(o,f,l,v),W0(r),f=lm(),r!==null&&!fn?(um(r,o,_),es(r,o,_)):(rt&&f&&zp(o),o.flags|=1,On(r,o,l,_),o.child)}function j_(r,o,l,f,v){if(Jo(o),o.stateNode===null){var _=Va,A=l.contextType;typeof A=="object"&&A!==null&&(_=Vn(A)),_=new l(f,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=bm,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=f,_.state=o.memoizedState,_.refs={},Zp(o),A=l.contextType,_.context=typeof A=="object"&&A!==null?Vn(A):Va,_.state=o.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Am(o,l,A,f),_.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&bm.enqueueReplaceState(_,_.state,null),vu(o,f,_,v),yu(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){_=o.stateNode;var N=o.memoizedProps,z=Xo(l,N);_.props=z;var Q=_.context,re=l.contextType;A=Va,typeof re=="object"&&re!==null&&(A=Vn(re));var oe=l.getDerivedStateFromProps;re=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(N||Q!==A)&&L_(o,_,f,A),Us=!1;var Z=o.memoizedState;_.state=Z,vu(o,f,_,v),yu(),Q=o.memoizedState,N||Z!==Q||Us?(typeof oe=="function"&&(Am(o,l,oe,f),Q=o.memoizedState),(z=Us||k_(o,l,z,f,Z,Q,A))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=Q),_.props=f,_.state=Q,_.context=A,f=z):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{_=o.stateNode,em(r,o),A=o.memoizedProps,re=Xo(l,A),_.props=re,oe=o.pendingProps,Z=_.context,Q=l.contextType,z=Va,typeof Q=="object"&&Q!==null&&(z=Vn(Q)),N=l.getDerivedStateFromProps,(Q=typeof N=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==oe||Z!==z)&&L_(o,_,f,z),Us=!1,Z=o.memoizedState,_.state=Z,vu(o,f,_,v),yu();var ne=o.memoizedState;A!==oe||Z!==ne||Us||r!==null&&r.dependencies!==null&&Af(r.dependencies)?(typeof N=="function"&&(Am(o,l,N,f),ne=o.memoizedState),(re=Us||k_(o,l,re,f,Z,ne,z)||r!==null&&r.dependencies!==null&&Af(r.dependencies))?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,ne,z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,ne,z)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ne),_.props=f,_.state=ne,_.context=z,f=re):(typeof _.componentDidUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),f=!1)}return _=f,zf(r,o),f=(o.flags&128)!==0,_||f?(_=o.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&f?(o.child=Wo(o,r.child,null,v),o.child=Wo(o,null,l,v)):On(r,o,l,v),o.memoizedState=_.state,r=o.child):r=es(r,o,v),r}function W_(r,o,l,f){return Go(),o.flags|=256,On(r,o,l,f),o.child}var Rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xm(r){return{baseLanes:r,cachePool:F0()}}function Nm(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=ki),r}function Q_(r,o,l){var f=o.pendingProps,v=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=r!==null&&r.memoizedState===null?!1:(nn.current&2)!==0),A&&(v=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,r===null){if(rt){if(v?qs(o):zs(),(r=Mt)?(r=sT(r,Qi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:ks!==null?{id:Ir,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},l=N0(r),l.return=o,o.child=l,Ln=o,Mt=null)):r=null,r===null)throw Vs(o);return dg(r)?o.lanes=32:o.lanes=536870912,null}var N=f.children;return f=f.fallback,v?(zs(),v=o.mode,N=Hf({mode:"hidden",children:N},v),f=Ho(f,v,l,null),N.return=o,f.return=o,N.sibling=f,o.child=N,f=o.child,f.memoizedState=xm(l),f.childLanes=Nm(r,A,l),o.memoizedState=Rm,Au(null,f)):(qs(o),Dm(o,N))}var z=r.memoizedState;if(z!==null&&(N=z.dehydrated,N!==null)){if(_)o.flags&256?(qs(o),o.flags&=-257,o=Mm(r,o,l)):o.memoizedState!==null?(zs(),o.child=r.child,o.flags|=128,o=null):(zs(),N=f.fallback,v=o.mode,f=Hf({mode:"visible",children:f.children},v),N=Ho(N,v,l,null),N.flags|=2,f.return=o,N.return=o,f.sibling=N,o.child=f,Wo(o,r.child,null,l),f=o.child,f.memoizedState=xm(l),f.childLanes=Nm(r,A,l),o.memoizedState=Rm,o=Au(null,f));else if(qs(o),dg(N)){if(A=N.nextSibling&&N.nextSibling.dataset,A)var Q=A.dgst;A=Q,f=Error(i(419)),f.stack="",f.digest=A,fu({value:f,source:null,stack:null}),o=Mm(r,o,l)}else if(fn||Ba(r,o,l,!1),A=(l&r.childLanes)!==0,fn||A){if(A=Rt,A!==null&&(f=Kn(A,l),f!==0&&f!==z.retryLane))throw z.retryLane=f,zo(r,f),Ei(A,r,f),Cm;fg(N)||Xf(),o=Mm(r,o,l)}else fg(N)?(o.flags|=192,o.child=r.child,o=null):(r=z.treeContext,Mt=Zi(N.nextSibling),Ln=o,rt=!0,Ls=null,Qi=!1,r!==null&&P0(o,r),o=Dm(o,f.children),o.flags|=4096);return o}return v?(zs(),N=f.fallback,v=o.mode,z=r.child,Q=z.sibling,f=$r(z,{mode:"hidden",children:f.children}),f.subtreeFlags=z.subtreeFlags&65011712,Q!==null?N=$r(Q,N):(N=Ho(N,v,l,null),N.flags|=2),N.return=o,f.return=o,f.sibling=N,o.child=f,Au(null,f),f=o.child,N=r.child.memoizedState,N===null?N=xm(l):(v=N.cachePool,v!==null?(z=un._currentValue,v=v.parent!==z?{parent:z,pool:z}:v):v=F0(),N={baseLanes:N.baseLanes|l,cachePool:v}),f.memoizedState=N,f.childLanes=Nm(r,A,l),o.memoizedState=Rm,Au(r.child,f)):(qs(o),l=r.child,r=l.sibling,l=$r(l,{mode:"visible",children:f.children}),l.return=o,l.sibling=null,r!==null&&(A=o.deletions,A===null?(o.deletions=[r],o.flags|=16):A.push(r)),o.child=l,o.memoizedState=null,l)}function Dm(r,o){return o=Hf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Hf(r,o){return r=Ni(22,r,null,o),r.lanes=0,r}function Mm(r,o,l){return Wo(o,r.child,null,l),r=Dm(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function X_(r,o,l){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),Yp(r.return,o,l)}function Pm(r,o,l,f,v,_){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=f,A.tail=l,A.tailMode=v,A.treeForkCount=_)}function Z_(r,o,l){var f=o.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var A=nn.current,N=(A&2)!==0;if(N?(A=A&1|2,o.flags|=128):A&=1,fe(nn,A),On(r,o,f,l),f=rt?cu:0,!N&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&X_(r,l,o);else if(r.tag===19)X_(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(l=o.child,v=null;l!==null;)r=l.alternate,r!==null&&Df(r)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),Pm(o,!1,v,l,_,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Df(r)===null){o.child=v;break}r=v.sibling,v.sibling=l,l=v,v=r}Pm(o,!0,l,null,_,f);break;case"together":Pm(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function es(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),Ks|=o.lanes,(l&o.childLanes)===0)if(r!==null){if(Ba(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,l=$r(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=$r(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function km(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Af(r)))}function C1(r,o,l){switch(o.tag){case 3:zt(o,o.stateNode.containerInfo),Os(o,un,r.memoizedState.cache),Go();break;case 27:case 5:ti(o);break;case 4:zt(o,o.stateNode.containerInfo);break;case 10:Os(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,sm(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(qs(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Q_(r,o,l):(qs(o),r=es(r,o,l),r!==null?r.sibling:null);qs(o);break;case 19:var v=(r.flags&128)!==0;if(f=(l&o.childLanes)!==0,f||(Ba(r,o,l,!1),f=(l&o.childLanes)!==0),v){if(f)return Z_(r,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),fe(nn,nn.current),f)break;return null;case 22:return o.lanes=0,K_(r,o,l,o.pendingProps);case 24:Os(o,un,r.memoizedState.cache)}return es(r,o,l)}function eE(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)fn=!0;else{if(!km(r,l)&&(o.flags&128)===0)return fn=!1,C1(r,o,l);fn=(r.flags&131072)!==0}else fn=!1,rt&&(o.flags&1048576)!==0&&M0(o,cu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(r=$o(o.elementType),o.type=r,typeof r=="function")Fp(r)?(f=Xo(r,f),o.tag=1,o=j_(null,o,r,f,l)):(o.tag=0,o=Im(null,o,r,f,l));else{if(r!=null){var v=r.$$typeof;if(v===Y){o.tag=11,o=z_(null,o,r,f,l);break e}else if(v===I){o.tag=14,o=H_(null,o,r,f,l);break e}}throw o=Ce(r)||r,Error(i(306,o,""))}}return o;case 0:return Im(r,o,o.type,o.pendingProps,l);case 1:return f=o.type,v=Xo(f,o.pendingProps),j_(r,o,f,v,l);case 3:e:{if(zt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));f=o.pendingProps;var _=o.memoizedState;v=_.element,em(r,o),vu(o,f,null,l);var A=o.memoizedState;if(f=A.cache,Os(o,un,f),f!==_.cache&&$p(o,[un],l,!0),yu(),f=A.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=W_(r,o,f,l);break e}else if(f!==v){v=$i(Error(i(424)),o),fu(v),o=W_(r,o,f,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Mt=Zi(r.firstChild),Ln=o,rt=!0,Ls=null,Qi=!0,l=K0(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Go(),f===v){o=es(r,o,l);break e}On(r,o,f,l)}o=o.child}return o;case 26:return zf(r,o),r===null?(l=fT(o.type,null,o.pendingProps,null))?o.memoizedState=l:rt||(l=o.type,r=o.pendingProps,f=sd(Le.current).createElement(l),f[Nt]=o,f[tn]=r,Un(f,l,r),Bt(f),o.stateNode=f):o.memoizedState=fT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return ti(o),r===null&&rt&&(f=o.stateNode=lT(o.type,o.pendingProps,Le.current),Ln=o,Qi=!0,v=Mt,Ws(o.type)?(hg=v,Mt=Zi(f.firstChild)):Mt=v),On(r,o,o.pendingProps.children,l),zf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&rt&&((v=f=Mt)&&(f=nN(f,o.type,o.pendingProps,Qi),f!==null?(o.stateNode=f,Ln=o,Mt=Zi(f.firstChild),Qi=!1,v=!0):v=!1),v||Vs(o)),ti(o),v=o.type,_=o.pendingProps,A=r!==null?r.memoizedProps:null,f=_.children,lg(v,_)?f=null:A!==null&&lg(v,A)&&(o.flags|=32),o.memoizedState!==null&&(v=am(r,o,y1,null,null,l),Uu._currentValue=v),zf(r,o),On(r,o,f,l),o.child;case 6:return r===null&&rt&&((r=l=Mt)&&(l=iN(l,o.pendingProps,Qi),l!==null?(o.stateNode=l,Ln=o,Mt=null,r=!0):r=!1),r||Vs(o)),null;case 13:return Q_(r,o,l);case 4:return zt(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=Wo(o,null,f,l):On(r,o,f,l),o.child;case 11:return z_(r,o,o.type,o.pendingProps,l);case 7:return On(r,o,o.pendingProps,l),o.child;case 8:return On(r,o,o.pendingProps.children,l),o.child;case 12:return On(r,o,o.pendingProps.children,l),o.child;case 10:return f=o.pendingProps,Os(o,o.type,f.value),On(r,o,f.children,l),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,Jo(o),v=Vn(v),f=f(v),o.flags|=1,On(r,o,f,l),o.child;case 14:return H_(r,o,o.type,o.pendingProps,l);case 15:return G_(r,o,o.type,o.pendingProps,l);case 19:return Z_(r,o,l);case 31:return w1(r,o,l);case 22:return K_(r,o,l,o.pendingProps);case 24:return Jo(o),f=Vn(un),r===null?(v=Qp(),v===null&&(v=Rt,_=jp(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=l),v=_),o.memoizedState={parent:f,cache:v},Zp(o),Os(o,un,v)):((r.lanes&l)!==0&&(em(r,o),vu(o,null,null,l),yu()),v=r.memoizedState,_=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Os(o,un,f)):(f=_.cache,Os(o,un,f),f!==v.cache&&$p(o,[un],l,!0))),On(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ts(r){r.flags|=4}function Lm(r,o,l,f,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(IE())r.flags|=8192;else throw jo=If,Xp}else r.flags&=-16777217}function tE(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!gT(o))if(IE())r.flags|=8192;else throw jo=If,Xp}function Gf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Fi():536870912,r.lanes|=o,Xa|=o)}function bu(r,o){if(!rt)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Pt(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,f=0;if(o)for(var v=r.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=l,o}function I1(r,o,l){var f=o.pendingProps;switch(Hp(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(o),null;case 1:return Pt(o),null;case 3:return l=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Qr(un),At(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Fa(o)?ts(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Kp())),Pt(o),null;case 26:var v=o.type,_=o.memoizedState;return r===null?(ts(o),_!==null?(Pt(o),tE(o,_)):(Pt(o),Lm(o,v,null,f,l))):_?_!==r.memoizedState?(ts(o),Pt(o),tE(o,_)):(Pt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==f&&ts(o),Pt(o),Lm(o,v,r,f,l)),null;case 27:if(di(o),l=Le.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ts(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Pt(o),null}r=he.current,Fa(o)?k0(o):(r=lT(v,f,l),o.stateNode=r,ts(o))}return Pt(o),null;case 5:if(di(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ts(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Pt(o),null}if(_=he.current,Fa(o))k0(o);else{var A=sd(Le.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?A.createElement("select",{is:f.is}):A.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?A.createElement(v,{is:f.is}):A.createElement(v)}}_[Nt]=o,_[tn]=f;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(Un(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ts(o)}}return Pt(o),Lm(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,l),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&ts(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(r=Le.current,Fa(o)){if(r=o.stateNode,l=o.memoizedProps,f=null,v=Ln,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}r[Nt]=o,r=!!(r.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||QE(r.nodeValue,l)),r||Vs(o,!0)}else r=sd(r).createTextNode(f),r[Nt]=o,o.stateNode=r}return Pt(o),null;case 31:if(l=o.memoizedState,r===null||r.memoizedState!==null){if(f=Fa(o),l!==null){if(r===null){if(!f)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Nt]=o}else Go(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pt(o),r=!1}else l=Kp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return o.flags&256?(Mi(o),o):(Mi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Pt(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Fa(o),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Nt]=o}else Go(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pt(o),v=!1}else v=Kp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Mi(o),o):(Mi(o),null)}return Mi(o),(o.flags&128)!==0?(o.lanes=l,o):(l=f!==null,r=r!==null&&r.memoizedState!==null,l&&(f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),l!==r&&l&&(o.child.flags|=8192),Gf(o,o.updateQueue),Pt(o),null);case 4:return At(),r===null&&ig(o.stateNode.containerInfo),Pt(o),null;case 10:return Qr(o.type),Pt(o),null;case 19:if(ee(nn),f=o.memoizedState,f===null)return Pt(o),null;if(v=(o.flags&128)!==0,_=f.rendering,_===null)if(v)bu(f,!1);else{if(jt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=Df(r),_!==null){for(o.flags|=128,bu(f,!1),r=_.updateQueue,o.updateQueue=r,Gf(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)x0(l,r),l=l.sibling;return fe(nn,nn.current&1|2),rt&&jr(o,f.treeForkCount),o.child}r=r.sibling}f.tail!==null&&ht()>jf&&(o.flags|=128,v=!0,bu(f,!1),o.lanes=4194304)}else{if(!v)if(r=Df(_),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,Gf(o,r),bu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!rt)return Pt(o),null}else 2*ht()-f.renderingStartTime>jf&&l!==536870912&&(o.flags|=128,v=!0,bu(f,!1),o.lanes=4194304);f.isBackwards?(_.sibling=o.child,o.child=_):(r=f.last,r!==null?r.sibling=_:o.child=_,f.last=_)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=ht(),r.sibling=null,l=nn.current,fe(nn,v?l&1|2:l&1),rt&&jr(o,f.treeForkCount),r):(Pt(o),null);case 22:case 23:return Mi(o),rm(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(l&536870912)!==0&&(o.flags&128)===0&&(Pt(o),o.subtreeFlags&6&&(o.flags|=8192)):Pt(o),l=o.updateQueue,l!==null&&Gf(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==l&&(o.flags|=2048),r!==null&&ee(Yo),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Qr(un),Pt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function R1(r,o){switch(Hp(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Qr(un),At(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return di(o),null;case 31:if(o.memoizedState!==null){if(Mi(o),o.alternate===null)throw Error(i(340));Go()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Mi(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Go()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ee(nn),null;case 4:return At(),null;case 10:return Qr(o.type),null;case 22:case 23:return Mi(o),rm(),r!==null&&ee(Yo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Qr(un),null;case 25:return null;default:return null}}function nE(r,o){switch(Hp(o),o.tag){case 3:Qr(un),At();break;case 26:case 27:case 5:di(o);break;case 4:At();break;case 31:o.memoizedState!==null&&Mi(o);break;case 13:Mi(o);break;case 19:ee(nn);break;case 10:Qr(o.type);break;case 22:case 23:Mi(o),rm(),r!==null&&ee(Yo);break;case 24:Qr(un)}}function wu(r,o){try{var l=o.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&r)===r){f=void 0;var _=l.create,A=l.inst;f=_(),A.destroy=f}l=l.next}while(l!==v)}}catch(N){St(o,o.return,N)}}function Hs(r,o,l){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&r)===r){var A=f.inst,N=A.destroy;if(N!==void 0){A.destroy=void 0,v=o;var z=l,Q=N;try{Q()}catch(re){St(v,z,re)}}}f=f.next}while(f!==_)}}catch(re){St(o,o.return,re)}}function iE(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{Y0(o,l)}catch(f){St(r,r.return,f)}}}function rE(r,o,l){l.props=Xo(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(f){St(r,o,f)}}function Cu(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof l=="function"?r.refCleanup=l(f):l.current=f}}catch(v){St(r,o,v)}}function xr(r,o){var l=r.ref,f=r.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(v){St(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){St(r,o,v)}else l.current=null}function sE(r){var o=r.type,l=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(v){St(r,r.return,v)}}function Vm(r,o,l){try{var f=r.stateNode;W1(f,r.type,l,o),f[tn]=o}catch(v){St(r,r.return,v)}}function oE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ws(r.type)||r.tag===4}function Om(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||oE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ws(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Um(r,o,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=wn));else if(f!==4&&(f===27&&Ws(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(Um(r,o,l),r=r.sibling;r!==null;)Um(r,o,l),r=r.sibling}function Kf(r,o,l){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(f!==4&&(f===27&&Ws(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Kf(r,o,l),r=r.sibling;r!==null;)Kf(r,o,l),r=r.sibling}function aE(r){var o=r.stateNode,l=r.memoizedProps;try{for(var f=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Un(o,f,l),o[Nt]=r,o[tn]=l}catch(_){St(r,r.return,_)}}var ns=!1,dn=!1,Fm=!1,lE=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function x1(r,o){if(r=r.containerInfo,og=dd,r=E0(r),Mp(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,N=-1,z=-1,Q=0,re=0,oe=r,Z=null;t:for(;;){for(var ne;oe!==l||v!==0&&oe.nodeType!==3||(N=A+v),oe!==_||f!==0&&oe.nodeType!==3||(z=A+f),oe.nodeType===3&&(A+=oe.nodeValue.length),(ne=oe.firstChild)!==null;)Z=oe,oe=ne;for(;;){if(oe===r)break t;if(Z===l&&++Q===v&&(N=A),Z===_&&++re===f&&(z=A),(ne=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=ne}l=N===-1||z===-1?null:{start:N,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(ag={focusedElem:r,selectionRange:l},dd=!1,Rn=o;Rn!==null;)if(o=Rn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Rn=r;else for(;Rn!==null;){switch(o=Rn,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)v=r[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,l=o,v=_.memoizedProps,_=_.memoizedState,f=l.stateNode;try{var Ee=Xo(l.type,v);r=f.getSnapshotBeforeUpdate(Ee,_),f.__reactInternalSnapshotBeforeUpdate=r}catch(Me){St(l,l.return,Me)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)cg(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":cg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Rn=r;break}Rn=o.return}}function uE(r,o,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:rs(r,l),f&4&&wu(5,l);break;case 1:if(rs(r,l),f&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(A){St(l,l.return,A)}else{var v=Xo(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(A){St(l,l.return,A)}}f&64&&iE(l),f&512&&Cu(l,l.return);break;case 3:if(rs(r,l),f&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Y0(r,o)}catch(A){St(l,l.return,A)}}break;case 27:o===null&&f&4&&aE(l);case 26:case 5:rs(r,l),o===null&&f&4&&sE(l),f&512&&Cu(l,l.return);break;case 12:rs(r,l);break;case 31:rs(r,l),f&4&&dE(r,l);break;case 13:rs(r,l),f&4&&hE(r,l),f&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=U1.bind(null,l),rN(r,l))));break;case 22:if(f=l.memoizedState!==null||ns,!f){o=o!==null&&o.memoizedState!==null||dn,v=ns;var _=dn;ns=f,(dn=o)&&!_?ss(r,l,(l.subtreeFlags&8772)!==0):rs(r,l),ns=v,dn=_}break;case 30:break;default:rs(r,l)}}function cE(r){var o=r.alternate;o!==null&&(r.alternate=null,cE(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Hi(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var qt=null,gi=!1;function is(r,o,l){for(l=l.child;l!==null;)fE(r,o,l),l=l.sibling}function fE(r,o,l){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Ai,l)}catch{}switch(l.tag){case 26:dn||xr(l,o),is(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:dn||xr(l,o);var f=qt,v=gi;Ws(l.type)&&(qt=l.stateNode,gi=!1),is(r,o,l),Lu(l.stateNode),qt=f,gi=v;break;case 5:dn||xr(l,o);case 6:if(f=qt,v=gi,qt=null,is(r,o,l),qt=f,gi=v,qt!==null)if(gi)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(l.stateNode)}catch(_){St(l,o,_)}else try{qt.removeChild(l.stateNode)}catch(_){St(l,o,_)}break;case 18:qt!==null&&(gi?(r=qt,iT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),ol(r)):iT(qt,l.stateNode));break;case 4:f=qt,v=gi,qt=l.stateNode.containerInfo,gi=!0,is(r,o,l),qt=f,gi=v;break;case 0:case 11:case 14:case 15:Hs(2,l,o),dn||Hs(4,l,o),is(r,o,l);break;case 1:dn||(xr(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"&&rE(l,o,f)),is(r,o,l);break;case 21:is(r,o,l);break;case 22:dn=(f=dn)||l.memoizedState!==null,is(r,o,l),dn=f;break;default:is(r,o,l)}}function dE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ol(r)}catch(l){St(o,o.return,l)}}}function hE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ol(r)}catch(l){St(o,o.return,l)}}function N1(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new lE),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new lE),o;default:throw Error(i(435,r.tag))}}function Jf(r,o){var l=N1(r);o.forEach(function(f){if(!l.has(f)){l.add(f);var v=F1.bind(null,r,f);f.then(v,v)}})}function yi(r,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f],_=r,A=o,N=A;e:for(;N!==null;){switch(N.tag){case 27:if(Ws(N.type)){qt=N.stateNode,gi=!1;break e}break;case 5:qt=N.stateNode,gi=!1;break e;case 3:case 4:qt=N.stateNode.containerInfo,gi=!0;break e}N=N.return}if(qt===null)throw Error(i(160));fE(_,A,v),qt=null,gi=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)pE(o,r),o=o.sibling}var dr=null;function pE(r,o){var l=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yi(o,r),vi(r),f&4&&(Hs(3,r,r.return),wu(3,r),Hs(5,r,r.return));break;case 1:yi(o,r),vi(r),f&512&&(dn||l===null||xr(l,l.return)),f&64&&ns&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var v=dr;if(yi(o,r),vi(r),f&512&&(dn||l===null||xr(l,l.return)),f&4){var _=l!==null?l.memoizedState:null;if(f=r.memoizedState,l===null)if(f===null)if(r.stateNode===null){e:{f=r.type,l=r.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[zi]||_[Nt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),Un(_,f,l),_[Nt]=r,Bt(_),f=_;break e;case"link":var A=pT("link","href",v).get(f+(l.href||""));if(A){for(var N=0;N<A.length;N++)if(_=A[N],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(N,1);break t}}_=v.createElement(f),Un(_,f,l),v.head.appendChild(_);break;case"meta":if(A=pT("meta","content",v).get(f+(l.content||""))){for(N=0;N<A.length;N++)if(_=A[N],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(N,1);break t}}_=v.createElement(f),Un(_,f,l),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[Nt]=r,Bt(_),f=_}r.stateNode=f}else mT(v,r.type,r.stateNode);else r.stateNode=hT(v,f,r.memoizedProps);else _!==f?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,f===null?mT(v,r.type,r.stateNode):hT(v,f,r.memoizedProps)):f===null&&r.stateNode!==null&&Vm(r,r.memoizedProps,l.memoizedProps)}break;case 27:yi(o,r),vi(r),f&512&&(dn||l===null||xr(l,l.return)),l!==null&&f&4&&Vm(r,r.memoizedProps,l.memoizedProps);break;case 5:if(yi(o,r),vi(r),f&512&&(dn||l===null||xr(l,l.return)),r.flags&32){v=r.stateNode;try{Ji(v,"")}catch(Ee){St(r,r.return,Ee)}}f&4&&r.stateNode!=null&&(v=r.memoizedProps,Vm(r,v,l!==null?l.memoizedProps:v)),f&1024&&(Fm=!0);break;case 6:if(yi(o,r),vi(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,l=r.stateNode;try{l.nodeValue=f}catch(Ee){St(r,r.return,Ee)}}break;case 3:if(ld=null,v=dr,dr=od(o.containerInfo),yi(o,r),dr=v,vi(r),f&4&&l!==null&&l.memoizedState.isDehydrated)try{ol(o.containerInfo)}catch(Ee){St(r,r.return,Ee)}Fm&&(Fm=!1,mE(r));break;case 4:f=dr,dr=od(r.stateNode.containerInfo),yi(o,r),vi(r),dr=f;break;case 12:yi(o,r),vi(r);break;case 31:yi(o,r),vi(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Jf(r,f)));break;case 13:yi(o,r),vi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&($f=ht()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Jf(r,f)));break;case 22:v=r.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,Q=ns,re=dn;if(ns=Q||v,dn=re||z,yi(o,r),dn=re,ns=Q,vi(r),f&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(l===null||z||ns||dn||Zo(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){z=l=o;try{if(_=z.stateNode,v)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{N=z.stateNode;var oe=z.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ee){St(z,z.return,Ee)}}}else if(o.tag===6){if(l===null){z=o;try{z.stateNode.nodeValue=v?"":z.memoizedProps}catch(Ee){St(z,z.return,Ee)}}}else if(o.tag===18){if(l===null){z=o;try{var ne=z.stateNode;v?rT(ne,!0):rT(z.stateNode,!1)}catch(Ee){St(z,z.return,Ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Jf(r,l))));break;case 19:yi(o,r),vi(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,Jf(r,f)));break;case 30:break;case 21:break;default:yi(o,r),vi(r)}}function vi(r){var o=r.flags;if(o&2){try{for(var l,f=r.return;f!==null;){if(oE(f)){l=f;break}f=f.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,_=Om(r);Kf(r,_,v);break;case 5:var A=l.stateNode;l.flags&32&&(Ji(A,""),l.flags&=-33);var N=Om(r);Kf(r,N,A);break;case 3:case 4:var z=l.stateNode.containerInfo,Q=Om(r);Um(r,Q,z);break;default:throw Error(i(161))}}catch(re){St(r,r.return,re)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function mE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;mE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function rs(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)uE(r,o.alternate,o),o=o.sibling}function Zo(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Hs(4,o,o.return),Zo(o);break;case 1:xr(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&rE(o,o.return,l),Zo(o);break;case 27:Lu(o.stateNode);case 26:case 5:xr(o,o.return),Zo(o);break;case 22:o.memoizedState===null&&Zo(o);break;case 30:Zo(o);break;default:Zo(o)}r=r.sibling}}function ss(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=r,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:ss(v,_,l),wu(4,_);break;case 1:if(ss(v,_,l),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){St(f,f.return,Q)}if(f=_,v=f.updateQueue,v!==null){var N=f.stateNode;try{var z=v.shared.hiddenCallbacks;if(z!==null)for(v.shared.hiddenCallbacks=null,v=0;v<z.length;v++)J0(z[v],N)}catch(Q){St(f,f.return,Q)}}l&&A&64&&iE(_),Cu(_,_.return);break;case 27:aE(_);case 26:case 5:ss(v,_,l),l&&f===null&&A&4&&sE(_),Cu(_,_.return);break;case 12:ss(v,_,l);break;case 31:ss(v,_,l),l&&A&4&&dE(v,_);break;case 13:ss(v,_,l),l&&A&4&&hE(v,_);break;case 22:_.memoizedState===null&&ss(v,_,l),Cu(_,_.return);break;case 30:break;default:ss(v,_,l)}o=o.sibling}}function Bm(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&du(l))}function qm(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&du(r))}function hr(r,o,l,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)gE(r,o,l,f),o=o.sibling}function gE(r,o,l,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:hr(r,o,l,f),v&2048&&wu(9,o);break;case 1:hr(r,o,l,f);break;case 3:hr(r,o,l,f),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&du(r)));break;case 12:if(v&2048){hr(r,o,l,f),r=o.stateNode;try{var _=o.memoizedProps,A=_.id,N=_.onPostCommit;typeof N=="function"&&N(A,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(z){St(o,o.return,z)}}else hr(r,o,l,f);break;case 31:hr(r,o,l,f);break;case 13:hr(r,o,l,f);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?hr(r,o,l,f):Iu(r,o):_._visibility&2?hr(r,o,l,f):(_._visibility|=2,ja(r,o,l,f,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Bm(A,o);break;case 24:hr(r,o,l,f),v&2048&&qm(o.alternate,o);break;default:hr(r,o,l,f)}}function ja(r,o,l,f,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,A=o,N=l,z=f,Q=A.flags;switch(A.tag){case 0:case 11:case 15:ja(_,A,N,z,v),wu(8,A);break;case 23:break;case 22:var re=A.stateNode;A.memoizedState!==null?re._visibility&2?ja(_,A,N,z,v):Iu(_,A):(re._visibility|=2,ja(_,A,N,z,v)),v&&Q&2048&&Bm(A.alternate,A);break;case 24:ja(_,A,N,z,v),v&&Q&2048&&qm(A.alternate,A);break;default:ja(_,A,N,z,v)}o=o.sibling}}function Iu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,f=o,v=f.flags;switch(f.tag){case 22:Iu(l,f),v&2048&&Bm(f.alternate,f);break;case 24:Iu(l,f),v&2048&&qm(f.alternate,f);break;default:Iu(l,f)}o=o.sibling}}var Ru=8192;function Wa(r,o,l){if(r.subtreeFlags&Ru)for(r=r.child;r!==null;)yE(r,o,l),r=r.sibling}function yE(r,o,l){switch(r.tag){case 26:Wa(r,o,l),r.flags&Ru&&r.memoizedState!==null&&gN(l,dr,r.memoizedState,r.memoizedProps);break;case 5:Wa(r,o,l);break;case 3:case 4:var f=dr;dr=od(r.stateNode.containerInfo),Wa(r,o,l),dr=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=Ru,Ru=16777216,Wa(r,o,l),Ru=f):Wa(r,o,l));break;default:Wa(r,o,l)}}function vE(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function xu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];Rn=f,EE(f,r)}vE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)_E(r),r=r.sibling}function _E(r){switch(r.tag){case 0:case 11:case 15:xu(r),r.flags&2048&&Hs(9,r,r.return);break;case 3:xu(r);break;case 12:xu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Yf(r)):xu(r);break;default:xu(r)}}function Yf(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];Rn=f,EE(f,r)}vE(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Hs(8,o,o.return),Yf(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Yf(o));break;default:Yf(o)}r=r.sibling}}function EE(r,o){for(;Rn!==null;){var l=Rn;switch(l.tag){case 0:case 11:case 15:Hs(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:du(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,Rn=f;else e:for(l=r;Rn!==null;){f=Rn;var v=f.sibling,_=f.return;if(cE(f),f===l){Rn=null;break e}if(v!==null){v.return=_,Rn=v;break e}Rn=_}}}var D1={getCacheForType:function(r){var o=Vn(un),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l},cacheSignal:function(){return Vn(un).controller.signal}},M1=typeof WeakMap=="function"?WeakMap:Map,pt=0,Rt=null,We=null,Ze=0,Tt=0,Pi=null,Gs=!1,Qa=!1,zm=!1,os=0,jt=0,Ks=0,ea=0,Hm=0,ki=0,Xa=0,Nu=null,_i=null,Gm=!1,$f=0,TE=0,jf=1/0,Wf=null,Js=null,vn=0,Ys=null,Za=null,as=0,Km=0,Jm=null,SE=null,Du=0,Ym=null;function Li(){return(pt&2)!==0&&Ze!==0?Ze&-Ze:te.T!==null?Zm():ii()}function AE(){if(ki===0)if((Ze&536870912)===0||rt){var r=je;je<<=1,(je&3932160)===0&&(je=262144),ki=r}else ki=536870912;return r=Di.current,r!==null&&(r.flags|=32),ki}function Ei(r,o,l){(r===Rt&&(Tt===2||Tt===9)||r.cancelPendingCommit!==null)&&(el(r,0),$s(r,Ze,ki,!1)),xt(r,l),((pt&2)===0||r!==Rt)&&(r===Rt&&((pt&2)===0&&(ea|=l),jt===4&&$s(r,Ze,ki,!1)),Nr(r))}function bE(r,o,l){if((pt&6)!==0)throw Error(i(327));var f=!l&&(o&127)===0&&(o&r.expiredLanes)===0||Ke(r,o),v=f?L1(r,o):jm(r,o,!0),_=f;do{if(v===0){Qa&&!f&&$s(r,o,0,!1);break}else{if(l=r.current.alternate,_&&!P1(l)){v=jm(r,o,!1),_=!1;continue}if(v===2){if(_=o,r.errorRecoveryDisabledLanes&_)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var N=r;v=Nu;var z=N.current.memoizedState.isDehydrated;if(z&&(el(N,A).flags|=256),A=jm(N,A,!1),A!==2){if(zm&&!z){N.errorRecoveryDisabledLanes|=_,ea|=_,v=4;break e}_=_i,_i=v,_!==null&&(_i===null?_i=_:_i.push.apply(_i,_))}v=A}if(_=!1,v!==2)continue}}if(v===1){el(r,0),$s(r,o,0,!0);break}e:{switch(f=r,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:$s(f,o,ki,!Gs);break e;case 2:_i=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=$f+300-ht(),10<v)){if($s(f,o,ki,!Gs),De(f,0,!0)!==0)break e;as=o,f.timeoutHandle=tT(wE.bind(null,f,l,_i,Wf,Gm,o,ki,ea,Xa,Gs,_,"Throttled",-0,0),v);break e}wE(f,l,_i,Wf,Gm,o,ki,ea,Xa,Gs,_,null,-0,0)}}break}while(!0);Nr(r)}function wE(r,o,l,f,v,_,A,N,z,Q,re,oe,Z,ne){if(r.timeoutHandle=-1,oe=o.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wn},yE(o,_,oe);var Ee=(_&62914560)===_?$f-ht():(_&4194048)===_?TE-ht():0;if(Ee=yN(oe,Ee),Ee!==null){as=_,r.cancelPendingCommit=Ee(PE.bind(null,r,o,_,l,f,v,A,N,z,re,oe,null,Z,ne)),$s(r,_,A,!Q);return}}PE(r,o,_,l,f,v,A,N,z)}function P1(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var v=l[f],_=v.getSnapshot;v=v.value;try{if(!xi(_(),v))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $s(r,o,l,f){o&=~Hm,o&=~ea,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var v=o;0<v;){var _=31-Se(v),A=1<<_;f[_]=-1,v&=~A}l!==0&&ni(r,l,o)}function Qf(){return(pt&6)===0?(Mu(0),!1):!0}function $m(){if(We!==null){if(Tt===0)var r=We.return;else r=We,Wr=Ko=null,cm(r),Ga=null,pu=0,r=We;for(;r!==null;)nE(r.alternate,r),r=r.return;We=null}}function el(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,Z1(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),as=0,$m(),Rt=r,We=l=$r(r.current,null),Ze=o,Tt=0,Pi=null,Gs=!1,Qa=Ke(r,o),zm=!1,Xa=ki=Hm=ea=Ks=jt=0,_i=Nu=null,Gm=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var v=31-Se(f),_=1<<v;o|=r[v],f&=~_}return os=o,vf(),l}function CE(r,o){ze=null,te.H=Su,o===Ha||o===Cf?(o=z0(),Tt=3):o===Xp?(o=z0(),Tt=4):Tt=o===Cm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Pi=o,We===null&&(jt=1,Bf(r,$i(o,r.current)))}function IE(){var r=Di.current;return r===null?!0:(Ze&4194048)===Ze?Xi===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?r===Xi:!1}function RE(){var r=te.H;return te.H=Su,r===null?Su:r}function xE(){var r=te.A;return te.A=D1,r}function Xf(){jt=4,Gs||(Ze&4194048)!==Ze&&Di.current!==null||(Qa=!0),(Ks&134217727)===0&&(ea&134217727)===0||Rt===null||$s(Rt,Ze,ki,!1)}function jm(r,o,l){var f=pt;pt|=2;var v=RE(),_=xE();(Rt!==r||Ze!==o)&&(Wf=null,el(r,o)),o=!1;var A=jt;e:do try{if(Tt!==0&&We!==null){var N=We,z=Pi;switch(Tt){case 8:$m(),A=6;break e;case 3:case 2:case 9:case 6:Di.current===null&&(o=!0);var Q=Tt;if(Tt=0,Pi=null,tl(r,N,z,Q),l&&Qa){A=0;break e}break;default:Q=Tt,Tt=0,Pi=null,tl(r,N,z,Q)}}k1(),A=jt;break}catch(re){CE(r,re)}while(!0);return o&&r.shellSuspendCounter++,Wr=Ko=null,pt=f,te.H=v,te.A=_,We===null&&(Rt=null,Ze=0,vf()),A}function k1(){for(;We!==null;)NE(We)}function L1(r,o){var l=pt;pt|=2;var f=RE(),v=xE();Rt!==r||Ze!==o?(Wf=null,jf=ht()+500,el(r,o)):Qa=Ke(r,o);e:do try{if(Tt!==0&&We!==null){o=We;var _=Pi;t:switch(Tt){case 1:Tt=0,Pi=null,tl(r,o,_,1);break;case 2:case 9:if(B0(_)){Tt=0,Pi=null,DE(o);break}o=function(){Tt!==2&&Tt!==9||Rt!==r||(Tt=7),Nr(r)},_.then(o,o);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:B0(_)?(Tt=0,Pi=null,DE(o)):(Tt=0,Pi=null,tl(r,o,_,7));break;case 5:var A=null;switch(We.tag){case 26:A=We.memoizedState;case 5:case 27:var N=We;if(A?gT(A):N.stateNode.complete){Tt=0,Pi=null;var z=N.sibling;if(z!==null)We=z;else{var Q=N.return;Q!==null?(We=Q,Zf(Q)):We=null}break t}}Tt=0,Pi=null,tl(r,o,_,5);break;case 6:Tt=0,Pi=null,tl(r,o,_,6);break;case 8:$m(),jt=6;break e;default:throw Error(i(462))}}V1();break}catch(re){CE(r,re)}while(!0);return Wr=Ko=null,te.H=f,te.A=v,pt=l,We!==null?0:(Rt=null,Ze=0,vf(),jt)}function V1(){for(;We!==null&&!or();)NE(We)}function NE(r){var o=eE(r.alternate,r,os);r.memoizedProps=r.pendingProps,o===null?Zf(r):We=o}function DE(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=$_(l,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=$_(l,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:cm(o);default:nE(l,o),o=We=x0(o,os),o=eE(l,o,os)}r.memoizedProps=r.pendingProps,o===null?Zf(r):We=o}function tl(r,o,l,f){Wr=Ko=null,cm(o),Ga=null,pu=0;var v=o.return;try{if(b1(r,v,o,l,Ze)){jt=1,Bf(r,$i(l,r.current)),We=null;return}}catch(_){if(v!==null)throw We=v,_;jt=1,Bf(r,$i(l,r.current)),We=null;return}o.flags&32768?(rt||f===1?r=!0:Qa||(Ze&536870912)!==0?r=!1:(Gs=r=!0,(f===2||f===9||f===3||f===6)&&(f=Di.current,f!==null&&f.tag===13&&(f.flags|=16384))),ME(o,r)):Zf(o)}function Zf(r){var o=r;do{if((o.flags&32768)!==0){ME(o,Gs);return}r=o.return;var l=I1(o.alternate,o,os);if(l!==null){We=l;return}if(o=o.sibling,o!==null){We=o;return}We=o=r}while(o!==null);jt===0&&(jt=5)}function ME(r,o){do{var l=R1(r.alternate,r);if(l!==null){l.flags&=32767,We=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){We=r;return}We=r=l}while(r!==null);jt=6,We=null}function PE(r,o,l,f,v,_,A,N,z){r.cancelPendingCommit=null;do ed();while(vn!==0);if((pt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=Op,Et(r,l,_,A,N,z),r===Rt&&(We=Rt=null,Ze=0),Za=o,Ys=r,as=l,Km=_,Jm=v,SE=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,B1(on,function(){return UE(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=te.T,te.T=null,v=ue.p,ue.p=2,A=pt,pt|=4;try{x1(r,o,l)}finally{pt=A,ue.p=v,te.T=f}}vn=1,kE(),LE(),VE()}}function kE(){if(vn===1){vn=0;var r=Ys,o=Za,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=te.T,te.T=null;var f=ue.p;ue.p=2;var v=pt;pt|=4;try{pE(o,r);var _=ag,A=E0(r.containerInfo),N=_.focusedElem,z=_.selectionRange;if(A!==N&&N&&N.ownerDocument&&_0(N.ownerDocument.documentElement,N)){if(z!==null&&Mp(N)){var Q=z.start,re=z.end;if(re===void 0&&(re=Q),"selectionStart"in N)N.selectionStart=Q,N.selectionEnd=Math.min(re,N.value.length);else{var oe=N.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var ne=Z.getSelection(),Ee=N.textContent.length,Me=Math.min(z.start,Ee),Ct=z.end===void 0?Me:Math.min(z.end,Ee);!ne.extend&&Me>Ct&&(A=Ct,Ct=Me,Me=A);var $=v0(N,Me),K=v0(N,Ct);if($&&K&&(ne.rangeCount!==1||ne.anchorNode!==$.node||ne.anchorOffset!==$.offset||ne.focusNode!==K.node||ne.focusOffset!==K.offset)){var W=oe.createRange();W.setStart($.node,$.offset),ne.removeAllRanges(),Me>Ct?(ne.addRange(W),ne.extend(K.node,K.offset)):(W.setEnd(K.node,K.offset),ne.addRange(W))}}}}for(oe=[],ne=N;ne=ne.parentNode;)ne.nodeType===1&&oe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<oe.length;N++){var se=oe[N];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}dd=!!og,ag=og=null}finally{pt=v,ue.p=f,te.T=l}}r.current=o,vn=2}}function LE(){if(vn===2){vn=0;var r=Ys,o=Za,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=te.T,te.T=null;var f=ue.p;ue.p=2;var v=pt;pt|=4;try{uE(r,o.alternate,o)}finally{pt=v,ue.p=f,te.T=l}}vn=3}}function VE(){if(vn===4||vn===3){vn=0,Ui();var r=Ys,o=Za,l=as,f=SE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?vn=5:(vn=0,Za=Ys=null,OE(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Js=null),kn(l),o=o.stateNode,bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Ai,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=te.T,v=ue.p,ue.p=2,te.T=null;try{for(var _=r.onRecoverableError,A=0;A<f.length;A++){var N=f[A];_(N.value,{componentStack:N.stack})}}finally{te.T=o,ue.p=v}}(as&3)!==0&&ed(),Nr(r),v=r.pendingLanes,(l&261930)!==0&&(v&42)!==0?r===Ym?Du++:(Du=0,Ym=r):Du=0,Mu(0)}}function OE(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,du(o)))}function ed(){return kE(),LE(),VE(),UE()}function UE(){if(vn!==5)return!1;var r=Ys,o=Km;Km=0;var l=kn(as),f=te.T,v=ue.p;try{ue.p=32>l?32:l,te.T=null,l=Jm,Jm=null;var _=Ys,A=as;if(vn=0,Za=Ys=null,as=0,(pt&6)!==0)throw Error(i(331));var N=pt;if(pt|=4,_E(_.current),gE(_,_.current,A,l),pt=N,Mu(0,!1),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Ai,_)}catch{}return!0}finally{ue.p=v,te.T=f,OE(r,o)}}function FE(r,o,l){o=$i(l,o),o=wm(r.stateNode,o,2),r=Bs(r,o,2),r!==null&&(xt(r,2),Nr(r))}function St(r,o,l){if(r.tag===3)FE(r,r,l);else for(;o!==null;){if(o.tag===3){FE(o,r,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Js===null||!Js.has(f))){r=$i(l,r),l=B_(2),f=Bs(o,l,2),f!==null&&(q_(l,f,o,r),xt(f,2),Nr(f));break}}o=o.return}}function Wm(r,o,l){var f=r.pingCache;if(f===null){f=r.pingCache=new M1;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(l)||(zm=!0,v.add(l),r=O1.bind(null,r,o,l),o.then(r,r))}function O1(r,o,l){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,Rt===r&&(Ze&l)===l&&(jt===4||jt===3&&(Ze&62914560)===Ze&&300>ht()-$f?(pt&2)===0&&el(r,0):Hm|=l,Xa===Ze&&(Xa=0)),Nr(r)}function BE(r,o){o===0&&(o=Fi()),r=zo(r,o),r!==null&&(xt(r,o),Nr(r))}function U1(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),BE(r,l)}function F1(r,o){var l=0;switch(r.tag){case 31:case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),BE(r,l)}function B1(r,o){return Jt(r,o)}var td=null,nl=null,Qm=!1,nd=!1,Xm=!1,js=0;function Nr(r){r!==nl&&r.next===null&&(nl===null?td=nl=r:nl=nl.next=r),nd=!0,Qm||(Qm=!0,z1())}function Mu(r,o){if(!Xm&&nd){Xm=!0;do for(var l=!1,f=td;f!==null;){if(r!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var A=f.suspendedLanes,N=f.pingedLanes;_=(1<<31-Se(42|r)+1)-1,_&=v&~(A&~N),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,GE(f,_))}else _=Ze,_=De(f,f===Rt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||Ke(f,_)||(l=!0,GE(f,_));f=f.next}while(l);Xm=!1}}function q1(){qE()}function qE(){nd=Qm=!1;var r=0;js!==0&&X1()&&(r=js);for(var o=ht(),l=null,f=td;f!==null;){var v=f.next,_=zE(f,o);_===0?(f.next=null,l===null?td=v:l.next=v,v===null&&(nl=l)):(l=f,(r!==0||(_&3)!==0)&&(nd=!0)),f=v}vn!==0&&vn!==5||Mu(r),js!==0&&(js=0)}function zE(r,o){for(var l=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var A=31-Se(_),N=1<<A,z=v[A];z===-1?((N&l)===0||(N&f)!==0)&&(v[A]=yn(N,o)):z<=o&&(r.expiredLanes|=N),_&=~N}if(o=Rt,l=Ze,l=De(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,l===0||r===o&&(Tt===2||Tt===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&gn(f),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ke(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(f!==null&&gn(f),kn(l)){case 2:case 8:l=Ht;break;case 32:l=on;break;case 268435456:l=Ts;break;default:l=on}return f=HE.bind(null,r),l=Jt(l,f),r.callbackPriority=o,r.callbackNode=l,o}return f!==null&&f!==null&&gn(f),r.callbackPriority=2,r.callbackNode=null,2}function HE(r,o){if(vn!==0&&vn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(ed()&&r.callbackNode!==l)return null;var f=Ze;return f=De(r,r===Rt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(bE(r,f,o),zE(r,ht()),r.callbackNode!=null&&r.callbackNode===l?HE.bind(null,r):null)}function GE(r,o){if(ed())return null;bE(r,o,!0)}function z1(){eN(function(){(pt&6)!==0?Jt(qe,q1):qE()})}function Zm(){if(js===0){var r=qa;r===0&&(r=$e,$e<<=1,($e&261888)===0&&($e=256)),js=r}return js}function KE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:br(""+r)}function JE(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function H1(r,o,l,f,v){if(o==="submit"&&l&&l.stateNode===v){var _=KE((v[tn]||null).action),A=f.submitter;A&&(o=(o=A[tn]||null)?KE(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var N=new Lo("action","action",null,f,v);r.push({event:N,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(js!==0){var z=A?JE(v,A):new FormData(v);_m(l,{pending:!0,data:z,method:v.method,action:_},null,z)}}else typeof _=="function"&&(N.preventDefault(),z=A?JE(v,A):new FormData(v),_m(l,{pending:!0,data:z,method:v.method,action:_},_,z))},currentTarget:v}]})}}for(var eg=0;eg<Vp.length;eg++){var tg=Vp[eg],G1=tg.toLowerCase(),K1=tg[0].toUpperCase()+tg.slice(1);fr(G1,"on"+K1)}fr(A0,"onAnimationEnd"),fr(b0,"onAnimationIteration"),fr(w0,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(a1,"onTransitionRun"),fr(l1,"onTransitionStart"),fr(u1,"onTransitionCancel"),fr(C0,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function YE(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var f=r[l],v=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var A=f.length-1;0<=A;A--){var N=f[A],z=N.instance,Q=N.currentTarget;if(N=N.listener,z!==_&&v.isPropagationStopped())break e;_=N,v.currentTarget=Q;try{_(v)}catch(re){yf(re)}v.currentTarget=null,_=z}else for(A=0;A<f.length;A++){if(N=f[A],z=N.instance,Q=N.currentTarget,N=N.listener,z!==_&&v.isPropagationStopped())break e;_=N,v.currentTarget=Q;try{_(v)}catch(re){yf(re)}v.currentTarget=null,_=z}}}}function Qe(r,o){var l=o[qi];l===void 0&&(l=o[qi]=new Set);var f=r+"__bubble";l.has(f)||($E(o,r,2,!1),l.add(f))}function ng(r,o,l){var f=0;o&&(f|=4),$E(l,r,f,o)}var id="_reactListening"+Math.random().toString(36).slice(2);function ig(r){if(!r[id]){r[id]=!0,lr.forEach(function(l){l!=="selectionchange"&&(J1.has(l)||ng(l,!1,r),ng(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[id]||(o[id]=!0,ng("selectionchange",!1,o))}}function $E(r,o,l,f){switch(AT(o)){case 2:var v=EN;break;case 8:v=TN;break;default:v=vg}l=v.bind(null,o,l,r),v=void 0,!tu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(o,l,{capture:!0,passive:v}):r.addEventListener(o,l,!0):v!==void 0?r.addEventListener(o,l,{passive:v}):r.addEventListener(o,l,!1)}function rg(r,o,l,f,v){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var N=f.stateNode.containerInfo;if(N===v)break;if(A===4)for(A=f.return;A!==null;){var z=A.tag;if((z===3||z===4)&&A.stateNode.containerInfo===v)return;A=A.return}for(;N!==null;){if(A=hi(N),A===null)return;if(z=A.tag,z===5||z===6||z===26||z===27){f=_=A;continue e}N=N.parentNode}}f=f.return}ef(function(){var Q=_,re=Ra(l),oe=[];e:{var Z=I0.get(r);if(Z!==void 0){var ne=Lo,Ee=r;switch(r){case"keypress":if(ko(l)===0)break e;case"keydown":case"keyup":ne=cf;break;case"focusin":Ee="focus",ne=Ns;break;case"focusout":Ee="blur",ne=Ns;break;case"beforeblur":case"afterblur":ne=Ns;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=df;break;case A0:case b0:case w0:ne=Da;break;case C0:ne=Ma;break;case"scroll":case"scrollend":ne=tf;break;case"wheel":ne=pf;break;case"copy":case"cut":case"paste":ne=of;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=ou;break;case"toggle":case"beforetoggle":ne=Ms}var Me=(o&4)!==0,Ct=!Me&&(r==="scroll"||r==="scrollend"),$=Me?Z!==null?Z+"Capture":null:Z;Me=[];for(var K=Q,W;K!==null;){var se=K;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||$===null||(se=pi(K,$),se!=null&&Me.push(ku(K,se,W))),Ct)break;K=K.return}0<Me.length&&(Z=new ne(Z,Ee,null,l,re),oe.push({event:Z,listeners:Me}))}}if((o&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",Z&&l!==Ia&&(Ee=l.relatedTarget||l.fromElement)&&(hi(Ee)||Ee[wi]))break e;if((ne||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,ne?(Ee=l.relatedTarget||l.toElement,ne=Q,Ee=Ee?hi(Ee):null,Ee!==null&&(Ct=a(Ee),Me=Ee.tag,Ee!==Ct||Me!==5&&Me!==27&&Me!==6)&&(Ee=null)):(ne=null,Ee=Q),ne!==Ee)){if(Me=nf,se="onMouseLeave",$="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(Me=ou,se="onPointerLeave",$="onPointerEnter",K="pointer"),Ct=ne==null?Z:Sr(ne),W=Ee==null?Z:Sr(Ee),Z=new Me(se,K+"leave",ne,l,re),Z.target=Ct,Z.relatedTarget=W,se=null,hi(re)===Q&&(Me=new Me($,K+"enter",Ee,l,re),Me.target=W,Me.relatedTarget=Ct,se=Me),Ct=se,ne&&Ee)t:{for(Me=Y1,$=ne,K=Ee,W=0,se=$;se;se=Me(se))W++;se=0;for(var xe=K;xe;xe=Me(xe))se++;for(;0<W-se;)$=Me($),W--;for(;0<se-W;)K=Me(K),se--;for(;W--;){if($===K||K!==null&&$===K.alternate){Me=$;break t}$=Me($),K=Me(K)}Me=null}else Me=null;ne!==null&&jE(oe,Z,ne,Me,!1),Ee!==null&&Ct!==null&&jE(oe,Ct,Ee,Me,!0)}}e:{if(Z=Q?Sr(Q):window,ne=Z.nodeName&&Z.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Z.type==="file")var ut=d0;else if(mi(Z))if(h0)ut=r1;else{ut=n1;var we=t1}else ne=Z.nodeName,!ne||ne.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&Zl(Q.elementType)&&(ut=d0):ut=i1;if(ut&&(ut=ut(r,Q))){Fo(oe,ut,l,re);break e}we&&we(r,Z,Q),r==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&Ca(Z,"number",Z.value)}switch(we=Q?Sr(Q):window,r){case"focusin":(mi(we)||we.contentEditable==="true")&&(Pa=we,Pp=Q,uu=null);break;case"focusout":uu=Pp=Pa=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,T0(oe,l,re);break;case"selectionchange":if(o1)break;case"keydown":case"keyup":T0(oe,l,re)}var He;if(S)e:{switch(r){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Je?gt(r,l)&&(et="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(et="onCompositionStart");et&&(j&&l.locale!=="ko"&&(Je||et!=="onCompositionStart"?et==="onCompositionEnd"&&Je&&(He=Cs()):(Ri=re,xa="value"in Ri?Ri.value:Ri.textContent,Je=!0)),we=rd(Q,et),0<we.length&&(et=new iu(et,r,null,l,re),oe.push({event:et,listeners:we}),He?et.data=He:(He=ln(l),He!==null&&(et.data=He)))),(He=P?Cn(r,l):In(r,l))&&(et=rd(Q,"onBeforeInput"),0<et.length&&(we=new iu("onBeforeInput","beforeinput",null,l,re),oe.push({event:we,listeners:et}),we.data=He)),H1(oe,r,Q,l,re)}YE(oe,o)})}function ku(r,o,l){return{instance:r,listener:o,currentTarget:l}}function rd(r,o){for(var l=o+"Capture",f=[];r!==null;){var v=r,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=pi(r,l),v!=null&&f.unshift(ku(r,v,_)),v=pi(r,o),v!=null&&f.push(ku(r,v,_))),r.tag===3)return f;r=r.return}return[]}function Y1(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function jE(r,o,l,f,v){for(var _=o._reactName,A=[];l!==null&&l!==f;){var N=l,z=N.alternate,Q=N.stateNode;if(N=N.tag,z!==null&&z===f)break;N!==5&&N!==26&&N!==27||Q===null||(z=Q,v?(Q=pi(l,_),Q!=null&&A.unshift(ku(l,Q,z))):v||(Q=pi(l,_),Q!=null&&A.push(ku(l,Q,z)))),l=l.return}A.length!==0&&r.push({event:o,listeners:A})}var $1=/\r\n?/g,j1=/\u0000|\uFFFD/g;function WE(r){return(typeof r=="string"?r:""+r).replace($1,`
`).replace(j1,"")}function QE(r,o){return o=WE(o),WE(r)===o}function wt(r,o,l,f,v,_){switch(l){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Ji(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Ji(r,""+f);break;case"className":As(r,"class",f);break;case"tabIndex":As(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":As(r,l,f);break;case"style":Xc(r,f,_);break;case"data":if(o!=="object"){As(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(l);break}f=br(""+f),r.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(o!=="input"&&wt(r,o,"name",v.name,v,null),wt(r,o,"formEncType",v.formEncType,v,null),wt(r,o,"formMethod",v.formMethod,v,null),wt(r,o,"formTarget",v.formTarget,v,null)):(wt(r,o,"encType",v.encType,v,null),wt(r,o,"method",v.method,v,null),wt(r,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(l);break}f=br(""+f),r.setAttribute(l,f);break;case"onClick":f!=null&&(r.onclick=wn);break;case"onScroll":f!=null&&Qe("scroll",r);break;case"onScrollEnd":f!=null&&Qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}l=br(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(l,""+f):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":f===!0?r.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(l,f):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(l,f):r.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(l):r.setAttribute(l,f);break;case"popover":Qe("beforetoggle",r),Qe("toggle",r),Ss(r,"popover",f);break;case"xlinkActuate":Ki(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ki(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ki(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ki(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ki(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ki(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ki(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ki(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ki(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ss(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ip.get(l)||l,Ss(r,l,f))}}function sg(r,o,l,f,v,_){switch(l){case"style":Xc(r,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof f=="string"?Ji(r,f):(typeof f=="number"||typeof f=="bigint")&&Ji(r,""+f);break;case"onScroll":f!=null&&Qe("scroll",r);break;case"onScrollEnd":f!=null&&Qe("scrollend",r);break;case"onClick":f!=null&&(r.onclick=wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ur.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),o=l.slice(2,v?l.length-7:void 0),_=r[tn]||null,_=_!=null?_[l]:null,typeof _=="function"&&r.removeEventListener(o,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,f,v);break e}l in r?r[l]=f:f===!0?r.setAttribute(l,""):Ss(r,l,f)}}}function Un(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",r),Qe("load",r);var f=!1,v=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:wt(r,o,_,A,l,null)}}v&&wt(r,o,"srcSet",l.srcSet,l,null),f&&wt(r,o,"src",l.src,l,null);return;case"input":Qe("invalid",r);var N=_=A=v=null,z=null,Q=null;for(f in l)if(l.hasOwnProperty(f)){var re=l[f];if(re!=null)switch(f){case"name":v=re;break;case"type":A=re;break;case"checked":z=re;break;case"defaultChecked":Q=re;break;case"value":_=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:wt(r,o,f,re,l,null)}}Mo(r,_,N,z,Q,A,v,!1);return;case"select":Qe("invalid",r),f=A=_=null;for(v in l)if(l.hasOwnProperty(v)&&(N=l[v],N!=null))switch(v){case"value":_=N;break;case"defaultValue":A=N;break;case"multiple":f=N;default:wt(r,o,v,N,l,null)}o=_,l=A,r.multiple=!!f,o!=null?lt(r,!!f,o,!1):l!=null&&lt(r,!!f,l,!0);return;case"textarea":Qe("invalid",r),_=v=f=null;for(A in l)if(l.hasOwnProperty(A)&&(N=l[A],N!=null))switch(A){case"value":f=N;break;case"defaultValue":v=N;break;case"children":_=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:wt(r,o,A,N,l,null)}ws(r,f,v,_);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(f=l[z],f!=null))switch(z){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:wt(r,o,z,f,l,null)}return;case"dialog":Qe("beforetoggle",r),Qe("toggle",r),Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":Qe("load",r);break;case"video":case"audio":for(f=0;f<Pu.length;f++)Qe(Pu[f],r);break;case"image":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"embed":case"source":case"link":Qe("error",r),Qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(f=l[Q],f!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:wt(r,o,Q,f,l,null)}return;default:if(Zl(o)){for(re in l)l.hasOwnProperty(re)&&(f=l[re],f!==void 0&&sg(r,o,re,f,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(f=l[N],f!=null&&wt(r,o,N,f,l,null))}function W1(r,o,l,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,A=null,N=null,z=null,Q=null,re=null;for(ne in l){var oe=l[ne];if(l.hasOwnProperty(ne)&&oe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":z=oe;default:f.hasOwnProperty(ne)||wt(r,o,ne,null,f,oe)}}for(var Z in f){var ne=f[Z];if(oe=l[Z],f.hasOwnProperty(Z)&&(ne!=null||oe!=null))switch(Z){case"type":_=ne;break;case"name":v=ne;break;case"checked":Q=ne;break;case"defaultChecked":re=ne;break;case"value":A=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ne!==oe&&wt(r,o,Z,ne,f,oe)}}bs(r,A,N,z,Q,re,_,v);return;case"select":ne=A=N=Z=null;for(_ in l)if(z=l[_],l.hasOwnProperty(_)&&z!=null)switch(_){case"value":break;case"multiple":ne=z;default:f.hasOwnProperty(_)||wt(r,o,_,null,f,z)}for(v in f)if(_=f[v],z=l[v],f.hasOwnProperty(v)&&(_!=null||z!=null))switch(v){case"value":Z=_;break;case"defaultValue":N=_;break;case"multiple":A=_;default:_!==z&&wt(r,o,v,_,f,z)}o=N,l=A,f=ne,Z!=null?lt(r,!!l,Z,!1):!!f!=!!l&&(o!=null?lt(r,!!l,o,!0):lt(r,!!l,l?[]:"",!1));return;case"textarea":ne=Z=null;for(N in l)if(v=l[N],l.hasOwnProperty(N)&&v!=null&&!f.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:wt(r,o,N,null,f,v)}for(A in f)if(v=f[A],_=l[A],f.hasOwnProperty(A)&&(v!=null||_!=null))switch(A){case"value":Z=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&wt(r,o,A,v,f,_)}Po(r,Z,ne);return;case"option":for(var Ee in l)if(Z=l[Ee],l.hasOwnProperty(Ee)&&Z!=null&&!f.hasOwnProperty(Ee))switch(Ee){case"selected":r.selected=!1;break;default:wt(r,o,Ee,null,f,Z)}for(z in f)if(Z=f[z],ne=l[z],f.hasOwnProperty(z)&&Z!==ne&&(Z!=null||ne!=null))switch(z){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:wt(r,o,z,Z,f,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in l)Z=l[Me],l.hasOwnProperty(Me)&&Z!=null&&!f.hasOwnProperty(Me)&&wt(r,o,Me,null,f,Z);for(Q in f)if(Z=f[Q],ne=l[Q],f.hasOwnProperty(Q)&&Z!==ne&&(Z!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:wt(r,o,Q,Z,f,ne)}return;default:if(Zl(o)){for(var Ct in l)Z=l[Ct],l.hasOwnProperty(Ct)&&Z!==void 0&&!f.hasOwnProperty(Ct)&&sg(r,o,Ct,void 0,f,Z);for(re in f)Z=f[re],ne=l[re],!f.hasOwnProperty(re)||Z===ne||Z===void 0&&ne===void 0||sg(r,o,re,Z,f,ne);return}}for(var $ in l)Z=l[$],l.hasOwnProperty($)&&Z!=null&&!f.hasOwnProperty($)&&wt(r,o,$,null,f,Z);for(oe in f)Z=f[oe],ne=l[oe],!f.hasOwnProperty(oe)||Z===ne||Z==null&&ne==null||wt(r,o,oe,Z,f,ne)}function XE(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Q1(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var v=l[f],_=v.transferSize,A=v.initiatorType,N=v.duration;if(_&&N&&XE(A)){for(A=0,N=v.responseEnd,f+=1;f<l.length;f++){var z=l[f],Q=z.startTime;if(Q>N)break;var re=z.transferSize,oe=z.initiatorType;re&&XE(oe)&&(z=z.responseEnd,A+=re*(z<N?1:(N-Q)/(z-Q)))}if(--f,o+=8*(_+A)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var og=null,ag=null;function sd(r){return r.nodeType===9?r:r.ownerDocument}function ZE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function lg(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ug=null;function X1(){var r=window.event;return r&&r.type==="popstate"?r===ug?!1:(ug=r,!0):(ug=null,!1)}var tT=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,nT=typeof Promise=="function"?Promise:void 0,eN=typeof queueMicrotask=="function"?queueMicrotask:typeof nT<"u"?function(r){return nT.resolve(null).then(r).catch(tN)}:tT;function tN(r){setTimeout(function(){throw r})}function Ws(r){return r==="head"}function iT(r,o){var l=o,f=0;do{var v=l.nextSibling;if(r.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(f===0){r.removeChild(v),ol(o);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")Lu(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Lu(l);for(var _=l.firstChild;_;){var A=_.nextSibling,N=_.nodeName;_[zi]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&Lu(r.ownerDocument.body);l=v}while(l);ol(o)}function rT(r,o){var l=r;r=0;do{var f=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=f}while(l)}function cg(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":cg(l),Hi(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function nN(r,o,l,f){for(;r.nodeType===1;){var v=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[zi])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Zi(r.nextSibling),r===null)break}return null}function iN(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Zi(r.nextSibling),r===null))return null;return r}function sT(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Zi(r.nextSibling),r===null))return null;return r}function fg(r){return r.data==="$?"||r.data==="$~"}function dg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function rN(r,o){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||l.readyState!=="loading")o();else{var f=function(){o(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function Zi(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var hg=null;function oT(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(o===0)return Zi(r.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}r=r.nextSibling}return null}function aT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return r;o--}else l!=="/$"&&l!=="/&"||o++}r=r.previousSibling}return null}function lT(r,o,l){switch(o=sd(l),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Lu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Hi(r)}var er=new Map,uT=new Set;function od(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ls=ue.d;ue.d={f:sN,r:oN,D:aN,C:lN,L:uN,m:cN,X:dN,S:fN,M:hN};function sN(){var r=ls.f(),o=Qf();return r||o}function oN(r){var o=Gi(r);o!==null&&o.tag===5&&o.type==="form"?C_(o):ls.r(r)}var il=typeof document>"u"?null:document;function cT(r,o,l){var f=il;if(f&&typeof o=="string"&&o){var v=Yt(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),uT.has(v)||(uT.add(v),r={rel:r,crossOrigin:l,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),Un(o,"link",r),Bt(o),f.head.appendChild(o)))}}function aN(r){ls.D(r),cT("dns-prefetch",r,null)}function lN(r,o){ls.C(r,o),cT("preconnect",r,o)}function uN(r,o,l){ls.L(r,o,l);var f=il;if(f&&r&&o){var v='link[rel="preload"][as="'+Yt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Yt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Yt(l.imageSizes)+'"]')):v+='[href="'+Yt(r)+'"]';var _=v;switch(o){case"style":_=rl(r);break;case"script":_=sl(r)}er.has(_)||(r=E({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),er.set(_,r),f.querySelector(v)!==null||o==="style"&&f.querySelector(Vu(_))||o==="script"&&f.querySelector(Ou(_))||(o=f.createElement("link"),Un(o,"link",r),Bt(o),f.head.appendChild(o)))}}function cN(r,o){ls.m(r,o);var l=il;if(l&&r){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Yt(f)+'"][href="'+Yt(r)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=sl(r)}if(!er.has(_)&&(r=E({rel:"modulepreload",href:r},o),er.set(_,r),l.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ou(_)))return}f=l.createElement("link"),Un(f,"link",r),Bt(f),l.head.appendChild(f)}}}function fN(r,o,l){ls.S(r,o,l);var f=il;if(f&&r){var v=ri(f).hoistableStyles,_=rl(r);o=o||"default";var A=v.get(_);if(!A){var N={loading:0,preload:null};if(A=f.querySelector(Vu(_)))N.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},l),(l=er.get(_))&&pg(r,l);var z=A=f.createElement("link");Bt(z),Un(z,"link",r),z._p=new Promise(function(Q,re){z.onload=Q,z.onerror=re}),z.addEventListener("load",function(){N.loading|=1}),z.addEventListener("error",function(){N.loading|=2}),N.loading|=4,ad(A,o,f)}A={type:"stylesheet",instance:A,count:1,state:N},v.set(_,A)}}}function dN(r,o){ls.X(r,o);var l=il;if(l&&r){var f=ri(l).hoistableScripts,v=sl(r),_=f.get(v);_||(_=l.querySelector(Ou(v)),_||(r=E({src:r,async:!0},o),(o=er.get(v))&&mg(r,o),_=l.createElement("script"),Bt(_),Un(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function hN(r,o){ls.M(r,o);var l=il;if(l&&r){var f=ri(l).hoistableScripts,v=sl(r),_=f.get(v);_||(_=l.querySelector(Ou(v)),_||(r=E({src:r,async:!0,type:"module"},o),(o=er.get(v))&&mg(r,o),_=l.createElement("script"),Bt(_),Un(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function fT(r,o,l,f){var v=(v=Le.current)?od(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=rl(l.href),l=ri(v).hoistableStyles,f=l.get(o),f||(f={type:"style",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=rl(l.href);var _=ri(v).hoistableStyles,A=_.get(r);if(A||(v=v.ownerDocument||v,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,A),(_=v.querySelector(Vu(r)))&&!_._p&&(A.instance=_,A.state.loading=5),er.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},er.set(r,l),_||pN(v,r,l,A.state))),o&&f===null)throw Error(i(528,""));return A}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=sl(l),l=ri(v).hoistableScripts,f=l.get(o),f||(f={type:"script",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function rl(r){return'href="'+Yt(r)+'"'}function Vu(r){return'link[rel="stylesheet"]['+r+"]"}function dT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function pN(r,o,l,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Un(o,"link",l),Bt(o),r.head.appendChild(o))}function sl(r){return'[src="'+Yt(r)+'"]'}function Ou(r){return"script[async]"+r}function hT(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+Yt(l.href)+'"]');if(f)return o.instance=f,Bt(f),f;var v=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Bt(f),Un(f,"style",v),ad(f,l.precedence,r),o.instance=f;case"stylesheet":v=rl(l.href);var _=r.querySelector(Vu(v));if(_)return o.state.loading|=4,o.instance=_,Bt(_),_;f=dT(l),(v=er.get(v))&&pg(f,v),_=(r.ownerDocument||r).createElement("link"),Bt(_);var A=_;return A._p=new Promise(function(N,z){A.onload=N,A.onerror=z}),Un(_,"link",f),o.state.loading|=4,ad(_,l.precedence,r),o.instance=_;case"script":return _=sl(l.src),(v=r.querySelector(Ou(_)))?(o.instance=v,Bt(v),v):(f=l,(v=er.get(_))&&(f=E({},l),mg(f,v)),r=r.ownerDocument||r,v=r.createElement("script"),Bt(v),Un(v,"link",f),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,ad(f,l.precedence,r));return o.instance}function ad(r,o,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,A=0;A<f.length;A++){var N=f[A];if(N.dataset.precedence===o)_=N;else if(_!==v)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function pg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function mg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var ld=null;function pT(r,o,l){if(ld===null){var f=new Map,v=ld=new Map;v.set(l,f)}else v=ld,f=v.get(l),f||(f=new Map,v.set(l,f));if(f.has(r))return f;for(f.set(r,null),l=l.getElementsByTagName(r),v=0;v<l.length;v++){var _=l[v];if(!(_[zi]||_[Nt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=r+A;var N=f.get(A);N?N.push(_):f.set(A,[_])}}return f}function mT(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function mN(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function gT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function gN(r,o,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=rl(f.href),_=o.querySelector(Vu(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=ud.bind(r),o.then(r,r)),l.state.loading|=4,l.instance=_,Bt(_);return}_=o.ownerDocument||o,f=dT(f),(v=er.get(v))&&pg(f,v),_=_.createElement("link"),Bt(_);var A=_;A._p=new Promise(function(N,z){A.onload=N,A.onerror=z}),Un(_,"link",f),l.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=ud.bind(r),o.addEventListener("load",l),o.addEventListener("error",l))}}var gg=0;function yN(r,o){return r.stylesheets&&r.count===0&&fd(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var f=setTimeout(function(){if(r.stylesheets&&fd(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&gg===0&&(gg=62500*Q1());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&fd(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>gg?50:800)+o);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function ud(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var cd=null;function fd(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,cd=new Map,o.forEach(vN,r),cd=null,ud.call(r))}function vN(r,o){if(!(o.state.loading&4)){var l=cd.get(r);if(l)var f=l.get(null);else{l=new Map,cd.set(r,l);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var A=v[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),f=A)}f&&l.set(null,f)}v=o.instance,A=v.getAttribute("data-precedence"),_=l.get(A)||f,_===f&&l.set(null,v),l.set(A,v),this.count++,f=ud.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var Uu={$$typeof:B,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function _N(r,o,l,f,v,_,A,N,z){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=en(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=en(0),this.hiddenUpdates=en(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function yT(r,o,l,f,v,_,A,N,z,Q,re,oe){return r=new _N(r,o,l,A,z,Q,re,oe,N),o=1,_===!0&&(o|=24),_=Ni(3,null,null,o),r.current=_,_.stateNode=r,o=jp(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:f,isDehydrated:l,cache:o},Zp(_),r}function vT(r){return r?(r=Va,r):Va}function _T(r,o,l,f,v,_){v=vT(v),f.context===null?f.context=v:f.pendingContext=v,f=Fs(o),f.payload={element:l},_=_===void 0?null:_,_!==null&&(f.callback=_),l=Bs(r,f,o),l!==null&&(Ei(l,r,o),gu(l,r,o))}function ET(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function yg(r,o){ET(r,o),(r=r.alternate)&&ET(r,o)}function TT(r){if(r.tag===13||r.tag===31){var o=zo(r,67108864);o!==null&&Ei(o,r,67108864),yg(r,67108864)}}function ST(r){if(r.tag===13||r.tag===31){var o=Li();o=Bi(o);var l=zo(r,o);l!==null&&Ei(l,r,o),yg(r,o)}}var dd=!0;function EN(r,o,l,f){var v=te.T;te.T=null;var _=ue.p;try{ue.p=2,vg(r,o,l,f)}finally{ue.p=_,te.T=v}}function TN(r,o,l,f){var v=te.T;te.T=null;var _=ue.p;try{ue.p=8,vg(r,o,l,f)}finally{ue.p=_,te.T=v}}function vg(r,o,l,f){if(dd){var v=_g(f);if(v===null)rg(r,o,f,hd,l),bT(r,f);else if(AN(v,r,o,l,f))f.stopPropagation();else if(bT(r,f),o&4&&-1<SN.indexOf(r)){for(;v!==null;){var _=Gi(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=it(_.pendingLanes);if(A!==0){var N=_;for(N.pendingLanes|=2,N.entangledLanes|=2;A;){var z=1<<31-Se(A);N.entanglements[1]|=z,A&=~z}Nr(_),(pt&6)===0&&(jf=ht()+500,Mu(0))}}break;case 31:case 13:N=zo(_,2),N!==null&&Ei(N,_,2),Qf(),yg(_,2)}if(_=_g(f),_===null&&rg(r,o,f,hd,l),_===v)break;v=_}v!==null&&f.stopPropagation()}else rg(r,o,f,null,l)}}function _g(r){return r=Ra(r),Eg(r)}var hd=null;function Eg(r){if(hd=null,r=hi(r),r!==null){var o=a(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=u(o),r!==null)return r;r=null}else if(l===31){if(r=c(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return hd=r,null}function AT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zt()){case qe:return 2;case Ht:return 8;case on:case an:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var Tg=!1,Qs=null,Xs=null,Zs=null,Fu=new Map,Bu=new Map,eo=[],SN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bT(r,o){switch(r){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Fu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(o.pointerId)}}function qu(r,o,l,f,v,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},o!==null&&(o=Gi(o),o!==null&&TT(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function AN(r,o,l,f,v){switch(o){case"focusin":return Qs=qu(Qs,r,o,l,f,v),!0;case"dragenter":return Xs=qu(Xs,r,o,l,f,v),!0;case"mouseover":return Zs=qu(Zs,r,o,l,f,v),!0;case"pointerover":var _=v.pointerId;return Fu.set(_,qu(Fu.get(_)||null,r,o,l,f,v)),!0;case"gotpointercapture":return _=v.pointerId,Bu.set(_,qu(Bu.get(_)||null,r,o,l,f,v)),!0}return!1}function wT(r){var o=hi(r.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){r.blockedOn=o,zr(r.priority,function(){ST(l)});return}}else if(o===31){if(o=c(l),o!==null){r.blockedOn=o,zr(r.priority,function(){ST(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function pd(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=_g(r.nativeEvent);if(l===null){l=r.nativeEvent;var f=new l.constructor(l.type,l);Ia=f,l.target.dispatchEvent(f),Ia=null}else return o=Gi(l),o!==null&&TT(o),r.blockedOn=l,!1;o.shift()}return!0}function CT(r,o,l){pd(r)&&l.delete(o)}function bN(){Tg=!1,Qs!==null&&pd(Qs)&&(Qs=null),Xs!==null&&pd(Xs)&&(Xs=null),Zs!==null&&pd(Zs)&&(Zs=null),Fu.forEach(CT),Bu.forEach(CT)}function md(r,o){r.blockedOn===o&&(r.blockedOn=null,Tg||(Tg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,bN)))}var gd=null;function IT(r){gd!==r&&(gd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){gd===r&&(gd=null);for(var o=0;o<r.length;o+=3){var l=r[o],f=r[o+1],v=r[o+2];if(typeof f!="function"){if(Eg(f||l)===null)continue;break}var _=Gi(l);_!==null&&(r.splice(o,3),o-=3,_m(_,{pending:!0,data:v,method:l.method,action:f},f,v))}}))}function ol(r){function o(z){return md(z,r)}Qs!==null&&md(Qs,r),Xs!==null&&md(Xs,r),Zs!==null&&md(Zs,r),Fu.forEach(o),Bu.forEach(o);for(var l=0;l<eo.length;l++){var f=eo[l];f.blockedOn===r&&(f.blockedOn=null)}for(;0<eo.length&&(l=eo[0],l.blockedOn===null);)wT(l),l.blockedOn===null&&eo.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var v=l[f],_=l[f+1],A=v[tn]||null;if(typeof _=="function")A||IT(l);else if(A){var N=null;if(_&&_.hasAttribute("formAction")){if(v=_,A=_[tn]||null)N=A.formAction;else if(Eg(v)!==null)continue}else N=A.action;typeof N=="function"?l[f+1]=N:(l.splice(f,3),f-=3),IT(l)}}}function RT(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return v=A})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Sg(r){this._internalRoot=r}yd.prototype.render=Sg.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,f=Li();_T(l,f,r,o,null,null)},yd.prototype.unmount=Sg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;_T(r.current,2,null,r,null,null),Qf(),o[wi]=null}};function yd(r){this._internalRoot=r}yd.prototype.unstable_scheduleHydration=function(r){if(r){var o=ii();r={blockedOn:null,target:r,priority:o};for(var l=0;l<eo.length&&o!==0&&o<eo[l].priority;l++);eo.splice(l,0,r),l===0&&wT(r)}};var xT=e.version;if(xT!=="19.2.0")throw Error(i(527,xT,"19.2.0"));ue.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var wN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vd.isDisabled&&vd.supportsFiber)try{Ai=vd.inject(wN),bn=vd}catch{}}return Hu.createRoot=function(r,o){if(!s(r))throw Error(i(299));var l=!1,f="",v=V_,_=O_,A=U_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=yT(r,1,!1,null,null,l,f,null,v,_,A,RT),r[wi]=o.current,ig(r),new Sg(o)},Hu.hydrateRoot=function(r,o,l){if(!s(r))throw Error(i(299));var f=!1,v="",_=V_,A=O_,N=U_,z=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),o=yT(r,1,!0,o,l??null,f,v,z,_,A,N,RT),o.context=vT(null),l=o.current,f=Li(),f=Bi(f),v=Fs(f),v.callback=null,Bs(l,v,f),l=f,o.current.lanes=l,xt(o,l),Nr(o),r[wi]=o.current,ig(r),new yd(o)},Hu.version="19.2.0",Hu}var FT;function kN(){if(FT)return wg.exports;FT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wg.exports=PN(),wg.exports}var LN=kN();const VN=Nw(LN),ON=()=>{};var BT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},UN=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],u=t[n++],c=t[n++],d=((s&7)<<18|(a&63)<<12|(u&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Pw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],u=s+1<t.length,c=u?t[s+1]:0,d=s+2<t.length,h=d?t[s+2]:0,y=a>>2,E=(a&3)<<4|c>>4;let T=(c&15)<<2|h>>6,C=h&63;d||(C=64,u||(T=64)),i.push(n[y],n[E],n[T],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Mw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||h==null||E==null)throw new FN;const T=a<<2|c>>4;if(i.push(T),h!==64){const C=c<<4&240|h>>2;if(i.push(C),E!==64){const D=h<<6&192|E;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BN=function(t){const e=Mw(t);return Pw.encodeByteArray(e,!0)},ch=function(t){return BN(t).replace(/\./g,"")},kw=function(t){try{return Pw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=()=>qN().__FIREBASE_DEFAULTS__,HN=()=>{if(typeof process>"u"||typeof BT>"u")return;const t=BT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kw(t[1]);return e&&JSON.parse(e)},Yh=()=>{try{return ON()||zN()||HN()||GN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lw=t=>{var e,n;return(n=(e=Yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vw=t=>{const e=Lw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Ow=()=>{var t;return(t=Yh())===null||t===void 0?void 0:t.config},Uw=t=>{var e;return(e=Yh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ch(JSON.stringify(n)),ch(JSON.stringify(u)),""].join(".")}const ac={};function JN(){const t={prod:[],emulator:[]};for(const e of Object.keys(ac))ac[e]?t.emulator.push(e):t.prod.push(e);return t}function YN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let qT=!1;function Qy(t,e){if(typeof window>"u"||typeof document>"u"||!Co(window.location.host)||ac[t]===e||ac[t]||qT)return;ac[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=JN().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{qT=!0,u()},T}function y(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=YN(i),C=n("text"),D=document.getElementById(C)||document.createElement("span"),k=n("learnmore"),U=document.getElementById(k)||document.createElement("a"),H=n("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;c(B),y(U,k);const Y=h();d(F,H),B.append(F,D,U,Y),document.body.appendChild(B)}a?(D.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $N(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ei())}function jN(){var t;const e=(t=Yh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZN(){const t=ei();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eD(){return!jN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tD(){try{return typeof indexedDB=="object"}catch{return!1}}function nD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="FirebaseError";class qr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=iD,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oc.prototype.create)}}class Oc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?rD(a,i):"Error",c=`${this.serviceName}: ${u} (${s}).`;return new qr(s,c,i)}}function rD(t,e){return t.replace(sD,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const sD=/\{\$([^}]+)}/g;function oD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ca(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],u=e[s];if(zT(a)&&zT(u)){if(!ca(a,u))return!1}else if(a!==u)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function zT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Qu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Xu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function aD(t,e){const n=new lD(t,e);return n.subscribe.bind(n)}class lD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");uD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=xg),s.error===void 0&&(s.error=xg),s.complete===void 0&&(s.complete=xg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class vo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new KN;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dD(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&u.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fD(t){return t===na?void 0:t}function dD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const pD={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},mD=tt.INFO,gD={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},yD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=gD[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xy{constructor(e){this.name=e,this._logLevel=mD,this._logHandler=yD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const vD=(t,e)=>e.some(n=>t instanceof n);let HT,GT;function _D(){return HT||(HT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ED(){return GT||(GT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bw=new WeakMap,Qg=new WeakMap,qw=new WeakMap,Ng=new WeakMap,Zy=new WeakMap;function TD(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(ho(t.result)),s()},u=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Bw.set(n,t)}).catch(()=>{}),Zy.set(e,t),e}function SD(t){if(Qg.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),s()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Qg.set(t,e)}let Xg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AD(t){Xg=t(Xg)}function bD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Dg(this),e,...n);return qw.set(i,e.sort?e.sort():[e]),ho(i)}:ED().includes(t)?function(...e){return t.apply(Dg(this),e),ho(Bw.get(this))}:function(...e){return ho(t.apply(Dg(this),e))}}function wD(t){return typeof t=="function"?bD(t):(t instanceof IDBTransaction&&SD(t),vD(t,_D())?new Proxy(t,Xg):t)}function ho(t){if(t instanceof IDBRequest)return TD(t);if(Ng.has(t))return Ng.get(t);const e=wD(t);return e!==t&&(Ng.set(t,e),Zy.set(e,t)),e}const Dg=t=>Zy.get(t);function CD(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const u=indexedDB.open(t,e),c=ho(u);return i&&u.addEventListener("upgradeneeded",d=>{i(ho(u.result),d.oldVersion,d.newVersion,ho(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const ID=["get","getKey","getAll","getAllKeys","count"],RD=["put","add","delete","clear"],Mg=new Map;function KT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mg.get(e))return Mg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=RD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||ID.includes(n)))return;const a=async function(u,...c){const d=this.transaction(u,s?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&d.done]))[0]};return Mg.set(e,a),a}AD(t=>({...t,get:(e,n,i)=>KT(e,n)||t.get(e,n,i),has:(e,n)=>!!KT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ND(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ND(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zg="@firebase/app",JT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Xy("@firebase/app"),DD="@firebase/app-compat",MD="@firebase/analytics-compat",PD="@firebase/analytics",kD="@firebase/app-check-compat",LD="@firebase/app-check",VD="@firebase/auth",OD="@firebase/auth-compat",UD="@firebase/database",FD="@firebase/data-connect",BD="@firebase/database-compat",qD="@firebase/functions",zD="@firebase/functions-compat",HD="@firebase/installations",GD="@firebase/installations-compat",KD="@firebase/messaging",JD="@firebase/messaging-compat",YD="@firebase/performance",$D="@firebase/performance-compat",jD="@firebase/remote-config",WD="@firebase/remote-config-compat",QD="@firebase/storage",XD="@firebase/storage-compat",ZD="@firebase/firestore",e2="@firebase/ai",t2="@firebase/firestore-compat",n2="firebase",i2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="[DEFAULT]",r2={[Zg]:"fire-core",[DD]:"fire-core-compat",[PD]:"fire-analytics",[MD]:"fire-analytics-compat",[LD]:"fire-app-check",[kD]:"fire-app-check-compat",[VD]:"fire-auth",[OD]:"fire-auth-compat",[UD]:"fire-rtdb",[FD]:"fire-data-connect",[BD]:"fire-rtdb-compat",[qD]:"fire-fn",[zD]:"fire-fn-compat",[HD]:"fire-iid",[GD]:"fire-iid-compat",[KD]:"fire-fcm",[JD]:"fire-fcm-compat",[YD]:"fire-perf",[$D]:"fire-perf-compat",[jD]:"fire-rc",[WD]:"fire-rc-compat",[QD]:"fire-gcs",[XD]:"fire-gcs-compat",[ZD]:"fire-fst",[t2]:"fire-fst-compat",[e2]:"fire-vertex","fire-js":"fire-js",[n2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map,s2=new Map,ty=new Map;function YT(t,e){try{t.container.addComponent(e)}catch(n){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fa(t){const e=t.name;if(ty.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,t);for(const n of fh.values())YT(n,t);for(const n of s2.values())YT(n,t);return!0}function $h(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Si(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},po=new Oc("app","Firebase",o2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=i2;function zw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ey,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw po.create("bad-app-name",{appName:String(s)});if(n||(n=Ow()),!n)throw po.create("no-options");const a=fh.get(s);if(a){if(ca(n,a.options)&&ca(i,a.config))return a;throw po.create("duplicate-app",{appName:s})}const u=new hD(s);for(const d of ty.values())u.addComponent(d);const c=new a2(n,i,u);return fh.set(s,c),c}function ev(t=ey){const e=fh.get(t);if(!e&&t===ey&&Ow())return zw();if(!e)throw po.create("no-app",{appName:t});return e}function Pr(t,e,n){var i;let s=(i=r2[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(c.join(" "));return}fa(new vo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="firebase-heartbeat-database",u2=1,wc="firebase-heartbeat-store";let Pg=null;function Hw(){return Pg||(Pg=CD(l2,u2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wc)}catch(n){console.warn(n)}}}}).catch(t=>{throw po.create("idb-open",{originalErrorMessage:t.message})})),Pg}async function c2(t){try{const n=(await Hw()).transaction(wc),i=await n.objectStore(wc).get(Gw(t));return await n.done,i}catch(e){if(e instanceof qr)ps.warn(e.message);else{const n=po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ps.warn(n.message)}}}async function $T(t,e){try{const i=(await Hw()).transaction(wc,"readwrite");await i.objectStore(wc).put(e,Gw(t)),await i.done}catch(n){if(n instanceof qr)ps.warn(n.message);else{const i=po.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ps.warn(i.message)}}}function Gw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=1024,d2=30;class h2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=jT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>d2){const u=g2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ps.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jT(),{heartbeatsToSend:i,unsentEntries:s}=p2(this._heartbeatsCache.heartbeats),a=ch(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ps.warn(n),""}}}function jT(){return new Date().toISOString().substring(0,10)}function p2(t,e=f2){const n=[];let i=t.slice();for(const s of t){const a=n.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),WT(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),WT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class m2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tD()?nD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await c2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $T(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $T(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function WT(t){return ch(JSON.stringify({version:2,heartbeats:t})).length}function g2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t){fa(new vo("platform-logger",e=>new xD(e),"PRIVATE")),fa(new vo("heartbeat",e=>new h2(e),"PRIVATE")),Pr(Zg,JT,t),Pr(Zg,JT,"esm2017"),Pr("fire-js","")}y2("");function tv(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function Kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v2=Kw,Jw=new Oc("auth","Firebase",Kw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Xy("@firebase/auth");function _2(t,...e){dh.logLevel<=tt.WARN&&dh.warn(`Auth (${va}): ${t}`,...e)}function Kd(t,...e){dh.logLevel<=tt.ERROR&&dh.error(`Auth (${va}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw iv(t,...e)}function Er(t,...e){return iv(t,...e)}function nv(t,e,n){const i=Object.assign(Object.assign({},v2()),{[e]:n});return new Oc("auth","Firebase",i).create(e,{appName:t.name})}function ds(t){return nv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E2(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&sr(t,"argument-error"),nv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Jw.create(t,...e)}function Pe(t,e,...n){if(!t)throw iv(e,...n)}function cs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kd(e),new Error(e)}function ms(t,e){t||cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function T2(){return QT()==="http:"||QT()==="https:"}function QT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T2()||QN()||"connection"in navigator)?navigator.onLine:!0}function A2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ms(n>e,"Short delay should be less than long delay!"),this.isMobile=$N()||XN()}get(){return S2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C2=new Fc(3e4,6e4);function Io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ro(t,e,n,i,s={}){return $w(t,s,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const c=Uc(Object.assign({key:t.config.apiKey},u)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return WN()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Co(t.emulatorConfig.host)&&(h.credentials="include"),Yw.fetch()(await jw(t,t.config.apiHost,n,c),h)})}async function $w(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},b2),e);try{const s=new R2(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw _d(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const c=a.ok?u.errorMessage:u.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw _d(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw _d(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw _d(t,"user-disabled",u);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw nv(t,y,h);sr(t,y)}}catch(s){if(s instanceof qr)throw s;sr(t,"network-request-failed",{message:String(s)})}}async function Bc(t,e,n,i,s={}){const a=await Ro(t,e,n,i,s);return"mfaPendingCredential"in a&&sr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function jw(t,e,n,i){const s=`${e}${n}?${i}`,a=t,u=a.config.emulator?rv(t.config,s):`${t.config.apiScheme}://${s}`;return w2.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function I2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Er(this.auth,"network-request-failed")),C2.get())})}}function _d(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Er(t,e,i);return s.customData._tokenResponse=n,s}function XT(t){return t!==void 0&&t.enterprise!==void 0}class x2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return I2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function N2(t,e){return Ro(t,"GET","/v2/recaptchaConfig",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e){return Ro(t,"POST","/v1/accounts:delete",e)}async function hh(t,e){return Ro(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M2(t,e=!1){const n=Dn(t),i=await n.getIdToken(e),s=sv(i);Pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:lc(kg(s.auth_time)),issuedAtTime:lc(kg(s.iat)),expirationTime:lc(kg(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function kg(t){return Number(t)*1e3}function sv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Kd("JWT malformed, contained fewer than 3 sections"),null;try{const s=kw(n);return s?JSON.parse(s):(Kd("Failed to decode base64 JWT payload"),null)}catch(s){return Kd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ZT(t){const e=sv(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof qr&&P2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function P2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Cc(t,hh(n,{idToken:i}));Pe(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Ww(a.providerUserInfo):[],c=V2(t.providerData,u),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),y=d?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new iy(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(t,E)}async function L2(t){const e=Dn(t);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V2(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Ww(t){return t.map(e=>{var{providerId:n}=e,i=tv(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(t,e){const n=await $w(t,{},async()=>{const i=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,u=await jw(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&Co(t.emulatorConfig.host)&&(d.credentials="include"),Yw.fetch()(u,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function U2(t,e){return Ro(t,"POST","/v2/accounts:revokeToken",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=ZT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await O2(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,u=new _l;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),s&&(Pe(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Pe(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gr{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,a=tv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new iy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return M2(this,e)}reload(){return L2(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await Cc(this,D2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,a,u,c,d,h,y;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,C=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,D=(u=n.photoURL)!==null&&u!==void 0?u:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,H=(h=n.createdAt)!==null&&h!==void 0?h:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:B,emailVerified:Y,isAnonymous:X,providerData:G,stsTokenManager:I}=n;Pe(B&&I,e,"internal-error");const R=_l.fromJSON(this.name,I);Pe(typeof B=="string",e,"internal-error"),no(E,e.name),no(T,e.name),Pe(typeof Y=="boolean",e,"internal-error"),Pe(typeof X=="boolean",e,"internal-error"),no(C,e.name),no(D,e.name),no(k,e.name),no(U,e.name),no(H,e.name),no(F,e.name);const x=new gr({uid:B,auth:e,email:T,emailVerified:Y,displayName:E,isAnonymous:X,photoURL:D,phoneNumber:C,tenantId:k,stsTokenManager:R,createdAt:H,lastLoginAt:F});return G&&Array.isArray(G)&&(x.providerData=G.map(L=>Object.assign({},L))),U&&(x._redirectEventId=U),x}static async _fromIdTokenResponse(e,n,i=!1){const s=new _l;s.updateFromServerResponse(n);const a=new gr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ph(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Pe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Ww(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new _l;c.updateFromIdToken(i);const d=new gr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:u}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new iy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new Map;function fs(t){ms(t instanceof Function,"Expected a class definition");let e=eS.get(t);return e?(ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qw.type="NONE";const tS=Qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t,e,n){return`firebase:${t}:${e}:${n}`}class El{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Jd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Jd("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hh(this.auth,{idToken:e}).catch(()=>{});return n?gr._fromGetAccountInfoResponse(this.auth,n,e):null}return gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new El(fs(tS),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||fs(tS);const u=Jd(i,e.config.apiKey,e.name);let c=null;for(const h of n)try{const y=await h._get(u);if(y){let E;if(typeof y=="string"){const T=await hh(e,{idToken:y}).catch(()=>{});if(!T)break;E=await gr._fromGetAccountInfoResponse(e,T,y)}else E=gr._fromJSON(e,y);h!==a&&(c=E),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new El(a,e,i):(a=d[0],c&&await a._set(u,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new El(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iC(e))return"Blackberry";if(rC(e))return"Webos";if(Zw(e))return"Safari";if((e.includes("chrome/")||eC(e))&&!e.includes("edge/"))return"Chrome";if(nC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Xw(t=ei()){return/firefox\//i.test(t)}function Zw(t=ei()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eC(t=ei()){return/crios\//i.test(t)}function tC(t=ei()){return/iemobile/i.test(t)}function nC(t=ei()){return/android/i.test(t)}function iC(t=ei()){return/blackberry/i.test(t)}function rC(t=ei()){return/webos/i.test(t)}function ov(t=ei()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function F2(t=ei()){var e;return ov(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function B2(){return ZN()&&document.documentMode===10}function sC(t=ei()){return ov(t)||nC(t)||rC(t)||iC(t)||/windows phone/i.test(t)||tC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t,e=[]){let n;switch(t){case"Browser":n=nS(ei());break;case"Worker":n=`${nS(ei())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${va}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((u,c)=>{try{const d=e(a);u(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(t,e={}){return Ro(t,"GET","/v2/passwordPolicy",Io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=6;class G2{constructor(e){var n,i,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:H2,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,a,u,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iS(this),this.idTokenSubscription=new iS(this),this.beforeStateQueue=new q2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fs(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await El.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hh(this,{idToken:e}),i=await gr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Si(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===c)&&(d!=null&&d.user)&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(ds(this));const n=e?Dn(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z2(this),n=new G2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await U2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fs(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let u=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(c,this,"internal-error"),c.then(()=>{u||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{u=!0,d()}}else{const d=e.addObserver(n);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xo(t){return Dn(t)}class iS{constructor(e){this.auth=e,this.observer=null,this.addObserver=aD(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function J2(t){jh=t}function aC(t){return jh.loadJS(t)}function Y2(){return jh.recaptchaEnterpriseScript}function $2(){return jh.gapiScript}function j2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class W2{constructor(){this.enterprise=new Q2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Q2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const X2="recaptcha-enterprise",lC="NO_RECAPTCHA";class Z2{constructor(e){this.type=X2,this.auth=xo(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,c)=>{N2(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new x2(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(d=>{c(d)})})}function s(a,u,c){const d=window.grecaptcha;XT(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(lC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new W2().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(c=>{if(!n&&XT(window.grecaptcha))s(c,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Y2();d.length!==0&&(d+=c),aC(d).then(()=>{s(c,a,u)}).catch(h=>{u(h)})}}).catch(c=>{u(c)})})}}async function rS(t,e,n,i=!1,s=!1){const a=new Z2(t);let u;if(s)u=lC;else try{u=await a.verify(n)}catch{u=await a.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:u}):Object.assign(c,{captchaResponse:u}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function ry(t,e,n,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await rS(t,e,n,n==="getOobCode");return i(t,u)}else return i(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await rS(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e){const n=$h(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(ca(a,e??{}))return s;sr(s,"already-initialized")}return n.initialize({options:e})}function tM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function nM(t,e,n){const i=xo(t);Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=uC(e),{host:u,port:c}=iM(e),d=c===null?"":`:${c}`,h={url:`${a}//${u}${d}/`},y=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pe(ca(h,i.config.emulator)&&ca(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Co(u)?(Wy(`${a}//${u}${d}`),Qy("Auth",!0)):rM()}function uC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iM(t){const e=uC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:sS(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:sS(u)}}}function sS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cs("not implemented")}_getIdTokenResponse(e){return cs("not implemented")}_linkToIdToken(e,n){return cs("not implemented")}_getReauthenticationResolver(e){return cs("not implemented")}}async function sM(t,e){return Ro(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){return Bc(t,"POST","/v1/accounts:signInWithPassword",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",Io(t,e))}async function lM(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends av{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ic(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ic(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ry(e,n,"signInWithPassword",oM);case"emailLink":return aM(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ry(e,i,"signUpPassword",sM);case"emailLink":return lM(e,{idToken:n,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(t,e){return Bc(t,"POST","/v1/accounts:signInWithIdp",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="http://localhost";class da extends av{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,a=tv(n,["providerId","signInMethod"]);if(!i||!s)return null;const u=new da(i,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Tl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Tl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tl(e,n)}buildRequest(){const e={requestUri:uM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fM(t){const e=Qu(Xu(t)).link,n=e?Qu(Xu(e)).deep_link_id:null,i=Qu(Xu(t)).deep_link_id;return(i?Qu(Xu(i)).link:null)||i||n||e||t}class lv{constructor(e){var n,i,s,a,u,c;const d=Qu(Xu(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(i=d.oobCode)!==null&&i!==void 0?i:null,E=cM((s=d.mode)!==null&&s!==void 0?s:null);Pe(h&&y&&E,"argument-error"),this.apiKey=h,this.operation=E,this.code=y,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=d.lang)!==null&&u!==void 0?u:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=fM(e);try{return new lv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.providerId=Fl.PROVIDER_ID}static credential(e,n){return Ic._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=lv.parseLink(n);return Pe(i,"argument-error"),Ic._fromEmailAndCode(e,i.code,i.tenantId)}}Fl.PROVIDER_ID="password";Fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends uv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends qc{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return da._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return us.credential(n,i)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends qc{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.GITHUB_SIGN_IN_METHOD="github.com";ro.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends qc{constructor(){super("twitter.com")}static credential(e,n){return da._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return so.credential(n,i)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(t,e){return Bc(t,"POST","/v1/accounts:signUp",Io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await gr._fromIdTokenResponse(e,i,s),u=oS(i);return new ha({user:a,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=oS(i);return new ha({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function oS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends qr{constructor(e,n,i,s){var a;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new mh(e,n,i,s)}}function cC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(t,a,e,i):a})}async function hM(t,e,n=!1){const i=await Cc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ha._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(t,e,n=!1){const{auth:i}=t;if(Si(i.app))return Promise.reject(ds(i));const s="reauthenticate";try{const a=await Cc(t,cC(i,s,e,t),n);Pe(a.idToken,i,"internal-error");const u=sv(a.idToken);Pe(u,i,"internal-error");const{sub:c}=u;return Pe(t.uid===c,i,"user-mismatch"),ha._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&sr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(t,e,n=!1){if(Si(t.app))return Promise.reject(ds(t));const i="signIn",s=await cC(t,i,e),a=await ha._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function mM(t,e){return fC(xo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(t){const e=xo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gM(t,e,n){if(Si(t.app))return Promise.reject(ds(t));const i=xo(t),u=await ry(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dM).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&dC(t),d}),c=await ha._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(c.user),c}function yM(t,e,n){return Si(t.app)?Promise.reject(ds(t)):mM(Dn(t),Fl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dC(t),i})}function vM(t,e,n,i){return Dn(t).onIdTokenChanged(e,n,i)}function _M(t,e,n){return Dn(t).beforeAuthStateChanged(e,n)}function EM(t,e,n,i){return Dn(t).onAuthStateChanged(e,n,i)}function TM(t){return Dn(t).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=1e3,AM=10;class pC extends hC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,c,d)=>{this.notifyListeners(u,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);B2()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AM):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},SM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pC.type="LOCAL";const bM=pC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC extends hC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mC.type="SESSION";const gC=mC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Wh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(u).map(async h=>h(n.origin,a)),d=await wM(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((c,d)=>{const h=cv("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(T.data.response);break;default:clearTimeout(y),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function IM(t){kr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function RM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NM(){return yC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="firebaseLocalStorageDb",DM=1,yh="firebaseLocalStorage",_C="fbase_key";class zc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qh(t,e){return t.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function MM(){const t=indexedDB.deleteDatabase(vC);return new zc(t).toPromise()}function sy(){const t=indexedDB.open(vC,DM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(yh,{keyPath:_C})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(yh)?e(i):(i.close(),await MM(),e(await sy()))})})}async function aS(t,e,n){const i=Qh(t,!0).put({[_C]:e,value:n});return new zc(i).toPromise()}async function PM(t,e){const n=Qh(t,!1).get(e),i=await new zc(n).toPromise();return i===void 0?null:i.value}function lS(t,e){const n=Qh(t,!0).delete(e);return new zc(n).toPromise()}const kM=800,LM=3;class EC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>LM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wh._getInstance(NM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RM(),!this.activeServiceWorker)return;this.sender=new CM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sy();return await aS(e,gh,"1"),await lS(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>aS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>PM(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Qh(s,!1).getAll();return new zc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EC.type="LOCAL";const VM=EC;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e){return e?fs(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends av{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OM(t){return fC(t.auth,new fv(t),t.bypassAuthState)}function UM(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),pM(n,new fv(t),t.bypassAuthState)}async function FM(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),hM(n,new fv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:u,type:c}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OM;case"linkViaPopup":case"linkViaRedirect":return FM;case"reauthViaPopup":case"reauthViaRedirect":return UM;default:sr(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new Fc(2e3,1e4);async function qM(t,e,n){if(Si(t.app))return Promise.reject(Er(t,"operation-not-supported-in-this-environment"));const i=xo(t);E2(t,e,uv);const s=TC(i,n);return new ra(i,"signInViaPopup",e,s).executeNotNull()}class ra extends SC{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BM.get())};e()}}ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="pendingRedirect",Yd=new Map;class HM extends SC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Yd.get(this.auth._key());if(!e){try{const i=await GM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Yd.set(this.auth._key(),e)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GM(t,e){const n=YM(e),i=JM(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function KM(t,e){Yd.set(t._key(),e)}function JM(t){return fs(t._redirectPersistence)}function YM(t){return Jd(zM,t.config.apiKey,t.name)}async function $M(t,e,n=!1){if(Si(t.app))return Promise.reject(ds(t));const i=xo(t),s=TC(i,e),u=await new HM(i,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=600*1e3;class WM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!AC(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Er(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jM&&this.cachedEventUids.clear(),this.cachedEventUids.has(uS(e))}saveEventToCache(e){this.cachedEventUids.add(uS(e)),this.lastProcessedEventTime=Date.now()}}function uS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,e={}){return Ro(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eP=/^https?/;async function tP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XM(t);for(const n of e)try{if(nP(n))return}catch{}sr(t,"unauthorized-domain")}function nP(t){const e=ny(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!eP.test(n))return!1;if(ZM.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new Fc(3e4,6e4);function cS(){const t=kr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rP(t){return new Promise((e,n)=>{var i,s,a;function u(){cS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cS(),n(Er(t,"network-request-failed"))},timeout:iP.get()})}if(!((s=(i=kr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=kr().gapi)===null||a===void 0)&&a.load)u();else{const c=j2("iframefcb");return kr()[c]=()=>{gapi.load?u():n(Er(t,"network-request-failed"))},aC(`${$2()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw $d=null,e})}let $d=null;function sP(t){return $d=$d||rP(t),$d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new Fc(5e3,15e3),aP="__/auth/iframe",lP="emulator/auth/iframe",uP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fP(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rv(e,lP):`https://${t.config.authDomain}/${aP}`,i={apiKey:e.apiKey,appName:t.name,v:va},s=cP.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Uc(i).slice(1)}`}async function dP(t){const e=await sP(t),n=kr().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:fP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uP,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const u=Er(t,"network-request-failed"),c=kr().setTimeout(()=>{a(u)},oP.get());function d(){kr().clearTimeout(c),s(i)}i.ping(d).then(d,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pP=500,mP=600,gP="_blank",yP="http://localhost";class fS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vP(t,e,n,i=pP,s=mP){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},hP),{width:i.toString(),height:s.toString(),top:a,left:u}),h=ei().toLowerCase();n&&(c=eC(h)?gP:n),Xw(h)&&(e=e||yP,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[C,D])=>`${T}${C}=${D},`,"");if(F2(h)&&c!=="_self")return _P(e||"",c),new fS(null);const E=window.open(e||"",c,y);Pe(E,t,"popup-blocked");try{E.focus()}catch{}return new fS(E)}function _P(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="__/auth/handler",TP="emulator/auth/handler",SP=encodeURIComponent("fac");async function dS(t,e,n,i,s,a){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:va,eventId:s};if(e instanceof uv){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",oD(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))u[y]=E}if(e instanceof qc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(u.scopes=y.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const d=await t._getAppCheckToken(),h=d?`#${SP}=${encodeURIComponent(d)}`:"";return`${AP(t)}?${Uc(c).slice(1)}${h}`}function AP({config:t}){return t.emulator?rv(t,TP):`https://${t.authDomain}/${EP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="webStorageSupport";class bP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gC,this._completeRedirectFn=$M,this._overrideRedirectResult=KM}async _openPopup(e,n,i,s){var a;ms((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await dS(e,n,i,ny(),s);return vP(e,u,cv())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await dS(e,n,i,ny(),s);return IM(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(ms(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await dP(e),i=new WM(e);return n.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lg,{type:Lg},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Lg];u!==void 0&&n(!!u),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sC()||Zw()||ov()}}const wP=bP;var hS="@firebase/auth",pS="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RP(t){fa(new vo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:c}=i.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oC(t)},h=new K2(i,s,a,d);return tM(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),fa(new vo("auth-internal",e=>{const n=xo(e.getProvider("auth").getImmediate());return(i=>new CP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(hS,pS,IP(t)),Pr(hS,pS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=300,NP=Uw("authIdTokenMaxAge")||xP;let mS=null;const DP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>NP)return;const s=n==null?void 0:n.token;mS!==s&&(mS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MP(t=ev()){const e=$h(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eM(t,{popupRedirectResolver:wP,persistence:[VM,bM,gC]}),i=Uw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=DP(a.toString());_M(n,u,()=>u(n.currentUser)),vM(n,c=>u(c))}}const s=Lw("auth");return s&&nM(n,`http://${s}`),n}function PP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}J2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Er("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",PP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RP("Browser");var kP="firebase",LP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(kP,LP,"app");var gS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mo,bC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function x(){}x.prototype=R.prototype,I.D=R.prototype,I.prototype=new x,I.prototype.constructor=I,I.C=function(L,M,V){for(var O=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)O[Ce-2]=arguments[Ce];return R.prototype[M].apply(L,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,R,x){x||(x=0);var L=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)L[M]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(M=0;16>M;++M)L[M]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=I.g[0],x=I.g[1],M=I.g[2];var V=I.g[3],O=R+(V^x&(M^V))+L[0]+3614090360&4294967295;R=x+(O<<7&4294967295|O>>>25),O=V+(M^R&(x^M))+L[1]+3905402710&4294967295,V=R+(O<<12&4294967295|O>>>20),O=M+(x^V&(R^x))+L[2]+606105819&4294967295,M=V+(O<<17&4294967295|O>>>15),O=x+(R^M&(V^R))+L[3]+3250441966&4294967295,x=M+(O<<22&4294967295|O>>>10),O=R+(V^x&(M^V))+L[4]+4118548399&4294967295,R=x+(O<<7&4294967295|O>>>25),O=V+(M^R&(x^M))+L[5]+1200080426&4294967295,V=R+(O<<12&4294967295|O>>>20),O=M+(x^V&(R^x))+L[6]+2821735955&4294967295,M=V+(O<<17&4294967295|O>>>15),O=x+(R^M&(V^R))+L[7]+4249261313&4294967295,x=M+(O<<22&4294967295|O>>>10),O=R+(V^x&(M^V))+L[8]+1770035416&4294967295,R=x+(O<<7&4294967295|O>>>25),O=V+(M^R&(x^M))+L[9]+2336552879&4294967295,V=R+(O<<12&4294967295|O>>>20),O=M+(x^V&(R^x))+L[10]+4294925233&4294967295,M=V+(O<<17&4294967295|O>>>15),O=x+(R^M&(V^R))+L[11]+2304563134&4294967295,x=M+(O<<22&4294967295|O>>>10),O=R+(V^x&(M^V))+L[12]+1804603682&4294967295,R=x+(O<<7&4294967295|O>>>25),O=V+(M^R&(x^M))+L[13]+4254626195&4294967295,V=R+(O<<12&4294967295|O>>>20),O=M+(x^V&(R^x))+L[14]+2792965006&4294967295,M=V+(O<<17&4294967295|O>>>15),O=x+(R^M&(V^R))+L[15]+1236535329&4294967295,x=M+(O<<22&4294967295|O>>>10),O=R+(M^V&(x^M))+L[1]+4129170786&4294967295,R=x+(O<<5&4294967295|O>>>27),O=V+(x^M&(R^x))+L[6]+3225465664&4294967295,V=R+(O<<9&4294967295|O>>>23),O=M+(R^x&(V^R))+L[11]+643717713&4294967295,M=V+(O<<14&4294967295|O>>>18),O=x+(V^R&(M^V))+L[0]+3921069994&4294967295,x=M+(O<<20&4294967295|O>>>12),O=R+(M^V&(x^M))+L[5]+3593408605&4294967295,R=x+(O<<5&4294967295|O>>>27),O=V+(x^M&(R^x))+L[10]+38016083&4294967295,V=R+(O<<9&4294967295|O>>>23),O=M+(R^x&(V^R))+L[15]+3634488961&4294967295,M=V+(O<<14&4294967295|O>>>18),O=x+(V^R&(M^V))+L[4]+3889429448&4294967295,x=M+(O<<20&4294967295|O>>>12),O=R+(M^V&(x^M))+L[9]+568446438&4294967295,R=x+(O<<5&4294967295|O>>>27),O=V+(x^M&(R^x))+L[14]+3275163606&4294967295,V=R+(O<<9&4294967295|O>>>23),O=M+(R^x&(V^R))+L[3]+4107603335&4294967295,M=V+(O<<14&4294967295|O>>>18),O=x+(V^R&(M^V))+L[8]+1163531501&4294967295,x=M+(O<<20&4294967295|O>>>12),O=R+(M^V&(x^M))+L[13]+2850285829&4294967295,R=x+(O<<5&4294967295|O>>>27),O=V+(x^M&(R^x))+L[2]+4243563512&4294967295,V=R+(O<<9&4294967295|O>>>23),O=M+(R^x&(V^R))+L[7]+1735328473&4294967295,M=V+(O<<14&4294967295|O>>>18),O=x+(V^R&(M^V))+L[12]+2368359562&4294967295,x=M+(O<<20&4294967295|O>>>12),O=R+(x^M^V)+L[5]+4294588738&4294967295,R=x+(O<<4&4294967295|O>>>28),O=V+(R^x^M)+L[8]+2272392833&4294967295,V=R+(O<<11&4294967295|O>>>21),O=M+(V^R^x)+L[11]+1839030562&4294967295,M=V+(O<<16&4294967295|O>>>16),O=x+(M^V^R)+L[14]+4259657740&4294967295,x=M+(O<<23&4294967295|O>>>9),O=R+(x^M^V)+L[1]+2763975236&4294967295,R=x+(O<<4&4294967295|O>>>28),O=V+(R^x^M)+L[4]+1272893353&4294967295,V=R+(O<<11&4294967295|O>>>21),O=M+(V^R^x)+L[7]+4139469664&4294967295,M=V+(O<<16&4294967295|O>>>16),O=x+(M^V^R)+L[10]+3200236656&4294967295,x=M+(O<<23&4294967295|O>>>9),O=R+(x^M^V)+L[13]+681279174&4294967295,R=x+(O<<4&4294967295|O>>>28),O=V+(R^x^M)+L[0]+3936430074&4294967295,V=R+(O<<11&4294967295|O>>>21),O=M+(V^R^x)+L[3]+3572445317&4294967295,M=V+(O<<16&4294967295|O>>>16),O=x+(M^V^R)+L[6]+76029189&4294967295,x=M+(O<<23&4294967295|O>>>9),O=R+(x^M^V)+L[9]+3654602809&4294967295,R=x+(O<<4&4294967295|O>>>28),O=V+(R^x^M)+L[12]+3873151461&4294967295,V=R+(O<<11&4294967295|O>>>21),O=M+(V^R^x)+L[15]+530742520&4294967295,M=V+(O<<16&4294967295|O>>>16),O=x+(M^V^R)+L[2]+3299628645&4294967295,x=M+(O<<23&4294967295|O>>>9),O=R+(M^(x|~V))+L[0]+4096336452&4294967295,R=x+(O<<6&4294967295|O>>>26),O=V+(x^(R|~M))+L[7]+1126891415&4294967295,V=R+(O<<10&4294967295|O>>>22),O=M+(R^(V|~x))+L[14]+2878612391&4294967295,M=V+(O<<15&4294967295|O>>>17),O=x+(V^(M|~R))+L[5]+4237533241&4294967295,x=M+(O<<21&4294967295|O>>>11),O=R+(M^(x|~V))+L[12]+1700485571&4294967295,R=x+(O<<6&4294967295|O>>>26),O=V+(x^(R|~M))+L[3]+2399980690&4294967295,V=R+(O<<10&4294967295|O>>>22),O=M+(R^(V|~x))+L[10]+4293915773&4294967295,M=V+(O<<15&4294967295|O>>>17),O=x+(V^(M|~R))+L[1]+2240044497&4294967295,x=M+(O<<21&4294967295|O>>>11),O=R+(M^(x|~V))+L[8]+1873313359&4294967295,R=x+(O<<6&4294967295|O>>>26),O=V+(x^(R|~M))+L[15]+4264355552&4294967295,V=R+(O<<10&4294967295|O>>>22),O=M+(R^(V|~x))+L[6]+2734768916&4294967295,M=V+(O<<15&4294967295|O>>>17),O=x+(V^(M|~R))+L[13]+1309151649&4294967295,x=M+(O<<21&4294967295|O>>>11),O=R+(M^(x|~V))+L[4]+4149444226&4294967295,R=x+(O<<6&4294967295|O>>>26),O=V+(x^(R|~M))+L[11]+3174756917&4294967295,V=R+(O<<10&4294967295|O>>>22),O=M+(R^(V|~x))+L[2]+718787259&4294967295,M=V+(O<<15&4294967295|O>>>17),O=x+(V^(M|~R))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+V&4294967295}i.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var x=R-this.blockSize,L=this.B,M=this.h,V=0;V<R;){if(M==0)for(;V<=x;)s(this,I,V),V+=this.blockSize;if(typeof I=="string"){for(;V<R;)if(L[M++]=I.charCodeAt(V++),M==this.blockSize){s(this,L),M=0;break}}else for(;V<R;)if(L[M++]=I[V++],M==this.blockSize){s(this,L),M=0;break}}this.h=M,this.o+=R},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var x=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=x&255,x/=256;for(this.u(I),I=Array(16),R=x=0;4>R;++R)for(var L=0;32>L;L+=8)I[x++]=this.g[R]>>>L&255;return I};function a(I,R){var x=c;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=R(I)}function u(I,R){this.h=R;for(var x=[],L=!0,M=I.length-1;0<=M;M--){var V=I[M]|0;L&&V==R||(x[M]=V,L=!1)}this.g=x}var c={};function d(I){return-128<=I&&128>I?a(I,function(R){return new u([R|0],0>R?-1:0)}):new u([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return U(h(-I));for(var R=[],x=1,L=0;I>=x;L++)R[L]=I/x|0,x*=4294967296;return new u(R,0)}function y(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return U(y(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(R,8)),L=E,M=0;M<I.length;M+=8){var V=Math.min(8,I.length-M),O=parseInt(I.substring(M,M+V),R);8>V?(V=h(Math.pow(R,V)),L=L.j(V).add(h(O))):(L=L.j(x),L=L.add(h(O)))}return L}var E=d(0),T=d(1),C=d(16777216);t=u.prototype,t.m=function(){if(k(this))return-U(this).m();for(var I=0,R=1,x=0;x<this.g.length;x++){var L=this.i(x);I+=(0<=L?L:4294967296+L)*R,R*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(k(this))return"-"+U(this).toString(I);for(var R=h(Math.pow(I,6)),x=this,L="";;){var M=Y(x,R).g;x=H(x,M.j(R));var V=((0<x.g.length?x.g[0]:x.h)>>>0).toString(I);if(x=M,D(x))return V+L;for(;6>V.length;)V="0"+V;L=V+L}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=H(this,I),k(I)?-1:D(I)?0:1};function U(I){for(var R=I.g.length,x=[],L=0;L<R;L++)x[L]=~I.g[L];return new u(x,~I.h).add(T)}t.abs=function(){return k(this)?U(this):this},t.add=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],L=0,M=0;M<=R;M++){var V=L+(this.i(M)&65535)+(I.i(M)&65535),O=(V>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);L=O>>>16,V&=65535,O&=65535,x[M]=O<<16|V}return new u(x,x[x.length-1]&-2147483648?-1:0)};function H(I,R){return I.add(U(R))}t.j=function(I){if(D(this)||D(I))return E;if(k(this))return k(I)?U(this).j(U(I)):U(U(this).j(I));if(k(I))return U(this.j(U(I)));if(0>this.l(C)&&0>I.l(C))return h(this.m()*I.m());for(var R=this.g.length+I.g.length,x=[],L=0;L<2*R;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(var M=0;M<I.g.length;M++){var V=this.i(L)>>>16,O=this.i(L)&65535,Ce=I.i(M)>>>16,ve=I.i(M)&65535;x[2*L+2*M]+=O*ve,F(x,2*L+2*M),x[2*L+2*M+1]+=V*ve,F(x,2*L+2*M+1),x[2*L+2*M+1]+=O*Ce,F(x,2*L+2*M+1),x[2*L+2*M+2]+=V*Ce,F(x,2*L+2*M+2)}for(L=0;L<R;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=R;L<2*R;L++)x[L]=0;return new u(x,0)};function F(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function B(I,R){this.g=I,this.h=R}function Y(I,R){if(D(R))throw Error("division by zero");if(D(I))return new B(E,E);if(k(I))return R=Y(U(I),R),new B(U(R.g),U(R.h));if(k(R))return R=Y(I,U(R)),new B(U(R.g),R.h);if(30<I.g.length){if(k(I)||k(R))throw Error("slowDivide_ only works with positive integers.");for(var x=T,L=R;0>=L.l(I);)x=X(x),L=X(L);var M=G(x,1),V=G(L,1);for(L=G(L,2),x=G(x,2);!D(L);){var O=V.add(L);0>=O.l(I)&&(M=M.add(x),V=O),L=G(L,1),x=G(x,1)}return R=H(I,M.j(R)),new B(M,R)}for(M=E;0<=I.l(R);){for(x=Math.max(1,Math.floor(I.m()/R.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),V=h(x),O=V.j(R);k(O)||0<O.l(I);)x-=L,V=h(x),O=V.j(R);D(V)&&(V=T),M=M.add(V),I=H(I,O)}return new B(M,I)}t.A=function(I){return Y(this,I).h},t.and=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],L=0;L<R;L++)x[L]=this.i(L)&I.i(L);return new u(x,this.h&I.h)},t.or=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],L=0;L<R;L++)x[L]=this.i(L)|I.i(L);return new u(x,this.h|I.h)},t.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],L=0;L<R;L++)x[L]=this.i(L)^I.i(L);return new u(x,this.h^I.h)};function X(I){for(var R=I.g.length+1,x=[],L=0;L<R;L++)x[L]=I.i(L)<<1|I.i(L-1)>>>31;return new u(x,I.h)}function G(I,R){var x=R>>5;R%=32;for(var L=I.g.length-x,M=[],V=0;V<L;V++)M[V]=0<R?I.i(V+x)>>>R|I.i(V+x+1)<<32-R:I.i(V+x);return new u(M,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,bC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=y,mo=u}).apply(typeof gS<"u"?gS:typeof self<"u"?self:typeof window<"u"?window:{});var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wC,Zu,CC,jd,oy,IC,RC,xC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,w){return m==Array.prototype||m==Object.prototype||(m[S]=w.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var S=0;S<m.length;++S){var w=m[S];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function s(m,S){if(S)e:{var w=i;m=m.split(".");for(var P=0;P<m.length-1;P++){var j=m[P];if(!(j in w))break e;w=w[j]}m=m[m.length-1],P=w[m],S=S(P),S!=P&&S!=null&&e(w,m,{configurable:!0,writable:!0,value:S})}}function a(m,S){m instanceof String&&(m+="");var w=0,P=!1,j={next:function(){if(!P&&w<m.length){var ie=w++;return{value:S(ie,m[ie]),done:!1}}return P=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(m){return m||function(){return a(this,function(S,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function h(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function y(m,S,w){return m.call.apply(m.bind,arguments)}function E(m,S,w){if(!m)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,P),m.apply(S,j)}}return function(){return m.apply(S,arguments)}}function T(m,S,w){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:E,T.apply(null,arguments)}function C(m,S){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),m.apply(this,P)}}function D(m,S){function w(){}w.prototype=S.prototype,m.aa=S.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(P,j,ie){for(var de=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)de[gt-2]=arguments[gt];return S.prototype[j].apply(P,de)}}function k(m){const S=m.length;if(0<S){const w=Array(S);for(let P=0;P<S;P++)w[P]=m[P];return w}return[]}function U(m,S){for(let w=1;w<arguments.length;w++){const P=arguments[w];if(d(P)){const j=m.length||0,ie=P.length||0;m.length=j+ie;for(let de=0;de<ie;de++)m[j+de]=P[de]}else m.push(P)}}class H{constructor(S,w){this.i=S,this.j=w,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(m){return/^[\s\xa0]*$/.test(m)}function B(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function Y(m){return Y[" "](m),m}Y[" "]=function(){};var X=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function G(m,S,w){for(const P in m)S.call(w,m[P],P,m)}function I(m,S){for(const w in m)S.call(void 0,m[w],w,m)}function R(m){const S={};for(const w in m)S[w]=m[w];return S}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(m,S){let w,P;for(let j=1;j<arguments.length;j++){P=arguments[j];for(w in P)m[w]=P[w];for(let ie=0;ie<x.length;ie++)w=x[ie],Object.prototype.hasOwnProperty.call(P,w)&&(m[w]=P[w])}}function M(m){var S=1;m=m.split(":");const w=[];for(;0<S&&m.length;)w.push(m.shift()),S--;return m.length&&w.push(m.join(":")),w}function V(m){c.setTimeout(()=>{throw m},0)}function O(){var m=Re;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class Ce{constructor(){this.h=this.g=null}add(S,w){const P=ve.get();P.set(S,w),this.h?this.h.next=P:this.g=P,this.h=P}}var ve=new H(()=>new te,m=>m.reset());class te{constructor(){this.next=this.g=this.h=null}set(S,w){this.h=S,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,pe=!1,Re=new Ce,ge=()=>{const m=c.Promise.resolve(void 0);ue=()=>{m.then(q)}};var q=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(w){V(w)}var S=ve;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}pe=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};c.addEventListener("test",w,S),c.removeEventListener("test",w,S)}catch{}return m})();function Ae(m,S){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,P=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if(X){e:{try{Y(S.nodeName);var j=!0;break e}catch{}j=!1}j||(S=null)}}else w=="mouseover"?S=m.fromElement:w=="mouseout"&&(S=m.toElement);this.relatedTarget=S,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Le[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ae.aa.h.call(this)}}D(Ae,fe);var Le={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),zt=0;function At(m,S,w,P,j){this.listener=m,this.proxy=null,this.src=S,this.type=w,this.capture=!!P,this.ha=j,this.key=++zt,this.da=this.fa=!1}function ti(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function di(m){this.src=m,this.g={},this.h=0}di.prototype.add=function(m,S,w,P,j){var ie=m.toString();m=this.g[ie],m||(m=this.g[ie]=[],this.h++);var de=Mn(m,S,P,j);return-1<de?(S=m[de],w||(S.fa=!1)):(S=new At(S,this.src,ie,!!P,j),S.fa=w,m.push(S)),S};function mn(m,S){var w=S.type;if(w in m.g){var P=m.g[w],j=Array.prototype.indexOf.call(P,S,void 0),ie;(ie=0<=j)&&Array.prototype.splice.call(P,j,1),ie&&(ti(S),m.g[w].length==0&&(delete m.g[w],m.h--))}}function Mn(m,S,w,P){for(var j=0;j<m.length;++j){var ie=m[j];if(!ie.da&&ie.listener==S&&ie.capture==!!w&&ie.ha==P)return j}return-1}var Pn="closure_lm_"+(1e6*Math.random()|0),Sn={};function An(m,S,w,P,j){if(Array.isArray(S)){for(var ie=0;ie<S.length;ie++)An(m,S[ie],w,P,j);return null}return w=Zt(w),m&&m[Be]?m.K(S,w,h(P)?!!P.capture:!1,j):Oi(m,S,w,!1,P,j)}function Oi(m,S,w,P,j,ie){if(!S)throw Error("Invalid event type");var de=h(j)?!!j.capture:!!j,gt=Ui(m);if(gt||(m[Pn]=gt=new di(m)),w=gt.add(S,w,P,de,ie),w.proxy)return w;if(P=be(),w.proxy=P,P.src=m,P.listener=w,m.addEventListener)he||(j=de),j===void 0&&(j=!1),m.addEventListener(S.toString(),P,j);else if(m.attachEvent)m.attachEvent(gn(S.toString()),P);else if(m.addListener&&m.removeListener)m.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function be(){function m(w){return S.call(m.src,m.listener,w)}const S=or;return m}function Ut(m,S,w,P,j){if(Array.isArray(S))for(var ie=0;ie<S.length;ie++)Ut(m,S[ie],w,P,j);else P=h(P)?!!P.capture:!!P,w=Zt(w),m&&m[Be]?(m=m.i,S=String(S).toString(),S in m.g&&(ie=m.g[S],w=Mn(ie,w,P,j),-1<w&&(ti(ie[w]),Array.prototype.splice.call(ie,w,1),ie.length==0&&(delete m.g[S],m.h--)))):m&&(m=Ui(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Mn(S,w,P,j)),(w=-1<m?S[m]:null)&&Jt(w))}function Jt(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[Be])mn(S.i,m);else{var w=m.type,P=m.proxy;S.removeEventListener?S.removeEventListener(w,P,m.capture):S.detachEvent?S.detachEvent(gn(w),P):S.addListener&&S.removeListener&&S.removeListener(P),(w=Ui(S))?(mn(w,m),w.h==0&&(w.src=null,S[Pn]=null)):ti(m)}}}function gn(m){return m in Sn?Sn[m]:Sn[m]="on"+m}function or(m,S){if(m.da)m=!0;else{S=new Ae(S,this);var w=m.listener,P=m.ha||m.src;m.fa&&Jt(m),m=w.call(P,S)}return m}function Ui(m){return m=m[Pn],m instanceof di?m:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zt(m){return typeof m=="function"?m:(m[ht]||(m[ht]=function(S){return m.handleEvent(S)}),m[ht])}function qe(){ee.call(this),this.i=new di(this),this.M=this,this.F=null}D(qe,ee),qe.prototype[Be]=!0,qe.prototype.removeEventListener=function(m,S,w,P){Ut(this,m,S,w,P)};function Ht(m,S){var w,P=m.F;if(P)for(w=[];P;P=P.F)w.push(P);if(m=m.M,P=S.type||S,typeof S=="string")S=new fe(S,m);else if(S instanceof fe)S.target=S.target||m;else{var j=S;S=new fe(P,m),L(S,j)}if(j=!0,w)for(var ie=w.length-1;0<=ie;ie--){var de=S.g=w[ie];j=on(de,P,!0,S)&&j}if(de=S.g=m,j=on(de,P,!0,S)&&j,j=on(de,P,!1,S)&&j,w)for(ie=0;ie<w.length;ie++)de=S.g=w[ie],j=on(de,P,!1,S)&&j}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var w=m.g[S],P=0;P<w.length;P++)ti(w[P]);delete m.g[S],m.h--}}this.F=null},qe.prototype.K=function(m,S,w,P){return this.i.add(String(m),S,!1,w,P)},qe.prototype.L=function(m,S,w,P){return this.i.add(String(m),S,!0,w,P)};function on(m,S,w,P){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var j=!0,ie=0;ie<S.length;++ie){var de=S[ie];if(de&&!de.da&&de.capture==w){var gt=de.listener,ln=de.ha||de.src;de.fa&&mn(m.i,de),j=gt.call(ln,P)!==!1&&j}}return j&&!P.defaultPrevented}function an(m,S,w){if(typeof m=="function")w&&(m=T(m,w));else if(m&&typeof m.handleEvent=="function")m=T(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(m,S||0)}function Ts(m){m.g=an(()=>{m.g=null,m.i&&(m.i=!1,Ts(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class $l extends ee{constructor(S,w){super(),this.m=S,this.l=w,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ts(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gn(m){ee.call(this),this.h=m,this.g={}}D(Gn,ee);var Ai=[];function bn(m){G(m.g,function(S,w){this.g.hasOwnProperty(w)&&Jt(S)},m),m.g={}}Gn.prototype.N=function(){Gn.aa.N.call(this),bn(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=c.JSON.stringify,Se=c.JSON.parse,Te=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Ge(){}Ge.prototype.h=null;function _t(m){return m.h||(m.h=m.i())}function $e(){}var je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ot(){fe.call(this,"d")}D(ot,fe);function it(){fe.call(this,"c")}D(it,fe);var De={},Ke=null;function yn(){return Ke=Ke||new qe}De.La="serverreachability";function Fi(m){fe.call(this,De.La,m)}D(Fi,fe);function en(m){const S=yn();Ht(S,new Fi(S))}De.STAT_EVENT="statevent";function xt(m,S){fe.call(this,De.STAT_EVENT,m),this.stat=S}D(xt,fe);function Et(m){const S=yn();Ht(S,new xt(S,m))}De.Ma="timingevent";function ni(m,S){fe.call(this,De.Ma,m),this.size=S}D(ni,fe);function Ft(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function Kn(){this.g=!0}Kn.prototype.xa=function(){this.g=!1};function Bi(m,S,w,P,j,ie){m.info(function(){if(m.g)if(ie)for(var de="",gt=ie.split("&"),ln=0;ln<gt.length;ln++){var Je=gt[ln].split("=");if(1<Je.length){var Cn=Je[0];Je=Je[1];var In=Cn.split("_");de=2<=In.length&&In[1]=="type"?de+(Cn+"="+Je+"&"):de+(Cn+"=redacted&")}}else de=null;else de=ie;return"XMLHTTP REQ ("+P+") [attempt "+j+"]: "+S+`
`+w+`
`+de})}function kn(m,S,w,P,j,ie,de){m.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+j+"]: "+S+`
`+w+`
`+ie+" "+de})}function ii(m,S,w,P){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+bi(m,w)+(P?" "+P:"")})}function zr(m,S){m.info(function(){return"TIMEOUT: "+S})}Kn.prototype.info=function(){};function bi(m,S){if(!m.g)return S;if(!S)return null;try{var w=JSON.parse(S);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var P=w[m];if(!(2>P.length)){var j=P[1];if(Array.isArray(j)&&!(1>j.length)){var ie=j[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var de=1;de<j.length;de++)j[de]=""}}}}return ae(w)}catch{return S}}var Nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wi;function qi(){}D(qi,Ge),qi.prototype.g=function(){return new XMLHttpRequest},qi.prototype.i=function(){return{}},wi=new qi;function Ci(m,S,w,P){this.j=m,this.i=S,this.l=w,this.R=P||1,this.U=new Gn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Do}function Do(){this.i=null,this.g="",this.h=!1}var ar={},zi={};function Hi(m,S,w){m.L=1,m.v=Po(Yt(S)),m.m=w,m.P=!0,hi(m,null)}function hi(m,S){m.F=Date.now(),ri(m),m.A=Yt(m.v);var w=m.A,P=m.R;Array.isArray(P)||(P=[String(P)]),Gr(w.i,"t",P),m.C=0,w=m.j.J,m.h=new Do,m.g=df(m.j,w?S:null,!m.m),0<m.O&&(m.M=new $l(T(m.Y,m,m.g),m.O)),S=m.U,w=m.g,P=m.ca;var j="readystatechange";Array.isArray(j)||(j&&(Ai[0]=j.toString()),j=Ai);for(var ie=0;ie<j.length;ie++){var de=An(w,j[ie],P||S.handleEvent,!1,S.h||S);if(!de)break;S.g[de.key]=de}S=m.H?R(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),en(),Bi(m.i,m.u,m.A,m.l,m.R,m.m)}Ci.prototype.ca=function(m){m=m.target;const S=this.M;S&&ai(m)==3?S.j():this.Y(m)},Ci.prototype.Y=function(m){try{if(m==this.g)e:{const In=ai(this.g);var S=this.g.Ba();const Ps=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||Vo(this.g)))){this.J||In!=4||S==7||(S==8||0>=Ps?en(3):en(2)),lr(this);var w=this.g.Z();this.X=w;t:if(Gi(this)){var P=Vo(this.g);m="";var j=P.length,ie=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),ur(this);var de="";break t}this.h.i=new c.TextDecoder}for(S=0;S<j;S++)this.h.h=!0,m+=this.h.i.decode(P[S],{stream:!(ie&&S==j-1)});P.length=0,this.h.g+=m,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=w==200,kn(this.i,this.u,this.A,this.l,this.R,In,w),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,ln=this.g;if((gt=ln.g?ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(gt)){var Je=gt;break t}}Je=null}if(w=Je)ii(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ar(this,w);else{this.o=!1,this.s=3,Et(12),si(this),ur(this);break e}}if(this.P){w=!0;let mi;for(;!this.J&&this.C<de.length;)if(mi=Sr(this,de),mi==zi){In==4&&(this.s=4,Et(14),w=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(mi==ar){this.s=4,Et(15),ii(this.i,this.l,de,"[Invalid Chunk]"),w=!1;break}else ii(this.i,this.l,mi,null),Ar(this,mi);if(Gi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||de.length!=0||this.h.h||(this.s=1,Et(16),w=!1),this.o=this.o&&w,!w)ii(this.i,this.l,de,"[Invalid Chunked Response]"),si(this),ur(this);else if(0<de.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),su(Cn),Cn.M=!0,Et(11))}}else ii(this.i,this.l,de,null),Ar(this,de);In==4&&si(this),this.o&&!this.J&&(In==4?uf(this.j,this):(this.o=!1,ri(this)))}else nf(this.g),w==400&&0<de.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),si(this),ur(this)}}}catch{}finally{}};function Gi(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Sr(m,S){var w=m.C,P=S.indexOf(`
`,w);return P==-1?zi:(w=Number(S.substring(w,P)),isNaN(w)?ar:(P+=1,P+w>S.length?zi:(S=S.slice(P,P+w),m.C=P+w,S)))}Ci.prototype.cancel=function(){this.J=!0,si(this)};function ri(m){m.S=Date.now()+m.I,Bt(m,m.I)}function Bt(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ft(T(m.ba,m),S)}function lr(m){m.B&&(c.clearTimeout(m.B),m.B=null)}Ci.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(zr(this.i,this.A),this.L!=2&&(en(),Et(17)),si(this),this.s=2,ur(this)):Bt(this,this.S-m)};function ur(m){m.j.G==0||m.J||uf(m.j,m)}function si(m){lr(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,bn(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function Ar(m,S){try{var w=m.j;if(w.G!=0&&(w.g==m||Ss(w.h,m))){if(!m.K&&Ss(w.h,m)&&w.G==3){try{var P=w.Da.g.parse(S)}catch{P=null}if(Array.isArray(P)&&P.length==3){var j=P;if(j[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)Ds(w),Ns(w);else break e;ru(w),Et(18)}}else w.za=j[1],0<w.za-w.T&&37500>j[2]&&w.F&&w.v==0&&!w.C&&(w.C=Ft(T(w.Za,w),6e3));if(1>=Wc(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Jr(w,11)}else if((m.K||w.g==m)&&Ds(w),!F(S))for(j=w.Da.g.parse(S),S=0;S<j.length;S++){let Je=j[S];if(w.T=Je[0],Je=Je[1],w.G==2)if(Je[0]=="c"){w.K=Je[1],w.ia=Je[2];const Cn=Je[3];Cn!=null&&(w.la=Cn,w.j.info("VER="+w.la));const In=Je[4];In!=null&&(w.Aa=In,w.j.info("SVER="+w.Aa));const Ps=Je[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(P=1.5*Ps,w.L=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const mi=m.g;if(mi){const Fo=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var ie=P.h;ie.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(As(ie,ie.h),ie.h=null))}if(P.D){const Yr=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Yr&&(P.ya=Yr,lt(P.I,P.D,Yr))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),P=w;var de=m;if(P.qa=ff(P,P.J?P.ia:null,P.W),de.K){Ki(P.h,de);var gt=de,ln=P.L;ln&&(gt.I=ln),gt.B&&(lr(gt),ri(gt)),P.g=de}else af(P);0<w.i.length&&Da(w)}else Je[0]!="stop"&&Je[0]!="close"||Jr(w,7);else w.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Jr(w,7):nu(w):Je[0]!="noop"&&w.l&&w.l.ta(Je),w.v=0)}}en(4)}catch{}}var bp=class{constructor(m,S){this.g=m,this.map=S}};function jl(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Wc(m){return m.h?1:m.g?m.g.size:0}function Ss(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function As(m,S){m.g?m.g.add(S):m.h=S}function Ki(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}jl.prototype.cancel=function(){if(this.i=oi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function oi(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const w of m.g.values())S=S.concat(w.D);return S}return k(m.i)}function Qc(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var S=[],w=m.length,P=0;P<w;P++)S.push(m[P]);return S}S=[],w=0;for(P in m)S[w++]=m[P];return S}function wp(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var S=[];m=m.length;for(var w=0;w<m;w++)S.push(w);return S}S=[],w=0;for(const P in m)S[w++]=P;return S}}}function ba(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var w=wp(m),P=Qc(m),j=P.length,ie=0;ie<j;ie++)S.call(void 0,P[ie],w&&w[ie],m)}var Ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wa(m,S){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var P=m[w].indexOf("="),j=null;if(0<=P){var ie=m[w].substring(0,P);j=m[w].substring(P+1)}else ie=m[w];S(ie,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Hr(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Hr){this.h=m.h,bs(this,m.j),this.o=m.o,this.g=m.g,Mo(this,m.s),this.l=m.l;var S=m.i,w=new br;w.i=S.i,S.g&&(w.g=new Map(S.g),w.h=S.h),Ca(this,w),this.m=m.m}else m&&(S=String(m).match(Ql))?(this.h=!1,bs(this,S[1]||"",!0),this.o=ws(S[2]||""),this.g=ws(S[3]||"",!0),Mo(this,S[4]),this.l=ws(S[5]||"",!0),Ca(this,S[6]||"",!0),this.m=ws(S[7]||"")):(this.h=!1,this.i=new br(null,this.h))}Hr.prototype.toString=function(){var m=[],S=this.j;S&&m.push(Ji(S,Xl,!0),":");var w=this.g;return(w||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Ji(S,Xl,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Ji(w,w.charAt(0)=="/"?Zl:Xc,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Ji(w,Rp)),m.join("")};function Yt(m){return new Hr(m)}function bs(m,S,w){m.j=w?ws(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Mo(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function Ca(m,S,w){S instanceof br?(m.i=S,Zc(m.i,m.h)):(w||(S=Ji(S,Ip)),m.i=new br(S,m.h))}function lt(m,S,w){m.i.set(S,w)}function Po(m){return lt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function ws(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ji(m,S,w){return typeof m=="string"?(m=encodeURI(m).replace(S,Cp),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Cp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Xl=/[#\/\?@]/g,Xc=/[#\?:]/g,Zl=/[#\?]/g,Ip=/[#\?@]/g,Rp=/#/g;function br(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function wn(m){m.g||(m.g=new Map,m.h=0,m.i&&wa(m.i,function(S,w){m.add(decodeURIComponent(S.replace(/\+/g," ")),w)}))}t=br.prototype,t.add=function(m,S){wn(this),this.i=null,m=Ii(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(S),this.h+=1,this};function Ia(m,S){wn(m),S=Ii(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Ra(m,S){return wn(m),S=Ii(m,S),m.g.has(S)}t.forEach=function(m,S){wn(this),this.g.forEach(function(w,P){w.forEach(function(j){m.call(S,j,P,this)},this)},this)},t.na=function(){wn(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),w=[];for(let P=0;P<S.length;P++){const j=m[P];for(let ie=0;ie<j.length;ie++)w.push(S[P])}return w},t.V=function(m){wn(this);let S=[];if(typeof m=="string")Ra(this,m)&&(S=S.concat(this.g.get(Ii(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)S=S.concat(m[w])}return S},t.set=function(m,S){return wn(this),this.i=null,m=Ii(this,m),Ra(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function Gr(m,S,w){Ia(m,S),0<w.length&&(m.i=null,m.g.set(Ii(m,S),k(w)),m.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var w=0;w<S.length;w++){var P=S[w];const ie=encodeURIComponent(String(P)),de=this.V(P);for(P=0;P<de.length;P++){var j=ie;de[P]!==""&&(j+="="+encodeURIComponent(String(de[P]))),m.push(j)}}return this.i=m.join("&")};function Ii(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Zc(m,S){S&&!m.j&&(wn(m),m.i=null,m.g.forEach(function(w,P){var j=P.toLowerCase();P!=j&&(Ia(this,P),Gr(this,j,w))},m)),m.j=S}function eu(m,S){const w=new Kn;if(c.Image){const P=new Image;P.onload=C(pi,w,"TestLoadImage: loaded",!0,S,P),P.onerror=C(pi,w,"TestLoadImage: error",!1,S,P),P.onabort=C(pi,w,"TestLoadImage: abort",!1,S,P),P.ontimeout=C(pi,w,"TestLoadImage: timeout",!1,S,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=m}else S(!1)}function ef(m,S){const w=new Kn,P=new AbortController,j=setTimeout(()=>{P.abort(),pi(w,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:P.signal}).then(ie=>{clearTimeout(j),ie.ok?pi(w,"TestPingServer: ok",!0,S):pi(w,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(j),pi(w,"TestPingServer: error",!1,S)})}function pi(m,S,w,P,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),P(w)}catch{}}function cr(){this.g=new Te}function tu(m,S,w){const P=w||"";try{ba(m,function(j,ie){let de=j;h(j)&&(de=ae(j)),S.push(P+ie+"="+encodeURIComponent(de))})}catch(j){throw S.push(P+"type="+encodeURIComponent("_badmap")),j}}function wr(m){this.l=m.Ub||null,this.j=m.eb||!1}D(wr,Ge),wr.prototype.g=function(){return new Ri(this.l,this.j)},wr.prototype.i=(function(m){return function(){return m}})({});function Ri(m,S){qe.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ri,qe),t=Ri.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,Cs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xa(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function xa(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Cr(this):Cs(this),this.readyState==3&&xa(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Cr(this))},t.Qa=function(m){this.g&&(this.response=m,Cr(this))},t.ga=function(){this.g&&Cr(this)};function Cr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Cs(m)}t.setRequestHeader=function(m,S){this.u.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var w=S.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=S.next();return m.join(`\r
`)};function Cs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ko(m){let S="";return G(m,function(w,P){S+=P,S+=":",S+=w,S+=`\r
`}),S}function Is(m,S,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=ko(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):lt(m,S,w))}function Dt(m){qe.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Dt,qe);var Jn=/^https?$/i,Kr=["POST","PUT"];t=Dt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,S,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wi.g(),this.v=this.o?_t(this.o):_t(wi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ie){Lo(this,ie);return}if(m=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var j in P)w.set(j,P[j]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ie of P.keys())w.set(ie,P.get(ie));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(ie=>ie.toLowerCase()=="content-type"),j=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Kr,S,void 0))||P||j||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,de]of w)this.g.setRequestHeader(ie,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Na(this),this.u=!0,this.g.send(m),this.u=!1}catch(ie){Lo(this,ie)}};function Lo(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,Rs(m),xs(m)}function Rs(m){m.A||(m.A=!0,Ht(m,"complete"),Ht(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ht(this,"complete"),Ht(this,"abort"),xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),Dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tf(this):this.bb())},t.bb=function(){tf(this)};function tf(m){if(m.h&&typeof u<"u"&&(!m.v[1]||ai(m)!=4||m.Z()!=2)){if(m.u&&ai(m)==4)an(m.Ea,0,m);else if(Ht(m,"readystatechange"),ai(m)==4){m.h=!1;try{const de=m.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var w;if(!(w=S)){var P;if(P=de===0){var j=String(m.D).match(Ql)[1]||null;!j&&c.self&&c.self.location&&(j=c.self.location.protocol.slice(0,-1)),P=!Jn.test(j?j.toLowerCase():"")}w=P}if(w)Ht(m,"complete"),Ht(m,"success");else{m.m=6;try{var ie=2<ai(m)?m.g.statusText:""}catch{ie=""}m.l=ie+" ["+m.Z()+"]",Rs(m)}}finally{xs(m)}}}}function xs(m,S){if(m.g){Na(m);const w=m.g,P=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||Ht(m,"ready");try{w.onreadystatechange=P}catch{}}}function Na(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ai(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Se(S)}};function Vo(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function nf(m){const S={};m=(m.g&&2<=ai(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<m.length;P++){if(F(m[P]))continue;var w=M(m[P]);const j=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ie=S[j]||[];S[j]=ie,ie.push(w)}I(S,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(m,S,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||S}function rf(m){this.Aa=0,this.i=[],this.j=new Kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,m),this.cb=Oo("retryDelaySeedMs",1e4,m),this.Wa=Oo("forwardChannelMaxRetries",2,m),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new jl(m&&m.concurrentRequestLimit),this.Da=new cr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rf.prototype,t.la=8,t.G=1,t.connect=function(m,S,w,P){Et(0),this.W=m,this.H=S||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.I=ff(this,null,this.W),Da(this)};function nu(m){if(sf(m),m.G==3){var S=m.U++,w=Yt(m.I);if(lt(w,"SID",m.K),lt(w,"RID",S),lt(w,"TYPE","terminate"),Uo(m,w),S=new Ci(m,m.j,S),S.L=2,S.v=Po(Yt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=S.v,w=!0),w||(S.g=df(S.j,null),S.g.ea(S.v)),S.F=Date.now(),ri(S)}ou(m)}function Ns(m){m.g&&(su(m),m.g.cancel(),m.g=null)}function sf(m){Ns(m),m.u&&(c.clearTimeout(m.u),m.u=null),Ds(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Da(m){if(!Wl(m.h)&&!m.s){m.s=!0;var S=m.Ga;ue||ge(),pe||(ue(),pe=!0),Re.add(S,m),m.B=0}}function xp(m,S){return Wc(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ft(T(m.Ga,m,S),cf(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const j=new Ci(this,this.j,m);let ie=this.o;if(this.S&&(ie?(ie=R(ie),L(ie,this.S)):ie=this.S),this.m!==null||this.O||(j.H=ie,ie=null),this.P)e:{for(var S=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(S+=P,4096<S){S=w;break e}if(S===4096||w===this.i.length-1){S=w+1;break e}}S=1e3}else S=1e3;S=iu(this,j,S),w=Yt(this.I),lt(w,"RID",m),lt(w,"CVER",22),this.D&&lt(w,"X-HTTP-Session-Id",this.D),Uo(this,w),ie&&(this.O?S="headers="+encodeURIComponent(String(ko(ie)))+"&"+S:this.m&&Is(w,this.m,ie)),As(this.h,j),this.Ua&&lt(w,"TYPE","init"),this.P?(lt(w,"$req",S),lt(w,"SID","null"),j.T=!0,Hi(j,w,null)):Hi(j,w,S),this.G=2}}else this.G==3&&(m?of(this,m):this.i.length==0||Wl(this.h)||of(this))};function of(m,S){var w;S?w=S.l:w=m.U++;const P=Yt(m.I);lt(P,"SID",m.K),lt(P,"RID",w),lt(P,"AID",m.T),Uo(m,P),m.m&&m.o&&Is(P,m.m,m.o),w=new Ci(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),S&&(m.i=S.D.concat(m.i)),S=iu(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),As(m.h,w),Hi(w,P,S)}function Uo(m,S){m.H&&G(m.H,function(w,P){lt(S,P,w)}),m.l&&ba({},function(w,P){lt(S,P,w)})}function iu(m,S,w){w=Math.min(m.i.length,w);var P=m.l?T(m.l.Na,m.l,m):null;e:{var j=m.i;let ie=-1;for(;;){const de=["count="+w];ie==-1?0<w?(ie=j[0].g,de.push("ofs="+ie)):ie=0:de.push("ofs="+ie);let gt=!0;for(let ln=0;ln<w;ln++){let Je=j[ln].g;const Cn=j[ln].map;if(Je-=ie,0>Je)ie=Math.max(0,j[ln].g-100),gt=!1;else try{tu(Cn,de,"req"+Je+"_")}catch{P&&P(Cn)}}if(gt){P=de.join("&");break e}}}return m=m.i.splice(0,w),S.D=m,P}function af(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;ue||ge(),pe||(ue(),pe=!0),Re.add(S,m),m.v=0}}function ru(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ft(T(m.Fa,m),cf(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,lf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ft(T(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Ns(this),lf(this))};function su(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function lf(m){m.g=new Ci(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=Yt(m.qa);lt(S,"RID","rpc"),lt(S,"SID",m.K),lt(S,"AID",m.T),lt(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&lt(S,"TO",m.ja),lt(S,"TYPE","xmlhttp"),Uo(m,S),m.m&&m.o&&Is(S,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Po(Yt(S)),w.m=null,w.P=!0,hi(w,m)}t.Za=function(){this.C!=null&&(this.C=null,Ns(this),ru(this),Et(19))};function Ds(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function uf(m,S){var w=null;if(m.g==S){Ds(m),su(m),m.g=null;var P=2}else if(Ss(m.h,S))w=S.D,Ki(m.h,S),P=1;else return;if(m.G!=0){if(S.o)if(P==1){w=S.m?S.m.length:0,S=Date.now()-S.F;var j=m.B;P=yn(),Ht(P,new ni(P,w)),Da(m)}else af(m);else if(j=S.s,j==3||j==0&&0<S.X||!(P==1&&xp(m,S)||P==2&&ru(m)))switch(w&&0<w.length&&(S=m.h,S.i=S.i.concat(w)),j){case 1:Jr(m,5);break;case 4:Jr(m,10);break;case 3:Jr(m,6);break;default:Jr(m,2)}}}function cf(m,S){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*S}function Jr(m,S){if(m.j.info("Error code "+S),S==2){var w=T(m.fb,m),P=m.Xa;const j=!P;P=new Hr(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bs(P,"https"),Po(P),j?eu(P.toString(),w):ef(P.toString(),w)}else Et(2);m.G=0,m.l&&m.l.sa(S),ou(m),sf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function ou(m){if(m.G=0,m.ka=[],m.l){const S=oi(m.h);(S.length!=0||m.i.length!=0)&&(U(m.ka,S),U(m.ka,m.i),m.h.i.length=0,k(m.i),m.i.length=0),m.l.ra()}}function ff(m,S,w){var P=w instanceof Hr?Yt(w):new Hr(w);if(P.g!="")S&&(P.g=S+"."+P.g),Mo(P,P.s);else{var j=c.location;P=j.protocol,S=S?S+"."+j.hostname:j.hostname,j=+j.port;var ie=new Hr(null);P&&bs(ie,P),S&&(ie.g=S),j&&Mo(ie,j),w&&(ie.l=w),P=ie}return w=m.D,S=m.ya,w&&S&&lt(P,w,S),lt(P,"VER",m.la),Uo(m,P),P}function df(m,S,w){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new Dt(new wr({eb:w})):new Dt(m.pa),S.Ha(m.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hf(){}t=hf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ma(){}Ma.prototype.g=function(m,S){return new li(m,S)};function li(m,S){qe.call(this),this.g=new rf(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!F(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Ms(this)}D(li,qe),li.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},li.prototype.close=function(){nu(this.g)},li.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=ae(m),m=w);S.i.push(new bp(S.Ya++,m)),S.G==3&&Da(S)},li.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,li.aa.N.call(this)};function pf(m){ot.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const w in S){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}D(pf,ot);function mf(){it.call(this),this.status=1}D(mf,it);function Ms(m){this.g=m}D(Ms,hf),Ms.prototype.ua=function(){Ht(this.g,"a")},Ms.prototype.ta=function(m){Ht(this.g,new pf(m))},Ms.prototype.sa=function(m){Ht(this.g,new mf)},Ms.prototype.ra=function(){Ht(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,li.prototype.send=li.prototype.o,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,xC=function(){return new Ma},RC=function(){return yn()},IC=De,oy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nt.NO_ERROR=0,Nt.TIMEOUT=8,Nt.HTTP_ERROR=6,jd=Nt,tn.COMPLETE="complete",CC=tn,$e.EventType=je,je.OPEN="a",je.CLOSE="b",je.ERROR="c",je.MESSAGE="d",qe.prototype.listen=qe.prototype.K,Zu=$e,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,wC=Dt}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});const yS="@firebase/firestore",vS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qn.UNAUTHENTICATED=new Qn(null),Qn.GOOGLE_CREDENTIALS=new Qn("google-credentials-uid"),Qn.FIRST_PARTY=new Qn("first-party-uid"),Qn.MOCK_USER=new Qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Xy("@firebase/firestore");function dl(){return pa.logLevel}function _e(t,...e){if(pa.logLevel<=tt.DEBUG){const n=e.map(dv);pa.debug(`Firestore (${Bl}): ${t}`,...n)}}function gs(t,...e){if(pa.logLevel<=tt.ERROR){const n=e.map(dv);pa.error(`Firestore (${Bl}): ${t}`,...n)}}function _o(t,...e){if(pa.logLevel<=tt.WARN){const n=e.map(dv);pa.warn(`Firestore (${Bl}): ${t}`,...n)}}function dv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,NC(t,i,n)}function NC(t,e,n){let i=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw gs(i),new Error(i)}function vt(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||NC(e,s,i)}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Qn.UNAUTHENTICATED)))}shutdown(){}}class OP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UP{constructor(e){this.t=e,this.currentUser=Qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){vt(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let a=new go;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new go,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new go)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(vt(typeof i.accessToken=="string",31837,{l:i}),new DC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new Qn(e)}}class FP{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BP{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new FP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _S{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){vt(this.o===void 0,3512);const i=a=>{a.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _S(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _S(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=zP(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function Ye(t,e){return t<e?-1:t>e?1:0}function ay(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return Ye(i,s);{const a=MC(),u=HP(a.encode(ES(t,n)),a.encode(ES(e,n)));return u!==0?u:Ye(i,s)}}n+=i>65535?2:1}return Ye(t.length,e.length)}function ES(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function HP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ye(t[n],e[n]);return Ye(t.length,e.length)}function Dl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="__name__";class Mr{constructor(e,n,i){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ke(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=Mr.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Ye(e.length,n.length)}static compareSegments(e,n){const i=Mr.isNumericId(e),s=Mr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(n)):ay(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class Vt extends Mr{construct(e,n,i){return new Vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ie(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new Vt(n)}static emptyPath(){return new Vt([])}}const GP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends Mr{construct(e,n,i){return new qn(e,n,i)}static isValidIdentifier(e){return GP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TS}static keyField(){return new qn([TS])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ie(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ie(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ie(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else c==="`"?(u=!u,s++):c!=="."||u?(i+=c,s++):(a(),s++)}if(a(),u)throw new Ie(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(n)}static emptyPath(){return new qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Vt.fromString(e))}static fromName(e){return new Ne(Vt.fromString(e).popFirst(5))}static empty(){return new Ne(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e,n){if(!n)throw new Ie(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KP(t,e,n,i){if(e===!0&&i===!0)throw new Ie(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SS(t){if(!Ne.isDocumentKey(t))throw new Ie(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function AS(t){if(Ne.isDocumentKey(t))throw new Ie(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function vh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pv(t);throw new Ie(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Hc(t,e){if(!kC(t))throw new Ie(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const u=t[i];if(s&&typeof u!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Ie(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=-62135596800,wS=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*wS);return new Ot(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bS)throw new Ie(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wS}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,Ot._jsonSchema))return new Ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ot._jsonSchemaVersion="firestore/timestamp/1.0",Ot._jsonSchema={type:pn("string",Ot._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Ot(0,0))}static max(){return new Ve(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=-1;function JP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(i===1e9?new Ot(n+1,0):new Ot(n,i));return new Eo(s,Ne.empty(),e)}function YP(t){return new Eo(t.readTime,t.key,Rc)}class Eo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Eo(Ve.min(),Ne.empty(),Rc)}static max(){return new Eo(Ve.max(),Ne.empty(),Rc)}}function $P(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==jP)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,i)=>{n(e)}))}static reject(e){return new le(((n,i)=>{i(e)}))}static waitFor(e){return new le(((n,i)=>{let s=0,a=0,u=!1;e.forEach((c=>{++s,c.next((()=>{++a,u&&a===s&&n()}),(d=>i(d)))})),u=!0,a===s&&n()}))}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next((s=>s?le.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,a)=>{i.push(n.call(this,s,a))})),this.waitFor(i)}static mapArray(e,n){return new le(((i,s)=>{const a=e.length,u=new Array(a);let c=0;for(let d=0;d<a;d++){const h=d;n(e[h]).next((y=>{u[h]=y,++c,c===a&&i(u)}),(y=>s(y)))}}))}static doWhile(e,n){return new le(((i,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):i()};a()}))}}function QP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Xh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=-1;function Zh(t){return t==null}function _h(t){return t===0&&1/t==-1/0}function XP(t){return typeof t=="number"&&Number.isInteger(t)&&!_h(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="";function ZP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=CS(e)),e=ek(t.get(n),e);return CS(e)}function ek(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case LC:n+="";break;default:n+=a}}return n}function CS(t){return t+LC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _a(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.comparator=e,this.root=n||Bn.EMPTY}insert(e,n){return new Kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Td(this.root,e,this.comparator,!1)}getReverseIterator(){return new Td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Td(this.root,e,this.comparator,!0)}}class Td{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??Bn.RED,this.left=s??Bn.EMPTY,this.right=a??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new Bn(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new Bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RS(this.data.getIterator())}getIteratorFrom(e){return new RS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Tn(this.comparator);return n.data=e,n}}class RS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new yr([])}unionWith(e){let n=new Tn(qn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new yr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new OC("Invalid base64 string: "+a):a}})(e);return new Hn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const tk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(t){if(vt(!!t,39018),typeof t=="string"){let e=0;const n=tk.exec(t);if(vt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:sn(t.seconds),nanos:sn(t.nanos)}}function sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function So(t){return typeof t=="string"?Hn.fromBase64String(t):Hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="server_timestamp",FC="__type__",BC="__previous_value__",qC="__local_write_time__";function gv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[FC])===null||n===void 0?void 0:n.stringValue)===UC}function ep(t){const e=t.mapValue.fields[BC];return gv(e)?ep(e):e}function xc(t){const e=To(t.mapValue.fields[qC].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,i,s,a,u,c,d,h,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=y}}const Eh="(default)";class Nc{constructor(e,n){this.projectId=e,this.database=n||Eh}static empty(){return new Nc("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof Nc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__type__",ik="__max__",Sd={mapValue:{}},HC="__vector__",Th="value";function Ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gv(t)?4:sk(t)?9007199254740991:rk(t)?10:11:ke(28295,{value:t})}function Fr(t,e){if(t===e)return!0;const n=Ao(t);if(n!==Ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xc(t).isEqual(xc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=To(s.timestampValue),c=To(a.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return So(s.bytesValue).isEqual(So(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return sn(s.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return sn(s.integerValue)===sn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=sn(s.doubleValue),c=sn(a.doubleValue);return u===c?_h(u)===_h(c):isNaN(u)&&isNaN(c)}return!1})(t,e);case 9:return Dl(t.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},c=a.mapValue.fields||{};if(IS(u)!==IS(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!Fr(u[d],c[d])))return!1;return!0})(t,e);default:return ke(52216,{left:t})}}function Dc(t,e){return(t.values||[]).find((n=>Fr(n,e)))!==void 0}function Ml(t,e){if(t===e)return 0;const n=Ao(t),i=Ao(e);if(n!==i)return Ye(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ye(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const c=sn(a.integerValue||a.doubleValue),d=sn(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return xS(t.timestampValue,e.timestampValue);case 4:return xS(xc(t),xc(e));case 5:return ay(t.stringValue,e.stringValue);case 6:return(function(a,u){const c=So(a),d=So(u);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const c=a.split("/"),d=u.split("/");for(let h=0;h<c.length&&h<d.length;h++){const y=Ye(c[h],d[h]);if(y!==0)return y}return Ye(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const c=Ye(sn(a.latitude),sn(u.latitude));return c!==0?c:Ye(sn(a.longitude),sn(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return NS(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var c,d,h,y;const E=a.fields||{},T=u.fields||{},C=(c=E[Th])===null||c===void 0?void 0:c.arrayValue,D=(d=T[Th])===null||d===void 0?void 0:d.arrayValue,k=Ye(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:NS(C,D)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Sd.mapValue&&u===Sd.mapValue)return 0;if(a===Sd.mapValue)return 1;if(u===Sd.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),h=u.fields||{},y=Object.keys(h);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const T=ay(d[E],y[E]);if(T!==0)return T;const C=Ml(c[d[E]],h[y[E]]);if(C!==0)return C}return Ye(d.length,y.length)})(t.mapValue,e.mapValue);default:throw ke(23264,{le:n})}}function xS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ye(t,e);const n=To(t),i=To(e),s=Ye(n.seconds,i.seconds);return s!==0?s:Ye(n.nanos,i.nanos)}function NS(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=Ml(n[s],i[s]);if(a)return a}return Ye(n.length,i.length)}function Pl(t){return ly(t)}function ly(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=To(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return So(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=ly(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const u of i)a?a=!1:s+=",",s+=`${u}:${ly(n.fields[u])}`;return s+"}"})(t.mapValue):ke(61005,{value:t})}function Wd(t){switch(Ao(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ep(t);return e?16+Wd(e):16;case 5:return 2*t.stringValue.length;case 6:return So(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+Wd(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return _a(i.fields,((a,u)=>{s+=a.length+Wd(u)})),s})(t.mapValue);default:throw ke(13486,{value:t})}}function uy(t){return!!t&&"integerValue"in t}function yv(t){return!!t&&"arrayValue"in t}function DS(t){return!!t&&"nullValue"in t}function MS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qd(t){return!!t&&"mapValue"in t}function rk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||n===void 0?void 0:n.stringValue)===HC}function uc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _a(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=uc(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ik}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Qd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(n)}setAll(e){let n=qn.emptyPath(),i={},s=[];e.forEach(((u,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=c.popLast()}u?i[c.lastSegment()]=uc(u):s.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());Qd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Qd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){_a(n,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new nr(uc(this.value))}}function GC(t){const e=[];return _a(t.fields,((n,i)=>{const s=new qn([n]);if(Qd(i)){const a=GC(i.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,i,s,a,u,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Xn(e,0,Ve.min(),Ve.min(),Ve.min(),nr.empty(),0)}static newFoundDocument(e,n,i,s){return new Xn(e,1,n,Ve.min(),i,s,0)}static newNoDocument(e,n){return new Xn(e,2,n,Ve.min(),Ve.min(),nr.empty(),0)}static newUnknownDocument(e,n){return new Xn(e,3,n,Ve.min(),Ve.min(),nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.position=e,this.inclusive=n}}function PS(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],u=t.position[s];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(u.referenceValue),n.key):i=Ml(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function kS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n="asc"){this.field=e,this.dir=n}}function ok(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class En extends KC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new lk(e,n,i):n==="array-contains"?new fk(e,i):n==="in"?new dk(e,i):n==="not-in"?new hk(e,i):n==="array-contains-any"?new pk(e,i):new En(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new uk(e,i):new ck(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ml(n,this.value)):n!==null&&Ao(this.value)===Ao(n)&&this.matchesComparison(Ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends KC{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Br(e,n)}matches(e){return JC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function JC(t){return t.op==="and"}function YC(t){return ak(t)&&JC(t)}function ak(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function cy(t){if(t instanceof En)return t.field.canonicalString()+t.op.toString()+Pl(t.value);if(YC(t))return t.filters.map((e=>cy(e))).join(",");{const e=t.filters.map((n=>cy(n))).join(",");return`${t.op}(${e})`}}function $C(t,e){return t instanceof En?(function(i,s){return s instanceof En&&i.op===s.op&&i.field.isEqual(s.field)&&Fr(i.value,s.value)})(t,e):t instanceof Br?(function(i,s){return s instanceof Br&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,u,c)=>a&&$C(u,s.filters[c])),!0):!1})(t,e):void ke(19439)}function jC(t){return t instanceof En?(function(n){return`${n.field.canonicalString()} ${n.op} ${Pl(n.value)}`})(t):t instanceof Br?(function(n){return n.op.toString()+" {"+n.getFilters().map(jC).join(" ,")+"}"})(t):"Filter"}class lk extends En{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class uk extends En{constructor(e,n){super(e,"in",n),this.keys=WC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class ck extends En{constructor(e,n){super(e,"not-in",n),this.keys=WC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function WC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ne.fromName(i.referenceValue)))}class fk extends En{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yv(n)&&Dc(n.arrayValue,this.value)}}class dk extends En{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}}class hk extends En{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dc(this.value.arrayValue,n)}}class pk extends En{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Dc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n=null,i=[],s=[],a=null,u=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=u,this.endAt=c,this.Pe=null}}function LS(t,e=null,n=[],i=[],s=null,a=null,u=null){return new mk(t,e,n,i,s,a,u)}function vv(t){const e=Fe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>cy(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Zh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Pl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Pl(i))).join(",")),e.Pe=n}return e.Pe}function _v(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ok(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$C(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kS(t.startAt,e.startAt)&&kS(t.endAt,e.endAt)}function fy(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n=null,i=[],s=[],a=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=u,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function gk(t,e,n,i,s,a,u,c){return new tp(t,e,n,i,s,a,u,c)}function QC(t){return new tp(t)}function VS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yk(t){return t.collectionGroup!==null}function cc(t){const e=Fe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new Tn(qn.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Ah(a,i))})),n.has(qn.keyField().canonicalString())||e.Te.push(new Ah(qn.keyField(),i))}return e.Te}function Lr(t){const e=Fe(t);return e.Ie||(e.Ie=vk(e,cc(t))),e.Ie}function vk(t,e){if(t.limitType==="F")return LS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Ah(s.field,a)}));const n=t.endAt?new Sh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Sh(t.startAt.position,t.startAt.inclusive):null;return LS(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function dy(t,e,n){return new tp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function np(t,e){return _v(Lr(t),Lr(e))&&t.limitType===e.limitType}function XC(t){return`${vv(Lr(t))}|lt:${t.limitType}`}function hl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>jC(s))).join(", ")}]`),Zh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Pl(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Pl(s))).join(",")),`Target(${i})`})(Lr(t))}; limitType=${t.limitType})`}function ip(t,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,s){for(const a of cc(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(u,c,d){const h=PS(u,c,d);return u.inclusive?h<=0:h<0})(i.startAt,cc(i),s)||i.endAt&&!(function(u,c,d){const h=PS(u,c,d);return u.inclusive?h>=0:h>0})(i.endAt,cc(i),s))})(t,e)}function _k(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZC(t){return(e,n)=>{let i=!1;for(const s of cc(t)){const a=Ek(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function Ek(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(a,u,c){const d=u.data.field(a),h=c.data.field(a);return d!==null&&h!==null?Ml(d,h):ke(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ke(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_a(this.inner,((n,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return VC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new Kt(Ne.comparator);function ys(){return Tk}const eI=new Kt(Ne.comparator);function ec(...t){let e=eI;for(const n of t)e=e.insert(n.key,n);return e}function tI(t){let e=eI;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function sa(){return fc()}function nI(){return fc()}function fc(){return new Ea((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Sk=new Kt(Ne.comparator),Ak=new Tn(Ne.comparator);function nt(...t){let e=Ak;for(const n of t)e=e.add(n);return e}const bk=new Tn(Ye);function wk(){return bk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_h(e)?"-0":e}}function iI(t){return{integerValue:""+t}}function Ck(t,e){return XP(e)?iI(e):Ev(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(){this._=void 0}}function Ik(t,e,n){return t instanceof bh?(function(s,a){const u={fields:{[FC]:{stringValue:UC},[qC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&gv(a)&&(a=ep(a)),a&&(u.fields[BC]=a),{mapValue:u}})(n,e):t instanceof Mc?sI(t,e):t instanceof Pc?oI(t,e):(function(s,a){const u=rI(s,a),c=OS(u)+OS(s.Ee);return uy(u)&&uy(s.Ee)?iI(c):Ev(s.serializer,c)})(t,e)}function Rk(t,e,n){return t instanceof Mc?sI(t,e):t instanceof Pc?oI(t,e):n}function rI(t,e){return t instanceof wh?(function(i){return uy(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class bh extends rp{}class Mc extends rp{constructor(e){super(),this.elements=e}}function sI(t,e){const n=aI(e);for(const i of t.elements)n.some((s=>Fr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Pc extends rp{constructor(e){super(),this.elements=e}}function oI(t,e){let n=aI(e);for(const i of t.elements)n=n.filter((s=>!Fr(s,i)));return{arrayValue:{values:n}}}class wh extends rp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function OS(t){return sn(t.integerValue||t.doubleValue)}function aI(t){return yv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xk(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Mc&&s instanceof Mc||i instanceof Pc&&s instanceof Pc?Dl(i.elements,s.elements,Fr):i instanceof wh&&s instanceof wh?Fr(i.Ee,s.Ee):i instanceof bh&&s instanceof bh})(t.transform,e.transform)}class Nk{constructor(e,n){this.version=e,this.transformResults=n}}class hs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sp{}function lI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cI(t.key,hs.none()):new Gc(t.key,t.data,hs.none());{const n=t.data,i=nr.empty();let s=new Tn(qn.comparator);for(let a of e.fields)if(!s.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),s=s.add(a)}return new Ta(t.key,i,new yr(s.toArray()),hs.none())}}function Dk(t,e,n){t instanceof Gc?(function(s,a,u){const c=s.value.clone(),d=FS(s.fieldTransforms,a,u.transformResults);c.setAll(d),a.convertToFoundDocument(u.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Ta?(function(s,a,u){if(!Xd(s.precondition,a))return void a.convertToUnknownDocument(u.version);const c=FS(s.fieldTransforms,a,u.transformResults),d=a.data;d.setAll(uI(s)),d.setAll(c),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function dc(t,e,n,i){return t instanceof Gc?(function(a,u,c,d){if(!Xd(a.precondition,u))return c;const h=a.value.clone(),y=BS(a.fieldTransforms,d,u);return h.setAll(y),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof Ta?(function(a,u,c,d){if(!Xd(a.precondition,u))return c;const h=BS(a.fieldTransforms,d,u),y=u.data;return y.setAll(uI(a)),y.setAll(h),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,u,c){return Xd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c})(t,e,n)}function Mk(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=rI(i.transform,s||null);a!=null&&(n===null&&(n=nr.empty()),n.set(i.field,a))}return n||null}function US(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Dl(i,s,((a,u)=>xk(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gc extends sp{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ta extends sp{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function uI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function FS(t,e,n){const i=new Map;vt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],u=a.transform,c=e.data.field(a.field);i.set(a.field,Rk(u,c,n[s]))}return i}function BS(t,e,n){const i=new Map;for(const s of t){const a=s.transform,u=n.data.field(s.field);i.set(s.field,Ik(a,u,e))}return i}class cI extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pk extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Dk(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=dc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=dc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=nI();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let c=this.applyToLocalView(u,a.mutatedFields);c=n.has(s.key)?null:c;const d=lI(u,c);d!==null&&i.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(Ve.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,((n,i)=>US(n,i)))&&Dl(this.baseMutations,e.baseMutations,((n,i)=>US(n,i)))}}class Tv{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){vt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=(function(){return Sk})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,i[u].version);return new Tv(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,at;function Ok(t){switch(t){case ce.OK:return ke(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function fI(t){if(t===void 0)return gs("GRPC error has no .code"),ce.UNKNOWN;switch(t){case hn.OK:return ce.OK;case hn.CANCELLED:return ce.CANCELLED;case hn.UNKNOWN:return ce.UNKNOWN;case hn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case hn.INTERNAL:return ce.INTERNAL;case hn.UNAVAILABLE:return ce.UNAVAILABLE;case hn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case hn.NOT_FOUND:return ce.NOT_FOUND;case hn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case hn.ABORTED:return ce.ABORTED;case hn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case hn.DATA_LOSS:return ce.DATA_LOSS;default:return ke(39323,{code:t})}}(at=hn||(hn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new mo([4294967295,4294967295],0);function qS(t){const e=MC().encode(t),n=new bC;return n.update(e),new Uint8Array(n.digest())}function zS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([n,i],0),new mo([s,a],0)]}class Sv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new tc(`Invalid padding: ${n}`);if(i<0)throw new tc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new tc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=mo.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(mo.fromNumber(i)));return s.compare(Uk)===1&&(s=new mo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=qS(e),[i,s]=zS(n);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,s,a);if(!this.ye(u))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Sv(a,s,n);return i.forEach((c=>u.insert(c))),u}insert(e){if(this.fe===0)return;const n=qS(e),[i,s]=zS(n);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,s,a);this.we(u)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new op(Ve.min(),s,new Kt(Ye),ys(),nt())}}class Kc{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Kc(i,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class dI{constructor(e,n){this.targetId=e,this.De=n}}class hI{constructor(e,n,i=Hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class HS{constructor(){this.ve=0,this.Ce=GS(),this.Fe=Hn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=nt(),n=nt(),i=nt();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:ke(38017,{changeType:a})}})),new Kc(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=GS()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Fk{constructor(e){this.We=e,this.Ge=new Map,this.ze=ys(),this.je=Ad(),this.Je=Ad(),this.He=new Kt(Ye)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const a=s.target;if(fy(a))if(i===0){const u=new Ne(a.path);this.Xe(n,u,Xn.newNoDocument(u,Ve.min()))}else vt(i===1,20013,{expectedCount:i});else{const u=this.ot(n);if(u!==i){const c=this._t(e),d=c?this.ut(c,e,u):1;if(d!==0){this.rt(n);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let u,c;try{u=So(i).toUint8Array()}catch(d){if(d instanceof OC)return _o("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Sv(u,s,a)}catch(d){return _o(d instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach((a=>{const u=this.We.lt(),c=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,a,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((a,u)=>{const c=this.st(u);if(c){if(a.current&&fy(c.target)){const d=new Ne(c.target.path);this.Tt(d).has(u)||this.It(u,d)||this.Xe(u,d,Xn.newNoDocument(d,e))}a.Ne&&(n.set(u,a.Le()),a.ke())}}));let i=nt();this.Je.forEach(((a,u)=>{let c=!0;u.forEachWhile((d=>{const h=this.st(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const s=new op(e,n,this.He,this.ze,i);return this.ze=ys(),this.je=Ad(),this.Je=Ad(),this.He=new Kt(Ye),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new HS,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Tn(Ye),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Tn(Ye),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new HS),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Ad(){return new Kt(Ne.comparator)}function GS(){return new Kt(Ne.comparator)}const Bk={asc:"ASCENDING",desc:"DESCENDING"},qk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zk={and:"AND",or:"OR"};class Hk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hy(t,e){return t.useProto3Json||Zh(e)?e:{value:e}}function Ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Gk(t,e){return Ch(t,e.toTimestamp())}function Vr(t){return vt(!!t,49232),Ve.fromTimestamp((function(n){const i=To(n);return new Ot(i.seconds,i.nanos)})(t))}function Av(t,e){return py(t,e).canonicalString()}function py(t,e){const n=(function(s){return new Vt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function mI(t){const e=Vt.fromString(t);return vt(EI(e),10190,{key:e.toString()}),e}function my(t,e){return Av(t.databaseId,e.path)}function Vg(t,e){const n=mI(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(yI(n))}function gI(t,e){return Av(t.databaseId,e)}function Kk(t){const e=mI(t);return e.length===4?Vt.emptyPath():yI(e)}function gy(t){return new Vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yI(t){return vt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function KS(t,e,n){return{name:my(t,e),fields:n.value.mapValue.fields}}function Jk(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ke(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,y){return h.useProto3Json?(vt(y===void 0||typeof y=="string",58123),Hn.fromBase64String(y||"")):(vt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Hn.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&(function(h){const y=h.code===void 0?ce.UNKNOWN:fI(h.code);return new Ie(y,h.message||"")})(u);n=new hI(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Vg(t,i.document.name),a=Vr(i.document.updateTime),u=i.document.createTime?Vr(i.document.createTime):Ve.min(),c=new nr({mapValue:{fields:i.document.fields}}),d=Xn.newFoundDocument(s,a,u,c),h=i.targetIds||[],y=i.removedTargetIds||[];n=new Zd(h,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Vg(t,i.document),a=i.readTime?Vr(i.readTime):Ve.min(),u=Xn.newNoDocument(s,a),c=i.removedTargetIds||[];n=new Zd([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Vg(t,i.document),a=i.removedTargetIds||[];n=new Zd([],a,s,null)}else{if(!("filter"in e))return ke(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,u=new Vk(s,a),c=i.targetId;n=new dI(c,u)}}return n}function Yk(t,e){let n;if(e instanceof Gc)n={update:KS(t,e.key,e.value)};else if(e instanceof cI)n={delete:my(t,e.key)};else if(e instanceof Ta)n={update:KS(t,e.key,e.data),updateMask:nL(e.fieldMask)};else{if(!(e instanceof Pk))return ke(16599,{Rt:e.type});n={verify:my(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const c=u.transform;if(c instanceof bh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Mc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wh)return{fieldPath:u.field.canonicalString(),increment:c.Ee};throw ke(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:Gk(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ke(27497)})(t,e.precondition)),n}function $k(t,e){return t&&t.length>0?(vt(e!==void 0,14353),t.map((n=>(function(s,a){let u=s.updateTime?Vr(s.updateTime):Vr(a);return u.isEqual(Ve.min())&&(u=Vr(a)),new Nk(u,s.transformResults||[])})(n,e)))):[]}function jk(t,e){return{documents:[gI(t,e.path)]}}function Wk(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gI(t,s);const a=(function(h){if(h.length!==0)return _I(Br.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((y=>(function(T){return{field:pl(T.field),direction:Zk(T.dir)}})(y)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const c=hy(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{Vt:n,parent:s}}function Qk(t){let e=Kk(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){vt(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];n.where&&(a=(function(E){const T=vI(E);return T instanceof Br&&YC(T)?T.getFilters():[T]})(n.where));let u=[];n.orderBy&&(u=(function(E){return E.map((T=>(function(D){return new Ah(ml(D.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(E){let T;return T=typeof E=="object"?E.value:E,Zh(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(E){const T=!!E.before,C=E.values||[];return new Sh(C,T)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const T=!E.before,C=E.values||[];return new Sh(C,T)})(n.endAt)),gk(e,s,u,a,c,"F",d,h)}function Xk(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ml(n.unaryFilter.field);return En.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ml(n.unaryFilter.field);return En.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ml(n.unaryFilter.field);return En.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ml(n.unaryFilter.field);return En.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(t):t.fieldFilter!==void 0?(function(n){return En.create(ml(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Br.create(n.compositeFilter.filters.map((i=>vI(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(t):ke(30097,{filter:t})}function Zk(t){return Bk[t]}function eL(t){return qk[t]}function tL(t){return zk[t]}function pl(t){return{fieldPath:t.canonicalString()}}function ml(t){return qn.fromServerFormat(t.fieldPath)}function _I(t){return t instanceof En?(function(n){if(n.op==="=="){if(MS(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NAN"}};if(DS(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MS(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NOT_NAN"}};if(DS(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(n.field),op:eL(n.op),value:n.value}}})(t):t instanceof Br?(function(n){const i=n.getFilters().map((s=>_I(s)));return i.length===1?i[0]:{compositeFilter:{op:tL(n.op),filters:i}}})(t):ke(54877,{filter:t})}function nL(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function EI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,i,s,a=Ve.min(),u=Ve.min(),c=Hn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.gt=e}}function rL(t){const e=Qk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.Dn=new oL}addToCollectionParentIndex(e,n){return this.Dn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(Eo.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(Eo.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class oL{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new Tn(Vt.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Tn(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TI=41943040;class Ti{static withCacheSize(e){return new Ti(e,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(TI,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new kl(0)}static ur(){return new kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="LruGarbageCollector",aL=1048576;function $S([t,e],[n,i]){const s=Ye(t,n);return s===0?Ye(e,i):s}class lL{constructor(e){this.Tr=e,this.buffer=new Tn($S),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();$S(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uL{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(YS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zl(n)?_e(YS,"Ignoring IndexedDB error during garbage collection: ",n):await ql(n)}await this.Rr(3e5)}))}}class cL{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(Xh.ue);const i=new lL(n);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(JS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JS):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,a,u,c,d,h;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,c=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),dl()<=tt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${s} in `+(c-u)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${E} documents in `+(h-d)+`ms
Total Duration: ${h-y}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function fL(t,e){return new cL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.changes=new Ea((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&dc(i.mutation,s,yr.empty(),Ot.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,nt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=nt()){const s=sa();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((a=>{let u=ec();return a.forEach(((c,d)=>{u=u.insert(c,d.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=sa();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,nt())))}populateOverlays(e,n,i){const s=[];return i.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,c)=>{n.set(u,c)}))}))}computeViews(e,n,i,s){let a=ys();const u=fc(),c=(function(){return fc()})();return n.forEach(((d,h)=>{const y=i.get(h.key);s.has(h.key)&&(y===void 0||y.mutation instanceof Ta)?a=a.insert(h.key,h):y!==void 0?(u.set(h.key,y.mutation.getFieldMask()),dc(y.mutation,h,y.mutation.getFieldMask(),Ot.now())):u.set(h.key,yr.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,y)=>u.set(h,y))),n.forEach(((h,y)=>{var E;return c.set(h,new hL(y,(E=u.get(h))!==null&&E!==void 0?E:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=fc();let s=new Kt(((u,c)=>u-c)),a=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const c of u)c.keys().forEach((d=>{const h=n.get(d);if(h===null)return;let y=i.get(d)||yr.empty();y=c.applyToLocalView(h,y),i.set(d,y);const E=(s.get(c.batchId)||nt()).add(d);s=s.insert(c.batchId,E)}))})).next((()=>{const u=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,y=d.value,E=nI();y.forEach((T=>{if(!a.has(T)){const C=lI(n.get(T),i.get(T));C!==null&&E.set(T,C),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return le.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(u){return Ne.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):le.resolve(sa());let c=Rc,d=a;return u.next((h=>le.forEach(h,((y,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),a.get(y)?le.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{d=d.insert(y,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,nt()))).next((y=>({batchId:c,changes:tI(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((i=>{let s=ec();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let u=ec();return this.indexManager.getCollectionParents(e,a).next((c=>le.forEach(c,(d=>{const h=(function(E,T){return new tp(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((y=>{y.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s)))).next((u=>{a.forEach(((d,h)=>{const y=h.getKey();u.get(y)===null&&(u=u.insert(y,Xn.newInvalidDocument(y)))}));let c=ec();return u.forEach(((d,h)=>{const y=a.get(d);y!==void 0&&dc(y.mutation,h,yr.empty(),Ot.now()),ip(n,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return le.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Vr(s.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:rL(s.bundledQuery),readTime:Vr(s.readTime)}})(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.overlays=new Kt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=sa();return le.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,a)=>{this.wt(e,n,a)})),le.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const s=sa(),a=n.length+1,u=new Ne(n.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return le.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new Kt(((h,y)=>h-y));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let y=a.get(h.largestBatchId);y===null&&(y=sa(),a=a.insert(h.largestBatchId,y)),y.set(h.getKey(),h)}}const c=sa(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,y)=>c.set(h,y))),!(c.size()>=s)););return le.resolve(c)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new Lk(n,i));let a=this.kr.get(n);a===void 0&&(a=nt(),this.kr.set(n,a)),this.kr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.qr=new Tn(Nn.Qr),this.$r=new Tn(Nn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Nn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Nn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Ne(new Vt([])),i=new Nn(n,e),s=new Nn(n,e+1),a=[];return this.$r.forEachInRange([i,s],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Vt([])),i=new Nn(n,e),s=new Nn(n,e+1);let a=nt();return this.$r.forEachInRange([i,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new Nn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Nn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||Ye(e.Hr,n.Hr)}static Ur(e,n){return Ye(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Tn(Nn.Qr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new kk(a,n,i,s);this.mutationQueue.push(u);for(const c of s)this.Yr=this.Yr.add(new Nn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return le.resolve(u)}lookupMutationBatch(e,n){return le.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),a=s<0?0:s;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?mv:this.er-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Nn(n,0),s=new Nn(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,s],(u=>{const c=this.Zr(u.Hr);a.push(c)})),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Tn(Ye);return n.forEach((s=>{const a=new Nn(s,0),u=new Nn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(c=>{i=i.add(c.Hr)}))})),le.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const u=new Nn(new Ne(a),0);let c=new Tn(Ye);return this.Yr.forEachWhile((d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Hr)),!0)}),u),le.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){vt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return le.forEach(n.mutations,(s=>{const a=new Nn(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Nn(n,0),s=this.Yr.firstAfterOrEqual(i);return le.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.ni=e,this.docs=(function(){return new Kt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,u=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(e,n){let i=ys();return n.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Xn.newInvalidDocument(s))})),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=ys();const u=n.path,c=new Ne(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:y}}=d.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||$P(YP(y),i)<=0||(s.has(y.key)||ip(n,y))&&(a=a.insert(y.key,y.mutableCopy()))}return le.resolve(a)}getAllFromCollectionGroup(e,n,i,s){ke(9500)}ri(e,n){return le.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new EL(this)}getSize(e){return le.resolve(this.size)}}class EL extends dL{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)})),le.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.persistence=e,this.ii=new Ea((n=>vv(n)),_v),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.si=0,this.oi=new bv,this.targetCount=0,this._i=kl.ar()}forEachTarget(e,n){return this.ii.forEach(((i,s)=>n(s))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),le.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new kl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.hr(n),le.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.ii.forEach(((u,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),le.waitFor(a).next((()=>s))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),le.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),le.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n){this.ai={},this.overlays={},this.ui=new Xh(0),this.ci=!1,this.ci=!0,this.li=new yL,this.referenceDelegate=e(this),this.hi=new TL(this),this.indexManager=new sL,this.remoteDocumentCache=(function(s){return new _L(s)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new iL(n),this.Ti=new mL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new vL(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const s=new SL(this.ui.next());return this.referenceDelegate.Ii(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,n){return le.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class SL extends WP{constructor(e){super(),this.currentSequenceNumber=e}}class wv{constructor(e){this.persistence=e,this.Ai=new bv,this.Ri=null}static Vi(e){return new wv(e)}get mi(){if(this.Ri)return this.Ri;throw ke(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.mi,(i=>{const s=Ne.fromPath(i);return this.fi(e,s).next((a=>{a||n.removeEntry(s,Ve.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return le.or([()=>le.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ih{constructor(e,n){this.persistence=e,this.gi=new Ea((i=>ZP(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=fL(this,n)}static Vi(e,n){return new Ih(e,n)}Ii(){}di(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return le.forEach(this.gi,((i,s)=>this.Sr(e,i,s).next((a=>a?le.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,n).next((c=>{c||(i++,a.removeEntry(u,Ve.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),le.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wd(e.data.value)),n}Sr(e,n,i){return le.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return le.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=nt(),s=nt();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Cv(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return eD()?8:QP(ei())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ps(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,n,s,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new AL;return this.ws(e,n,u).next((c=>{if(a.result=c,this.Rs)return this.Ss(e,n,u,c.size)}))})).next((()=>a.result))}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(dl()<=tt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(dl()<=tt.DEBUG&&_e("QueryEngine","Query:",hl(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(dl()<=tt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lr(n))):le.resolve())}ps(e,n){if(VS(n))return le.resolve(null);let i=Lr(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=dy(n,null,"F"),i=Lr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=nt(...a);return this.gs.getDocuments(e,u).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const h=this.bs(n,c);return this.Ds(n,h,u,d.readTime)?this.ps(e,dy(n,null,"F")):this.vs(e,h,n,d)}))))})))))}ys(e,n,i,s){return VS(n)||s.isEqual(Ve.min())?le.resolve(null):this.gs.getDocuments(e,i).next((a=>{const u=this.bs(n,a);return this.Ds(n,u,i,s)?le.resolve(null):(dl()<=tt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hl(n)),this.vs(e,u,n,JP(s,Rc)).next((c=>c)))}))}bs(e,n){let i=new Tn(ZC(e));return n.forEach(((s,a)=>{ip(e,a)&&(i=i.add(a))})),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,i){return dl()<=tt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",hl(n)),this.gs.getDocumentsMatchingQuery(e,n,Eo.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="LocalStore",wL=3e8;class CL{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Kt(Ye),this.Ms=new Ea((a=>vv(a)),_v),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function IL(t,e,n,i){return new CL(t,e,n,i)}async function AI(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],c=[];let d=nt();for(const h of s){u.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}for(const h of a){c.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next((h=>({Bs:h,removedBatchIds:u,addedBatchIds:c})))}))}))}function RL(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,y){const E=h.batch,T=E.keys();let C=le.resolve();return T.forEach((D=>{C=C.next((()=>y.getEntry(d,D))).next((k=>{const U=h.docVersions.get(D);vt(U!==null,48541),k.version.compareTo(U)<0&&(E.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),y.addEntry(k)))}))})),C.next((()=>c.mutationQueue.removeMutationBatch(d,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=nt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function bI(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function xL(t,e){const n=Fe(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach(((y,E)=>{const T=s.get(E);if(!T)return;c.push(n.hi.removeMatchingKeys(a,y.removedDocuments,E).next((()=>n.hi.addMatchingKeys(a,y.addedDocuments,E))));let C=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(Hn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):y.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(y.resumeToken,i)),s=s.insert(E,C),(function(k,U,H){return k.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=wL?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,C,y)&&c.push(n.hi.updateTargetData(a,C))}));let d=ys(),h=nt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,y))})),c.push(NL(a,u,e.documentUpdates).next((y=>{d=y.Ls,h=y.ks}))),!i.isEqual(Ve.min())){const y=n.hi.getLastRemoteSnapshotVersion(a).next((E=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(y)}return le.waitFor(c).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(n.Fs=s,a)))}function NL(t,e,n){let i=nt(),s=nt();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=ys();return n.forEach(((c,d)=>{const h=a.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Ve.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):_e(Iv,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ls:u,ks:s}}))}function DL(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=mv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function ML(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.hi.getTargetData(i,e).next((a=>a?(s=a,le.resolve(s)):n.hi.allocateTargetId(i).next((u=>(s=new co(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function yy(t,e,n){const i=Fe(t),s=i.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!zl(u))throw u;_e(Iv,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function jS(t,e,n){const i=Fe(t);let s=Ve.min(),a=nt();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,h,y){const E=Fe(d),T=E.Ms.get(y);return T!==void 0?le.resolve(E.Fs.get(T)):E.hi.getTargetData(h,y)})(i,u,Lr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,c.targetId).next((d=>{a=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,n?s:Ve.min(),n?a:nt()))).next((c=>(PL(i,_k(e),c),{documents:c,qs:a})))))}function PL(t,e,n){let i=t.xs.get(e)||Ve.min();n.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.xs.set(e,i)}class WS{constructor(){this.activeTargetIds=wk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kL{constructor(){this.Fo=new WS,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new WS,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="ConnectivityMonitor";class XS{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(QS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_e(QS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd=null;function vy(){return bd===null?bd=(function(){return 268435456+Math.round(2147483648*Math.random())})():bd++,"0x"+bd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="RestConnection",VL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Eh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,a){const u=vy(),c=this.Go(e,n.toUriEncodedString());_e(Og,`Sending RPC '${e}' ${u}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,a);const{host:h}=new URL(c),y=Co(h);return this.jo(e,c,d,i,y).then((E=>(_e(Og,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw _o(Og,`RPC '${e}' ${u} failed with error: `,E,"url: ",c,"request:",i),E}))}Jo(e,n,i,s,a,u){return this.Wo(e,n,i,s,a)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Go(e,n){const i=VL[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class FL extends OL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,a){const u=vy();return new Promise(((c,d)=>{const h=new wC;h.setWithCredentials(!0),h.listenOnce(CC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case jd.NO_ERROR:const E=h.getResponseJson();_e($n,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),c(E);break;case jd.TIMEOUT:_e($n,`RPC '${e}' ${u} timed out`),d(new Ie(ce.DEADLINE_EXCEEDED,"Request time out"));break;case jd.HTTP_ERROR:const T=h.getStatus();if(_e($n,`RPC '${e}' ${u} failed with status:`,T,"response text:",h.getResponseText()),T>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const D=C==null?void 0:C.error;if(D&&D.status&&D.message){const k=(function(H){const F=H.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(F)>=0?F:ce.UNKNOWN})(D.status);d(new Ie(k,D.message))}else d(new Ie(ce.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Ie(ce.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{c_:e,streamId:u,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{_e($n,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(s);_e($n,`RPC '${e}' ${u} sending request:`,s),h.send(n,"POST",y,i,15)}))}P_(e,n,i){const s=vy(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xC(),c=RC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const y=a.join("");_e($n,`Creating RPC '${e}' stream ${s}: ${y}`,d);const E=u.createWebChannel(y,d);this.T_(E);let T=!1,C=!1;const D=new UL({Ho:U=>{C?_e($n,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(T||(_e($n,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),_e($n,`RPC '${e}' stream ${s} sending:`,U),E.send(U))},Yo:()=>E.close()}),k=(U,H,F)=>{U.listen(H,(B=>{try{F(B)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return k(E,Zu.EventType.OPEN,(()=>{C||(_e($n,`RPC '${e}' stream ${s} transport opened.`),D.s_())})),k(E,Zu.EventType.CLOSE,(()=>{C||(C=!0,_e($n,`RPC '${e}' stream ${s} transport closed`),D.__(),this.I_(E))})),k(E,Zu.EventType.ERROR,(U=>{C||(C=!0,_o($n,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),D.__(new Ie(ce.UNAVAILABLE,"The operation could not be completed")))})),k(E,Zu.EventType.MESSAGE,(U=>{var H;if(!C){const F=U.data[0];vt(!!F,16349);const B=F,Y=(B==null?void 0:B.error)||((H=B[0])===null||H===void 0?void 0:H.error);if(Y){_e($n,`RPC '${e}' stream ${s} received error:`,Y);const X=Y.status;let G=(function(x){const L=hn[x];if(L!==void 0)return fI(L)})(X),I=Y.message;G===void 0&&(G=ce.INTERNAL,I="Unknown error status: "+X+" with message "+Y.message),C=!0,D.__(new Ie(G,I)),E.close()}else _e($n,`RPC '${e}' stream ${s} received:`,F),D.a_(F)}})),k(c,IC.STAT_EVENT,(U=>{U.stat===oy.PROXY?_e($n,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===oy.NOPROXY&&_e($n,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{D.o_()}),0),D}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t){return new Hk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="PersistentStream";class CI{constructor(e,n,i,s,a,u,c,d){this.Fi=e,this.w_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new wI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(gs(n.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.b_===n&&this.W_(i,s)}),(i=>{e((()=>{const s=new Ie(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{i((()=>this.G_(s)))})),this.stream.onMessage((s=>{i((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return _e(ZS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(_e(ZS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BL extends CI{constructor(e,n,i,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,u),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Jk(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ve.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?Vr(u.readTime):Ve.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=gy(this.serializer),n.addTarget=(function(a,u){let c;const d=u.target;if(c=fy(d)?{documents:jk(a,d)}:{query:Wk(a,d).Vt},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=pI(a,u.resumeToken);const h=hy(a,u.expectedCount);h!==null&&(c.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ve.min())>0){c.readTime=Ch(a,u.snapshotVersion.toTimestamp());const h=hy(a,u.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=Xk(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=gy(this.serializer),n.removeTarget=e,this.k_(n)}}class qL extends CI{constructor(e,n,i,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=$k(e.writeResults,e.commitTime),i=Vr(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=gy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>Yk(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{}class HL extends zL{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ie(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,py(n,i),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(ce.UNKNOWN,a.toString())}))}Jo(e,n,i,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Jo(e,py(n,i),s,u,c,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ie(ce.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class GL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(gs(n),this._a=!1):_e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="RemoteStore";class KL{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{i.enqueueAndForget((async()=>{Sa(this)&&(_e(ma,"Restarting streams for network reachability change."),await(async function(d){const h=Fe(d);h.Ia.add(4),await Jc(h),h.Aa.set("Unknown"),h.Ia.delete(4),await lp(h)})(this))}))})),this.Aa=new GL(i,s)}}async function lp(t){if(Sa(t))for(const e of t.da)await e(!0)}async function Jc(t){for(const e of t.da)await e(!1)}function II(t,e){const n=Fe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Dv(n)?Nv(n):Hl(n).x_()&&xv(n,e))}function Rv(t,e){const n=Fe(t),i=Hl(n);n.Ta.delete(e),i.x_()&&RI(n,e),n.Ta.size===0&&(i.x_()?i.B_():Sa(n)&&n.Aa.set("Unknown"))}function xv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hl(t).H_(e)}function RI(t,e){t.Ra.$e(e),Hl(t).Y_(e)}function Nv(t){t.Ra=new Fk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Hl(t).start(),t.Aa.aa()}function Dv(t){return Sa(t)&&!Hl(t).M_()&&t.Ta.size>0}function Sa(t){return Fe(t).Ia.size===0}function xI(t){t.Ra=void 0}async function JL(t){t.Aa.set("Online")}async function YL(t){t.Ta.forEach(((e,n)=>{xv(t,e)}))}async function $L(t,e){xI(t),Dv(t)?(t.Aa.la(e),Nv(t)):t.Aa.set("Unknown")}async function jL(t,e,n){if(t.Aa.set("Online"),e instanceof hI&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const c of a.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,u),s.Ta.delete(c),s.Ra.removeTarget(c))})(t,e)}catch(i){_e(ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rh(t,i)}else if(e instanceof Zd?t.Ra.Ye(e):e instanceof dI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ve.min()))try{const i=await bI(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const c=a.Ra.Pt(u);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const y=a.Ta.get(h);y&&a.Ta.set(h,y.withResumeToken(d.resumeToken,u))}})),c.targetMismatches.forEach(((d,h)=>{const y=a.Ta.get(d);if(!y)return;a.Ta.set(d,y.withResumeToken(Hn.EMPTY_BYTE_STRING,y.snapshotVersion)),RI(a,d);const E=new co(y.target,d,h,y.sequenceNumber);xv(a,E)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){_e(ma,"Failed to raise snapshot:",i),await Rh(t,i)}}async function Rh(t,e,n){if(!zl(e))throw e;t.Ia.add(1),await Jc(t),t.Aa.set("Offline"),n||(n=()=>bI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_e(ma,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await lp(t)}))}function NI(t,e){return e().catch((n=>Rh(t,n,e)))}async function up(t){const e=Fe(t),n=bo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:mv;for(;WL(e);)try{const s=await DL(e.localStore,i);if(s===null){e.Pa.length===0&&n.B_();break}i=s.batchId,QL(e,s)}catch(s){await Rh(e,s)}DI(e)&&MI(e)}function WL(t){return Sa(t)&&t.Pa.length<10}function QL(t,e){t.Pa.push(e);const n=bo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function DI(t){return Sa(t)&&!bo(t).M_()&&t.Pa.length>0}function MI(t){bo(t).start()}async function XL(t){bo(t).na()}async function ZL(t){const e=bo(t);for(const n of t.Pa)e.X_(n.mutations)}async function eV(t,e,n){const i=t.Pa.shift(),s=Tv.from(i,e,n);await NI(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await up(t)}async function tV(t,e){e&&bo(t).Z_&&await(async function(i,s){if((function(u){return Ok(u)&&u!==ce.ABORTED})(s.code)){const a=i.Pa.shift();bo(i).N_(),await NI(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await up(i)}})(t,e),DI(t)&&MI(t)}async function eA(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),_e(ma,"RemoteStore received new credentials");const i=Sa(n);n.Ia.add(3),await Jc(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await lp(n)}async function nV(t,e){const n=Fe(t);e?(n.Ia.delete(2),await lp(n)):e||(n.Ia.add(2),await Jc(n),n.Aa.set("Unknown"))}function Hl(t){return t.Va||(t.Va=(function(n,i,s){const a=Fe(n);return a.ia(),new BL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:JL.bind(null,t),e_:YL.bind(null,t),n_:$L.bind(null,t),J_:jL.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),Dv(t)?Nv(t):t.Aa.set("Unknown")):(await t.Va.stop(),xI(t))}))),t.Va}function bo(t){return t.ma||(t.ma=(function(n,i,s){const a=Fe(n);return a.ia(),new qL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:XL.bind(null,t),n_:tV.bind(null,t),ea:ZL.bind(null,t),ta:eV.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await up(t)):(await t.ma.stop(),t.Pa.length>0&&(_e(ma,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const u=Date.now()+i,c=new Mv(e,n,u,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pv(t,e){if(gs("AsyncQueue",`${e}: ${t}`),zl(t))return new Ie(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=ec(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.fa=new Kt(Ne.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ke(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ll{constructor(e,n,i,s,a,u,c,d,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,a){const u=[];return n.forEach((c=>{u.push({type:0,doc:c})})),new Ll(e,n,Sl.emptySet(n),u,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class rV{constructor(){this.queries=nA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=Fe(n),a=s.queries;s.queries=nA(),a.forEach(((u,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Ie(ce.ABORTED,"Firestore shutting down"))}}function nA(){return new Ea((t=>XC(t)),np)}async function sV(t,e){const n=Fe(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(i=2):(a=new iV,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const c=Pv(u,`Initialization of query '${hl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&kv(n)}async function oV(t,e){const n=Fe(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function aV(t,e){const n=Fe(t);let i=!1;for(const s of e){const a=s.query,u=n.queries.get(a);if(u){for(const c of u.wa)c.Ca(s)&&(i=!0);u.ya=s}}i&&kv(n)}function lV(t,e,n){const i=Fe(t),s=i.queries.get(e);if(s)for(const a of s.wa)a.onError(n);i.queries.delete(e)}function kv(t){t.Da.forEach((e=>{e.next()}))}var _y,iA;(iA=_y||(_y={})).Fa="default",iA.Cache="cache";class uV{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ll(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==_y.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.key=e}}class kI{constructor(e){this.key=e}}class cV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=nt(),this.mutatedKeys=nt(),this.Xa=ZC(e),this.eu=new Sl(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new tA,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,u=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const T=s.get(y),C=ip(this.query,E)?E:null,D=!!T&&this.mutatedKeys.has(T.key),k=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let U=!1;T&&C?T.data.isEqual(C.data)?D!==k&&(i.track({type:3,doc:C}),U=!0):this.iu(T,C)||(i.track({type:2,doc:C}),U=!0,(d&&this.Xa(C,d)>0||h&&this.Xa(C,h)<0)&&(c=!0)):!T&&C?(i.track({type:0,doc:C}),U=!0):T&&!C&&(i.track({type:1,doc:T}),U=!0,(d||h)&&(c=!0)),U&&(C?(u=u.add(C),a=k?a.add(y):a.delete(y)):(u=u.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{eu:u,ru:i,Ds:c,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((y,E)=>(function(C,D){const k=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{At:U})}};return k(C)-k(D)})(y.type,E.type)||this.Xa(y.doc,E.doc))),this.su(i),s=s!=null&&s;const c=n&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,h=d!==this.Ya;return this.Ya=d,u.length!==0||h?{snapshot:new Ll(this.query,e.eu,a,u,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new tA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=nt(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new kI(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new PI(i))})),n}uu(e){this.Ha=e.qs,this.Za=nt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ll.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Lv="SyncEngine";class fV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class dV{constructor(e){this.key=e,this.lu=!1}}class hV{constructor(e,n,i,s,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Ea((c=>XC(c)),np),this.Tu=new Map,this.Iu=new Set,this.du=new Kt(Ne.comparator),this.Eu=new Map,this.Au=new bv,this.Ru={},this.Vu=new Map,this.mu=kl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function pV(t,e,n=!0){const i=BI(t);let s;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await LI(i,e,n,!0),s}async function mV(t,e){const n=BI(t);await LI(n,e,!0,!1)}async function LI(t,e,n,i){const s=await ML(t.localStore,Lr(e)),a=s.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let c;return i&&(c=await gV(t,e,a,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&II(t.remoteStore,s),c}async function gV(t,e,n,i,s){t.gu=(E,T,C)=>(async function(k,U,H,F){let B=U.view.nu(H);B.Ds&&(B=await jS(k.localStore,U.query,!1).then((({documents:I})=>U.view.nu(I,B))));const Y=F&&F.targetChanges.get(U.targetId),X=F&&F.targetMismatches.get(U.targetId)!=null,G=U.view.applyChanges(B,k.isPrimaryClient,Y,X);return sA(k,U.targetId,G._u),G.snapshot})(t,E,T,C);const a=await jS(t.localStore,e,!0),u=new cV(e,a.qs),c=u.nu(a.documents),d=Kc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=u.applyChanges(c,t.isPrimaryClient,d);sA(t,n,h._u);const y=new fV(e,n,u);return t.Pu.set(e,y),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function yV(t,e,n){const i=Fe(t),s=i.Pu.get(e),a=i.Tu.get(s.targetId);if(a.length>1)return i.Tu.set(s.targetId,a.filter((u=>!np(u,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await yy(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Rv(i.remoteStore,s.targetId),Ey(i,s.targetId)})).catch(ql)):(Ey(i,s.targetId),await yy(i.localStore,s.targetId,!0))}async function vV(t,e){const n=Fe(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Rv(n.remoteStore,i.targetId))}async function _V(t,e,n){const i=CV(t);try{const s=await(function(u,c){const d=Fe(u),h=Ot.now(),y=c.reduce(((C,D)=>C.add(D.key)),nt());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let D=ys(),k=nt();return d.Os.getEntries(C,y).next((U=>{D=U,D.forEach(((H,F)=>{F.isValidDocument()||(k=k.add(H))}))})).next((()=>d.localDocuments.getOverlayedDocuments(C,D))).next((U=>{E=U;const H=[];for(const F of c){const B=Mk(F,E.get(F.key).overlayedDocument);B!=null&&H.push(new Ta(F.key,B,GC(B.value.mapValue),hs.exists(!0)))}return d.mutationQueue.addMutationBatch(C,h,H,c)})).next((U=>{T=U;const H=U.applyToLocalDocumentSet(E,k);return d.documentOverlayCache.saveOverlays(C,U.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:tI(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(u,c,d){let h=u.Ru[u.currentUser.toKey()];h||(h=new Kt(Ye)),h=h.insert(c,d),u.Ru[u.currentUser.toKey()]=h})(i,s.batchId,n),await Yc(i,s.changes),await up(i.remoteStore)}catch(s){const a=Pv(s,"Failed to persist write");n.reject(a)}}async function VI(t,e){const n=Fe(t);try{const i=await xL(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=n.Eu.get(a);u&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?vt(u.lu,14607):s.removedDocuments.size>0&&(vt(u.lu,42227),u.lu=!1))})),await Yc(n,i,e)}catch(i){await ql(i)}}function rA(t,e,n){const i=Fe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach(((a,u)=>{const c=u.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(u,c){const d=Fe(u);d.onlineState=c;let h=!1;d.queries.forEach(((y,E)=>{for(const T of E.wa)T.va(c)&&(h=!0)})),h&&kv(d)})(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function EV(t,e,n){const i=Fe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),a=s&&s.key;if(a){let u=new Kt(Ne.comparator);u=u.insert(a,Xn.newNoDocument(a,Ve.min()));const c=nt().add(a),d=new op(Ve.min(),new Map,new Kt(Ye),u,c);await VI(i,d),i.du=i.du.remove(a),i.Eu.delete(e),Vv(i)}else await yy(i.localStore,e,!1).then((()=>Ey(i,e,n))).catch(ql)}async function TV(t,e){const n=Fe(t),i=e.batch.batchId;try{const s=await RL(n.localStore,e);UI(n,i,null),OI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Yc(n,s)}catch(s){await ql(s)}}async function SV(t,e,n){const i=Fe(t);try{const s=await(function(u,c){const d=Fe(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let y;return d.mutationQueue.lookupMutationBatch(h,c).next((E=>(vt(E!==null,37113),y=E.keys(),d.mutationQueue.removeMutationBatch(h,E)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,y,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,y))).next((()=>d.localDocuments.getDocuments(h,y)))}))})(i.localStore,e);UI(i,e,n),OI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Yc(i,s)}catch(s){await ql(s)}}function OI(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function UI(t,e,n){const i=Fe(t);let s=i.Ru[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function Ey(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||FI(t,i)}))}function FI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Rv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Vv(t))}function sA(t,e,n){for(const i of n)i instanceof PI?(t.Au.addReference(i.key,e),AV(t,i)):i instanceof kI?(_e(Lv,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||FI(t,i.key)):ke(19791,{yu:i})}function AV(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(_e(Lv,"New document in limbo: "+n),t.Iu.add(i),Vv(t))}function Vv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne(Vt.fromString(e)),i=t.mu.next();t.Eu.set(i,new dV(n)),t.du=t.du.insert(n,i),II(t.remoteStore,new co(Lr(QC(n.path)),i,"TargetPurposeLimboResolution",Xh.ue))}}async function Yc(t,e,n){const i=Fe(t),s=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{u.push(i.gu(d,e,n).then((h=>{var y;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(h){s.push(h);const E=Cv.Es(d.targetId,h);a.push(E)}})))})),await Promise.all(u),i.hu.J_(s),await(async function(d,h){const y=Fe(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>le.forEach(h,(T=>le.forEach(T.Is,(C=>y.persistence.referenceDelegate.addReference(E,T.targetId,C))).next((()=>le.forEach(T.ds,(C=>y.persistence.referenceDelegate.removeReference(E,T.targetId,C)))))))))}catch(E){if(!zl(E))throw E;_e(Iv,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const C=y.Fs.get(T),D=C.snapshotVersion,k=C.withLastLimboFreeSnapshotVersion(D);y.Fs=y.Fs.insert(T,k)}}})(i.localStore,a))}async function bV(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){_e(Lv,"User change. New user:",e.toKey());const i=await AI(n.localStore,e);n.currentUser=e,(function(a,u){a.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Ie(ce.CANCELLED,u))}))})),a.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Yc(n,i.Bs)}}function wV(t,e){const n=Fe(t),i=n.Eu.get(e);if(i&&i.lu)return nt().add(i.key);{let s=nt();const a=n.Tu.get(e);if(!a)return s;for(const u of a){const c=n.Pu.get(u);s=s.unionWith(c.view.tu)}return s}}function BI(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EV.bind(null,e),e.hu.J_=aV.bind(null,e.eventManager),e.hu.pu=lV.bind(null,e.eventManager),e}function CV(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SV.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ap(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return IL(this.persistence,new bL,e.initialUser,this.serializer)}Du(e){return new SI(wv.Vi,this.serializer)}bu(e){return new kL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class IV extends xh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){vt(this.persistence.referenceDelegate instanceof Ih,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new uL(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new SI((i=>Ih.Vi(i,n)),this.serializer)}}class Ty{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bV.bind(null,this.syncEngine),await nV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rV})()}createDatastore(e){const n=ap(e.databaseInfo.databaseId),i=(function(a){return new FL(a)})(e.databaseInfo);return(function(a,u,c,d){return new HL(a,u,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,a,u,c){return new KL(i,s,a,u,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>rA(this.syncEngine,n,0)),(function(){return XS.C()?new XS:new LL})())}createSyncEngine(e,n){return(function(s,a,u,c,d,h,y){const E=new hV(s,a,u,c,d,h);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Fe(s);_e(ma,"RemoteStore shutting down."),a.Ia.add(5),await Jc(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ty.provider={build:()=>new Ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="FirestoreClient";class xV{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Qn.UNAUTHENTICATED,this.clientId=hv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{_e(wo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(_e(wo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Pv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Fg(t,e){t.asyncQueue.verifyOperationInProgress(),_e(wo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await AI(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>{_o("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{_o("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function oA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NV(t);_e(wo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>eA(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>eA(e.remoteStore,s))),t._onlineComponents=e}async function NV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(wo,"Using user provided OfflineComponentProvider");try{await Fg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),await Fg(t,new xh)}}else _e(wo,"Using default OfflineComponentProvider"),await Fg(t,new IV(void 0));return t._offlineComponents}async function qI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(wo,"Using user provided OnlineComponentProvider"),await oA(t,t._uninitializedComponentsProvider._online)):(_e(wo,"Using default OnlineComponentProvider"),await oA(t,new Ty))),t._onlineComponents}function DV(t){return qI(t).then((e=>e.syncEngine))}async function MV(t){const e=await qI(t),n=e.eventManager;return n.onListen=pV.bind(null,e.syncEngine),n.onUnlisten=yV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vV.bind(null,e.syncEngine),n}function PV(t,e,n={}){const i=new go;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,c,d,h){const y=new RV({next:T=>{y.Ou(),u.enqueueAndForget((()=>oV(a,E))),T.fromCache&&d.source==="server"?h.reject(new Ie(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new uV(c,y,{includeMetadataChanges:!0,ka:!0});return sV(a,E)})(await MV(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firestore.googleapis.com",lA=!0;class uA{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HI,this.ssl=lA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:lA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aL)throw new Ie(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ie(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ie(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ie(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cp{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new VP;switch(i.type){case"firstParty":return new BP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ie(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=aA.get(n);i&&(_e("ComponentProvider","Removing Datastore"),aA.delete(n),i.terminate())})(this),Promise.resolve()}}function kV(t,e,n,i={}){var s;t=vh(t,cp);const a=Co(e),u=t._getSettings(),c=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(Wy(`https://${d}`),Qy("Firestore",!0)),u.host!==HI&&u.host!==d&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},u),{host:d,ssl:a,emulatorOptions:i});if(!ca(h,c)&&(t._setSettings(h),i.mockUserToken)){let y,E;if(typeof i.mockUserToken=="string")y=i.mockUserToken,E=Qn.MOCK_USER;else{y=Fw(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ie(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Qn(T)}t._authCredentials=new OP(new DC(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fp(this.firestore,e,this._query)}}class zn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}toJSON(){return{type:zn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Hc(n,zn._jsonSchema))return new zn(e,i||null,new Ne(Vt.fromString(n.referencePath)))}}zn._jsonSchemaVersion="firestore/documentReference/1.0",zn._jsonSchema={type:pn("string",zn._jsonSchemaVersion),referencePath:pn("string")};class yo extends fp{constructor(e,n,i){super(e,n,QC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Ne(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function dp(t,e,...n){if(t=Dn(t),PC("collection","path",e),t instanceof cp){const i=Vt.fromString(e,...n);return AS(i),new yo(t,null,i)}{if(!(t instanceof zn||t instanceof yo))throw new Ie(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Vt.fromString(e,...n));return AS(i),new yo(t.firestore,null,i)}}function LV(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=hv.newId()),PC("doc","path",e),t instanceof cp){const i=Vt.fromString(e,...n);return SS(i),new zn(t,null,new Ne(i))}{if(!(t instanceof zn||t instanceof yo))throw new Ie(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Vt.fromString(e,...n));return SS(i),new zn(t.firestore,t instanceof yo?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="AsyncQueue";class fA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new wI(this,"async_queue_retry"),this.oc=()=>{const i=Ug();i&&_e(cA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Ug();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ug();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new go;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zl(e))throw e;_e(cA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,gs("INTERNAL UNHANDLED ERROR: ",dA(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Mv.createAndSchedule(this,e,n,i,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&ke(47125,{hc:dA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function dA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ov extends cp{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new fA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fA(e),this._firestoreClient=void 0,await e}}}function VV(t,e){const n=typeof t=="object"?t:ev(),i=typeof t=="string"?t:Eh,s=$h(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=Vw("firestore");a&&kV(s,...a)}return s}function GI(t){if(t._terminated)throw new Ie(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OV(t),t._firestoreClient}function OV(t){var e,n,i;const s=t._freezeSettings(),a=(function(c,d,h,y){return new nk(c,d,h,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,zI(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new xV(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(Hn.fromBase64String(e))}catch(n){throw new Ie(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ir(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:pn("string",ir._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:pn("string",Or._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,Ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ur(e.vectorValues);throw new Ie(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ur._jsonSchemaVersion="firestore/vectorValue/1.0",Ur._jsonSchema={type:pn("string",Ur._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=/^__.*__$/;class FV{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ta(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gc(e,this.data,n,this.fieldTransforms)}}function JI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ec:t})}}class Fv{constructor(e,n,i,s,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Fv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Nh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(JI(this.Ec)&&UV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class BV{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ap(e)}Dc(e,n,i,s=!1){return new Fv({Ec:e,methodName:n,bc:i,path:qn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qV(t){const e=t._freezeSettings(),n=ap(t._databaseId);return new BV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zV(t,e,n,i,s,a={}){const u=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);WI("Data must be an object, but it was:",u,i);const c=$I(i,u);let d,h;if(a.merge)d=new yr(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const y=[];for(const E of a.mergeFields){const T=HV(e,E,n);if(!u.contains(T))throw new Ie(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);KV(y,T)||y.push(T)}d=new yr(y),h=u.fieldTransforms.filter((E=>d.covers(E.field)))}else d=null,h=u.fieldTransforms;return new FV(new nr(c),d,h)}function YI(t,e){if(jI(t=Dn(t)))return WI("Unsupported field value:",e,t),$I(t,e);if(t instanceof KI)return(function(i,s){if(!JI(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,s){const a=[];let u=0;for(const c of i){let d=YI(c,s.yc(u));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,s){if((i=Dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ck(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Ot.fromDate(i);return{timestampValue:Ch(s.serializer,a)}}if(i instanceof Ot){const a=new Ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ch(s.serializer,a)}}if(i instanceof Or)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ir)return{bytesValue:pI(s.serializer,i._byteString)};if(i instanceof zn){const a=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Av(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Ur)return(function(u,c){return{mapValue:{fields:{[zC]:{stringValue:HC},[Th]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return Ev(c.serializer,h)}))}}}}}})(i,s);throw s.wc(`Unsupported field value: ${pv(i)}`)})(t,e)}function $I(t,e){const n={};return VC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_a(t,((i,s)=>{const a=YI(s,e.Vc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function jI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof Or||t instanceof ir||t instanceof zn||t instanceof KI||t instanceof Ur)}function WI(t,e,n){if(!jI(n)||!kC(n)){const i=pv(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function HV(t,e,n){if((e=Dn(e))instanceof Uv)return e._internalPath;if(typeof e=="string")return QI(t,e);throw Nh("Field path arguments must be of type string or ",t,!1,void 0,n)}const GV=new RegExp("[~\\*/\\[\\]]");function QI(t,e,n){if(e.search(GV)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uv(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nh(t,e,n,i,s){const a=i&&!i.isEmpty(),u=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||u)&&(d+=" (found",a&&(d+=` in field ${i}`),u&&(d+=` in document ${s}`),d+=")"),new Ie(ce.INVALID_ARGUMENT,c+t+d)}function KV(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ZI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JV extends XI{data(){return super.data()}}function ZI(t,e){return typeof e=="string"?QI(t,e):e instanceof Uv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $V{convertValue(e,n="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return _a(e,((s,a)=>{i[s]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,s;const a=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[Th].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map((u=>sn(u.doubleValue)));return new Ur(a)}convertGeoPoint(e){return new Or(sn(e.latitude),sn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ep(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const n=To(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Vt.fromString(e);vt(EI(i),9688,{name:e});const s=new Nc(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return s.isEqual(n)||gs(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class wd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Al extends XI{constructor(e,n,i,s,a,u){super(e,n,i,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ZI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Al._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Al._jsonSchemaVersion="firestore/documentSnapshot/1.0",Al._jsonSchema={type:pn("string",Al._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class eh extends Al{data(e={}){return super.data(e)}}class bl{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wd(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new eh(this._firestore,this._userDataWriter,i.key,i,new wd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((c=>{const d=new eh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new wd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new eh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new wd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,y=-1;return c.type!==0&&(h=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),y=u.indexOf(c.doc.key)),{type:WV(c.type),doc:d,oldIndex:h,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}bl._jsonSchemaVersion="firestore/querySnapshot/1.0",bl._jsonSchema={type:pn("string",bl._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};class QV extends $V{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,n)}}function eR(t){t=vh(t,fp);const e=vh(t.firestore,Ov),n=GI(e),i=new QV(e);return YV(t._query),PV(n,t._query).then((s=>new bl(e,i,t,s)))}function tR(t,e){const n=vh(t.firestore,Ov),i=LV(t),s=jV(t.converter,e);return XV(n,[zV(qV(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,hs.exists(!1))]).then((()=>i))}function XV(t,e){return(function(i,s){const a=new go;return i.asyncQueue.enqueueAndForget((async()=>_V(await DV(i),s,a))),a.promise})(GI(t),e)}(function(e,n=!0){(function(s){Bl=s})(va),fa(new vo("firestore",((i,{instanceIdentifier:s,options:a})=>{const u=i.getProvider("app").getImmediate(),c=new Ov(new UP(i.getProvider("auth-internal")),new qP(u,i.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ie(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nc(h.options.projectId,y)})(u,s),u);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Pr(yS,vS,e),Pr(yS,vS,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="firebasestorage.googleapis.com",iR="storageBucket",ZV=120*1e3,eO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt extends qr{constructor(e,n,i=0){super(Bg(e),`Firebase Storage: ${n} (${Bg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qt||(Qt={}));function Bg(t){return"storage/"+t}function Bv(){const t="An unknown error occurred, please check the error payload for server response.";return new Xt(Qt.UNKNOWN,t)}function tO(t){return new Xt(Qt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nO(t){return new Xt(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function iO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xt(Qt.UNAUTHENTICATED,t)}function rO(){return new Xt(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sO(t){return new Xt(Qt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function oO(){return new Xt(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aO(){return new Xt(Qt.CANCELED,"User canceled the upload/download.")}function lO(t){return new Xt(Qt.INVALID_URL,"Invalid URL '"+t+"'.")}function uO(t){return new Xt(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cO(){return new Xt(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iR+"' property when initializing the app?")}function fO(){return new Xt(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dO(){return new Xt(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hO(t){return new Xt(Qt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Sy(t){return new Xt(Qt.INVALID_ARGUMENT,t)}function rR(){return new Xt(Qt.APP_DELETED,"The Firebase app was deleted.")}function pO(t){return new Xt(Qt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hc(t,e){return new Xt(Qt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gu(t){throw new Xt(Qt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Vi.makeFromUrl(e,n)}catch{return new Vi(e,"")}if(i.path==="")return i;throw uO(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const u="(/(.*))?$",c=new RegExp("^gs://"+s+u,"i"),d={bucket:1,path:3};function h(Y){Y.path_=decodeURIComponent(Y.path)}const y="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${E}/${y}/b/${s}/o${T}`,"i"),D={bucket:1,path:3},k=n===nR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",H=new RegExp(`^https?://${k}/${s}/${U}`,"i"),B=[{regex:c,indices:d,postModify:a},{regex:C,indices:D,postModify:h},{regex:H,indices:{bucket:1,path:2},postModify:h}];for(let Y=0;Y<B.length;Y++){const X=B[Y],G=X.regex.exec(e);if(G){const I=G[X.indices.bucket];let R=G[X.indices.path];R||(R=""),i=new Vi(I,R),X.postModify(i);break}}if(i==null)throw lO(e);return i}}class mO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t,e,n){let i=1,s=null,a=null,u=!1,c=0;function d(){return c===2}let h=!1;function y(...U){h||(h=!0,e.apply(null,U))}function E(U){s=setTimeout(()=>{s=null,t(C,d())},U)}function T(){a&&clearTimeout(a)}function C(U,...H){if(h){T();return}if(U){T(),y.call(null,U,...H);return}if(d()||u){T(),y.call(null,U,...H);return}i<64&&(i*=2);let B;c===1?(c=2,B=0):B=(i+Math.random())*1e3,E(B)}let D=!1;function k(U){D||(D=!0,T(),!h&&(s!==null?(U||(c=2),clearTimeout(s),E(0)):U||(c=1)))}return E(0),a=setTimeout(()=>{u=!0,k(!0)},n),k}function yO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){return t!==void 0}function _O(t){return typeof t=="object"&&!Array.isArray(t)}function qv(t){return typeof t=="string"||t instanceof String}function hA(t){return zv()&&t instanceof Blob}function zv(){return typeof Blob<"u"}function pA(t,e,n,i){if(i<e)throw Sy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Sy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function sR(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var oa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oa||(oa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,i,s,a,u,c,d,h,y,E,T=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=y,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,k)=>{this.resolve_=D,this.reject_=k,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Cd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const c=a.getErrorCode()===oa.NO_ERROR,d=a.getStatus();if(!c||EO(d,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===oa.ABORT;i(!1,new Cd(!1,null,y));return}const h=this.successCodes_.indexOf(d)!==-1;i(!0,new Cd(h,a))})},n=(i,s)=>{const a=this.resolve_,u=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());vO(d)?a(d):a()}catch(d){u(d)}else if(c!==null){const d=Bv();d.serverResponse=c.getErrorText(),this.errorCallback_?u(this.errorCallback_(c,d)):u(d)}else if(s.canceled){const d=this.appDelete_?rR():aO();u(d)}else{const d=oO();u(d)}};this.canceled_?n(!1,new Cd(!1,null,!0)):this.backoffId_=gO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function SO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function wO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function CO(t,e,n,i,s,a,u=!0,c=!1){const d=sR(t.urlParams),h=t.url+d,y=Object.assign({},t.headers);return bO(y,e),SO(y,n),AO(y,a),wO(y,i),new TO(h,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,u,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RO(...t){const e=IO();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(zv())return new Blob(t);throw new Xt(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t){if(typeof atob>"u")throw hO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qg{constructor(e,n){this.data=e,this.contentType=n||null}}function oR(t,e){switch(t){case vr.RAW:return new qg(aR(e));case vr.BASE64:case vr.BASE64URL:return new qg(lR(t,e));case vr.DATA_URL:return new qg(MO(e),PO(e))}throw Bv()}function aR(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=t.charCodeAt(++n);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function DO(t){let e;try{e=decodeURIComponent(t)}catch{throw hc(vr.DATA_URL,"Malformed data URL.")}return aR(e)}function lR(t,e){switch(t){case vr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw hc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case vr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw hc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=NO(e)}catch(s){throw s.message.includes("polyfill")?s:hc(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class uR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw hc(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=kO(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function MO(t){const e=new uR(t);return e.base64?lR(vr.BASE64,e.rest):DO(e.rest)}function PO(t){return new uR(t).contentType}function kO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){let i=0,s="";hA(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(hA(this.data_)){const i=this.data_,s=xO(i,e,n);return s===null?null:new oo(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new oo(i,!0)}}static getBlob(...e){if(zv()){const n=e.map(i=>i instanceof oo?i.data_:i);return new oo(RO.apply(null,n))}else{const n=e.map(u=>qv(u)?oR(vr.RAW,u).data:u.data_);let i=0;n.forEach(u=>{i+=u.byteLength});const s=new Uint8Array(i);let a=0;return n.forEach(u=>{for(let c=0;c<u.length;c++)s[a++]=u[c]}),new oo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){let e;try{e=JSON.parse(t)}catch{return null}return _O(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function VO(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function fR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e){return e}class ci{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||OO}}let Id=null;function UO(t){return!qv(t)||t.length<2?t:fR(t)}function dR(){if(Id)return Id;const t=[];t.push(new ci("bucket")),t.push(new ci("generation")),t.push(new ci("metageneration")),t.push(new ci("name","fullPath",!0));function e(a,u){return UO(u)}const n=new ci("name");n.xform=e,t.push(n);function i(a,u){return u!==void 0?Number(u):u}const s=new ci("size");return s.xform=i,t.push(s),t.push(new ci("timeCreated")),t.push(new ci("updated")),t.push(new ci("md5Hash",null,!0)),t.push(new ci("cacheControl",null,!0)),t.push(new ci("contentDisposition",null,!0)),t.push(new ci("contentEncoding",null,!0)),t.push(new ci("contentLanguage",null,!0)),t.push(new ci("contentType",null,!0)),t.push(new ci("metadata","customMetadata",!0)),Id=t,Id}function FO(t,e){function n(){const i=t.bucket,s=t.fullPath,a=new Vi(i,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function BO(t,e,n){const i={};i.type="file";const s=n.length;for(let a=0;a<s;a++){const u=n[a];i[u.local]=u.xform(i,e[u.server])}return FO(i,t),i}function hR(t,e,n){const i=cR(e);return i===null?null:BO(t,i,n)}function qO(t,e,n,i){const s=cR(e);if(s===null||!qv(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(h=>{const y=t.bucket,E=t.fullPath,T="/b/"+u(y)+"/o/"+u(E),C=Hv(T,n,i),D=sR({alt:"media",token:h});return C+D})[0]}function zO(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class pR{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){if(!t)throw Bv()}function HO(t,e){function n(i,s){const a=hR(t,s,e);return mR(a!==null),a}return n}function GO(t,e){function n(i,s){const a=hR(t,s,e);return mR(a!==null),qO(a,s,t.host,t._protocol)}return n}function gR(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=rO():s=iO():n.getStatus()===402?s=nO(t.bucket):n.getStatus()===403?s=sO(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function KO(t){const e=gR(t);function n(i,s){let a=e(i,s);return i.getStatus()===404&&(a=tO(t.path)),a.serverResponse=s.serverResponse,a}return n}function JO(t,e,n){const i=e.fullServerUrl(),s=Hv(i,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,c=new pR(s,a,GO(t,n),u);return c.errorHandler=KO(e),c}function YO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function $O(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=YO(null,e)),i}function jO(t,e,n,i,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function c(){let B="";for(let Y=0;Y<2;Y++)B=B+Math.random().toString().slice(2);return B}const d=c();u["Content-Type"]="multipart/related; boundary="+d;const h=$O(e,i,s),y=zO(h,n),E="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,T=`\r
--`+d+"--",C=oo.getBlob(E,i,T);if(C===null)throw fO();const D={name:h.fullPath},k=Hv(a,t.host,t._protocol),U="POST",H=t.maxUploadRetryTime,F=new pR(k,U,HO(t,n),H);return F.urlParams=D,F.headers=u,F.body=C.uploadData(),F.errorHandler=gR(e),F}class WO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s,a){if(this.sent_)throw Gu("cannot .send() more than once");if(Co(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class QO extends WO{initXhr(){this.xhr_.responseType="text"}}function yR(){return new QO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){this._service=e,n instanceof Vi?this._location=n:this._location=Vi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ga(e,n)}get root(){const e=new Vi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fR(this._location.path)}get storage(){return this._service}get parent(){const e=LO(this._location.path);if(e===null)return null;const n=new Vi(this._location.bucket,e);return new ga(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pO(e)}}function XO(t,e,n){t._throwIfRoot("uploadBytes");const i=jO(t.storage,t._location,dR(),new oo(e,!0),n);return t.storage.makeRequestWithTokens(i,yR).then(s=>({metadata:s,ref:t}))}function ZO(t,e,n=vr.RAW,i){t._throwIfRoot("uploadString");const s=oR(n,e),a=Object.assign({},i);return a.contentType==null&&s.contentType!=null&&(a.contentType=s.contentType),XO(t,s.data,a)}function e4(t){t._throwIfRoot("getDownloadURL");const e=JO(t.storage,t._location,dR());return t.storage.makeRequestWithTokens(e,yR).then(n=>{if(n===null)throw dO();return n})}function t4(t,e){const n=VO(t._location.path,e),i=new Vi(t._location.bucket,n);return new ga(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t){return/^[A-Za-z]+:\/\//.test(t)}function i4(t,e){return new ga(t,e)}function vR(t,e){if(t instanceof Gv){const n=t;if(n._bucket==null)throw cO();const i=new ga(n,n._bucket);return e!=null?vR(i,e):i}else return e!==void 0?t4(t,e):t}function r4(t,e){if(e&&n4(e)){if(t instanceof Gv)return i4(t,e);throw Sy("To use ref(service, url), the first argument must be a Storage instance.")}else return vR(t,e)}function mA(t,e){const n=e==null?void 0:e[iR];return n==null?null:Vi.makeFromBucketSpec(n,t)}function s4(t,e,n,i={}){t.host=`${e}:${n}`;const s=Co(e);s&&(Wy(`https://${t.host}/b`),Qy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:Fw(a,t.app.options.projectId))}class Gv{constructor(e,n,i,s,a,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=nR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZV,this._maxUploadRetryTime=eO,this._requests=new Set,s!=null?this._bucket=Vi.makeFromBucketSpec(s,this._host):this._bucket=mA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vi.makeFromBucketSpec(this._url,e):this._bucket=mA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ga(this,e)}_makeRequest(e,n,i,s,a=!0){if(this._deleted)return new mO(rR());{const u=CO(e,this._appId,i,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const gA="@firebase/storage",yA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="storage";function o4(t,e,n,i){return t=Dn(t),ZO(t,e,n,i)}function a4(t){return t=Dn(t),e4(t)}function l4(t,e){return t=Dn(t),r4(t,e)}function u4(t=ev(),e){t=Dn(t);const i=$h(t,_R).getImmediate({identifier:e}),s=Vw("storage");return s&&c4(i,...s),i}function c4(t,e,n,i={}){s4(t,e,n,i)}function f4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Gv(n,i,s,e,va)}function d4(){fa(new vo(_R,f4,"PUBLIC").setMultipleInstances(!0)),Pr(gA,yA,""),Pr(gA,yA,"esm2017")}d4();const h4={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Kv=zw(h4),nc=MP(Kv),p4=new us,hp=VV(Kv),m4=u4(Kv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let g4,y4;function v4(){return{geminiUrl:g4,vertexUrl:y4}}function _4(t,e,n,i){var s,a;if(!(t!=null&&t.baseUrl)){const u=v4();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _s{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const c=u.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const y=d[h];g(y,e.slice(a+1),n[h])}else for(const h of d)g(h,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const c=u.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];g(d[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function E4(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),a=i.split("."),u=new Set;let c=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){c=d;break}if(c!==-1&&a.length>c)for(let d=c;d<a.length;d++){const h=a[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Ay(t,s,a,0,u)}}function Ay(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),c=t;if(u in c&&Array.isArray(c[u]))for(const d of c[u])Ay(d,e,n,i+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,c=Object.keys(u).filter(h=>!h.startsWith("_")&&!s.has(h)),d={};for(const h of c)d[h]=u[h];for(const[h,y]of Object.entries(d)){const E=[];for(const T of n.slice(i))T==="*"?E.push(h):E.push(T);g(u,E,y)}for(const h of c)delete u[h]}}else{const u=t;a in u&&Ay(u[a],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T4(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function S4(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],b4(u)),e}function A4(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],w4(u)),e}function b4(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>C4(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function w4(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>I4(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function C4(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],P4(n)),e}function I4(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],k4(n)),e}function R4(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function x4(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function N4(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],D4(u)),e}function D4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function ER(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],M4(u)),e}function M4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function P4(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Jv(i));const s=p(t,["encoding"]);return s!=null&&g(e,["mimeType"],s),e}function k4(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Jv(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vA;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(vA||(vA={}));var _A;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(_A||(_A={}));var EA;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(EA||(EA={}));var Ue;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ue||(Ue={}));var TA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(TA||(TA={}));var SA;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(SA||(SA={}));var AA;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(AA||(AA={}));var bA;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(bA||(bA={}));var wA;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(wA||(wA={}));var CA;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(CA||(CA={}));var IA;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(IA||(IA={}));var RA;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(RA||(RA={}));var xA;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(xA||(xA={}));var NA;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(NA||(NA={}));var DA;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(DA||(DA={}));var MA;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(MA||(MA={}));var PA;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(PA||(PA={}));var kA;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(kA||(kA={}));var Dh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Dh||(Dh={}));var LA;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(LA||(LA={}));var VA;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(VA||(VA={}));var OA;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OA||(OA={}));var by;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(by||(by={}));var UA;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(UA||(UA={}));var FA;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FA||(FA={}));var BA;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(BA||(BA={}));var qA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qA||(qA={}));var zA;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(zA||(zA={}));var HA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(HA||(HA={}));var GA;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(GA||(GA={}));var KA;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(KA||(KA={}));var JA;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(JA||(JA={}));var YA;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(YA||(YA={}));var $A;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($A||($A={}));var jA;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(jA||(jA={}));var WA;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(WA||(WA={}));var QA;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(QA||(QA={}));var XA;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(XA||(XA={}));var ZA;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ZA||(ZA={}));var eb;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(eb||(eb={}));var tb;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(tb||(tb={}));var nb;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(nb||(nb={}));var ib;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(ib||(ib={}));var rb;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(rb||(rb={}));var sb;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(sb||(sb={}));var ob;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ob||(ob={}));var ab;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ab||(ab={}));var lb;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(lb||(lb={}));var ub;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ub||(ub={}));var cb;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(cb||(cb={}));var fb;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fb||(fb={}));var db;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(db||(db={}));var yl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(yl||(yl={}));class wy{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ku{get text(){var e,n,i,s,a,u,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const E=[];for(const T of(d=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[C,D]of Object.entries(T))C!=="text"&&C!=="thought"&&(D!==null||D!==void 0)&&E.push(C);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,n,i,s,a,u,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const E of(d=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,C]of Object.entries(E))T!=="inlineData"&&(C!==null||C!==void 0)&&y.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,a,u,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,a,u,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(d=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,a,u,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(d=(c=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class hb{}class pb{}class L4{}class V4{}class O4{}class U4{}class mb{}class gb{}class yb{}class F4{}class Mh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Mh;let s;const a=e;return n?s=A4(a):s=S4(a),Object.assign(i,s),i}}class vb{}class _b{}class Eb{}class B4{}class q4{}class z4{}class Yv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Yv,a=N4(e);return Object.assign(i,a),i}}class H4{}class G4{}class K4{}class Tb{}class J4{get text(){var e,n,i;let s="",a=!1;const u=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&u.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,i;let s="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(u))c!=="inlineData"&&d!==null&&a.push(c);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Y4{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class $v{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new $v,a=ER(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function TR(t,e){const n=dt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function SR(t){return Array.isArray(t)?t.map(e=>Ph(e)):[Ph(t)]}function Ph(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function AR(t){const e=Ph(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bR(t){const e=Ph(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Sb(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function wR(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Sb(e)):[Sb(t)]}function Cy(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ab(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function bb(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Zn(t){if(t==null)throw new Error("ContentUnion is required");return Cy(t)?t:{role:"user",parts:wR(t)}}function jv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Zn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Zn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Zn(n)):[Zn(e)]}function rr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Ab(t)||bb(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Zn(t)]}const e=[],n=[],i=Cy(t[0]);for(const s of t){const a=Cy(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(Ab(s)||bb(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:wR(n)}),e}function $4(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ue).includes(n[0].toUpperCase())?n[0].toUpperCase():Ue.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ue).includes(i.toUpperCase())?i.toUpperCase():Ue.TYPE_UNSPECIFIED})}}function wl(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&$4(t.type,e);for(const[u,c]of Object.entries(t))if(c!=null)if(u=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Ue).includes(c.toUpperCase())?c.toUpperCase():Ue.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=wl(c);else if(i.includes(u)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(wl(h))}e[u]=d}else if(s.includes(u)){const d={};for(const[h,y]of Object.entries(c))d[h]=wl(y);e[u]=d}else{if(u==="additionalProperties")continue;e[u]=c}return e}function Wv(t){return wl(t)}function Qv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Xv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Gl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=wl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=wl(e.response));return t}function Kl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function j4(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Es(t,e){if(typeof e!="string")throw new Error("name must be a string");return j4(t,e,"cachedContents")}function CR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function No(t){return Jv(t)}function W4(t){return t!=null&&typeof t=="object"&&"name"in t}function Q4(t){return t!=null&&typeof t=="object"&&"video"in t}function X4(t){return t!=null&&typeof t=="object"&&"uri"in t}function IR(t){var e;let n;if(W4(t)&&(n=t.name),!(X4(t)&&(n=t.uri,n===void 0))&&!(Q4(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function RR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function xR(t){for(const e of["models","tunedModels","publisherModels"])if(Z4(t,e))return t[e];return[]}function Z4(t,e){return t!==null&&typeof t=="object"&&e in t}function eU(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function tU(t,e={}){const n=[],i=new Set;for(const s of t){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=eU(s,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function NR(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function nU(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function DR(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const d=u.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Jl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function MR(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iU(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>kU(u))),g(e,["inlinedResponses"],a)}const s=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function rU(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const s=p(t,["bigqueryDestination","outputUri"]);return s!=null&&g(e,["bigqueryUri"],s),e}function sU(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&g(e,["bigqueryDestination","outputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function th(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["metadata","state"]);s!=null&&g(e,["state"],MR(s));const a=p(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=p(t,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const c=p(t,["metadata","updateTime"]);c!=null&&g(e,["updateTime"],c);const d=p(t,["metadata","model"]);d!=null&&g(e,["model"],d);const h=p(t,["metadata","output"]);return h!=null&&g(e,["dest"],iU(DR(h))),e}function Iy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["state"]);s!=null&&g(e,["state"],MR(s));const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["createTime"]);u!=null&&g(e,["createTime"],u);const c=p(t,["startTime"]);c!=null&&g(e,["startTime"],c);const d=p(t,["endTime"]);d!=null&&g(e,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(e,["updateTime"],h);const y=p(t,["model"]);y!=null&&g(e,["model"],y);const E=p(t,["inputConfig"]);E!=null&&g(e,["src"],oU(E));const T=p(t,["outputConfig"]);T!=null&&g(e,["dest"],rU(DR(T)));const C=p(t,["completionStats"]);return C!=null&&g(e,["completionStats"],C),e}function oU(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const s=p(t,["bigquerySource","inputUri"]);return s!=null&&g(e,["bigqueryUri"],s),e}function aU(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(n,["fileName"],i);const s=p(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>PU(t,u))),g(n,["requests","requests"],a)}return n}function lU(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&g(e,["bigquerySource","inputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function uU(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function cU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Jl(t,i)),n}function fU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Jl(t,i)),n}function dU(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],hU(i));const s=p(t,["tokenCount"]);s!=null&&g(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),g(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function hU(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["citations"],i)}return e}function PR(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>qU(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function pU(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function mU(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["dest"]);return e!==void 0&&s!=null&&g(e,["outputConfig"],sU(nU(s))),n}function wb(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["src"]);s!=null&&g(n,["batch","inputConfig"],aU(t,NR(t,s)));const a=p(e,["config"]);return a!=null&&pU(a,n),n}function gU(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],dt(t,i));const s=p(e,["src"]);s!=null&&g(n,["inputConfig"],lU(NR(t,s)));const a=p(e,["config"]);return a!=null&&mU(a,n),n}function yU(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function vU(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["src"]);s!=null&&g(n,["batch","inputConfig"],wU(t,s));const a=p(e,["config"]);return a!=null&&yU(a,n),n}function _U(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Jl(t,i)),n}function EU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Jl(t,i)),n}function TU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function SU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function AU(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=jv(t,i);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["requests[]","request","content"],a)}const s=p(e,["config"]);return s!=null&&(g(n,["_self"],bU(s,n)),E4(n,{"requests[].*":"requests[].request.*"})),n}function bU(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function wU(t,e){const n={},i=p(e,["fileName"]);i!=null&&g(n,["file_name"],i);const s=p(e,["inlinedRequests"]);return s!=null&&g(n,["requests"],AU(t,s)),n}function CU(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function IU(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],PR(Zn(s)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const C=p(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const D=p(e,["frequencyPenalty"]);D!=null&&g(i,["frequencyPenalty"],D);const k=p(e,["seed"]);k!=null&&g(i,["seed"],k);const U=p(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],Wv(H));const F=p(e,["responseJsonSchema"]);if(F!=null&&g(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(n!==void 0&&B!=null){let V=B;Array.isArray(V)&&(V=V.map(O=>zU(O))),g(n,["safetySettings"],V)}const Y=p(e,["tools"]);if(n!==void 0&&Y!=null){let V=Kl(Y);Array.isArray(V)&&(V=V.map(O=>HU(Gl(O)))),g(n,["tools"],V)}const X=p(e,["toolConfig"]);if(n!==void 0&&X!=null&&g(n,["toolConfig"],X),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&g(n,["cachedContent"],Es(t,G));const I=p(e,["responseModalities"]);I!=null&&g(i,["responseModalities"],I);const R=p(e,["mediaResolution"]);R!=null&&g(i,["mediaResolution"],R);const x=p(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Qv(x)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=p(e,["thinkingConfig"]);L!=null&&g(i,["thinkingConfig"],L);const M=p(e,["imageConfig"]);return M!=null&&g(i,["imageConfig"],M),i}function RU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>dU(h))),g(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function xU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Jl(t,i)),n}function NU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Jl(t,i)),n}function DU(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function MU(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function PU(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["request","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let c=rr(s);Array.isArray(c)&&(c=c.map(d=>PR(d))),g(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&g(n,["metadata"],a);const u=p(e,["config"]);return u!=null&&g(n,["request","generationConfig"],IU(t,u,p(n,["request"],{}))),n}function kU(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],RU(n));const i=p(t,["error"]);return i!=null&&g(e,["error"],i),e}function LU(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);if(e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function VU(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);e!==void 0&&s!=null&&g(e,["_query","pageToken"],s);const a=p(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function OU(t){const e={},n=p(t,["config"]);return n!=null&&LU(n,e),e}function UU(t){const e={},n=p(t,["config"]);return n!=null&&VU(n,e),e}function FU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>th(u))),g(e,["batchJobs"],a)}return e}function BU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Iy(u))),g(e,["batchJobs"],a)}return e}function qU(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],CU(a));const u=p(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],uU(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function zU(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function HU(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],DU(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],MU(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(vs||(vs={}));class Aa{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GU extends _s{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Aa(vs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=wb(this.apiClient,e),i=n._url,s=ye("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const y of d){const E=Object.assign({},y);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const C=E.request;C.systemInstruction=T,E.request=C}h.push(E)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(u)i.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=gU(this.apiClient,e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>Iy(y))}else{const h=wb(this.apiClient,e);return c=ye("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>th(y))}}async createEmbeddingsInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=vU(this.apiClient,e);return a=ye("{model}:asyncBatchEmbedContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>th(d))}}async get(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=NU(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>Iy(y))}else{const h=xU(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>th(y))}}async cancel(e){var n,i,s,a;let u="",c={};if(this.apiClient.isVertexAI()){const d=fU(this.apiClient,e);u=ye("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=cU(this.apiClient,e);u=ye("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=UU(e);return c=ye("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=BU(y),T=new Tb;return Object.assign(T,E),T})}else{const h=OU(e);return c=ye("batches",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=FU(y),T=new Tb;return Object.assign(T,E),T})}}async delete(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=EU(this.apiClient,e);return c=ye("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>SU(y))}else{const h=_U(this.apiClient,e);return c=ye("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>TU(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KU(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Cb(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>d3(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function JU(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&g(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let y=rr(u);Array.isArray(y)&&(y=y.map(E=>Cb(E))),g(e,["contents"],y)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],Cb(Zn(c)));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(E=>h3(E))),g(e,["tools"],y)}const h=p(t,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],h),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function YU(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&g(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=p(t,["contents"]);if(e!==void 0&&u!=null){let E=rr(u);Array.isArray(E)&&(E=E.map(T=>T)),g(e,["contents"],E)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],Zn(c));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let E=d;Array.isArray(E)&&(E=E.map(T=>p3(T))),g(e,["tools"],E)}const h=p(t,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const y=p(t,["kmsKeyName"]);return e!==void 0&&y!=null&&g(e,["encryption_spec","kmsKeyName"],y),n}function $U(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],TR(t,i));const s=p(e,["config"]);return s!=null&&JU(s,n),n}function jU(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],TR(t,i));const s=p(e,["config"]);return s!=null&&YU(s,n),n}function WU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Es(t,i)),n}function QU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Es(t,i)),n}function XU(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function ZU(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function e3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function t3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function n3(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Es(t,i)),n}function i3(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Es(t,i)),n}function r3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function s3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function o3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function a3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function l3(t){const e={},n=p(t,["config"]);return n!=null&&o3(n,e),e}function u3(t){const e={},n=p(t,["config"]);return n!=null&&a3(n,e),e}function c3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function f3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function d3(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],e3(a));const u=p(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],KU(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function h3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],r3(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],s3(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function p3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>t3(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function m3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&g(e,["expireTime"],s),n}function g3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&g(e,["expireTime"],s),n}function y3(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],Es(t,i));const s=p(e,["config"]);return s!=null&&m3(s,n),n}function v3(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],Es(t,i));const s=p(e,["config"]);return s!=null&&g3(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _3 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Aa(vs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=jU(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=$U(this.apiClient,e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=i3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=n3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=QU(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=ZU(y),T=new _b;return Object.assign(T,E),T})}else{const h=WU(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=XU(y),T=new _b;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=v3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const h=y3(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=u3(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=f3(y),T=new Eb;return Object.assign(T,E),T})}else{const h=l3(e);return c=ye("cachedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=c3(y),T=new Eb;return Object.assign(T,E),T})}}}function Ib(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lt(t){return this instanceof Lt?(this.v=t,this):new Lt(t)}function Cl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(C){return function(D){return Promise.resolve(D).then(C,E)}}function c(C,D){i[C]&&(s[C]=function(k){return new Promise(function(U,H){a.push([C,k,U,H])>1||d(C,k)})},D&&(s[C]=D(s[C])))}function d(C,D){try{h(i[C](D))}catch(k){T(a[0][3],k)}}function h(C){C.value instanceof Lt?Promise.resolve(C.value.v).then(y,E):T(a[0][2],C)}function y(C){d("next",C)}function E(C){d("throw",C)}function T(C,D){C(D),a.shift(),a.length&&d(a[0][0],a[0][1])}}function pc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ib=="function"?Ib(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(c,d){u=t[a](u),s(c,d,u.done,u.value)})}}function s(a,u,c,d){Promise.resolve(d).then(function(h){a({value:h,done:c})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:kR(n)}function kR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function T3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Rb(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let a=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),a&&!kR(t[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class S3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new A3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class A3{constructor(e,n,i,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),T3(a)}async sendMessage(e){var n;await this.sendPromise;const i=Zn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,c;const d=await s,h=(u=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,y=d.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];y!=null&&(T=(c=y.slice(E))!==null&&c!==void 0?c:[]);const C=h?[h]:[];this.recordHistory(i,C,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=Zn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?Rb(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return Cl(this,arguments,function*(){var u,c,d,h;const y=[];try{for(var E=!0,T=pc(e),C;C=yield Lt(T.next()),u=C.done,!u;E=!0){h=C.value,E=!1;const D=h;if(E3(D)){const k=(s=(i=D.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;k!==void 0&&y.push(k)}yield yield Lt(D)}}catch(D){c={error:D}}finally{try{!E&&!u&&(d=T.return)&&(yield Lt(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,y)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Rb(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b3(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function w3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function C3(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],IR(n)),e}function I3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function R3(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],IR(n)),e}function x3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function N3(t){const e={},n=p(t,["config"]);return n!=null&&x3(n,e),e}function D3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M3 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Aa(vs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=N3(e);return a=ye("files",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=D3(d),y=new H4;return Object.assign(y,h),y})}}async createInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=b3(e);return a=ye("upload/v1beta/files",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=w3(d),y=new G4;return Object.assign(y,h),y})}}async get(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=R3(e);return a=ye("files/{file}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=C3(e);return a=ye("files/{file}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=I3(d),y=new K4;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nh(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function P3(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>$3(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function k3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function L3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function V3(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const C=p(t,["responseMimeType"]);C!=null&&g(e,["responseMimeType"],C);const D=p(t,["responseModalities"]);D!=null&&g(e,["responseModalities"],D);const k=p(t,["responseSchema"]);k!=null&&g(e,["responseSchema"],k);const U=p(t,["routingConfig"]);U!=null&&g(e,["routingConfig"],U);const H=p(t,["seed"]);H!=null&&g(e,["seed"],H);const F=p(t,["speechConfig"]);F!=null&&g(e,["speechConfig"],LR(F));const B=p(t,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const Y=p(t,["temperature"]);Y!=null&&g(e,["temperature"],Y);const X=p(t,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const G=p(t,["topK"]);G!=null&&g(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&g(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function O3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function U3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function F3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Xv(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const C=p(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=p(t,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],P3(Zn(D)));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let G=Kl(k);Array.isArray(G)&&(G=G.map(I=>W3(Gl(I)))),g(e,["setup","tools"],G)}const U=p(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],j3(U));const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const Y=p(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function B3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],V3(i));const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],LR(Xv(E)));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const C=p(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=p(t,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],Zn(D));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let G=Kl(k);Array.isArray(G)&&(G=G.map(I=>Q3(Gl(I)))),g(e,["setup","tools"],G)}const U=p(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],U);const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const Y=p(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function q3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],dt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],F3(s,n)),n}function z3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],dt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],B3(s,n)),n}function H3(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function G3(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["weightedPrompts"],i)}return e}function K3(t){const e={},n=p(t,["media"]);if(n!=null){let h=SR(n);Array.isArray(h)&&(h=h.map(y=>nh(y))),g(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],nh(bR(i)));const s=p(t,["audioStreamEnd"]);s!=null&&g(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&g(e,["video"],nh(AR(a)));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function J3(t){const e={},n=p(t,["media"]);if(n!=null){let h=SR(n);Array.isArray(h)&&(h=h.map(y=>y)),g(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],bR(i));const s=p(t,["audioStreamEnd"]);s!=null&&g(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&g(e,["video"],AR(a));const u=p(t,["text"]);u!=null&&g(e,["text"],u);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function Y3(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const s=p(t,["toolCall"]);s!=null&&g(e,["toolCall"],s);const a=p(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=p(t,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],X3(u));const c=p(t,["goAway"]);c!=null&&g(e,["goAway"],c);const d=p(t,["sessionResumptionUpdate"]);return d!=null&&g(e,["sessionResumptionUpdate"],d),e}function $3(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],k3(a));const u=p(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],nh(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function j3(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function LR(t){const e={},n=p(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function W3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],O3(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],U3(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function Q3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>L3(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function X3(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const s=p(t,["candidatesTokenCount"]);s!=null&&g(e,["responseTokenCount"],s);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=p(t,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const c=p(t,["totalTokenCount"]);c!=null&&g(e,["totalTokenCount"],c);const d=p(t,["promptTokensDetails"]);if(d!=null){let C=d;Array.isArray(C)&&(C=C.map(D=>D)),g(e,["promptTokensDetails"],C)}const h=p(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(D=>D)),g(e,["cacheTokensDetails"],C)}const y=p(t,["candidatesTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(D=>D)),g(e,["responseTokensDetails"],C)}const E=p(t,["toolUsePromptTokensDetails"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(D=>D)),g(e,["toolUsePromptTokensDetails"],C)}const T=p(t,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z3(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function e6(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],t6(i));const s=p(t,["tokenCount"]);s!=null&&g(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=p(t,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(C=>C)),g(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function t6(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["citations"],i)}return e}function n6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let a=rr(s);Array.isArray(a)&&(a=a.map(u=>u)),g(n,["contents"],a)}return n}function i6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["tokensInfo"],s)}return e}function r6(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&g(e,["statistics"],s6(i)),e}function s6(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function mp(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>c5(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function o6(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function a6(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function l6(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],Zn(i));const s=p(t,["tools"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>BR(c))),g(e,["tools"],u)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],Q6(a)),n}function u6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let u=rr(s);Array.isArray(u)&&(u=u.map(c=>mp(c))),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&a6(a),n}function c6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let u=rr(s);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&l6(a,n),n}function f6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const s=p(t,["cachedContentTokenCount"]);return s!=null&&g(e,["cachedContentTokenCount"],s),e}function d6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function h6(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],dt(t,i)),n}function p6(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],dt(t,i)),n}function m6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function g6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function y6(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const C=p(t,["language"]);e!==void 0&&C!=null&&g(e,["parameters","language"],C);const D=p(t,["outputMimeType"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","mimeType"],D);const k=p(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","compressionQuality"],k);const U=p(t,["addWatermark"]);e!==void 0&&U!=null&&g(e,["parameters","addWatermark"],U);const H=p(t,["labels"]);e!==void 0&&H!=null&&g(e,["labels"],H);const F=p(t,["editMode"]);e!==void 0&&F!=null&&g(e,["parameters","editMode"],F);const B=p(t,["baseSteps"]);return e!==void 0&&B!=null&&g(e,["parameters","editConfig","baseSteps"],B),n}function v6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>g5(d))),g(n,["instances[0]","referenceImages"],c)}const u=p(e,["config"]);return u!=null&&y6(u,n),n}function _6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>gp(a))),g(e,["generatedImages"],s)}return e}function E6(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function T6(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["instances[]","title"],s);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=p(t,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&g(e,["parameters","autoTruncate"],c),n}function S6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let c=jv(t,s);Array.isArray(c)&&(c=c.map(d=>d)),g(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&E6(a,n);const u=p(e,["model"]);return u!==void 0&&g(n,["requests[]","model"],dt(t,u)),n}function A6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let u=jv(t,s);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["instances[]","content"],u)}const a=p(e,["config"]);return a!=null&&T6(a,n),n}function b6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&g(e,["metadata"],s),e}function w6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>r6(u))),g(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&g(e,["metadata"],s),e}function C6(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function I6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function R6(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=p(t,["response"]);u!=null&&g(e,["response"],u);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function x6(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],mp(Zn(s)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const C=p(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const D=p(e,["frequencyPenalty"]);D!=null&&g(i,["frequencyPenalty"],D);const k=p(e,["seed"]);k!=null&&g(i,["seed"],k);const U=p(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],Wv(H));const F=p(e,["responseJsonSchema"]);if(F!=null&&g(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(n!==void 0&&B!=null){let V=B;Array.isArray(V)&&(V=V.map(O=>y5(O))),g(n,["safetySettings"],V)}const Y=p(e,["tools"]);if(n!==void 0&&Y!=null){let V=Kl(Y);Array.isArray(V)&&(V=V.map(O=>A5(Gl(O)))),g(n,["tools"],V)}const X=p(e,["toolConfig"]);if(n!==void 0&&X!=null&&g(n,["toolConfig"],X),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&g(n,["cachedContent"],Es(t,G));const I=p(e,["responseModalities"]);I!=null&&g(i,["responseModalities"],I);const R=p(e,["mediaResolution"]);R!=null&&g(i,["mediaResolution"],R);const x=p(e,["speechConfig"]);if(x!=null&&g(i,["speechConfig"],Qv(x)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=p(e,["thinkingConfig"]);L!=null&&g(i,["thinkingConfig"],L);const M=p(e,["imageConfig"]);return M!=null&&g(i,["imageConfig"],M),i}function N6(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],Zn(s));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=p(e,["topP"]);u!=null&&g(i,["topP"],u);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const C=p(e,["presencePenalty"]);C!=null&&g(i,["presencePenalty"],C);const D=p(e,["frequencyPenalty"]);D!=null&&g(i,["frequencyPenalty"],D);const k=p(e,["seed"]);k!=null&&g(i,["seed"],k);const U=p(e,["responseMimeType"]);U!=null&&g(i,["responseMimeType"],U);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],Wv(H));const F=p(e,["responseJsonSchema"]);F!=null&&g(i,["responseJsonSchema"],F);const B=p(e,["routingConfig"]);B!=null&&g(i,["routingConfig"],B);const Y=p(e,["modelSelectionConfig"]);Y!=null&&g(i,["modelConfig"],Y);const X=p(e,["safetySettings"]);if(n!==void 0&&X!=null){let te=X;Array.isArray(te)&&(te=te.map(ue=>ue)),g(n,["safetySettings"],te)}const G=p(e,["tools"]);if(n!==void 0&&G!=null){let te=Kl(G);Array.isArray(te)&&(te=te.map(ue=>BR(Gl(ue)))),g(n,["tools"],te)}const I=p(e,["toolConfig"]);n!==void 0&&I!=null&&g(n,["toolConfig"],I);const R=p(e,["labels"]);n!==void 0&&R!=null&&g(n,["labels"],R);const x=p(e,["cachedContent"]);n!==void 0&&x!=null&&g(n,["cachedContent"],Es(t,x));const L=p(e,["responseModalities"]);L!=null&&g(i,["responseModalities"],L);const M=p(e,["mediaResolution"]);M!=null&&g(i,["mediaResolution"],M);const V=p(e,["speechConfig"]);V!=null&&g(i,["speechConfig"],FR(Qv(V)));const O=p(e,["audioTimestamp"]);O!=null&&g(i,["audioTimestamp"],O);const Ce=p(e,["thinkingConfig"]);Ce!=null&&g(i,["thinkingConfig"],Ce);const ve=p(e,["imageConfig"]);return ve!=null&&g(i,["imageConfig"],ve),i}function xb(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let u=rr(s);Array.isArray(u)&&(u=u.map(c=>mp(c))),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],x6(t,a,n)),n}function Nb(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["contents"]);if(s!=null){let u=rr(s);Array.isArray(u)&&(u=u.map(c=>c)),g(n,["contents"],u)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],N6(t,a,n)),n}function Db(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>e6(h))),g(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=p(t,["responseId"]);u!=null&&g(e,["responseId"],u);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function Mb(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(y=>y)),g(e,["candidates"],h)}const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=p(t,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const c=p(t,["responseId"]);c!=null&&g(e,["responseId"],c);const d=p(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function D6(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&g(e,["parameters","aspectRatio"],s);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&g(e,["parameters","includeSafetyAttributes"],d);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const y=p(t,["language"]);e!==void 0&&y!=null&&g(e,["parameters","language"],y);const E=p(t,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const T=p(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=p(t,["imageSize"]);if(e!==void 0&&C!=null&&g(e,["parameters","sampleImageSize"],C),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function M6(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const C=p(t,["language"]);e!==void 0&&C!=null&&g(e,["parameters","language"],C);const D=p(t,["outputMimeType"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","mimeType"],D);const k=p(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","compressionQuality"],k);const U=p(t,["addWatermark"]);e!==void 0&&U!=null&&g(e,["parameters","addWatermark"],U);const H=p(t,["labels"]);e!==void 0&&H!=null&&g(e,["labels"],H);const F=p(t,["imageSize"]);e!==void 0&&F!=null&&g(e,["parameters","sampleImageSize"],F);const B=p(t,["enhancePrompt"]);return e!==void 0&&B!=null&&g(e,["parameters","enhancePrompt"],B),n}function P6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&D6(a,n),n}function k6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&M6(a,n),n}function L6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Y6(u))),g(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&g(e,["positivePromptSafetyAttributes"],OR(s)),e}function V6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>gp(u))),g(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&g(e,["positivePromptSafetyAttributes"],UR(s)),e}function O6(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=p(t,["durationSeconds"]);if(e!==void 0&&s!=null&&g(e,["parameters","durationSeconds"],s),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=p(t,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(t,["negativePrompt"]);e!==void 0&&d!=null&&g(e,["parameters","negativePrompt"],d);const h=p(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=p(t,["lastFrame"]);e!==void 0&&y!=null&&g(e,["instances[0]","lastFrame"],yp(y));const E=p(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(C=>V5(C))),g(e,["instances[0]","referenceImages"],T)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function U6(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=p(t,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&g(e,["parameters","aspectRatio"],d);const h=p(t,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const T=p(t,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const C=p(t,["enhancePrompt"]);e!==void 0&&C!=null&&g(e,["parameters","enhancePrompt"],C);const D=p(t,["generateAudio"]);e!==void 0&&D!=null&&g(e,["parameters","generateAudio"],D);const k=p(t,["lastFrame"]);e!==void 0&&k!=null&&g(e,["instances[0]","lastFrame"],Tr(k));const U=p(t,["referenceImages"]);if(e!==void 0&&U!=null){let B=U;Array.isArray(B)&&(B=B.map(Y=>O5(Y))),g(e,["instances[0]","referenceImages"],B)}const H=p(t,["mask"]);e!==void 0&&H!=null&&g(e,["instances[0]","mask"],L5(H));const F=p(t,["compressionQuality"]);return e!==void 0&&F!=null&&g(e,["parameters","compressionQuality"],F),n}function F6(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],H6(u)),e}function B6(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],G6(u)),e}function q6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],yp(a));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],qR(u));const c=p(e,["source"]);c!=null&&K6(c,n);const d=p(e,["config"]);return d!=null&&O6(d,n),n}function z6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],Tr(a));const u=p(e,["video"]);u!=null&&g(n,["instances[0]","video"],zR(u));const c=p(e,["source"]);c!=null&&J6(c,n);const d=p(e,["config"]);return d!=null&&U6(d,n),n}function H6(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>j6(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function G6(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>W6(u))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function K6(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],yp(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],qR(a)),n}function J6(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Tr(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],zR(a)),n}function Y6(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],n5(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const s=p(t,["_self"]);return s!=null&&g(e,["safetyAttributes"],OR(s)),e}function gp(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],VR(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const s=p(t,["_self"]);s!=null&&g(e,["safetyAttributes"],UR(s));const a=p(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function $6(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],VR(n));const i=p(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["labels"],s)}return e}function j6(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],P5(n)),e}function W6(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],k5(n)),e}function Q6(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=p(t,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const C=p(t,["responseMimeType"]);C!=null&&g(e,["responseMimeType"],C);const D=p(t,["responseModalities"]);D!=null&&g(e,["responseModalities"],D);const k=p(t,["responseSchema"]);k!=null&&g(e,["responseSchema"],k);const U=p(t,["routingConfig"]);U!=null&&g(e,["routingConfig"],U);const H=p(t,["seed"]);H!=null&&g(e,["seed"],H);const F=p(t,["speechConfig"]);F!=null&&g(e,["speechConfig"],FR(F));const B=p(t,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const Y=p(t,["temperature"]);Y!=null&&g(e,["temperature"],Y);const X=p(t,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const G=p(t,["topK"]);G!=null&&g(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&g(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function X6(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],dt(t,i)),n}function Z6(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],dt(t,i)),n}function e5(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function t5(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function n5(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],No(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function VR(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],No(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function yp(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],No(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Tr(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],No(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function i5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&g(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],RR(t,c)),i}function r5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&g(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const u=p(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],RR(t,c)),i}function s5(t,e){const n={},i=p(e,["config"]);return i!=null&&i5(t,i,n),n}function o5(t,e){const n={},i=p(e,["config"]);return i!=null&&r5(t,i,n),n}function a5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=xR(s);Array.isArray(a)&&(a=a.map(u=>Ry(u))),g(e,["models"],a)}return e}function l5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=xR(s);Array.isArray(a)&&(a=a.map(u=>xy(u))),g(e,["models"],a)}return e}function u5(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const s=p(t,["maskDilation"]);return s!=null&&g(e,["dilation"],s),e}function Ry(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);s!=null&&g(e,["description"],s);const a=p(t,["version"]);a!=null&&g(e,["version"],a);const u=p(t,["_self"]);u!=null&&g(e,["tunedModelInfo"],b5(u));const c=p(t,["inputTokenLimit"]);c!=null&&g(e,["inputTokenLimit"],c);const d=p(t,["outputTokenLimit"]);d!=null&&g(e,["outputTokenLimit"],d);const h=p(t,["supportedGenerationMethods"]);return h!=null&&g(e,["supportedActions"],h),e}function xy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);s!=null&&g(e,["description"],s);const a=p(t,["versionId"]);a!=null&&g(e,["version"],a);const u=p(t,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>C6(T))),g(e,["endpoints"],E)}const c=p(t,["labels"]);c!=null&&g(e,["labels"],c);const d=p(t,["_self"]);d!=null&&g(e,["tunedModelInfo"],w5(d));const h=p(t,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const y=p(t,["checkpoints"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(T=>T)),g(e,["checkpoints"],E)}return e}function c5(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],I6(a));const u=p(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],Z3(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function f5(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],Tr(n)),e}function d5(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["baseSteps"]);e!==void 0&&s!=null&&g(e,["parameters","editConfig","baseSteps"],s);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=p(t,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const h=p(t,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const E=p(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const T=p(t,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const C=p(t,["labels"]);return e!==void 0&&C!=null&&g(e,["labels"],C),n}function h5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["source"]);s!=null&&m5(s,n);const a=p(e,["config"]);return a!=null&&d5(a,n),n}function p5(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>gp(s))),g(e,["generatedImages"],i)}return e}function m5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["personImage"]);e!==void 0&&s!=null&&g(e,["instances[0]","personImage","image"],Tr(s));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>f5(c))),g(e,["instances[0]","productImages"],u)}return n}function g5(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],Tr(n));const i=p(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const s=p(t,["referenceType"]);s!=null&&g(e,["referenceType"],s);const a=p(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],u5(a));const u=p(t,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],o6(u));const c=p(t,["styleImageConfig"]);c!=null&&g(e,["styleImageConfig"],c);const d=p(t,["subjectImageConfig"]);return d!=null&&g(e,["subjectImageConfig"],d),e}function OR(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&g(e,["contentType"],s),e}function UR(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&g(e,["contentType"],s),e}function y5(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function v5(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],Tr(n)),e}function _5(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const s=p(t,["maxPredictions"]);e!==void 0&&s!=null&&g(e,["parameters","maxPredictions"],s);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=p(t,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&g(e,["parameters","binaryColorThreshold"],c);const d=p(t,["labels"]);return e!==void 0&&d!=null&&g(e,["labels"],d),n}function E5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["source"]);s!=null&&S5(s,n);const a=p(e,["config"]);return a!=null&&_5(a,n),n}function T5(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>$6(s))),g(e,["generatedMasks"],i)}return e}function S5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Tr(s));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],v5(a)),n}function FR(t){const e={},n=p(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function A5(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],e5(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],t5(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function BR(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>R6(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=p(t,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function b5(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&g(e,["updateTime"],s),e}function w5(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&g(e,["updateTime"],s),e}function C5(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function I5(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function R5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","name"],dt(t,i));const s=p(e,["config"]);return s!=null&&C5(s,n),n}function x5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["config"]);return s!=null&&I5(s,n),n}function N5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&g(e,["parameters","safetySetting"],s);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=p(t,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","compressionQuality"],d);const h=p(t,["enhanceInputImage"]);e!==void 0&&h!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=p(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const E=p(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(t,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const C=p(t,["mode"]);return e!==void 0&&C!=null&&g(e,["parameters","mode"],C),n}function D5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],dt(t,i));const s=p(e,["image"]);s!=null&&g(n,["instances[0]","image"],Tr(s));const a=p(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=p(e,["config"]);return u!=null&&N5(u,n),n}function M5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>gp(a))),g(e,["generatedImages"],s)}return e}function P5(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],No(i));const s=p(t,["encoding"]);return s!=null&&g(e,["mimeType"],s),e}function k5(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],No(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function L5(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],Tr(n));const i=p(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function V5(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],yp(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function O5(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Tr(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function qR(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],No(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["encoding"],s),e}function zR(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],No(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U5="Content-Type",F5="X-Server-Timeout",B5="User-Agent",Ny="x-goog-api-client",q5="1.29.0",z5=`google-genai-sdk/${q5}`,H5="v1beta1",G5="v1beta",Pb=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class K5{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:H5,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:G5,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,c]of Object.entries(e.queryParams))s.searchParams.append(u,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&J5(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await kb(s),new wy(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await kb(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Cl(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";for(;;){const{done:c,value:d}=yield Lt(s.read());if(c){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(d,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const T=JSON.parse(JSON.stringify(E.error)),C=T.status,D=T.code,k=`got status: ${C}. ${JSON.stringify(E)}`;if(D>=400&&D<600)throw new pp({message:k,status:D})}}catch(E){if(E.name==="ApiError")throw E}u+=h;let y=u.match(Pb);for(;y;){const E=y[1];try{const T=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Lt(new wy(T)),u=u.slice(y[0].length),y=u.match(Pb)}catch(T){throw new Error(`exception parsing stream chunk ${E}. ${T}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=z5+" "+this.clientOptions.userAgentExtra;return e[B5]=n,e[Ny]=n,e[U5]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(F5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);s.sizeBytes=String(u.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const d={file:s},h=this.getFileName(e),y=ye("upload/v1beta/files",d._url),E=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,d,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var s;const a=this.clientOptions.uploader,u=await a.stat(n),c=String(u.size),d=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(h,c,d,y,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,s,a,u){var c;let d={};u?d=u:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function kb(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new pp({message:s,status:n}):new Error(s)}}function J5(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const c=Object.assign({},a);for(const d in u)if(Object.prototype.hasOwnProperty.call(u,d)){const h=u[d],y=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?c[d]=i(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y5="mcp_used/unknown";let $5=!1;function HR(t){for(const e of t)if(j5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return $5}function GR(t){var e;const n=(e=t[Ny])!==null&&e!==void 0?e:"";t[Ny]=(n+` ${Y5}`).trimStart()}function j5(t){return t!==null&&typeof t=="object"&&t instanceof Zv}function W5(t,e=100){return Cl(this,arguments,function*(){let i,s=0;for(;s<e;){const a=yield Lt(t.listTools({cursor:i}));for(const u of a.tools)yield yield Lt(u),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class Zv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Zv(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const a={},u=[];for(const y of this.mcpClients)try{for(var c=!0,d=(n=void 0,pc(W5(y))),h;h=await d.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const E=s;u.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=y}}catch(E){n={error:E}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),tU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await s.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Q5(t,e,n){const i=new Y4;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class X5{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=tF(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const y=new Promise(B=>{h=B}),E=e.callbacks,T=function(){h({})},C=this.apiClient,D={onopen:T,onmessage:B=>{Q5(C,E.onmessage,B)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(B){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(B){}},k=this.webSocketFactory.create(d,eF(u),D);k.connect(),await y;const F={setup:{model:dt(this.apiClient,e.model)}};return k.send(JSON.stringify(F)),new Z5(k,this.apiClient)}}class Z5{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=G3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=H3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(yl.PLAY)}pause(){this.sendPlaybackControl(yl.PAUSE)}stop(){this.sendPlaybackControl(yl.STOP)}resetContext(){this.sendPlaybackControl(yl.RESET_CONTEXT)}close(){this.conn.close()}}function eF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function tF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function iF(t,e,n){const i=new J4;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const u=Y3(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class rF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new X5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,a,u,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&HR(e.config.tools)&&GR(E);const T=lF(E);if(this.apiClient.isVertexAI())y=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const x=this.apiClient.getApiKey();let L="BidiGenerateContent",M="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",M="access_token"),y=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${M}=${x}`}let C=()=>{};const D=new Promise(x=>{C=x}),k=e.callbacks,U=function(){var x;(x=k==null?void 0:k.onopen)===null||x===void 0||x.call(k),C({})},H=this.apiClient,F={onopen:U,onmessage:x=>{iF(H,k.onmessage,x)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(x){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(x){}},B=this.webSocketFactory.create(y,aF(T),F);B.connect(),await D;let Y=dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const x=this.apiClient.getProject(),L=this.apiClient.getLocation();Y=`projects/${x}/locations/${L}/`+Y}let X={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Dh.AUDIO]}:e.config.responseModalities=[Dh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(c=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&c!==void 0?c:[],I=[];for(const x of G)if(this.isCallableTool(x)){const L=x;I.push(await L.tool())}else I.push(x);I.length>0&&(e.config.tools=I);const R={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=z3(this.apiClient,R):X=q3(this.apiClient,R),delete X.config,B.send(JSON.stringify(X)),new oF(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const sF={turnComplete:!0};class oF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=rr(n.turns),e.isVertexAI()||(i=i.map(s=>mp(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(nF)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},sF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:J3(e)}:n={realtimeInput:K3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function aF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function lF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lb=10;function Vb(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Il(u)){s=!0;break}if(!s)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Il(t){return"callTool"in t&&typeof t.callTool=="function"}function uF(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Il(s)))!==null&&i!==void 0?i:!1}function Ob(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(Il(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function Ub(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cF extends _s{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,a,u,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!uF(n)||Vb(n.config))return await this.generateContentInternal(d);const h=Ob(n);if(h.length>0){const k=h.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let y,E;const T=rr(d.contents),C=(a=(s=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Lb;let D=0;for(;D<C&&(y=await this.generateContentInternal(d),!(!y.functionCalls||y.functionCalls.length===0));){const k=y.candidates[0].content,U=[];for(const H of(c=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&c!==void 0?c:[])if(Il(H)){const B=await H.callTool(y.functionCalls);U.push(...B)}D++,E={role:"user",parts:U},d.contents=rr(d.contents),d.contents.push(k),d.contents.push(E),Ub(d.config)&&(T.push(k),T.push(E))}return Ub(d.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Vb(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}const i=Ob(n);if(i.length>0){const s=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${s}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let a;const u=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:u.push(d);let c;return a?c={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Aa(vs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,a,u,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async d=>Il(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(c.config.tools=u,e.config&&e.config.tools&&HR(e.config.tools)){const d=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),GR(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,s;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Il(u)){const c=u,d=await c.tool();for(const h of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,c)}}return a}async processAfcStream(e){var n,i,s;const a=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:Lb;let u=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,y,E){var T,C;return Cl(this,arguments,function*(){for(var D,k,U,H;c<a;){u&&(c++,u=!1);const X=yield Lt(h.processParamsMaybeAddMcpUsage(E)),G=yield Lt(h.generateContentStreamInternal(X)),I=[],R=[];try{for(var F=!0,B=(k=void 0,pc(G)),Y;Y=yield Lt(B.next()),D=Y.done,!D;F=!0){H=Y.value,F=!1;const x=H;if(yield yield Lt(x),x.candidates&&(!((T=x.candidates[0])===null||T===void 0)&&T.content)){R.push(x.candidates[0].content);for(const L of(C=x.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(c<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(L.functionCall.name)){const M=yield Lt(y.get(L.functionCall.name).callTool([L.functionCall]));I.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(x){k={error:x}}finally{try{!F&&!D&&(U=B.return)&&(yield Lt(U.call(B)))}finally{if(k)throw k.error}}if(I.length>0){u=!0;const x=new Ku;x.candidates=[{content:{role:"user",parts:I}}],yield yield Lt(x);const L=[];L.push(...R),L.push({role:"user",parts:I});const M=rr(E.contents).concat(L);E.contents=M}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=Nb(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=Mb(y),T=new Ku;return Object.assign(T,E),T})}else{const h=xb(this.apiClient,e);return c=ye("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=Db(y),T=new Ku;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=Nb(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Cl(this,arguments,function*(){var T,C,D,k;try{for(var U=!0,H=pc(E),F;F=yield Lt(H.next()),T=F.done,!T;U=!0){k=F.value,U=!1;const B=k,Y=Mb(yield Lt(B.json()));Y.sdkHttpResponse={headers:B.headers};const X=new Ku;Object.assign(X,Y),yield yield Lt(X)}}catch(B){C={error:B}}finally{try{!U&&!T&&(D=H.return)&&(yield Lt(D.call(H)))}finally{if(C)throw C.error}}})})}else{const h=xb(this.apiClient,e);return c=ye("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Cl(this,arguments,function*(){var T,C,D,k;try{for(var U=!0,H=pc(E),F;F=yield Lt(H.next()),T=F.done,!T;U=!0){k=F.value,U=!1;const B=k,Y=Db(yield Lt(B.json()));Y.sdkHttpResponse={headers:B.headers};const X=new Ku;Object.assign(X,Y),yield yield Lt(X)}}catch(B){C={error:B}}finally{try{!U&&!T&&(D=H.return)&&(yield Lt(D.call(H)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=A6(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=w6(y),T=new hb;return Object.assign(T,E),T})}else{const h=S6(this.apiClient,e);return c=ye("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=b6(y),T=new hb;return Object.assign(T,E),T})}}async generateImagesInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=k6(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=V6(y),T=new pb;return Object.assign(T,E),T})}else{const h=P6(this.apiClient,e);return c=ye("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=L6(y),T=new pb;return Object.assign(T,E),T})}}async editImageInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=v6(this.apiClient,e);return a=ye("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=_6(d),y=new L4;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=D5(this.apiClient,e);return a=ye("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=M5(d),y=new V4;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=h5(this.apiClient,e);return a=ye("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=p5(d),y=new O4;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=E5(this.apiClient,e);return a=ye("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=T5(d),y=new U4;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=Z6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>xy(y))}else{const h=X6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>Ry(y))}}async listInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=o5(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=l5(y),T=new mb;return Object.assign(T,E),T})}else{const h=s5(this.apiClient,e);return c=ye("{models_url}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=a5(y),T=new mb;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=x5(this.apiClient,e);return c=ye("{model}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>xy(y))}else{const h=R5(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>Ry(y))}}async delete(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=p6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=g6(y),T=new gb;return Object.assign(T,E),T})}else{const h=h6(this.apiClient,e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=m6(y),T=new gb;return Object.assign(T,E),T})}}async countTokens(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=c6(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=d6(y),T=new yb;return Object.assign(T,E),T})}else{const h=u6(this.apiClient,e);return c=ye("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=f6(y),T=new yb;return Object.assign(T,E),T})}}async computeTokens(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=n6(this.apiClient,e);return a=ye("{model}:computeTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=i6(d),y=new F4;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=z6(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u.then(y=>{const E=B6(y),T=new Mh;return Object.assign(T,E),T})}else{const h=q6(this.apiClient,e);return c=ye("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u.then(y=>{const E=F6(y),T=new Mh;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fF extends _s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=x4(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),u}else{const h=R4(e);return c=ye("{operationName}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=T4(e);return a=ye("{resourceName}:fetchPredictOperation",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dF(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function hF(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>TF(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function pF(t,e,n){const i={},s=p(e,["expireTime"]);n!==void 0&&s!=null&&g(n,["expireTime"],s);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const u=p(e,["uses"]);n!==void 0&&u!=null&&g(n,["uses"],u);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&g(n,["bidiGenerateContentSetup"],EF(t,c));const d=p(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&g(n,["fieldMask"],d),i}function mF(t,e){const n={},i=p(e,["config"]);return i!=null&&g(n,["config"],pF(t,i,n)),n}function gF(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function yF(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function vF(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function _F(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=p(t,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Xv(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const C=p(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],C);const D=p(t,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],hF(Zn(D)));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let G=Kl(k);Array.isArray(G)&&(G=G.map(I=>AF(Gl(I)))),g(e,["setup","tools"],G)}const U=p(t,["sessionResumption"]);e!==void 0&&U!=null&&g(e,["setup","sessionResumption"],SF(U));const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const B=p(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const Y=p(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const X=p(t,["proactivity"]);return e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),n}function EF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],dt(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],_F(s,n)),n}function TF(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],gF(a));const u=p(t,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],dF(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function SF(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function AF(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=p(t,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],yF(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],vF(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function wF(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=bF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>u.includes(h)?`generationConfig.${h}`:h));const d=[];a&&d.push(a),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class CF extends _s{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=mF(this.apiClient,e);a=ye("auth_tokens",c._url),u=c._query,delete c.config,delete c._url,delete c._query;const d=wF(c,e.config);return s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IF(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function RF(t){const e={},n=p(t,["config"]);return n!=null&&IF(n,e),e}function xF(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function NF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&xF(i,e),e}function DF(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function MF(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const s=p(t,["chunkingConfig"]);return e!==void 0&&s!=null&&g(e,["chunkingConfig"],s),n}function PF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const u=p(t,["response"]);return u!=null&&g(e,["response"],LF(u)),e}function kF(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&g(e,["fileName"],i);const s=p(t,["config"]);return s!=null&&MF(s,e),e}function LF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function VF(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function OF(t){const e={},n=p(t,["config"]);return n!=null&&VF(n,e),e}function UF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function FF(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),g(e,["customMetadata"],c)}const u=p(t,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),n}function BF(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&FF(i,e),e}function qF(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zF(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function HF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&zF(i,e),e}function GF(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function KF(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function JF(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&KF(i,e),e}function YF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $F extends _s{constructor(e){super(),this.apiClient=e,this.list=async n=>new Aa(vs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=GF(e);return a=ye("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=HF(e);s=ye("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=JF(e);return a=ye("{parent}/documents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=YF(d),y=new B4;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jF extends _s{constructor(e,n=new $F(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Aa(vs.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=RF(e);return a=ye("fileSearchStores",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=DF(e);return a=ye("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=NF(e);s=ye("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=OF(e);return a=ye("fileSearchStores",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=UF(d),y=new q4;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=BF(e);return a=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=qF(d),y=new z4;return Object.assign(y,h),y})}}async importFile(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=kF(e);return a=ye("{file_search_store_name}:importFile",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=PF(d),y=new Yv;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WF(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function QF(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function XF(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=p(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=p(t,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=p(t,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function ZF(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const C=p(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec"],Fb(C))}else if(s==="PREFERENCE_TUNING"){const C=p(t,["validationDataset"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec"],Fb(C))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=p(t,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const C=p(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(c==="PREFERENCE_TUNING"){const C=p(t,["epochCount"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=p(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(d==="PREFERENCE_TUNING"){const C=p(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=p(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=p(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let y=p(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const C=p(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(y==="PREFERENCE_TUNING"){const C=p(t,["adapterSize"]);e!==void 0&&C!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(t,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function e9(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&g(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&f9(a);const u=p(t,["config"]);return u!=null&&XF(u,n),n}function t9(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&g(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&d9(a,n,e);const u=p(t,["config"]);return u!=null&&ZF(u,n,e),n}function n9(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function i9(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function r9(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function s9(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=p(t,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function o9(t,e){const n={},i=p(t,["config"]);return i!=null&&r9(i,n),n}function a9(t,e){const n={},i=p(t,["config"]);return i!=null&&s9(i,n),n}function l9(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&g(n,["nextPageToken"],s);const a=p(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>KR(c))),g(n,["tuningJobs"],u)}return n}function u9(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&g(n,["nextPageToken"],s);const a=p(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(c=>Dy(c))),g(n,["tuningJobs"],u)}return n}function c9(t,e){const n={},i=p(t,["name"]);i!=null&&g(n,["model"],i);const s=p(t,["name"]);return s!=null&&g(n,["endpoint"],s),n}function f9(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(n,["examples","examples"],s)}return n}function d9(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=p(t,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=p(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function KR(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["state"]);a!=null&&g(n,["state"],CR(a));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const c=p(t,["tuningTask","startTime"]);c!=null&&g(n,["startTime"],c);const d=p(t,["tuningTask","completeTime"]);d!=null&&g(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const E=p(t,["baseModel"]);E!=null&&g(n,["baseModel"],E);const T=p(t,["_self"]);return T!=null&&g(n,["tunedModel"],c9(T)),n}function Dy(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["state"]);a!=null&&g(n,["state"],CR(a));const u=p(t,["createTime"]);u!=null&&g(n,["createTime"],u);const c=p(t,["startTime"]);c!=null&&g(n,["startTime"],c);const d=p(t,["endTime"]);d!=null&&g(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const y=p(t,["error"]);y!=null&&g(n,["error"],y);const E=p(t,["description"]);E!=null&&g(n,["description"],E);const T=p(t,["baseModel"]);T!=null&&g(n,["baseModel"],T);const C=p(t,["tunedModel"]);C!=null&&g(n,["tunedModel"],C);const D=p(t,["preTunedModel"]);D!=null&&g(n,["preTunedModel"],D);const k=p(t,["supervisedTuningSpec"]);k!=null&&g(n,["supervisedTuningSpec"],k);const U=p(t,["preferenceOptimizationSpec"]);U!=null&&g(n,["preferenceOptimizationSpec"],U);const H=p(t,["tuningDataStats"]);H!=null&&g(n,["tuningDataStats"],H);const F=p(t,["encryptionSpec"]);F!=null&&g(n,["encryptionSpec"],F);const B=p(t,["partnerModelTuningSpec"]);B!=null&&g(n,["partnerModelTuningSpec"],B);const Y=p(t,["customBaseModel"]);Y!=null&&g(n,["customBaseModel"],Y);const X=p(t,["experiment"]);X!=null&&g(n,["experiment"],X);const G=p(t,["labels"]);G!=null&&g(n,["labels"],G);const I=p(t,["outputUri"]);I!=null&&g(n,["outputUri"],I);const R=p(t,["pipelineJob"]);R!=null&&g(n,["pipelineJob"],R);const x=p(t,["serviceAccount"]);x!=null&&g(n,["serviceAccount"],x);const L=p(t,["tunedModelDisplayName"]);L!=null&&g(n,["tunedModelDisplayName"],L);const M=p(t,["veoTuningSpec"]);return M!=null&&g(n,["veoTuningSpec"],M),n}function h9(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["metadata"]);a!=null&&g(n,["metadata"],a);const u=p(t,["done"]);u!=null&&g(n,["done"],u);const c=p(t,["error"]);return c!=null&&g(n,["error"],c),n}function Fb(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const s=p(t,["vertexDatasetResource"]);return s!=null&&g(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p9 extends _s{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Aa(vs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:by.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=i9(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>Dy(y))}else{const h=n9(e);return c=ye("{name}",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>KR(y))}}async listInternal(e){var n,i,s,a;let u,c="",d={};if(this.apiClient.isVertexAI()){const h=a9(e);return c=ye("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=u9(y),T=new vb;return Object.assign(T,E),T})}else{const h=o9(e);return c=ye("tunedModels",h._url),d=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const E=l9(y),T=new vb;return Object.assign(T,E),T})}}async cancel(e){var n,i,s,a;let u="",c={};if(this.apiClient.isVertexAI()){const d=QF(e);u=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=WF(e);u=ye("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const c=t9(e,e);return a=ye("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>Dy(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=e9(e);return a=ye("tunedModels",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>h9(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m9{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const g9=1024*1024*8,y9=3,v9=1e3,_9=2,kh="x-goog-upload-status";async function E9(t,e,n){var i;const s=await JR(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[kh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function T9(t,e,n){var i;const s=await JR(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[kh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=ER(a),c=new $v;return Object.assign(c,u),c}async function JR(t,e,n){var i,s;let a=0,u=0,c=new wy(new Response),d="upload";for(a=t.size;u<a;){const h=Math.min(g9,a-u),y=t.slice(u,u+h);u+h>=a&&(d+=", finalize");let E=0,T=v9;for(;E<y9&&(c=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[kh]));)E++,await A9(T),T=T*_9;if(u+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[kh])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function S9(t){return{size:t.size,type:t.type}}function A9(t){return new Promise(e=>setTimeout(e,t))}class b9{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await E9(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T9(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await S9(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w9{create(e,n,i){return new C9(e,n,i)}}class C9{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bb="x-goog-api-key";class I9{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Bb)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Bb,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R9="gl-node/";class x9{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=_4(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new I9(this.apiKey);this.apiClient=new K5({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:R9+"web",uploader:new b9,downloader:new m9}),this.models=new cF(this.apiClient),this.live=new rF(this.apiClient,s,new w9),this.batches=new GU(this.apiClient),this.chats=new S3(this.models,this.apiClient),this.caches=new _3(this.apiClient),this.files=new M3(this.apiClient),this.operations=new fF(this.apiClient),this.authTokens=new CF(this.apiClient),this.tunings=new p9(this.apiClient),this.fileSearchStores=new jF(this.apiClient)}}const YR={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},vp=new x9({apiKey:YR.geminiApiKey});async function N9(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},n=t.map(s=>({inlineData:{data:s,mimeType:"image/jpeg"}})),i=await vp.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:Ue.OBJECT,properties:{items:{type:Ue.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:Ue.OBJECT,properties:{analysis:{type:Ue.STRING,description:"La description concise du vtement."},category:{type:Ue.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Ue.STRING,description:"La couleur principale du vtement."},material:{type:Ue.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const s=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return s.items.forEach(u=>{a.includes(u.category)||(console.warn(`Catgorie invalide reue de l'IA: ${u.category}, fallback sur "Accessoires"`),u.category="Accessoires")}),s.items}catch(s){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",s),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function D9(t){return t&&t.name&&Array.isArray(t.itemIds)}async function M9(t,e,n,i){const s=new Set((e||[]).flatMap(T=>T.itemIds)),u=t.filter(T=>!s.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[u,c].filter(Boolean).join(`
`),h=i?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${D9(i)?i.name:i.analysis} (ID: ${i.id})". C'est la pice matresse.**
`:"",y=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${n}"
    
    Vtements et Ensembles disponibles (utilise leur ID) :
    ${d}
    ${h}

    RGLES :
    1. Base-toi **uniquement** sur les vtements et ensembles lists ci-dessus.
    2. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    3. Les articles marqus comme "(Ensemble)" sont insparables.

    Cre 3 tenues distinctes. Pour chaque tenue, fournis :
    1. Un "titre" court et accrocheur.
    2. Une "description" brve du style.
    3. Une liste "vetements" d'objets, o chaque objet contient "id" et "description" de l'article ou de l'ensemble utilis.

    Rponds en franais.
  `,E=await vp.models.generateContent({model:"gemini-2.5-pro",contents:y,config:{responseMimeType:"application/json",responseSchema:{type:Ue.OBJECT,properties:{tenues:{type:Ue.ARRAY,description:"La liste des suggestions de tenues.",items:{type:Ue.OBJECT,properties:{titre:{type:Ue.STRING,description:"Le nom de la tenue."},description:{type:Ue.STRING,description:"Une brve description du style de la tenue."},vetements:{type:Ue.ARRAY,description:"La liste des objets vtements composant la tenue.",items:{type:Ue.OBJECT,properties:{id:{type:Ue.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:Ue.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(T){throw console.error("Erreur de parsing JSON de la rponse Gemini:",T),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function P9(t,e){const n=t.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${t.length} pices):
${n}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,s=await vp.models.generateContent({model:"gemini-2.5-pro",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Ue.OBJECT,properties:{summary:{type:Ue.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:Ue.ARRAY,items:{type:Ue.STRING},description:"Liste des points forts"},gaps:{type:Ue.ARRAY,items:{type:Ue.STRING},description:"Liste des manques"},suggestions:{type:Ue.ARRAY,items:{type:Ue.OBJECT,properties:{category:{type:Ue.STRING},description:{type:Ue.STRING},reason:{type:Ue.STRING},priority:{type:Ue.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Ue.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(s.text)}catch(a){throw console.error("Erreur:",a),a}}async function k9(t,e,n,i){const s=new Set((e||[]).flatMap(E=>E.itemIds)),u=t.filter(E=>!s.has(E.id)).map(E=>`- ${E.analysis} (ID: ${E.id})`).join(`
`),c=e.map(E=>`- ${E.name} (Ensemble, ID: ${E.id})`).join(`
`),d=[u,c].filter(Boolean).join(`
`),h=`
    Tu es un styliste de voyage. Ta mission est de crer une valise optimise.

    Dtails du voyage :
    - Dure : ${n} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles (utilise leur ID) :
    ${d}
    
    RGLES :
    1. Cre une liste "valise" polyvalente et minimale.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    4. Les articles marqus comme "(Ensemble)" sont insparables.

    Rponds avec un "titre", un "resume", et la liste "valise".
    La liste "valise" doit contenir des objets, o chaque objet contient "id" et "description".
    `,y=await vp.models.generateContent({model:"gemini-2.5-pro",contents:h,config:{responseMimeType:"application/json",responseSchema:{type:Ue.OBJECT,properties:{titre:{type:Ue.STRING,description:"Le nom du plan de valise."},resume:{type:Ue.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:Ue.ARRAY,description:"La liste des objets vtements  emporter.",items:{type:Ue.OBJECT,properties:{id:{type:Ue.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:Ue.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","resume","valise"]}}});try{return JSON.parse(y.text)}catch(E){throw console.error("Erreur de parsing JSON:",E),new Error("L'IA a renvoy une rponse malforme.")}}const L9=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),V9=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),qb=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),O9=()=>b.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),$R=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),zb=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),jR=()=>b.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),U9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),F9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),B9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),q9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),z9=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),WR=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),_p=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),QR=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),H9=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),G9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[b.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),b.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),K9=({theme:t,toggleTheme:e,children:n})=>b.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:b.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[b.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",b.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),b.jsxs("div",{className:"flex items-center gap-4",children:[n,b.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?b.jsx(V9,{}):b.jsx(L9,{})})]})]})}),Hb=({user:t})=>{var C,D,k;const[e,n]=J.useState(""),[i,s]=J.useState(""),[a,u]=J.useState(!1),[c,d]=J.useState(!1),h=J.useRef(null);J.useEffect(()=>{const U=H=>{h.current&&!h.current.contains(H.target)&&d(!1)};return c&&document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[c]);const y=async()=>{try{await qM(nc,p4)}catch(U){console.error("Erreur de connexion Google:",U)}},E=async U=>{U.preventDefault();try{a?await gM(nc,e,i):await yM(nc,e,i)}catch(H){console.error("Erreur d'authentification:",H)}},T=async()=>{try{await TM(nc)}catch(U){console.error("Erreur de dconnexion:",U)}};return t?b.jsxs("div",{className:"relative",ref:h,children:[b.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[b.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((C=t.displayName)==null?void 0:C[0])||((D=t.email)==null?void 0:D[0])||"U").toUpperCase()}),b.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((k=t.email)==null?void 0:k.split("@")[0])})]}),c&&b.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[b.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[b.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email})]}),b.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",b.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),b.jsxs("button",{onClick:y,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[b.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[b.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),b.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),b.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),b.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),b.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),b.jsxs("div",{className:"relative my-6",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),b.jsx("div",{className:"relative flex justify-center text-sm",children:b.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),b.jsxs("form",{onSubmit:E,className:"space-y-4",children:[b.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:U=>n(U.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),b.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:U=>s(U.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),b.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),b.jsx("button",{onClick:()=>u(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},J9=({onAnalyze:t,isAnalyzing:e})=>{const n=J.useRef(null),[i,s]=J.useState([]),[a,u]=J.useState(!1),[c,d]=J.useState(!1);J.useEffect(()=>{const F=()=>d(window.innerWidth<1024);return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),J.useEffect(()=>()=>{i.forEach(F=>URL.revokeObjectURL(F.preview))},[i]);const h=F=>{const B=F.map(Y=>({id:`${Y.name}-${Y.lastModified}-${Math.random()}`,file:Y,preview:URL.createObjectURL(Y)}));s(Y=>[...Y,...B])},y=F=>{F.target.files&&(h(Array.from(F.target.files)),F.target.value="")},E=()=>{var F;e||(F=n.current)==null||F.click()},T=F=>{c||(F.preventDefault(),F.stopPropagation(),u(!0))},C=F=>{c||(F.preventDefault(),F.stopPropagation(),u(!1))},D=F=>{c||(F.preventDefault(),F.stopPropagation())},k=F=>{c||(F.preventDefault(),F.stopPropagation(),u(!1),F.dataTransfer.files&&F.dataTransfer.files.length>0&&(h(Array.from(F.dataTransfer.files)),F.dataTransfer.clearData()))},U=F=>{const B=i.find(Y=>Y.id===F);B&&URL.revokeObjectURL(B.preview),s(Y=>Y.filter(X=>X.id!==F))},H=()=>{i.length>0&&!e&&(t(i.map(F=>F.file)),s([]))};return b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:C,onDragOver:D,onDrop:k,children:[b.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),b.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[b.jsx("input",{type:"file",ref:n,onChange:y,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),b.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?b.jsxs(b.Fragment,{children:[b.jsx(O9,{}),b.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:b.jsx(qb,{})}),b.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),b.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",b.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!c&&b.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[b.jsx("div",{className:"text-black transform-gpu scale-110",children:b.jsx(qb,{})}),b.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&b.jsxs("div",{className:"mt-8",children:[b.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),b.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(F=>b.jsxs("div",{className:"relative group aspect-square",children:[b.jsx("img",{src:F.preview,alt:F.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),b.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),b.jsx("button",{onClick:()=>U(F.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:b.jsx($R,{})})]},F.id))}),b.jsxs("button",{onClick:H,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(e0,{}),"Analyser les ",i.length," article(s)"]})]})]})},Y9=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:s,isSet:a})=>b.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[b.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),b.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${s?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),a&&!s&&b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:b.jsx(_p,{})}),s&&b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:b.jsx(QR,{})}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:b.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),b.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:b.jsx($R,{})})]}),$9={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},j9=({clothingItems:t,clothingSets:e=[],onItemClick:n,onDeleteItem:i,onCreateSet:s})=>{const[a,u]=J.useState("Hauts"),[c,d]=J.useState($9),[h,y]=J.useState(!1),[E,T]=J.useState(new Set),C=J.useMemo(()=>e||[],[e]),D=J.useMemo(()=>new Set(C.flatMap(M=>M.itemIds||[])),[C]),k=t.length,U=[{name:"Hauts",icon:U9},{name:"Bas",icon:F9},{name:"Chaussures",icon:B9},{name:"Accessoires",icon:q9}],H=M=>{h?T(V=>{const O=new Set(V);return O.has(M.id)?O.delete(M.id):O.add(M.id),O}):n(M)},F=(M,V)=>{M.stopPropagation(),E.has(V)&&T(O=>{const Ce=new Set(O);return Ce.delete(V),Ce}),i(V)},B=J.useMemo(()=>t.filter(M=>{if(!(M.category===a))return!1;const O=a?c[a]:{color:"Toutes",material:"Toutes"},Ce=O.color==="Toutes"||M.color===O.color,ve=O.material==="Toutes"||M.material===O.material;return Ce&&ve}),[t,a,c]),Y=J.useMemo(()=>{if(!a)return[];const M=t.filter(V=>V.category===a).map(V=>V.color);return["Toutes",...Array.from(new Set(M))]},[t,a]),X=J.useMemo(()=>{if(!a)return[];const M=t.filter(V=>V.category===a).map(V=>V.material);return["Toutes",...Array.from(new Set(M))]},[t,a]),G=M=>{a&&d(V=>({...V,[a]:{...V[a],color:M}}))},I=M=>{a&&d(V=>({...V,[a]:{...V[a],material:M}}))},R=M=>{u(a===M?null:M)},x=()=>{y(!h),T(new Set)},L=()=>{if(E.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const M=window.prompt("Donnez un nom  cet ensemble :");M&&(s(M,Array.from(E)),x())};return k===0?b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[b.jsx(zb,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),b.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(zb,{className:"w-8 h-8 text-gold"}),b.jsxs("div",{children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[b.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),b.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[k," vtement",k>1?"s":""]})]})]}),h?b.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[b.jsx("button",{onClick:x,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),b.jsxs("button",{onClick:L,disabled:E.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",E.size,")"]})]}):b.jsxs("button",{onClick:x,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[b.jsx(_p,{}),"Crer un ensemble"]})]}),h&&b.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[b.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),b.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),b.jsx("div",{className:"space-y-6",children:U.map(({name:M,icon:V})=>{const O=t.filter(ve=>ve.category===M),Ce=a===M;return b.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[b.jsxs("button",{onClick:()=>R(M),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(V,{className:"w-5 h-5 text-gold"}),b.jsx("span",{className:"font-semibold text-lg",children:M}),b.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",O.length,")"]})]}),b.jsx(z9,{className:`w-5 h-5 transition-transform ${Ce?"rotate-180":""}`})]}),Ce&&b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"flex flex-wrap gap-4",children:[b.jsxs("div",{className:"flex-1 min-w-[200px]",children:[b.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),b.jsx("select",{value:c[M].color,onChange:ve=>G(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:Y.map(ve=>b.jsx("option",{value:ve,children:ve},ve))})]}),b.jsxs("div",{className:"flex-1 min-w-[200px]",children:[b.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),b.jsx("select",{value:c[M].material,onChange:ve=>I(ve.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:X.map(ve=>b.jsx("option",{value:ve,children:ve},ve))})]})]}),B.length>0?b.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:B.map(ve=>b.jsx(Y9,{imageSrc:ve.imageSrc,analysis:ve.analysis,onClick:()=>H(ve),onRemove:te=>F(te,ve.id),isSelected:E.has(ve.id),isSet:D.has(ve.id)&&!E.has(ve.id)},ve.id))}):b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},M)})})]})},XR=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:s,weatherError:a})=>{const[u,c]=_n.useState(""),d=y=>{y.preventDefault(),n(u||"Casual")},h=["Casual","Soire chic","Travail (formel)"];return b.jsxs("div",{children:[b.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&b.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),a&&b.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!s&&!a&&b.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),b.jsx("form",{onSubmit:d,children:b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),b.jsx("div",{className:"flex justify-center gap-2 mb-4",children:h.map(y=>b.jsx("button",{type:"button",onClick:()=>c(y),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${u===y?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:y},y))}),b.jsx("input",{id:"occasion",type:"text",value:u,onChange:y=>c(y.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),b.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(e0,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},ZR=({outfits:t,allClothingItems:e,allClothingSets:n})=>{const[i,s]=J.useState(null);J.useEffect(()=>{if(!i)return;const u=c=>{c.key==="Escape"&&s(null)};return window.addEventListener("keydown",u),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",u),document.body.style.overflow="auto"}},[i]);const a=u=>{const c=e.find(h=>h.id===u);return c||n.find(h=>h.id===u)};return b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"mt-10 space-y-8",children:t.map((u,c)=>b.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[b.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:u.titre}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:u.description}),b.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:u.vetements.map((d,h)=>{const y=a(d.id),E=y?y.imageSrc:null;return b.jsx("button",{onClick:()=>E&&s(E),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!E,"aria-label":`Agrandir l'image de : ${d.description}`,children:E?b.jsx("img",{src:E,alt:d.description,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:b.jsx(jR,{})})},h)})}),b.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:u.vetements.map((d,h)=>b.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d.description},h))})]},c))}),i&&b.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>s(null),role:"dialog","aria-modal":"true",children:b.jsxs("div",{className:"relative",onClick:u=>u.stopPropagation(),children:[b.jsx("img",{src:i,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),b.jsx("button",{onClick:()=>s(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:b.jsx(WR,{})})]})})]})},W9=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:s,onRemoveSet:a})=>{const[u,c]=J.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),d=e.find(E=>E.itemIds.includes(t.id));J.useEffect(()=>{c({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),J.useEffect(()=>{const E=T=>{T.key==="Escape"&&n()};return document.body.style.overflow="hidden",window.addEventListener("keydown",E),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",E)}},[n]);const h=E=>{const{name:T,value:C}=E.target;c(D=>({...D,[T]:C}))},y=E=>{E.preventDefault(),i({...t,...u})};return b.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:E=>E.stopPropagation(),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),b.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:b.jsx(WR,{})})]}),b.jsxs("form",{onSubmit:y,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[b.jsxs("div",{className:"space-y-4 flex-grow",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),b.jsx("textarea",{id:"analysis",name:"analysis",value:u.analysis,onChange:h,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),b.jsx("select",{id:"category",name:"category",value:u.category,onChange:h,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(E=>b.jsx("option",{value:E,children:E},E))})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),b.jsx("input",{type:"text",id:"color",name:"color",value:u.color,onChange:h,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),b.jsx("input",{type:"text",id:"material",name:"material",value:u.material,onChange:h,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),d&&b.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),b.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:d.name,children:d.name})]}),b.jsxs("button",{type:"button",onClick:()=>{a(d.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[b.jsx(H9,{}),b.jsx("span",{children:"Dissocier"})]})]})]}),b.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[b.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[b.jsx(e0,{}),"Crer une tenue avec cet article"]}),b.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},ex=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[s,a]=J.useState(3),[u,c]=J.useState(""),d=h=>{h.preventDefault();const y=u||"";y.trim()&&s>0&&n(s,y)};return b.jsxs("form",{onSubmit:d,className:"space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[b.jsxs("div",{className:"sm:col-span-1",children:[b.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),b.jsx("input",{id:"days",type:"number",value:s,onChange:h=>a(parseInt(h.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),b.jsxs("div",{className:"sm:col-span-2",children:[b.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),b.jsx("input",{id:"vacation-context",type:"text",value:u,onChange:h=>c(h.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),b.jsxs("button",{type:"submit",disabled:i||!(u||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(G9,{}),i?"Prparation...":"Gnrer la valise"]})]})},tx=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=s=>{const a=e.find(c=>c.id===s);return a||n.find(c=>c.id===s)};return b.jsx("div",{className:"mt-10",children:b.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[b.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),b.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,a)=>{const u=i(s.id),c=u?u.imageSrc:null;return b.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[c?b.jsx("img",{src:c,alt:s.description,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:b.jsx(jR,{})}),b.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:b.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},a)})}),b.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,a)=>b.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},a))})]})})},Q9=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,s]=J.useState(!1),a=u=>{const c=Array.from(u.target.files||[]);c.length>0&&(t(c),s(!1))};return b.jsxs(b.Fragment,{children:[!n&&b.jsx("button",{onClick:()=>s(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?b.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):b.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),i&&b.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>s(!1),children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:u=>u.stopPropagation(),children:[b.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),b.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:a,className:"hidden"}),b.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[b.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:b.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden"}),b.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[b.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-semibold",children:"Galerie"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),b.jsx("button",{onClick:()=>s(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},X9=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,isAnalyzingWardrobe:s,clothingCount:a})=>b.jsxs("div",{className:"space-y-4 pb-24",children:[b.jsxs("div",{className:"text-center py-6",children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[b.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a," vtement",a>1?"s":""," dans votre collection"]})]}),b.jsxs("div",{className:"space-y-3 px-4",children:[a>=3&&b.jsx("button",{onClick:t,disabled:s,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:s?b.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):b.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),b.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),b.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),b.jsx("div",{className:"px-4 pt-6",children:b.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[b.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),b.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[b.jsx("p",{className:"text-2xl font-bold text-gold",children:a}),b.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),b.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[b.jsx("div",{className:"text-green-500",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),b.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]})]})]})})]}),Z9=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return b.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:b.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(s=>{const a=t===s.id;return b.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[b.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&b.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),b.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:s.label})]},s.id)})})})},eB=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return b.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[b.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),b.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:b.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[b.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[b.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),b.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,a)=>b.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[b.jsx("span",{className:"text-green-500 mt-0.5",children:""}),b.jsx("span",{children:s})]},a))})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[b.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),b.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,a)=>b.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[b.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),b.jsx("span",{children:s})]},a))})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[b.jsx("span",{children:""})," Pices recommandes"]}),b.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,a)=>b.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[b.jsxs("div",{className:"flex justify-between items-start mb-3",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-lg",children:s.description}),b.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),b.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:i[s.priority]})]}),b.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[b.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),s.estimatedPrice&&b.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]})]},a))})]})]})]})})};var tB=nB()?J.useLayoutEffect:J.useEffect;function nB(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function iB(){var t=J.useState(Object.create(null)),e=t[1];return J.useCallback(function(){e(Object.create(null))},[])}var rB=Dw(),sB=function(e){var n=e.children,i=e.type,s=i===void 0?"reach-portal":i,a=J.useRef(null),u=J.useRef(null),c=iB();return tB(function(){if(a.current){var d=a.current.ownerDocument;return u.current=d==null?void 0:d.createElement(s),d.body.appendChild(u.current),c(),function(){u.current&&u.current.ownerDocument&&u.current.ownerDocument.body.removeChild(u.current)}}},[s,c]),u.current?rB.createPortal(n,u.current):J.createElement("span",{ref:a})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var me=function(){return me=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},me.apply(this,arguments)};function t0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function st(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],u;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return a}function kt(t,e,n){if(arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var It;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(It||(It={}));var Vl;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Vl||(Vl={}));var My=It.Start,n0=It.Stop,$c=It.Raise,Ep=It.Send,nx=It.Cancel,oB=It.NullEvent,i0=It.Assign;It.After;It.DoneState;var ix=It.Log,aB=It.Init,Py=It.Invoke;It.ErrorExecution;var Gb=It.ErrorPlatform,lB=It.ErrorCustom,rx=It.Update,uB=It.Choose,cB=It.Pure,sx=".",Kb={},ky="xstate.guard",fB="",Rd;function r0(t,e,n){n===void 0&&(n=sx);var i=mc(t,n),s=mc(e,n);return yt(s)?yt(i)?s===i:!1:yt(i)?i in s:Object.keys(i).every(function(a){return a in s?r0(i[a],s[a]):!1})}function ox(t){try{return yt(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Ly(t,e){try{return Yl(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function dB(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function mc(t,e){if(dB(t))return t.value;if(Yl(t))return Lh(t);if(typeof t!="string")return t;var n=Ly(t,e);return Lh(n)}function Lh(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function ic(t,e){for(var n={},i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];n[a]=e(t[a],a,t,s)}return n}function Jb(t,e,n){var i,s,a={};try{for(var u=st(Object.keys(t)),c=u.next();!c.done;c=u.next()){var d=c.value,h=t[d];n(h)&&(a[d]=e(h,d,t))}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}return a}var hB=function(t){return function(e){var n,i,s=e;try{for(var a=st(t),u=a.next();!u.done;u=a.next()){var c=u.value;s=s[c]}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}};function pB(t,e){return function(n){var i,s,a=n;try{for(var u=st(t),c=u.next();!c.done;c=u.next()){var d=c.value;a=a[e][d]}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}return a}}function ih(t){if(!t)return[[]];if(yt(t))return[[t]];var e=Gt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:ih(t[n]).map(function(s){return[n].concat(s)})}));return e}function Gt(t){var e;return(e=[]).concat.apply(e,kt([],ft(t),!1))}function ax(t){return Yl(t)?t:[t]}function pr(t){return t===void 0?[]:ax(t)}function Vh(t,e,n){var i,s;if(mt(t))return t(e,n.data);var a={};try{for(var u=st(Object.keys(t)),c=u.next();!c.done;c=u.next()){var d=c.value,h=t[d];mt(h)?a[d]=h(e,n.data):a[d]=h}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}return a}function mB(t){return/^(done|error)\./.test(t)}function Yb(t){return!!(t instanceof Promise||t!==null&&(mt(t)||typeof t=="object")&&mt(t.then))}function gB(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function yB(t,e){var n,i,s=ft([[],[]],2),a=s[0],u=s[1];try{for(var c=st(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):u.push(h)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,u]}function lx(t,e){return ic(t.states,function(n,i){if(n){var s=(yt(e)?void 0:e[i])||(n?n.current:void 0);if(s)return{current:s,states:lx(n,s)}}})}function vB(t,e){return{current:e,states:lx(t,e)}}function $b(t,e,n,i){var s=t&&n.reduce(function(a,u){var c,d,h=u.assignment,y={state:i,action:u,_event:e},E={};if(mt(h))E=h(a,e.data,y);else try{for(var T=st(Object.keys(h)),C=T.next();!C.done;C=T.next()){var D=C.value,k=h[D];E[D]=mt(k)?k(a,e.data,y):k}}catch(U){c={error:U}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},a,E)},t);return s}var _B=function(){};function Yl(t){return Array.isArray(t)}function mt(t){return typeof t=="function"}function yt(t){return typeof t=="string"}function ux(t,e){if(t)return yt(t)?{type:ky,name:t,predicate:e?e[t]:void 0}:mt(t)?{type:ky,name:t.name,predicate:t}:t}function EB(t){try{return"subscribe"in t&&mt(t.subscribe)}catch{return!1}}var ao=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Rd={},Rd[ao]=function(){return this},Rd[Symbol.observable]=function(){return this};function Ol(t){return!!t&&"__xstatenode"in t}function TB(t){return!!t&&typeof t.send=="function"}function Tp(t,e){return yt(t)||typeof t=="number"?me({type:t},e):t}function Fn(t,e){if(!yt(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Tp(t);return me({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function al(t,e){var n=ax(e).map(function(i){return typeof i>"u"||typeof i=="string"||Ol(i)?{target:i,event:t}:me(me({},i),{event:t})});return n}function SB(t){if(!(t===void 0||t===fB))return pr(t)}function cx(t,e,n,i,s){var a=t.options.guards,u={state:s,cond:e,_event:i};if(e.type===ky)return((a==null?void 0:a[e.name])||e.predicate)(n,i.data,u);var c=a==null?void 0:a[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,u)}function fx(t){return typeof t=="string"?{type:t}:t}function rh(t,e,n){var i=function(){},s=typeof t=="object",a=s?t:null;return{next:((s?t.next:t)||i).bind(a),error:((s?t.error:e)||i).bind(a),complete:((s?t.complete:n)||i).bind(a)}}function xd(t,e){return"".concat(t,":invocation[").concat(e,"]")}function Vy(t){return(t.type===$c||t.type===Ep&&t.to===Vl.Internal)&&typeof t.delay!="number"}var Rl=Fn({type:aB});function Oy(t,e){return e&&e[t]||void 0}function kc(t,e){var n;if(yt(t)||typeof t=="number"){var i=Oy(t,e);mt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(mt(t))n={type:t.name||t.toString(),exec:t};else{var i=Oy(t.type,e);if(mt(i))n=me(me({},t),{exec:i});else if(i){var s=i.type||t.type;n=me(me(me({},i),t),{type:s})}else n=t}return n}var lo=function(t,e){if(!t)return[];var n=Yl(t)?t:[t];return n.map(function(i){return kc(i,e)})};function s0(t){var e=kc(t);return me(me({id:yt(t)?t:e.id},e),{type:e.type})}function AB(t,e){return{type:$c,event:typeof t=="function"?t:Tp(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function bB(t,e,n,i){var s={_event:n},a=Fn(mt(t.event)?t.event(e,n.data,s):t.event),u;if(yt(t.delay)){var c=i&&i[t.delay];u=mt(c)?c(e,n.data,s):c}else u=mt(t.delay)?t.delay(e,n.data,s):t.delay;return me(me({},t),{type:$c,_event:a,delay:u})}function wB(t,e){return{to:e?e.to:void 0,type:Ep,event:mt(t)?t:Tp(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:mt(t)?t.name:ox(t)}}function CB(t,e,n,i){var s={_event:n},a=Fn(mt(t.event)?t.event(e,n.data,s):t.event),u;if(yt(t.delay)){var c=i&&i[t.delay];u=mt(c)?c(e,n.data,s):c}else u=mt(t.delay)?t.delay(e,n.data,s):t.delay;var d=mt(t.to)?t.to(e,n.data,s):t.to;return me(me({},t),{to:d,_event:a,event:a.data,delay:u})}var IB=function(t,e,n){return me(me({},t),{value:yt(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},RB=function(t){return{type:nx,sendId:t}};function xB(t){var e=s0(t);return{type:It.Start,activity:e,exec:void 0}}function NB(t){var e=mt(t)?t:s0(t);return{type:It.Stop,activity:e,exec:void 0}}function DB(t,e,n){var i=mt(t.activity)?t.activity(e,n.data):t.activity,s=typeof i=="string"?{id:i}:i,a={type:It.Stop,activity:s};return a}var MB=function(t){return{type:i0,assignment:t}};function PB(t,e){var n=e?"#".concat(e):"";return"".concat(It.After,"(").concat(t,")").concat(n)}function Nd(t,e){var n="".concat(It.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function sh(t,e){var n="".concat(It.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function rc(t,e){var n="".concat(It.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var kB=function(t){var e,n,i=[];try{for(var s=st(t),a=s.next();!a.done;a=s.next())for(var u=a.value,c=0;c<u.actions.length;){if(u.actions[c].type===i0){i.push(u.actions[c]),u.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i};function Oh(t,e,n,i,s,a,u){u===void 0&&(u=!1);var c=u?[]:kB(s),d=c.length?$b(n,i,c,e):n,h=u?[n]:void 0,y=[];function E(D,k){var U;switch(k.type){case $c:{var H=bB(k,d,i,t.options.delays);return a&&typeof H.delay=="number"&&a(H,d,i),H}case Ep:var F=CB(k,d,i,t.options.delays);return a&&F.to!==Vl.Internal&&(D==="entry"?y.push(F):a(F,d,i)),F;case ix:{var B=IB(k,d,i);return a==null||a(B,d,i),B}case uB:{var Y=k,X=(U=Y.conds.find(function(te){var ue=ux(te.cond,t.options.guards);return!ue||cx(t,ue,d,i,a?void 0:e)}))===null||U===void 0?void 0:U.actions;if(!X)return[];var G=ft(Oh(t,e,d,i,[{type:D,actions:lo(pr(X),t.options.actions)}],a,u),2),I=G[0],R=G[1];return d=R,h==null||h.push(d),I}case cB:{var X=k.get(d,i.data);if(!X)return[];var x=ft(Oh(t,e,d,i,[{type:D,actions:lo(pr(X),t.options.actions)}],a,u),2),L=x[0],M=x[1];return d=M,h==null||h.push(d),L}case n0:{var B=DB(k,d,i);return a==null||a(B,n,i),B}case i0:{d=$b(d,i,[k],a?void 0:e),h==null||h.push(d);break}default:var V=kc(k,t.options.actions),O=V.exec;if(a)a(V,d,i);else if(O&&h){var Ce=h.length-1,ve=me(me({},V),{exec:function(te){for(var ue=[],pe=1;pe<arguments.length;pe++)ue[pe-1]=arguments[pe];O.apply(void 0,kt([h[Ce]],ft(ue),!1))}});V=ve}return V}}function T(D){var k,U,H=[];try{for(var F=st(D.actions),B=F.next();!B.done;B=F.next()){var Y=B.value,X=E(D.type,Y);X&&(H=H.concat(X))}}catch(G){k={error:G}}finally{try{B&&!B.done&&(U=F.return)&&U.call(F)}finally{if(k)throw k.error}}return y.forEach(function(G){a(G,d,i)}),y.length=0,H}var C=Gt(s.map(T));return[C,d]}var gl=function(t,e){var n=e(t);return n};function dx(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[ao]=function(){return this},e}function LB(t,e,n,i){var s,a=fx(t.src),u=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[a.type],c=t.data?Vh(t.data,n,i):void 0,d=u?hx(u,t.id,c):dx(t.id);return d.meta=t,d}function hx(t,e,n){var i=dx(e);if(i.deferred=!0,Ol(t)){var s=i.state=gl(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return s}}return i}function VB(t){try{return typeof t.send=="function"}catch{return!1}}function OB(t){return VB(t)&&"id"in t}function UB(t){var e;return me((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[ao]=function(){return this},e),t)}var Uh=function(t){return t.type==="atomic"||t.type==="final"};function px(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Lc(t){return px(t).filter(function(e){return e.type!=="history"})}function mx(t){var e=[t];return Uh(t)?e:e.concat(Gt(Lc(t).map(mx)))}function sc(t,e){var n,i,s,a,u,c,d,h,y=new Set(t),E=Uy(y),T=new Set(e);try{for(var C=st(T),D=C.next();!D.done;D=C.next())for(var k=D.value,U=k.parent;U&&!T.has(U);)T.add(U),U=U.parent}catch(x){n={error:x}}finally{try{D&&!D.done&&(i=C.return)&&i.call(C)}finally{if(n)throw n.error}}var H=Uy(T);try{for(var F=st(T),B=F.next();!B.done;B=F.next()){var k=B.value;if(k.type==="compound"&&(!H.get(k)||!H.get(k).length))E.get(k)?E.get(k).forEach(function(L){return T.add(L)}):k.initialStateNodes.forEach(function(L){return T.add(L)});else if(k.type==="parallel")try{for(var Y=(u=void 0,st(Lc(k))),X=Y.next();!X.done;X=Y.next()){var G=X.value;T.has(G)||(T.add(G),E.get(G)?E.get(G).forEach(function(L){return T.add(L)}):G.initialStateNodes.forEach(function(L){return T.add(L)}))}}catch(L){u={error:L}}finally{try{X&&!X.done&&(c=Y.return)&&c.call(Y)}finally{if(u)throw u.error}}}}catch(x){s={error:x}}finally{try{B&&!B.done&&(a=F.return)&&a.call(F)}finally{if(s)throw s.error}}try{for(var I=st(T),R=I.next();!R.done;R=I.next())for(var k=R.value,U=k.parent;U&&!T.has(U);)T.add(U),U=U.parent}catch(x){d={error:x}}finally{try{R&&!R.done&&(h=I.return)&&h.call(I)}finally{if(d)throw d.error}}return T}function gx(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Uh(i))return i.key}else return{}}var s={};return n.forEach(function(a){s[a.key]=gx(a,e)}),s}function Uy(t){var e,n,i=new Map;try{for(var s=st(t),a=s.next();!a.done;a=s.next()){var u=a.value;i.has(u)||i.set(u,[]),u.parent&&(i.has(u.parent)||i.set(u.parent,[]),i.get(u.parent).push(u))}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}function FB(t,e){var n=sc([t],e);return gx(t,Uy(n))}function oc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function BB(t){return kt([],ft(new Set(Gt(kt([],ft(t.map(function(e){return e.ownEvents})),!1)))),!1)}function oh(t,e){return e.type==="compound"?Lc(e).some(function(n){return n.type==="final"&&oc(t,n)}):e.type==="parallel"?Lc(e).every(function(n){return oh(t,n)}):!1}function qB(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function jb(t){return new Set(Gt(t.map(function(e){return e.tags})))}function yx(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(yt(t)||yt(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(s){return yx(t[s],e[s])})}function zB(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function HB(t,e){var n=t.exec,i=me(me({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var tr=(function(){function t(e){var n=this,i;this.actions=[],this.activities=Kb,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Kb,this.meta=qB(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return BB(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=Rl;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=Rl;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),yt(e))return[e];var s=Object.keys(e);return s.concat.apply(s,kt([],ft(s.map(function(a){return i.toStrings(e[a],n).map(function(u){return a+n+u})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=t0(e,["configuration","transitions","tags","machine"]);return me(me({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return r0(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;_B(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),GB={deferEvents:!1},Wb=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=me(me({},GB),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),zg=new Map,KB=0,Ju={bookId:function(){return"x:".concat(KB++)},register:function(t,e){return zg.set(t,e),t},get:function(t){return zg.get(t)},free:function(t){zg.delete(t)}};function o0(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function JB(){var t=o0();if(t&&"__xstate__"in t)return t.__xstate__}function YB(t){if(o0()){var e=JB();e&&e.register(t)}}function $B(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,s=[],a=!1,u=function(){if(!a){for(a=!0;s.length>0;){var h=s.shift();n=t.transition(n,h,d),i.forEach(function(y){return y.next(n)})}a=!1}},c=UB({id:e.id,send:function(h){s.push(h),u()},getSnapshot:function(){return n},subscribe:function(h,y,E){var T=rh(h,y,E);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var jB={sync:!1,autoForward:!1},xn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(xn||(xn={}));var WB=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=xn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(y,E){if(Yl(y))return i.batch(y),i.state;var T=Fn(Tp(y,E));if(i.status===xn.Stopped)return i.state;if(i.status!==xn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var C=i._nextState(T);i.update(C,T)}),i._state},this.sendTo=function(y,E,T){var C=i.parent&&(E===Vl.Parent||i.parent.id===E),D=C?i.parent:yt(E)?E===Vl.Internal?i:i.children.get(E)||Ju.get(E):TB(E)?E:void 0;if(!D){if(!C)throw new Error("Unable to send event to child '".concat(E,"' from service '").concat(i.id,"'."));return}if("machine"in D){if(i.status!==xn.Stopped||i.parent!==D||i.state.done){var k=me(me({},y),{name:y.name===lB?"".concat(rc(i.id)):y.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([D,k]):D.send(k)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([D,y.data]):D.send(y.data)},this._exec=function(y,E,T,C){C===void 0&&(C=i.machine.options.actions);var D=y.exec||Oy(y.type,C),k=mt(D)?D:D?D.exec:y.exec;if(k)try{return k(E,T.data,i.machine.config.predictableActionArguments?{action:y,_event:T}:{action:y,state:i.state,_event:T})}catch(Ce){throw i.parent&&i.parent.send({type:"xstate.error",data:Ce}),Ce}switch(y.type){case $c:{var U=y;i.defer(U);break}case Ep:var H=y;if(typeof H.delay=="number"){i.defer(H);return}else H.to?i.sendTo(H._event,H.to,T===Rl):i.send(H._event);break;case nx:i.cancel(y.sendId);break;case My:{if(i.status!==xn.Running)return;var F=y.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[F.id||F.type])break;if(F.type===It.Invoke){var B=fx(F.src),Y=i.machine.options.services?i.machine.options.services[B.type]:void 0,X=F.id,G=F.data,I="autoForward"in F?F.autoForward:!!F.forward;if(!Y)return;var R=G?Vh(G,E,T):void 0;if(typeof Y=="string")return;var x=mt(Y)?Y(E,T.data,{data:R,src:B,meta:F.meta}):Y;if(!x)return;var L=void 0;Ol(x)&&(x=R?x.withContext(R):x,L={autoForward:I}),i.spawn(x,X,L)}else i.spawnActivity(F);break}case n0:{i.stopChild(y.activity.id);break}case ix:var M=y,V=M.label,O=M.value;V?i.logger(V,O):i.logger(O);break}};var s=me(me({},t.defaultOptions),n),a=s.clock,u=s.logger,c=s.parent,d=s.id,h=d!==void 0?d:e.id;this.id=h,this.logger=u,this.clock=a,this.parent=c,this.options=s,this.scheduler=new Wb({deferEvents:this.options.deferEvents}),this.sessionId=Ju.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:gl(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,s;try{for(var a=st(e.actions),u=a.next();!u.done;u=a.next()){var c=u.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,s,a,u,c,d,h,y,E=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===Rl)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(x){E.state.children[x.id]=x}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var C=st(this.eventListeners),D=C.next();!D.done;D=C.next()){var k=D.value;k(e.event)}}catch(x){i={error:x}}finally{try{D&&!D.done&&(s=C.return)&&s.call(C)}finally{if(i)throw i.error}}try{for(var U=st(this.listeners),H=U.next();!H.done;H=U.next()){var k=H.value;k(e,e.event)}}catch(x){a={error:x}}finally{try{H&&!H.done&&(u=U.return)&&u.call(U)}finally{if(a)throw a.error}}try{for(var F=st(this.contextListeners),B=F.next();!B.done;B=F.next()){var Y=B.value;Y(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(x){c={error:x}}finally{try{B&&!B.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(this.state.done){var X=e.configuration.find(function(x){return x.type==="final"&&x.parent===E.machine}),G=X&&X.doneData?Vh(X.doneData,e.context,n):void 0;this._doneEvent=sh(this.id,G);try{for(var I=st(this.doneListeners),R=I.next();!R.done;R=I.next()){var k=R.value;k(this._doneEvent)}}catch(x){h={error:x}}finally{try{R&&!R.done&&(y=I.return)&&y.call(I)}finally{if(h)throw h.error}}this._stop(),this._stopChildren(),Ju.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===xn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var s=this,a=rh(e,n,i);this.listeners.add(a.next),this.status!==xn.NotStarted&&a.next(this.state);var u=function(){s.doneListeners.delete(u),s.stopListeners.delete(u),a.complete()};return this.status===xn.Stopped?a.complete():(this.onDone(u),this.onStop(u)),{unsubscribe:function(){s.listeners.delete(a.next),s.doneListeners.delete(u),s.stopListeners.delete(u)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===xn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===xn.Running)return this;this.machine._init(),Ju.register(this.sessionId,this),this.initialized=!0,this.status=xn.Running;var i=e===void 0?this.initialState:gl(this,function(){return zB(e)?n.machine.resolveState(e):n.machine.resolveState(tr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,Rl)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){mt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,s,a,u,c,d,h,y;try{for(var E=st(this.listeners),T=E.next();!T.done;T=E.next()){var C=T.value;this.listeners.delete(C)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=E.return)&&n.call(E)}finally{if(e)throw e.error}}try{for(var D=st(this.stopListeners),k=D.next();!k.done;k=D.next()){var C=k.value;C(),this.stopListeners.delete(C)}}catch(I){i={error:I}}finally{try{k&&!k.done&&(s=D.return)&&s.call(D)}finally{if(i)throw i.error}}try{for(var U=st(this.contextListeners),H=U.next();!H.done;H=U.next()){var C=H.value;this.contextListeners.delete(C)}}catch(I){a={error:I}}finally{try{H&&!H.done&&(u=U.return)&&u.call(U)}finally{if(a)throw a.error}}try{for(var F=st(this.doneListeners),B=F.next();!B.done;B=F.next()){var C=B.value;this.doneListeners.delete(C)}}catch(I){c={error:I}}finally{try{B&&!B.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=xn.Stopped,this._initialState=void 0;try{for(var Y=st(Object.keys(this.delayedEventsMap)),X=Y.next();!X.done;X=Y.next()){var G=X.value;this.clock.clearTimeout(this.delayedEventsMap[G])}}catch(I){h={error:I}}finally{try{X&&!X.done&&(y=Y.return)&&y.call(Y)}finally{if(h)throw h.error}}this.scheduler.clear(),this.scheduler=new Wb({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var s=Fn({type:"xstate.stop"}),a=gl(e,function(){var u=Gt(kt([],ft(e.state.configuration),!1).sort(function(E,T){return T.order-E.order}).map(function(E){return lo(E.onExit,e.machine.options.actions)})),c=ft(Oh(e.machine,e.state,e.state.context,s,[{type:"exit",actions:u}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],h=c[1],y=new tr({value:e.state.value,context:h,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(E){return!Vy(E)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return y.changed=!0,y});e.update(a,s),e._stopChildren(),Ju.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===xn.NotStarted&&this.options.deferEvents)){if(this.status!==xn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,a,u=n.state,c=!1,d=[],h=function(C){var D=Fn(C);n.forward(D),u=gl(n,function(){return n.machine.transition(u,D,void 0,i||void 0)}),d.push.apply(d,kt([],ft(n.machine.config.predictableActionArguments?u.actions:u.actions.map(function(k){return HB(k,u)})),!1)),c=c||!!u.changed};try{for(var y=st(e),E=y.next();!E.done;E=y.next()){var T=E.value;h(T)}}catch(C){s={error:C}}finally{try{E&&!E.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}u.changed=c,u.actions=d,n.update(u,Fn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=Fn(e);if(s.name.indexOf(Gb)===0&&!this.state.nextEvents.some(function(u){return u.indexOf(Gb)===0}))throw s.data.data;var a=gl(this,function(){return i.machine.transition(i.state,s,void 0,n||void 0)});return a},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var s=st(this.forwardTo),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.children.get(u);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(u,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),mt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==xn.Running)return hx(e,n);if(Yb(e))return this.spawnPromise(Promise.resolve(e),n);if(mt(e))return this.spawnCallback(e,n);if(OB(e))return this.spawnActor(e,n);if(EB(e))return this.spawnObservable(e,n);if(Ol(e))return this.spawnMachine(e,me(me({},i),{id:n}));if(gB(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var s=new t(e,me(me({},this.options),{parent:this,id:n.id||e.id})),a=me(me({},jB),n);a.sync&&s.onTransition(function(c){i.send(rx,{state:c,id:s.id})});var u=s;return this.children.set(s.id,u),a.autoForward&&this.forwardTo.add(s.id),s.onDone(function(c){i.removeChild(s.id),i.send(Fn(c,{origin:s.id}))}).start(),u},t.prototype.spawnBehavior=function(e,n){var i=$B(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,s=this,a=!1,u;e.then(function(d){a||(u=d,s.removeChild(n),s.send(Fn(sh(n,d),{origin:n})))},function(d){if(!a){s.removeChild(n);var h=rc(n,d);try{s.send(Fn(h,{origin:n}))}catch{s.devTools&&s.devTools.send(h,s.state),s.machine.strict&&s.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,h,y){var E=rh(d,h,y),T=!1;return e.then(function(C){T||(E.next(C),!T&&E.complete())},function(C){T||E.error(C)}),{unsubscribe:function(){return T=!0}}},stop:function(){a=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return u}},i[ao]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,s=this,a=!1,u=new Set,c=new Set,d,h=function(T){d=T,c.forEach(function(C){return C(T)}),!a&&s.send(Fn(T,{origin:n}))},y;try{y=e(h,function(T){u.add(T)})}catch(T){this.send(rc(n,T))}if(Yb(y))return this.spawnPromise(y,n);var E=(i={id:n,send:function(T){return u.forEach(function(C){return C(T)})},subscribe:function(T){var C=rh(T);return c.add(C.next),{unsubscribe:function(){c.delete(C.next)}}},stop:function(){a=!0,mt(y)&&y()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[ao]=function(){return this},i);return this.children.set(n,E),E},t.prototype.spawnObservable=function(e,n){var i,s=this,a,u=e.subscribe(function(d){a=d,s.send(Fn(d,{origin:n}))},function(d){s.removeChild(n),s.send(Fn(rc(n,d),{origin:n}))},function(){s.removeChild(n),s.send(Fn(sh(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,h,y){return e.subscribe(d,h,y)},stop:function(){return u.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:n}}},i[ao]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[ao]=function(){return this},i))},t.prototype.attachDev=function(){var e=o0();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(me(me({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:me({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}YB(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[ao]=function(){return this},t.prototype.getSnapshot=function(){return this.status===xn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=vx,t})();function vx(t,e){var n=new WB(t,e);return n}function QB(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Dd(t){return me(me({type:Py},t),{toJSON:function(){t.onDone,t.onError;var e=t0(t,["onDone","onError"]);return me(me({},e),{type:Py,src:QB(t.src)})}})}var Md="",Fy="#",Hg="*",ll={},ul=function(t){return t[0]===Fy},XB=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},ZB=(function(){function t(e,n,i,s){i===void 0&&(i="context"in e?e.context:void 0);var a=this,u;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(XB(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:sx),this.id=this.config.id||kt([this.machine.key],ft(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(u=this.config.schema)!==null&&u!==void 0?u:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?ic(this.config.states,function(h,y){var E,T=new t(h,{},void 0,{parent:a,key:y});return Object.assign(a.idMap,me((E={},E[T.id]=T,E),T.idMap)),T}):ll;var c=0;function d(h){var y,E;h.order=c++;try{for(var T=st(px(h)),C=T.next();!C.done;C=T.next()){var D=C.value;d(D)}}catch(k){y={error:k}}finally{try{C&&!C.done&&(E=T.return)&&E.call(T)}finally{if(y)throw y.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(h){var y=h.event;return y===Md}):Md in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=pr(this.config.entry||this.config.onEntry).map(function(h){return kc(h)}),this.onExit=pr(this.config.exit||this.config.onExit).map(function(h){return kc(h)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=pr(this.config.invoke).map(function(h,y){var E,T;if(Ol(h)){var C=xd(a.id,y);return a.machine.options.services=me((E={},E[C]=h,E),a.machine.options.services),Dd({src:C,id:C})}else if(yt(h.src)){var C=h.id||xd(a.id,y);return Dd(me(me({},h),{id:C,src:h.src}))}else if(Ol(h.src)||mt(h.src)){var C=h.id||xd(a.id,y);return a.machine.options.services=me((T={},T[C]=h.src,T),a.machine.options.services),Dd(me(me({id:C},h),{src:C}))}else{var D=h.src;return Dd(me(me({id:xd(a.id,y)},h),{src:D}))}}),this.activities=pr(this.config.activities).concat(this.invoke).map(function(h){return s0(h)}),this.transition=this.transition.bind(this),this.tags=pr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||mx(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,s=i.actions,a=i.activities,u=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:me(me({},s),e.actions),activities:me(me({},a),e.activities),guards:me(me({},u),e.guards),services:me(me({},c),e.services),delays:me(me({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return mt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:ic(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Md,i=this.transitions.filter(function(s){var a=s.eventType===e;return n?a:a||s.eventType===Hg});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(a,u){var c=mt(a)?"".concat(e.id,":delay[").concat(u,"]"):a,d=PB(c,e.id);return e.onEntry.push(wB(d,{delay:a})),e.onExit.push(RB(d)),d},s=Yl(n)?n.map(function(a,u){var c=i(a.delay,u);return me(me({},a),{event:c})}):Gt(Object.keys(n).map(function(a,u){var c=n[a],d=yt(c)?{target:c}:c,h=isNaN(+a)?a:+a,y=i(h,u);return pr(d).map(function(E){return me(me({},E),{event:y,delay:h})})}));return s.map(function(a){var u=a.delay;return me(me({},e.formatTransition(a)),{delay:u})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var s=e instanceof tr?e.value:mc(e,this.delimiter);if(yt(s)){var a=this.getStateNode(s).initial;return a!==void 0?this.getStateNodes((n={},n[s]=a,n)):[this,this.states[s]]}var u=Object.keys(s),c=[this];return c.push.apply(c,kt([],ft(Gt(u.map(function(d){return i.getStateNode(d).getStateNodes(s[d])}))),!1)),c},t.prototype.handles=function(e){var n=ox(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof tr?e:tr.create(e),i=Array.from(sc([],this.getStateNodes(n.value)));return new tr(me(me({},n),{value:this.resolve(n.value),configuration:i,done:oh(i,this),tags:jb(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var s=this.getStateNode(e),a=s.next(n,i);return!a||!a.transitions.length?this.next(n,i):a},t.prototype.transitionCompoundNode=function(e,n,i){var s=Object.keys(e),a=this.getStateNode(s[0]),u=a._transition(e[s[0]],n,i);return!u||!u.transitions.length?this.next(n,i):u},t.prototype.transitionParallelNode=function(e,n,i){var s,a,u={};try{for(var c=st(Object.keys(e)),d=c.next();!d.done;d=c.next()){var h=d.value,y=e[h];if(y){var E=this.getStateNode(h),T=E._transition(y,n,i);T&&(u[h]=T)}}}catch(H){s={error:H}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}var C=Object.keys(u).map(function(H){return u[H]}),D=Gt(C.map(function(H){return H.transitions})),k=C.some(function(H){return H.transitions.length>0});if(!k)return this.next(n,i);var U=Gt(Object.keys(u).map(function(H){return u[H].configuration}));return{transitions:D,exitSet:Gt(C.map(function(H){return H.exitSet})),configuration:U,source:n,actions:Gt(Object.keys(u).map(function(H){return u[H].actions}))}},t.prototype._transition=function(e,n,i){return yt(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Fn(n))},t.prototype.next=function(e,n){var i,s,a=this,u=n.name,c=[],d=[],h;try{for(var y=st(this.getCandidates(u)),E=y.next();!E.done;E=y.next()){var T=E.value,C=T.cond,D=T.in,k=e.context,U=D?yt(D)&&ul(D)?e.matches(mc(this.getStateNodeById(D).path,this.delimiter)):r0(mc(D,this.delimiter),hB(this.path.slice(0,-2))(e.value)):!0,H=!1;try{H=!C||cx(this.machine,C,k,n,e)}catch(Y){throw new Error("Unable to evaluate guard '".concat(C.name||C.type,"' in transition for event '").concat(u,"' in state node '").concat(this.id,`':
`).concat(Y.message))}if(H&&U){T.target!==void 0&&(d=T.target),c.push.apply(c,kt([],ft(T.actions),!1)),h=T;break}}}catch(Y){i={error:Y}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(h){if(!d.length)return{transitions:[h],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var F=Gt(d.map(function(Y){return a.getRelativeStateNodes(Y,e.historyValue)})),B=!!h.internal;return{transitions:[h],exitSet:B?[]:Gt(d.map(function(Y){return a.getPotentiallyReenteringNodes(Y)})),configuration:F,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,s=e;i&&i!==s;)n.push(i),i=i.parent;return i!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,i,s,a,u,c){var d,h,y,E,T=this,C=u?sc([],this.getStateNodes(u.value)):[],D=new Set;try{for(var k=st(Array.from(e).sort(function(M,V){return M.order-V.order})),U=k.next();!U.done;U=k.next()){var H=U.value;(!oc(C,H)||oc(i.exitSet,H)||H.parent&&D.has(H.parent))&&D.add(H)}}catch(M){d={error:M}}finally{try{U&&!U.done&&(h=k.return)&&h.call(k)}finally{if(d)throw d.error}}try{for(var F=st(C),B=F.next();!B.done;B=F.next()){var H=B.value;(!oc(e,H)||oc(i.exitSet,H.parent))&&i.exitSet.push(H)}}catch(M){y={error:M}}finally{try{B&&!B.done&&(E=F.return)&&E.call(F)}finally{if(y)throw y.error}}i.exitSet.sort(function(M,V){return V.order-M.order});var Y=Array.from(D).sort(function(M,V){return M.order-V.order}),X=new Set(i.exitSet),G=Gt(Y.map(function(M){var V=[];if(M.type!=="final")return V;var O=M.parent;if(!O.parent)return V;V.push(Nd(M.id,M.doneData),Nd(O.id,M.doneData?Vh(M.doneData,s,a):void 0));var Ce=O.parent;return Ce.type==="parallel"&&Lc(Ce).every(function(ve){return oh(i.configuration,ve)})&&V.push(Nd(Ce.id)),V})),I=Y.map(function(M){var V=M.onEntry,O=M.activities.map(function(Ce){return xB(Ce)});return{type:"entry",actions:lo(c?kt(kt([],ft(V),!1),ft(O),!1):kt(kt([],ft(O),!1),ft(V),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:G.map(function(M){return AB(M)})}),R=Array.from(X).map(function(M){return{type:"exit",actions:lo(kt(kt([],ft(M.onExit),!1),ft(M.activities.map(function(V){return NB(V)})),!1),T.machine.options.actions)}}),x=R.concat({type:"transition",actions:lo(i.actions,this.machine.options.actions)}).concat(I);if(n){var L=lo(Gt(kt([],ft(e),!1).sort(function(M,V){return V.order-M.order}).map(function(M){return M.onExit})),this.machine.options.actions).filter(function(M){return!Vy(M)});return x.concat({type:"stop",actions:L})}return x},t.prototype.transition=function(e,n,i,s){e===void 0&&(e=this.initialState);var a=Fn(n),u;if(e instanceof tr)u=i===void 0?e:this.resolveState(tr.from(e,i));else{var c=yt(e)?this.resolve(Lh(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;u=this.resolveState(tr.from(c,d))}if(this.strict&&!this.events.includes(a.name)&&!mB(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var h=this._transition(u.value,u,a)||{transitions:[],configuration:[],exitSet:[],source:u,actions:[]},y=sc([],this.getStateNodes(u.value)),E=h.configuration.length?sc(y,h.configuration):y;return h.configuration=kt([],ft(E),!1),this.resolveTransition(h,u,u.context,s,a)},t.prototype.resolveRaisedTransition=function(e,n,i,s){var a,u=e.actions;return e=this.transition(e,n,void 0,s),e._event=i,e.event=i.data,(a=e.actions).unshift.apply(a,kt([],ft(u),!1)),e},t.prototype.resolveTransition=function(e,n,i,s,a){var u,c,d,h,y=this;a===void 0&&(a=Rl);var E=e.configuration,T=!n||e.transitions.length>0,C=T?e.configuration:n?n.configuration:[],D=oh(C,this),k=T?FB(this.machine,E):void 0,U=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,H=this.getActions(new Set(C),D,e,i,a,n,s),F=n?me({},n.activities):{};try{for(var B=st(H),Y=B.next();!Y.done;Y=B.next()){var X=Y.value;try{for(var G=(d=void 0,st(X.actions)),I=G.next();!I.done;I=G.next()){var R=I.value;R.type===My?F[R.activity.id||R.activity.type]=R:R.type===n0&&(F[R.activity.id||R.activity.type]=!1)}}catch(he){d={error:he}}finally{try{I&&!I.done&&(h=G.return)&&h.call(G)}finally{if(d)throw d.error}}}}catch(he){u={error:he}}finally{try{Y&&!Y.done&&(c=B.return)&&c.call(B)}finally{if(u)throw u.error}}var x=ft(Oh(this,n,i,a,H,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),L=x[0],M=x[1],V=ft(yB(L,Vy),2),O=V[0],Ce=V[1],ve=L.filter(function(he){var Ae;return he.type===My&&((Ae=he.activity)===null||Ae===void 0?void 0:Ae.type)===Py}),te=ve.reduce(function(he,Ae){return he[Ae.activity.id]=LB(Ae.activity,y.machine,M,a),he},n?me({},n.children):{}),ue=new tr({value:k||n.value,context:M,_event:a,_sessionid:n?n._sessionid:null,historyValue:k?U?vB(U,k):void 0:n?n.historyValue:void 0,history:!k||e.source?n:void 0,actions:k?Ce:[],activities:k?F:n?n.activities:{},events:[],configuration:C,transitions:e.transitions,children:te,done:D,tags:jb(C),machine:this}),pe=i!==M;ue.changed=a.name===rx||pe;var Re=ue.history;Re&&delete Re.history;var ge=!D&&(this._transient||E.some(function(he){return he._transient}));if(!T&&(!ge||a.name===Md))return ue;var q=ue;if(!D)for(ge&&(q=this.resolveRaisedTransition(q,{type:oB},a,s));O.length;){var ee=O.shift();q=this.resolveRaisedTransition(q,ee._event,a,s)}var fe=q.changed||(Re?!!q.actions.length||pe||typeof Re.value!=typeof q.value||!yx(q.value,Re.value):void 0);return q.changed=fe,q.history=Re,q},t.prototype.getStateNode=function(e){if(ul(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=ul(e)?e.slice(Fy.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&ul(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=Ly(e,this.delimiter).slice(),i=this;n.length;){var s=n.shift();if(!s.length)break;i=i.getStateNode(s)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||ll;switch(this.type){case"parallel":return ic(this.initialStateValue,function(a,u){return a?i.getStateNode(u).resolve(e[u]||a):ll});case"compound":if(yt(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?ic(e,function(a,u){return a?i.getStateNode(u).resolve(a):ll}):this.initialStateValue||{};default:return e||ll}},t.prototype.getResolvedPath=function(e){if(ul(e)){var n=this.machine.idMap[e.slice(Fy.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return Ly(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Jb(this.states,function(i){return i.initialStateValue||ll},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Uh(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;yt(n.target)?e=ul(n.target)?Lh(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Uh(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=ih(this.initialStateValue);return Gt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=ft(e),i=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var a=this.getStateNode(i);if(a.type==="history")return a.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Jb(this.states,function(n,i){if(!e)return n.historyValue();var s=yt(e)?void 0:e[i];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var s=this.target;return s?Gt(ih(s).map(function(u){return i.getFromRelativePath(u)})):i.initialStateNodes}var a=pB(i.path,"states")(e).current;return yt(a)?[i.getStateNode(a)]:Gt(ih(a).map(function(u){return n.history==="deep"?i.getFromRelativePath(u):[i.states[u[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Gt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,s;if(this.__cache.events)return this.__cache.events;var a=this.states,u=new Set(this.ownEvents);if(a)try{for(var c=st(Object.keys(a)),d=c.next();!d.done;d=c.next()){var h=d.value,y=a[h];if(y.states)try{for(var E=(i=void 0,st(y.events)),T=E.next();!T.done;T=E.next()){var C=T.value;u.add("".concat(C))}}catch(D){i={error:D}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}}}catch(D){e={error:D}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!yt(i))return i;var s=i[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(i.slice(1));var a=s?n.key+i:i;if(n.parent)try{var u=n.parent.getStateNodeByPath(a);return u}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(a)})},t.prototype.formatTransition=function(e){var n=this,i=SB(e.target),s="internal"in e?e.internal:i?i.some(function(d){return yt(d)&&d[0]===n.delimiter}):!0,a=this.machine.options.guards,u=this.resolveTarget(i),c=me(me({},e),{actions:lo(pr(e.actions)),cond:ux(e.cond,a),target:u,source:this,internal:s,eventType:e.event,toJSON:function(){return me(me({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var a=this.config.on,u=Hg,c=a[u],d=c===void 0?[]:c,h=t0(a,[typeof u=="symbol"?u:u+""]);s=Gt(Object.keys(h).map(function(F){var B=al(F,h[F]);return B}).concat(al(Hg,d)))}var y=this.config.always?al("",this.config.always):[],E=this.config.onDone?al(String(Nd(this.id)),this.config.onDone):[],T=Gt(this.invoke.map(function(F){var B=[];return F.onDone&&B.push.apply(B,kt([],ft(al(String(sh(F.id)),F.onDone)),!1)),F.onError&&B.push.apply(B,kt([],ft(al(String(rc(F.id)),F.onError)),!1)),B})),C=this.after,D=Gt(kt(kt(kt(kt([],ft(E),!1),ft(T),!1),ft(s),!1),ft(y),!1).map(function(F){return pr(F).map(function(B){return i.formatTransition(B)})}));try{for(var k=st(C),U=k.next();!U.done;U=k.next()){var H=U.value;D.push(H)}}catch(F){e={error:F}}finally{try{U&&!U.done&&(n=k.return)&&n.call(k)}finally{if(e)throw e.error}}return D},t})();function eq(t,e,n){return n===void 0&&(n=t.context),new ZB(t,e,n)}var tq=MB,By;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(By||(By={}));var gc=J.useLayoutEffect;function Qb(t){var e=J.useRef();return e.current||(e.current={v:t()}),e.current.v}var nq=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],u;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return a},iq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function rq(t,e){var n,i,s=nq([[],[]],2),a=s[0],u=s[1];try{for(var c=iq(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):u.push(h)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,u]}var Yu=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],u;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return a},Xb=function(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))};function Zb(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function sq(t){var e=J.useRef([]),n=J.useRef([]);gc(function(){var i=t.subscribe(function(s){var a,u;if(s.actions.length){var c=s.actions.filter(function(E){return typeof E.exec=="function"&&"__effect"in E.exec}),d=Yu(rq(c,function(E){return E.exec.__effect===By.Effect}),2),h=d[0],y=d[1];(a=e.current).push.apply(a,Xb([],Yu(h.map(function(E){return[E,s]})),!1)),(u=n.current).push.apply(u,Xb([],Yu(y.map(function(E){return[E,s]})),!1))}});return function(){i.unsubscribe()}},[]),gc(function(){for(;n.current.length;){var i=Yu(n.current.shift(),2),s=i[0],a=i[1];Zb(s,a)}}),J.useEffect(function(){for(;e.current.length;){var i=Yu(e.current.shift(),2),s=i[0],a=i[1];Zb(s,a)}})}var yc=function(){return yc=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},yc.apply(this,arguments)},oq=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function aq(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function lq(t,e,n){e===void 0&&(e={});var i=Qb(function(){return typeof t=="function"?t():t}),s=e.context,a=e.guards,u=e.actions,c=e.activities,d=e.services,h=e.delays,y=e.state,E=oq(e,["context","guards","actions","activities","services","delays","state"]),T=Qb(function(){var C={context:s,guards:a,actions:u,activities:c,services:d,delays:h},D=i.withConfig(C,function(){return yc(yc({},i.context),s)});return vx(D,yc({deferEvents:!0},E))});return gc(function(){var C;return n&&(C=T.subscribe(aq(n))),function(){C==null||C.unsubscribe()}},[n]),gc(function(){return T.start(y?tr.create(y):void 0),function(){T.stop()}},[]),gc(function(){Object.assign(T.machine.options.actions,u),Object.assign(T.machine.options.guards,a),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,h)},[u,a,c,d,h]),sq(T),T}var uq=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],u;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(u)throw u.error}}return a};function cq(t,e){e===void 0&&(e={});var n=J.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&u(c)},[]),i=lq(t,e,n),s=uq(J.useState(function(){var c=i.machine.initialState;return e.state?tr.create(e.state):c}),2),a=s[0],u=s[1];return[a,i.send,i]}function Wt(){return Wt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wt.apply(null,arguments)}function xl(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const Xe={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(Xe.str(t)||Xe.num(t))return t===e;if(Xe.obj(t)&&Xe.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return Xe.und(n)?t===e:!0}};function fq(t,e){return n=>(Xe.arr(n)?n:Object.keys(n)).reduce((i,s)=>{const a=s;return i[a]=t(a),i},t)}function dq(){const t=J.useState(!1),e=t[1];return J.useCallback(()=>e(i=>!i),[])}function ta(t,e){return Xe.und(t)||Xe.nul(t)?e:t}function Pd(t){return Xe.und(t)?[]:Xe.arr(t)?t:[t]}function vl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Xe.fun(t)?t(...n):t}function hq(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,xl(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Gg(t){const e=hq(t);if(Xe.und(e))return Wt({to:e},t);const n=Object.keys(t).reduce((i,s)=>Xe.und(e[s])?Wt({},i,{[s]:t[s]}):i,{});return Wt({to:e},n)}function pq(t,e){return e&&(Xe.fun(e)?e(t):Xe.obj(e)&&(e.current=t)),t}class mr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class qy extends mr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof mr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof mr&&e.removeChild(this))}}class _x extends mr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof mr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof mr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const s=this.payload[i];e&&!(s instanceof mr)||(n[i]=s instanceof mr?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let a0;function mq(t,e){a0={fn:t,transform:e}}let Ex;function gq(t){Ex=t}let Tx=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Fh;function yq(t){Fh=t}let Sx=()=>Date.now(),vq=t=>t.current,Ax;function _q(t){Ax=t}class Eq extends _x{constructor(e,n){super(),this.update=void 0,this.payload=e.style?Wt({},e,{style:Ax(e.style)}):e,this.update=n,this.attach()}}const Tq=t=>Xe.fun(t)&&!(t.prototype instanceof _n.Component),Sq=t=>J.forwardRef((n,i)=>{const s=dq(),a=J.useRef(!0),u=J.useRef(null),c=J.useRef(null),d=J.useCallback(T=>{const C=u.current,D=()=>{let k=!1;c.current&&(k=a0.fn(c.current,u.current.getAnimatedValue())),(!c.current||k===!1)&&s()};u.current=new Eq(T,D),C&&C.detach()},[]);J.useEffect(()=>()=>{a.current=!1,u.current&&u.current.detach()},[]),J.useImperativeHandle(i,()=>vq(c)),d(n);const h=u.current.getValue();h.scrollTop,h.scrollLeft;const y=xl(h,["scrollTop","scrollLeft"]),E=Tq(t)?void 0:T=>c.current=pq(T,i);return _n.createElement(t,Wt({},y,{ref:E}))});let vc=!1;const aa=new Set,bx=()=>{if(!vc)return!1;let t=Sx();for(let e of aa){let n=!1;for(let i=0;i<e.configs.length;i++){let s=e.configs[i],a,u;for(let c=0;c<s.animatedValues.length;c++){let d=s.animatedValues[c];if(d.done)continue;let h=s.fromValues[c],y=s.toValues[c],E=d.lastPosition,T=y instanceof mr,C=Array.isArray(s.initialVelocity)?s.initialVelocity[c]:s.initialVelocity;if(T&&(y=y.getValue()),s.immediate){d.setValue(y),d.done=!0;continue}if(typeof h=="string"||typeof y=="string"){d.setValue(y),d.done=!0;continue}if(s.duration!==void 0)E=h+s.easing((t-d.startTime)/s.duration)*(y-h),a=t>=d.startTime+s.duration;else if(s.decay)E=h+C/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),a=Math.abs(d.lastPosition-E)<.1,a&&(y=E);else{u=d.lastTime!==void 0?d.lastTime:t,C=d.lastVelocity!==void 0?d.lastVelocity:s.initialVelocity,t>u+64&&(u=t);let D=Math.floor(t-u);for(let F=0;F<D;++F){let B=-s.tension*(E-y),Y=-s.friction*C,X=(B+Y)/s.mass;C=C+X*1/1e3,E=E+C*1/1e3}let k=s.clamp&&s.tension!==0?h<y?E>y:E<y:!1,U=Math.abs(C)<=s.precision,H=s.tension!==0?Math.abs(y-E)<=s.precision:!0;a=k||U&&H,d.lastVelocity=C,d.lastTime=t}T&&!s.toValues[c].done&&(a=!1),a?(d.value!==y&&(E=y),d.done=!0):n=!0,d.setValue(E),d.lastPosition=E}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(aa.delete(e),e.stop(!0))}return aa.size?Tx(bx):vc=!1,vc},Aq=t=>{aa.has(t)||aa.add(t),vc||(vc=!0,Tx(bx))},bq=t=>{aa.has(t)&&aa.delete(t)};function Bh(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Bh({range:t,output:e,extrapolate:n});if(Fh&&typeof t.output[0]=="string")return Fh(t);const i=t,s=i.output,a=i.range||[0,1],u=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(h=>h);return h=>{const y=Cq(h,a);return wq(h,a[y],a[y+1],s[y],s[y+1],d,u,c,i.map)}}function wq(t,e,n,i,s,a,u,c,d){let h=d?d(t):t;if(h<e){if(u==="identity")return h;u==="clamp"&&(h=e)}if(h>n){if(c==="identity")return h;c==="clamp"&&(h=n)}return i===s?i:e===n?t<=e?i:s:(e===-1/0?h=-h:n===1/0?h=h-e:h=(h-e)/(n-e),h=a(h),i===-1/0?h=-h:s===1/0?h=h+i:h=h*(s-i)+i,h)}function Cq(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class Ul extends qy{constructor(e,n,i,s){super(),this.calc=void 0,this.payload=e instanceof qy&&!(e instanceof Ul)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Bh(n,i,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=Bh(e,n,i)}interpolate(e,n,i){return new Ul(this,e,n,i)}}const cl=(t,e,n)=>t&&new Ul(t,e,n),Iq={default:{tension:170,friction:26}};function wx(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>wx(n,e))}class zy extends mr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,s){s===void 0&&(s=!0),n.value=i,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&wx(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new Ul(this,e,n,i)}}class Rq extends qy{constructor(e){super(),this.payload=e.map(n=>new zy(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,s)=>this.payload[s].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new Ul(this,e,n)}}let xq=0,Nq=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=xq++}update(e){if(!e)return this;const n=Gg(e),i=n.delay,s=i===void 0?0:i,a=n.to,u=xl(n,["delay","to"]);if(Xe.arr(a)||Xe.fun(a))this.queue.push(Wt({},u,{delay:s,to:a}));else if(a){let c={};Object.entries(a).forEach(d=>{let h=d[0],y=d[1];const E=Wt({to:{[h]:y},delay:vl(s,h)},u),T=c[E.delay]&&c[E.delay].to;c[E.delay]=Wt({},c[E.delay],E,{to:Wt({},T,E.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(u),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let a=s.from,u=a===void 0?{}:a,c=s.to,d=c===void 0?{}:c;Xe.obj(u)&&(this.merged=Wt({},u,this.merged)),Xe.obj(d)&&(this.merged=Wt({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((s,a)=>{let u=s.delay,c=xl(s,["delay"]);const d=y=>{a===i.length-1&&n===this.guid&&y&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let h=Xe.arr(c.to)||Xe.fun(c.to);u?setTimeout(()=>{n===this.guid&&(h?this.runAsync(c,d):this.diff(c).start(d))},u):h?this.runAsync(c,d):this.diff(c).start(d)})}else Xe.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),Aq(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&bq(this),this}runAsync(e,n){var i=this;e.delay;let s=xl(e,["delay"]);const a=this.local;let u=Promise.resolve(void 0);if(Xe.arr(s.to))for(let c=0;c<s.to.length;c++){const d=c,h=Wt({},s,Gg(s.to[d]));Xe.arr(h.config)&&(h.config=h.config[d]),u=u.then(()=>{if(a===this.guid)return new Promise(y=>this.diff(h).start(y))})}else if(Xe.fun(s.to)){let c=0,d;u=u.then(()=>s.to(h=>{const y=Wt({},s,Gg(h));if(Xe.arr(y.config)&&(y.config=y.config[c]),c++,a===this.guid)return d=new Promise(E=>this.diff(y).start(E))},function(h){return h===void 0&&(h=!0),i.stop(h)}).then(()=>d))}u.then(n)}diff(e){this.props=Wt({},this.props,e);let n=this.props,i=n.from,s=i===void 0?{}:i,a=n.to,u=a===void 0?{}:a,c=n.config,d=c===void 0?{}:c,h=n.reverse,y=n.attach,E=n.reset,T=n.immediate;if(h){var C=[u,s];s=C[0],u=C[1]}this.merged=Wt({},s,this.merged,u),this.hasChanged=!1;let D=y&&y(this);if(this.animations=Object.entries(this.merged).reduce((k,U)=>{let H=U[0],F=U[1],B=k[H]||{};const Y=Xe.num(F),X=Xe.str(F)&&!F.startsWith("#")&&!/\d/.test(F)&&!Ex[F],G=Xe.arr(F),I=!Y&&!G&&!X;let R=Xe.und(s[H])?F:s[H],x=Y||G||X?F:1,L=vl(d,H);D&&(x=D.animations[H].parent);let M=B.parent,V=B.interpolation,O=Pd(D?x.getPayload():x),Ce,ve=F;I&&(ve=Fh({range:[0,1],output:[F,F]})(1));let te=V&&V.getValue();const pe=!Xe.und(M)&&B.animatedValues.some(ee=>!ee.done),Re=!Xe.equ(ve,te),ge=!Xe.equ(ve,B.previous),q=!Xe.equ(L,B.config);if(E||ge&&Re||q){if(Y||X)M=V=B.parent||new zy(R);else if(G)M=V=B.parent||new Rq(R);else if(I){let ee=B.interpolation&&B.interpolation.calc(B.parent.value);ee=ee!==void 0&&!E?ee:R,B.parent?(M=B.parent,M.setValue(0,!1)):M=new zy(0);const fe={output:[ee,F]};B.interpolation?(V=B.interpolation,B.interpolation.updateConfig(fe)):V=M.interpolate(fe)}return O=Pd(D?x.getPayload():x),Ce=Pd(M.getPayload()),E&&!I&&M.setValue(R,!1),this.hasChanged=!0,Ce.forEach(ee=>{ee.startPosition=ee.value,ee.lastPosition=ee.value,ee.lastVelocity=pe?ee.lastVelocity:void 0,ee.lastTime=pe?ee.lastTime:void 0,ee.startTime=Sx(),ee.done=!1,ee.animatedStyles.clear()}),vl(T,H)&&M.setValue(I?x:F,!1),Wt({},k,{[H]:Wt({},B,{name:H,parent:M,interpolation:V,animatedValues:Ce,toValues:O,previous:ve,config:L,fromValues:Pd(M.getValue()),immediate:vl(T,H),initialVelocity:ta(L.velocity,0),clamp:ta(L.clamp,!1),precision:ta(L.precision,.01),tension:ta(L.tension,170),friction:ta(L.friction,26),mass:ta(L.mass,1),duration:L.duration,easing:ta(L.easing,ee=>ee),decay:L.decay})})}else return Re?k:(I&&(M.setValue(1,!1),V.updateConfig({output:[ve,ve]})),M.done=!0,this.hasChanged=!0,Wt({},k,{[H]:Wt({},k[H],{previous:ve})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let k in this.animations)this.interpolations[k]=this.animations[k].interpolation,this.values[k]=this.animations[k].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const Dq=(t,e)=>{const n=J.useRef(!1),i=J.useRef(),s=Xe.fun(e),a=J.useMemo(()=>{i.current&&(i.current.map(E=>E.destroy()),i.current=void 0);let y;return[new Array(t).fill().map((E,T)=>{const C=new Nq,D=s?vl(e,T,C):e[T];return T===0&&(y=D.ref),C.update(D),y||C.start(),C}),y]},[t]),u=a[0],c=a[1];i.current=u,J.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(y=>new Promise(E=>y.start(E)))),stop:y=>i.current.forEach(E=>E.stop(y)),get controllers(){return i.current}}));const d=J.useMemo(()=>y=>i.current.map((E,T)=>{E.update(s?vl(y,T,E):y[T]),c||E.start()}),[t]);J.useEffect(()=>{n.current?s||d(e):c||i.current.forEach(y=>y.start())}),J.useEffect(()=>(n.current=!0,()=>i.current.forEach(y=>y.destroy())),[]);const h=i.current.map(y=>y.getValues());return s?[h,d,y=>i.current.forEach(E=>E.pause(y))]:h},Mq=t=>{const e=Xe.fun(t),n=Dq(1,e?t:[t]),i=n[0],s=n[1],a=n[2];return e?[i[0],s,a]:i};class Pq extends _x{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof mr)&&(e=a0.transform(e)),this.payload=e}}const qh={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_r="[-+]?\\d*\\.?\\d+",zh=_r+"%";function Sp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const kq=new RegExp("rgb"+Sp(_r,_r,_r)),Lq=new RegExp("rgba"+Sp(_r,_r,_r,_r)),Vq=new RegExp("hsl"+Sp(_r,zh,zh)),Oq=new RegExp("hsla"+Sp(_r,zh,zh,_r)),Uq=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Fq=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Bq=/^#([0-9a-fA-F]{6})$/,qq=/^#([0-9a-fA-F]{8})$/;function zq(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Bq.exec(t))?parseInt(e[1]+"ff",16)>>>0:qh.hasOwnProperty(t)?qh[t]:(e=kq.exec(t))?(fl(e[1])<<24|fl(e[2])<<16|fl(e[3])<<8|255)>>>0:(e=Lq.exec(t))?(fl(e[1])<<24|fl(e[2])<<16|fl(e[3])<<8|nw(e[4]))>>>0:(e=Uq.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=qq.exec(t))?parseInt(e[1],16)>>>0:(e=Fq.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Vq.exec(t))?(ew(tw(e[1]),kd(e[2]),kd(e[3]))|255)>>>0:(e=Oq.exec(t))?(ew(tw(e[1]),kd(e[2]),kd(e[3]))|nw(e[4]))>>>0:null}function Kg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function ew(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i,a=Kg(s,i,t+1/3),u=Kg(s,i,t),c=Kg(s,i,t-1/3);return Math.round(a*255)<<24|Math.round(u*255)<<16|Math.round(c*255)<<8}function fl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function tw(t){return(parseFloat(t)%360+360)%360/360}function nw(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function kd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function iw(t){let e=zq(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,s=(e&65280)>>>8,a=(e&255)/255;return`rgba(${n}, ${i}, ${s}, ${a})`}const Ld=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Hq=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Gq=new RegExp(`(${Object.keys(qh).join("|")})`,"g"),Kq=t=>{const e=t.output.map(s=>s.replace(Hq,iw)).map(s=>s.replace(Gq,iw)),n=e[0].match(Ld).map(()=>[]);e.forEach(s=>{s.match(Ld).forEach((a,u)=>n[u].push(+a))});const i=e[0].match(Ld).map((s,a)=>Bh(Wt({},t,{output:n[a]})));return s=>{let a=0;return e[0].replace(Ld,()=>i[a++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(u,c,d,h,y)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(h)}, ${y})`)}};let _c={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const Jq=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Yq=["Webkit","Ms","Moz","O"];_c=Object.keys(_c).reduce((t,e)=>(Yq.forEach(n=>t[Jq(n,e)]=t[e]),t),_c);function $q(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(_c.hasOwnProperty(t)&&_c[t])?e+"px":(""+e).trim()}const rw={};_q(t=>new Pq(t));yq(Kq);gq(qh);mq((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,a=e.children,u=e.scrollTop,c=e.scrollLeft,d=xl(e,["style","children","scrollTop","scrollLeft"]),h=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";u!==void 0&&(t.scrollTop=u),c!==void 0&&(t.scrollLeft=c),a!==void 0&&(t.textContent=a);for(let y in s)if(s.hasOwnProperty(y)){var n=y.indexOf("--")===0,i=$q(y,s[y],n);y==="float"&&(y="cssFloat"),n?t.style.setProperty(y,i):t.style[y]=i}for(let y in d){const E=h?y:rw[y]||(rw[y]=y.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(E)<"u"&&t.setAttribute(E,d[y])}return}else return!1},t=>t);const jq=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Wq=fq(Sq),Qq=Wq(jq);function sw(t,e){return t.map(function(n,i){return n+e[i]})}function Cx(t,e){return t.map(function(n,i){return n-e[i]})}function Hy(t){return Math.hypot.apply(Math,t)}function Xq(t,e,n){var i=Hy(e),s=i===0?0:1/i,a=n===0?0:1/n,u=a*i,c=e.map(function(y){return a*y}),d=e.map(function(y){return s*y}),h=Hy(t);return{velocities:c,velocity:u,distance:h,direction:d}}function Gy(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function Zq(t,e,n){return Math.max(e,Math.min(t,n))}function ez(t,e){return Math.pow(t,e*5)}function ow(t,e,n){return e===0||Math.abs(e)===1/0?ez(t,n):t*e*n/(e+n*t)}function Ec(t,e,n,i){return i===void 0&&(i=.15),i===0?Zq(t,e,n):t<e?-ow(e-t,n-e,i)+e:t>n?+ow(t-n,n-e,i)+n:t}function tz(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nz(t,e,n){return e&&tz(t.prototype,e),t}function fi(){return fi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fi.apply(this,arguments)}function Ix(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function iz(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Vd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rz(t,e){if(t){if(typeof t=="string")return aw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aw(t,e)}}function aw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ap(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=rz(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function Rx(){}function xx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?Rx:e.length===1?e[0]:function(){for(var i,s=Ap(e),a;!(a=s()).done;){var u=a.value;i=u.apply(this,arguments)||i}return i}}function uo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function Od(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function l0(t,e){t===void 0&&(t={});for(var n={},i=0,s=Object.entries(e);i<s.length;i++){var a=s[i],u=a[0],c=a[1];switch(typeof c){case"function":n[u]=c.call(n,t[u],u,t);break;case"object":n[u]=l0(t[u],c);break;case"boolean":c&&(n[u]=t[u]);break}}return n}var sz=180,oz=.15,az=.5,lz=60,uz={threshold:function(e){return e===void 0&&(e=0),uo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return uo(oz);case!1:return uo(0);default:return uo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:uo(e)}},Nx=fi({},uz,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(E){return Nx.bounds(e(E))};var n=e,i=n.left,s=i===void 0?-1/0:i,a=n.right,u=a===void 0?1/0:a,c=n.top,d=c===void 0?-1/0:c,h=n.bottom,y=h===void 0?1/0:h;return[[s,u],[d,y]]}}),cz=typeof window<"u"&&window.document&&window.document.createElement,fz={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=cz?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,s=i===void 0?!0:i,a=n.capture,u=a===void 0?!1:a;return{passive:s,capture:u}}},dz=fi({},Nx,{threshold:function(e,n,i){var s=i.filterTaps,a=s===void 0?!1:s,u=i.lockDirection,c=u===void 0?!1:u,d=i.axis,h=d===void 0?void 0:d,y=uo(e,a?3:c||h?1:0);return this.filterTaps=a||y[0]+y[1]>0,y},swipeVelocity:function(e){return e===void 0&&(e=az),uo(e)},swipeDistance:function(e){return e===void 0&&(e=lz),uo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return sz;case!1:return 0;default:return e}}});function hz(t){return t===void 0&&(t={}),l0(t,fz)}function pz(t){return t===void 0&&(t={}),l0(t,dz)}function mz(t){var e=t.domTarget,n=t.eventOptions,i=t.window,s=t.enabled,a=iz(t,["domTarget","eventOptions","window","enabled"]),u=hz({domTarget:e,eventOptions:n,window:i,enabled:s});return u.drag=pz(a),u}function $u(t){return fi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:Rx,canceled:!1,memo:void 0,args:void 0},t)}function Dx(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=$u({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=$u({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=$u({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=$u({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=$u({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:s,scroll:a}}var ia=new Map,gz=(function(){function t(n,i){var s=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(a,u){var c;u===void 0&&(u=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var d=arguments.length,h=new Array(d>2?d-2:0),y=2;y<d;y++)h[y-2]=arguments[y];s.controller.timeouts[s.stateKey]=(c=window).setTimeout.apply(c,[a,u].concat(h))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(a){if(a===void 0&&(a=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!a&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var u=s.state.active,c=s.state._active;s.state.active=c,s.state.first=c&&!u,s.state.last=u&&!c,s.controller.state.shared[s.ingKey]=c}var d=fi({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),h=s.handler(d);return s.state.memo=h!==void 0?h:s.state.memo,s.state._active||s.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,s){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var s=this.config,a=s.initial,u=s.bounds,c=s.rubberband,d=s.threshold,h=this.state,y=h._bounds,E=h._initial,T=h._active,C=h._intentional,D=h.lastOffset,k=h.movement,U=this.getInternalMovement(i,this.state),H=C[0]===!1?lw(U[0],d[0]):C[0],F=C[1]===!1?lw(U[1],d[1]):C[1],B=this.checkIntentionality([H,F],U);if(B._blocked)return fi({},B,{_movement:U,delta:[0,0]});var Y=B._intentional,X=U,G,I;if(Y[0]!==!1&&C[0]===!1&&(I=Od(a,this.state),G=Od(u,this.state),E[0]=I[0],y[0]=G[0]),Y[1]!==!1&&C[1]===!1){var R,x;I=(R=I)!=null?R:Od(a,this.state),G=(x=G)!=null?x:Od(u,this.state),E[1]=I[1],y[1]=G[1]}var L=[Y[0]!==!1?U[0]-Y[0]:E[0],Y[1]!==!1?U[1]-Y[1]:E[1]],M=sw(L,D),V=T?c:[0,0];return L=uw(y,sw(L,E),V),fi({},B,{intentional:Y[0]!==!1||Y[1]!==!1,_initial:E,_movement:X,movement:L,values:i,offset:uw(y,M,V),delta:Cx(L,k)})},e.clean=function(){this.clearTimeout()},nz(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function lw(t,e){return Math.abs(t)>=e?Gy(t)*e:!1}function uw(t,e,n){var i=e[0],s=e[1],a=n[0],u=n[1],c=t[0],d=c[0],h=c[1],y=t[1],E=y[0],T=y[1];return[Ec(i,d,h,a),Ec(s,E,T,u)]}function Jg(t,e,n){var i=t.state,s=t.args,a=e.timeStamp,u=e.type,c=i.values,d=n?0:a-i.startTime;return{_lastEventType:u,event:e,timeStamp:a,elapsedTime:d,args:s,previous:c}}function yz(t,e,n){var i=t.state.offset,s=n.timeStamp;return fi({},Dx()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:s})}function vz(t,e){return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return t.call.apply(t,[this,fi({},e,{event:n})].concat(s))}}var _z=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];for(var c=Ap(n.classes),d;!(d=c()).done;){var h=d.value;new h(n,a).addBindings(i)}for(var y=0,E=Object.entries(n.nativeRefs);y<E.length;y++){var T=E[y],C=T[0],D=T[1];Ky(i,C,vz(D,fi({},n.state.shared,{args:a})))}return n.config.domTarget?Az(n,i):bz(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=Px(n.config),s=n.config.eventOptions;i&&jc(i,Mx(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),Ez(n)},this.state=Dx(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function Ez(t){var e=t.config,n=e.window,i=e.eventOptions,s=t.windowListeners;if(n){for(var a in s){var u=s[a];jc(n,u,i)}t.windowListeners={}}}function Tz(t,e){var n=t.config,i=t.windowListeners;n.window&&(jc(n.window,i[e],n.eventOptions),delete i[e])}function Sz(t,e,n){var i=t.config,s=t.windowListeners;n===void 0&&(n=[]),i.window&&(jc(i.window,s[e],i.eventOptions),kx(i.window,s[e]=n,i.eventOptions))}function Az(t,e){var n=t.config,i=t.domListeners,s=Px(n);if(!s)throw new Error("domTarget must be defined");var a=n.eventOptions;jc(s,Mx(i),a);for(var u=0,c=Object.entries(e);u<c.length;u++){var d=c[u],h=d[0],y=d[1],E=h.slice(2).toLowerCase();i.push([E,xx.apply(void 0,y)])}kx(s,i,a)}function bz(t,e){for(var n=t.config,i={},s=n.eventOptions.capture?"Capture":"",a=0,u=Object.entries(e);a<u.length;a++){var c=u[a],d=c[0],h=c[1],y=Array.isArray(h)?h:[h],E=d+s;i[E]=xx.apply(void 0,y)}return i}function Mx(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function Px(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function Ky(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function kx(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Ap(e),s;!(s=i()).done;){var a=s.value,u=a[0],c=a[1];t.addEventListener(u,c,n)}}function jc(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Ap(e),s;!(s=i()).done;){var a=s.value,u=a[0],c=a[1];t.removeEventListener(u,c,n)}}function wz(t,e,n){n===void 0&&(n={});var i=Iz(t),s=_n.useMemo(function(){return new _z(i)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,_n.useEffect(s.effect,[]),s.config.domTarget?Cz:s.bind}function Cz(){}function Iz(t){var e=new Set;return t.drag&&e.add(ia.get("drag")),t.wheel&&e.add(ia.get("wheel")),t.scroll&&e.add(ia.get("scroll")),t.move&&e.add(ia.get("move")),t.pinch&&e.add(ia.get("pinch")),t.hover&&e.add(ia.get("hover")),e}var Rz=(function(t){Ix(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,a){return Cx(s,a.initial)},n.checkIntentionality=function(s,a){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var u=a.map(Math.abs),c=u[0],d=u[1],h=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:h}:h?this.config.axis&&h!==this.config.axis?{_intentional:s,_blocked:!0,axis:h}:(s[h==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:h}):{_intentional:[!1,!1],_blocked:!1,axis:h}},n.getKinematics=function(s,a){var u=this.getMovement(s);if(!u._blocked){var c=a.timeStamp-this.state.timeStamp;Object.assign(u,Xq(u.movement,u.delta,c))}return u},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(gz);function Lx(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function cw(t){var e="buttons"in t?t.buttons:0,n=Lx(t),i=n&&n.length||0,s=i>0||e>0,a=t.shiftKey,u=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:s,buttons:e,shiftKey:a,altKey:u,metaKey:c,ctrlKey:d}}function fw(t){var e=Lx(t),n=e?e[0]:t,i=n.clientX,s=n.clientY;return[i,s]}var xz=3,Nz=220,Dz=(function(t){Ix(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(s){!i.enabled||i.state._active||(Sz(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:s.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),i.setTimeout(i.startDrag.bind(Vd(i)),i.config.delay,s)):i.startDrag(s))},i.onDragChange=function(s){if(!i.state.canceled&&s.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(s));return}var a=cw(s);if(!a.down){i.onDragEnd(s);return}i.updateSharedState(a);var u=fw(s),c=i.getKinematics(u,s),d=Jg(Vd(i),s),h=i.state._isTap,y=Hy(c._movement);h&&y>=xz&&(h=!1),i.updateGestureState(fi({},d,c,{_isTap:h})),i.fireGestureHandler()}},i.onDragEnd=function(s){if(s.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var a=i.state._isTap,u=i.state.velocities,c=u[0],d=u[1],h=i.state.movement,y=h[0],E=h[1],T=i.state._intentional,C=T[0],D=T[1],k=i.config.swipeVelocity,U=k[0],H=k[1],F=i.config.swipeDistance,B=F[0],Y=F[1],X=fi({},Jg(Vd(i),s),i.getMovement(i.state.values)),G=[0,0];X.elapsedTime<Nz&&(C!==!1&&Math.abs(c)>U&&Math.abs(y)>B&&(G[0]=Gy(c)),D!==!1&&Math.abs(d)>H&&Math.abs(E)>Y&&(G[1]=Gy(d))),i.updateGestureState(fi({},X,{tap:a,swipe:G})),i.fireGestureHandler(a===!0)}},i.clean=function(){t.prototype.clean.call(Vd(i)),i.state._delayedEvent=!1,Tz(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(s){i.state._isTap||s.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(s){var a=fw(s);this.updateSharedState(cw(s)),this.updateGestureState(fi({},yz(this,a,s),Jg(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},n.addBindings=function(s){if(Ky(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var a=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";Ky(s,a,this.onClick)}},e})(Rz);function Mz(t,e){var n,i=[],s,a=!1;function u(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return a&&n===this&&e(d,i)||(s=t.apply(this,d),a=!0,n=this,i=d),s}return u}function ah(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!ah(t[i],e[i]))return!1;return!0}var a;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;for(a=t.entries();!(i=a.next()).done;)if(!ah(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(s[i]==="_owner"&&t.$$typeof)&&!ah(t[s[i]],e[s[i]]))return!1;return!0}return t!==t&&e!==e}function Pz(t,e){try{return ah(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function kz(t,e){e===void 0&&(e={}),ia.set("drag",Dz);var n=J.useRef();return n.current||(n.current=Mz(mz,Pz)),wz({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Vx=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Hh=Vx.join(","),Ox=typeof Element>"u",ya=Ox?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Jy=!Ox&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},Ux=function(e,n,i){var s=Array.prototype.slice.apply(e.querySelectorAll(Hh));return n&&ya.call(e,Hh)&&s.unshift(e),s=s.filter(i),s},Fx=function t(e,n,i){for(var s=[],a=Array.from(e);a.length;){var u=a.shift();if(u.tagName==="SLOT"){var c=u.assignedElements(),d=c.length?c:u.children,h=t(d,!0,i);i.flatten?s.push.apply(s,h):s.push({scope:u,candidates:h})}else{var y=ya.call(u,Hh);y&&i.filter(u)&&(n||!e.includes(u))&&s.push(u);var E=u.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(u),T=!i.shadowRootFilter||i.shadowRootFilter(u);if(E&&T){var C=t(E===!0?u.children:E.children,!0,i);i.flatten?s.push.apply(s,C):s.push({scope:u,candidates:C})}else a.unshift.apply(a,u.children)}}return s},Bx=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},Lz=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},qx=function(e){return e.tagName==="INPUT"},Vz=function(e){return qx(e)&&e.type==="hidden"},Oz=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},Uz=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},Fz=function(e){if(!e.name)return!0;var n=e.form||Jy(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=i(window.CSS.escape(e.name));else try{s=i(e.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var a=Uz(s,e.form);return!a||a===e},Bz=function(e){return qx(e)&&e.type==="radio"},qz=function(e){return Bz(e)&&!Fz(e)},dw=function(e){var n=e.getBoundingClientRect(),i=n.width,s=n.height;return i===0&&s===0},zz=function(e,n){var i=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=ya.call(e,"details>summary:first-of-type"),u=a?e.parentElement:e;if(ya.call(u,"details:not([open]) *"))return!0;var c=Jy(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof s=="function"){for(var h=e;e;){var y=e.parentElement,E=Jy(e);if(y&&!y.shadowRoot&&s(y)===!0)return dw(e);e.assignedSlot?e=e.assignedSlot:!y&&E!==e.ownerDocument?e=E.host:e=y}e=h}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return dw(e);return!1},Hz=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var s=n.children.item(i);if(s.tagName==="LEGEND")return ya.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},Gh=function(e,n){return!(n.disabled||Vz(n)||zz(n,e)||Oz(n)||Hz(n))},Yy=function(e,n){return!(qz(n)||Bx(n)<0||!Gh(e,n))},Gz=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Kz=function t(e){var n=[],i=[];return e.forEach(function(s,a){var u=!!s.scope,c=u?s.scope:s,d=Bx(c,u),h=u?t(s.candidates):c;d===0?u?n.push.apply(n,h):n.push(c):i.push({documentOrder:a,tabIndex:d,item:s,isScope:u,content:h})}),i.sort(Lz).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(n)},Jz=function(e,n){n=n||{};var i;return n.getShadowRoot?i=Fx([e],n.includeContainer,{filter:Yy.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Gz}):i=Ux(e,n.includeContainer,Yy.bind(null,n)),Kz(i)},Yz=function(e,n){n=n||{};var i;return n.getShadowRoot?i=Fx([e],n.includeContainer,{filter:Gh.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=Ux(e,n.includeContainer,Gh.bind(null,n)),i},Ud=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ya.call(e,Hh)===!1?!1:Yy(n,e)},$z=Vx.concat("iframe").join(","),Yg=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ya.call(e,$z)===!1?!1:Gh(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function hw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function pw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hw(Object(n),!0).forEach(function(i){jz(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hw(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mw=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),Wz=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Qz=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},Xz=function(e){return e.key==="Tab"||e.keyCode===9},gw=function(e){return setTimeout(e,0)},yw=function(e,n){var i=-1;return e.every(function(s,a){return n(s)?(i=a,!1):!0}),i},ju=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,i):e},Fd=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Zz=function(e,n){var i=(n==null?void 0:n.document)||document,s=pw({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},u,c=function(G,I,R){return G&&G[I]!==void 0?G[I]:s[R||I]},d=function(G){return a.containerGroups.findIndex(function(I){var R=I.container,x=I.tabbableNodes;return R.contains(G)||x.find(function(L){return L===G})})},h=function(G){var I=s[G];if(typeof I=="function"){for(var R=arguments.length,x=new Array(R>1?R-1:0),L=1;L<R;L++)x[L-1]=arguments[L];I=I.apply(void 0,x)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(G,"` was specified but was not a node, or did not return a node"))}var M=I;if(typeof I=="string"&&(M=i.querySelector(I),!M))throw new Error("`".concat(G,"` as selector refers to no known node"));return M},y=function(){var G=h("initialFocus");if(G===!1)return!1;if(G===void 0)if(d(i.activeElement)>=0)G=i.activeElement;else{var I=a.tabbableGroups[0],R=I&&I.firstTabbableNode;G=R||h("fallbackFocus")}if(!G)throw new Error("Your focus-trap needs to have at least one focusable element");return G},E=function(){if(a.containerGroups=a.containers.map(function(G){var I=Jz(G,s.tabbableOptions),R=Yz(G,s.tabbableOptions);return{container:G,tabbableNodes:I,focusableNodes:R,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(L){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,V=R.findIndex(function(O){return O===L});if(!(V<0))return M?R.slice(V+1).find(function(O){return Ud(O,s.tabbableOptions)}):R.slice(0,V).reverse().find(function(O){return Ud(O,s.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(G){return G.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function X(G){if(G!==!1&&G!==i.activeElement){if(!G||!G.focus){X(y());return}G.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=G,Wz(G)&&G.select()}},C=function(G){var I=h("setReturnFocus",G);return I||(I===!1?!1:G)},D=function(G){var I=Fd(G);if(!(d(I)>=0)){if(ju(s.clickOutsideDeactivates,G)){u.deactivate({returnFocus:s.returnFocusOnDeactivate&&!Yg(I,s.tabbableOptions)});return}ju(s.allowOutsideClick,G)||G.preventDefault()}},k=function(G){var I=Fd(G),R=d(I)>=0;R||I instanceof Document?R&&(a.mostRecentlyFocusedNode=I):(G.stopImmediatePropagation(),T(a.mostRecentlyFocusedNode||y()))},U=function(G){var I=Fd(G);E();var R=null;if(a.tabbableGroups.length>0){var x=d(I),L=x>=0?a.containerGroups[x]:void 0;if(x<0)G.shiftKey?R=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:R=a.tabbableGroups[0].firstTabbableNode;else if(G.shiftKey){var M=yw(a.tabbableGroups,function(ue){var pe=ue.firstTabbableNode;return I===pe});if(M<0&&(L.container===I||Yg(I,s.tabbableOptions)&&!Ud(I,s.tabbableOptions)&&!L.nextTabbableNode(I,!1))&&(M=x),M>=0){var V=M===0?a.tabbableGroups.length-1:M-1,O=a.tabbableGroups[V];R=O.lastTabbableNode}}else{var Ce=yw(a.tabbableGroups,function(ue){var pe=ue.lastTabbableNode;return I===pe});if(Ce<0&&(L.container===I||Yg(I,s.tabbableOptions)&&!Ud(I,s.tabbableOptions)&&!L.nextTabbableNode(I))&&(Ce=x),Ce>=0){var ve=Ce===a.tabbableGroups.length-1?0:Ce+1,te=a.tabbableGroups[ve];R=te.firstTabbableNode}}}else R=h("fallbackFocus");R&&(G.preventDefault(),T(R))},H=function(G){if(Qz(G)&&ju(s.escapeDeactivates,G)!==!1){G.preventDefault(),u.deactivate();return}if(Xz(G)){U(G);return}},F=function(G){var I=Fd(G);d(I)>=0||ju(s.clickOutsideDeactivates,G)||ju(s.allowOutsideClick,G)||(G.preventDefault(),G.stopImmediatePropagation())},B=function(){if(a.active)return mw.activateTrap(u),a.delayInitialFocusTimer=s.delayInitialFocus?gw(function(){T(y())}):T(y()),i.addEventListener("focusin",k,!0),i.addEventListener("mousedown",D,{capture:!0,passive:!1}),i.addEventListener("touchstart",D,{capture:!0,passive:!1}),i.addEventListener("click",F,{capture:!0,passive:!1}),i.addEventListener("keydown",H,{capture:!0,passive:!1}),u},Y=function(){if(a.active)return i.removeEventListener("focusin",k,!0),i.removeEventListener("mousedown",D,!0),i.removeEventListener("touchstart",D,!0),i.removeEventListener("click",F,!0),i.removeEventListener("keydown",H,!0),u};return u={get active(){return a.active},get paused(){return a.paused},activate:function(G){if(a.active)return this;var I=c(G,"onActivate"),R=c(G,"onPostActivate"),x=c(G,"checkCanFocusTrap");x||E(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=i.activeElement,I&&I();var L=function(){x&&E(),B(),R&&R()};return x?(x(a.containers.concat()).then(L,L),this):(L(),this)},deactivate:function(G){if(!a.active)return this;var I=pw({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},G);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,Y(),a.active=!1,a.paused=!1,mw.deactivateTrap(u);var R=c(I,"onDeactivate"),x=c(I,"onPostDeactivate"),L=c(I,"checkCanReturnFocus"),M=c(I,"returnFocus","returnFocusOnDeactivate");R&&R();var V=function(){gw(function(){M&&T(C(a.nodeFocusedBeforeActivation)),x&&x()})};return M&&L?(L(C(a.nodeFocusedBeforeActivation)).then(V,V),this):(V(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,Y(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,E(),B(),this)},updateContainerElements:function(G){var I=[].concat(G).filter(Boolean);return a.containers=I.map(function(R){return typeof R=="string"?i.querySelector(R):R}),a.active&&E(),this}},u.updateContainerElements(e),u};function eH(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var u0=!1;if(typeof window<"u"){var vw={get passive(){u0=!0}};window.addEventListener("testPassive",null,vw),window.removeEventListener("testPassive",null,vw)}var zx=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),fo=[],Kh=!1,Hx=-1,Tc=void 0,Sc=void 0,Gx=function(e){return fo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},Jh=function(e){var n=e||window.event;return Gx(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},tH=function(e){if(Sc===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(Sc=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Tc===void 0&&(Tc=document.body.style.overflow,document.body.style.overflow="hidden")},nH=function(){Sc!==void 0&&(document.body.style.paddingRight=Sc,Sc=void 0),Tc!==void 0&&(document.body.style.overflow=Tc,Tc=void 0)},iH=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},rH=function(e,n){var i=e.targetTouches[0].clientY-Hx;return Gx(e.target)?!1:n&&n.scrollTop===0&&i>0||iH(n)&&i<0?Jh(e):(e.stopPropagation(),!0)},sH=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!fo.some(function(s){return s.targetElement===e})){var i={targetElement:e,options:n||{}};fo=[].concat(eH(fo),[i]),zx?(e.ontouchstart=function(s){s.targetTouches.length===1&&(Hx=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&rH(s,e)},Kh||(document.addEventListener("touchmove",Jh,u0?{passive:!1}:void 0),Kh=!0)):tH(n)}},oH=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}fo=fo.filter(function(n){return n.targetElement!==e}),zx?(e.ontouchstart=null,e.ontouchmove=null,Kh&&fo.length===0&&(document.removeEventListener("touchmove",Jh,u0?{passive:!1}:void 0),Kh=!1)):fo.length||nH()},la=[],aH=function(){return la.some(function(t){return t.activeTargets.length>0})},lH=function(){return la.some(function(t){return t.skippedTargets.length>0})},_w="ResizeObserver loop completed with undelivered notifications.",uH=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:_w}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=_w),window.dispatchEvent(t)},Vc;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Vc||(Vc={}));var ua=function(t){return Object.freeze(t)},cH=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,ua(this)}return t})(),Kx=(function(){function t(e,n,i,s){return this.x=e,this.y=n,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ua(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,s=e.top,a=e.right,u=e.bottom,c=e.left,d=e.width,h=e.height;return{x:n,y:i,top:s,right:a,bottom:u,left:c,width:d,height:h}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),c0=function(t){return t instanceof SVGElement&&"getBBox"in t},Jx=function(t){if(c0(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var s=t,a=s.offsetWidth,u=s.offsetHeight;return!(a||u||t.getClientRects().length)},Ew=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},fH=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Ac=typeof window<"u"?window:{},Bd=new WeakMap,Tw=/auto|scroll/,dH=/^tb|vertical/,hH=/msie|trident/i.test(Ac.navigator&&Ac.navigator.userAgent),Dr=function(t){return parseFloat(t||"0")},Nl=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new cH((n?e:t)||0,(n?t:e)||0)},Sw=ua({devicePixelContentBoxSize:Nl(),borderBoxSize:Nl(),contentBoxSize:Nl(),contentRect:new Kx(0,0,0,0)}),Yx=function(t,e){if(e===void 0&&(e=!1),Bd.has(t)&&!e)return Bd.get(t);if(Jx(t))return Bd.set(t,Sw),Sw;var n=getComputedStyle(t),i=c0(t)&&t.ownerSVGElement&&t.getBBox(),s=!hH&&n.boxSizing==="border-box",a=dH.test(n.writingMode||""),u=!i&&Tw.test(n.overflowY||""),c=!i&&Tw.test(n.overflowX||""),d=i?0:Dr(n.paddingTop),h=i?0:Dr(n.paddingRight),y=i?0:Dr(n.paddingBottom),E=i?0:Dr(n.paddingLeft),T=i?0:Dr(n.borderTopWidth),C=i?0:Dr(n.borderRightWidth),D=i?0:Dr(n.borderBottomWidth),k=i?0:Dr(n.borderLeftWidth),U=E+h,H=d+y,F=k+C,B=T+D,Y=c?t.offsetHeight-B-t.clientHeight:0,X=u?t.offsetWidth-F-t.clientWidth:0,G=s?U+F:0,I=s?H+B:0,R=i?i.width:Dr(n.width)-G-X,x=i?i.height:Dr(n.height)-I-Y,L=R+U+X+F,M=x+H+Y+B,V=ua({devicePixelContentBoxSize:Nl(Math.round(R*devicePixelRatio),Math.round(x*devicePixelRatio),a),borderBoxSize:Nl(L,M,a),contentBoxSize:Nl(R,x,a),contentRect:new Kx(E,d,R,x)});return Bd.set(t,V),V},$x=function(t,e,n){var i=Yx(t,n),s=i.borderBoxSize,a=i.contentBoxSize,u=i.devicePixelContentBoxSize;switch(e){case Vc.DEVICE_PIXEL_CONTENT_BOX:return u;case Vc.BORDER_BOX:return s;default:return a}},pH=(function(){function t(e){var n=Yx(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=ua([n.borderBoxSize]),this.contentBoxSize=ua([n.contentBoxSize]),this.devicePixelContentBoxSize=ua([n.devicePixelContentBoxSize])}return t})(),jx=function(t){if(Jx(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},mH=function(){var t=1/0,e=[];la.forEach(function(u){if(u.activeTargets.length!==0){var c=[];u.activeTargets.forEach(function(h){var y=new pH(h.target),E=jx(h.target);c.push(y),h.lastReportedSize=$x(h.target,h.observedBox),E<t&&(t=E)}),e.push(function(){u.callback.call(u.observer,c,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var s=i[n];s()}return t},Aw=function(t){la.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(jx(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},gH=function(){var t=0;for(Aw(t);aH();)t=mH(),Aw(t);return lH()&&uH(),t>0},$g,Wx=[],yH=function(){return Wx.splice(0).forEach(function(t){return t()})},vH=function(t){if(!$g){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return yH()}).observe(n,i),$g=function(){n.textContent="".concat(e?e--:e++)}}Wx.push(t),$g()},_H=function(t){vH(function(){requestAnimationFrame(t)})},lh=0,EH=function(){return!!lh},TH=250,SH={attributes:!0,characterData:!0,childList:!0,subtree:!0},bw=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ww=function(t){return t===void 0&&(t=0),Date.now()+t},jg=!1,AH=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=TH),!jg){jg=!0;var i=ww(e);_H(function(){var s=!1;try{s=gH()}finally{if(jg=!1,e=i-ww(),!EH())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,SH)};document.body?n():Ac.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),bw.forEach(function(n){return Ac.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),bw.forEach(function(n){return Ac.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),$y=new AH,Cw=function(t){!lh&&t>0&&$y.start(),lh+=t,!lh&&$y.stop()},bH=function(t){return!c0(t)&&!fH(t)&&getComputedStyle(t).display==="inline"},wH=(function(){function t(e,n){this.target=e,this.observedBox=n||Vc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=$x(this.target,this.observedBox,!0);return bH(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),CH=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),qd=new WeakMap,Iw=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},zd=(function(){function t(){}return t.connect=function(e,n){var i=new CH(e,n);qd.set(e,i)},t.observe=function(e,n,i){var s=qd.get(e),a=s.observationTargets.length===0;Iw(s.observationTargets,n)<0&&(a&&la.push(s),s.observationTargets.push(new wH(n,i&&i.box)),Cw(1),$y.schedule())},t.unobserve=function(e,n){var i=qd.get(e),s=Iw(i.observationTargets,n),a=i.observationTargets.length===1;s>=0&&(a&&la.splice(la.indexOf(i),1),i.observationTargets.splice(s,1),Cw(-1))},t.disconnect=function(e){var n=this,i=qd.get(e);i.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),IH=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");zd.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ew(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");zd.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ew(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");zd.unobserve(this,e)},t.prototype.disconnect=function(){zd.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function Wn(){return Wn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wn.apply(this,arguments)}function uh(t,e){if(t==null)return{};var n,i,s={},a=Object.keys(t);for(i=0;i<a.length;i++)e.indexOf(n=a[i])>=0||(s[n]=t[n]);return s}var bc=typeof window<"u"?J.useLayoutEffect:J.useEffect;function Wu(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function Hd(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var RH={box:"border-box"};function Wg(t,e){var n=e.label,i=e.enabled,s=e.resizeSourceRef,a=J.useState(0),u=a[0],c=a[1];J.useDebugValue(n+": "+u);var d=J.useCallback(function(h){c(h[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return bc(function(){if(t.current&&i){var h=new IH(d);return h.observe(t.current,RH),function(){h.disconnect()}}},[t,d,i]),i?u:0}function jn(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var Rw={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},xw={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},xH=eq({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:Wn({},Rw,xw)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:Wn({},Rw,xw)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:Wn({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[tq({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(jn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(jn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(jn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(jn()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(jn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(jn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(jn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(jn()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(jn()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(jn()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(jn()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(jn()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(jn()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(jn()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(jn()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(jn()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),NH=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],DH=["velocity"],MH=["onRest","config"],Qx=Iq.default,PH=Qx.tension,Gd=Qx.friction,kH=_n.forwardRef(function(t,e){var n=t.children,i=t.sibling,s=t.className,a=t.footer,u=t.header,c=t.open,d=t.initialState,h=t.lastSnapRef,y=t.initialFocusRef,E=t.onDismiss,T=t.maxHeight,C=t.defaultSnap,D=C===void 0?VH:C,k=t.snapPoints,U=k===void 0?OH:k,H=t.blocking,F=H===void 0||H,B=t.scrollLocking,Y=B===void 0||B,X=t.style,G=t.onSpringStart,I=t.onSpringCancel,R=t.onSpringEnd,x=t.reserveScrollBarGap,L=x===void 0?F:x,M=t.expandOnContentDrag,V=M!==void 0&&M,O=uh(t,NH),Ce=(function(){var ae=J.useState(!1),Se=ae[0],Te=ae[1],Ge=J.useState({}),_t=Ge[0],$e=Ge[1],je=J.useCallback(function(ot){return $e(function(it){var De;return Wn({},it,((De={})[ot]=!1,De))}),function(){$e(function(it){var De;return Wn({},it,((De={})[ot]=!0,De))})}},[]);return J.useEffect(function(){var ot=Object.values(_t);ot.length!==0&&ot.every(Boolean)&&Te(!0)},[_t]),{ready:Se,registerReady:je}})(),ve=Ce.ready,te=Ce.registerReady,ue=J.useRef(!1),pe=J.useRef(G),Re=J.useRef(I),ge=J.useRef(R);J.useEffect(function(){pe.current=G,Re.current=I,ge.current=R},[I,G,R]);var q,ee,fe=Mq(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),he=fe[0],Ae=fe[1],Le=J.useRef(null),Be=J.useRef(null),zt=J.useRef(null),At=J.useRef(null),ti=J.useRef(null),di=J.useRef(null),mn=J.useRef(0),Mn=J.useRef(),Pn=J.useRef(!1),Sn=(q=J.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),ee=J.useRef(q==null?void 0:q.matches),J.useDebugValue(ee.current?"reduce":"no-preference"),J.useEffect(function(){var ae=function(Se){ee.current=Se.matches};return q==null||q.addListener(ae),function(){return q==null?void 0:q.removeListener(ae)}},[q]),ee),An=(function(ae){var Se=ae.targetRef,Te=ae.enabled,Ge=ae.reserveScrollBarGap,_t=J.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return J.useDebugValue(Te?"Enabled":"Disabled"),J.useEffect(function(){if(!Te)return _t.current.deactivate(),void(_t.current={activate:function(){},deactivate:function(){}});var $e=Se.current,je=!1;_t.current={activate:function(){je||(je=!0,sH($e,{allowTouchMove:function(ot){return ot.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:Ge}))},deactivate:function(){je&&(je=!1,oH($e))}}},[Te,Se,Ge]),_t})({targetRef:Be,enabled:ve&&Y,reserveScrollBarGap:L}),Oi=(function(ae){var Se=ae.targetRef,Te=ae.enabled,Ge=J.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return J.useDebugValue(Te?"Enabled":"Disabled"),J.useEffect(function(){if(!Te)return Ge.current.deactivate(),void(Ge.current={activate:function(){},deactivate:function(){}});var _t=Se.current,$e=!1,je=[],ot=[];Ge.current={activate:function(){if(!$e){$e=!0;var it=_t.parentNode;document.querySelectorAll("body > *").forEach(function(De){if(De!==it){var Ke=De.getAttribute("aria-hidden");Ke!==null&&Ke!=="false"||(je.push(Ke),ot.push(De),De.setAttribute("aria-hidden","true"))}})}},deactivate:function(){$e&&($e=!1,ot.forEach(function(it,De){var Ke=je[De];Ke===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",Ke)}),je=[],ot=[])}}},[Se,Te]),Ge})({targetRef:Le,enabled:ve&&F}),be=(function(ae){var Se=ae.targetRef,Te=ae.fallbackRef,Ge=ae.initialFocusRef,_t=ae.enabled,$e=J.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return J.useDebugValue(_t?"Enabled":"Disabled"),J.useEffect(function(){if(!_t)return $e.current.deactivate(),void($e.current={activate:function(){},deactivate:function(){}});var je=Te.current,ot=Zz(Se.current,{onActivate:void 0,initialFocus:Ge?function(){return(Ge==null?void 0:Ge.current)||je}:void 0,fallbackFocus:je,escapeDeactivates:!1,clickOutsideDeactivates:!1}),it=!1;$e.current={activate:function(){try{return it?Promise.resolve():(it=!0,Promise.resolve(ot.activate()).then(function(){return Promise.resolve(new Promise(function(De){return setTimeout(function(){return De(void 0)},0)})).then(function(){})}))}catch(De){return Promise.reject(De)}},deactivate:function(){it&&(it=!1,ot.deactivate())}}},[_t,Te,Ge,Se]),$e})({targetRef:Le,fallbackRef:di,initialFocusRef:y||void 0,enabled:ve&&F&&y!==!1}),Ut=(function(ae){var Se=ae.getSnapPoints,Te=ae.heightRef,Ge=ae.lastSnapRef,_t=ae.ready,$e=(function(xt){var Et=xt.contentRef,ni=xt.controlledMaxHeight,Ft=xt.footerEnabled,Kn=xt.footerRef,Bi=xt.headerEnabled,kn=xt.headerRef,ii=xt.registerReady,zr=xt.resizeSourceRef,bi=J.useMemo(function(){return ii("contentHeight")},[ii]),Nt=(function(ar,zi,Hi){var hi=J.useMemo(function(){return zi("maxHeight")},[zi]),Gi=J.useState(function(){return Hd(ar)||typeof window<"u"?window.innerHeight:0}),Sr=Gi[0],ri=Gi[1],Bt=Sr>0,lr=J.useRef(0);return J.useDebugValue(ar?"controlled":"auto"),J.useEffect(function(){Bt&&hi()},[Bt,hi]),bc(function(){if(ar)return ri(Hd(ar)),void(Hi.current="maxheightprop");var ur=function(){lr.current||(lr.current=requestAnimationFrame(function(){ri(window.innerHeight),Hi.current="window",lr.current=0}))};return window.addEventListener("resize",ur),ri(window.innerHeight),Hi.current="window",hi(),function(){window.removeEventListener("resize",ur),cancelAnimationFrame(lr.current)}},[ar,hi,Hi]),Sr})(ni,ii,zr),tn=Wg(kn,{label:"headerHeight",enabled:Bi,resizeSourceRef:zr}),wi=Wg(Et,{label:"contentHeight",enabled:!0,resizeSourceRef:zr}),qi=Wg(Kn,{label:"footerHeight",enabled:Ft,resizeSourceRef:zr}),Ci=Math.min(Nt-tn-qi,wi)+tn+qi;J.useDebugValue("minHeight: "+Ci);var Do=wi>0;return J.useEffect(function(){Do&&bi()},[Do,bi]),{maxHeight:Nt,minHeight:Ci,headerHeight:tn,footerHeight:qi}})({contentRef:ae.contentRef,controlledMaxHeight:ae.controlledMaxHeight,footerEnabled:ae.footerEnabled,footerRef:ae.footerRef,headerEnabled:ae.headerEnabled,headerRef:ae.headerRef,registerReady:ae.registerReady,resizeSourceRef:ae.resizeSourceRef}),je=$e.maxHeight,ot=$e.minHeight,it=$e.headerHeight,De=$e.footerHeight,Ke=(function(xt,Et){var ni=[].concat(xt).map(Hd).reduce(function(kn,ii){return kn.add(Wu(ii,0,Et)),kn},new Set),Ft=Array.from(ni),Kn=Math.min.apply(Math,Ft);if(Number.isNaN(Kn))throw new TypeError("minSnap is NaN");var Bi=Math.max.apply(Math,Ft);if(Number.isNaN(Bi))throw new TypeError("maxSnap is NaN");return{snapPoints:Ft,minSnap:Kn,maxSnap:Bi}})(_t?Se({height:Te.current,footerHeight:De,headerHeight:it,minHeight:ot,maxHeight:je}):[0],je),yn=Ke.snapPoints,Fi=Ke.minSnap,en=Ke.maxSnap;return J.useDebugValue("minSnap: "+Fi+", maxSnap:"+en),{minSnap:Fi,maxSnap:en,findSnap:function(xt){var Et=Hd(typeof xt=="function"?xt({footerHeight:De,headerHeight:it,height:Te.current,minHeight:ot,maxHeight:je,snapPoints:yn,lastSnap:Ge.current}):xt);return yn.reduce(function(ni,Ft){return Math.abs(Ft-Et)<Math.abs(ni-Et)?Ft:ni},Fi)},maxHeight:je}})({contentRef:zt,controlledMaxHeight:T,footerEnabled:!!a,footerRef:ti,getSnapPoints:U,headerEnabled:u!==!1,headerRef:At,heightRef:mn,lastSnapRef:h,ready:ve,registerReady:te,resizeSourceRef:Mn}),Jt=Ut.minSnap,gn=Ut.maxSnap,or=Ut.maxHeight,Ui=Ut.findSnap,ht=J.useRef(or),Zt=J.useRef(Jt),qe=J.useRef(gn),Ht=J.useRef(Ui),on=J.useRef(0);bc(function(){ht.current=or,qe.current=gn,Zt.current=Jt,Ht.current=Ui,on.current=Ui(D)},[Ui,D,or,gn,Jt]);var an=J.useCallback(function(ae){var Se=ae.onRest,Te=ae.config,Ge=(Te=Te===void 0?{}:Te).velocity,_t=Ge===void 0?1:Ge,$e=uh(Te,DH),je=uh(ae,MH);return new Promise(function(ot){return Ae(Wn({},je,{config:Wn({velocity:_t},$e,{mass:1,tension:PH,friction:Math.max(Gd,Gd+(Gd-Gd*_t))}),onRest:function(){var it=[].slice.call(arguments);ot.apply(void 0,it),Se==null||Se.apply(void 0,it)}}))})},[Ae]),Ts=cq(xH,{devTools:!1,actions:{onOpenCancel:J.useCallback(function(){return Re.current==null?void 0:Re.current({type:"OPEN"})},[]),onSnapCancel:J.useCallback(function(ae){return Re.current==null?void 0:Re.current({type:"SNAP",source:ae.snapSource})},[]),onCloseCancel:J.useCallback(function(){return Re.current==null?void 0:Re.current({type:"CLOSE"})},[]),onResizeCancel:J.useCallback(function(){return Re.current==null?void 0:Re.current({type:"RESIZE",source:Mn.current})},[]),onOpenEnd:J.useCallback(function(){return ge.current==null?void 0:ge.current({type:"OPEN"})},[]),onSnapEnd:J.useCallback(function(ae,Se){return ge.current==null?void 0:ge.current({type:"SNAP",source:ae.snapSource})},[]),onResizeEnd:J.useCallback(function(){return ge.current==null?void 0:ge.current({type:"RESIZE",source:Mn.current})},[])},context:{initialState:d},services:{onSnapStart:J.useCallback(function(ae,Se){try{return Promise.resolve(pe.current==null?void 0:pe.current({type:"SNAP",source:Se.payload.source||"custom"}))}catch(Te){return Promise.reject(Te)}},[]),onOpenStart:J.useCallback(function(){try{return Promise.resolve(pe.current==null?void 0:pe.current({type:"OPEN"}))}catch(ae){return Promise.reject(ae)}},[]),onCloseStart:J.useCallback(function(){try{return Promise.resolve(pe.current==null?void 0:pe.current({type:"CLOSE"}))}catch(ae){return Promise.reject(ae)}},[]),onResizeStart:J.useCallback(function(){try{return Promise.resolve(pe.current==null?void 0:pe.current({type:"RESIZE",source:Mn.current}))}catch(ae){return Promise.reject(ae)}},[]),onSnapEnd:J.useCallback(function(ae,Se){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"SNAP",source:ae.snapSource}))}catch(Te){return Promise.reject(Te)}},[]),onOpenEnd:J.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"OPEN"}))}catch(ae){return Promise.reject(ae)}},[]),onCloseEnd:J.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"CLOSE"}))}catch(ae){return Promise.reject(ae)}},[]),onResizeEnd:J.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"RESIZE",source:Mn.current}))}catch(ae){return Promise.reject(ae)}},[]),renderVisuallyHidden:J.useCallback(function(ae,Se){try{return Promise.resolve(an({y:on.current,ready:0,maxHeight:ht.current,maxSnap:qe.current,minSnap:on.current,immediate:!0})).then(function(){})}catch(Te){return Promise.reject(Te)}},[an]),activate:J.useCallback(function(ae,Se){try{return ue.current=!0,Promise.resolve(Promise.all([An.current.activate(),be.current.activate(),Oi.current.activate()])).then(function(){})}catch(Te){return Promise.reject(Te)}},[Oi,be,An]),deactivate:J.useCallback(function(){try{return An.current.deactivate(),be.current.deactivate(),Oi.current.deactivate(),ue.current=!1,Promise.resolve()}catch(ae){return Promise.reject(ae)}},[Oi,be,An]),openImmediately:J.useCallback(function(){try{return mn.current=on.current,Promise.resolve(an({y:on.current,ready:1,maxHeight:ht.current,maxSnap:qe.current,minSnap:on.current,immediate:!0})).then(function(){})}catch(ae){return Promise.reject(ae)}},[an]),openSmoothly:J.useCallback(function(){try{return Promise.resolve(an({y:0,ready:1,maxHeight:ht.current,maxSnap:qe.current,minSnap:on.current,immediate:!0})).then(function(){return mn.current=on.current,Promise.resolve(an({y:on.current,ready:1,maxHeight:ht.current,maxSnap:qe.current,minSnap:on.current,immediate:Sn.current})).then(function(){})})}catch(ae){return Promise.reject(ae)}},[an,Sn]),snapSmoothly:J.useCallback(function(ae,Se){try{var Te=Ht.current(ae.y);return mn.current=Te,h.current=Te,Promise.resolve(an({y:Te,ready:1,maxHeight:ht.current,maxSnap:qe.current,minSnap:Zt.current,immediate:Sn.current,config:{velocity:ae.velocity}})).then(function(){})}catch(Ge){return Promise.reject(Ge)}},[an,h,Sn]),resizeSmoothly:J.useCallback(function(){try{var ae=Ht.current(mn.current);return mn.current=ae,h.current=ae,Promise.resolve(an({y:ae,ready:1,maxHeight:ht.current,maxSnap:qe.current,minSnap:Zt.current,immediate:Mn.current!=="element"||Sn.current})).then(function(){})}catch(Se){return Promise.reject(Se)}},[an,h,Sn]),closeSmoothly:J.useCallback(function(ae,Se){try{return an({minSnap:mn.current,immediate:!0}),mn.current=0,Promise.resolve(an({y:0,maxHeight:ht.current,maxSnap:qe.current,immediate:Sn.current})).then(function(){return Promise.resolve(an({ready:0,immediate:!0})).then(function(){})})}catch(Te){return Promise.reject(Te)}},[an,Sn])}}),$l=Ts[0],Gn=Ts[1];J.useEffect(function(){ve&&Gn(c?"OPEN":"CLOSE")},[c,Gn,ve]),bc(function(){(or||gn||Jt)&&Gn("RESIZE")},[or,gn,Jt,Gn]),J.useEffect(function(){return function(){An.current.deactivate(),be.current.deactivate(),Oi.current.deactivate()}},[Oi,be,An]),J.useImperativeHandle(e,function(){return{snapTo:function(ae,Se){var Te=Se===void 0?{}:Se,Ge=Te.velocity,_t=Ge===void 0?1:Ge,$e=Te.source,je=$e===void 0?"custom":$e;Gn("SNAP",{payload:{y:Ht.current(ae),velocity:_t,source:je}})},get height(){return mn.current}}},[Gn]),J.useEffect(function(){var ae=Be.current,Se=function(Ge){Pn.current&&Ge.preventDefault()},Te=function(Ge){ae.scrollTop<0&&(requestAnimationFrame(function(){ae.style.overflow="hidden",ae.scrollTop=0,ae.style.removeProperty("overflow")}),Ge.preventDefault())};return V&&(ae.addEventListener("scroll",Se),ae.addEventListener("touchmove",Se),ae.addEventListener("touchstart",Te)),function(){ae.removeEventListener("scroll",Se),ae.removeEventListener("touchmove",Se),ae.removeEventListener("touchstart",Te)}},[V,Be]);var Ai=kz(function(ae){var Se=ae.args,Te=(Se=Se===void 0?[]:Se)[0],Ge=(Te=Te===void 0?{}:Te).closeOnTap,_t=Ge!==void 0&&Ge,$e=Te.isContentDragging,je=$e!==void 0&&$e,ot=ae.cancel,it=ae.direction[1],De=ae.down,Ke=ae.first,yn=ae.last,Fi=ae.memo,en=Fi===void 0?he.y.getValue():Fi,xt=ae.tap,Et=ae.velocity,ni=-1*ae.movement[1];if(!ue.current)return ot(),en;if(E&&_t&&xt)return ot(),setTimeout(function(){return E()},0),en;if(xt)return en;var Ft=en+ni,Kn=ni*Et,Bi=Math.max(Zt.current,Math.min(qe.current,Ft+2*Kn));if(!De&&E&&it>0&&Ft+Kn<Zt.current/2)return ot(),E(),en;var kn=De?E||Zt.current!==qe.current?Ec(Ft,E?0:Zt.current,qe.current,.55):Ft<Zt.current?Ec(Ft,Zt.current,2*qe.current,.55):Ec(Ft,Zt.current/2,qe.current,.55):Bi;return V&&je?(kn>=qe.current&&(kn=qe.current),en===qe.current&&Be.current.scrollTop>0&&(kn=qe.current),Pn.current=kn<qe.current):Pn.current=!1,Ke&&Gn("DRAG"),yn?(Gn("SNAP",{payload:{y:kn,velocity:Et>.05?Et:1,source:"dragging"}}),en):(Ae({y:kn,ready:1,maxHeight:ht.current,maxSnap:qe.current,minSnap:Zt.current,immediate:!0,config:{velocity:Et}}),en)},{filterTaps:!0});if(Number.isNaN(qe.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(Zt.current))throw new TypeError("minSnapRef is NaN!!");var bn=(function(ae){var Se,Te=ae.spring,Ge=cl([Te.y,Te.maxHeight],function(De,Ke){return Math.round(Wu(Ke-De,0,16))+"px"}),_t=cl([Te.y,Te.minSnap,Te.maxSnap],function(De,Ke,yn){return Wu(De,Ke,yn)+"px"}),$e=cl([Te.y,Te.minSnap,Te.maxSnap],function(De,Ke,yn){return De<Ke?Ke-De+"px":De>yn?yn-De+"px":"0px"}),je=cl([Te.y,Te.maxSnap],function(De,Ke){return De>=Ke?Math.ceil(De-Ke):0}),ot=cl([Te.y,Te.minSnap],function(De,Ke){if(!Ke)return 0;var yn=Math.max(Ke/2-45,0);return Wu((De-yn)*(1/(Math.min(Ke/2+45,Ke)-yn)+0),0,1)}),it=cl([Te.y,Te.minSnap],function(De,Ke){return Ke?Wu(De/Ke,0,1):0});return(Se={})["--rsbs-content-opacity"]=ot,Se["--rsbs-backdrop-opacity"]=it,Se["--rsbs-antigap-scale-y"]=je,Se["--rsbs-overlay-translate-y"]=$e,Se["--rsbs-overlay-rounded"]=Ge,Se["--rsbs-overlay-h"]=_t,Se})({spring:he});return _n.createElement(Qq.div,Wn({},O,{"data-rsbs-root":!0,"data-rsbs-state":LH.find($l.matches),"data-rsbs-is-blocking":F,"data-rsbs-is-dismissable":!!E,"data-rsbs-has-header":!!u,"data-rsbs-has-footer":!!a,className:s,ref:Le,style:Wn({},bn,X,{opacity:he.ready})}),i,F&&_n.createElement("div",Wn({key:"backdrop","data-rsbs-backdrop":!0},Ai({closeOnTap:!0}))),_n.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:di,onKeyDown:function(ae){ae.key==="Escape"&&(ae.stopPropagation(),E&&E())}},u!==!1&&_n.createElement("div",Wn({key:"header","data-rsbs-header":!0,ref:At},Ai()),u),_n.createElement("div",Wn({key:"scroll","data-rsbs-scroll":!0,ref:Be},V?Ai({isContentDragging:!0}):{}),_n.createElement("div",{"data-rsbs-content":!0,ref:zt},n)),a&&_n.createElement("div",Wn({key:"footer",ref:ti,"data-rsbs-footer":!0},Ai()),a)))}),LH=["closed","opening","open","closing","dragging","snapping","resizing"];function VH(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function OH(t){return t.minHeight}var UH=["onSpringStart","onSpringEnd","skipInitialTransition"],f0=J.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,s=t.skipInitialTransition,a=uh(t,UH),u=J.useState(!1),c=u[0],d=u[1],h=J.useRef(),y=J.useRef(null),E=J.useRef(s&&a.open?"OPEN":"CLOSED");bc(function(){if(a.open)return cancelAnimationFrame(h.current),d(!0),function(){E.current="CLOSED"}},[a.open]);var T=J.useCallback(function(D){return Promise.resolve(n==null?void 0:n(D)).then(function(){D.type==="OPEN"&&cancelAnimationFrame(h.current)})},[n]),C=J.useCallback(function(D){return Promise.resolve(i==null?void 0:i(D)).then(function(){D.type==="CLOSE"&&(h.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?_n.createElement(sB,{"data-rsbs-portal":!0},_n.createElement(kH,Wn({},a,{lastSnapRef:y,ref:e,initialState:E.current,onSpringStart:T,onSpringEnd:C}))):null});const FH=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,suggestedOutfits:a,onClose:u,weatherInfo:c,weatherError:d})=>{const h=document.documentElement.classList.contains("dark");return b.jsx(f0,{open:t,onDismiss:u,className:h?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crateur de Tenues"}),b.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:y})=>y*.6,snapPoints:({minHeight:y,maxHeight:E})=>[y,E*.6,E*.85],children:b.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[b.jsx(XR,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,weatherInfo:c,weatherError:d}),s&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[b.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),a.length>0&&b.jsx(ZR,{outfits:a,allClothingItems:e,allClothingSets:n})]})})},BH=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s,vacationPlan:a,onCreateSet:u,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return b.jsx(f0,{open:t,onDismiss:c,className:d?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),b.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.6,snapPoints:({maxHeight:h})=>[h*.55,h*.85],children:b.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[b.jsx(ex,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s}),s&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[b.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),a&&b.jsx(tx,{plan:a,allClothingItems:e,allClothingSets:n,onCreateSet:u})]})})},qH=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:s})=>{const[a,u]=J.useState(new Set),c=new Set(n.flatMap(C=>C.itemIds)),h=e.filter(C=>!c.has(C.id)).reduce((C,D)=>(C[D.category]||(C[D.category]=[]),C[D.category].push(D),C),{}),y=C=>{u(D=>{const k=new Set(D);return k.has(C)?k.delete(C):k.add(C),k})},E=()=>{if(a.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const C=window.prompt("Donnez un nom  cet ensemble :");C&&s(C,Array.from(a))},T=document.documentElement.classList.contains("dark");return b.jsx(f0,{open:t,onDismiss:i,className:T?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),b.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:a.size>0&&b.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:b.jsxs("button",{onClick:E,disabled:a.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[b.jsx(_p,{}),"Lier ",a.size," article",a.size>1?"s":""]})}),defaultSnap:({minHeight:C})=>C,snapPoints:({minHeight:C,maxHeight:D})=>[C,D*.85],children:b.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[b.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),b.jsx("div",{className:"space-y-4",children:Object.keys(h).map(C=>h[C].length>0&&b.jsxs("div",{children:[b.jsx("h3",{className:"font-semibold text-lg mb-2",children:C}),b.jsx("div",{className:"grid grid-cols-3 gap-3",children:h[C].map(D=>{const k=a.has(D.id);return b.jsxs("button",{onClick:()=>y(D.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:k?"#D4AF37":"transparent"},children:[k&&b.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:b.jsx(QR,{})}),b.jsx("div",{className:"aspect-square",children:b.jsx("img",{src:D.imageSrc,alt:D.analysis,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),b.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:D.analysis})]},D.id)})})]},C))})]})})},zH=async t=>{try{const e=dp(hp,"users",t,"items");return(await eR(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},HH=async(t,e)=>{try{const n=dp(hp,"users",t,"items");return(await tR(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},GH=async t=>{try{const e=dp(hp,"users",t,"sets");return(await eR(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}},KH=async(t,e)=>{try{const n=dp(hp,"users",t,"sets");return(await tR(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},JH=async(t,e,n)=>{try{const i=l4(m4,`users/${t}/clothing/${n}.jpg`);return await o4(i,e,"data_url"),await a4(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},Xx=J.createContext(void 0),YH=({children:t,user:e})=>{const[n,i]=J.useState([]),[s,a]=J.useState([]),[u,c]=J.useState(!1);J.useEffect(()=>{(async()=>{if(e)try{const k=await zH(e.uid);i(k);const U=await GH(e.uid);a(U)}catch(k){console.error("Erreur lors du chargement des donnes:",k)}else i([]),a([])})()},[e]);const d=J.useCallback(async D=>{if(!(D.length===0||!e)){c(!0);try{const k=D.map(X=>new Promise((G,I)=>{const R=new FileReader;R.onload=()=>G(R.result),R.onerror=I,R.readAsDataURL(X)})),U=await Promise.all(k),H=U.map(X=>X.split(",")[1]),F=await N9(H),B=Math.min(F.length,D.length),Y=[];for(let X=0;X<B;X++){const G=F[X];try{const I=await HH(e.uid,G),R=await JH(e.uid,U[X],I);await y(e.uid,I,{imageSrc:R}),Y.push({...G,id:I,imageSrc:R})}catch(I){console.error(`chec de cration/upload pour ${D[X].name}.`,I)}}i(X=>[...X,...Y])}catch(k){console.error("Erreur lors de l'analyse par lot:",k)}finally{c(!1)}}},[e]),h=J.useCallback(async D=>{if(e)try{await h(e.uid,D),i(k=>k.filter(U=>U.id!==D)),a(k=>k.map(U=>({...U,itemIds:U.itemIds.filter(H=>H!==D)})))}catch(k){console.error("Erreur suppression item:",k)}},[e]),y=J.useCallback(async D=>{if(e)try{await y(e.uid,D.id,D),i(k=>k.map(U=>U.id===D.id?D:U))}catch(k){console.error("Erreur mise  jour item:",k)}},[e]),E=J.useCallback(async(D,k)=>{var F;if(!e)return;const U=((F=n.find(B=>B.id===k[0]))==null?void 0:F.imageSrc)||"",H={name:D,itemIds:k,imageSrc:U};try{const B=await KH(e.uid,H);a(Y=>[...Y,{...H,id:B}])}catch(B){console.error("Erreur cration set:",B)}},[e,n]),T=J.useCallback(async D=>{if(e)try{await T(e.uid,D),a(k=>k.filter(U=>U.id!==D))}catch(k){console.error("Erreur suppression set:",k)}},[e]),C={clothingItems:n,clothingSets:s,isAnalyzing:u,analyzeClothingItems:d,deleteClothingItem:h,updateClothingItem:y,createClothingSet:E,deleteClothingSet:T};return b.jsx(Xx.Provider,{value:C,children:t})},$H=()=>{const t=J.useContext(Xx);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},jH=()=>{const[t,e]=J.useState(null),[n,i]=J.useState(null),[s,a]=J.useState([]),[u,c]=J.useState(!1),[d,h]=J.useState(null),[y,E]=J.useState(!1),[T,C]=J.useState(null),[D,k]=J.useState(!1),[U,H]=J.useState("home"),[F,B]=J.useState(!1),[Y,X]=J.useState(!1),[G,I]=J.useState(!1),[R,x]=J.useState(null),[L,M]=J.useState(null),{clothingItems:V,clothingSets:O,isAnalyzing:Ce,analyzeClothingItems:ve,deleteClothingItem:te,createClothingSet:ue,updateClothingItem:pe,deleteClothingSet:Re}=$H(),ge=_n.useMemo(()=>V||[],[V]),q=_n.useMemo(()=>O||[],[O]),ee=_n.useMemo(()=>new Set(q.flatMap(be=>be.itemIds||[])),[q]);J.useEffect(()=>{const be=async Ut=>{const Jt=Ut.coords.latitude,gn=Ut.coords.longitude,or=YR.openWeatherApiKey,Ui=`https://api.openweathermap.org/data/2.5/weather?lat=${Jt}&lon=${gn}&appid=${or}&units=metric&lang=fr`;try{const ht=await fetch(Ui);if(!ht.ok)throw new Error("Impossible de rcuprer la mto.");const Zt=await ht.json(),qe=`${Math.round(Zt.main.temp)}C, ${Zt.weather[0].description},  ${Zt.name}`;x(qe),M(null)}catch{M("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(be,()=>M("Activez la golocalisation pour la mto.")):M("Golocalisation non supporte.")},[]);const fe=J.useCallback(async(be,Ut)=>{if(ge.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const Jt=R?`Mto actuelle : ${R}. Occasion : ${be}`:`Occasion : ${be}`;try{const gn=await M9(ge,q,Jt,Ut);a(gn)}catch(gn){i(gn instanceof Error?gn.message:"Erreur inconnue")}finally{c(!1)}},[ge,q,R]),he=J.useCallback(async(be,Ut)=>{if(ge.length===0){i("Veuillez d'abord ajouter des vtements.");return}E(!0),i(null);try{const Jt=await k9(ge,q,be,Ut);h(Jt)}catch(Jt){i(Jt instanceof Error?Jt.message:"Erreur inconnue")}finally{E(!1)}},[ge,q]),Ae=J.useCallback(async()=>{if(ge.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}k(!0),i(null);try{const be=await P9(ge,q);C(be)}catch(be){i(be instanceof Error?be.message:"Erreur inconnue")}finally{k(!1)}},[ge,q]),Le=J.useCallback(()=>B(!0),[]),Be=J.useCallback(()=>X(!0),[]),zt=be=>e(be),At=()=>e(null),ti=be=>{te(be).catch(i),e(null)},di=be=>{pe(be).catch(i),e(be)},mn=be=>{const Ut=`Focus sur l'article : ${be.analysis}`;fe(Ut,be),e(null),window.innerWidth<768&&B(!0)},Mn=J.useCallback((be,Ut)=>{ue(be,Ut).catch(i)},[ue]),Pn=J.useCallback(be=>{Re(be).catch(i)},[Re]),Sn={hauts:ge.filter(be=>be.category==="Hauts").length,bas:ge.filter(be=>be.category==="Bas").length,chaussures:ge.filter(be=>be.category==="Chaussures").length,accessoires:ge.filter(be=>be.category==="Accessoires").length},An=U==="home"?[]:ge.filter(be=>U==="hauts"?be.category==="Hauts":U==="bas"?be.category==="Bas":U==="chaussures"?be.category==="Chaussures":U==="accessoires"?be.category==="Accessoires":!1),Oi=F||Y||G||!!t||!!T;return b.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&b.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[b.jsx("strong",{className:"font-bold",children:"Erreur: "}),b.jsx("span",{className:"block sm:inline",children:n})]}),b.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:b.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[ge.length>=3&&b.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),b.jsx("button",{onClick:Ae,disabled:D,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:D?"Analyse...":"Analyser ma garde-robe"})]}),b.jsx("div",{className:"hidden md:block",children:b.jsx(J9,{onAnalyze:ve,isAnalyzing:Ce})}),b.jsx("div",{className:"hidden md:block",children:b.jsx(j9,{clothingItems:ge,clothingSets:q,onItemClick:zt,onDeleteItem:ti,onCreateSet:Mn})}),b.jsxs("div",{className:"md:hidden",children:[U==="home"&&b.jsx(X9,{onAnalyzeWardrobe:Ae,onScrollToOutfits:Le,onScrollToVacation:Be,onStartSetCreation:()=>I(!0),isAnalyzingWardrobe:D,clothingCount:ge.length}),U!=="home"&&b.jsxs("div",{className:"pb-24",children:[b.jsxs("div",{className:"text-center py-6 px-4",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:U}),b.jsxs("p",{className:"text-sm text-gray-500",children:[An.length," vtement",An.length>1?"s":""]})]}),An.length>0?b.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:An.map(be=>b.jsxs("div",{onClick:()=>zt(be),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[ee.has(be.id)&&b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:b.jsx(_p,{})}),b.jsx("div",{className:"aspect-square",children:b.jsx("img",{src:be.imageSrc,alt:be.analysis,className:"w-full h-full object-cover"})}),b.jsxs("div",{className:"p-3",children:[b.jsx("p",{className:"text-sm font-medium line-clamp-2",children:be.analysis}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:be.color})]})]},be.id))}):b.jsx("div",{className:"text-center py-12 px-4",children:b.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]}),b.jsxs("div",{className:"space-y-10 hidden md:block",children:[b.jsx("div",{id:"outfit-generator",children:b.jsx(XR,{clothingItems:ge,clothingSets:q,onGenerate:fe,isGenerating:u,weatherInfo:R,weatherError:L})}),s.length>0&&b.jsx(ZR,{outfits:s,allClothingItems:ge,allClothingSets:q}),b.jsx("div",{id:"vacation-planner",children:b.jsx(ex,{clothingItems:ge,clothingSets:q,onGeneratePlan:he,isGenerating:y})}),d&&b.jsx(tx,{plan:d,allClothingItems:ge,allClothingSets:q})]})]})}),t&&b.jsx(W9,{item:t,clothingSets:q,onClose:At,onUpdate:di,onGenerateFrom:mn,onRemoveSet:Pn}),T&&b.jsx(eB,{analysis:T,onClose:()=>C(null)}),b.jsx(Q9,{onFilesSelected:ve,isAnalyzing:Ce,isOtherModalOpen:Oi}),b.jsx(Z9,{activeTab:U,onTabChange:H,counts:Sn}),b.jsx(FH,{open:F,clothingItems:ge,clothingSets:q,onGenerate:fe,isGenerating:u,suggestedOutfits:s,onClose:()=>B(!1),weatherInfo:R,weatherError:L}),b.jsx(BH,{open:Y,clothingItems:ge,clothingSets:q,onGeneratePlan:he,isGenerating:y,vacationPlan:d,onCreateSet:Mn,onClose:()=>X(!1)}),b.jsx(qH,{open:G,clothingItems:ge,clothingSets:q,onClose:()=>I(!1),onCreateSet:(be,Ut)=>{Mn(be,Ut),I(!1)}})]})},WH=()=>{const[t,e]=J.useState(null),[n,i]=J.useState("dark");J.useEffect(()=>{const a=EM(nc,u=>{e(u)});return()=>a()},[]),J.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const s=()=>{i(a=>a==="light"?"dark":"light")};return b.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?b.jsxs(b.Fragment,{children:[b.jsx(K9,{theme:n,toggleTheme:s,children:b.jsx(Hb,{user:t})}),b.jsx(YH,{user:t,children:b.jsx(jH,{})})]}):b.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:b.jsx(Hb,{user:t})})})},Zx=document.getElementById("root");if(!Zx)throw new Error("L'lment root est introuvable dans le DOM");const QH=VN.createRoot(Zx);QH.render(b.jsx(_n.StrictMode,{children:b.jsx(WH,{})}));
