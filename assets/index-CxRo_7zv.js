(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function sS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vp={exports:{}},Fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function Ww(){if(Kv)return Fl;Kv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Fl.Fragment=e,Fl.jsx=t,Fl.jsxs=t,Fl}var $v;function Xw(){return $v||($v=1,vp.exports=Ww()),vp.exports}var I=Xw(),Tp={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function jw(){if(Qv)return be;Qv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,G={};function te(O,Z,oe){this.props=O,this.context=Z,this.refs=G,this.updater=oe||q}te.prototype.isReactComponent={},te.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},te.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function K(){}K.prototype=te.prototype;function W(O,Z,oe){this.props=O,this.context=Z,this.refs=G,this.updater=oe||q}var se=W.prototype=new K;se.constructor=W,B(se,te.prototype),se.isPureReactComponent=!0;var de=Array.isArray;function ue(){}var M={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function N(O,Z,oe){var pe=oe.ref;return{$$typeof:n,type:O,key:Z,ref:pe!==void 0?pe:null,props:oe}}function D(O,Z){return N(O.type,Z,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function L(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return Z[oe]})}var P=/\/+/g;function ot(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):Z.toString(36)}function ht(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ue,ue):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function H(O,Z,oe,pe,Ae){var Me=typeof O;(Me==="undefined"||Me==="boolean")&&(O=null);var Pe=!1;if(O===null)Pe=!0;else switch(Me){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(O.$$typeof){case n:case e:Pe=!0;break;case v:return Pe=O._init,H(Pe(O._payload),Z,oe,pe,Ae)}}if(Pe)return Ae=Ae(O),Pe=pe===""?"."+ot(O,0):pe,de(Ae)?(oe="",Pe!=null&&(oe=Pe.replace(P,"$&/")+"/"),H(Ae,Z,oe,"",function(qe){return qe})):Ae!=null&&(V(Ae)&&(Ae=D(Ae,oe+(Ae.key==null||O&&O.key===Ae.key?"":(""+Ae.key).replace(P,"$&/")+"/")+Pe)),Z.push(Ae)),1;Pe=0;var ce=pe===""?".":pe+":";if(de(O))for(var we=0;we<O.length;we++)pe=O[we],Me=ce+ot(pe,we),Pe+=H(pe,Z,oe,Me,Ae);else if(we=b(O),typeof we=="function")for(O=we.call(O),we=0;!(pe=O.next()).done;)pe=pe.value,Me=ce+ot(pe,we++),Pe+=H(pe,Z,oe,Me,Ae);else if(Me==="object"){if(typeof O.then=="function")return H(ht(O),Z,oe,pe,Ae);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ae(O,Z,oe){if(O==null)return O;var pe=[],Ae=0;return H(O,pe,"","",function(Me){return Z.call(oe,Me,Ae++)}),pe}function ye(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var Ge=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Ke={map:ae,forEach:function(O,Z,oe){ae(O,function(){Z.apply(this,arguments)},oe)},count:function(O){var Z=0;return ae(O,function(){Z++}),Z},toArray:function(O){return ae(O,function(Z){return Z})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return be.Activity=E,be.Children=Ke,be.Component=te,be.Fragment=t,be.Profiler=o,be.PureComponent=W,be.StrictMode=i,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,be.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},be.cache=function(O){return function(){return O.apply(null,arguments)}},be.cacheSignal=function(){return null},be.cloneElement=function(O,Z,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=B({},O.props),Ae=O.key;if(Z!=null)for(Me in Z.key!==void 0&&(Ae=""+Z.key),Z)!x.call(Z,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&Z.ref===void 0||(pe[Me]=Z[Me]);var Me=arguments.length-2;if(Me===1)pe.children=oe;else if(1<Me){for(var Pe=Array(Me),ce=0;ce<Me;ce++)Pe[ce]=arguments[ce+2];pe.children=Pe}return N(O.type,Ae,pe)},be.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},be.createElement=function(O,Z,oe){var pe,Ae={},Me=null;if(Z!=null)for(pe in Z.key!==void 0&&(Me=""+Z.key),Z)x.call(Z,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ae[pe]=Z[pe]);var Pe=arguments.length-2;if(Pe===1)Ae.children=oe;else if(1<Pe){for(var ce=Array(Pe),we=0;we<Pe;we++)ce[we]=arguments[we+2];Ae.children=ce}if(O&&O.defaultProps)for(pe in Pe=O.defaultProps,Pe)Ae[pe]===void 0&&(Ae[pe]=Pe[pe]);return N(O,Me,Ae)},be.createRef=function(){return{current:null}},be.forwardRef=function(O){return{$$typeof:d,render:O}},be.isValidElement=V,be.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ye}},be.memo=function(O,Z){return{$$typeof:m,type:O,compare:Z===void 0?null:Z}},be.startTransition=function(O){var Z=M.T,oe={};M.T=oe;try{var pe=O(),Ae=M.S;Ae!==null&&Ae(oe,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(ue,Ge)}catch(Me){Ge(Me)}finally{Z!==null&&oe.types!==null&&(Z.types=oe.types),M.T=Z}},be.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},be.use=function(O){return M.H.use(O)},be.useActionState=function(O,Z,oe){return M.H.useActionState(O,Z,oe)},be.useCallback=function(O,Z){return M.H.useCallback(O,Z)},be.useContext=function(O){return M.H.useContext(O)},be.useDebugValue=function(){},be.useDeferredValue=function(O,Z){return M.H.useDeferredValue(O,Z)},be.useEffect=function(O,Z){return M.H.useEffect(O,Z)},be.useEffectEvent=function(O){return M.H.useEffectEvent(O)},be.useId=function(){return M.H.useId()},be.useImperativeHandle=function(O,Z,oe){return M.H.useImperativeHandle(O,Z,oe)},be.useInsertionEffect=function(O,Z){return M.H.useInsertionEffect(O,Z)},be.useLayoutEffect=function(O,Z){return M.H.useLayoutEffect(O,Z)},be.useMemo=function(O,Z){return M.H.useMemo(O,Z)},be.useOptimistic=function(O,Z){return M.H.useOptimistic(O,Z)},be.useReducer=function(O,Z,oe){return M.H.useReducer(O,Z,oe)},be.useRef=function(O){return M.H.useRef(O)},be.useState=function(O){return M.H.useState(O)},be.useSyncExternalStore=function(O,Z,oe){return M.H.useSyncExternalStore(O,Z,oe)},be.useTransition=function(){return M.H.useTransition()},be.version="19.2.0",be}var Wv;function vm(){return Wv||(Wv=1,Tp.exports=jw()),Tp.exports}var Te=vm();const Zw=sS(Te);var Ep={exports:{}},Hl={},Sp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function eR(){return Xv||(Xv=1,(function(n){function e(H,ae){var ye=H.length;H.push(ae);e:for(;0<ye;){var Ge=ye-1>>>1,Ke=H[Ge];if(0<o(Ke,ae))H[Ge]=ae,H[ye]=Ke,ye=Ge;else break e}}function t(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ae=H[0],ye=H.pop();if(ye!==ae){H[0]=ye;e:for(var Ge=0,Ke=H.length,O=Ke>>>1;Ge<O;){var Z=2*(Ge+1)-1,oe=H[Z],pe=Z+1,Ae=H[pe];if(0>o(oe,ye))pe<Ke&&0>o(Ae,oe)?(H[Ge]=Ae,H[pe]=ye,Ge=pe):(H[Ge]=oe,H[Z]=ye,Ge=Z);else if(pe<Ke&&0>o(Ae,ye))H[Ge]=Ae,H[pe]=ye,Ge=pe;else break e}}return ae}function o(H,ae){var ye=H.sortIndex-ae.sortIndex;return ye!==0?ye:H.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],m=[],v=1,E=null,S=3,b=!1,q=!1,B=!1,G=!1,te=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function se(H){for(var ae=t(m);ae!==null;){if(ae.callback===null)i(m);else if(ae.startTime<=H)i(m),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(m)}}function de(H){if(B=!1,se(H),!q)if(t(p)!==null)q=!0,ue||(ue=!0,L());else{var ae=t(m);ae!==null&&ht(de,ae.startTime-H)}}var ue=!1,M=-1,x=5,N=-1;function D(){return G?!0:!(n.unstable_now()-N<x)}function V(){if(G=!1,ue){var H=n.unstable_now();N=H;var ae=!0;try{e:{q=!1,B&&(B=!1,K(M),M=-1),b=!0;var ye=S;try{t:{for(se(H),E=t(p);E!==null&&!(E.expirationTime>H&&D());){var Ge=E.callback;if(typeof Ge=="function"){E.callback=null,S=E.priorityLevel;var Ke=Ge(E.expirationTime<=H);if(H=n.unstable_now(),typeof Ke=="function"){E.callback=Ke,se(H),ae=!0;break t}E===t(p)&&i(p),se(H)}else i(p);E=t(p)}if(E!==null)ae=!0;else{var O=t(m);O!==null&&ht(de,O.startTime-H),ae=!1}}break e}finally{E=null,S=ye,b=!1}ae=void 0}}finally{ae?L():ue=!1}}}var L;if(typeof W=="function")L=function(){W(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ot=P.port2;P.port1.onmessage=V,L=function(){ot.postMessage(null)}}else L=function(){te(V,0)};function ht(H,ae){M=te(function(){H(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(H){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ye=S;S=ae;try{return H()}finally{S=ye}},n.unstable_requestPaint=function(){G=!0},n.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ye=S;S=H;try{return ae()}finally{S=ye}},n.unstable_scheduleCallback=function(H,ae,ye){var Ge=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ge+ye:Ge):ye=Ge,H){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ye+Ke,H={id:v++,callback:ae,priorityLevel:H,startTime:ye,expirationTime:Ke,sortIndex:-1},ye>Ge?(H.sortIndex=ye,e(m,H),t(p)===null&&H===t(m)&&(B?(K(M),M=-1):B=!0,ht(de,ye-Ge))):(H.sortIndex=Ke,e(p,H),q||b||(q=!0,ue||(ue=!0,L()))),H},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(H){var ae=S;return function(){var ye=S;S=ae;try{return H.apply(this,arguments)}finally{S=ye}}}})(Ap)),Ap}var jv;function tR(){return jv||(jv=1,Sp.exports=eR()),Sp.exports}var Cp={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function nR(){if(Zv)return on;Zv=1;var n=vm();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:m,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(p,m,null,v)},on.flushSync=function(p){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=m,i.p=v,i.d.f()}},on.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},on.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},on.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:b}):v==="script"&&i.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},on.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},on.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);i.d.L(p,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},on.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=d(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},on.requestFormReset=function(p){i.d.r(p)},on.unstable_batchedUpdates=function(p,m){return p(m)},on.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},on.useFormStatus=function(){return u.H.useHostTransitionStatus()},on.version="19.2.0",on}var e0;function iR(){if(e0)return Cp.exports;e0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cp.exports=nR(),Cp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function sR(){if(t0)return Hl;t0=1;var n=tR(),e=vm(),t=iR();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function m(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return p(y),s;if(_===c)return p(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var A=!1,w=y.child;w;){if(w===l){A=!0,l=y,c=_;break}if(w===c){A=!0,c=y,l=_;break}w=w.sibling}if(!A){for(w=_.child;w;){if(w===l){A=!0,l=_,c=y;break}if(w===c){A=!0,c=_,l=y;break}w=w.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),W=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function ot(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case te:return"Profiler";case G:return"StrictMode";case de:return"Suspense";case ue:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case q:return"Portal";case W:return s.displayName||"Context";case K:return(s._context.displayName||"Context")+".Consumer";case se:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:ot(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return ot(s(r))}catch{}}return null}var ht=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ge=[],Ke=-1;function O(s){return{current:s}}function Z(s){0>Ke||(s.current=Ge[Ke],Ge[Ke]=null,Ke--)}function oe(s,r){Ke++,Ge[Ke]=s.current,s.current=r}var pe=O(null),Ae=O(null),Me=O(null),Pe=O(null);function ce(s,r){switch(oe(Me,r),oe(Ae,s),oe(pe,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?gv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=gv(r),s=yv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(pe),oe(pe,s)}function we(){Z(pe),Z(Ae),Z(Me)}function qe(s){s.memoizedState!==null&&oe(Pe,s);var r=pe.current,l=yv(r,s.type);r!==l&&(oe(Ae,s),oe(pe,l))}function fn(s){Ae.current===s&&(Z(pe),Z(Ae)),Pe.current===s&&(Z(Pe),Ll._currentValue=ye)}var Bn,As;function hn(s){if(Bn===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Bn=r&&r[1]||"",As=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bn+s+As}var Rt=!1;function ii(s,r){if(!s||Rt)return"";Rt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var $=Q}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(Q){$=Q}s.call(ne.prototype)}}else{try{throw Error()}catch(Q){$=Q}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),A=_[0],w=_[1];if(A&&w){var k=A.split(`
`),Y=w.split(`
`);for(y=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===k.length||y===Y.length)for(c=k.length-1,y=Y.length-1;1<=c&&0<=y&&k[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(k[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||k[c]!==Y[y]){var j=`
`+k[c].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=c&&0<=y);break}}}finally{Rt=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?hn(l):""}function Oi(s,r){switch(s.tag){case 26:case 27:case 5:return hn(s.type);case 16:return hn("Lazy");case 13:return s.child!==r&&r!==null?hn("Suspense Fallback"):hn("Suspense");case 19:return hn("SuspenseList");case 0:case 15:return ii(s.type,!1);case 11:return ii(s.type.render,!1);case 1:return ii(s.type,!0);case 31:return hn("Activity");default:return""}}function si(s){try{var r="",l=null;do r+=Oi(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var bo=Object.prototype.hasOwnProperty,Vr=n.unstable_scheduleCallback,xo=n.unstable_cancelCallback,yf=n.unstable_shouldYield,Ba=n.unstable_requestPaint,Yt=n.unstable_now,xu=n.unstable_getCurrentPriorityLevel,Vt=n.unstable_ImmediatePriority,qt=n.unstable_UserBlockingPriority,qi=n.unstable_NormalPriority,Nu=n.unstable_LowPriority,Fa=n.unstable_IdlePriority,_f=n.log,Ur=n.unstable_setDisableYieldValue,Cs=null,sn=null;function Fn(s){if(typeof _f=="function"&&Ur(s),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(Cs,s)}catch{}}var pn=Math.clz32?Math.clz32:Mu,vf=Math.log,Ha=Math.LN2;function Mu(s){return s>>>=0,s===0?32:31-(vf(s)/Ha|0)|0}var Lr=256,gi=262144,Is=4194304;function ri(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Hn(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?y=ri(c):(A&=w,A!==0?y=ri(A):l||(l=w&~s,l!==0&&(y=ri(l))))):(w=c&~_,w!==0?y=ri(w):A!==0?y=ri(A):l||(l=c&~s,l!==0&&(y=ri(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function ws(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function No(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function za(){var s=Is;return Is<<=1,(Is&62914560)===0&&(Is=4194304),s}function Bi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Rs(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Kt(s,r,l,c,y,_){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var w=s.entanglements,k=s.expirationTimes,Y=s.hiddenUpdates;for(l=A&~l;0<l;){var j=31-pn(l),ne=1<<j;w[j]=0,k[j]=-1;var $=Y[j];if($!==null)for(Y[j]=null,j=0;j<$.length;j++){var Q=$[j];Q!==null&&(Q.lane&=-536870913)}l&=~ne}c!==0&&Ga(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(A&~r))}function Ga(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-pn(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function bs(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-pn(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function xs(s,r){var l=r&-r;return l=(l&42)!==0?1:Ja(l),(l&(s.suspendedLanes|r))!==0?0:l}function Ja(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ya(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Fi(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:Bv(s.type))}function Du(s,r){var l=ae.p;try{return ae.p=s,r()}finally{ae.p=l}}var yi=Math.random().toString(36).slice(2),yt="__reactFiber$"+yi,$t="__reactProps$"+yi,_i="__reactContainer$"+yi,Ns="__reactEvents$"+yi,vi="__reactListeners$"+yi,Pu="__reactHandles$"+yi,Ka="__reactResources$"+yi,Hi="__reactMarker$"+yi;function Or(s){delete s[yt],delete s[$t],delete s[Ns],delete s[vi],delete s[Pu]}function zi(s){var r=s[yt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[_i]||l[yt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Cv(s);s!==null;){if(l=s[yt])return l;s=Cv(s)}return r}s=l,l=s.parentNode}return null}function Gi(s){if(s=s[yt]||s[_i]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function qr(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function oi(s){var r=s[Ka];return r||(r=s[Ka]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(s){s[Hi]=!0}var Mo=new Set,Ms={};function mn(s,r){Ti(s,r),Ti(s+"Capture",r)}function Ti(s,r){for(Ms[s]=r,s=0;s<r.length;s++)Mo.add(r[s])}var Tf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$a={},Qa={};function ku(s){return bo.call(Qa,s)?!0:bo.call($a,s)?!1:Tf.test(s)?Qa[s]=!0:($a[s]=!0,!1)}function Ds(s,r,l){if(ku(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Ps(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function zn(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function gn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Vu(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ef(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,_.call(this,A)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Do(s){if(!s._valueTracker){var r=Vu(s)?"checked":"value";s._valueTracker=Ef(s,r,""+s[r])}}function Wa(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Vu(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Po(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ji=/[\n"\\]/g;function _t(s){return s.replace(Ji,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ks(s,r,l,c,y,_,A,w){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),r!=null?A==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+gn(r)):s.value!==""+gn(r)&&(s.value=""+gn(r)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),r!=null?ko(s,A,gn(r)):l!=null?ko(s,A,gn(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+gn(w):s.removeAttribute("name")}function Br(s,r,l,c,y,_,A,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Do(s);return}l=l!=null?""+gn(l):"",r=r!=null?""+gn(r):l,w||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=w?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),Do(s)}function ko(s,r,l){r==="number"&&Po(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function $e(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+gn(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Fr(s,r,l){if(r!=null&&(r=""+gn(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+gn(l):""}function Vs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(ht(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=gn(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Do(s)}function Gn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Sf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xa(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Sf.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Uu(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&Xa(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&Xa(s,_,r[_])}function ja(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Af=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(s){return Cf.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Bt(){}var Vo=null;function Uo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yi=null,Nn=null;function Lu(s){var r=Gi(s);if(r&&(s=r.stateNode)){var l=s[$t]||null;e:switch(s=r.stateNode,r.type){case"input":if(ks(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_t(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[$t]||null;if(!y)throw Error(i(90));ks(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Wa(c)}break e;case"textarea":Fr(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&$e(s,!!l.multiple,r,!1)}}}var Za=!1;function Ou(s,r,l){if(Za)return s(r,l);Za=!0;try{var c=s(r);return c}finally{if(Za=!1,(Yi!==null||Nn!==null)&&(kc(),Yi&&(r=Yi,s=Nn,Nn=Yi=null,Lu(r),s)))for(r=0;r<s.length;r++)Lu(s[r])}}function En(s,r){var l=s.stateNode;if(l===null)return null;var c=l[$t]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),el=!1;if(ai)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){el=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{el=!1}var Mn=null,Lo=null,Ai=null;function Us(){if(Ai)return Ai;var s,r=Lo,l=r.length,c,y="value"in Mn?Mn.value:Mn.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&r[l-c]===y[_-c];c++);return Ai=y.slice(s,1<c?1-c:void 0)}function Hr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Ls(){return!0}function lt(){return!1}function rn(s){function r(l,c,y,_,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(l=s[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ls:lt,this.isPropagationStopped=lt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),r}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zr=rn(Ki),Os=E({},Ki,{view:0,detail:0}),qu=rn(Os),qs,Oo,yn,Gr=E({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yn&&(yn&&s.type==="mousemove"?(qs=s.screenX-yn.screenX,Oo=s.screenY-yn.screenY):Oo=qs=0,yn=s),qs)},movementY:function(s){return"movementY"in s?s.movementY:Oo}}),Bu=rn(Gr),Jr=E({},Gr,{dataTransfer:0}),Fu=rn(Jr),tl=E({},Os,{relatedTarget:0}),Bs=rn(tl),Hu=E({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),qo=rn(Hu),If=E({},Ki,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zu=rn(If),Yr=E({},Ki,{data:0}),nl=rn(Yr),Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},il={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=sl[s])?!!r[s]:!1}function Fs(){return Ju}var Yu=E({},Os,{key:function(s){if(s.key){var r=Gu[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Hr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?il[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(s){return s.type==="keypress"?Hr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Hr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ku=rn(Yu),$i=E({},Gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rl=rn($i),$u=E({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),Qu=rn($u),Wu=E({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bo=rn(Wu),_n=E({},Gr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Xu=rn(_n),ju=E({},Ki,{newState:0,oldState:0}),Hs=rn(ju),h=[9,13,27,32],T=ai&&"CompositionEvent"in window,C=null;ai&&"documentMode"in document&&(C=document.documentMode);var R=ai&&"TextEvent"in window&&!C,z=ai&&(!T||C&&8<C&&11>=C),X=" ",le=!1;function Ze(s,r){switch(s){case"keyup":return h.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ve=!1;function Ft(s,r){switch(s){case"compositionend":return bt(r);case"keypress":return r.which!==32?null:(le=!0,X);case"textInput":return s=r.data,s===X&&le?null:s;default:return null}}function Ht(s,r){if(Ve)return s==="compositionend"||!T&&Ze(s,r)?(s=Us(),Ai=Lo=Mn=null,Ve=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return z&&r.locale!=="ko"?null:r.data;default:return null}}var zs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sn(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!zs[s.type]:r==="textarea"}function Kr(s,r,l,c){Yi?Nn?Nn.push(c):Nn=[c]:Yi=c,r=Fc(r,"onChange"),0<r.length&&(l=new zr("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Qi=null,ol=null;function AI(s){cv(s,0)}function Zu(s){var r=qr(s);if(Wa(r))return s}function xg(s,r){if(s==="change")return r}var Ng=!1;if(ai){var wf;if(ai){var Rf="oninput"in document;if(!Rf){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Rf=typeof Mg.oninput=="function"}wf=Rf}else wf=!1;Ng=wf&&(!document.documentMode||9<document.documentMode)}function Dg(){Qi&&(Qi.detachEvent("onpropertychange",Pg),ol=Qi=null)}function Pg(s){if(s.propertyName==="value"&&Zu(ol)){var r=[];Kr(r,ol,s,Uo(s)),Ou(AI,r)}}function CI(s,r,l){s==="focusin"?(Dg(),Qi=r,ol=l,Qi.attachEvent("onpropertychange",Pg)):s==="focusout"&&Dg()}function II(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zu(ol)}function wI(s,r){if(s==="click")return Zu(r)}function RI(s,r){if(s==="input"||s==="change")return Zu(r)}function bI(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Dn=typeof Object.is=="function"?Object.is:bI;function al(s,r){if(Dn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!bo.call(r,y)||!Dn(s[y],r[y]))return!1}return!0}function kg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vg(s,r){var l=kg(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=kg(l)}}function Ug(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Ug(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Lg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Po(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Po(s.document)}return r}function bf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var xI=ai&&"documentMode"in document&&11>=document.documentMode,Fo=null,xf=null,ll=null,Nf=!1;function Og(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nf||Fo==null||Fo!==Po(c)||(c=Fo,"selectionStart"in c&&bf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ll&&al(ll,c)||(ll=c,c=Fc(xf,"onSelect"),0<c.length&&(r=new zr("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Fo)))}function $r(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Ho={animationend:$r("Animation","AnimationEnd"),animationiteration:$r("Animation","AnimationIteration"),animationstart:$r("Animation","AnimationStart"),transitionrun:$r("Transition","TransitionRun"),transitionstart:$r("Transition","TransitionStart"),transitioncancel:$r("Transition","TransitionCancel"),transitionend:$r("Transition","TransitionEnd")},Mf={},qg={};ai&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Qr(s){if(Mf[s])return Mf[s];if(!Ho[s])return s;var r=Ho[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in qg)return Mf[s]=r[l];return s}var Bg=Qr("animationend"),Fg=Qr("animationiteration"),Hg=Qr("animationstart"),NI=Qr("transitionrun"),MI=Qr("transitionstart"),DI=Qr("transitioncancel"),zg=Qr("transitionend"),Gg=new Map,Df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Df.push("scrollEnd");function li(s,r){Gg.set(s,r),mn(r,[s])}var ec=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Jn=[],zo=0,Pf=0;function tc(){for(var s=zo,r=Pf=zo=0;r<s;){var l=Jn[r];Jn[r++]=null;var c=Jn[r];Jn[r++]=null;var y=Jn[r];Jn[r++]=null;var _=Jn[r];if(Jn[r++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}_!==0&&Jg(l,y,_)}}function nc(s,r,l,c){Jn[zo++]=s,Jn[zo++]=r,Jn[zo++]=l,Jn[zo++]=c,Pf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function kf(s,r,l,c){return nc(s,r,l,c),ic(s)}function Wr(s,r){return nc(s,null,null,r),ic(s)}function Jg(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-pn(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function ic(s){if(50<Nl)throw Nl=0,zh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Go={};function PI(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(s,r,l,c){return new PI(s,r,l,c)}function Vf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Wi(s,r){var l=s.alternate;return l===null?(l=Pn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Yg(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function sc(s,r,l,c,y,_){var A=0;if(c=s,typeof s=="function")Vf(s)&&(A=1);else if(typeof s=="string")A=Ow(s,l,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Pn(31,l,r,y),s.elementType=N,s.lanes=_,s;case B:return Xr(l.children,y,_,r);case G:A=8,y|=24;break;case te:return s=Pn(12,l,r,y|2),s.elementType=te,s.lanes=_,s;case de:return s=Pn(13,l,r,y),s.elementType=de,s.lanes=_,s;case ue:return s=Pn(19,l,r,y),s.elementType=ue,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:A=10;break e;case K:A=9;break e;case se:A=11;break e;case M:A=14;break e;case x:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Pn(A,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function Xr(s,r,l,c){return s=Pn(7,s,c,r),s.lanes=l,s}function Uf(s,r,l){return s=Pn(6,s,null,r),s.lanes=l,s}function Kg(s){var r=Pn(18,null,null,0);return r.stateNode=s,r}function Lf(s,r,l){return r=Pn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var $g=new WeakMap;function Yn(s,r){if(typeof s=="object"&&s!==null){var l=$g.get(s);return l!==void 0?l:(r={value:s,source:r,stack:si(r)},$g.set(s,r),r)}return{value:s,source:r,stack:si(r)}}var Jo=[],Yo=0,rc=null,ul=0,Kn=[],$n=0,Gs=null,Ci=1,Ii="";function Xi(s,r){Jo[Yo++]=ul,Jo[Yo++]=rc,rc=s,ul=r}function Qg(s,r,l){Kn[$n++]=Ci,Kn[$n++]=Ii,Kn[$n++]=Gs,Gs=s;var c=Ci;s=Ii;var y=32-pn(c)-1;c&=~(1<<y),l+=1;var _=32-pn(r)+y;if(30<_){var A=y-y%5;_=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Ci=1<<32-pn(r)+y|l<<y|c,Ii=_+s}else Ci=1<<_|l<<y|c,Ii=s}function Of(s){s.return!==null&&(Xi(s,1),Qg(s,1,0))}function qf(s){for(;s===rc;)rc=Jo[--Yo],Jo[Yo]=null,ul=Jo[--Yo],Jo[Yo]=null;for(;s===Gs;)Gs=Kn[--$n],Kn[$n]=null,Ii=Kn[--$n],Kn[$n]=null,Ci=Kn[--$n],Kn[$n]=null}function Wg(s,r){Kn[$n++]=Ci,Kn[$n++]=Ii,Kn[$n++]=Gs,Ci=r.id,Ii=r.overflow,Gs=s}var Qt=null,ut=null,Je=!1,Js=null,Qn=!1,Bf=Error(i(519));function Ys(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(Yn(r,s)),Bf}function Xg(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[yt]=s,r[$t]=c,l){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(l=0;l<Dl.length;l++)Oe(Dl[l],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),Br(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Vs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||pv(r.textContent,l)?(c.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),c.onScroll!=null&&Oe("scroll",r),c.onScrollEnd!=null&&Oe("scrollend",r),c.onClick!=null&&(r.onclick=Bt),r=!0):r=!1,r||Ys(s,!0)}function jg(s){for(Qt=s.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Qt=Qt.return}}function Ko(s){if(s!==Qt)return!1;if(!Je)return jg(s),Je=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||sp(s.type,s.memoizedProps)),l=!l),l&&ut&&Ys(s),jg(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=Av(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=Av(s)}else r===27?(r=ut,or(s.type)?(s=up,up=null,ut=s):ut=r):ut=Qt?Xn(s.stateNode.nextSibling):null;return!0}function jr(){ut=Qt=null,Je=!1}function Ff(){var s=Js;return s!==null&&(wn===null?wn=s:wn.push.apply(wn,s),Js=null),s}function cl(s){Js===null?Js=[s]:Js.push(s)}var Hf=O(null),Zr=null,ji=null;function Ks(s,r,l){oe(Hf,r._currentValue),r._currentValue=l}function Zi(s){s._currentValue=Hf.current,Z(Hf)}function zf(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Gf(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=y;for(var k=0;k<r.length;k++)if(w.context===r[k]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),zf(_.return,l,s),c||(A=null);break e}_=w.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,_=A.alternate,_!==null&&(_.lanes|=l),zf(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function $o(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var w=y.type;Dn(y.pendingProps.value,A.value)||(s!==null?s.push(w):s=[w])}}else if(y===Pe.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Ll):s=[Ll])}y=y.return}s!==null&&Gf(r,s,l,c),r.flags|=262144}function oc(s){for(s=s.firstContext;s!==null;){if(!Dn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function eo(s){Zr=s,ji=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wt(s){return Zg(Zr,s)}function ac(s,r){return Zr===null&&eo(s),Zg(s,r)}function Zg(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ji===null){if(s===null)throw Error(i(308));ji=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ji=ji.next=r;return l}var kI=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},VI=n.unstable_scheduleCallback,UI=n.unstable_NormalPriority,xt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new kI,data:new Map,refCount:0}}function dl(s){s.refCount--,s.refCount===0&&VI(UI,function(){s.controller.abort()})}var fl=null,Yf=0,Qo=0,Wo=null;function LI(s,r){if(fl===null){var l=fl=[];Yf=0,Qo=Qh(),Wo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Yf++,r.then(ey,ey),r}function ey(){if(--Yf===0&&fl!==null){Wo!==null&&(Wo.status="fulfilled");var s=fl;fl=null,Qo=0,Wo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function OI(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var ty=H.S;H.S=function(s,r){O_=Yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&LI(s,r),ty!==null&&ty(s,r)};var to=O(null);function Kf(){var s=to.current;return s!==null?s:at.pooledCache}function lc(s,r){r===null?oe(to,to.current):oe(to,r.pool)}function ny(){var s=Kf();return s===null?null:{parent:xt._currentValue,pool:s}}var Xo=Error(i(460)),$f=Error(i(474)),uc=Error(i(542)),cc={then:function(){}};function iy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Bt,Bt),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,oy(s),s;default:if(typeof r.status=="string")r.then(Bt,Bt);else{if(s=at,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,oy(s),s}throw io=r,Xo}}function no(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(io=l,Xo):l}}var io=null;function ry(){if(io===null)throw Error(i(459));var s=io;return io=null,s}function oy(s){if(s===Xo||s===uc)throw Error(i(483))}var jo=null,hl=0;function dc(s){var r=hl;return hl+=1,jo===null&&(jo=[]),sy(jo,s,r)}function pl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function fc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ay(s){function r(F,U){if(s){var J=F.deletions;J===null?(F.deletions=[U],F.flags|=16):J.push(U)}}function l(F,U){if(!s)return null;for(;U!==null;)r(F,U),U=U.sibling;return null}function c(F){for(var U=new Map;F!==null;)F.key!==null?U.set(F.key,F):U.set(F.index,F),F=F.sibling;return U}function y(F,U){return F=Wi(F,U),F.index=0,F.sibling=null,F}function _(F,U,J){return F.index=J,s?(J=F.alternate,J!==null?(J=J.index,J<U?(F.flags|=67108866,U):J):(F.flags|=67108866,U)):(F.flags|=1048576,U)}function A(F){return s&&F.alternate===null&&(F.flags|=67108866),F}function w(F,U,J,ee){return U===null||U.tag!==6?(U=Uf(J,F.mode,ee),U.return=F,U):(U=y(U,J),U.return=F,U)}function k(F,U,J,ee){var ve=J.type;return ve===B?j(F,U,J.props.children,ee,J.key):U!==null&&(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&no(ve)===U.type)?(U=y(U,J.props),pl(U,J),U.return=F,U):(U=sc(J.type,J.key,J.props,null,F.mode,ee),pl(U,J),U.return=F,U)}function Y(F,U,J,ee){return U===null||U.tag!==4||U.stateNode.containerInfo!==J.containerInfo||U.stateNode.implementation!==J.implementation?(U=Lf(J,F.mode,ee),U.return=F,U):(U=y(U,J.children||[]),U.return=F,U)}function j(F,U,J,ee,ve){return U===null||U.tag!==7?(U=Xr(J,F.mode,ee,ve),U.return=F,U):(U=y(U,J),U.return=F,U)}function ne(F,U,J){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Uf(""+U,F.mode,J),U.return=F,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return J=sc(U.type,U.key,U.props,null,F.mode,J),pl(J,U),J.return=F,J;case q:return U=Lf(U,F.mode,J),U.return=F,U;case x:return U=no(U),ne(F,U,J)}if(ht(U)||L(U))return U=Xr(U,F.mode,J,null),U.return=F,U;if(typeof U.then=="function")return ne(F,dc(U),J);if(U.$$typeof===W)return ne(F,ac(F,U),J);fc(F,U)}return null}function $(F,U,J,ee){var ve=U!==null?U.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ve!==null?null:w(F,U,""+J,ee);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===ve?k(F,U,J,ee):null;case q:return J.key===ve?Y(F,U,J,ee):null;case x:return J=no(J),$(F,U,J,ee)}if(ht(J)||L(J))return ve!==null?null:j(F,U,J,ee,null);if(typeof J.then=="function")return $(F,U,dc(J),ee);if(J.$$typeof===W)return $(F,U,ac(F,J),ee);fc(F,J)}return null}function Q(F,U,J,ee,ve){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return F=F.get(J)||null,w(U,F,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return F=F.get(ee.key===null?J:ee.key)||null,k(U,F,ee,ve);case q:return F=F.get(ee.key===null?J:ee.key)||null,Y(U,F,ee,ve);case x:return ee=no(ee),Q(F,U,J,ee,ve)}if(ht(ee)||L(ee))return F=F.get(J)||null,j(U,F,ee,ve,null);if(typeof ee.then=="function")return Q(F,U,J,dc(ee),ve);if(ee.$$typeof===W)return Q(F,U,J,ac(U,ee),ve);fc(U,ee)}return null}function me(F,U,J,ee){for(var ve=null,Qe=null,ge=U,De=U=0,Fe=null;ge!==null&&De<J.length;De++){ge.index>De?(Fe=ge,ge=null):Fe=ge.sibling;var We=$(F,ge,J[De],ee);if(We===null){ge===null&&(ge=Fe);break}s&&ge&&We.alternate===null&&r(F,ge),U=_(We,U,De),Qe===null?ve=We:Qe.sibling=We,Qe=We,ge=Fe}if(De===J.length)return l(F,ge),Je&&Xi(F,De),ve;if(ge===null){for(;De<J.length;De++)ge=ne(F,J[De],ee),ge!==null&&(U=_(ge,U,De),Qe===null?ve=ge:Qe.sibling=ge,Qe=ge);return Je&&Xi(F,De),ve}for(ge=c(ge);De<J.length;De++)Fe=Q(ge,F,De,J[De],ee),Fe!==null&&(s&&Fe.alternate!==null&&ge.delete(Fe.key===null?De:Fe.key),U=_(Fe,U,De),Qe===null?ve=Fe:Qe.sibling=Fe,Qe=Fe);return s&&ge.forEach(function(dr){return r(F,dr)}),Je&&Xi(F,De),ve}function Se(F,U,J,ee){if(J==null)throw Error(i(151));for(var ve=null,Qe=null,ge=U,De=U=0,Fe=null,We=J.next();ge!==null&&!We.done;De++,We=J.next()){ge.index>De?(Fe=ge,ge=null):Fe=ge.sibling;var dr=$(F,ge,We.value,ee);if(dr===null){ge===null&&(ge=Fe);break}s&&ge&&dr.alternate===null&&r(F,ge),U=_(dr,U,De),Qe===null?ve=dr:Qe.sibling=dr,Qe=dr,ge=Fe}if(We.done)return l(F,ge),Je&&Xi(F,De),ve;if(ge===null){for(;!We.done;De++,We=J.next())We=ne(F,We.value,ee),We!==null&&(U=_(We,U,De),Qe===null?ve=We:Qe.sibling=We,Qe=We);return Je&&Xi(F,De),ve}for(ge=c(ge);!We.done;De++,We=J.next())We=Q(ge,F,De,We.value,ee),We!==null&&(s&&We.alternate!==null&&ge.delete(We.key===null?De:We.key),U=_(We,U,De),Qe===null?ve=We:Qe.sibling=We,Qe=We);return s&&ge.forEach(function(Qw){return r(F,Qw)}),Je&&Xi(F,De),ve}function rt(F,U,J,ee){if(typeof J=="object"&&J!==null&&J.type===B&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var ve=J.key;U!==null;){if(U.key===ve){if(ve=J.type,ve===B){if(U.tag===7){l(F,U.sibling),ee=y(U,J.props.children),ee.return=F,F=ee;break e}}else if(U.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===x&&no(ve)===U.type){l(F,U.sibling),ee=y(U,J.props),pl(ee,J),ee.return=F,F=ee;break e}l(F,U);break}else r(F,U);U=U.sibling}J.type===B?(ee=Xr(J.props.children,F.mode,ee,J.key),ee.return=F,F=ee):(ee=sc(J.type,J.key,J.props,null,F.mode,ee),pl(ee,J),ee.return=F,F=ee)}return A(F);case q:e:{for(ve=J.key;U!==null;){if(U.key===ve)if(U.tag===4&&U.stateNode.containerInfo===J.containerInfo&&U.stateNode.implementation===J.implementation){l(F,U.sibling),ee=y(U,J.children||[]),ee.return=F,F=ee;break e}else{l(F,U);break}else r(F,U);U=U.sibling}ee=Lf(J,F.mode,ee),ee.return=F,F=ee}return A(F);case x:return J=no(J),rt(F,U,J,ee)}if(ht(J))return me(F,U,J,ee);if(L(J)){if(ve=L(J),typeof ve!="function")throw Error(i(150));return J=ve.call(J),Se(F,U,J,ee)}if(typeof J.then=="function")return rt(F,U,dc(J),ee);if(J.$$typeof===W)return rt(F,U,ac(F,J),ee);fc(F,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,U!==null&&U.tag===6?(l(F,U.sibling),ee=y(U,J),ee.return=F,F=ee):(l(F,U),ee=Uf(J,F.mode,ee),ee.return=F,F=ee),A(F)):l(F,U)}return function(F,U,J,ee){try{hl=0;var ve=rt(F,U,J,ee);return jo=null,ve}catch(ge){if(ge===Xo||ge===uc)throw ge;var Qe=Pn(29,ge,null,F.mode);return Qe.lanes=ee,Qe.return=F,Qe}finally{}}}var so=ay(!0),ly=ay(!1),$s=!1;function Qf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wf(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ws(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=ic(s),Jg(s,null,l),r}return nc(s,c,r,l),ic(s)}function ml(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,bs(s,l)}}function Xf(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var jf=!1;function gl(){if(jf){var s=Wo;if(s!==null)throw s}}function yl(s,r,l,c){jf=!1;var y=s.updateQueue;$s=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var k=w,Y=k.next;k.next=null,A===null?_=Y:A.next=Y,A=k;var j=s.alternate;j!==null&&(j=j.updateQueue,w=j.lastBaseUpdate,w!==A&&(w===null?j.firstBaseUpdate=Y:w.next=Y,j.lastBaseUpdate=k))}if(_!==null){var ne=y.baseState;A=0,j=Y=k=null,w=_;do{var $=w.lane&-536870913,Q=$!==w.lane;if(Q?(Be&$)===$:(c&$)===$){$!==0&&$===Qo&&(jf=!0),j!==null&&(j=j.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var me=s,Se=w;$=r;var rt=l;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){ne=me.call(rt,ne,$);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,$=typeof me=="function"?me.call(rt,ne,$):me,$==null)break e;ne=E({},ne,$);break e;case 2:$s=!0}}$=w.callback,$!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[$]:Q.push($))}else Q={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},j===null?(Y=j=Q,k=ne):j=j.next=Q,A|=$;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);j===null&&(k=ne),y.baseState=k,y.firstBaseUpdate=Y,y.lastBaseUpdate=j,_===null&&(y.shared.lanes=0),tr|=A,s.lanes=A,s.memoizedState=ne}}function uy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function cy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)uy(l[s],r)}var Zo=O(null),hc=O(0);function dy(s,r){s=ls,oe(hc,s),oe(Zo,r),ls=s|r.baseLanes}function Zf(){oe(hc,ls),oe(Zo,Zo.current)}function eh(){ls=hc.current,Z(Zo),Z(hc)}var kn=O(null),Wn=null;function Xs(s){var r=s.alternate;oe(Ct,Ct.current&1),oe(kn,s),Wn===null&&(r===null||Zo.current!==null||r.memoizedState!==null)&&(Wn=s)}function th(s){oe(Ct,Ct.current),oe(kn,s),Wn===null&&(Wn=s)}function fy(s){s.tag===22?(oe(Ct,Ct.current),oe(kn,s),Wn===null&&(Wn=s)):js()}function js(){oe(Ct,Ct.current),oe(kn,kn.current)}function Vn(s){Z(kn),Wn===s&&(Wn=null),Z(Ct)}var Ct=O(0);function pc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ap(l)||lp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var es=0,Ne=null,it=null,Nt=null,mc=!1,ea=!1,ro=!1,gc=0,_l=0,ta=null,qI=0;function vt(){throw Error(i(321))}function nh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Dn(s[l],r[l]))return!1;return!0}function ih(s,r,l,c,y,_){return es=_,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=s===null||s.memoizedState===null?Qy:_h,ro=!1,_=l(c,y),ro=!1,ea&&(_=py(r,l,c,y)),hy(s),_}function hy(s){H.H=El;var r=it!==null&&it.next!==null;if(es=0,Nt=it=Ne=null,mc=!1,_l=0,ta=null,r)throw Error(i(300));s===null||Mt||(s=s.dependencies,s!==null&&oc(s)&&(Mt=!0))}function py(s,r,l,c){Ne=s;var y=0;do{if(ea&&(ta=null),_l=0,ea=!1,25<=y)throw Error(i(301));if(y+=1,Nt=it=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=Wy,_=r(l,c)}while(ea);return _}function BI(){var s=H.H,r=s.useState()[0];return r=typeof r.then=="function"?vl(r):r,s=s.useState()[0],(it!==null?it.memoizedState:null)!==s&&(Ne.flags|=1024),r}function sh(){var s=gc!==0;return gc=0,s}function rh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function oh(s){if(mc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}mc=!1}es=0,Nt=it=Ne=null,ea=!1,_l=gc=0,ta=null}function vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ne.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function It(){if(it===null){var s=Ne.alternate;s=s!==null?s.memoizedState:null}else s=it.next;var r=Nt===null?Ne.memoizedState:Nt.next;if(r!==null)Nt=r,it=s;else{if(s===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));it=s,s={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Nt===null?Ne.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(s){var r=_l;return _l+=1,ta===null&&(ta=[]),s=sy(ta,s,r),r=Ne,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?Qy:_h),s}function _c(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return vl(s);if(s.$$typeof===W)return Wt(s)}throw Error(i(438,String(s)))}function ah(s){var r=null,l=Ne.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=yc(),Ne.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=D;return r.index++,l}function ts(s,r){return typeof r=="function"?r(s):r}function vc(s){var r=It();return lh(r,it,s)}function lh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var w=A=null,k=null,Y=r,j=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Be&ne)===ne:(es&ne)===ne){var $=Y.revertLane;if($===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Qo&&(j=!0);else if((es&$)===$){Y=Y.next,$===Qo&&(j=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(w=k=ne,A=_):k=k.next=ne,Ne.lanes|=$,tr|=$;ne=Y.action,ro&&l(_,ne),_=Y.hasEagerState?Y.eagerState:l(_,ne)}else $={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(w=k=$,A=_):k=k.next=$,Ne.lanes|=ne,tr|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(k===null?A=_:k.next=w,!Dn(_,s.memoizedState)&&(Mt=!0,j&&(l=Wo,l!==null)))throw l;s.memoizedState=_,s.baseState=A,s.baseQueue=k,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function uh(s){var r=It(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do _=s(_,A.action),A=A.next;while(A!==y);Dn(_,r.memoizedState)||(Mt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function my(s,r,l){var c=Ne,y=It(),_=Je;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var A=!Dn((it||y).memoizedState,l);if(A&&(y.memoizedState=l,Mt=!0),y=y.queue,fh(_y.bind(null,c,y,s),[s]),y.getSnapshot!==r||A||Nt!==null&&Nt.memoizedState.tag&1){if(c.flags|=2048,na(9,{destroy:void 0},yy.bind(null,c,y,l,r),null),at===null)throw Error(i(349));_||(es&127)!==0||gy(c,r,l)}return l}function gy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Ne.updateQueue,r===null?(r=yc(),Ne.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function yy(s,r,l,c){r.value=l,r.getSnapshot=c,vy(r)&&Ty(s)}function _y(s,r,l){return l(function(){vy(r)&&Ty(s)})}function vy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Dn(s,l)}catch{return!0}}function Ty(s){var r=Wr(s,2);r!==null&&Rn(r,s,2)}function ch(s){var r=vn();if(typeof s=="function"){var l=s;if(s=l(),ro){Fn(!0);try{l()}finally{Fn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:s},r}function Ey(s,r,l,c){return s.baseState=l,lh(s,it,typeof c=="function"?c:ts)}function FI(s,r,l,c,y){if(Sc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};H.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,Sy(r,_)):(_.next=l.next,r.pending=l.next=_)}}function Sy(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=H.T,A={};H.T=A;try{var w=l(y,c),k=H.S;k!==null&&k(A,w),Ay(s,r,w)}catch(Y){dh(s,r,Y)}finally{_!==null&&A.types!==null&&(_.types=A.types),H.T=_}}else try{_=l(y,c),Ay(s,r,_)}catch(Y){dh(s,r,Y)}}function Ay(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Cy(s,r,c)},function(c){return dh(s,r,c)}):Cy(s,r,l)}function Cy(s,r,l){r.status="fulfilled",r.value=l,Iy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Sy(s,l)))}function dh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Iy(r),r=r.next;while(r!==c)}s.action=null}function Iy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function wy(s,r){return r}function Ry(s,r){if(Je){var l=at.formState;if(l!==null){e:{var c=Ne;if(Je){if(ut){t:{for(var y=ut,_=Qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Xn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){ut=Xn(y.nextSibling),c=y.data==="F!";break e}}Ys(c)}c=!1}c&&(r=l[0])}}return l=vn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:r},l.queue=c,l=Yy.bind(null,Ne,c),c.dispatch=l,c=ch(!1),_=yh.bind(null,Ne,!1,c.queue),c=vn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=FI.bind(null,Ne,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function by(s){var r=It();return xy(r,it,s)}function xy(s,r,l){if(r=lh(s,r,wy)[0],s=vc(ts)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=vl(r)}catch(A){throw A===Xo?uc:A}else c=r;r=It();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(Ne.flags|=2048,na(9,{destroy:void 0},HI.bind(null,y,l),null)),[c,_,s]}function HI(s,r){s.action=r}function Ny(s){var r=It(),l=it;if(l!==null)return xy(r,l,s);It(),r=r.memoizedState,l=It();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function na(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=yc(),Ne.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function My(){return It().memoizedState}function Tc(s,r,l,c){var y=vn();Ne.flags|=s,y.memoizedState=na(1|r,{destroy:void 0},l,c===void 0?null:c)}function Ec(s,r,l,c){var y=It();c=c===void 0?null:c;var _=y.memoizedState.inst;it!==null&&c!==null&&nh(c,it.memoizedState.deps)?y.memoizedState=na(r,_,l,c):(Ne.flags|=s,y.memoizedState=na(1|r,_,l,c))}function Dy(s,r){Tc(8390656,8,s,r)}function fh(s,r){Ec(2048,8,s,r)}function zI(s){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=yc(),Ne.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function Py(s){var r=It().memoizedState;return zI({ref:r,nextImpl:s}),function(){if((je&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function ky(s,r){return Ec(4,2,s,r)}function Vy(s,r){return Ec(4,4,s,r)}function Uy(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Ly(s,r,l){l=l!=null?l.concat([s]):null,Ec(4,4,Uy.bind(null,r,s),l)}function hh(){}function Oy(s,r){var l=It();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&nh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function qy(s,r){var l=It();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&nh(r,c[1]))return c[0];if(c=s(),ro){Fn(!0);try{s()}finally{Fn(!1)}}return l.memoizedState=[c,r],c}function ph(s,r,l){return l===void 0||(es&1073741824)!==0&&(Be&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=B_(),Ne.lanes|=s,tr|=s,l)}function By(s,r,l,c){return Dn(l,r)?l:Zo.current!==null?(s=ph(s,l,c),Dn(s,r)||(Mt=!0),s):(es&42)===0||(es&1073741824)!==0&&(Be&261930)===0?(Mt=!0,s.memoizedState=l):(s=B_(),Ne.lanes|=s,tr|=s,r)}function Fy(s,r,l,c,y){var _=ae.p;ae.p=_!==0&&8>_?_:8;var A=H.T,w={};H.T=w,yh(s,!1,r,l);try{var k=y(),Y=H.S;if(Y!==null&&Y(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var j=OI(k,c);Tl(s,r,j,On(s))}else Tl(s,r,c,On(s))}catch(ne){Tl(s,r,{then:function(){},status:"rejected",reason:ne},On())}finally{ae.p=_,A!==null&&w.types!==null&&(A.types=w.types),H.T=A}}function GI(){}function mh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=Hy(s).queue;Fy(s,y,r,ye,l===null?GI:function(){return zy(s),l(c)})}function Hy(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:ye},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function zy(s){var r=Hy(s);r.next===null&&(r=s.alternate.memoizedState),Tl(s,r.next.queue,{},On())}function gh(){return Wt(Ll)}function Gy(){return It().memoizedState}function Jy(){return It().memoizedState}function JI(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=On();s=Qs(l);var c=Ws(r,s,l);c!==null&&(Rn(c,r,l),ml(c,r,l)),r={cache:Jf()},s.payload=r;return}r=r.return}}function YI(s,r,l){var c=On();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Sc(s)?Ky(r,l):(l=kf(s,r,l,c),l!==null&&(Rn(l,s,c),$y(l,r,c)))}function Yy(s,r,l){var c=On();Tl(s,r,l,c)}function Tl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sc(s))Ky(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,w=_(A,l);if(y.hasEagerState=!0,y.eagerState=w,Dn(w,A))return nc(s,r,y,0),at===null&&tc(),!1}catch{}finally{}if(l=kf(s,r,y,c),l!==null)return Rn(l,s,c),$y(l,r,c),!0}return!1}function yh(s,r,l,c){if(c={lane:2,revertLane:Qh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Sc(s)){if(r)throw Error(i(479))}else r=kf(s,l,c,2),r!==null&&Rn(r,s,2)}function Sc(s){var r=s.alternate;return s===Ne||r!==null&&r===Ne}function Ky(s,r){ea=mc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function $y(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,bs(s,l)}}var El={readContext:Wt,use:_c,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};El.useEffectEvent=vt;var Qy={readContext:Wt,use:_c,useCallback:function(s,r){return vn().memoizedState=[s,r===void 0?null:r],s},useContext:Wt,useEffect:Dy,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Tc(4194308,4,Uy.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Tc(4194308,4,s,r)},useInsertionEffect:function(s,r){Tc(4,2,s,r)},useMemo:function(s,r){var l=vn();r=r===void 0?null:r;var c=s();if(ro){Fn(!0);try{s()}finally{Fn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=vn();if(l!==void 0){var y=l(r);if(ro){Fn(!0);try{l(r)}finally{Fn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=YI.bind(null,Ne,s),[c.memoizedState,s]},useRef:function(s){var r=vn();return s={current:s},r.memoizedState=s},useState:function(s){s=ch(s);var r=s.queue,l=Yy.bind(null,Ne,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:hh,useDeferredValue:function(s,r){var l=vn();return ph(l,s,r)},useTransition:function(){var s=ch(!1);return s=Fy.bind(null,Ne,s.queue,!0,!1),vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Ne,y=vn();if(Je){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),at===null)throw Error(i(349));(Be&127)!==0||gy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,Dy(_y.bind(null,c,_,s),[s]),c.flags|=2048,na(9,{destroy:void 0},yy.bind(null,c,_,l,r),null),l},useId:function(){var s=vn(),r=at.identifierPrefix;if(Je){var l=Ii,c=Ci;l=(c&~(1<<32-pn(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=gc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=qI++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:gh,useFormState:Ry,useActionState:Ry,useOptimistic:function(s){var r=vn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=yh.bind(null,Ne,!0,l),l.dispatch=r,[s,r]},useMemoCache:ah,useCacheRefresh:function(){return vn().memoizedState=JI.bind(null,Ne)},useEffectEvent:function(s){var r=vn(),l={impl:s};return r.memoizedState=l,function(){if((je&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},_h={readContext:Wt,use:_c,useCallback:Oy,useContext:Wt,useEffect:fh,useImperativeHandle:Ly,useInsertionEffect:ky,useLayoutEffect:Vy,useMemo:qy,useReducer:vc,useRef:My,useState:function(){return vc(ts)},useDebugValue:hh,useDeferredValue:function(s,r){var l=It();return By(l,it.memoizedState,s,r)},useTransition:function(){var s=vc(ts)[0],r=It().memoizedState;return[typeof s=="boolean"?s:vl(s),r]},useSyncExternalStore:my,useId:Gy,useHostTransitionStatus:gh,useFormState:by,useActionState:by,useOptimistic:function(s,r){var l=It();return Ey(l,it,s,r)},useMemoCache:ah,useCacheRefresh:Jy};_h.useEffectEvent=Py;var Wy={readContext:Wt,use:_c,useCallback:Oy,useContext:Wt,useEffect:fh,useImperativeHandle:Ly,useInsertionEffect:ky,useLayoutEffect:Vy,useMemo:qy,useReducer:uh,useRef:My,useState:function(){return uh(ts)},useDebugValue:hh,useDeferredValue:function(s,r){var l=It();return it===null?ph(l,s,r):By(l,it.memoizedState,s,r)},useTransition:function(){var s=uh(ts)[0],r=It().memoizedState;return[typeof s=="boolean"?s:vl(s),r]},useSyncExternalStore:my,useId:Gy,useHostTransitionStatus:gh,useFormState:Ny,useActionState:Ny,useOptimistic:function(s,r){var l=It();return it!==null?Ey(l,it,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ah,useCacheRefresh:Jy};Wy.useEffectEvent=Py;function vh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Th={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=On(),y=Qs(c);y.payload=r,l!=null&&(y.callback=l),r=Ws(s,y,c),r!==null&&(Rn(r,s,c),ml(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=On(),y=Qs(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Ws(s,y,c),r!==null&&(Rn(r,s,c),ml(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=On(),c=Qs(l);c.tag=2,r!=null&&(c.callback=r),r=Ws(s,c,l),r!==null&&(Rn(r,s,l),ml(r,s,l))}};function Xy(s,r,l,c,y,_,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,A):r.prototype&&r.prototype.isPureReactComponent?!al(l,c)||!al(y,_):!0}function jy(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Th.enqueueReplaceState(r,r.state,null)}function oo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function Zy(s){ec(s)}function e_(s){console.error(s)}function t_(s){ec(s)}function Ac(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function n_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Eh(s,r,l){return l=Qs(l),l.tag=3,l.payload={element:null},l.callback=function(){Ac(s,r)},l}function i_(s){return s=Qs(s),s.tag=3,s}function s_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){n_(r,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){n_(r,l,c),typeof y!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function KI(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&$o(r,l,y,!0),l=kn.current,l!==null){switch(l.tag){case 31:case 13:return Wn===null?Vc():l.alternate===null&&Tt===0&&(Tt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===cc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Yh(s,c,y)),!1;case 22:return l.flags|=65536,c===cc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Yh(s,c,y)),!1}throw Error(i(435,l.tag))}return Yh(s,c,y),Vc(),!1}if(Je)return r=kn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Bf&&(s=Error(i(422),{cause:c}),cl(Yn(s,l)))):(c!==Bf&&(r=Error(i(423),{cause:c}),cl(Yn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Yn(c,l),y=Eh(s.stateNode,c,y),Xf(s,y),Tt!==4&&(Tt=2)),!1;var _=Error(i(520),{cause:c});if(_=Yn(_,l),xl===null?xl=[_]:xl.push(_),Tt!==4&&(Tt=2),r===null)return!0;c=Yn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Eh(l.stateNode,c,s),Xf(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(nr===null||!nr.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=i_(y),s_(y,s,l,c),Xf(l,y),!1}l=l.return}while(l!==null);return!1}var Sh=Error(i(461)),Mt=!1;function Xt(s,r,l,c){r.child=s===null?ly(r,null,l,c):so(r,s.child,l,c)}function r_(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var A={};for(var w in c)w!=="ref"&&(A[w]=c[w])}else A=c;return eo(r),c=ih(s,r,l,A,_,y),w=sh(),s!==null&&!Mt?(rh(s,r,y),ns(s,r,y)):(Je&&w&&Of(r),r.flags|=1,Xt(s,r,c,y),r.child)}function o_(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Vf(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,a_(s,r,_,c,y)):(s=sc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Nh(s,y)){var A=_.memoizedProps;if(l=l.compare,l=l!==null?l:al,l(A,c)&&s.ref===r.ref)return ns(s,r,y)}return r.flags|=1,s=Wi(_,c),s.ref=r.ref,s.return=r,r.child=s}function a_(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(al(_,c)&&s.ref===r.ref)if(Mt=!1,r.pendingProps=c=_,Nh(s,y))(s.flags&131072)!==0&&(Mt=!0);else return r.lanes=s.lanes,ns(s,r,y)}return Ah(s,r,l,c,y)}function l_(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return u_(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&lc(r,_!==null?_.cachePool:null),_!==null?dy(r,_):Zf(),fy(r);else return c=r.lanes=536870912,u_(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(lc(r,_.cachePool),dy(r,_),js(),r.memoizedState=null):(s!==null&&lc(r,null),Zf(),js());return Xt(s,r,y,l),r.child}function Sl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function u_(s,r,l,c,y){var _=Kf();return _=_===null?null:{parent:xt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&lc(r,null),Zf(),fy(r),s!==null&&$o(s,r,c,!0),r.childLanes=y,null}function Cc(s,r){return r=wc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function c_(s,r,l){return so(r,s.child,null,l),s=Cc(r,r.pendingProps),s.flags|=2,Vn(r),r.memoizedState=null,s}function $I(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Je){if(c.mode==="hidden")return s=Cc(r,c),r.lanes=536870912,Sl(null,s);if(th(r),(s=ut)?(s=Sv(s,Qn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Gs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},l=Kg(s),l.return=r,r.child=l,Qt=r,ut=null)):s=null,s===null)throw Ys(r);return r.lanes=536870912,null}return Cc(r,c)}var _=s.memoizedState;if(_!==null){var A=_.dehydrated;if(th(r),y)if(r.flags&256)r.flags&=-257,r=c_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Mt||$o(s,r,l,!1),y=(l&s.childLanes)!==0,Mt||y){if(c=at,c!==null&&(A=xs(c,l),A!==0&&A!==_.retryLane))throw _.retryLane=A,Wr(s,A),Rn(c,s,A),Sh;Vc(),r=c_(s,r,l)}else s=_.treeContext,ut=Xn(A.nextSibling),Qt=r,Je=!0,Js=null,Qn=!1,s!==null&&Wg(r,s),r=Cc(r,c),r.flags|=4096;return r}return s=Wi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Ic(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Ah(s,r,l,c,y){return eo(r),l=ih(s,r,l,c,void 0,y),c=sh(),s!==null&&!Mt?(rh(s,r,y),ns(s,r,y)):(Je&&c&&Of(r),r.flags|=1,Xt(s,r,l,y),r.child)}function d_(s,r,l,c,y,_){return eo(r),r.updateQueue=null,l=py(r,c,l,y),hy(s),c=sh(),s!==null&&!Mt?(rh(s,r,_),ns(s,r,_)):(Je&&c&&Of(r),r.flags|=1,Xt(s,r,l,_),r.child)}function f_(s,r,l,c,y){if(eo(r),r.stateNode===null){var _=Go,A=l.contextType;typeof A=="object"&&A!==null&&(_=Wt(A)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Th,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},Qf(r),A=l.contextType,_.context=typeof A=="object"&&A!==null?Wt(A):Go,_.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(vh(r,l,A,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Th.enqueueReplaceState(_,_.state,null),yl(r,c,_,y),gl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var w=r.memoizedProps,k=oo(l,w);_.props=k;var Y=_.context,j=l.contextType;A=Go,typeof j=="object"&&j!==null&&(A=Wt(j));var ne=l.getDerivedStateFromProps;j=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||Y!==A)&&jy(r,_,c,A),$s=!1;var $=r.memoizedState;_.state=$,yl(r,c,_,y),gl(),Y=r.memoizedState,w||$!==Y||$s?(typeof ne=="function"&&(vh(r,l,ne,c),Y=r.memoizedState),(k=$s||Xy(r,l,k,c,$,Y,A))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Y),_.props=c,_.state=Y,_.context=A,c=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,Wf(s,r),A=r.memoizedProps,j=oo(l,A),_.props=j,ne=r.pendingProps,$=_.context,Y=l.contextType,k=Go,typeof Y=="object"&&Y!==null&&(k=Wt(Y)),w=l.getDerivedStateFromProps,(Y=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ne||$!==k)&&jy(r,_,c,k),$s=!1,$=r.memoizedState,_.state=$,yl(r,c,_,y),gl();var Q=r.memoizedState;A!==ne||$!==Q||$s||s!==null&&s.dependencies!==null&&oc(s.dependencies)?(typeof w=="function"&&(vh(r,l,w,c),Q=r.memoizedState),(j=$s||Xy(r,l,j,c,$,Q,k)||s!==null&&s.dependencies!==null&&oc(s.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Q,k),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Q,k)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),_.props=c,_.state=Q,_.context=k,c=j):(typeof _.componentDidUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Ic(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=so(r,s.child,null,y),r.child=so(r,null,l,y)):Xt(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ns(s,r,y),s}function h_(s,r,l,c){return jr(),r.flags|=256,Xt(s,r,l,c),r.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ih(s){return{baseLanes:s,cachePool:ny()}}function wh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Ln),s}function p_(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=s!==null&&s.memoizedState===null?!1:(Ct.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,s===null){if(Je){if(y?Xs(r):js(),(s=ut)?(s=Sv(s,Qn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Gs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},l=Kg(s),l.return=r,r.child=l,Qt=r,ut=null)):s=null,s===null)throw Ys(r);return lp(s)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(js(),y=r.mode,w=wc({mode:"hidden",children:w},y),c=Xr(c,y,l,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=Ih(l),c.childLanes=wh(s,A,l),r.memoizedState=Ch,Sl(null,c)):(Xs(r),Rh(r,w))}var k=s.memoizedState;if(k!==null&&(w=k.dehydrated,w!==null)){if(_)r.flags&256?(Xs(r),r.flags&=-257,r=bh(s,r,l)):r.memoizedState!==null?(js(),r.child=s.child,r.flags|=128,r=null):(js(),w=c.fallback,y=r.mode,c=wc({mode:"visible",children:c.children},y),w=Xr(w,y,l,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,so(r,s.child,null,l),c=r.child,c.memoizedState=Ih(l),c.childLanes=wh(s,A,l),r.memoizedState=Ch,r=Sl(null,c));else if(Xs(r),lp(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(i(419)),c.stack="",c.digest=A,cl({value:c,source:null,stack:null}),r=bh(s,r,l)}else if(Mt||$o(s,r,l,!1),A=(l&s.childLanes)!==0,Mt||A){if(A=at,A!==null&&(c=xs(A,l),c!==0&&c!==k.retryLane))throw k.retryLane=c,Wr(s,c),Rn(A,s,c),Sh;ap(w)||Vc(),r=bh(s,r,l)}else ap(w)?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,ut=Xn(w.nextSibling),Qt=r,Je=!0,Js=null,Qn=!1,s!==null&&Wg(r,s),r=Rh(r,c.children),r.flags|=4096);return r}return y?(js(),w=c.fallback,y=r.mode,k=s.child,Y=k.sibling,c=Wi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,Y!==null?w=Wi(Y,w):(w=Xr(w,y,l,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,Sl(null,c),c=r.child,w=s.child.memoizedState,w===null?w=Ih(l):(y=w.cachePool,y!==null?(k=xt._currentValue,y=y.parent!==k?{parent:k,pool:k}:y):y=ny(),w={baseLanes:w.baseLanes|l,cachePool:y}),c.memoizedState=w,c.childLanes=wh(s,A,l),r.memoizedState=Ch,Sl(s.child,c)):(Xs(r),l=s.child,s=l.sibling,l=Wi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(A=r.deletions,A===null?(r.deletions=[s],r.flags|=16):A.push(s)),r.child=l,r.memoizedState=null,l)}function Rh(s,r){return r=wc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function wc(s,r){return s=Pn(22,s,null,r),s.lanes=0,s}function bh(s,r,l){return so(r,s.child,null,l),s=Rh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function m_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),zf(s.return,r,l)}function xh(s,r,l,c,y,_){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(A.isBackwards=r,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=_)}function g_(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var A=Ct.current,w=(A&2)!==0;if(w?(A=A&1|2,r.flags|=128):A&=1,oe(Ct,A),Xt(s,r,c,l),c=Je?ul:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&m_(s,l,r);else if(s.tag===19)m_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&pc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),xh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&pc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}xh(r,!0,l,null,_,c);break;case"together":xh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ns(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),tr|=r.lanes,(l&r.childLanes)===0)if(s!==null){if($o(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Wi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Wi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Nh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&oc(s)))}function QI(s,r,l){switch(r.tag){case 3:ce(r,r.stateNode.containerInfo),Ks(r,xt,s.memoizedState.cache),jr();break;case 27:case 5:qe(r);break;case 4:ce(r,r.stateNode.containerInfo);break;case 10:Ks(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,th(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Xs(r),r.flags|=128,null):(l&r.child.childLanes)!==0?p_(s,r,l):(Xs(r),s=ns(s,r,l),s!==null?s.sibling:null);Xs(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||($o(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return g_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),oe(Ct,Ct.current),c)break;return null;case 22:return r.lanes=0,l_(s,r,l,r.pendingProps);case 24:Ks(r,xt,s.memoizedState.cache)}return ns(s,r,l)}function y_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Mt=!0;else{if(!Nh(s,l)&&(r.flags&128)===0)return Mt=!1,QI(s,r,l);Mt=(s.flags&131072)!==0}else Mt=!1,Je&&(r.flags&1048576)!==0&&Qg(r,ul,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=no(r.elementType),r.type=s,typeof s=="function")Vf(s)?(c=oo(s,c),r.tag=1,r=f_(null,r,s,c,l)):(r.tag=0,r=Ah(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===se){r.tag=11,r=r_(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=o_(null,r,s,c,l);break e}}throw r=ot(s)||s,Error(i(306,r,""))}}return r;case 0:return Ah(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=oo(c,r.pendingProps),f_(s,r,c,y,l);case 3:e:{if(ce(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,Wf(s,r),yl(r,c,null,l);var A=r.memoizedState;if(c=A.cache,Ks(r,xt,c),c!==_.cache&&Gf(r,[xt],l,!0),gl(),c=A.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=h_(s,r,c,l);break e}else if(c!==y){y=Yn(Error(i(424)),r),cl(y),r=h_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ut=Xn(s.firstChild),Qt=r,Je=!0,Js=null,Qn=!0,l=ly(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(jr(),c===y){r=ns(s,r,l);break e}Xt(s,r,c,l)}r=r.child}return r;case 26:return Ic(s,r),s===null?(l=bv(r.type,null,r.pendingProps,null))?r.memoizedState=l:Je||(l=r.type,s=r.pendingProps,c=Hc(Me.current).createElement(l),c[yt]=r,c[$t]=s,jt(c,l,s),At(c),r.stateNode=c):r.memoizedState=bv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return qe(r),s===null&&Je&&(c=r.stateNode=Iv(r.type,r.pendingProps,Me.current),Qt=r,Qn=!0,y=ut,or(r.type)?(up=y,ut=Xn(c.firstChild)):ut=y),Xt(s,r,r.pendingProps.children,l),Ic(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Je&&((y=c=ut)&&(c=Iw(c,r.type,r.pendingProps,Qn),c!==null?(r.stateNode=c,Qt=r,ut=Xn(c.firstChild),Qn=!1,y=!0):y=!1),y||Ys(r)),qe(r),y=r.type,_=r.pendingProps,A=s!==null?s.memoizedProps:null,c=_.children,sp(y,_)?c=null:A!==null&&sp(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=ih(s,r,BI,null,null,l),Ll._currentValue=y),Ic(s,r),Xt(s,r,c,l),r.child;case 6:return s===null&&Je&&((s=l=ut)&&(l=ww(l,r.pendingProps,Qn),l!==null?(r.stateNode=l,Qt=r,ut=null,s=!0):s=!1),s||Ys(r)),null;case 13:return p_(s,r,l);case 4:return ce(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=so(r,null,c,l):Xt(s,r,c,l),r.child;case 11:return r_(s,r,r.type,r.pendingProps,l);case 7:return Xt(s,r,r.pendingProps,l),r.child;case 8:return Xt(s,r,r.pendingProps.children,l),r.child;case 12:return Xt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Ks(r,r.type,c.value),Xt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,eo(r),y=Wt(y),c=c(y),r.flags|=1,Xt(s,r,c,l),r.child;case 14:return o_(s,r,r.type,r.pendingProps,l);case 15:return a_(s,r,r.type,r.pendingProps,l);case 19:return g_(s,r,l);case 31:return $I(s,r,l);case 22:return l_(s,r,l,r.pendingProps);case 24:return eo(r),c=Wt(xt),s===null?(y=Kf(),y===null&&(y=at,_=Jf(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},Qf(r),Ks(r,xt,y)):((s.lanes&l)!==0&&(Wf(s,r),yl(r,null,null,l),gl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Ks(r,xt,c)):(c=_.cache,Ks(r,xt,c),c!==y.cache&&Gf(r,[xt],l,!0))),Xt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function is(s){s.flags|=4}function Mh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(G_())s.flags|=8192;else throw io=cc,$f}else s.flags&=-16777217}function __(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Pv(r))if(G_())s.flags|=8192;else throw io=cc,$f}function Rc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?za():536870912,s.lanes|=r,oa|=r)}function Al(s,r){if(!Je)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ct(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function WI(s,r,l){var c=r.pendingProps;switch(qf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Zi(xt),we(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ko(r)?is(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ff())),ct(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(is(r),_!==null?(ct(r),__(r,_)):(ct(r),Mh(r,y,null,c,l))):_?_!==s.memoizedState?(is(r),ct(r),__(r,_)):(ct(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&is(r),ct(r),Mh(r,y,s,c,l)),null;case 27:if(fn(r),l=Me.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&is(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ct(r),null}s=pe.current,Ko(r)?Xg(r):(s=Iv(y,c,l),r.stateNode=s,is(r))}return ct(r),null;case 5:if(fn(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&is(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ct(r),null}if(_=pe.current,Ko(r))Xg(r);else{var A=Hc(Me.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}_[yt]=r,_[$t]=c;e:for(A=r.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===r)break e;for(;A.sibling===null;){if(A.return===null||A.return===r)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}r.stateNode=_;e:switch(jt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&is(r)}}return ct(r),Mh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&is(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Me.current,Ko(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Qt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[yt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||pv(s.nodeValue,l)),s||Ys(r,!0)}else s=Hc(s).createTextNode(c),s[yt]=r,r.stateNode=s}return ct(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Ko(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[yt]=r}else jr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),s=!1}else l=Ff(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Vn(r),r):(Vn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ct(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Ko(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[yt]=r}else jr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),y=!1}else y=Ff(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Vn(r),r):(Vn(r),null)}return Vn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Rc(r,r.updateQueue),ct(r),null);case 4:return we(),s===null&&Zh(r.stateNode.containerInfo),ct(r),null;case 10:return Zi(r.type),ct(r),null;case 19:if(Z(Ct),c=r.memoizedState,c===null)return ct(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Al(c,!1);else{if(Tt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=pc(s),_!==null){for(r.flags|=128,Al(c,!1),s=_.updateQueue,r.updateQueue=s,Rc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Yg(l,s),l=l.sibling;return oe(Ct,Ct.current&1|2),Je&&Xi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&Yt()>Dc&&(r.flags|=128,y=!0,Al(c,!1),r.lanes=4194304)}else{if(!y)if(s=pc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Rc(r,s),Al(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Je)return ct(r),null}else 2*Yt()-c.renderingStartTime>Dc&&l!==536870912&&(r.flags|=128,y=!0,Al(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Yt(),s.sibling=null,l=Ct.current,oe(Ct,y?l&1|2:l&1),Je&&Xi(r,c.treeForkCount),s):(ct(r),null);case 22:case 23:return Vn(r),eh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),l=r.updateQueue,l!==null&&Rc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&Z(to),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Zi(xt),ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function XI(s,r){switch(qf(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Zi(xt),we(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return fn(r),null;case 31:if(r.memoizedState!==null){if(Vn(r),r.alternate===null)throw Error(i(340));jr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Vn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));jr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return Z(Ct),null;case 4:return we(),null;case 10:return Zi(r.type),null;case 22:case 23:return Vn(r),eh(),s!==null&&Z(to),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Zi(xt),null;case 25:return null;default:return null}}function v_(s,r){switch(qf(r),r.tag){case 3:Zi(xt),we();break;case 26:case 27:case 5:fn(r);break;case 4:we();break;case 31:r.memoizedState!==null&&Vn(r);break;case 13:Vn(r);break;case 19:Z(Ct);break;case 10:Zi(r.type);break;case 22:case 23:Vn(r),eh(),s!==null&&Z(to);break;case 24:Zi(xt)}}function Cl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,A=l.inst;c=_(),A.destroy=c}l=l.next}while(l!==y)}}catch(w){nt(r,r.return,w)}}function Zs(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var A=c.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,y=r;var k=l,Y=w;try{Y()}catch(j){nt(y,k,j)}}}c=c.next}while(c!==_)}}catch(j){nt(r,r.return,j)}}function T_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{cy(r,l)}catch(c){nt(s,s.return,c)}}}function E_(s,r,l){l.props=oo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){nt(s,r,c)}}function Il(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){nt(s,r,y)}}function wi(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(s,r,y)}else l.current=null}function S_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(s,s.return,y)}}function Dh(s,r,l){try{var c=s.stateNode;vw(c,s.type,l,r),c[$t]=r}catch(y){nt(s,s.return,y)}}function A_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&or(s.type)||s.tag===4}function Ph(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&or(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function kh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Bt));else if(c!==4&&(c===27&&or(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(kh(s,r,l),s=s.sibling;s!==null;)kh(s,r,l),s=s.sibling}function bc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&or(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(bc(s,r,l),s=s.sibling;s!==null;)bc(s,r,l),s=s.sibling}function C_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);jt(r,c,l),r[yt]=s,r[$t]=l}catch(_){nt(s,s.return,_)}}var ss=!1,Dt=!1,Vh=!1,I_=typeof WeakSet=="function"?WeakSet:Set,zt=null;function jI(s,r){if(s=s.containerInfo,np=Qc,s=Lg(s),bf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var A=0,w=-1,k=-1,Y=0,j=0,ne=s,$=null;t:for(;;){for(var Q;ne!==l||y!==0&&ne.nodeType!==3||(w=A+y),ne!==_||c!==0&&ne.nodeType!==3||(k=A+c),ne.nodeType===3&&(A+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)$=ne,ne=Q;for(;;){if(ne===s)break t;if($===l&&++Y===y&&(w=A),$===_&&++j===c&&(k=A),(Q=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=Q}l=w===-1||k===-1?null:{start:w,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(ip={focusedElem:s,selectionRange:l},Qc=!1,zt=r;zt!==null;)if(r=zt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,zt=s;else for(;zt!==null;){switch(r=zt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var me=oo(l.type,y);s=c.getSnapshotBeforeUpdate(me,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){nt(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)op(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":op(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,zt=s;break}zt=r.return}}function w_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:os(s,l),c&4&&Cl(5,l);break;case 1:if(os(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(A){nt(l,l.return,A)}else{var y=oo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(A){nt(l,l.return,A)}}c&64&&T_(l),c&512&&Il(l,l.return);break;case 3:if(os(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{cy(s,r)}catch(A){nt(l,l.return,A)}}break;case 27:r===null&&c&4&&C_(l);case 26:case 5:os(s,l),r===null&&c&4&&S_(l),c&512&&Il(l,l.return);break;case 12:os(s,l);break;case 31:os(s,l),c&4&&x_(s,l);break;case 13:os(s,l),c&4&&N_(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=aw.bind(null,l),Rw(s,l))));break;case 22:if(c=l.memoizedState!==null||ss,!c){r=r!==null&&r.memoizedState!==null||Dt,y=ss;var _=Dt;ss=c,(Dt=r)&&!_?as(s,l,(l.subtreeFlags&8772)!==0):os(s,l),ss=y,Dt=_}break;case 30:break;default:os(s,l)}}function R_(s){var r=s.alternate;r!==null&&(s.alternate=null,R_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Or(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,An=!1;function rs(s,r,l){for(l=l.child;l!==null;)b_(s,r,l),l=l.sibling}function b_(s,r,l){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Cs,l)}catch{}switch(l.tag){case 26:Dt||wi(l,r),rs(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Dt||wi(l,r);var c=pt,y=An;or(l.type)&&(pt=l.stateNode,An=!1),rs(s,r,l),kl(l.stateNode),pt=c,An=y;break;case 5:Dt||wi(l,r);case 6:if(c=pt,y=An,pt=null,rs(s,r,l),pt=c,An=y,pt!==null)if(An)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(_){nt(l,r,_)}else try{pt.removeChild(l.stateNode)}catch(_){nt(l,r,_)}break;case 18:pt!==null&&(An?(s=pt,Tv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),pa(s)):Tv(pt,l.stateNode));break;case 4:c=pt,y=An,pt=l.stateNode.containerInfo,An=!0,rs(s,r,l),pt=c,An=y;break;case 0:case 11:case 14:case 15:Zs(2,l,r),Dt||Zs(4,l,r),rs(s,r,l);break;case 1:Dt||(wi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&E_(l,r,c)),rs(s,r,l);break;case 21:rs(s,r,l);break;case 22:Dt=(c=Dt)||l.memoizedState!==null,rs(s,r,l),Dt=c;break;default:rs(s,r,l)}}function x_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{pa(s)}catch(l){nt(r,r.return,l)}}}function N_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{pa(s)}catch(l){nt(r,r.return,l)}}function ZI(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new I_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new I_),r;default:throw Error(i(435,s.tag))}}function xc(s,r){var l=ZI(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=lw.bind(null,s,c);c.then(y,y)}})}function Cn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,A=r,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(or(w.type)){pt=w.stateNode,An=!1;break e}break;case 5:pt=w.stateNode,An=!1;break e;case 3:case 4:pt=w.stateNode.containerInfo,An=!0;break e}w=w.return}if(pt===null)throw Error(i(160));b_(_,A,y),pt=null,An=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)M_(r,s),r=r.sibling}var ui=null;function M_(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Cn(r,s),In(s),c&4&&(Zs(3,s,s.return),Cl(3,s),Zs(5,s,s.return));break;case 1:Cn(r,s),In(s),c&512&&(Dt||l===null||wi(l,l.return)),c&64&&ss&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ui;if(Cn(r,s),In(s),c&512&&(Dt||l===null||wi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Hi]||_[yt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),jt(_,c,l),_[yt]=s,At(_),c=_;break e;case"link":var A=Mv("link","href",y).get(c+(l.href||""));if(A){for(var w=0;w<A.length;w++)if(_=A[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(w,1);break t}}_=y.createElement(c),jt(_,c,l),y.head.appendChild(_);break;case"meta":if(A=Mv("meta","content",y).get(c+(l.content||""))){for(w=0;w<A.length;w++)if(_=A[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(w,1);break t}}_=y.createElement(c),jt(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[yt]=s,At(_),c=_}s.stateNode=c}else Dv(y,s.type,s.stateNode);else s.stateNode=Nv(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Dv(y,s.type,s.stateNode):Nv(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Dh(s,s.memoizedProps,l.memoizedProps)}break;case 27:Cn(r,s),In(s),c&512&&(Dt||l===null||wi(l,l.return)),l!==null&&c&4&&Dh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Cn(r,s),In(s),c&512&&(Dt||l===null||wi(l,l.return)),s.flags&32){y=s.stateNode;try{Gn(y,"")}catch(me){nt(s,s.return,me)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Dh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Vh=!0);break;case 6:if(Cn(r,s),In(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(me){nt(s,s.return,me)}}break;case 3:if(Jc=null,y=ui,ui=zc(r.containerInfo),Cn(r,s),ui=y,In(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{pa(r.containerInfo)}catch(me){nt(s,s.return,me)}Vh&&(Vh=!1,D_(s));break;case 4:c=ui,ui=zc(s.stateNode.containerInfo),Cn(r,s),In(s),ui=c;break;case 12:Cn(r,s),In(s);break;case 31:Cn(r,s),In(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,xc(s,c)));break;case 13:Cn(r,s),In(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Mc=Yt()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,xc(s,c)));break;case 22:y=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,Y=ss,j=Dt;if(ss=Y||y,Dt=j||k,Cn(r,s),Dt=j,ss=Y,In(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||k||ss||Dt||ao(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){k=l=r;try{if(_=k.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=k.stateNode;var ne=k.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(me){nt(k,k.return,me)}}}else if(r.tag===6){if(l===null){k=r;try{k.stateNode.nodeValue=y?"":k.memoizedProps}catch(me){nt(k,k.return,me)}}}else if(r.tag===18){if(l===null){k=r;try{var Q=k.stateNode;y?Ev(Q,!0):Ev(k.stateNode,!1)}catch(me){nt(k,k.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,xc(s,l))));break;case 19:Cn(r,s),In(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,xc(s,c)));break;case 30:break;case 21:break;default:Cn(r,s),In(s)}}function In(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(A_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Ph(s);bc(s,_,y);break;case 5:var A=l.stateNode;l.flags&32&&(Gn(A,""),l.flags&=-33);var w=Ph(s);bc(s,w,A);break;case 3:case 4:var k=l.stateNode.containerInfo,Y=Ph(s);kh(s,Y,k);break;default:throw Error(i(161))}}catch(j){nt(s,s.return,j)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function D_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;D_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function os(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)w_(s,r.alternate,r),r=r.sibling}function ao(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Zs(4,r,r.return),ao(r);break;case 1:wi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&E_(r,r.return,l),ao(r);break;case 27:kl(r.stateNode);case 26:case 5:wi(r,r.return),ao(r);break;case 22:r.memoizedState===null&&ao(r);break;case 30:ao(r);break;default:ao(r)}s=s.sibling}}function as(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:as(y,_,l),Cl(4,_);break;case 1:if(as(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){nt(c,c.return,Y)}if(c=_,y=c.updateQueue,y!==null){var w=c.stateNode;try{var k=y.shared.hiddenCallbacks;if(k!==null)for(y.shared.hiddenCallbacks=null,y=0;y<k.length;y++)uy(k[y],w)}catch(Y){nt(c,c.return,Y)}}l&&A&64&&T_(_),Il(_,_.return);break;case 27:C_(_);case 26:case 5:as(y,_,l),l&&c===null&&A&4&&S_(_),Il(_,_.return);break;case 12:as(y,_,l);break;case 31:as(y,_,l),l&&A&4&&x_(y,_);break;case 13:as(y,_,l),l&&A&4&&N_(y,_);break;case 22:_.memoizedState===null&&as(y,_,l),Il(_,_.return);break;case 30:break;default:as(y,_,l)}r=r.sibling}}function Uh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&dl(l))}function Lh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&dl(s))}function ci(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)P_(s,r,l,c),r=r.sibling}function P_(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ci(s,r,l,c),y&2048&&Cl(9,r);break;case 1:ci(s,r,l,c);break;case 3:ci(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&dl(s)));break;case 12:if(y&2048){ci(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,A=_.id,w=_.onPostCommit;typeof w=="function"&&w(A,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){nt(r,r.return,k)}}else ci(s,r,l,c);break;case 31:ci(s,r,l,c);break;case 13:ci(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?ci(s,r,l,c):wl(s,r):_._visibility&2?ci(s,r,l,c):(_._visibility|=2,ia(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Uh(A,r);break;case 24:ci(s,r,l,c),y&2048&&Lh(r.alternate,r);break;default:ci(s,r,l,c)}}function ia(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,A=r,w=l,k=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:ia(_,A,w,k,y),Cl(8,A);break;case 23:break;case 22:var j=A.stateNode;A.memoizedState!==null?j._visibility&2?ia(_,A,w,k,y):wl(_,A):(j._visibility|=2,ia(_,A,w,k,y)),y&&Y&2048&&Uh(A.alternate,A);break;case 24:ia(_,A,w,k,y),y&&Y&2048&&Lh(A.alternate,A);break;default:ia(_,A,w,k,y)}r=r.sibling}}function wl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:wl(l,c),y&2048&&Uh(c.alternate,c);break;case 24:wl(l,c),y&2048&&Lh(c.alternate,c);break;default:wl(l,c)}r=r.sibling}}var Rl=8192;function sa(s,r,l){if(s.subtreeFlags&Rl)for(s=s.child;s!==null;)k_(s,r,l),s=s.sibling}function k_(s,r,l){switch(s.tag){case 26:sa(s,r,l),s.flags&Rl&&s.memoizedState!==null&&qw(l,ui,s.memoizedState,s.memoizedProps);break;case 5:sa(s,r,l);break;case 3:case 4:var c=ui;ui=zc(s.stateNode.containerInfo),sa(s,r,l),ui=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Rl,Rl=16777216,sa(s,r,l),Rl=c):sa(s,r,l));break;default:sa(s,r,l)}}function V_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function bl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];zt=c,L_(c,s)}V_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)U_(s),s=s.sibling}function U_(s){switch(s.tag){case 0:case 11:case 15:bl(s),s.flags&2048&&Zs(9,s,s.return);break;case 3:bl(s);break;case 12:bl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Nc(s)):bl(s);break;default:bl(s)}}function Nc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];zt=c,L_(c,s)}V_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Zs(8,r,r.return),Nc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Nc(r));break;default:Nc(r)}s=s.sibling}}function L_(s,r){for(;zt!==null;){var l=zt;switch(l.tag){case 0:case 11:case 15:Zs(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:dl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,zt=c;else e:for(l=s;zt!==null;){c=zt;var y=c.sibling,_=c.return;if(R_(c),c===l){zt=null;break e}if(y!==null){y.return=_,zt=y;break e}zt=_}}}var ew={getCacheForType:function(s){var r=Wt(xt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Wt(xt).controller.signal}},tw=typeof WeakMap=="function"?WeakMap:Map,je=0,at=null,Le=null,Be=0,tt=0,Un=null,er=!1,ra=!1,Oh=!1,ls=0,Tt=0,tr=0,lo=0,qh=0,Ln=0,oa=0,xl=null,wn=null,Bh=!1,Mc=0,O_=0,Dc=1/0,Pc=null,nr=null,Ut=0,ir=null,aa=null,us=0,Fh=0,Hh=null,q_=null,Nl=0,zh=null;function On(){return(je&2)!==0&&Be!==0?Be&-Be:H.T!==null?Qh():Fi()}function B_(){if(Ln===0)if((Be&536870912)===0||Je){var s=gi;gi<<=1,(gi&3932160)===0&&(gi=262144),Ln=s}else Ln=536870912;return s=kn.current,s!==null&&(s.flags|=32),Ln}function Rn(s,r,l){(s===at&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(la(s,0),sr(s,Be,Ln,!1)),Rs(s,l),((je&2)===0||s!==at)&&(s===at&&((je&2)===0&&(lo|=l),Tt===4&&sr(s,Be,Ln,!1)),Ri(s))}function F_(s,r,l){if((je&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||ws(s,r),y=c?sw(s,r):Jh(s,r,!0),_=c;do{if(y===0){ra&&!c&&sr(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!nw(l)){y=Jh(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var w=s;y=xl;var k=w.current.memoizedState.isDehydrated;if(k&&(la(w,A).flags|=256),A=Jh(w,A,!1),A!==2){if(Oh&&!k){w.errorRecoveryDisabledLanes|=_,lo|=_,y=4;break e}_=wn,wn=y,_!==null&&(wn===null?wn=_:wn.push.apply(wn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){la(s,0),sr(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:sr(c,r,Ln,!er);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Mc+300-Yt(),10<y)){if(sr(c,r,Ln,!er),Hn(c,0,!0)!==0)break e;us=r,c.timeoutHandle=_v(H_.bind(null,c,l,wn,Pc,Bh,r,Ln,lo,oa,er,_,"Throttled",-0,0),y);break e}H_(c,l,wn,Pc,Bh,r,Ln,lo,oa,er,_,null,-0,0)}}break}while(!0);Ri(s)}function H_(s,r,l,c,y,_,A,w,k,Y,j,ne,$,Q){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bt},k_(r,_,ne);var me=(_&62914560)===_?Mc-Yt():(_&4194048)===_?O_-Yt():0;if(me=Bw(ne,me),me!==null){us=_,s.cancelPendingCommit=me(W_.bind(null,s,r,_,l,c,y,A,w,k,j,ne,null,$,Q)),sr(s,_,A,!Y);return}}W_(s,r,_,l,c,y,A,w,k)}function nw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Dn(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function sr(s,r,l,c){r&=~qh,r&=~lo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-pn(y),A=1<<_;c[_]=-1,y&=~A}l!==0&&Ga(s,l,r)}function kc(){return(je&6)===0?(Ml(0),!1):!0}function Gh(){if(Le!==null){if(tt===0)var s=Le.return;else s=Le,ji=Zr=null,oh(s),jo=null,hl=0,s=Le;for(;s!==null;)v_(s.alternate,s),s=s.return;Le=null}}function la(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Sw(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),us=0,Gh(),at=s,Le=l=Wi(s.current,null),Be=r,tt=0,Un=null,er=!1,ra=ws(s,r),Oh=!1,oa=Ln=qh=lo=tr=Tt=0,wn=xl=null,Bh=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-pn(c),_=1<<y;r|=s[y],c&=~_}return ls=r,tc(),l}function z_(s,r){Ne=null,H.H=El,r===Xo||r===uc?(r=ry(),tt=3):r===$f?(r=ry(),tt=4):tt=r===Sh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,Le===null&&(Tt=1,Ac(s,Yn(r,s.current)))}function G_(){var s=kn.current;return s===null?!0:(Be&4194048)===Be?Wn===null:(Be&62914560)===Be||(Be&536870912)!==0?s===Wn:!1}function J_(){var s=H.H;return H.H=El,s===null?El:s}function Y_(){var s=H.A;return H.A=ew,s}function Vc(){Tt=4,er||(Be&4194048)!==Be&&kn.current!==null||(ra=!0),(tr&134217727)===0&&(lo&134217727)===0||at===null||sr(at,Be,Ln,!1)}function Jh(s,r,l){var c=je;je|=2;var y=J_(),_=Y_();(at!==s||Be!==r)&&(Pc=null,la(s,r)),r=!1;var A=Tt;e:do try{if(tt!==0&&Le!==null){var w=Le,k=Un;switch(tt){case 8:Gh(),A=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(r=!0);var Y=tt;if(tt=0,Un=null,ua(s,w,k,Y),l&&ra){A=0;break e}break;default:Y=tt,tt=0,Un=null,ua(s,w,k,Y)}}iw(),A=Tt;break}catch(j){z_(s,j)}while(!0);return r&&s.shellSuspendCounter++,ji=Zr=null,je=c,H.H=y,H.A=_,Le===null&&(at=null,Be=0,tc()),A}function iw(){for(;Le!==null;)K_(Le)}function sw(s,r){var l=je;je|=2;var c=J_(),y=Y_();at!==s||Be!==r?(Pc=null,Dc=Yt()+500,la(s,r)):ra=ws(s,r);e:do try{if(tt!==0&&Le!==null){r=Le;var _=Un;t:switch(tt){case 1:tt=0,Un=null,ua(s,r,_,1);break;case 2:case 9:if(iy(_)){tt=0,Un=null,$_(r);break}r=function(){tt!==2&&tt!==9||at!==s||(tt=7),Ri(s)},_.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:iy(_)?(tt=0,Un=null,$_(r)):(tt=0,Un=null,ua(s,r,_,7));break;case 5:var A=null;switch(Le.tag){case 26:A=Le.memoizedState;case 5:case 27:var w=Le;if(A?Pv(A):w.stateNode.complete){tt=0,Un=null;var k=w.sibling;if(k!==null)Le=k;else{var Y=w.return;Y!==null?(Le=Y,Uc(Y)):Le=null}break t}}tt=0,Un=null,ua(s,r,_,5);break;case 6:tt=0,Un=null,ua(s,r,_,6);break;case 8:Gh(),Tt=6;break e;default:throw Error(i(462))}}rw();break}catch(j){z_(s,j)}while(!0);return ji=Zr=null,H.H=c,H.A=y,je=l,Le!==null?0:(at=null,Be=0,tc(),Tt)}function rw(){for(;Le!==null&&!yf();)K_(Le)}function K_(s){var r=y_(s.alternate,s,ls);s.memoizedProps=s.pendingProps,r===null?Uc(s):Le=r}function $_(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=d_(l,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=d_(l,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:oh(r);default:v_(l,r),r=Le=Yg(r,ls),r=y_(l,r,ls)}s.memoizedProps=s.pendingProps,r===null?Uc(s):Le=r}function ua(s,r,l,c){ji=Zr=null,oh(r),jo=null,hl=0;var y=r.return;try{if(KI(s,y,r,l,Be)){Tt=1,Ac(s,Yn(l,s.current)),Le=null;return}}catch(_){if(y!==null)throw Le=y,_;Tt=1,Ac(s,Yn(l,s.current)),Le=null;return}r.flags&32768?(Je||c===1?s=!0:ra||(Be&536870912)!==0?s=!1:(er=s=!0,(c===2||c===9||c===3||c===6)&&(c=kn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Q_(r,s)):Uc(r)}function Uc(s){var r=s;do{if((r.flags&32768)!==0){Q_(r,er);return}s=r.return;var l=WI(r.alternate,r,ls);if(l!==null){Le=l;return}if(r=r.sibling,r!==null){Le=r;return}Le=r=s}while(r!==null);Tt===0&&(Tt=5)}function Q_(s,r){do{var l=XI(s.alternate,s);if(l!==null){l.flags&=32767,Le=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Le=s;return}Le=s=l}while(s!==null);Tt=6,Le=null}function W_(s,r,l,c,y,_,A,w,k){s.cancelPendingCommit=null;do Lc();while(Ut!==0);if((je&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Pf,Kt(s,l,_,A,w,k),s===at&&(Le=at=null,Be=0),aa=r,ir=s,us=l,Fh=_,Hh=y,q_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,uw(qi,function(){return tv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=H.T,H.T=null,y=ae.p,ae.p=2,A=je,je|=4;try{jI(s,r,l)}finally{je=A,ae.p=y,H.T=c}}Ut=1,X_(),j_(),Z_()}}function X_(){if(Ut===1){Ut=0;var s=ir,r=aa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var c=ae.p;ae.p=2;var y=je;je|=4;try{M_(r,s);var _=ip,A=Lg(s.containerInfo),w=_.focusedElem,k=_.selectionRange;if(A!==w&&w&&w.ownerDocument&&Ug(w.ownerDocument.documentElement,w)){if(k!==null&&bf(w)){var Y=k.start,j=k.end;if(j===void 0&&(j=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(j,w.value.length);else{var ne=w.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var Q=$.getSelection(),me=w.textContent.length,Se=Math.min(k.start,me),rt=k.end===void 0?Se:Math.min(k.end,me);!Q.extend&&Se>rt&&(A=rt,rt=Se,Se=A);var F=Vg(w,Se),U=Vg(w,rt);if(F&&U&&(Q.rangeCount!==1||Q.anchorNode!==F.node||Q.anchorOffset!==F.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var J=ne.createRange();J.setStart(F.node,F.offset),Q.removeAllRanges(),Se>rt?(Q.addRange(J),Q.extend(U.node,U.offset)):(J.setEnd(U.node,U.offset),Q.addRange(J))}}}}for(ne=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var ee=ne[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Qc=!!np,ip=np=null}finally{je=y,ae.p=c,H.T=l}}s.current=r,Ut=2}}function j_(){if(Ut===2){Ut=0;var s=ir,r=aa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var c=ae.p;ae.p=2;var y=je;je|=4;try{w_(s,r.alternate,r)}finally{je=y,ae.p=c,H.T=l}}Ut=3}}function Z_(){if(Ut===4||Ut===3){Ut=0,Ba();var s=ir,r=aa,l=us,c=q_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,aa=ir=null,ev(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(nr=null),Ya(l),r=r.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Cs,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=H.T,y=ae.p,ae.p=2,H.T=null;try{for(var _=s.onRecoverableError,A=0;A<c.length;A++){var w=c[A];_(w.value,{componentStack:w.stack})}}finally{H.T=r,ae.p=y}}(us&3)!==0&&Lc(),Ri(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===zh?Nl++:(Nl=0,zh=s):Nl=0,Ml(0)}}function ev(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,dl(r)))}function Lc(){return X_(),j_(),Z_(),tv()}function tv(){if(Ut!==5)return!1;var s=ir,r=Fh;Fh=0;var l=Ya(us),c=H.T,y=ae.p;try{ae.p=32>l?32:l,H.T=null,l=Hh,Hh=null;var _=ir,A=us;if(Ut=0,aa=ir=null,us=0,(je&6)!==0)throw Error(i(331));var w=je;if(je|=4,U_(_.current),P_(_,_.current,A,l),je=w,Ml(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Cs,_)}catch{}return!0}finally{ae.p=y,H.T=c,ev(s,r)}}function nv(s,r,l){r=Yn(l,r),r=Eh(s.stateNode,r,2),s=Ws(s,r,2),s!==null&&(Rs(s,2),Ri(s))}function nt(s,r,l){if(s.tag===3)nv(s,s,l);else for(;r!==null;){if(r.tag===3){nv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(nr===null||!nr.has(c))){s=Yn(l,s),l=i_(2),c=Ws(r,l,2),c!==null&&(s_(l,c,r,s),Rs(c,2),Ri(c));break}}r=r.return}}function Yh(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new tw;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Oh=!0,y.add(l),s=ow.bind(null,s,r,l),r.then(s,s))}function ow(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,at===s&&(Be&l)===l&&(Tt===4||Tt===3&&(Be&62914560)===Be&&300>Yt()-Mc?(je&2)===0&&la(s,0):qh|=l,oa===Be&&(oa=0)),Ri(s)}function iv(s,r){r===0&&(r=za()),s=Wr(s,r),s!==null&&(Rs(s,r),Ri(s))}function aw(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),iv(s,l)}function lw(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),iv(s,l)}function uw(s,r){return Vr(s,r)}var Oc=null,ca=null,Kh=!1,qc=!1,$h=!1,rr=0;function Ri(s){s!==ca&&s.next===null&&(ca===null?Oc=ca=s:ca=ca.next=s),qc=!0,Kh||(Kh=!0,dw())}function Ml(s,r){if(!$h&&qc){$h=!0;do for(var l=!1,c=Oc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var A=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-pn(42|s)+1)-1,_&=y&~(A&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,av(c,_))}else _=Be,_=Hn(c,c===at?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||ws(c,_)||(l=!0,av(c,_));c=c.next}while(l);$h=!1}}function cw(){sv()}function sv(){qc=Kh=!1;var s=0;rr!==0&&Ew()&&(s=rr);for(var r=Yt(),l=null,c=Oc;c!==null;){var y=c.next,_=rv(c,r);_===0?(c.next=null,l===null?Oc=y:l.next=y,y===null&&(ca=l)):(l=c,(s!==0||(_&3)!==0)&&(qc=!0)),c=y}Ut!==0&&Ut!==5||Ml(s),rr!==0&&(rr=0)}function rv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var A=31-pn(_),w=1<<A,k=y[A];k===-1?((w&l)===0||(w&c)!==0)&&(y[A]=No(w,r)):k<=r&&(s.expiredLanes|=w),_&=~w}if(r=at,l=Be,l=Hn(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&xo(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ws(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&xo(c),Ya(l)){case 2:case 8:l=qt;break;case 32:l=qi;break;case 268435456:l=Fa;break;default:l=qi}return c=ov.bind(null,s),l=Vr(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&xo(c),s.callbackPriority=2,s.callbackNode=null,2}function ov(s,r){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Lc()&&s.callbackNode!==l)return null;var c=Be;return c=Hn(s,s===at?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(F_(s,c,r),rv(s,Yt()),s.callbackNode!=null&&s.callbackNode===l?ov.bind(null,s):null)}function av(s,r){if(Lc())return null;F_(s,r,!0)}function dw(){Aw(function(){(je&6)!==0?Vr(Vt,cw):sv()})}function Qh(){if(rr===0){var s=Qo;s===0&&(s=Lr,Lr<<=1,(Lr&261888)===0&&(Lr=256)),rr=s}return rr}function lv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ei(""+s)}function uv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function fw(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=lv((y[$t]||null).action),A=c.submitter;A&&(r=(r=A[$t]||null)?lv(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var w=new zr("action","action",null,c,y);s.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(rr!==0){var k=A?uv(y,A):new FormData(y);mh(l,{pending:!0,data:k,method:y.method,action:_},null,k)}}else typeof _=="function"&&(w.preventDefault(),k=A?uv(y,A):new FormData(y),mh(l,{pending:!0,data:k,method:y.method,action:_},_,k))},currentTarget:y}]})}}for(var Wh=0;Wh<Df.length;Wh++){var Xh=Df[Wh],hw=Xh.toLowerCase(),pw=Xh[0].toUpperCase()+Xh.slice(1);li(hw,"on"+pw)}li(Bg,"onAnimationEnd"),li(Fg,"onAnimationIteration"),li(Hg,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(NI,"onTransitionRun"),li(MI,"onTransitionStart"),li(DI,"onTransitionCancel"),li(zg,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function cv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var A=c.length-1;0<=A;A--){var w=c[A],k=w.instance,Y=w.currentTarget;if(w=w.listener,k!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=Y;try{_(y)}catch(j){ec(j)}y.currentTarget=null,_=k}else for(A=0;A<c.length;A++){if(w=c[A],k=w.instance,Y=w.currentTarget,w=w.listener,k!==_&&y.isPropagationStopped())break e;_=w,y.currentTarget=Y;try{_(y)}catch(j){ec(j)}y.currentTarget=null,_=k}}}}function Oe(s,r){var l=r[Ns];l===void 0&&(l=r[Ns]=new Set);var c=s+"__bubble";l.has(c)||(dv(r,s,2,!1),l.add(c))}function jh(s,r,l){var c=0;r&&(c|=4),dv(l,s,c,r)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Zh(s){if(!s[Bc]){s[Bc]=!0,Mo.forEach(function(l){l!=="selectionchange"&&(mw.has(l)||jh(l,!1,s),jh(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Bc]||(r[Bc]=!0,jh("selectionchange",!1,r))}}function dv(s,r,l,c){switch(Bv(r)){case 2:var y=zw;break;case 8:y=Gw;break;default:y=pp}l=y.bind(null,r,l,s),y=void 0,!el||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function ep(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var w=c.stateNode.containerInfo;if(w===y)break;if(A===4)for(A=c.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;w!==null;){if(A=zi(w),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){c=_=A;continue e}w=w.parentNode}}c=c.return}Ou(function(){var Y=_,j=Uo(l),ne=[];e:{var $=Gg.get(s);if($!==void 0){var Q=zr,me=s;switch(s){case"keypress":if(Hr(l)===0)break e;case"keydown":case"keyup":Q=Ku;break;case"focusin":me="focus",Q=Bs;break;case"focusout":me="blur",Q=Bs;break;case"beforeblur":case"afterblur":Q=Bs;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Qu;break;case Bg:case Fg:case Hg:Q=qo;break;case zg:Q=Bo;break;case"scroll":case"scrollend":Q=qu;break;case"wheel":Q=Xu;break;case"copy":case"cut":case"paste":Q=zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=rl;break;case"toggle":case"beforetoggle":Q=Hs}var Se=(r&4)!==0,rt=!Se&&(s==="scroll"||s==="scrollend"),F=Se?$!==null?$+"Capture":null:$;Se=[];for(var U=Y,J;U!==null;){var ee=U;if(J=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||J===null||F===null||(ee=En(U,F),ee!=null&&Se.push(Pl(U,ee,J))),rt)break;U=U.return}0<Se.length&&($=new Q($,me,null,l,j),ne.push({event:$,listeners:Se}))}}if((r&7)===0){e:{if($=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",$&&l!==Vo&&(me=l.relatedTarget||l.fromElement)&&(zi(me)||me[_i]))break e;if((Q||$)&&($=j.window===j?j:($=j.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(me=l.relatedTarget||l.toElement,Q=Y,me=me?zi(me):null,me!==null&&(rt=a(me),Se=me.tag,me!==rt||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(Q=null,me=Y),Q!==me)){if(Se=Bu,ee="onMouseLeave",F="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(Se=rl,ee="onPointerLeave",F="onPointerEnter",U="pointer"),rt=Q==null?$:qr(Q),J=me==null?$:qr(me),$=new Se(ee,U+"leave",Q,l,j),$.target=rt,$.relatedTarget=J,ee=null,zi(j)===Y&&(Se=new Se(F,U+"enter",me,l,j),Se.target=J,Se.relatedTarget=rt,ee=Se),rt=ee,Q&&me)t:{for(Se=gw,F=Q,U=me,J=0,ee=F;ee;ee=Se(ee))J++;ee=0;for(var ve=U;ve;ve=Se(ve))ee++;for(;0<J-ee;)F=Se(F),J--;for(;0<ee-J;)U=Se(U),ee--;for(;J--;){if(F===U||U!==null&&F===U.alternate){Se=F;break t}F=Se(F),U=Se(U)}Se=null}else Se=null;Q!==null&&fv(ne,$,Q,Se,!1),me!==null&&rt!==null&&fv(ne,rt,me,Se,!0)}}e:{if($=Y?qr(Y):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var Qe=xg;else if(Sn($))if(Ng)Qe=RI;else{Qe=II;var ge=CI}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&ja(Y.elementType)&&(Qe=xg):Qe=wI;if(Qe&&(Qe=Qe(s,Y))){Kr(ne,Qe,l,j);break e}ge&&ge(s,$,Y),s==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&ko($,"number",$.value)}switch(ge=Y?qr(Y):window,s){case"focusin":(Sn(ge)||ge.contentEditable==="true")&&(Fo=ge,xf=Y,ll=null);break;case"focusout":ll=xf=Fo=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Og(ne,l,j);break;case"selectionchange":if(xI)break;case"keydown":case"keyup":Og(ne,l,j)}var De;if(T)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ve?Ze(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(z&&l.locale!=="ko"&&(Ve||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ve&&(De=Us()):(Mn=j,Lo="value"in Mn?Mn.value:Mn.textContent,Ve=!0)),ge=Fc(Y,Fe),0<ge.length&&(Fe=new nl(Fe,s,null,l,j),ne.push({event:Fe,listeners:ge}),De?Fe.data=De:(De=bt(l),De!==null&&(Fe.data=De)))),(De=R?Ft(s,l):Ht(s,l))&&(Fe=Fc(Y,"onBeforeInput"),0<Fe.length&&(ge=new nl("onBeforeInput","beforeinput",null,l,j),ne.push({event:ge,listeners:Fe}),ge.data=De)),fw(ne,s,Y,l,j)}cv(ne,r)})}function Pl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Fc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=En(s,l),y!=null&&c.unshift(Pl(s,y,_)),y=En(s,r),y!=null&&c.push(Pl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function gw(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function fv(s,r,l,c,y){for(var _=r._reactName,A=[];l!==null&&l!==c;){var w=l,k=w.alternate,Y=w.stateNode;if(w=w.tag,k!==null&&k===c)break;w!==5&&w!==26&&w!==27||Y===null||(k=Y,y?(Y=En(l,_),Y!=null&&A.unshift(Pl(l,Y,k))):y||(Y=En(l,_),Y!=null&&A.push(Pl(l,Y,k)))),l=l.return}A.length!==0&&s.push({event:r,listeners:A})}var yw=/\r\n?/g,_w=/\u0000|\uFFFD/g;function hv(s){return(typeof s=="string"?s:""+s).replace(yw,`
`).replace(_w,"")}function pv(s,r){return r=hv(r),hv(s)===r}function st(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Gn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Gn(s,""+c);break;case"className":Ps(s,"class",c);break;case"tabIndex":Ps(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ps(s,l,c);break;case"style":Uu(s,c,_);break;case"data":if(r!=="object"){Ps(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ei(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&st(s,r,"name",y.name,y,null),st(s,r,"formEncType",y.formEncType,y,null),st(s,r,"formMethod",y.formMethod,y,null),st(s,r,"formTarget",y.formTarget,y,null)):(st(s,r,"encType",y.encType,y,null),st(s,r,"method",y.method,y,null),st(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ei(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Bt);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ei(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Oe("beforetoggle",s),Oe("toggle",s),Ds(s,"popover",c);break;case"xlinkActuate":zn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":zn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":zn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":zn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":zn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":zn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":zn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":zn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":zn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ds(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Af.get(l)||l,Ds(s,l,c))}}function tp(s,r,l,c,y,_){switch(l){case"style":Uu(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Gn(s,c):(typeof c=="number"||typeof c=="bigint")&&Gn(s,""+c);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Bt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ms.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[$t]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Ds(s,l,c)}}}function jt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",s),Oe("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var A=l[_];if(A!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,_,A,l,null)}}y&&st(s,r,"srcSet",l.srcSet,l,null),c&&st(s,r,"src",l.src,l,null);return;case"input":Oe("invalid",s);var w=_=A=y=null,k=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var j=l[c];if(j!=null)switch(c){case"name":y=j;break;case"type":A=j;break;case"checked":k=j;break;case"defaultChecked":Y=j;break;case"value":_=j;break;case"defaultValue":w=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,r));break;default:st(s,r,c,j,l,null)}}Br(s,_,w,k,Y,A,y,!1);return;case"select":Oe("invalid",s),c=A=_=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":_=w;break;case"defaultValue":A=w;break;case"multiple":c=w;default:st(s,r,y,w,l,null)}r=_,l=A,s.multiple=!!c,r!=null?$e(s,!!c,r,!1):l!=null&&$e(s,!!c,l,!0);return;case"textarea":Oe("invalid",s),_=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(w=l[A],w!=null))switch(A){case"value":c=w;break;case"defaultValue":y=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:st(s,r,A,w,l,null)}Vs(s,c,y,_);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(c=l[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(s,r,k,c,l,null)}return;case"dialog":Oe("beforetoggle",s),Oe("toggle",s),Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":Oe("load",s);break;case"video":case"audio":for(c=0;c<Dl.length;c++)Oe(Dl[c],s);break;case"image":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"embed":case"source":case"link":Oe("error",s),Oe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,Y,c,l,null)}return;default:if(ja(r)){for(j in l)l.hasOwnProperty(j)&&(c=l[j],c!==void 0&&tp(s,r,j,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&st(s,r,w,c,l,null))}function vw(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,w=null,k=null,Y=null,j=null;for(Q in l){var ne=l[Q];if(l.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":k=ne;default:c.hasOwnProperty(Q)||st(s,r,Q,null,c,ne)}}for(var $ in c){var Q=c[$];if(ne=l[$],c.hasOwnProperty($)&&(Q!=null||ne!=null))switch($){case"type":_=Q;break;case"name":y=Q;break;case"checked":Y=Q;break;case"defaultChecked":j=Q;break;case"value":A=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ne&&st(s,r,$,Q,c,ne)}}ks(s,A,w,k,Y,j,_,y);return;case"select":Q=A=w=$=null;for(_ in l)if(k=l[_],l.hasOwnProperty(_)&&k!=null)switch(_){case"value":break;case"multiple":Q=k;default:c.hasOwnProperty(_)||st(s,r,_,null,c,k)}for(y in c)if(_=c[y],k=l[y],c.hasOwnProperty(y)&&(_!=null||k!=null))switch(y){case"value":$=_;break;case"defaultValue":w=_;break;case"multiple":A=_;default:_!==k&&st(s,r,y,_,c,k)}r=w,l=A,c=Q,$!=null?$e(s,!!l,$,!1):!!c!=!!l&&(r!=null?$e(s,!!l,r,!0):$e(s,!!l,l?[]:"",!1));return;case"textarea":Q=$=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:st(s,r,w,null,c,y)}for(A in c)if(y=c[A],_=l[A],c.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":$=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&st(s,r,A,y,c,_)}Fr(s,$,Q);return;case"option":for(var me in l)if($=l[me],l.hasOwnProperty(me)&&$!=null&&!c.hasOwnProperty(me))switch(me){case"selected":s.selected=!1;break;default:st(s,r,me,null,c,$)}for(k in c)if($=c[k],Q=l[k],c.hasOwnProperty(k)&&$!==Q&&($!=null||Q!=null))switch(k){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:st(s,r,k,$,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)$=l[Se],l.hasOwnProperty(Se)&&$!=null&&!c.hasOwnProperty(Se)&&st(s,r,Se,null,c,$);for(Y in c)if($=c[Y],Q=l[Y],c.hasOwnProperty(Y)&&$!==Q&&($!=null||Q!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:st(s,r,Y,$,c,Q)}return;default:if(ja(r)){for(var rt in l)$=l[rt],l.hasOwnProperty(rt)&&$!==void 0&&!c.hasOwnProperty(rt)&&tp(s,r,rt,void 0,c,$);for(j in c)$=c[j],Q=l[j],!c.hasOwnProperty(j)||$===Q||$===void 0&&Q===void 0||tp(s,r,j,$,c,Q);return}}for(var F in l)$=l[F],l.hasOwnProperty(F)&&$!=null&&!c.hasOwnProperty(F)&&st(s,r,F,null,c,$);for(ne in c)$=c[ne],Q=l[ne],!c.hasOwnProperty(ne)||$===Q||$==null&&Q==null||st(s,r,ne,$,c,Q)}function mv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Tw(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,A=y.initiatorType,w=y.duration;if(_&&w&&mv(A)){for(A=0,w=y.responseEnd,c+=1;c<l.length;c++){var k=l[c],Y=k.startTime;if(Y>w)break;var j=k.transferSize,ne=k.initiatorType;j&&mv(ne)&&(k=k.responseEnd,A+=j*(k<w?1:(w-Y)/(k-Y)))}if(--c,r+=8*(_+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var np=null,ip=null;function Hc(s){return s.nodeType===9?s:s.ownerDocument}function gv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function sp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var rp=null;function Ew(){var s=window.event;return s&&s.type==="popstate"?s===rp?!1:(rp=s,!0):(rp=null,!1)}var _v=typeof setTimeout=="function"?setTimeout:void 0,Sw=typeof clearTimeout=="function"?clearTimeout:void 0,vv=typeof Promise=="function"?Promise:void 0,Aw=typeof queueMicrotask=="function"?queueMicrotask:typeof vv<"u"?function(s){return vv.resolve(null).then(s).catch(Cw)}:_v;function Cw(s){setTimeout(function(){throw s})}function or(s){return s==="head"}function Tv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),pa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")kl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,kl(l);for(var _=l.firstChild;_;){var A=_.nextSibling,w=_.nodeName;_[Hi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=A}}else l==="body"&&kl(s.ownerDocument.body);l=y}while(l);pa(r)}function Ev(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function op(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":op(l),Or(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Iw(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Hi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Xn(s.nextSibling),s===null)break}return null}function ww(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Xn(s.nextSibling),s===null))return null;return s}function Sv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Xn(s.nextSibling),s===null))return null;return s}function ap(s){return s.data==="$?"||s.data==="$~"}function lp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Rw(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Xn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var up=null;function Av(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Xn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Cv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Iv(s,r,l){switch(r=Hc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function kl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Or(s)}var jn=new Map,wv=new Set;function zc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var cs=ae.d;ae.d={f:bw,r:xw,D:Nw,C:Mw,L:Dw,m:Pw,X:Vw,S:kw,M:Uw};function bw(){var s=cs.f(),r=kc();return s||r}function xw(s){var r=Gi(s);r!==null&&r.tag===5&&r.type==="form"?zy(r):cs.r(s)}var da=typeof document>"u"?null:document;function Rv(s,r,l){var c=da;if(c&&typeof r=="string"&&r){var y=_t(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),wv.has(y)||(wv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),jt(r,"link",s),At(r),c.head.appendChild(r)))}}function Nw(s){cs.D(s),Rv("dns-prefetch",s,null)}function Mw(s,r){cs.C(s,r),Rv("preconnect",s,r)}function Dw(s,r,l){cs.L(s,r,l);var c=da;if(c&&s&&r){var y='link[rel="preload"][as="'+_t(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+_t(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+_t(l.imageSizes)+'"]')):y+='[href="'+_t(s)+'"]';var _=y;switch(r){case"style":_=fa(s);break;case"script":_=ha(s)}jn.has(_)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),jn.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Vl(_))||r==="script"&&c.querySelector(Ul(_))||(r=c.createElement("link"),jt(r,"link",s),At(r),c.head.appendChild(r)))}}function Pw(s,r){cs.m(s,r);var l=da;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+_t(c)+'"][href="'+_t(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ha(s)}if(!jn.has(_)&&(s=E({rel:"modulepreload",href:s},r),jn.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ul(_)))return}c=l.createElement("link"),jt(c,"link",s),At(c),l.head.appendChild(c)}}}function kw(s,r,l){cs.S(s,r,l);var c=da;if(c&&s){var y=oi(c).hoistableStyles,_=fa(s);r=r||"default";var A=y.get(_);if(!A){var w={loading:0,preload:null};if(A=c.querySelector(Vl(_)))w.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=jn.get(_))&&cp(s,l);var k=A=c.createElement("link");At(k),jt(k,"link",s),k._p=new Promise(function(Y,j){k.onload=Y,k.onerror=j}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Gc(A,r,c)}A={type:"stylesheet",instance:A,count:1,state:w},y.set(_,A)}}}function Vw(s,r){cs.X(s,r);var l=da;if(l&&s){var c=oi(l).hoistableScripts,y=ha(s),_=c.get(y);_||(_=l.querySelector(Ul(y)),_||(s=E({src:s,async:!0},r),(r=jn.get(y))&&dp(s,r),_=l.createElement("script"),At(_),jt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function Uw(s,r){cs.M(s,r);var l=da;if(l&&s){var c=oi(l).hoistableScripts,y=ha(s),_=c.get(y);_||(_=l.querySelector(Ul(y)),_||(s=E({src:s,async:!0,type:"module"},r),(r=jn.get(y))&&dp(s,r),_=l.createElement("script"),At(_),jt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function bv(s,r,l,c){var y=(y=Me.current)?zc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=fa(l.href),l=oi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=fa(l.href);var _=oi(y).hoistableStyles,A=_.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,A),(_=y.querySelector(Vl(s)))&&!_._p&&(A.instance=_,A.state.loading=5),jn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},jn.set(s,l),_||Lw(y,s,l,A.state))),r&&c===null)throw Error(i(528,""));return A}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ha(l),l=oi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function fa(s){return'href="'+_t(s)+'"'}function Vl(s){return'link[rel="stylesheet"]['+s+"]"}function xv(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function Lw(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),jt(r,"link",l),At(r),s.head.appendChild(r))}function ha(s){return'[src="'+_t(s)+'"]'}function Ul(s){return"script[async]"+s}function Nv(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+_t(l.href)+'"]');if(c)return r.instance=c,At(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),At(c),jt(c,"style",y),Gc(c,l.precedence,s),r.instance=c;case"stylesheet":y=fa(l.href);var _=s.querySelector(Vl(y));if(_)return r.state.loading|=4,r.instance=_,At(_),_;c=xv(l),(y=jn.get(y))&&cp(c,y),_=(s.ownerDocument||s).createElement("link"),At(_);var A=_;return A._p=new Promise(function(w,k){A.onload=w,A.onerror=k}),jt(_,"link",c),r.state.loading|=4,Gc(_,l.precedence,s),r.instance=_;case"script":return _=ha(l.src),(y=s.querySelector(Ul(_)))?(r.instance=y,At(y),y):(c=l,(y=jn.get(_))&&(c=E({},l),dp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),At(y),jt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Gc(c,l.precedence,s));return r.instance}function Gc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,A=0;A<c.length;A++){var w=c[A];if(w.dataset.precedence===r)_=w;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function cp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function dp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Jc=null;function Mv(s,r,l){if(Jc===null){var c=new Map,y=Jc=new Map;y.set(l,c)}else y=Jc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Hi]||_[yt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=s+A;var w=c.get(A);w?w.push(_):c.set(A,[_])}}return c}function Dv(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function Ow(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Pv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function qw(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=fa(c.href),_=r.querySelector(Vl(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Yc.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,At(_);return}_=r.ownerDocument||r,c=xv(c),(y=jn.get(y))&&cp(c,y),_=_.createElement("link"),At(_);var A=_;A._p=new Promise(function(w,k){A.onload=w,A.onerror=k}),jt(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Yc.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var fp=0;function Bw(s,r){return s.stylesheets&&s.count===0&&$c(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&$c(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&fp===0&&(fp=62500*Tw());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&$c(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>fp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Yc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$c(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Kc=null;function $c(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Kc=new Map,r.forEach(Fw,s),Kc=null,Yc.call(s))}function Fw(s,r){if(!(r.state.loading&4)){var l=Kc.get(s);if(l)var c=l.get(null);else{l=new Map,Kc.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=r.instance,A=y.getAttribute("data-precedence"),_=l.get(A)||c,_===c&&l.set(null,y),l.set(A,y),this.count++,c=Yc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Ll={$$typeof:W,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Hw(s,r,l,c,y,_,A,w,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.hiddenUpdates=Bi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function kv(s,r,l,c,y,_,A,w,k,Y,j,ne){return s=new Hw(s,r,l,A,k,Y,j,ne,w),r=1,_===!0&&(r|=24),_=Pn(3,null,null,r),s.current=_,_.stateNode=s,r=Jf(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},Qf(_),s}function Vv(s){return s?(s=Go,s):Go}function Uv(s,r,l,c,y,_){y=Vv(y),c.context===null?c.context=y:c.pendingContext=y,c=Qs(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=Ws(s,c,r),l!==null&&(Rn(l,s,r),ml(l,s,r))}function Lv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function hp(s,r){Lv(s,r),(s=s.alternate)&&Lv(s,r)}function Ov(s){if(s.tag===13||s.tag===31){var r=Wr(s,67108864);r!==null&&Rn(r,s,67108864),hp(s,67108864)}}function qv(s){if(s.tag===13||s.tag===31){var r=On();r=Ja(r);var l=Wr(s,r);l!==null&&Rn(l,s,r),hp(s,r)}}var Qc=!0;function zw(s,r,l,c){var y=H.T;H.T=null;var _=ae.p;try{ae.p=2,pp(s,r,l,c)}finally{ae.p=_,H.T=y}}function Gw(s,r,l,c){var y=H.T;H.T=null;var _=ae.p;try{ae.p=8,pp(s,r,l,c)}finally{ae.p=_,H.T=y}}function pp(s,r,l,c){if(Qc){var y=mp(c);if(y===null)ep(s,r,c,Wc,l),Fv(s,c);else if(Yw(y,s,r,l,c))c.stopPropagation();else if(Fv(s,c),r&4&&-1<Jw.indexOf(s)){for(;y!==null;){var _=Gi(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ri(_.pendingLanes);if(A!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var k=1<<31-pn(A);w.entanglements[1]|=k,A&=~k}Ri(_),(je&6)===0&&(Dc=Yt()+500,Ml(0))}}break;case 31:case 13:w=Wr(_,2),w!==null&&Rn(w,_,2),kc(),hp(_,2)}if(_=mp(c),_===null&&ep(s,r,c,Wc,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else ep(s,r,c,null,l)}}function mp(s){return s=Uo(s),gp(s)}var Wc=null;function gp(s){if(Wc=null,s=zi(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Wc=s,null}function Bv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xu()){case Vt:return 2;case qt:return 8;case qi:case Nu:return 32;case Fa:return 268435456;default:return 32}default:return 32}}var yp=!1,ar=null,lr=null,ur=null,Ol=new Map,ql=new Map,cr=[],Jw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fv(s,r){switch(s){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Ol.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(r.pointerId)}}function Bl(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Gi(r),r!==null&&Ov(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function Yw(s,r,l,c,y){switch(r){case"focusin":return ar=Bl(ar,s,r,l,c,y),!0;case"dragenter":return lr=Bl(lr,s,r,l,c,y),!0;case"mouseover":return ur=Bl(ur,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return Ol.set(_,Bl(Ol.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,ql.set(_,Bl(ql.get(_)||null,s,r,l,c,y)),!0}return!1}function Hv(s){var r=zi(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Du(s.priority,function(){qv(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,Du(s.priority,function(){qv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=mp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Vo=c,l.target.dispatchEvent(c),Vo=null}else return r=Gi(l),r!==null&&Ov(r),s.blockedOn=l,!1;r.shift()}return!0}function zv(s,r,l){Xc(s)&&l.delete(r)}function Kw(){yp=!1,ar!==null&&Xc(ar)&&(ar=null),lr!==null&&Xc(lr)&&(lr=null),ur!==null&&Xc(ur)&&(ur=null),Ol.forEach(zv),ql.forEach(zv)}function jc(s,r){s.blockedOn===r&&(s.blockedOn=null,yp||(yp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Kw)))}var Zc=null;function Gv(s){Zc!==s&&(Zc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zc===s&&(Zc=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(gp(c||l)===null)continue;break}var _=Gi(l);_!==null&&(s.splice(r,3),r-=3,mh(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function pa(s){function r(k){return jc(k,s)}ar!==null&&jc(ar,s),lr!==null&&jc(lr,s),ur!==null&&jc(ur,s),Ol.forEach(r),ql.forEach(r);for(var l=0;l<cr.length;l++){var c=cr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<cr.length&&(l=cr[0],l.blockedOn===null);)Hv(l),l.blockedOn===null&&cr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],A=y[$t]||null;if(typeof _=="function")A||Gv(l);else if(A){var w=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[$t]||null)w=A.formAction;else if(gp(y)!==null)continue}else w=A.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),Gv(l)}}}function Jv(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function _p(s){this._internalRoot=s}ed.prototype.render=_p.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=On();Uv(l,c,s,r,null,null)},ed.prototype.unmount=_p.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Uv(s.current,2,null,s,null,null),kc(),r[_i]=null}};function ed(s){this._internalRoot=s}ed.prototype.unstable_scheduleHydration=function(s){if(s){var r=Fi();s={blockedOn:null,target:s,priority:r};for(var l=0;l<cr.length&&r!==0&&r<cr[l].priority;l++);cr.splice(l,0,s),l===0&&Hv(s)}};var Yv=e.version;if(Yv!=="19.2.0")throw Error(i(527,Yv,"19.2.0"));ae.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var $w={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Cs=td.inject($w),sn=td}catch{}}return Hl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=Zy,_=e_,A=t_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError)),r=kv(s,1,!1,null,null,l,c,null,y,_,A,Jv),s[_i]=r.current,Zh(s),new _p(r)},Hl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=Zy,A=e_,w=t_,k=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),r=kv(s,1,!0,r,l??null,c,y,k,_,A,w,Jv),r.context=Vv(null),l=r.current,c=On(),c=Ja(c),y=Qs(c),y.callback=null,Ws(l,y,c),l=c,r.current.lanes=l,Rs(r,l),Ri(r),s[_i]=r.current,Zh(s),new ed(r)},Hl.version="19.2.0",Hl}var n0;function rR(){if(n0)return Ep.exports;n0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ep.exports=sR(),Ep.exports}var oR=rR();const aR=sS(oR),lR=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},uR=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},oS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,b=m&63;p||(b=64,u||(S=64)),i.push(t[v],t[E],t[S],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):uR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||E==null)throw new cR;const S=a<<2|d>>4;if(i.push(S),m!==64){const b=d<<4&240|m>>2;if(i.push(b),E!==64){const q=m<<6&192|E;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class cR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dR=function(n){const e=rS(n);return oS.encodeByteArray(e,!0)},Sd=function(n){return dR(n).replace(/\./g,"")},aS=function(n){try{return oS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=()=>fR().__FIREBASE_DEFAULTS__,pR=()=>{if(typeof process>"u"||typeof i0>"u")return;const n=i0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&aS(n[1]);return e&&JSON.parse(e)},Yd=()=>{try{return lR()||hR()||pR()||mR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lS=n=>{var e,t;return(t=(e=Yd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},uS=n=>{const e=lS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},cS=()=>{var n;return(n=Yd())===null||n===void 0?void 0:n.config},dS=n=>{var e;return(e=Yd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Tm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sd(JSON.stringify(t)),Sd(JSON.stringify(u)),""].join(".")}const jl={};function yR(){const n={prod:[],emulator:[]};for(const e of Object.keys(jl))jl[e]?n.emulator.push(e):n.prod.push(e);return n}function _R(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let s0=!1;function Em(n,e){if(typeof window>"u"||typeof document>"u"||!Nr(window.location.host)||jl[n]===e||jl[n]||s0)return;jl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=yR().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,b){S.setAttribute("width","24"),S.setAttribute("id",b),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{s0=!0,u()},S}function v(S,b){S.setAttribute("id",b),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=_R(i),b=t("text"),q=document.getElementById(b)||document.createElement("span"),B=t("learnmore"),G=document.getElementById(B)||document.createElement("a"),te=t("preprendIcon"),K=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;d(W),v(G,B);const se=m();p(K,te),W.append(K,q,G,se),document.body.appendChild(W)}a?(q.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function TR(){var n;const e=(n=Yd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ER(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CR(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function IR(){return!TR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wR(){try{return typeof indexedDB=="object"}catch{return!1}}function RR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="FirebaseError";class Li extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=bR,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?xR(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Li(o,d,i)}}function xR(n,e){return n.replace(NR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const NR=/\{\$([^}]+)}/g;function MR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(r0(a)&&r0(u)){if(!mo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function r0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Jl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Yl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function DR(n,e){const t=new PR(n,e);return t.subscribe.bind(t)}class PR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");kR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ip),o.error===void 0&&(o.error=Ip),o.complete===void 0&&(o.complete=Ip);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ip(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n){return n&&n._delegate?n._delegate:n}class Sr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new gR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LR(e))try{this.getOrInitializeService({instanceIdentifier:uo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=uo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uo){return this.instances.has(e)}getOptions(e=uo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:UR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=uo){return this.component?this.component.multipleInstances?e:uo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UR(n){return n===uo?void 0:n}function LR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const qR={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},BR=He.INFO,FR={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},HR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=FR[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sm{constructor(e){this.name=e,this._logLevel=BR,this._logHandler=HR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const zR=(n,e)=>e.some(t=>n instanceof t);let o0,a0;function GR(){return o0||(o0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JR(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hS=new WeakMap,Op=new WeakMap,pS=new WeakMap,wp=new WeakMap,Am=new WeakMap;function YR(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(_r(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&hS.set(t,n)}).catch(()=>{}),Am.set(e,n),e}function KR(n){if(Op.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Op.set(n,e)}let qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Op.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _r(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $R(n){qp=n(qp)}function QR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Rp(this),e,...t);return pS.set(i,e.sort?e.sort():[e]),_r(i)}:JR().includes(n)?function(...e){return n.apply(Rp(this),e),_r(hS.get(this))}:function(...e){return _r(n.apply(Rp(this),e))}}function WR(n){return typeof n=="function"?QR(n):(n instanceof IDBTransaction&&KR(n),zR(n,GR())?new Proxy(n,qp):n)}function _r(n){if(n instanceof IDBRequest)return YR(n);if(wp.has(n))return wp.get(n);const e=WR(n);return e!==n&&(wp.set(n,e),Am.set(e,n)),e}const Rp=n=>Am.get(n);function XR(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=_r(u);return i&&u.addEventListener("upgradeneeded",p=>{i(_r(u.result),p.oldVersion,p.newVersion,_r(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const jR=["get","getKey","getAll","getAllKeys","count"],ZR=["put","add","delete","clear"],bp=new Map;function l0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=ZR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||jR.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&p.done]))[0]};return bp.set(e,a),a}$R(n=>({...n,get:(e,t,i)=>l0(e,t)||n.get(e,t,i),has:(e,t)=>!!l0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(t1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function t1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bp="@firebase/app",u0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Sm("@firebase/app"),n1="@firebase/app-compat",i1="@firebase/analytics-compat",s1="@firebase/analytics",r1="@firebase/app-check-compat",o1="@firebase/app-check",a1="@firebase/auth",l1="@firebase/auth-compat",u1="@firebase/database",c1="@firebase/data-connect",d1="@firebase/database-compat",f1="@firebase/functions",h1="@firebase/functions-compat",p1="@firebase/installations",m1="@firebase/installations-compat",g1="@firebase/messaging",y1="@firebase/messaging-compat",_1="@firebase/performance",v1="@firebase/performance-compat",T1="@firebase/remote-config",E1="@firebase/remote-config-compat",S1="@firebase/storage",A1="@firebase/storage-compat",C1="@firebase/firestore",I1="@firebase/ai",w1="@firebase/firestore-compat",R1="firebase",b1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="[DEFAULT]",x1={[Bp]:"fire-core",[n1]:"fire-core-compat",[s1]:"fire-analytics",[i1]:"fire-analytics-compat",[o1]:"fire-app-check",[r1]:"fire-app-check-compat",[a1]:"fire-auth",[l1]:"fire-auth-compat",[u1]:"fire-rtdb",[c1]:"fire-data-connect",[d1]:"fire-rtdb-compat",[f1]:"fire-fn",[h1]:"fire-fn-compat",[p1]:"fire-iid",[m1]:"fire-iid-compat",[g1]:"fire-fcm",[y1]:"fire-fcm-compat",[_1]:"fire-perf",[v1]:"fire-perf-compat",[T1]:"fire-rc",[E1]:"fire-rc-compat",[S1]:"fire-gcs",[A1]:"fire-gcs-compat",[C1]:"fire-fst",[w1]:"fire-fst-compat",[I1]:"fire-vertex","fire-js":"fire-js",[R1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new Map,N1=new Map,Hp=new Map;function c0(n,e){try{n.container.addComponent(e)}catch(t){gs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function go(n){const e=n.name;if(Hp.has(e))return gs.debug(`There were multiple attempts to register component ${e}.`),!1;Hp.set(e,n);for(const t of Ad.values())c0(t,n);for(const t of N1.values())c0(t,n);return!0}function Kd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new _u("app","Firebase",M1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=b1;function mS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Fp,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw vr.create("bad-app-name",{appName:String(o)});if(t||(t=cS()),!t)throw vr.create("no-options");const a=Ad.get(o);if(a){if(mo(t,a.options)&&mo(i,a.config))return a;throw vr.create("duplicate-app",{appName:o})}const u=new OR(o);for(const p of Hp.values())u.addComponent(p);const d=new D1(t,i,u);return Ad.set(o,d),d}function Cm(n=Fp){const e=Ad.get(n);if(!e&&n===Fp&&cS())return mS();if(!e)throw vr.create("no-app",{appName:n});return e}function xi(n,e,t){var i;let o=(i=x1[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gs.warn(d.join(" "));return}go(new Sr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="firebase-heartbeat-database",k1=1,au="firebase-heartbeat-store";let xp=null;function gS(){return xp||(xp=XR(P1,k1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(au)}catch(t){console.warn(t)}}}}).catch(n=>{throw vr.create("idb-open",{originalErrorMessage:n.message})})),xp}async function V1(n){try{const t=(await gS()).transaction(au),i=await t.objectStore(au).get(yS(n));return await t.done,i}catch(e){if(e instanceof Li)gs.warn(e.message);else{const t=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gs.warn(t.message)}}}async function d0(n,e){try{const i=(await gS()).transaction(au,"readwrite");await i.objectStore(au).put(e,yS(n)),await i.done}catch(t){if(t instanceof Li)gs.warn(t.message);else{const i=vr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gs.warn(i.message)}}}function yS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=1024,L1=30;class O1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new B1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=f0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>L1){const u=F1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){gs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=f0(),{heartbeatsToSend:i,unsentEntries:o}=q1(this._heartbeatsCache.heartbeats),a=Sd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return gs.warn(t),""}}}function f0(){return new Date().toISOString().substring(0,10)}function q1(n,e=U1){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),h0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),h0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class B1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wR()?RR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await V1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function h0(n){return Sd(JSON.stringify({version:2,heartbeats:n})).length}function F1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n){go(new Sr("platform-logger",e=>new e1(e),"PRIVATE")),go(new Sr("heartbeat",e=>new O1(e),"PRIVATE")),xi(Bp,u0,n),xi(Bp,u0,"esm2017"),xi("fire-js","")}H1("");function Im(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function _S(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z1=_S,vS=new _u("auth","Firebase",_S());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Sm("@firebase/auth");function G1(n,...e){Cd.logLevel<=He.WARN&&Cd.warn(`Auth (${So}): ${n}`,...e)}function cd(n,...e){Cd.logLevel<=He.ERROR&&Cd.error(`Auth (${So}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(n,...e){throw Rm(n,...e)}function pi(n,...e){return Rm(n,...e)}function wm(n,e,t){const i=Object.assign(Object.assign({},z1()),{[e]:t});return new _u("auth","Firebase",i).create(e,{appName:n.name})}function ps(n){return wm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J1(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ni(n,"argument-error"),wm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return vS.create(n,...e)}function Ce(n,e,...t){if(!n)throw Rm(e,...t)}function fs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw cd(e),new Error(e)}function ys(n,e){n||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Y1(){return p0()==="http:"||p0()==="https:"}function p0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y1()||SR()||"connection"in navigator)?navigator.onLine:!0}function $1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ys(t>e,"Short delay should be less than long delay!"),this.isMobile=vR()||AR()}get(){return K1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(n,e){ys(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],X1=new Tu(3e4,6e4);function Mr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Dr(n,e,t,i,o={}){return ES(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=vu(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},a);return ER()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Nr(n.emulatorConfig.host)&&(m.credentials="include"),TS.fetch()(await SS(n,n.config.apiHost,t,d),m)})}async function ES(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},Q1),e);try{const o=new Z1(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw nd(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,m]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw nd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw nd(n,"user-disabled",u);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw wm(n,v,m);ni(n,v)}}catch(o){if(o instanceof Li)throw o;ni(n,"network-request-failed",{message:String(o)})}}async function Eu(n,e,t,i,o={}){const a=await Dr(n,e,t,i,o);return"mfaPendingCredential"in a&&ni(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function SS(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?bm(n.config,o):`${n.config.apiScheme}://${o}`;return W1.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function j1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(pi(this.auth,"network-request-failed")),X1.get())})}}function nd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=pi(n,e,i);return o.customData._tokenResponse=t,o}function m0(n){return n!==void 0&&n.enterprise!==void 0}class eb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return j1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tb(n,e){return Dr(n,"GET","/v2/recaptchaConfig",Mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(n,e){return Dr(n,"POST","/v1/accounts:delete",e)}async function Id(n,e){return Dr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ib(n,e=!1){const t=tn(n),i=await t.getIdToken(e),o=xm(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Zl(Np(o.auth_time)),issuedAtTime:Zl(Np(o.iat)),expirationTime:Zl(Np(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Np(n){return Number(n)*1e3}function xm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{const o=aS(t);return o?JSON.parse(o):(cd("Failed to decode base64 JWT payload"),null)}catch(o){return cd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function g0(n){const e=xm(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Li&&sb(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function sb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(n){var e;const t=n.auth,i=await n.getIdToken(),o=await lu(n,Id(t,{idToken:i}));Ce(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?AS(a.providerUserInfo):[],d=ab(n.providerData,u),p=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=p?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Gp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function ob(n){const e=tn(n);await wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ab(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function AS(n){return n.map(e=>{var{providerId:t}=e,i=Im(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(n,e){const t=await ES(n,{},async()=>{const i=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await SS(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Nr(n.emulatorConfig.host)&&(p.credentials="include"),TS.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ub(n,e){return Dr(n,"POST","/v2/accounts:revokeToken",Mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=g0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await lb(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Ta;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ta,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class di{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Im(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ib(this,e)}reload(){return ob(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new di(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await wd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await lu(this,nb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,p,m,v;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,q=(u=t.photoURL)!==null&&u!==void 0?u:void 0,B=(d=t.tenantId)!==null&&d!==void 0?d:void 0,G=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,te=(m=t.createdAt)!==null&&m!==void 0?m:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:W,emailVerified:se,isAnonymous:de,providerData:ue,stsTokenManager:M}=t;Ce(W&&M,e,"internal-error");const x=Ta.fromJSON(this.name,M);Ce(typeof W=="string",e,"internal-error"),fr(E,e.name),fr(S,e.name),Ce(typeof se=="boolean",e,"internal-error"),Ce(typeof de=="boolean",e,"internal-error"),fr(b,e.name),fr(q,e.name),fr(B,e.name),fr(G,e.name),fr(te,e.name),fr(K,e.name);const N=new di({uid:W,auth:e,email:S,emailVerified:se,displayName:E,isAnonymous:de,photoURL:q,phoneNumber:b,tenantId:B,stsTokenManager:x,createdAt:te,lastLoginAt:K});return ue&&Array.isArray(ue)&&(N.providerData=ue.map(D=>Object.assign({},D))),G&&(N._redirectEventId=G),N}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ta;o.updateFromServerResponse(t);const a=new di({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await wd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?AS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Ta;d.updateFromIdToken(i);const p=new di({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Gp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new Map;function hs(n){ys(n instanceof Function,"Expected a class definition");let e=y0.get(n);return e?(ys(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,y0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}CS.type="NONE";const _0=CS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ea{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=dd(this.userKey,o.apiKey,a),this.fullPersistenceKey=dd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Id(this.auth,{idToken:e}).catch(()=>{});return t?di._fromGetAccountInfoResponse(this.auth,t,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ea(hs(_0),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||hs(_0);const u=dd(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let E;if(typeof v=="string"){const S=await Id(e,{idToken:v}).catch(()=>{});if(!S)break;E=await di._fromGetAccountInfoResponse(e,S,v)}else E=di._fromJSON(e,v);m!==a&&(d=E),a=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Ea(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Ea(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NS(e))return"Blackberry";if(MS(e))return"Webos";if(wS(e))return"Safari";if((e.includes("chrome/")||RS(e))&&!e.includes("edge/"))return"Chrome";if(xS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function IS(n=dn()){return/firefox\//i.test(n)}function wS(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RS(n=dn()){return/crios\//i.test(n)}function bS(n=dn()){return/iemobile/i.test(n)}function xS(n=dn()){return/android/i.test(n)}function NS(n=dn()){return/blackberry/i.test(n)}function MS(n=dn()){return/webos/i.test(n)}function Nm(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cb(n=dn()){var e;return Nm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function db(){return CR()&&document.documentMode===10}function DS(n=dn()){return Nm(n)||xS(n)||MS(n)||NS(n)||/windows phone/i.test(n)||bS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n,e=[]){let t;switch(n){case"Browser":t=v0(dn());break;case"Worker":t=`${v0(dn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${So}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(n,e={}){return Dr(n,"GET","/v2/passwordPolicy",Mr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=6;class mb{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:pb,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T0(this),this.idTokenSubscription=new T0(this),this.beforeStateQueue=new fb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hs(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Id(this,{idToken:e}),i=await di._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(ps(this));const t=e?tn(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hb(this),t=new mb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ub(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hs(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&G1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Pr(n){return tn(n)}class T0{constructor(e){this.auth=e,this.observer=null,this.addObserver=DR(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yb(n){$d=n}function kS(n){return $d.loadJS(n)}function _b(){return $d.recaptchaEnterpriseScript}function vb(){return $d.gapiScript}function Tb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Eb{constructor(){this.enterprise=new Sb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Sb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ab="recaptcha-enterprise",VS="NO_RECAPTCHA";class Cb{constructor(e){this.type=Ab,this.auth=Pr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{tb(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new eb(p);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;m0(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(VS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Eb().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&m0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=_b();p.length!==0&&(p+=d),kS(p).then(()=>{o(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function E0(n,e,t,i=!1,o=!1){const a=new Cb(n);let u;if(o)u=VS;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Jp(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await E0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await E0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n,e){const t=Kd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(mo(a,e??{}))return o;ni(o,"already-initialized")}return t.initialize({options:e})}function wb(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(hs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Rb(n,e,t){const i=Pr(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=US(e),{host:u,port:d}=bb(e),p=d===null?"":`:${d}`,m={url:`${a}//${u}${p}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(mo(m,i.config.emulator)&&mo(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Nr(u)?(Tm(`${a}//${u}${p}`),Em("Auth",!0)):xb()}function US(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bb(n){const e=US(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:S0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:S0(u)}}}function S0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,t){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function Nb(n,e){return Dr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(n,e){return Eu(n,"POST","/v1/accounts:signInWithPassword",Mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(n,e){return Eu(n,"POST","/v1/accounts:signInWithEmailLink",Mr(n,e))}async function Pb(n,e){return Eu(n,"POST","/v1/accounts:signInWithEmailLink",Mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Mm{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new uu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new uu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,t,"signInWithPassword",Mb);case"emailLink":return Db(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,i,"signUpPassword",Nb);case"emailLink":return Pb(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(n,e){return Eu(n,"POST","/v1/accounts:signInWithIdp",Mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="http://localhost";class yo extends Mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Im(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new yo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Sa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Sa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sa(e,t)}buildRequest(){const e={requestUri:kb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ub(n){const e=Jl(Yl(n)).link,t=e?Jl(Yl(e)).deep_link_id:null,i=Jl(Yl(n)).deep_link_id;return(i?Jl(Yl(i)).link:null)||i||t||e||n}class Dm{constructor(e){var t,i,o,a,u,d;const p=Jl(Yl(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(i=p.oobCode)!==null&&i!==void 0?i:null,E=Vb((o=p.mode)!==null&&o!==void 0?o:null);Ce(m&&v&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=v,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=p.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=Ub(e);try{return new Dm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.providerId=Da.PROVIDER_ID}static credential(e,t){return uu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Dm.parseLink(t);return Ce(i,"argument-error"),uu._fromEmailAndCode(e,i.code,i.tenantId)}}Da.PROVIDER_ID="password";Da.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Da.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Pm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Su{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return yo._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ds.credential(t,i)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Su{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Su{constructor(){super("twitter.com")}static credential(e,t){return yo._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return mr.credential(t,i)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(n,e){return Eu(n,"POST","/v1/accounts:signUp",Mr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await di._fromIdTokenResponse(e,i,o),u=A0(i);return new _o({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=A0(i);return new _o({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function A0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends Li{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Rd(e,t,i,o)}}function LS(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(n,a,e,i):a})}async function Ob(n,e,t=!1){const i=await lu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _o._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(n,e,t=!1){const{auth:i}=n;if(xn(i.app))return Promise.reject(ps(i));const o="reauthenticate";try{const a=await lu(n,LS(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=xm(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),_o._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ni(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(n,e,t=!1){if(xn(n.app))return Promise.reject(ps(n));const i="signIn",o=await LS(n,i,e),a=await _o._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function Bb(n,e){return OS(Pr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(n){const e=Pr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Fb(n,e,t){if(xn(n.app))return Promise.reject(ps(n));const i=Pr(n),u=await Jp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lb).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&qS(n),p}),d=await _o._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function Hb(n,e,t){return xn(n.app)?Promise.reject(ps(n)):Bb(tn(n),Da.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&qS(n),i})}function zb(n,e,t,i){return tn(n).onIdTokenChanged(e,t,i)}function Gb(n,e,t){return tn(n).beforeAuthStateChanged(e,t)}function Jb(n,e,t,i){return tn(n).onAuthStateChanged(e,t,i)}function Yb(n){return tn(n).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=1e3,$b=10;class FS extends BS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);db()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,$b):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Kb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FS.type="LOCAL";const Qb=FS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS extends BS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}HS.type="SESSION";const zS=HS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Qd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),p=await Wb(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const m=km("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(v),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(){return window}function jb(n){Ni().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function Zb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ex(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tx(){return GS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firebaseLocalStorageDb",nx=1,xd="firebaseLocalStorage",YS="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wd(n,e){return n.transaction([xd],e?"readwrite":"readonly").objectStore(xd)}function ix(){const n=indexedDB.deleteDatabase(JS);return new Au(n).toPromise()}function Yp(){const n=indexedDB.open(JS,nx);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(xd,{keyPath:YS})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(xd)?e(i):(i.close(),await ix(),e(await Yp()))})})}async function C0(n,e,t){const i=Wd(n,!0).put({[YS]:e,value:t});return new Au(i).toPromise()}async function sx(n,e){const t=Wd(n,!1).get(e),i=await new Au(t).toPromise();return i===void 0?null:i.value}function I0(n,e){const t=Wd(n,!0).delete(e);return new Au(t).toPromise()}const rx=800,ox=3;class KS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>ox)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qd._getInstance(tx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Zb(),!this.activeServiceWorker)return;this.sender=new Xb(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ex()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await C0(e,bd,"1"),await I0(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>C0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>sx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>I0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Wd(o,!1).getAll();return new Au(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KS.type="LOCAL";const ax=KS;new Tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n,e){return e?hs(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm extends Mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lx(n){return OS(n.auth,new Vm(n),n.bypassAuthState)}function ux(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),qb(t,new Vm(n),n.bypassAuthState)}async function cx(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Ob(t,new Vm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lx;case"linkViaPopup":case"linkViaRedirect":return cx;case"reauthViaPopup":case"reauthViaRedirect":return ux;default:ni(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=new Tu(2e3,1e4);async function fx(n,e,t){if(xn(n.app))return Promise.reject(pi(n,"operation-not-supported-in-this-environment"));const i=Pr(n);J1(n,e,Pm);const o=$S(i,t);return new co(i,"signInViaPopup",e,o).executeNotNull()}class co extends QS{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dx.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="pendingRedirect",fd=new Map;class px extends QS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=fd.get(this.auth._key());if(!e){try{const i=await mx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}fd.set(this.auth._key(),e)}return this.bypassAuthState||fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mx(n,e){const t=_x(e),i=yx(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function gx(n,e){fd.set(n._key(),e)}function yx(n){return hs(n._redirectPersistence)}function _x(n){return dd(hx,n.config.apiKey,n.name)}async function vx(n,e,t=!1){if(xn(n.app))return Promise.reject(ps(n));const i=Pr(n),o=$S(i,e),u=await new px(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=600*1e3;class Ex{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!WS(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(pi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Tx&&this.cachedEventUids.clear(),this.cachedEventUids.has(w0(e))}saveEventToCache(e){this.cachedEventUids.add(w0(e)),this.lastProcessedEventTime=Date.now()}}function w0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function WS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Sx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(n,e={}){return Dr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ix=/^https?/;async function wx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ax(n);for(const t of e)try{if(Rx(t))return}catch{}ni(n,"unauthorized-domain")}function Rx(n){const e=zp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!Ix.test(t))return!1;if(Cx.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Tu(3e4,6e4);function R0(){const n=Ni().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xx(n){return new Promise((e,t)=>{var i,o,a;function u(){R0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R0(),t(pi(n,"network-request-failed"))},timeout:bx.get()})}if(!((o=(i=Ni().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=Ni().gapi)===null||a===void 0)&&a.load)u();else{const d=Tb("iframefcb");return Ni()[d]=()=>{gapi.load?u():t(pi(n,"network-request-failed"))},kS(`${vb()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw hd=null,e})}let hd=null;function Nx(n){return hd=hd||xx(n),hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Tu(5e3,15e3),Dx="__/auth/iframe",Px="emulator/auth/iframe",kx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ux(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bm(e,Px):`https://${n.config.authDomain}/${Dx}`,i={apiKey:e.apiKey,appName:n.name,v:So},o=Vx.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${vu(i).slice(1)}`}async function Lx(n){const e=await Nx(n),t=Ni().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:Ux(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kx,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=pi(n,"network-request-failed"),d=Ni().setTimeout(()=>{a(u)},Mx.get());function p(){Ni().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qx=500,Bx=600,Fx="_blank",Hx="http://localhost";class b0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zx(n,e,t,i=qx,o=Bx){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},Ox),{width:i.toString(),height:o.toString(),top:a,left:u}),m=dn().toLowerCase();t&&(d=RS(m)?Fx:t),IS(m)&&(e=e||Hx,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[b,q])=>`${S}${b}=${q},`,"");if(cb(m)&&d!=="_self")return Gx(e||"",d),new b0(null);const E=window.open(e||"",d,v);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new b0(E)}function Gx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="__/auth/handler",Yx="emulator/auth/handler",Kx=encodeURIComponent("fac");async function x0(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:So,eventId:o};if(e instanceof Pm){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",MR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))u[v]=E}if(e instanceof Su){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),m=p?`#${Kx}=${encodeURIComponent(p)}`:"";return`${$x(n)}?${vu(d).slice(1)}${m}`}function $x({config:n}){return n.emulator?bm(n,Yx):`https://${n.authDomain}/${Jx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="webStorageSupport";class Qx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zS,this._completeRedirectFn=vx,this._overrideRedirectResult=gx}async _openPopup(e,t,i,o){var a;ys((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await x0(e,t,i,zp(),o);return zx(e,u,km())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await x0(e,t,i,zp(),o);return jb(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ys(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Lx(e),i=new Ex(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mp,{type:Mp},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Mp];u!==void 0&&t(!!u),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DS()||wS()||Nm()}}const Wx=Qx;var N0="@firebase/auth",M0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zx(n){go(new Sr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PS(n)},m=new gb(i,o,a,p);return wb(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),go(new Sr("auth-internal",e=>{const t=Pr(e.getProvider("auth").getImmediate());return(i=>new Xx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(N0,M0,jx(n)),xi(N0,M0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=300,tN=dS("authIdTokenMaxAge")||eN;let D0=null;const nN=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>tN)return;const o=t==null?void 0:t.token;D0!==o&&(D0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function iN(n=Cm()){const e=Kd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Ib(n,{popupRedirectResolver:Wx,persistence:[ax,Qb,zS]}),i=dS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=nN(a.toString());Gb(t,u,()=>u(t.currentUser)),zb(t,d=>u(d))}}const o=lS("auth");return o&&Rb(t,`http://${o}`),t}function sN(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}yb({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=pi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",sN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zx("Browser");var rN="firebase",oN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(rN,oN,"app");var P0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,XS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,x){function N(){}N.prototype=x.prototype,M.D=x.prototype,M.prototype=new N,M.prototype.constructor=M,M.C=function(D,V,L){for(var P=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)P[ot-2]=arguments[ot];return x.prototype[V].apply(D,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,x,N){N||(N=0);var D=Array(16);if(typeof x=="string")for(var V=0;16>V;++V)D[V]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(V=0;16>V;++V)D[V]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=M.g[0],N=M.g[1],V=M.g[2];var L=M.g[3],P=x+(L^N&(V^L))+D[0]+3614090360&4294967295;x=N+(P<<7&4294967295|P>>>25),P=L+(V^x&(N^V))+D[1]+3905402710&4294967295,L=x+(P<<12&4294967295|P>>>20),P=V+(N^L&(x^N))+D[2]+606105819&4294967295,V=L+(P<<17&4294967295|P>>>15),P=N+(x^V&(L^x))+D[3]+3250441966&4294967295,N=V+(P<<22&4294967295|P>>>10),P=x+(L^N&(V^L))+D[4]+4118548399&4294967295,x=N+(P<<7&4294967295|P>>>25),P=L+(V^x&(N^V))+D[5]+1200080426&4294967295,L=x+(P<<12&4294967295|P>>>20),P=V+(N^L&(x^N))+D[6]+2821735955&4294967295,V=L+(P<<17&4294967295|P>>>15),P=N+(x^V&(L^x))+D[7]+4249261313&4294967295,N=V+(P<<22&4294967295|P>>>10),P=x+(L^N&(V^L))+D[8]+1770035416&4294967295,x=N+(P<<7&4294967295|P>>>25),P=L+(V^x&(N^V))+D[9]+2336552879&4294967295,L=x+(P<<12&4294967295|P>>>20),P=V+(N^L&(x^N))+D[10]+4294925233&4294967295,V=L+(P<<17&4294967295|P>>>15),P=N+(x^V&(L^x))+D[11]+2304563134&4294967295,N=V+(P<<22&4294967295|P>>>10),P=x+(L^N&(V^L))+D[12]+1804603682&4294967295,x=N+(P<<7&4294967295|P>>>25),P=L+(V^x&(N^V))+D[13]+4254626195&4294967295,L=x+(P<<12&4294967295|P>>>20),P=V+(N^L&(x^N))+D[14]+2792965006&4294967295,V=L+(P<<17&4294967295|P>>>15),P=N+(x^V&(L^x))+D[15]+1236535329&4294967295,N=V+(P<<22&4294967295|P>>>10),P=x+(V^L&(N^V))+D[1]+4129170786&4294967295,x=N+(P<<5&4294967295|P>>>27),P=L+(N^V&(x^N))+D[6]+3225465664&4294967295,L=x+(P<<9&4294967295|P>>>23),P=V+(x^N&(L^x))+D[11]+643717713&4294967295,V=L+(P<<14&4294967295|P>>>18),P=N+(L^x&(V^L))+D[0]+3921069994&4294967295,N=V+(P<<20&4294967295|P>>>12),P=x+(V^L&(N^V))+D[5]+3593408605&4294967295,x=N+(P<<5&4294967295|P>>>27),P=L+(N^V&(x^N))+D[10]+38016083&4294967295,L=x+(P<<9&4294967295|P>>>23),P=V+(x^N&(L^x))+D[15]+3634488961&4294967295,V=L+(P<<14&4294967295|P>>>18),P=N+(L^x&(V^L))+D[4]+3889429448&4294967295,N=V+(P<<20&4294967295|P>>>12),P=x+(V^L&(N^V))+D[9]+568446438&4294967295,x=N+(P<<5&4294967295|P>>>27),P=L+(N^V&(x^N))+D[14]+3275163606&4294967295,L=x+(P<<9&4294967295|P>>>23),P=V+(x^N&(L^x))+D[3]+4107603335&4294967295,V=L+(P<<14&4294967295|P>>>18),P=N+(L^x&(V^L))+D[8]+1163531501&4294967295,N=V+(P<<20&4294967295|P>>>12),P=x+(V^L&(N^V))+D[13]+2850285829&4294967295,x=N+(P<<5&4294967295|P>>>27),P=L+(N^V&(x^N))+D[2]+4243563512&4294967295,L=x+(P<<9&4294967295|P>>>23),P=V+(x^N&(L^x))+D[7]+1735328473&4294967295,V=L+(P<<14&4294967295|P>>>18),P=N+(L^x&(V^L))+D[12]+2368359562&4294967295,N=V+(P<<20&4294967295|P>>>12),P=x+(N^V^L)+D[5]+4294588738&4294967295,x=N+(P<<4&4294967295|P>>>28),P=L+(x^N^V)+D[8]+2272392833&4294967295,L=x+(P<<11&4294967295|P>>>21),P=V+(L^x^N)+D[11]+1839030562&4294967295,V=L+(P<<16&4294967295|P>>>16),P=N+(V^L^x)+D[14]+4259657740&4294967295,N=V+(P<<23&4294967295|P>>>9),P=x+(N^V^L)+D[1]+2763975236&4294967295,x=N+(P<<4&4294967295|P>>>28),P=L+(x^N^V)+D[4]+1272893353&4294967295,L=x+(P<<11&4294967295|P>>>21),P=V+(L^x^N)+D[7]+4139469664&4294967295,V=L+(P<<16&4294967295|P>>>16),P=N+(V^L^x)+D[10]+3200236656&4294967295,N=V+(P<<23&4294967295|P>>>9),P=x+(N^V^L)+D[13]+681279174&4294967295,x=N+(P<<4&4294967295|P>>>28),P=L+(x^N^V)+D[0]+3936430074&4294967295,L=x+(P<<11&4294967295|P>>>21),P=V+(L^x^N)+D[3]+3572445317&4294967295,V=L+(P<<16&4294967295|P>>>16),P=N+(V^L^x)+D[6]+76029189&4294967295,N=V+(P<<23&4294967295|P>>>9),P=x+(N^V^L)+D[9]+3654602809&4294967295,x=N+(P<<4&4294967295|P>>>28),P=L+(x^N^V)+D[12]+3873151461&4294967295,L=x+(P<<11&4294967295|P>>>21),P=V+(L^x^N)+D[15]+530742520&4294967295,V=L+(P<<16&4294967295|P>>>16),P=N+(V^L^x)+D[2]+3299628645&4294967295,N=V+(P<<23&4294967295|P>>>9),P=x+(V^(N|~L))+D[0]+4096336452&4294967295,x=N+(P<<6&4294967295|P>>>26),P=L+(N^(x|~V))+D[7]+1126891415&4294967295,L=x+(P<<10&4294967295|P>>>22),P=V+(x^(L|~N))+D[14]+2878612391&4294967295,V=L+(P<<15&4294967295|P>>>17),P=N+(L^(V|~x))+D[5]+4237533241&4294967295,N=V+(P<<21&4294967295|P>>>11),P=x+(V^(N|~L))+D[12]+1700485571&4294967295,x=N+(P<<6&4294967295|P>>>26),P=L+(N^(x|~V))+D[3]+2399980690&4294967295,L=x+(P<<10&4294967295|P>>>22),P=V+(x^(L|~N))+D[10]+4293915773&4294967295,V=L+(P<<15&4294967295|P>>>17),P=N+(L^(V|~x))+D[1]+2240044497&4294967295,N=V+(P<<21&4294967295|P>>>11),P=x+(V^(N|~L))+D[8]+1873313359&4294967295,x=N+(P<<6&4294967295|P>>>26),P=L+(N^(x|~V))+D[15]+4264355552&4294967295,L=x+(P<<10&4294967295|P>>>22),P=V+(x^(L|~N))+D[6]+2734768916&4294967295,V=L+(P<<15&4294967295|P>>>17),P=N+(L^(V|~x))+D[13]+1309151649&4294967295,N=V+(P<<21&4294967295|P>>>11),P=x+(V^(N|~L))+D[4]+4149444226&4294967295,x=N+(P<<6&4294967295|P>>>26),P=L+(N^(x|~V))+D[11]+3174756917&4294967295,L=x+(P<<10&4294967295|P>>>22),P=V+(x^(L|~N))+D[2]+718787259&4294967295,V=L+(P<<15&4294967295|P>>>17),P=N+(L^(V|~x))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+x&4294967295,M.g[1]=M.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+L&4294967295}i.prototype.u=function(M,x){x===void 0&&(x=M.length);for(var N=x-this.blockSize,D=this.B,V=this.h,L=0;L<x;){if(V==0)for(;L<=N;)o(this,M,L),L+=this.blockSize;if(typeof M=="string"){for(;L<x;)if(D[V++]=M.charCodeAt(L++),V==this.blockSize){o(this,D),V=0;break}}else for(;L<x;)if(D[V++]=M[L++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=x},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var x=1;x<M.length-8;++x)M[x]=0;var N=8*this.o;for(x=M.length-8;x<M.length;++x)M[x]=N&255,N/=256;for(this.u(M),M=Array(16),x=N=0;4>x;++x)for(var D=0;32>D;D+=8)M[N++]=this.g[x]>>>D&255;return M};function a(M,x){var N=d;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=x(M)}function u(M,x){this.h=x;for(var N=[],D=!0,V=M.length-1;0<=V;V--){var L=M[V]|0;D&&L==x||(N[V]=L,D=!1)}this.g=N}var d={};function p(M){return-128<=M&&128>M?a(M,function(x){return new u([x|0],0>x?-1:0)}):new u([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return G(m(-M));for(var x=[],N=1,D=0;M>=N;D++)x[D]=M/N|0,N*=4294967296;return new u(x,0)}function v(M,x){if(M.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(M.charAt(0)=="-")return G(v(M.substring(1),x));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(x,8)),D=E,V=0;V<M.length;V+=8){var L=Math.min(8,M.length-V),P=parseInt(M.substring(V,V+L),x);8>L?(L=m(Math.pow(x,L)),D=D.j(L).add(m(P))):(D=D.j(N),D=D.add(m(P)))}return D}var E=p(0),S=p(1),b=p(16777216);n=u.prototype,n.m=function(){if(B(this))return-G(this).m();for(var M=0,x=1,N=0;N<this.g.length;N++){var D=this.i(N);M+=(0<=D?D:4294967296+D)*x,x*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(q(this))return"0";if(B(this))return"-"+G(this).toString(M);for(var x=m(Math.pow(M,6)),N=this,D="";;){var V=se(N,x).g;N=te(N,V.j(x));var L=((0<N.g.length?N.g[0]:N.h)>>>0).toString(M);if(N=V,q(N))return L+D;for(;6>L.length;)L="0"+L;D=L+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function q(M){if(M.h!=0)return!1;for(var x=0;x<M.g.length;x++)if(M.g[x]!=0)return!1;return!0}function B(M){return M.h==-1}n.l=function(M){return M=te(this,M),B(M)?-1:q(M)?0:1};function G(M){for(var x=M.g.length,N=[],D=0;D<x;D++)N[D]=~M.g[D];return new u(N,~M.h).add(S)}n.abs=function(){return B(this)?G(this):this},n.add=function(M){for(var x=Math.max(this.g.length,M.g.length),N=[],D=0,V=0;V<=x;V++){var L=D+(this.i(V)&65535)+(M.i(V)&65535),P=(L>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);D=P>>>16,L&=65535,P&=65535,N[V]=P<<16|L}return new u(N,N[N.length-1]&-2147483648?-1:0)};function te(M,x){return M.add(G(x))}n.j=function(M){if(q(this)||q(M))return E;if(B(this))return B(M)?G(this).j(G(M)):G(G(this).j(M));if(B(M))return G(this.j(G(M)));if(0>this.l(b)&&0>M.l(b))return m(this.m()*M.m());for(var x=this.g.length+M.g.length,N=[],D=0;D<2*x;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<M.g.length;V++){var L=this.i(D)>>>16,P=this.i(D)&65535,ot=M.i(V)>>>16,ht=M.i(V)&65535;N[2*D+2*V]+=P*ht,K(N,2*D+2*V),N[2*D+2*V+1]+=L*ht,K(N,2*D+2*V+1),N[2*D+2*V+1]+=P*ot,K(N,2*D+2*V+1),N[2*D+2*V+2]+=L*ot,K(N,2*D+2*V+2)}for(D=0;D<x;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=x;D<2*x;D++)N[D]=0;return new u(N,0)};function K(M,x){for(;(M[x]&65535)!=M[x];)M[x+1]+=M[x]>>>16,M[x]&=65535,x++}function W(M,x){this.g=M,this.h=x}function se(M,x){if(q(x))throw Error("division by zero");if(q(M))return new W(E,E);if(B(M))return x=se(G(M),x),new W(G(x.g),G(x.h));if(B(x))return x=se(M,G(x)),new W(G(x.g),x.h);if(30<M.g.length){if(B(M)||B(x))throw Error("slowDivide_ only works with positive integers.");for(var N=S,D=x;0>=D.l(M);)N=de(N),D=de(D);var V=ue(N,1),L=ue(D,1);for(D=ue(D,2),N=ue(N,2);!q(D);){var P=L.add(D);0>=P.l(M)&&(V=V.add(N),L=P),D=ue(D,1),N=ue(N,1)}return x=te(M,V.j(x)),new W(V,x)}for(V=E;0<=M.l(x);){for(N=Math.max(1,Math.floor(M.m()/x.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),L=m(N),P=L.j(x);B(P)||0<P.l(M);)N-=D,L=m(N),P=L.j(x);q(L)&&(L=S),V=V.add(L),M=te(M,P)}return new W(V,M)}n.A=function(M){return se(this,M).h},n.and=function(M){for(var x=Math.max(this.g.length,M.g.length),N=[],D=0;D<x;D++)N[D]=this.i(D)&M.i(D);return new u(N,this.h&M.h)},n.or=function(M){for(var x=Math.max(this.g.length,M.g.length),N=[],D=0;D<x;D++)N[D]=this.i(D)|M.i(D);return new u(N,this.h|M.h)},n.xor=function(M){for(var x=Math.max(this.g.length,M.g.length),N=[],D=0;D<x;D++)N[D]=this.i(D)^M.i(D);return new u(N,this.h^M.h)};function de(M){for(var x=M.g.length+1,N=[],D=0;D<x;D++)N[D]=M.i(D)<<1|M.i(D-1)>>>31;return new u(N,M.h)}function ue(M,x){var N=x>>5;x%=32;for(var D=M.g.length-N,V=[],L=0;L<D;L++)V[L]=0<x?M.i(L+N)>>>x|M.i(L+N+1)<<32-x:M.i(L+N);return new u(V,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,XS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Tr=u}).apply(typeof P0<"u"?P0:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jS,Kl,ZS,pd,Kp,eA,tA,nA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,C){return h==Array.prototype||h==Object.prototype||(h[T]=C.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var T=0;T<h.length;++T){var C=h[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(h,T){if(T)e:{var C=i;h=h.split(".");for(var R=0;R<h.length-1;R++){var z=h[R];if(!(z in C))break e;C=C[z]}h=h[h.length-1],R=C[h],T=T(R),T!=R&&T!=null&&e(C,h,{configurable:!0,writable:!0,value:T})}}function a(h,T){h instanceof String&&(h+="");var C=0,R=!1,z={next:function(){if(!R&&C<h.length){var X=C++;return{value:T(X,h[X]),done:!1}}return R=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(h){return h||function(){return a(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function m(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function v(h,T,C){return h.call.apply(h.bind,arguments)}function E(h,T,C){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,R),h.apply(T,z)}}return function(){return h.apply(T,arguments)}}function S(h,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function b(h,T){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function q(h,T){function C(){}C.prototype=T.prototype,h.aa=T.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(R,z,X){for(var le=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)le[Ze-2]=arguments[Ze];return T.prototype[z].apply(R,le)}}function B(h){const T=h.length;if(0<T){const C=Array(T);for(let R=0;R<T;R++)C[R]=h[R];return C}return[]}function G(h,T){for(let C=1;C<arguments.length;C++){const R=arguments[C];if(p(R)){const z=h.length||0,X=R.length||0;h.length=z+X;for(let le=0;le<X;le++)h[z+le]=R[le]}else h.push(R)}}class te{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function K(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function se(h){return se[" "](h),h}se[" "]=function(){};var de=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ue(h,T,C){for(const R in h)T.call(C,h[R],R,h)}function M(h,T){for(const C in h)T.call(void 0,h[C],C,h)}function x(h){const T={};for(const C in h)T[C]=h[C];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,T){let C,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(C in R)h[C]=R[C];for(let X=0;X<N.length;X++)C=N[X],Object.prototype.hasOwnProperty.call(R,C)&&(h[C]=R[C])}}function V(h){var T=1;h=h.split(":");const C=[];for(;0<T&&h.length;)C.push(h.shift()),T--;return h.length&&C.push(h.join(":")),C}function L(h){d.setTimeout(()=>{throw h},0)}function P(){var h=Ge;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class ot{constructor(){this.h=this.g=null}add(T,C){const R=ht.get();R.set(T,C),this.h?this.h.next=R:this.g=R,this.h=R}}var ht=new te(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ye=!1,Ge=new ot,Ke=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(O)}};var O=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(C){L(C)}var T=ht;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}ye=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return h})();function Ae(h,T){if(oe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(de){e:{try{se(T.nodeName);var z=!0;break e}catch{}z=!1}z||(T=null)}}else C=="mouseover"?T=h.fromElement:C=="mouseout"&&(T=h.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Me[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ae.aa.h.call(this)}}q(Ae,oe);var Me={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),ce=0;function we(h,T,C,R,z){this.listener=h,this.proxy=null,this.src=T,this.type=C,this.capture=!!R,this.ha=z,this.key=++ce,this.da=this.fa=!1}function qe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function fn(h){this.src=h,this.g={},this.h=0}fn.prototype.add=function(h,T,C,R,z){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var le=As(h,T,R,z);return-1<le?(T=h[le],C||(T.fa=!1)):(T=new we(T,this.src,X,!!R,z),T.fa=C,h.push(T)),T};function Bn(h,T){var C=T.type;if(C in h.g){var R=h.g[C],z=Array.prototype.indexOf.call(R,T,void 0),X;(X=0<=z)&&Array.prototype.splice.call(R,z,1),X&&(qe(T),h.g[C].length==0&&(delete h.g[C],h.h--))}}function As(h,T,C,R){for(var z=0;z<h.length;++z){var X=h[z];if(!X.da&&X.listener==T&&X.capture==!!C&&X.ha==R)return z}return-1}var hn="closure_lm_"+(1e6*Math.random()|0),Rt={};function ii(h,T,C,R,z){if(Array.isArray(T)){for(var X=0;X<T.length;X++)ii(h,T[X],C,R,z);return null}return C=xu(C),h&&h[Pe]?h.K(T,C,m(R)?!!R.capture:!1,z):Oi(h,T,C,!1,R,z)}function Oi(h,T,C,R,z,X){if(!T)throw Error("Invalid event type");var le=m(z)?!!z.capture:!!z,Ze=Ba(h);if(Ze||(h[hn]=Ze=new fn(h)),C=Ze.add(T,C,R,le,X),C.proxy)return C;if(R=si(),C.proxy=R,R.src=h,R.listener=C,h.addEventListener)pe||(z=le),z===void 0&&(z=!1),h.addEventListener(T.toString(),R,z);else if(h.attachEvent)h.attachEvent(xo(T.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function si(){function h(C){return T.call(h.src,h.listener,C)}const T=yf;return h}function bo(h,T,C,R,z){if(Array.isArray(T))for(var X=0;X<T.length;X++)bo(h,T[X],C,R,z);else R=m(R)?!!R.capture:!!R,C=xu(C),h&&h[Pe]?(h=h.i,T=String(T).toString(),T in h.g&&(X=h.g[T],C=As(X,C,R,z),-1<C&&(qe(X[C]),Array.prototype.splice.call(X,C,1),X.length==0&&(delete h.g[T],h.h--)))):h&&(h=Ba(h))&&(T=h.g[T.toString()],h=-1,T&&(h=As(T,C,R,z)),(C=-1<h?T[h]:null)&&Vr(C))}function Vr(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[Pe])Bn(T.i,h);else{var C=h.type,R=h.proxy;T.removeEventListener?T.removeEventListener(C,R,h.capture):T.detachEvent?T.detachEvent(xo(C),R):T.addListener&&T.removeListener&&T.removeListener(R),(C=Ba(T))?(Bn(C,h),C.h==0&&(C.src=null,T[hn]=null)):qe(h)}}}function xo(h){return h in Rt?Rt[h]:Rt[h]="on"+h}function yf(h,T){if(h.da)h=!0;else{T=new Ae(T,this);var C=h.listener,R=h.ha||h.src;h.fa&&Vr(h),h=C.call(R,T)}return h}function Ba(h){return h=h[hn],h instanceof fn?h:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xu(h){return typeof h=="function"?h:(h[Yt]||(h[Yt]=function(T){return h.handleEvent(T)}),h[Yt])}function Vt(){Z.call(this),this.i=new fn(this),this.M=this,this.F=null}q(Vt,Z),Vt.prototype[Pe]=!0,Vt.prototype.removeEventListener=function(h,T,C,R){bo(this,h,T,C,R)};function qt(h,T){var C,R=h.F;if(R)for(C=[];R;R=R.F)C.push(R);if(h=h.M,R=T.type||T,typeof T=="string")T=new oe(T,h);else if(T instanceof oe)T.target=T.target||h;else{var z=T;T=new oe(R,h),D(T,z)}if(z=!0,C)for(var X=C.length-1;0<=X;X--){var le=T.g=C[X];z=qi(le,R,!0,T)&&z}if(le=T.g=h,z=qi(le,R,!0,T)&&z,z=qi(le,R,!1,T)&&z,C)for(X=0;X<C.length;X++)le=T.g=C[X],z=qi(le,R,!1,T)&&z}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var C=h.g[T],R=0;R<C.length;R++)qe(C[R]);delete h.g[T],h.h--}}this.F=null},Vt.prototype.K=function(h,T,C,R){return this.i.add(String(h),T,!1,C,R)},Vt.prototype.L=function(h,T,C,R){return this.i.add(String(h),T,!0,C,R)};function qi(h,T,C,R){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var z=!0,X=0;X<T.length;++X){var le=T[X];if(le&&!le.da&&le.capture==C){var Ze=le.listener,bt=le.ha||le.src;le.fa&&Bn(h.i,le),z=Ze.call(bt,R)!==!1&&z}}return z&&!R.defaultPrevented}function Nu(h,T,C){if(typeof h=="function")C&&(h=S(h,C));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(h,T||0)}function Fa(h){h.g=Nu(()=>{h.g=null,h.i&&(h.i=!1,Fa(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class _f extends Z{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Fa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(h){Z.call(this),this.h=h,this.g={}}q(Ur,Z);var Cs=[];function sn(h){ue(h.g,function(T,C){this.g.hasOwnProperty(C)&&Vr(T)},h),h.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),sn(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=d.JSON.stringify,pn=d.JSON.parse,vf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ha(){}Ha.prototype.h=null;function Mu(h){return h.h||(h.h=h.i())}function Lr(){}var gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Is(){oe.call(this,"d")}q(Is,oe);function ri(){oe.call(this,"c")}q(ri,oe);var Hn={},ws=null;function No(){return ws=ws||new Vt}Hn.La="serverreachability";function za(h){oe.call(this,Hn.La,h)}q(za,oe);function Bi(h){const T=No();qt(T,new za(T))}Hn.STAT_EVENT="statevent";function Rs(h,T){oe.call(this,Hn.STAT_EVENT,h),this.stat=T}q(Rs,oe);function Kt(h){const T=No();qt(T,new Rs(T,h))}Hn.Ma="timingevent";function Ga(h,T){oe.call(this,Hn.Ma,h),this.size=T}q(Ga,oe);function bs(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},T)}function xs(){this.g=!0}xs.prototype.xa=function(){this.g=!1};function Ja(h,T,C,R,z,X){h.info(function(){if(h.g)if(X)for(var le="",Ze=X.split("&"),bt=0;bt<Ze.length;bt++){var Ve=Ze[bt].split("=");if(1<Ve.length){var Ft=Ve[0];Ve=Ve[1];var Ht=Ft.split("_");le=2<=Ht.length&&Ht[1]=="type"?le+(Ft+"="+Ve+"&"):le+(Ft+"=redacted&")}}else le=null;else le=X;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+T+`
`+C+`
`+le})}function Ya(h,T,C,R,z,X,le){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+T+`
`+C+`
`+X+" "+le})}function Fi(h,T,C,R){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+yi(h,C)+(R?" "+R:"")})}function Du(h,T){h.info(function(){return"TIMEOUT: "+T})}xs.prototype.info=function(){};function yi(h,T){if(!h.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var R=C[h];if(!(2>R.length)){var z=R[1];if(Array.isArray(z)&&!(1>z.length)){var X=z[0];if(X!="noop"&&X!="stop"&&X!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return Fn(C)}catch{return T}}var yt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_i;function Ns(){}q(Ns,Ha),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},_i=new Ns;function vi(h,T,C,R){this.j=h,this.i=T,this.l=C,this.R=R||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pu}function Pu(){this.i=null,this.g="",this.h=!1}var Ka={},Hi={};function Or(h,T,C){h.L=1,h.v=Fr(_t(T)),h.m=C,h.P=!0,zi(h,null)}function zi(h,T){h.F=Date.now(),oi(h),h.A=_t(h.v);var C=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),Yi(C.i,"t",R),h.C=0,C=h.j.J,h.h=new Pu,h.g=Qu(h.j,C?T:null,!h.m),0<h.O&&(h.M=new _f(S(h.Y,h,h.g),h.O)),T=h.U,C=h.g,R=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(Cs[0]=z.toString()),z=Cs);for(var X=0;X<z.length;X++){var le=ii(C,z[X],R||T.handleEvent,!1,T.h||T);if(!le)break;T.g[le.key]=le}T=h.H?x(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Bi(),Ja(h.i,h.u,h.A,h.l,h.R,h.m)}vi.prototype.ca=function(h){h=h.target;const T=this.M;T&&yn(h)==3?T.j():this.Y(h)},vi.prototype.Y=function(h){try{if(h==this.g)e:{const Ht=yn(this.g);var T=this.g.Ba();const zs=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Gr(this.g)))){this.J||Ht!=4||T==7||(T==8||0>=zs?Bi(3):Bi(2)),Mo(this);var C=this.g.Z();this.X=C;t:if(Gi(this)){var R=Gr(this.g);h="";var z=R.length,X=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Ms(this);var le="";break t}this.h.i=new d.TextDecoder}for(T=0;T<z;T++)this.h.h=!0,h+=this.h.i.decode(R[T],{stream:!(X&&T==z-1)});R.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=C==200,Ya(this.i,this.u,this.A,this.l,this.R,Ht,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,bt=this.g;if((Ze=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Ze)){var Ve=Ze;break t}}Ve=null}if(C=Ve)Fi(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ti(this,C);else{this.o=!1,this.s=3,Kt(12),mn(this),Ms(this);break e}}if(this.P){C=!0;let Sn;for(;!this.J&&this.C<le.length;)if(Sn=qr(this,le),Sn==Hi){Ht==4&&(this.s=4,Kt(14),C=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==Ka){this.s=4,Kt(15),Fi(this.i,this.l,le,"[Invalid Chunk]"),C=!1;break}else Fi(this.i,this.l,Sn,null),Ti(this,Sn);if(Gi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||le.length!=0||this.h.h||(this.s=1,Kt(16),C=!1),this.o=this.o&&C,!C)Fi(this.i,this.l,le,"[Invalid Chunked Response]"),mn(this),Ms(this);else if(0<le.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),sl(Ft),Ft.M=!0,Kt(11))}}else Fi(this.i,this.l,le,null),Ti(this,le);Ht==4&&mn(this),this.o&&!this.J&&(Ht==4?Yu(this.j,this):(this.o=!1,oi(this)))}else Bu(this.g),C==400&&0<le.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),mn(this),Ms(this)}}}catch{}finally{}};function Gi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function qr(h,T){var C=h.C,R=T.indexOf(`
`,C);return R==-1?Hi:(C=Number(T.substring(C,R)),isNaN(C)?Ka:(R+=1,R+C>T.length?Hi:(T=T.slice(R,R+C),h.C=R+C,T)))}vi.prototype.cancel=function(){this.J=!0,mn(this)};function oi(h){h.S=Date.now()+h.I,At(h,h.I)}function At(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=bs(S(h.ba,h),T)}function Mo(h){h.B&&(d.clearTimeout(h.B),h.B=null)}vi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Du(this.i,this.A),this.L!=2&&(Bi(),Kt(17)),mn(this),this.s=2,Ms(this)):At(this,this.S-h)};function Ms(h){h.j.G==0||h.J||Yu(h.j,h)}function mn(h){Mo(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,sn(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function Ti(h,T){try{var C=h.j;if(C.G!=0&&(C.g==h||Ds(C.h,h))){if(!h.K&&Ds(C.h,h)&&C.G==3){try{var R=C.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Fs(C),Bs(C);else break e;il(C),Kt(18)}}else C.za=z[1],0<C.za-C.T&&37500>z[2]&&C.F&&C.v==0&&!C.C&&(C.C=bs(S(C.Za,C),6e3));if(1>=ku(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else $i(C,11)}else if((h.K||C.g==h)&&Fs(C),!K(T))for(z=C.Da.g.parse(T),T=0;T<z.length;T++){let Ve=z[T];if(C.T=Ve[0],Ve=Ve[1],C.G==2)if(Ve[0]=="c"){C.K=Ve[1],C.ia=Ve[2];const Ft=Ve[3];Ft!=null&&(C.la=Ft,C.j.info("VER="+C.la));const Ht=Ve[4];Ht!=null&&(C.Aa=Ht,C.j.info("SVER="+C.Aa));const zs=Ve[5];zs!=null&&typeof zs=="number"&&0<zs&&(R=1.5*zs,C.L=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const Sn=h.g;if(Sn){const Kr=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var X=R.h;X.g||Kr.indexOf("spdy")==-1&&Kr.indexOf("quic")==-1&&Kr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ps(X,X.h),X.h=null))}if(R.D){const Qi=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qi&&(R.ya=Qi,$e(R.I,R.D,Qi))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),R=C;var le=h;if(R.qa=$u(R,R.J?R.ia:null,R.W),le.K){zn(R.h,le);var Ze=le,bt=R.L;bt&&(Ze.I=bt),Ze.B&&(Mo(Ze),oi(Ze)),R.g=le}else Gu(R);0<C.i.length&&qo(C)}else Ve[0]!="stop"&&Ve[0]!="close"||$i(C,7);else C.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?$i(C,7):tl(C):Ve[0]!="noop"&&C.l&&C.l.ta(Ve),C.v=0)}}Bi(4)}catch{}}var Tf=class{constructor(h,T){this.g=h,this.map=T}};function $a(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ku(h){return h.h?1:h.g?h.g.size:0}function Ds(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function Ps(h,T){h.g?h.g.add(T):h.h=T}function zn(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}$a.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const C of h.g.values())T=T.concat(C.D);return T}return B(h.i)}function Vu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var T=[],C=h.length,R=0;R<C;R++)T.push(h[R]);return T}T=[],C=0;for(R in h)T[C++]=h[R];return T}function Ef(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var T=[];h=h.length;for(var C=0;C<h;C++)T.push(C);return T}T=[],C=0;for(const R in h)T[C++]=R;return T}}}function Do(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var C=Ef(h),R=Vu(h),z=R.length,X=0;X<z;X++)T.call(void 0,R[X],C&&C[X],h)}var Wa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Po(h,T){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var R=h[C].indexOf("="),z=null;if(0<=R){var X=h[C].substring(0,R);z=h[C].substring(R+1)}else X=h[C];T(X,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ji(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ji){this.h=h.h,ks(this,h.j),this.o=h.o,this.g=h.g,Br(this,h.s),this.l=h.l;var T=h.i,C=new Ei;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),ko(this,C),this.m=h.m}else h&&(T=String(h).match(Wa))?(this.h=!1,ks(this,T[1]||"",!0),this.o=Vs(T[2]||""),this.g=Vs(T[3]||"",!0),Br(this,T[4]),this.l=Vs(T[5]||"",!0),ko(this,T[6]||"",!0),this.m=Vs(T[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}Ji.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Gn(T,Xa,!0),":");var C=this.g;return(C||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Gn(T,Xa,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Gn(C,C.charAt(0)=="/"?ja:Uu,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Gn(C,Cf)),h.join("")};function _t(h){return new Ji(h)}function ks(h,T,C){h.j=C?Vs(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function Br(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function ko(h,T,C){T instanceof Ei?(h.i=T,Lu(h.i,h.h)):(C||(T=Gn(T,Af)),h.i=new Ei(T,h.h))}function $e(h,T,C){h.i.set(T,C)}function Fr(h){return $e(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Vs(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gn(h,T,C){return typeof h=="string"?(h=encodeURI(h).replace(T,Sf),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Sf(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Xa=/[#\/\?@]/g,Uu=/[#\?:]/g,ja=/[#\?]/g,Af=/[#\?@]/g,Cf=/#/g;function Ei(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function Bt(h){h.g||(h.g=new Map,h.h=0,h.i&&Po(h.i,function(T,C){h.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Ei.prototype,n.add=function(h,T){Bt(this),this.i=null,h=Nn(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(T),this.h+=1,this};function Vo(h,T){Bt(h),T=Nn(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function Uo(h,T){return Bt(h),T=Nn(h,T),h.g.has(T)}n.forEach=function(h,T){Bt(this),this.g.forEach(function(C,R){C.forEach(function(z){h.call(T,z,R,this)},this)},this)},n.na=function(){Bt(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let R=0;R<T.length;R++){const z=h[R];for(let X=0;X<z.length;X++)C.push(T[R])}return C},n.V=function(h){Bt(this);let T=[];if(typeof h=="string")Uo(this,h)&&(T=T.concat(this.g.get(Nn(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)T=T.concat(h[C])}return T},n.set=function(h,T){return Bt(this),this.i=null,h=Nn(this,h),Uo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},n.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function Yi(h,T,C){Vo(h,T),0<C.length&&(h.i=null,h.g.set(Nn(h,T),B(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var R=T[C];const X=encodeURIComponent(String(R)),le=this.V(R);for(R=0;R<le.length;R++){var z=X;le[R]!==""&&(z+="="+encodeURIComponent(String(le[R]))),h.push(z)}}return this.i=h.join("&")};function Nn(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function Lu(h,T){T&&!h.j&&(Bt(h),h.i=null,h.g.forEach(function(C,R){var z=R.toLowerCase();R!=z&&(Vo(this,R),Yi(this,z,C))},h)),h.j=T}function Za(h,T){const C=new xs;if(d.Image){const R=new Image;R.onload=b(En,C,"TestLoadImage: loaded",!0,T,R),R.onerror=b(En,C,"TestLoadImage: error",!1,T,R),R.onabort=b(En,C,"TestLoadImage: abort",!1,T,R),R.ontimeout=b(En,C,"TestLoadImage: timeout",!1,T,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else T(!1)}function Ou(h,T){const C=new xs,R=new AbortController,z=setTimeout(()=>{R.abort(),En(C,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:R.signal}).then(X=>{clearTimeout(z),X.ok?En(C,"TestPingServer: ok",!0,T):En(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(z),En(C,"TestPingServer: error",!1,T)})}function En(h,T,C,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(C)}catch{}}function ai(){this.g=new vf}function el(h,T,C){const R=C||"";try{Do(h,function(z,X){let le=z;m(z)&&(le=Fn(z)),T.push(R+X+"="+encodeURIComponent(le))})}catch(z){throw T.push(R+"type="+encodeURIComponent("_badmap")),z}}function Si(h){this.l=h.Ub||null,this.j=h.eb||!1}q(Si,Ha),Si.prototype.g=function(){return new Mn(this.l,this.j)},Si.prototype.i=(function(h){return function(){return h}})({});function Mn(h,T){Vt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Mn,Vt),n=Mn.prototype,n.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,Us(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?Ai(this):Us(this),this.readyState==3&&Lo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ai(this))},n.Qa=function(h){this.g&&(this.response=h,Ai(this))},n.ga=function(){this.g&&Ai(this)};function Ai(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Us(h)}n.setRequestHeader=function(h,T){this.u.append(h,T)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=T.next();return h.join(`\r
`)};function Us(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hr(h){let T="";return ue(h,function(C,R){T+=R,T+=":",T+=C,T+=`\r
`}),T}function Ls(h,T,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=Hr(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):$e(h,T,C))}function lt(h){Vt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(lt,Vt);var rn=/^https?$/i,Ki=["POST","PUT"];n=lt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,T,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_i.g(),this.v=this.o?Mu(this.o):Mu(_i),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(X){zr(this,X);return}if(h=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)C.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())C.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(X=>X.toLowerCase()=="content-type"),z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ki,T,void 0))||R||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,le]of C)this.g.setRequestHeader(X,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oo(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){zr(this,X)}};function zr(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,Os(h),qs(h)}function Os(h){h.A||(h.A=!0,qt(h,"complete"),qt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,qt(this,"complete"),qt(this,"abort"),qs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qu(this):this.bb())},n.bb=function(){qu(this)};function qu(h){if(h.h&&typeof u<"u"&&(!h.v[1]||yn(h)!=4||h.Z()!=2)){if(h.u&&yn(h)==4)Nu(h.Ea,0,h);else if(qt(h,"readystatechange"),yn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var R;if(R=le===0){var z=String(h.D).match(Wa)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),R=!rn.test(z?z.toLowerCase():"")}C=R}if(C)qt(h,"complete"),qt(h,"success");else{h.m=6;try{var X=2<yn(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",Os(h)}}finally{qs(h)}}}}function qs(h,T){if(h.g){Oo(h);const C=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||qt(h,"ready");try{C.onreadystatechange=R}catch{}}}function Oo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function yn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),pn(T)}};function Gr(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bu(h){const T={};h=(h.g&&2<=yn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(K(h[R]))continue;var C=V(h[R]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const X=T[z]||[];T[z]=X,X.push(C)}M(T,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(h,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||T}function Fu(h){this.Aa=0,this.i=[],this.j=new xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jr("baseRetryDelayMs",5e3,h),this.cb=Jr("retryDelaySeedMs",1e4,h),this.Wa=Jr("forwardChannelMaxRetries",2,h),this.wa=Jr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new $a(h&&h.concurrentRequestLimit),this.Da=new ai,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fu.prototype,n.la=8,n.G=1,n.connect=function(h,T,C,R){Kt(0),this.W=h,this.H=T||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.I=$u(this,null,this.W),qo(this)};function tl(h){if(Hu(h),h.G==3){var T=h.U++,C=_t(h.I);if($e(C,"SID",h.K),$e(C,"RID",T),$e(C,"TYPE","terminate"),Yr(h,C),T=new vi(h,h.j,T),T.L=2,T.v=Fr(_t(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=Qu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),oi(T)}rl(h)}function Bs(h){h.g&&(sl(h),h.g.cancel(),h.g=null)}function Hu(h){Bs(h),h.u&&(d.clearTimeout(h.u),h.u=null),Fs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function qo(h){if(!Qa(h.h)&&!h.s){h.s=!0;var T=h.Ga;ae||Ke(),ye||(ae(),ye=!0),Ge.add(T,h),h.B=0}}function If(h,T){return ku(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=bs(S(h.Ga,h,T),Ku(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new vi(this,this.j,h);let X=this.o;if(this.S&&(X?(X=x(X),D(X,this.S)):X=this.S),this.m!==null||this.O||(z.H=X,X=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=nl(this,z,T),C=_t(this.I),$e(C,"RID",h),$e(C,"CVER",22),this.D&&$e(C,"X-HTTP-Session-Id",this.D),Yr(this,C),X&&(this.O?T="headers="+encodeURIComponent(String(Hr(X)))+"&"+T:this.m&&Ls(C,this.m,X)),Ps(this.h,z),this.Ua&&$e(C,"TYPE","init"),this.P?($e(C,"$req",T),$e(C,"SID","null"),z.T=!0,Or(z,C,null)):Or(z,C,T),this.G=2}}else this.G==3&&(h?zu(this,h):this.i.length==0||Qa(this.h)||zu(this))};function zu(h,T){var C;T?C=T.l:C=h.U++;const R=_t(h.I);$e(R,"SID",h.K),$e(R,"RID",C),$e(R,"AID",h.T),Yr(h,R),h.m&&h.o&&Ls(R,h.m,h.o),C=new vi(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),T&&(h.i=T.D.concat(h.i)),T=nl(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ps(h.h,C),Or(C,R,T)}function Yr(h,T){h.H&&ue(h.H,function(C,R){$e(T,R,C)}),h.l&&Do({},function(C,R){$e(T,R,C)})}function nl(h,T,C){C=Math.min(h.i.length,C);var R=h.l?S(h.l.Na,h.l,h):null;e:{var z=h.i;let X=-1;for(;;){const le=["count="+C];X==-1?0<C?(X=z[0].g,le.push("ofs="+X)):X=0:le.push("ofs="+X);let Ze=!0;for(let bt=0;bt<C;bt++){let Ve=z[bt].g;const Ft=z[bt].map;if(Ve-=X,0>Ve)X=Math.max(0,z[bt].g-100),Ze=!1;else try{el(Ft,le,"req"+Ve+"_")}catch{R&&R(Ft)}}if(Ze){R=le.join("&");break e}}}return h=h.i.splice(0,C),T.D=h,R}function Gu(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;ae||Ke(),ye||(ae(),ye=!0),Ge.add(T,h),h.v=0}}function il(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=bs(S(h.Fa,h),Ku(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=bs(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),Bs(this),Ju(this))};function sl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Ju(h){h.g=new vi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=_t(h.qa);$e(T,"RID","rpc"),$e(T,"SID",h.K),$e(T,"AID",h.T),$e(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&$e(T,"TO",h.ja),$e(T,"TYPE","xmlhttp"),Yr(h,T),h.m&&h.o&&Ls(T,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Fr(_t(T)),C.m=null,C.P=!0,zi(C,h)}n.Za=function(){this.C!=null&&(this.C=null,Bs(this),il(this),Kt(19))};function Fs(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Yu(h,T){var C=null;if(h.g==T){Fs(h),sl(h),h.g=null;var R=2}else if(Ds(h.h,T))C=T.D,zn(h.h,T),R=1;else return;if(h.G!=0){if(T.o)if(R==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var z=h.B;R=No(),qt(R,new Ga(R,C)),qo(h)}else Gu(h);else if(z=T.s,z==3||z==0&&0<T.X||!(R==1&&If(h,T)||R==2&&il(h)))switch(C&&0<C.length&&(T=h.h,T.i=T.i.concat(C)),z){case 1:$i(h,5);break;case 4:$i(h,10);break;case 3:$i(h,6);break;default:$i(h,2)}}}function Ku(h,T){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*T}function $i(h,T){if(h.j.info("Error code "+T),T==2){var C=S(h.fb,h),R=h.Xa;const z=!R;R=new Ji(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ks(R,"https"),Fr(R),z?Za(R.toString(),C):Ou(R.toString(),C)}else Kt(2);h.G=0,h.l&&h.l.sa(T),rl(h),Hu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function rl(h){if(h.G=0,h.ka=[],h.l){const T=gn(h.h);(T.length!=0||h.i.length!=0)&&(G(h.ka,T),G(h.ka,h.i),h.h.i.length=0,B(h.i),h.i.length=0),h.l.ra()}}function $u(h,T,C){var R=C instanceof Ji?_t(C):new Ji(C);if(R.g!="")T&&(R.g=T+"."+R.g),Br(R,R.s);else{var z=d.location;R=z.protocol,T=T?T+"."+z.hostname:z.hostname,z=+z.port;var X=new Ji(null);R&&ks(X,R),T&&(X.g=T),z&&Br(X,z),C&&(X.l=C),R=X}return C=h.D,T=h.ya,C&&T&&$e(R,C,T),$e(R,"VER",h.la),Yr(h,R),R}function Qu(h,T,C){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new lt(new Si({eb:C})):new lt(h.pa),T.Ha(h.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wu(){}n=Wu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Bo(){}Bo.prototype.g=function(h,T){return new _n(h,T)};function _n(h,T){Vt.call(this),this.g=new Fu(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!K(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!K(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new Hs(this)}q(_n,Vt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){tl(this.g)},_n.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Fn(h),h=C);T.i.push(new Tf(T.Ya++,h)),T.G==3&&qo(T)},_n.prototype.N=function(){this.g.l=null,delete this.j,tl(this.g),delete this.g,_n.aa.N.call(this)};function Xu(h){Is.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const C in T){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}q(Xu,Is);function ju(){ri.call(this),this.status=1}q(ju,ri);function Hs(h){this.g=h}q(Hs,Wu),Hs.prototype.ua=function(){qt(this.g,"a")},Hs.prototype.ta=function(h){qt(this.g,new Xu(h))},Hs.prototype.sa=function(h){qt(this.g,new ju)},Hs.prototype.ra=function(){qt(this.g,"b")},Bo.prototype.createWebChannel=Bo.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,nA=function(){return new Bo},tA=function(){return No()},eA=Hn,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yt.NO_ERROR=0,yt.TIMEOUT=8,yt.HTTP_ERROR=6,pd=yt,$t.COMPLETE="complete",ZS=$t,Lr.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Kl=Lr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,jS=lt}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const k0="@firebase/firestore",V0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new Sm("@firebase/firestore");function ma(){return vo.logLevel}function he(n,...e){if(vo.logLevel<=He.DEBUG){const t=e.map(Um);vo.debug(`Firestore (${Pa}): ${n}`,...t)}}function _s(n,...e){if(vo.logLevel<=He.ERROR){const t=e.map(Um);vo.error(`Firestore (${Pa}): ${n}`,...t)}}function Ar(n,...e){if(vo.logLevel<=He.WARN){const t=e.map(Um);vo.warn(`Firestore (${Pa}): ${n}`,...t)}}function Um(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,iA(n,i,t)}function iA(n,e,t){let i=`FIRESTORE (${Pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw _s(i),new Error(i)}function et(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||iA(e,o,i)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ln.UNAUTHENTICATED)))}shutdown(){}}class lN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uN{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Er,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Er)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string",31837,{l:i}),new sA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class cN{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dN{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new cN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class U0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new U0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=hN(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Ue(n,e){return n<e?-1:n>e?1:0}function $p(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ue(i,o);{const a=rA(),u=pN(a.encode(L0(n,t)),a.encode(L0(e,t)));return u!==0?u:Ue(i,o)}}t+=i>65535?2:1}return Ue(n.length,e.length)}function L0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function pN(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ue(n[t],e[t]);return Ue(n.length,e.length)}function Ra(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="__name__";class bi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=bi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Ue(e.length,t.length)}static compareSegments(e,t){const i=bi.isNumericId(e),o=bi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?bi.extractNumericId(e).compare(bi.extractNumericId(t)):$p(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class mt extends bi{construct(e,t,i){return new mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const mN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends bi{construct(e,t,i){return new en(e,t,i)}static isValidIdentifier(e){return mN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O0}static keyField(){return new en([O0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(mt.fromString(e))}static fromName(e){return new Ee(mt.fromString(e).popFirst(5))}static empty(){return new Ee(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(n,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yN(n,e,t,i){if(e===!0&&i===!0)throw new _e(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function q0(n){if(!Ee.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Om(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function cu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Om(n);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Cu(n,e){if(!oA(n))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new _e(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=-62135596800,F0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*F0);return new ft(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B0)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/F0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cu(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:kt("string",ft._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ft(0,0))}static max(){return new Re(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function _N(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ft(t+1,0):new ft(t,i));return new Cr(o,Ee.empty(),e)}function vN(n){return new Cr(n.readTime,n.key,du)}class Cr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Cr(Re.min(),Ee.empty(),du)}static max(){return new Cr(Re.max(),Ee.empty(),du)}}function TN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==EN)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,i)=>{t(e)}))}static reject(e){return new ie(((t,i)=>{i(e)}))}static waitFor(e){return new ie(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next((o=>o?ie.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new ie(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const m=p;t(e[m]).next((v=>{u[m]=v,++d,d===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new ie(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function AN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Va(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Xd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=-1;function jd(n){return n==null}function Nd(n){return n===0&&1/n==-1/0}function CN(n){return typeof n=="number"&&Number.isInteger(n)&&!Nd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="";function IN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=H0(e)),e=wN(n.get(t),e);return H0(e)}function wN(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case aA:t+="";break;default:t+=a}}return t}function H0(n){return n+aA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Zt.RED,this.left=o??Zt.EMPTY,this.right=a??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Zt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new fi([])}unionWith(e){let t=new Ot(en.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new fi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ra(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new uA("Invalid base64 string: "+a):a}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const RN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=RN.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="server_timestamp",dA="__type__",fA="__previous_value__",hA="__local_write_time__";function Bm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[dA])===null||t===void 0?void 0:t.stringValue)===cA}function Zd(n){const e=n.mapValue.fields[fA];return Bm(e)?Zd(e):e}function fu(n){const e=Ir(n.mapValue.fields[hA].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,i,o,a,u,d,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const Md="(default)";class hu{constructor(e,t){this.projectId=e,this.database=t||Md}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===Md}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="__type__",xN="__max__",rd={mapValue:{}},mA="__vector__",Dd="value";function Rr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bm(n)?4:MN(n)?9007199254740991:NN(n)?10:11:Ie(28295,{value:n})}function Vi(n,e){if(n===e)return!0;const t=Rr(n);if(t!==Rr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fu(n).isEqual(fu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Ir(o.timestampValue),d=Ir(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return wr(o.bytesValue).isEqual(wr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return wt(o.geoPointValue.latitude)===wt(a.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return wt(o.integerValue)===wt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=wt(o.doubleValue),d=wt(a.doubleValue);return u===d?Nd(u)===Nd(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ra(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(z0(u)!==z0(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!Vi(u[p],d[p])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function pu(n,e){return(n.values||[]).find((t=>Vi(t,e)))!==void 0}function ba(n,e){if(n===e)return 0;const t=Rr(n),i=Rr(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=wt(a.integerValue||a.doubleValue),p=wt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return J0(n.timestampValue,e.timestampValue);case 4:return J0(fu(n),fu(e));case 5:return $p(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=wr(a),p=wr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let m=0;m<d.length&&m<p.length;m++){const v=Ue(d[m],p[m]);if(v!==0)return v}return Ue(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ue(wt(a.latitude),wt(u.latitude));return d!==0?d:Ue(wt(a.longitude),wt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Y0(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,p,m,v;const E=a.fields||{},S=u.fields||{},b=(d=E[Dd])===null||d===void 0?void 0:d.arrayValue,q=(p=S[Dd])===null||p===void 0?void 0:p.arrayValue,B=Ue(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((v=q==null?void 0:q.values)===null||v===void 0?void 0:v.length)||0);return B!==0?B:Y0(b,q)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===rd.mapValue&&u===rd.mapValue)return 0;if(a===rd.mapValue)return 1;if(u===rd.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),m=u.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const S=$p(p[E],v[E]);if(S!==0)return S;const b=ba(d[p[E]],m[v[E]]);if(b!==0)return b}return Ue(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{le:t})}}function J0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=Ir(n),i=Ir(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function Y0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=ba(t[o],i[o]);if(a)return a}return Ue(t.length,i.length)}function xa(n){return Qp(n)}function Qp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ir(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return wr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Qp(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Qp(t.fields[u])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function md(n){switch(Rr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zd(n);return e?16+md(e):16;case 5:return 2*n.stringValue.length;case 6:return wr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+md(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ao(i.fields,((a,u)=>{o+=a.length+md(u)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function Wp(n){return!!n&&"integerValue"in n}function Fm(n){return!!n&&"arrayValue"in n}function K0(n){return!!n&&"nullValue"in n}function $0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gd(n){return!!n&&"mapValue"in n}function NN(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[pA])===null||t===void 0?void 0:t.stringValue)===mA}function eu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ao(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=eu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=en.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=eu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];gd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ao(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Zn(eu(this.value))}}function gA(n){const e=[];return Ao(n.fields,((t,i)=>{const o=new en([t]);if(gd(i)){const a=gA(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new fi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new un(e,0,Re.min(),Re.min(),Re.min(),Zn.empty(),0)}static newFoundDocument(e,t,i,o){return new un(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new un(e,2,t,Re.min(),Re.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Re.min(),Re.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.position=e,this.inclusive=t}}function Q0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=ba(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function W0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t="asc"){this.field=e,this.dir=t}}function DN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{}class Lt extends yA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new kN(e,t,i):t==="array-contains"?new LN(e,i):t==="in"?new ON(e,i):t==="not-in"?new qN(e,i):t==="array-contains-any"?new BN(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new VN(e,i):new UN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ba(t,this.value)):t!==null&&Rr(this.value)===Rr(t)&&this.matchesComparison(ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends yA{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ui(e,t)}matches(e){return _A(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function _A(n){return n.op==="and"}function vA(n){return PN(n)&&_A(n)}function PN(n){for(const e of n.filters)if(e instanceof Ui)return!1;return!0}function Xp(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+xa(n.value);if(vA(n))return n.filters.map((e=>Xp(e))).join(",");{const e=n.filters.map((t=>Xp(t))).join(",");return`${n.op}(${e})`}}function TA(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&Vi(i.value,o.value)})(n,e):n instanceof Ui?(function(i,o){return o instanceof Ui&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&TA(u,o.filters[d])),!0):!1})(n,e):void Ie(19439)}function EA(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${xa(t.value)}`})(n):n instanceof Ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(EA).join(" ,")+"}"})(n):"Filter"}class kN extends Lt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class VN extends Lt{constructor(e,t){super(e,"in",t),this.keys=SA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class UN extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=SA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function SA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class LN extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fm(t)&&pu(t.arrayValue,this.value)}}class ON extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pu(this.value.arrayValue,t)}}class qN extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pu(this.value.arrayValue,t)}}class BN extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>pu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function X0(n,e=null,t=[],i=[],o=null,a=null,u=null){return new FN(n,e,t,i,o,a,u)}function Hm(n){const e=xe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Xp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),jd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>xa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>xa(i))).join(",")),e.Pe=t}return e.Pe}function zm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!DN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!W0(n.startAt,e.startAt)&&W0(n.endAt,e.endAt)}function jp(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function HN(n,e,t,i,o,a,u,d){return new ef(n,e,t,i,o,a,u,d)}function Gm(n){return new ef(n)}function j0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zN(n){return n.collectionGroup!==null}function tu(n){const e=xe(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ot(en.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new kd(a,i))})),t.has(en.keyField().canonicalString())||e.Te.push(new kd(en.keyField(),i))}return e.Te}function Mi(n){const e=xe(n);return e.Ie||(e.Ie=GN(e,tu(n))),e.Ie}function GN(n,e){if(n.limitType==="F")return X0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new kd(o.field,a)}));const t=n.endAt?new Pd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Pd(n.startAt.position,n.startAt.inclusive):null;return X0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Zp(n,e,t){return new ef(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tf(n,e){return zm(Mi(n),Mi(e))&&n.limitType===e.limitType}function AA(n){return`${Hm(Mi(n))}|lt:${n.limitType}`}function ga(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>EA(o))).join(", ")}]`),jd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>xa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>xa(o))).join(",")),`Target(${i})`})(Mi(n))}; limitType=${n.limitType})`}function nf(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of tu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const m=Q0(u,d,p);return u.inclusive?m<=0:m<0})(i.startAt,tu(i),o)||i.endAt&&!(function(u,d,p){const m=Q0(u,d,p);return u.inclusive?m>=0:m>0})(i.endAt,tu(i),o))})(n,e)}function JN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function CA(n){return(e,t)=>{let i=!1;for(const o of tu(n)){const a=YN(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function YN(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),m=d.data.field(a);return p!==null&&m!==null?ba(p,m):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return lA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new gt(Ee.comparator);function vs(){return KN}const IA=new gt(Ee.comparator);function $l(...n){let e=IA;for(const t of n)e=e.insert(t.key,t);return e}function wA(n){let e=IA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function fo(){return nu()}function RA(){return nu()}function nu(){return new Co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const $N=new gt(Ee.comparator),QN=new Ot(Ee.comparator);function ze(...n){let e=QN;for(const t of n)e=e.add(t);return e}const WN=new Ot(Ue);function XN(){return WN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function bA(n){return{integerValue:""+n}}function jN(n,e){return CN(e)?bA(e):Jm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this._=void 0}}function ZN(n,e,t){return n instanceof Vd?(function(o,a){const u={fields:{[dA]:{stringValue:cA},[hA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Bm(a)&&(a=Zd(a)),a&&(u.fields[fA]=a),{mapValue:u}})(t,e):n instanceof mu?NA(n,e):n instanceof gu?MA(n,e):(function(o,a){const u=xA(o,a),d=Z0(u)+Z0(o.Ee);return Wp(u)&&Wp(o.Ee)?bA(d):Jm(o.serializer,d)})(n,e)}function e2(n,e,t){return n instanceof mu?NA(n,e):n instanceof gu?MA(n,e):t}function xA(n,e){return n instanceof Ud?(function(i){return Wp(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Vd extends sf{}class mu extends sf{constructor(e){super(),this.elements=e}}function NA(n,e){const t=DA(e);for(const i of n.elements)t.some((o=>Vi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class gu extends sf{constructor(e){super(),this.elements=e}}function MA(n,e){let t=DA(e);for(const i of n.elements)t=t.filter((o=>!Vi(o,i)));return{arrayValue:{values:t}}}class Ud extends sf{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Z0(n){return wt(n.integerValue||n.doubleValue)}function DA(n){return Fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function t2(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof mu&&o instanceof mu||i instanceof gu&&o instanceof gu?Ra(i.elements,o.elements,Vi):i instanceof Ud&&o instanceof Ud?Vi(i.Ee,o.Ee):i instanceof Vd&&o instanceof Vd})(n.transform,e.transform)}class n2{constructor(e,t){this.version=e,this.transformResults=t}}class ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rf{}function PA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new VA(n.key,ms.none()):new Iu(n.key,n.data,ms.none());{const t=n.data,i=Zn.empty();let o=new Ot(en.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Io(n.key,i,new fi(o.toArray()),ms.none())}}function i2(n,e,t){n instanceof Iu?(function(o,a,u){const d=o.value.clone(),p=tT(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Io?(function(o,a,u){if(!yd(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=tT(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(kA(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function iu(n,e,t,i){return n instanceof Iu?(function(a,u,d,p){if(!yd(a.precondition,u))return d;const m=a.value.clone(),v=nT(a.fieldTransforms,p,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,i):n instanceof Io?(function(a,u,d,p){if(!yd(a.precondition,u))return d;const m=nT(a.fieldTransforms,p,u),v=u.data;return v.setAll(kA(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return yd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function s2(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=xA(i.transform,o||null);a!=null&&(t===null&&(t=Zn.empty()),t.set(i.field,a))}return t||null}function eT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ra(i,o,((a,u)=>t2(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Iu extends rf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Io extends rf{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function kA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function tT(n,e,t){const i=new Map;et(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,e2(u,d,t[o]))}return i}function nT(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,ZN(a,u,e))}return i}class VA extends rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r2 extends rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&i2(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=iu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=iu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=RA();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=PA(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Ra(this.mutations,e.mutations,((t,i)=>eT(t,i)))&&Ra(this.baseMutations,e.baseMutations,((t,i)=>eT(t,i)))}}class Ym{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){et(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=(function(){return $N})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Ym(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ye;function u2(n){switch(n){case re.OK:return Ie(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function UA(n){if(n===void 0)return _s("GRPC error has no .code"),re.UNKNOWN;switch(n){case Pt.OK:return re.OK;case Pt.CANCELLED:return re.CANCELLED;case Pt.UNKNOWN:return re.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return re.INTERNAL;case Pt.UNAVAILABLE:return re.UNAVAILABLE;case Pt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Pt.NOT_FOUND:return re.NOT_FOUND;case Pt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Pt.ABORTED:return re.ABORTED;case Pt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Pt.DATA_LOSS:return re.DATA_LOSS;default:return Ie(39323,{code:n})}}(Ye=Pt||(Pt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new Tr([4294967295,4294967295],0);function iT(n){const e=rA().encode(n),t=new XS;return t.update(e),new Uint8Array(t.digest())}function sT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Tr([t,i],0),new Tr([o,a],0)]}class Km{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ql(`Invalid padding: ${t}`);if(i<0)throw new Ql(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Tr.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Tr.fromNumber(i)));return o.compare(c2)===1&&(o=new Tr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=iT(e),[i,o]=sT(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);if(!this.ye(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Km(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const t=iT(e),[i,o]=sT(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(i,o,a);this.we(u)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new of(Re.min(),o,new gt(Ue),vs(),ze())}}class wu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new wu(i,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class LA{constructor(e,t){this.targetId=e,this.De=t}}class OA{constructor(e,t,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class rT{constructor(){this.ve=0,this.Ce=oT(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ze(),t=ze(),i=ze();return this.Ce.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:a})}})),new wu(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=oT()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class d2{constructor(e){this.We=e,this.Ge=new Map,this.ze=vs(),this.je=od(),this.Je=od(),this.He=new gt(Ue)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((i,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const a=o.target;if(jp(a))if(i===0){const u=new Ee(a.path);this.Xe(t,u,un.newNoDocument(u,Re.min()))}else et(i===1,20013,{expectedCount:i});else{const u=this.ot(t);if(u!==i){const d=this._t(e),p=d?this.ut(d,e,u):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=wr(i).toUint8Array()}catch(p){if(p instanceof uA)return Ar("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Km(u,o,a)}catch(p){return Ar(p instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((a,u)=>{const d=this.st(u);if(d){if(a.current&&jp(d.target)){const p=new Ee(d.target.path);this.Tt(p).has(u)||this.It(u,p)||this.Xe(u,p,un.newNoDocument(p,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}}));let i=ze();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.ze.forEach(((a,u)=>u.setReadTime(e)));const o=new of(e,t,this.He,this.ze,i);return this.ze=vs(),this.je=od(),this.Je=od(),this.He=new gt(Ue),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new rT,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ot(Ue),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ot(Ue),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new rT),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function od(){return new gt(Ee.comparator)}function oT(){return new gt(Ee.comparator)}const f2={asc:"ASCENDING",desc:"DESCENDING"},h2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p2={and:"AND",or:"OR"};class m2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function em(n,e){return n.useProto3Json||jd(e)?e:{value:e}}function Ld(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function g2(n,e){return Ld(n,e.toTimestamp())}function Di(n){return et(!!n,49232),Re.fromTimestamp((function(t){const i=Ir(t);return new ft(i.seconds,i.nanos)})(n))}function $m(n,e){return tm(n,e).canonicalString()}function tm(n,e){const t=(function(o){return new mt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function BA(n){const e=mt.fromString(n);return et(JA(e),10190,{key:e.toString()}),e}function nm(n,e){return $m(n.databaseId,e.path)}function Dp(n,e){const t=BA(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(HA(t))}function FA(n,e){return $m(n.databaseId,e)}function y2(n){const e=BA(n);return e.length===4?mt.emptyPath():HA(e)}function im(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HA(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function aT(n,e,t){return{name:nm(n,e),fields:t.value.mapValue.fields}}function _2(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ie(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(et(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(et(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const v=m.code===void 0?re.UNKNOWN:UA(m.code);return new _e(v,m.message||"")})(u);t=new OA(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Dp(n,i.document.name),a=Di(i.document.updateTime),u=i.document.createTime?Di(i.document.createTime):Re.min(),d=new Zn({mapValue:{fields:i.document.fields}}),p=un.newFoundDocument(o,a,u,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new _d(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Dp(n,i.document),a=i.readTime?Di(i.readTime):Re.min(),u=un.newNoDocument(o,a),d=i.removedTargetIds||[];t=new _d([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Dp(n,i.document),a=i.removedTargetIds||[];t=new _d([],a,o,null)}else{if(!("filter"in e))return Ie(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new l2(o,a),d=i.targetId;t=new LA(d,u)}}return t}function v2(n,e){let t;if(e instanceof Iu)t={update:aT(n,e.key,e.value)};else if(e instanceof VA)t={delete:nm(n,e.key)};else if(e instanceof Io)t={update:aT(n,e.key,e.data),updateMask:b2(e.fieldMask)};else{if(!(e instanceof r2))return Ie(16599,{Rt:e.type});t={verify:nm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Vd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof mu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof gu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ud)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:g2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function T2(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Di(o.updateTime):Di(a);return u.isEqual(Re.min())&&(u=Di(a)),new n2(u,o.transformResults||[])})(t,e)))):[]}function E2(n,e){return{documents:[FA(n,e.path)]}}function S2(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=FA(n,o);const a=(function(m){if(m.length!==0)return GA(Ui.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:ya(S.field),direction:I2(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=em(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{Vt:t,parent:o}}function A2(n){let e=y2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){et(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(E){const S=zA(E);return S instanceof Ui&&vA(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(q){return new kd(_a(q.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,jd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,b=E.values||[];return new Pd(b,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const S=!E.before,b=E.values||[];return new Pd(b,S)})(t.endAt)),HN(e,o,u,a,d,"F",p,m)}function C2(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=_a(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=_a(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=_a(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=_a(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(_a(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ui.create(t.compositeFilter.filters.map((i=>zA(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function I2(n){return f2[n]}function w2(n){return h2[n]}function R2(n){return p2[n]}function ya(n){return{fieldPath:n.canonicalString()}}function _a(n){return en.fromServerFormat(n.fieldPath)}function GA(n){return n instanceof Lt?(function(t){if(t.op==="=="){if($0(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NAN"}};if(K0(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($0(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NOT_NAN"}};if(K0(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(t.field),op:w2(t.op),value:t.value}}})(n):n instanceof Ui?(function(t){const i=t.getFilters().map((o=>GA(o)));return i.length===1?i[0]:{compositeFilter:{op:R2(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function b2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function JA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t,i,o,a=Re.min(),u=Re.min(),d=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.gt=e}}function N2(n){const e=A2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.Dn=new D2}addToCollectionParentIndex(e,t){return this.Dn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Cr.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class D2{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ot(mt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ot(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YA=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(YA,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Na(0)}static ur(){return new Na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="LruGarbageCollector",P2=1048576;function cT([n,e],[t,i]){const o=Ue(n,t);return o===0?Ue(e,i):o}class k2{constructor(e){this.Tr=e,this.buffer=new Ot(cT),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();cT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class V2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(uT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Va(t)?he(uT,"Ignoring IndexedDB error during garbage collection: ",t):await ka(t)}await this.Rr(3e5)}))}}class U2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Xd.ue);const i=new k2(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(lT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lT):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,a,u,d,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(m=Date.now(),ma()<=He.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function L2(n,e){return new U2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.changes=new Co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&iu(i.mutation,o,fi.empty(),ft.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const o=fo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=$l();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=fo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=vs();const u=nu(),d=(function(){return nu()})();return t.forEach(((p,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Io)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),iu(v.mutation,m,v.mutation.getFieldMask(),ft.now())):u.set(m.key,fi.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((m,v)=>u.set(m,v))),t.forEach(((m,v)=>{var E;return d.set(m,new q2(v,(E=u.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=nu();let o=new gt(((u,d)=>u-d)),a=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=i.get(p)||fi.empty();v=d.applyToLocalView(m,v),i.set(p,v);const E=(o.get(d.batchId)||ze()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),m=p.key,v=p.value,E=RA();v.forEach((S=>{if(!a.has(S)){const b=PA(t.get(S),i.get(S));b!==null&&E.set(S,b),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return ie.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ie.resolve(fo());let d=du,p=a;return u.next((m=>ie.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,p,m,ze()))).next((v=>({batchId:d,changes:wA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let o=$l();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=$l();return this.indexManager.getCollectionParents(e,a).next((d=>ie.forEach(d,(p=>{const m=(function(E,S){return new ef(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next((v=>{v.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,un.newInvalidDocument(v)))}));let d=$l();return u.forEach(((p,m)=>{const v=a.get(p);v!==void 0&&iu(v.mutation,m,fi.empty(),ft.now()),nf(t,m)&&(d=d.insert(p,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Di(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:N2(o.bundledQuery),readTime:Di(o.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.overlays=new gt(Ee.comparator),this.kr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=fo();return ie.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.wt(e,t,a)})),ie.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const o=fo(),a=t.length+1,u=new Ee(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new gt(((m,v)=>m-v));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=fo(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=fo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=o)););return ie.resolve(d)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new a2(t,i));let a=this.kr.get(t);a===void 0&&(a=ze(),this.kr.set(t,a)),this.kr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.qr=new Ot(Gt.Qr),this.$r=new Ot(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Gt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach((i=>this.removeReference(i,t)))}zr(e){const t=new Ee(new mt([])),i=new Gt(t,e),o=new Gt(t,e+1),a=[];return this.$r.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ee(new mt([])),i=new Gt(t,e),o=new Gt(t,e+1);let a=ze();return this.$r.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Gt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Gt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ee.comparator(e.key,t.key)||Ue(e.Hr,t.Hr)}static Ur(e,t){return Ue(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ot(Gt.Qr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new o2(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Yr=this.Yr.add(new Gt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?qm:this.er-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Gt(t,0),o=new Gt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,o],(u=>{const d=this.Zr(u.Hr);a.push(d)})),ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ot(Ue);return t.forEach((o=>{const a=new Gt(o,0),u=new Gt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),ie.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new Gt(new Ee(a),0);let d=new Ot(Ue);return this.Yr.forEachWhile((p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(p.Hr)),!0)}),u),ie.resolve(this.ei(d))}ei(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){et(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ie.forEach(t.mutations,(o=>{const a=new Gt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,t){const i=new Gt(t,0),o=this.Yr.firstAfterOrEqual(i);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.ni=e,this.docs=(function(){return new gt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let i=vs();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():un.newInvalidDocument(o))})),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=vs();const u=t.path,d=new Ee(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||TN(vN(v),i)<=0||(o.has(v.key)||nf(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ri(e,t){return ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Y2(this)}getSize(e){return ie.resolve(this.size)}}class Y2 extends O2{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)})),ie.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.persistence=e,this.ii=new Co((t=>Hm(t)),zm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.si=0,this.oi=new Qm,this.targetCount=0,this._i=Na.ar()}forEachTarget(e,t){return this.ii.forEach(((i,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ie.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Na(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.hr(t),ie.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ie.waitFor(a).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t){this.ai={},this.overlays={},this.ui=new Xd(0),this.ci=!1,this.ci=!0,this.li=new z2,this.referenceDelegate=e(this),this.hi=new K2(this),this.indexManager=new M2,this.remoteDocumentCache=(function(o){return new J2(o)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new x2(t),this.Ti=new F2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new H2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new G2(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new $2(this.ui.next());return this.referenceDelegate.Ii(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return ie.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,t))))}}class $2 extends SN{constructor(e){super(),this.currentSequenceNumber=e}}class Wm{constructor(e){this.persistence=e,this.Ai=new Qm,this.Ri=null}static Vi(e){return new Wm(e)}get mi(){if(this.Ri)return this.Ri;throw Ie(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.mi,(i=>{const o=Ee.fromPath(i);return this.fi(e,o).next((a=>{a||t.removeEntry(o,Re.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ie.or([()=>ie.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Od{constructor(e,t){this.persistence=e,this.gi=new Co((i=>IN(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=L2(this,t)}static Vi(e,t){return new Od(e,t)}Ii(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}yr(e){let t=0;return this.gr(e,(i=>{t++})).next((()=>t))}gr(e,t){return ie.forEach(this.gi,((i,o)=>this.Sr(e,i,o).next((a=>a?ie.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,(u=>this.Sr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ie.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=md(e.data.value)),t}Sr(e,t,i){return ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return ie.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=ze(),o=ze();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Xm(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return IR()?8:AN(dn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ps(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ys(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new Q2;return this.ws(e,t,u).next((d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)}))})).next((()=>a.result))}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(ma()<=He.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ga(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ie.resolve()):(ma()<=He.DEBUG&&he("QueryEngine","Query:",ga(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(ma()<=He.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ga(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):ie.resolve())}ps(e,t){if(j0(t))return ie.resolve(null);let i=Mi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Zp(t,null,"F"),i=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=ze(...a);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const m=this.bs(t,d);return this.Ds(t,m,u,p.readTime)?this.ps(e,Zp(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ys(e,t,i,o){return j0(t)||o.isEqual(Re.min())?ie.resolve(null):this.gs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ds(t,u,i,o)?ie.resolve(null):(ma()<=He.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ga(t)),this.vs(e,u,t,_N(o,du)).next((d=>d)))}))}bs(e,t){let i=new Ot(CA(e));return t.forEach(((o,a)=>{nf(e,a)&&(i=i.add(a))})),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,i){return ma()<=He.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ga(t)),this.gs.getDocumentsMatchingQuery(e,t,Cr.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LocalStore",X2=3e8;class j2{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new gt(Ue),this.Ms=new Co((a=>Hm(a)),zm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Z2(n,e,t,i){return new j2(n,e,t,i)}async function $A(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=ze();for(const m of o){u.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((m=>({Bs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function eM(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return(function(d,p,m,v){const E=m.batch,S=E.keys();let b=ie.resolve();return S.forEach((q=>{b=b.next((()=>v.getEntry(p,q))).next((B=>{const G=m.docVersions.get(q);et(G!==null,48541),B.version.compareTo(G)<0&&(E.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=ze();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(p=p.add(d.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function QA(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function tM(n,e){const t=xe(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const d=[];e.targetChanges.forEach(((v,E)=>{const S=o.get(E);if(!S)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,E).next((()=>t.hi.addMatchingKeys(a,v.addedDocuments,E))));let b=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?b=b.withResumeToken(nn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,i)),o=o.insert(E,b),(function(B,G,te){return B.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=X2?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(S,b,v)&&d.push(t.hi.updateTargetData(a,b))}));let p=vs(),m=ze();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(nM(a,u,e.documentUpdates).next((v=>{p=v.Ls,m=v.ks}))),!i.isEqual(Re.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next((E=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(v)}return ie.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,m))).next((()=>p))})).then((a=>(t.Fs=o,a)))}function nM(n,e,t){let i=ze(),o=ze();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=vs();return t.forEach(((d,p)=>{const m=a.get(d);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):he(jm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",p.version)})),{Ls:u,ks:o}}))}function iM(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=qm),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function sM(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.hi.getTargetData(i,e).next((a=>a?(o=a,ie.resolve(o)):t.hi.allocateTargetId(i).next((u=>(o=new yr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i}))}async function sm(n,e,t){const i=xe(n),o=i.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Va(u))throw u;he(jm,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function dT(n,e,t){const i=xe(n);let o=Re.min(),a=ze();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,m,v){const E=xe(p),S=E.Ms.get(v);return S!==void 0?ie.resolve(E.Fs.get(S)):E.hi.getTargetData(m,v)})(i,u,Mi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?a:ze()))).next((d=>(rM(i,JN(e),d),{documents:d,qs:a})))))}function rM(n,e,t){let i=n.xs.get(e)||Re.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.xs.set(e,i)}class fT{constructor(){this.activeTargetIds=XN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oM{constructor(){this.Fo=new fT,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new fT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="ConnectivityMonitor";class pT{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(hT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(hT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=null;function rm(){return ad===null?ad=(function(){return 268435456+Math.round(2147483648*Math.random())})():ad++,"0x"+ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="RestConnection",lM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Md?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=rm(),d=this.Go(e,t.toUriEncodedString());he(Pp,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,a);const{host:m}=new URL(d),v=Nr(m);return this.jo(e,d,p,i,v).then((E=>(he(Pp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Ar(Pp,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}Jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}zo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Go(e,t){const i=lM[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class dM extends uM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,a){const u=rm();return new Promise(((d,p)=>{const m=new jS;m.setWithCredentials(!0),m.listenOnce(ZS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case pd.NO_ERROR:const E=m.getResponseJson();he(an,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case pd.TIMEOUT:he(an,`RPC '${e}' ${u} timed out`),p(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const S=m.getStatus();if(he(an,`RPC '${e}' ${u} failed with status:`,S,"response text:",m.getResponseText()),S>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const q=b==null?void 0:b.error;if(q&&q.status&&q.message){const B=(function(te){const K=te.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(K)>=0?K:re.UNKNOWN})(q.status);p(new _e(B,q.message))}else p(new _e(re.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new _e(re.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{he(an,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);he(an,`RPC '${e}' ${u} sending request:`,o),m.send(t,"POST",v,i,15)}))}P_(e,t,i){const o=rm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=nA(),d=tA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=a.join("");he(an,`Creating RPC '${e}' stream ${o}: ${v}`,p);const E=u.createWebChannel(v,p);this.T_(E);let S=!1,b=!1;const q=new cM({Ho:G=>{b?he(an,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(S||(he(an,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),he(an,`RPC '${e}' stream ${o} sending:`,G),E.send(G))},Yo:()=>E.close()}),B=(G,te,K)=>{G.listen(te,(W=>{try{K(W)}catch(se){setTimeout((()=>{throw se}),0)}}))};return B(E,Kl.EventType.OPEN,(()=>{b||(he(an,`RPC '${e}' stream ${o} transport opened.`),q.s_())})),B(E,Kl.EventType.CLOSE,(()=>{b||(b=!0,he(an,`RPC '${e}' stream ${o} transport closed`),q.__(),this.I_(E))})),B(E,Kl.EventType.ERROR,(G=>{b||(b=!0,Ar(an,`RPC '${e}' stream ${o} transport errored. Name:`,G.name,"Message:",G.message),q.__(new _e(re.UNAVAILABLE,"The operation could not be completed")))})),B(E,Kl.EventType.MESSAGE,(G=>{var te;if(!b){const K=G.data[0];et(!!K,16349);const W=K,se=(W==null?void 0:W.error)||((te=W[0])===null||te===void 0?void 0:te.error);if(se){he(an,`RPC '${e}' stream ${o} received error:`,se);const de=se.status;let ue=(function(N){const D=Pt[N];if(D!==void 0)return UA(D)})(de),M=se.message;ue===void 0&&(ue=re.INTERNAL,M="Unknown error status: "+de+" with message "+se.message),b=!0,q.__(new _e(ue,M)),E.close()}else he(an,`RPC '${e}' stream ${o} received:`,K),q.a_(K)}})),B(d,eA.STAT_EVENT,(G=>{G.stat===Kp.PROXY?he(an,`RPC '${e}' stream ${o} detected buffering proxy`):G.stat===Kp.NOPROXY&&he(an,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.o_()}),0),q}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function kp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(n){return new m2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="PersistentStream";class XA{constructor(e,t,i,o,a,u,d,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WA(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(_s(t.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.b_===t&&this.W_(i,o)}),(i=>{e((()=>{const o=new _e(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)}))}))}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{i((()=>this.G_(o)))})),this.stream.onMessage((o=>{i((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return he(mT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(he(mT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fM extends XA{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=_2(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Di(u.readTime):Re.min()})(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=im(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=jp(p)?{documents:E2(a,p)}:{query:S2(a,p).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=qA(a,u.resumeToken);const m=em(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Re.min())>0){d.readTime=Ld(a,u.snapshotVersion.toTimestamp());const m=em(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const i=C2(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=im(this.serializer),t.removeTarget=e,this.k_(t)}}class hM extends XA{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=T2(e.writeResults,e.commitTime),i=Di(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=im(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>v2(this.serializer,i)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{}class mM extends pM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,tm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(re.UNKNOWN,a.toString())}))}Jo(e,t,i,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,tm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(re.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class gM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_s(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="RemoteStore";class yM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((u=>{i.enqueueAndForget((async()=>{wo(this)&&(he(To,"Restarting streams for network reachability change."),await(async function(p){const m=xe(p);m.Ia.add(4),await Ru(m),m.Aa.set("Unknown"),m.Ia.delete(4),await lf(m)})(this))}))})),this.Aa=new gM(i,o)}}async function lf(n){if(wo(n))for(const e of n.da)await e(!0)}async function Ru(n){for(const e of n.da)await e(!1)}function jA(n,e){const t=xe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ng(t)?tg(t):Ua(t).x_()&&eg(t,e))}function Zm(n,e){const t=xe(n),i=Ua(t);t.Ta.delete(e),i.x_()&&ZA(t,e),t.Ta.size===0&&(i.x_()?i.B_():wo(t)&&t.Aa.set("Unknown"))}function eg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ua(n).H_(e)}function ZA(n,e){n.Ra.$e(e),Ua(n).Y_(e)}function tg(n){n.Ra=new d2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ua(n).start(),n.Aa.aa()}function ng(n){return wo(n)&&!Ua(n).M_()&&n.Ta.size>0}function wo(n){return xe(n).Ia.size===0}function eC(n){n.Ra=void 0}async function _M(n){n.Aa.set("Online")}async function vM(n){n.Ta.forEach(((e,t)=>{eg(n,e)}))}async function TM(n,e){eC(n),ng(n)?(n.Aa.la(e),tg(n)):n.Aa.set("Unknown")}async function EM(n,e,t){if(n.Aa.set("Online"),e instanceof OA&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ta.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ta.delete(d),o.Ra.removeTarget(d))})(n,e)}catch(i){he(To,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await qd(n,i)}else if(e instanceof _d?n.Ra.Ye(e):e instanceof LA?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Re.min()))try{const i=await QA(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,m)=>{const v=a.Ta.get(p);if(!v)return;a.Ta.set(p,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),ZA(a,p);const E=new yr(v.target,p,m,v.sequenceNumber);eg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){he(To,"Failed to raise snapshot:",i),await qd(n,i)}}async function qd(n,e,t){if(!Va(e))throw e;n.Ia.add(1),await Ru(n),n.Aa.set("Offline"),t||(t=()=>QA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(To,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await lf(n)}))}function tC(n,e){return e().catch((t=>qd(n,t,e)))}async function uf(n){const e=xe(n),t=br(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qm;for(;SM(e);)try{const o=await iM(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,AM(e,o)}catch(o){await qd(e,o)}nC(e)&&iC(e)}function SM(n){return wo(n)&&n.Pa.length<10}function AM(n,e){n.Pa.push(e);const t=br(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function nC(n){return wo(n)&&!br(n).M_()&&n.Pa.length>0}function iC(n){br(n).start()}async function CM(n){br(n).na()}async function IM(n){const e=br(n);for(const t of n.Pa)e.X_(t.mutations)}async function wM(n,e,t){const i=n.Pa.shift(),o=Ym.from(i,e,t);await tC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await uf(n)}async function RM(n,e){e&&br(n).Z_&&await(async function(i,o){if((function(u){return u2(u)&&u!==re.ABORTED})(o.code)){const a=i.Pa.shift();br(i).N_(),await tC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await uf(i)}})(n,e),nC(n)&&iC(n)}async function gT(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),he(To,"RemoteStore received new credentials");const i=wo(t);t.Ia.add(3),await Ru(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await lf(t)}async function bM(n,e){const t=xe(n);e?(t.Ia.delete(2),await lf(t)):e||(t.Ia.add(2),await Ru(t),t.Aa.set("Unknown"))}function Ua(n){return n.Va||(n.Va=(function(t,i,o){const a=xe(t);return a.ia(),new fM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:_M.bind(null,n),e_:vM.bind(null,n),n_:TM.bind(null,n),J_:EM.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),ng(n)?tg(n):n.Aa.set("Unknown")):(await n.Va.stop(),eC(n))}))),n.Va}function br(n){return n.ma||(n.ma=(function(t,i,o){const a=xe(t);return a.ia(),new hM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:CM.bind(null,n),n_:RM.bind(null,n),ea:IM.bind(null,n),ta:wM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await uf(n)):(await n.ma.stop(),n.Pa.length>0&&(he(To,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new ig(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(n,e){if(_s("AsyncQueue",`${e}: ${n}`),Va(n))return new _e(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{static emptySet(e){return new Aa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=$l(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Aa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.fa=new gt(Ee.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ie(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ma{constructor(e,t,i,o,a,u,d,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ma(e,t,Aa.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class NM{constructor(){this.queries=_T(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=xe(t),a=o.queries;o.queries=_T(),a.forEach(((u,d)=>{for(const p of d.wa)p.onError(i)}))})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function _T(){return new Co((n=>AA(n)),tf)}async function MM(n,e){const t=xe(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(i=2):(a=new xM,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=sg(u,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&rg(t)}async function DM(n,e){const t=xe(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function PM(n,e){const t=xe(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(o)&&(i=!0);u.ya=o}}i&&rg(t)}function kM(n,e,t){const i=xe(n),o=i.queries.get(e);if(o)for(const a of o.wa)a.onError(t);i.queries.delete(e)}function rg(n){n.Da.forEach((e=>{e.next()}))}var om,vT;(vT=om||(om={})).Fa="default",vT.Cache="cache";class VM{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ma(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.key=e}}class rC{constructor(e){this.key=e}}class UM{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ze(),this.mutatedKeys=ze(),this.Xa=CA(e),this.eu=new Aa(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new yT,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const S=o.get(v),b=nf(this.query,E)?E:null,q=!!S&&this.mutatedKeys.has(S.key),B=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let G=!1;S&&b?S.data.isEqual(b.data)?q!==B&&(i.track({type:3,doc:b}),G=!0):this.iu(S,b)||(i.track({type:2,doc:b}),G=!0,(p&&this.Xa(b,p)>0||m&&this.Xa(b,m)<0)&&(d=!0)):!S&&b?(i.track({type:0,doc:b}),G=!0):S&&!b&&(i.track({type:1,doc:S}),G=!0,(p||m)&&(d=!0)),G&&(b?(u=u.add(b),a=B?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{eu:u,ru:i,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,E)=>(function(b,q){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{At:G})}};return B(b)-B(q)})(v.type,E.type)||this.Xa(v.doc,E.doc))),this.su(i),o=o!=null&&o;const d=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,m=p!==this.Ya;return this.Ya=p,u.length!==0||m?{snapshot:new Ma(this.query,e.eu,a,u,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new yT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ze(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const t=[];return e.forEach((i=>{this.Za.has(i)||t.push(new rC(i))})),this.Za.forEach((i=>{e.has(i)||t.push(new sC(i))})),t}uu(e){this.Ha=e.qs,this.Za=ze();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ma.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const og="SyncEngine";class LM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class OM{constructor(e){this.key=e,this.lu=!1}}class qM{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Co((d=>AA(d)),tf),this.Tu=new Map,this.Iu=new Set,this.du=new gt(Ee.comparator),this.Eu=new Map,this.Au=new Qm,this.Ru={},this.Vu=new Map,this.mu=Na.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function BM(n,e,t=!0){const i=dC(n);let o;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await oC(i,e,t,!0),o}async function FM(n,e){const t=dC(n);await oC(t,e,!0,!1)}async function oC(n,e,t,i){const o=await sM(n.localStore,Mi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await HM(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&jA(n.remoteStore,o),d}async function HM(n,e,t,i,o){n.gu=(E,S,b)=>(async function(B,G,te,K){let W=G.view.nu(te);W.Ds&&(W=await dT(B.localStore,G.query,!1).then((({documents:M})=>G.view.nu(M,W))));const se=K&&K.targetChanges.get(G.targetId),de=K&&K.targetMismatches.get(G.targetId)!=null,ue=G.view.applyChanges(W,B.isPrimaryClient,se,de);return ET(B,G.targetId,ue._u),ue.snapshot})(n,E,S,b);const a=await dT(n.localStore,e,!0),u=new UM(e,a.qs),d=u.nu(a.documents),p=wu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,p);ET(n,t,m._u);const v=new LM(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function zM(n,e,t){const i=xe(n),o=i.Pu.get(e),a=i.Tu.get(o.targetId);if(a.length>1)return i.Tu.set(o.targetId,a.filter((u=>!tf(u,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await sm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Zm(i.remoteStore,o.targetId),am(i,o.targetId)})).catch(ka)):(am(i,o.targetId),await sm(i.localStore,o.targetId,!0))}async function GM(n,e){const t=xe(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Zm(t.remoteStore,i.targetId))}async function JM(n,e,t){const i=jM(n);try{const o=await(function(u,d){const p=xe(u),m=ft.now(),v=d.reduce(((b,q)=>b.add(q.key)),ze());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let q=vs(),B=ze();return p.Os.getEntries(b,v).next((G=>{q=G,q.forEach(((te,K)=>{K.isValidDocument()||(B=B.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(b,q))).next((G=>{E=G;const te=[];for(const K of d){const W=s2(K,E.get(K.key).overlayedDocument);W!=null&&te.push(new Io(K.key,W,gA(W.value.mapValue),ms.exists(!0)))}return p.mutationQueue.addMutationBatch(b,m,te,d)})).next((G=>{S=G;const te=G.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(b,G.batchId,te)}))})).then((()=>({batchId:S.batchId,changes:wA(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let m=u.Ru[u.currentUser.toKey()];m||(m=new gt(Ue)),m=m.insert(d,p),u.Ru[u.currentUser.toKey()]=m})(i,o.batchId,t),await bu(i,o.changes),await uf(i.remoteStore)}catch(o){const a=sg(o,"Failed to persist write");t.reject(a)}}async function aC(n,e){const t=xe(n);try{const i=await tM(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Eu.get(a);u&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.lu=!0:o.modifiedDocuments.size>0?et(u.lu,14607):o.removedDocuments.size>0&&(et(u.lu,42227),u.lu=!1))})),await bu(t,i,e)}catch(i){await ka(i)}}function TT(n,e,t){const i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=xe(u);p.onlineState=d;let m=!1;p.queries.forEach(((v,E)=>{for(const S of E.wa)S.va(d)&&(m=!0)})),m&&rg(p)})(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YM(n,e,t){const i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),a=o&&o.key;if(a){let u=new gt(Ee.comparator);u=u.insert(a,un.newNoDocument(a,Re.min()));const d=ze().add(a),p=new of(Re.min(),new Map,new gt(Ue),u,d);await aC(i,p),i.du=i.du.remove(a),i.Eu.delete(e),ag(i)}else await sm(i.localStore,e,!1).then((()=>am(i,e,t))).catch(ka)}async function KM(n,e){const t=xe(n),i=e.batch.batchId;try{const o=await eM(t.localStore,e);uC(t,i,null),lC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await bu(t,o)}catch(o){await ka(o)}}async function $M(n,e,t){const i=xe(n);try{const o=await(function(u,d){const p=xe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,d).next((E=>(et(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(i.localStore,e);uC(i,e,t),lC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await bu(i,o)}catch(o){await ka(o)}}function lC(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function uC(n,e,t){const i=xe(n);let o=i.Ru[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((i=>{n.Au.containsKey(i)||cC(n,i)}))}function cC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zm(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ag(n))}function ET(n,e,t){for(const i of t)i instanceof sC?(n.Au.addReference(i.key,e),QM(n,i)):i instanceof rC?(he(og,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||cC(n,i.key)):Ie(19791,{yu:i})}function QM(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(he(og,"New document in limbo: "+t),n.Iu.add(i),ag(n))}function ag(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Ee(mt.fromString(e)),i=n.mu.next();n.Eu.set(i,new OM(t)),n.du=n.du.insert(t,i),jA(n.remoteStore,new yr(Mi(Gm(t.path)),i,"TargetPurposeLimboResolution",Xd.ue))}}async function bu(n,e,t){const i=xe(n),o=[],a=[],u=[];i.Pu.isEmpty()||(i.Pu.forEach(((d,p)=>{u.push(i.gu(p,e,t).then((m=>{var v;if((m||t)&&i.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){o.push(m);const E=Xm.Es(p.targetId,m);a.push(E)}})))})),await Promise.all(u),i.hu.J_(o),await(async function(p,m){const v=xe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(m,(S=>ie.forEach(S.Is,(b=>v.persistence.referenceDelegate.addReference(E,S.targetId,b))).next((()=>ie.forEach(S.ds,(b=>v.persistence.referenceDelegate.removeReference(E,S.targetId,b)))))))))}catch(E){if(!Va(E))throw E;he(jm,"Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const b=v.Fs.get(S),q=b.snapshotVersion,B=b.withLastLimboFreeSnapshotVersion(q);v.Fs=v.Fs.insert(S,B)}}})(i.localStore,a))}async function WM(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){he(og,"User change. New user:",e.toKey());const i=await $A(t.localStore,e);t.currentUser=e,(function(a,u){a.Vu.forEach((d=>{d.forEach((p=>{p.reject(new _e(re.CANCELLED,u))}))})),a.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bu(t,i.Bs)}}function XM(n,e){const t=xe(n),i=t.Eu.get(e);if(i&&i.lu)return ze().add(i.key);{let o=ze();const a=t.Tu.get(e);if(!a)return o;for(const u of a){const d=t.Pu.get(u);o=o.unionWith(d.view.tu)}return o}}function dC(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YM.bind(null,e),e.hu.J_=PM.bind(null,e.eventManager),e.hu.pu=kM.bind(null,e.eventManager),e}function jM(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$M.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=af(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Z2(this.persistence,new W2,e.initialUser,this.serializer)}Du(e){return new KA(Wm.Vi,this.serializer)}bu(e){return new oM}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class ZM extends Bd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){et(this.persistence.referenceDelegate instanceof Od,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new V2(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new KA((i=>Od.Vi(i,t)),this.serializer)}}class lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WM.bind(null,this.syncEngine),await bM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NM})()}createDatastore(e){const t=af(e.databaseInfo.databaseId),i=(function(a){return new dM(a)})(e.databaseInfo);return(function(a,u,d,p){return new mM(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new yM(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>TT(this.syncEngine,t,0)),(function(){return pT.C()?new pT:new aM})())}createSyncEngine(e,t){return(function(o,a,u,d,p,m,v){const E=new qM(o,a,u,d,p,m);return v&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=xe(o);he(To,"RemoteStore shutting down."),a.Ia.add(5),await Ru(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lm.provider={build:()=>new lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class tD{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=ln.UNAUTHENTICATED,this.clientId=Lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{he(xr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(he(xr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Vp(n,e){n.asyncQueue.verifyOperationInProgress(),he(xr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await $A(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>{Ar("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{Ar("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),n._offlineComponents=e}async function ST(n,e){n.asyncQueue.verifyOperationInProgress();const t=await nD(n);he(xr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>gT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>gT(e.remoteStore,o))),n._onlineComponents=e}async function nD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(xr,"Using user provided OfflineComponentProvider");try{await Vp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ar("Error using user provided cache. Falling back to memory cache: "+t),await Vp(n,new Bd)}}else he(xr,"Using default OfflineComponentProvider"),await Vp(n,new ZM(void 0));return n._offlineComponents}async function fC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(xr,"Using user provided OnlineComponentProvider"),await ST(n,n._uninitializedComponentsProvider._online)):(he(xr,"Using default OnlineComponentProvider"),await ST(n,new lm))),n._onlineComponents}function iD(n){return fC(n).then((e=>e.syncEngine))}async function sD(n){const e=await fC(n),t=e.eventManager;return t.onListen=BM.bind(null,e.syncEngine),t.onUnlisten=zM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GM.bind(null,e.syncEngine),t}function rD(n,e,t={}){const i=new Er;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,m){const v=new eD({next:S=>{v.Ou(),u.enqueueAndForget((()=>DM(a,E)));const b=S.docs.has(d);!b&&S.fromCache?m.reject(new _e(re.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&S.fromCache&&p&&p.source==="server"?m.reject(new _e(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new VM(Gm(d.path),v,{includeMetadataChanges:!0,ka:!0});return MM(a,E)})(await sD(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firestore.googleapis.com",CT=!0;class IT{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pC,this.ssl=CT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:CT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P2)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lg{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new aN;switch(i.type){case"firstParty":return new dN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=AT.get(t);i&&(he("ComponentProvider","Removing Datastore"),AT.delete(t),i.terminate())})(this),Promise.resolve()}}function oD(n,e,t,i={}){var o;n=cu(n,lg);const a=Nr(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(Tm(`https://${p}`),Em("Firestore",!0)),u.host!==pC&&u.host!==p&&Ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:p,ssl:a,emulatorOptions:i});if(!mo(m,d)&&(n._setSettings(m),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=ln.MOCK_USER;else{v=fS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ln(S)}n._authCredentials=new lN(new sA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ug(this.firestore,e,this._query)}}class Jt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Cu(t,Jt._jsonSchema))return new Jt(e,i||null,new Ee(mt.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:kt("string",Jt._jsonSchemaVersion),referencePath:kt("string")};class yu extends ug{constructor(e,t,i){super(e,t,Gm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Ee(e))}withConverter(e){return new yu(this.firestore,e,this._path)}}function cf(n,e,...t){if(n=tn(n),arguments.length===1&&(e=Lm.newId()),gN("doc","path",e),n instanceof lg){const i=mt.fromString(e,...t);return q0(i),new Jt(n,null,new Ee(i))}{if(!(n instanceof Jt||n instanceof yu))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return q0(i),new Jt(n.firestore,n instanceof yu?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="AsyncQueue";class RT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WA(this,"async_queue_retry"),this.oc=()=>{const i=kp();i&&he(wT,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=kp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=kp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Er;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Va(e))throw e;he(wT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,_s("INTERNAL UNHANDLED ERROR: ",bT(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=ig.createAndSchedule(this,e,t,i,(a=>this.lc(a)));return this.ec.push(o),o}ac(){this.tc&&Ie(47125,{hc:bT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function bT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class cg extends lg{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new RT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RT(e),this._firestoreClient=void 0,await e}}}function aD(n,e){const t=typeof n=="object"?n:Cm(),i=typeof n=="string"?n:Md,o=Kd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=uS("firestore");a&&oD(o,...a)}return o}function mC(n){if(n._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lD(n),n._firestoreClient}function lD(n){var e,t,i;const o=n._freezeSettings(),a=(function(d,p,m,v){return new bN(d,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,hC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new tD(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ei(nn.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ei(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cu(e,ei._jsonSchema))return ei.fromBase64String(e.bytes)}}ei._jsonSchemaVersion="firestore/bytes/1.0",ei._jsonSchema={type:kt("string",ei._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Cu(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:kt("string",Pi._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cu(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ki(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:kt("string",ki._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=/^__.*__$/;class cD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Io(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}function yC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ec:n})}}class fg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(yC(this.Ec)&&uD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class dD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||af(e)}Dc(e,t,i,o=!1){return new fg({Ec:e,methodName:t,bc:i,path:en.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fD(n){const e=n._freezeSettings(),t=af(n._databaseId);return new dD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hD(n,e,t,i,o,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);EC("Data must be an object, but it was:",u,i);const d=vC(i,u);let p,m;if(a.merge)p=new fi(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const S=pD(e,E,t);if(!u.contains(S))throw new _e(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);gD(v,S)||v.push(S)}p=new fi(v),m=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,m=u.fieldTransforms;return new cD(new Zn(d),p,m)}function _C(n,e){if(TC(n=tn(n)))return EC("Unsupported field value:",e,n),vC(n,e);if(n instanceof gC)return(function(i,o){if(!yC(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=_C(d,o.yc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return jN(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ft.fromDate(i);return{timestampValue:Ld(o.serializer,a)}}if(i instanceof ft){const a=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ld(o.serializer,a)}}if(i instanceof Pi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ei)return{bytesValue:qA(o.serializer,i._byteString)};if(i instanceof Jt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:$m(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ki)return(function(u,d){return{mapValue:{fields:{[pA]:{stringValue:mA},[Dd]:{arrayValue:{values:u.toArray().map((m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Jm(d.serializer,m)}))}}}}}})(i,o);throw o.wc(`Unsupported field value: ${Om(i)}`)})(n,e)}function vC(n,e){const t={};return lA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(n,((i,o)=>{const a=_C(o,e.Vc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function TC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Pi||n instanceof ei||n instanceof Jt||n instanceof gC||n instanceof ki)}function EC(n,e,t){if(!TC(t)||!oA(t)){const i=Om(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function pD(n,e,t){if((e=tn(e))instanceof dg)return e._internalPath;if(typeof e=="string")return SC(n,e);throw Fd("Field path arguments must be of type string or ",n,!1,void 0,t)}const mD=new RegExp("[~\\*/\\[\\]]");function SC(n,e,t){if(e.search(mD)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dg(...e.split("."))._internalPath}catch{throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fd(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new _e(re.INVALID_ARGUMENT,d+n+p)}function gD(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(CC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yD extends AC{data(){return super.data()}}function CC(n,e){return typeof e=="string"?SC(n,e):e instanceof dg?e._internalPath:e._delegate._internalPath}class _D{convertValue(e,t="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ao(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Dd].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((u=>wt(u.doubleValue)));return new ki(a)}convertGeoPoint(e){return new Pi(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Zd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){const t=Ir(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mt.fromString(e);et(JA(i),9688,{name:e});const o=new hu(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return o.isEqual(t)||_s(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Wl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ho extends AC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(CC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ho._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",ho._jsonSchema={type:kt("string",ho._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class vd extends ho{data(e={}){return super.data(e)}}class su{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Wl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new vd(this._firestore,this._userDataWriter,i.key,i,new Wl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new vd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Wl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new vd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Wl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:TD(d.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=su._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(n){n=cu(n,Jt);const e=cu(n.firestore,cg);return rD(mC(e),n._key).then((t=>AD(e,n,t)))}su._jsonSchemaVersion="firestore/querySnapshot/1.0",su._jsonSchema={type:kt("string",su._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class ED extends _D{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function wC(n,e,t){n=cu(n,Jt);const i=cu(n.firestore,cg),o=vD(n.converter,e);return SD(i,[hD(fD(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,ms.none())])}function SD(n,e){return(function(i,o){const a=new Er;return i.asyncQueue.enqueueAndForget((async()=>JM(await iD(i),o,a))),a.promise})(mC(n),e)}function AD(n,e,t){const i=t.docs.get(e._key),o=new ED(n);return new ho(n,o,e._key,i,new Wl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Pa=o})(So),go(new Sr("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new cg(new uN(i.getProvider("auth-internal")),new fN(u,i.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(m.options.projectId,v)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),xi(k0,V0,e),xi(k0,V0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="firebasestorage.googleapis.com",bC="storageBucket",CD=120*1e3,ID=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends Li{constructor(e,t,i=0){super(Up(e),`Firebase Storage: ${t} (${Up(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Up(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Et;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Et||(Et={}));function Up(n){return"storage/"+n}function hg(){const n="An unknown error occurred, please check the error payload for server response.";return new St(Et.UNKNOWN,n)}function wD(n){return new St(Et.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function RD(n){return new St(Et.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function bD(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(Et.UNAUTHENTICATED,n)}function xD(){return new St(Et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ND(n){return new St(Et.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function MD(){return new St(Et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DD(){return new St(Et.CANCELED,"User canceled the upload/download.")}function PD(n){return new St(Et.INVALID_URL,"Invalid URL '"+n+"'.")}function kD(n){return new St(Et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function VD(){return new St(Et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bC+"' property when initializing the app?")}function UD(){return new St(Et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function LD(){return new St(Et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function OD(n){return new St(Et.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function um(n){return new St(Et.INVALID_ARGUMENT,n)}function xC(){return new St(Et.APP_DELETED,"The Firebase app was deleted.")}function qD(n){return new St(Et.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ru(n,e){return new St(Et.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function zl(n){throw new St(Et.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=qn.makeFromUrl(e,t)}catch{return new qn(e,"")}if(i.path==="")return i;throw kD(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),p={bucket:1,path:3};function m(se){se.path_=decodeURIComponent(se.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",b=new RegExp(`^https?://${E}/${v}/b/${o}/o${S}`,"i"),q={bucket:1,path:3},B=t===RC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,G="([^?#]*)",te=new RegExp(`^https?://${B}/${o}/${G}`,"i"),W=[{regex:d,indices:p,postModify:a},{regex:b,indices:q,postModify:m},{regex:te,indices:{bucket:1,path:2},postModify:m}];for(let se=0;se<W.length;se++){const de=W[se],ue=de.regex.exec(e);if(ue){const M=ue[de.indices.bucket];let x=ue[de.indices.path];x||(x=""),i=new qn(M,x),de.postModify(i);break}}if(i==null)throw PD(e);return i}}class BD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function p(){return d===2}let m=!1;function v(...G){m||(m=!0,e.apply(null,G))}function E(G){o=setTimeout(()=>{o=null,n(b,p())},G)}function S(){a&&clearTimeout(a)}function b(G,...te){if(m){S();return}if(G){S(),v.call(null,G,...te);return}if(p()||u){S(),v.call(null,G,...te);return}i<64&&(i*=2);let W;d===1?(d=2,W=0):W=(i+Math.random())*1e3,E(W)}let q=!1;function B(G){q||(q=!0,S(),!m&&(o!==null?(G||(d=2),clearTimeout(o),E(0)):G||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,B(!0)},t),B}function HD(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(n){return n!==void 0}function GD(n){return typeof n=="object"&&!Array.isArray(n)}function pg(n){return typeof n=="string"||n instanceof String}function xT(n){return mg()&&n instanceof Blob}function mg(){return typeof Blob<"u"}function NT(n,e,t,i){if(i<e)throw um(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw um(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function NC(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var po;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(po||(po={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t,i,o,a,u,d,p,m,v,E,S=!0,b=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,B)=>{this.resolve_=q,this.reject_=B,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new ld(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const p=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===po.NO_ERROR,p=a.getStatus();if(!d||JD(p,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===po.ABORT;i(!1,new ld(!1,null,v));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new ld(m,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());zD(p)?a(p):a()}catch(p){u(p)}else if(d!==null){const p=hg();p.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,p)):u(p)}else if(o.canceled){const p=this.appDelete_?xC():DD();u(p)}else{const p=MD();u(p)}};this.canceled_?t(!1,new ld(!1,null,!0)):this.backoffId_=FD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ld{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function KD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function $D(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QD(n,e){e&&(n["X-Firebase-GMPID"]=e)}function WD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function XD(n,e,t,i,o,a,u=!0,d=!1){const p=NC(n.urlParams),m=n.url+p,v=Object.assign({},n.headers);return QD(v,e),KD(v,t),$D(v,a),WD(v,i),new YD(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ZD(...n){const e=jD();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(mg())return new Blob(n);throw new St(Et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function eP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(n){if(typeof atob>"u")throw OD("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lp{constructor(e,t){this.data=e,this.contentType=t||null}}function MC(n,e){switch(n){case hi.RAW:return new Lp(DC(e));case hi.BASE64:case hi.BASE64URL:return new Lp(PC(n,e));case hi.DATA_URL:return new Lp(iP(e),sP(e))}throw hg()}function DC(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=n.charCodeAt(++t);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function nP(n){let e;try{e=decodeURIComponent(n)}catch{throw ru(hi.DATA_URL,"Malformed data URL.")}return DC(e)}function PC(n,e){switch(n){case hi.BASE64:{const o=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(o||a)throw ru(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case hi.BASE64URL:{const o=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(o||a)throw ru(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=tP(e)}catch(o){throw o.message.includes("polyfill")?o:ru(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class kC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ru(hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=rP(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function iP(n){const e=new kC(n);return e.base64?PC(hi.BASE64,e.rest):nP(e.rest)}function sP(n){return new kC(n).contentType}function rP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t){let i=0,o="";xT(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(xT(this.data_)){const i=this.data_,o=eP(i,e,t);return o===null?null:new gr(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new gr(i,!0)}}static getBlob(...e){if(mg()){const t=e.map(i=>i instanceof gr?i.data_:i);return new gr(ZD.apply(null,t))}else{const t=e.map(u=>pg(u)?MC(hi.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const o=new Uint8Array(i);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)o[a++]=u[d]}),new gr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(n){let e;try{e=JSON.parse(n)}catch{return null}return GD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function aP(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function UC(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n,e){return e}class Tn{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||lP}}let ud=null;function uP(n){return!pg(n)||n.length<2?n:UC(n)}function LC(){if(ud)return ud;const n=[];n.push(new Tn("bucket")),n.push(new Tn("generation")),n.push(new Tn("metageneration")),n.push(new Tn("name","fullPath",!0));function e(a,u){return uP(u)}const t=new Tn("name");t.xform=e,n.push(t);function i(a,u){return u!==void 0?Number(u):u}const o=new Tn("size");return o.xform=i,n.push(o),n.push(new Tn("timeCreated")),n.push(new Tn("updated")),n.push(new Tn("md5Hash",null,!0)),n.push(new Tn("cacheControl",null,!0)),n.push(new Tn("contentDisposition",null,!0)),n.push(new Tn("contentEncoding",null,!0)),n.push(new Tn("contentLanguage",null,!0)),n.push(new Tn("contentType",null,!0)),n.push(new Tn("metadata","customMetadata",!0)),ud=n,ud}function cP(n,e){function t(){const i=n.bucket,o=n.fullPath,a=new qn(i,o);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function dP(n,e,t){const i={};i.type="file";const o=t.length;for(let a=0;a<o;a++){const u=t[a];i[u.local]=u.xform(i,e[u.server])}return cP(i,n),i}function OC(n,e,t){const i=VC(e);return i===null?null:dP(n,i,t)}function fP(n,e,t,i){const o=VC(e);if(o===null||!pg(o.downloadTokens))return null;const a=o.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const v=n.bucket,E=n.fullPath,S="/b/"+u(v)+"/o/"+u(E),b=gg(S,t,i),q=NC({alt:"media",token:m});return b+q})[0]}function hP(n,e){const t={},i=e.length;for(let o=0;o<i;o++){const a=e[o];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class qC{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(n){if(!n)throw hg()}function pP(n,e){function t(i,o){const a=OC(n,o,e);return BC(a!==null),a}return t}function mP(n,e){function t(i,o){const a=OC(n,o,e);return BC(a!==null),fP(a,o,n.host,n._protocol)}return t}function FC(n){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=xD():o=bD():t.getStatus()===402?o=RD(n.bucket):t.getStatus()===403?o=ND(n.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function gP(n){const e=FC(n);function t(i,o){let a=e(i,o);return i.getStatus()===404&&(a=wD(n.path)),a.serverResponse=o.serverResponse,a}return t}function yP(n,e,t){const i=e.fullServerUrl(),o=gg(i,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new qC(o,a,mP(n,t),u);return d.errorHandler=gP(e),d}function _P(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function vP(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=_P(null,e)),i}function TP(n,e,t,i,o){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let W="";for(let se=0;se<2;se++)W=W+Math.random().toString().slice(2);return W}const p=d();u["Content-Type"]="multipart/related; boundary="+p;const m=vP(e,i,o),v=hP(m,t),E="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+p+"--",b=gr.getBlob(E,i,S);if(b===null)throw UD();const q={name:m.fullPath},B=gg(a,n.host,n._protocol),G="POST",te=n.maxUploadRetryTime,K=new qC(B,G,pP(n,t),te);return K.urlParams=q,K.headers=u,K.body=b.uploadData(),K.errorHandler=FC(e),K}class EP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=po.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=po.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=po.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,a){if(this.sent_)throw zl("cannot .send() more than once");if(Nr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class SP extends EP{initXhr(){this.xhr_.responseType="text"}}function HC(){return new SP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t){this._service=e,t instanceof qn?this._location=t:this._location=qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Eo(e,t)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UC(this._location.path)}get storage(){return this._service}get parent(){const e=oP(this._location.path);if(e===null)return null;const t=new qn(this._location.bucket,e);return new Eo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw qD(e)}}function AP(n,e,t){n._throwIfRoot("uploadBytes");const i=TP(n.storage,n._location,LC(),new gr(e,!0),t);return n.storage.makeRequestWithTokens(i,HC).then(o=>({metadata:o,ref:n}))}function CP(n,e,t=hi.RAW,i){n._throwIfRoot("uploadString");const o=MC(t,e),a=Object.assign({},i);return a.contentType==null&&o.contentType!=null&&(a.contentType=o.contentType),AP(n,o.data,a)}function IP(n){n._throwIfRoot("getDownloadURL");const e=yP(n.storage,n._location,LC());return n.storage.makeRequestWithTokens(e,HC).then(t=>{if(t===null)throw LD();return t})}function wP(n,e){const t=aP(n._location.path,e),i=new qn(n._location.bucket,t);return new Eo(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(n){return/^[A-Za-z]+:\/\//.test(n)}function bP(n,e){return new Eo(n,e)}function zC(n,e){if(n instanceof yg){const t=n;if(t._bucket==null)throw VD();const i=new Eo(t,t._bucket);return e!=null?zC(i,e):i}else return e!==void 0?wP(n,e):n}function xP(n,e){if(e&&RP(e)){if(n instanceof yg)return bP(n,e);throw um("To use ref(service, url), the first argument must be a Storage instance.")}else return zC(n,e)}function MT(n,e){const t=e==null?void 0:e[bC];return t==null?null:qn.makeFromBucketSpec(t,n)}function NP(n,e,t,i={}){n.host=`${e}:${t}`;const o=Nr(e);o&&(Tm(`https://${n.host}/b`),Em("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:fS(a,n.app.options.projectId))}class yg{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=RC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CD,this._maxUploadRetryTime=ID,this._requests=new Set,o!=null?this._bucket=qn.makeFromBucketSpec(o,this._host):this._bucket=MT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=MT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eo(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new BD(xC());{const u=XD(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const DT="@firebase/storage",PT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="storage";function MP(n,e,t,i){return n=tn(n),CP(n,e,t,i)}function DP(n){return n=tn(n),IP(n)}function PP(n,e){return n=tn(n),xP(n,e)}function kP(n=Cm(),e){n=tn(n);const i=Kd(n,GC).getImmediate({identifier:e}),o=uS("storage");return o&&VP(i,...o),i}function VP(n,e,t,i={}){NP(n,e,t,i)}function UP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new yg(t,i,o,e,So)}function LP(){go(new Sr(GC,UP,"PUBLIC").setMultipleInstances(!0)),xi(DT,PT,""),xi(DT,PT,"esm2017")}LP();const OP={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},_g=mS(OP),Xl=iN(_g),qP=new ds,df=aD(_g),BP=kP(_g);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let FP,HP;function zP(){return{geminiUrl:FP,vertexUrl:HP}}function GP(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=zP();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Es{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function g(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(a+1),t[m])}else for(const m of p)g(m,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];g(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function JP(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const m=a[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}cm(n,o,a,0,u)}}function cm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])cm(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(m=>!m.startsWith("_")&&!o.has(m)),p={};for(const m of d)p[m]=u[m];for(const[m,v]of Object.entries(p)){const E=[];for(const S of t.slice(i))S==="*"?E.push(m):E.push(S);g(u,E,v)}for(const m of d)delete u[m]}}else{const u=n;a in u&&cm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YP(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function KP(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],QP(u)),e}function $P(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],WP(u)),e}function QP(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>XP(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function WP(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>jP(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function XP(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],sk(t)),e}function jP(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],rk(t)),e}function ZP(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function ek(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function tk(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],nk(u)),e}function nk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function JC(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],ik(u)),e}function ik(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function sk(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],vg(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function rk(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],vg(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(kT||(kT={}));var VT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(VT||(VT={}));var UT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(UT||(UT={}));var ke;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ke||(ke={}));var LT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(LT||(LT={}));var OT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(OT||(OT={}));var qT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(qT||(qT={}));var BT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(BT||(BT={}));var FT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(FT||(FT={}));var HT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(HT||(HT={}));var zT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(zT||(zT={}));var GT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(GT||(GT={}));var JT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(JT||(JT={}));var YT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(YT||(YT={}));var KT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(KT||(KT={}));var $T;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($T||($T={}));var QT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(QT||(QT={}));var WT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(WT||(WT={}));var Hd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Hd||(Hd={}));var XT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(XT||(XT={}));var jT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(jT||(jT={}));var ZT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ZT||(ZT={}));var dm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(dm||(dm={}));var eE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(eE||(eE={}));var tE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(tE||(tE={}));var nE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(nE||(nE={}));var iE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(iE||(iE={}));var sE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sE||(sE={}));var rE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(rE||(rE={}));var oE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(oE||(oE={}));var aE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(aE||(aE={}));var lE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(lE||(lE={}));var uE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(uE||(uE={}));var cE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cE||(cE={}));var dE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(dE||(dE={}));var fE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fE||(fE={}));var hE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(hE||(hE={}));var pE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(pE||(pE={}));var mE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(mE||(mE={}));var gE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(gE||(gE={}));var yE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(yE||(yE={}));var _E;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(_E||(_E={}));var vE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(vE||(vE={}));var TE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(TE||(TE={}));var EE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(EE||(EE={}));var SE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(SE||(SE={}));var AE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(AE||(AE={}));var CE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(CE||(CE={}));var IE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(IE||(IE={}));var wE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wE||(wE={}));var RE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(RE||(RE={}));var bE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(bE||(bE={}));var va;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(va||(va={}));class fm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Gl{get text(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const S of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[b,q]of Object.entries(S))b!=="text"&&b!=="thought"&&(q!==null||q!==void 0)&&E.push(b);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,b]of Object.entries(E))S!=="inlineData"&&(b!==null||b!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,o,a,u,d,p,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class xE{}class NE{}class ok{}class ak{}class lk{}class uk{}class ME{}class DE{}class PE{}class ck{}class zd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new zd;let o;const a=e;return t?o=$P(a):o=KP(a),Object.assign(i,o),i}}class kE{}class VE{}class UE{}class dk{}class fk{}class hk{}class Tg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Tg,a=tk(e);return Object.assign(i,a),i}}class pk{}class mk{}class gk{}class LE{}class yk{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(d))p!=="text"&&p!=="thought"&&m!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class _k{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Eg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Eg,a=JC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function YC(n,e){const t=Xe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function KC(n){return Array.isArray(n)?n.map(e=>Gd(e)):[Gd(n)]}function Gd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function $C(n){const e=Gd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QC(n){const e=Gd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function WC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>OE(e)):[OE(n)]}function hm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function qE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function BE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function cn(n){if(n==null)throw new Error("ContentUnion is required");return hm(n)?n:{role:"user",parts:WC(n)}}function Sg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=cn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=cn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>cn(t)):[cn(e)]}function ti(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(qE(n)||BE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[cn(n)]}const e=[],t=[],i=hm(n[0]);for(const o of n){const a=hm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(qE(o)||BE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:WC(t)}),e}function vk(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(ke).includes(t[0].toUpperCase())?t[0].toUpperCase():ke.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(ke).includes(i.toUpperCase())?i.toUpperCase():ke.TYPE_UNSPECIFIED})}}function Ca(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&vk(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(ke).includes(d.toUpperCase())?d.toUpperCase():ke.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ca(d);else if(i.includes(u)){const p=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}p.push(Ca(m))}e[u]=p}else if(o.includes(u)){const p={};for(const[m,v]of Object.entries(d))p[m]=Ca(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Ag(n){return Ca(n)}function Cg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ig(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function La(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ca(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ca(e.response));return n}function Oa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Tk(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ss(n,e){if(typeof e!="string")throw new Error("name must be a string");return Tk(n,e,"cachedContents")}function XC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function kr(n){return vg(n)}function Ek(n){return n!=null&&typeof n=="object"&&"name"in n}function Sk(n){return n!=null&&typeof n=="object"&&"video"in n}function Ak(n){return n!=null&&typeof n=="object"&&"uri"in n}function jC(n){var e;let t;if(Ek(n)&&(t=n.name),!(Ak(n)&&(t=n.uri,t===void 0))&&!(Sk(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ZC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function eI(n){for(const e of["models","tunedModels","publisherModels"])if(Ck(n,e))return n[e];return[]}function Ck(n,e){return n!==null&&typeof n=="object"&&e in n}function Ik(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function wk(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=Ik(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function tI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Rk(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function nI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function qa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function iI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bk(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>rV(u))),g(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["inlinedEmbedContentResponses"],a)}return e}function xk(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function Nk(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Td(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&g(e,["state"],iI(o));const a=f(n,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=f(n,["metadata","output"]);return m!=null&&g(e,["dest"],bk(nI(m))),e}function pm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["state"]);o!=null&&g(e,["state"],iI(o));const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const E=f(n,["inputConfig"]);E!=null&&g(e,["src"],Mk(E));const S=f(n,["outputConfig"]);S!=null&&g(e,["dest"],xk(nI(S)));const b=f(n,["completionStats"]);return b!=null&&g(e,["completionStats"],b),e}function Mk(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&g(e,["bigqueryUri"],o),e}function Dk(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&g(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>sV(n,u))),g(t,["requests","requests"],a)}return t}function Pk(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&g(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function kk(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Vk(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],qa(n,i)),t}function Uk(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],qa(n,i)),t}function Lk(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],Ok(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function Ok(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function sI(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>fV(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function qk(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Bk(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&g(e,["outputConfig"],Nk(Rk(o))),t}function FE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],Dk(n,tI(n,o)));const a=f(e,["config"]);return a!=null&&qk(a,t),t}function Fk(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["inputConfig"],Pk(tI(n,o)));const a=f(e,["config"]);return a!=null&&Bk(a,t),t}function Hk(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),t}function zk(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["src"]);o!=null&&g(t,["batch","inputConfig"],Wk(n,o));const a=f(e,["config"]);return a!=null&&Hk(a,t),t}function Gk(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],qa(n,i)),t}function Jk(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],qa(n,i)),t}function Yk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function Kk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);return a!=null&&g(e,["error"],a),e}function $k(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Sg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(g(t,["_self"],Qk(o,t)),JP(t,{"requests[].*":"requests[].request.*"})),t}function Qk(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Wk(n,e){const t={},i=f(e,["fileName"]);i!=null&&g(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&g(t,["requests"],$k(n,o)),t}function Xk(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function jk(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],sI(cn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(i,["frequencyPenalty"],q);const B=f(e,["seed"]);B!=null&&g(i,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&g(i,["responseMimeType"],G);const te=f(e,["responseSchema"]);te!=null&&g(i,["responseSchema"],Ag(te));const K=f(e,["responseJsonSchema"]);if(K!=null&&g(i,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let L=W;Array.isArray(L)&&(L=L.map(P=>hV(P))),g(t,["safetySettings"],L)}const se=f(e,["tools"]);if(t!==void 0&&se!=null){let L=Oa(se);Array.isArray(L)&&(L=L.map(P=>pV(La(P)))),g(t,["tools"],L)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],Ss(n,ue));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const x=f(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const N=f(e,["speechConfig"]);if(N!=null&&g(i,["speechConfig"],Cg(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(i,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(i,["imageConfig"],V),i}function Zk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>Lk(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function eV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],qa(n,i)),t}function tV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],qa(n,i)),t}function nV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function iV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function sV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["request","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let d=ti(o);Array.isArray(d)&&(d=d.map(p=>sI(p))),g(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],jk(n,u,f(t,["request"],{}))),t}function rV(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],Zk(t));const i=f(n,["error"]);return i!=null&&g(e,["error"],i),e}function oV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function aV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),t}function lV(n){const e={},t=f(n,["config"]);return t!=null&&oV(t,e),e}function uV(n){const e={},t=f(n,["config"]);return t!=null&&aV(t,e),e}function cV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Td(u))),g(e,["batchJobs"],a)}return e}function dV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>pm(u))),g(e,["batchJobs"],a)}return e}function fV(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],Xk(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],kk(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function hV(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function pV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],nV(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],iV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ts;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ts||(Ts={}));class Ro{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mV extends Es{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Ro(Ts.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=FE(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,m=[];for(const v of p){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const b=E.request;b.systemInstruction=S,E.request=b}m.push(E)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Fk(this.apiClient,e);return d=fe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>pm(v))}else{const m=FE(this.apiClient,e);return d=fe("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Td(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zk(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>Td(p))}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=tV(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>pm(v))}else{const m=eV(this.apiClient,e);return d=fe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Td(v))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=Uk(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=Vk(this.apiClient,e);u=fe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=uV(e);return d=fe("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=dV(v),S=new LE;return Object.assign(S,E),S})}else{const m=lV(e);return d=fe("batches",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=cV(v),S=new LE;return Object.assign(S,E),S})}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=Jk(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Kk(v))}else{const m=Gk(this.apiClient,e);return d=fe("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Yk(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gV(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function HE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>LV(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function yV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=ti(u);Array.isArray(v)&&(v=v.map(E=>HE(E))),g(e,["contents"],v)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],HE(cn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>OV(E))),g(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],m),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function _V(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&g(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=ti(u);Array.isArray(E)&&(E=E.map(S=>S)),g(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],cn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(S=>qV(S))),g(e,["tools"],E)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function vV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],YC(n,i));const o=f(e,["config"]);return o!=null&&yV(o,t),t}function TV(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["model"],YC(n,i));const o=f(e,["config"]);return o!=null&&_V(o,t),t}function EV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Ss(n,i)),t}function SV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Ss(n,i)),t}function AV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function CV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function IV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function wV(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function RV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Ss(n,i)),t}function bV(n,e){const t={},i=f(e,["name"]);return i!=null&&g(t,["_url","name"],Ss(n,i)),t}function xV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function NV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function MV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function DV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function PV(n){const e={},t=f(n,["config"]);return t!=null&&MV(t,e),e}function kV(n){const e={},t=f(n,["config"]);return t!=null&&DV(t,e),e}function VV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function UV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["cachedContents"],a)}return e}function LV(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],IV(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],gV(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function OV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],xV(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],NV(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function qV(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>wV(S))),g(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function BV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function FV(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&g(e,["expireTime"],o),t}function HV(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Ss(n,i));const o=f(e,["config"]);return o!=null&&BV(o,t),t}function zV(n,e){const t={},i=f(e,["name"]);i!=null&&g(t,["_url","name"],Ss(n,i));const o=f(e,["config"]);return o!=null&&FV(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GV extends Es{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Ts.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=TV(this.apiClient,e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=vV(this.apiClient,e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=bV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=RV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=SV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=CV(v),S=new VE;return Object.assign(S,E),S})}else{const m=EV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=AV(v),S=new VE;return Object.assign(S,E),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=zV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=HV(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=kV(e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=UV(v),S=new UE;return Object.assign(S,E),S})}else{const m=PV(e);return d=fe("cachedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=VV(v),S=new UE;return Object.assign(S,E),S})}}}function zE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(n){return this instanceof dt?(this.v=n,this):new dt(n)}function Ia(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(b){return function(q){return Promise.resolve(q).then(b,E)}}function d(b,q){i[b]&&(o[b]=function(B){return new Promise(function(G,te){a.push([b,B,G,te])>1||p(b,B)})},q&&(o[b]=q(o[b])))}function p(b,q){try{m(i[b](q))}catch(B){S(a[0][3],B)}}function m(b){b.value instanceof dt?Promise.resolve(b.value.v).then(v,E):S(a[0][2],b)}function v(b){p("next",b)}function E(b){p("throw",b)}function S(b,q){b(q),a.shift(),a.length&&p(a[0][0],a[0][1])}}function ou(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof zE=="function"?zE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),o(d,p,u.done,u.value)})}}function o(a,u,d,p){Promise.resolve(p).then(function(m){a({value:m,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JV(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:rI(t)}function rI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function YV(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function GE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!rI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class KV{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new $V(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class $V{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),YV(a)}async sendMessage(e){var t;await this.sendPromise;const i=cn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await o,m=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(d=v.slice(E))!==null&&d!==void 0?d:[]);const b=m?[m]:[];this.recordHistory(i,b,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=cn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?GE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,o;return Ia(this,arguments,function*(){var u,d,p,m;const v=[];try{for(var E=!0,S=ou(e),b;b=yield dt(S.next()),u=b.done,!u;E=!0){m=b.value,E=!1;const q=m;if(JV(q)){const B=(o=(i=q.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;B!==void 0&&v.push(B)}yield yield dt(q)}}catch(q){d={error:q}}finally{try{!E&&!u&&(p=S.return)&&(yield dt(p.call(S)))}finally{if(d)throw d.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...GE(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ff extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ff.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QV(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function WV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function XV(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],jC(t)),e}function jV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function ZV(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],jC(t)),e}function eU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function tU(n){const e={},t=f(n,["config"]);return t!=null&&eU(t,e),e}function nU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iU extends Es{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Ts.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tU(e);return a=fe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=nU(p),v=new pk;return Object.assign(v,m),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=QV(e);return a=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=WV(p),v=new mk;return Object.assign(v,m),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZV(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=XV(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=jV(p),v=new gk;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ed(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function sU(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>vU(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function rU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function oU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function aU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=f(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const G=f(n,["routingConfig"]);G!=null&&g(e,["routingConfig"],G);const te=f(n,["seed"]);te!=null&&g(e,["seed"],te);const K=f(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],oI(K));const W=f(n,["stopSequences"]);W!=null&&g(e,["stopSequences"],W);const se=f(n,["temperature"]);se!=null&&g(e,["temperature"],se);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&g(e,["topK"],ue);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function lU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function uU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function cU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Ig(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],sU(cn(q)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=Oa(B);Array.isArray(ue)&&(ue=ue.map(M=>EU(La(M)))),g(e,["setup","tools"],ue)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&g(e,["setup","sessionResumption"],TU(G));const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&g(e,["setup","contextWindowCompression"],se);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function dU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],aU(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],oI(Ig(E)));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],cn(q));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=Oa(B);Array.isArray(ue)&&(ue=ue.map(M=>SU(La(M)))),g(e,["setup","tools"],ue)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&g(e,["setup","sessionResumption"],G);const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&g(e,["setup","contextWindowCompression"],se);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function fU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],cU(o,t)),t}function hU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],dU(o,t)),t}function pU(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function mU(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["weightedPrompts"],i)}return e}function gU(n){const e={},t=f(n,["media"]);if(t!=null){let m=KC(t);Array.isArray(m)&&(m=m.map(v=>Ed(v))),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],Ed(QC(i)));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],Ed($C(a)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function yU(n){const e={},t=f(n,["media"]);if(t!=null){let m=KC(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const i=f(n,["audio"]);i!=null&&g(e,["audio"],QC(i));const o=f(n,["audioStreamEnd"]);o!=null&&g(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&g(e,["video"],$C(a));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function _U(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&g(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&g(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],AU(u));const d=f(n,["goAway"]);d!=null&&g(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);return p!=null&&g(e,["sessionResumptionUpdate"],p),e}function vU(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],rU(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],Ed(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function TU(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oI(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function EU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],lU(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],uU(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function SU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>oU(S))),g(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function AU(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&g(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["promptTokensDetails"],b)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["cacheTokensDetails"],b)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["responseTokensDetails"],b)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let b=E;Array.isArray(b)&&(b=b.map(q=>q)),g(e,["toolUsePromptTokensDetails"],b)}const S=f(n,["trafficType"]);return S!=null&&g(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CU(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function IU(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],wU(i));const o=f(n,["tokenCount"]);o!=null&&g(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&g(e,["index"],p);const m=f(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(b=>b)),g(e,["safetyRatings"],S)}const E=f(n,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function wU(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),g(e,["citations"],i)}return e}function RU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let a=ti(o);Array.isArray(a)&&(a=a.map(u=>u)),g(t,["contents"],a)}return t}function bU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["tokensInfo"],o)}return e}function xU(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&g(e,["statistics"],NU(i)),e}function NU(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function hf(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>VL(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function MU(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function DU(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function PU(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],cn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>dI(d))),g(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],SL(a)),t}function kU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>hf(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&DU(a),t}function VU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&PU(a,t),t}function UU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&g(e,["cachedContentTokenCount"],o),e}function LU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function OU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function qU(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function BU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function FU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function HU(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=f(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const G=f(n,["addWatermark"]);e!==void 0&&G!=null&&g(e,["parameters","addWatermark"],G);const te=f(n,["labels"]);e!==void 0&&te!=null&&g(e,["labels"],te);const K=f(n,["editMode"]);e!==void 0&&K!=null&&g(e,["parameters","editMode"],K);const W=f(n,["baseSteps"]);return e!==void 0&&W!=null&&g(e,["parameters","editConfig","baseSteps"],W),t}function zU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>FL(p))),g(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&HU(u,t),t}function GU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>pf(a))),g(e,["generatedImages"],o)}return e}function JU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function YU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function KU(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let d=Sg(n,o);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&JU(a,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],Xe(n,u)),t}function $U(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Sg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&YU(a,t),t}function QU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function WU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>xU(u))),g(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&g(e,["metadata"],o),e}function XU(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function jU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function ZU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&g(e,["description"],t);const i=f(n,["name"]);i!=null&&g(e,["name"],i);const o=f(n,["parameters"]);o!=null&&g(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function eL(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],hf(cn(o)));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(i,["frequencyPenalty"],q);const B=f(e,["seed"]);B!=null&&g(i,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&g(i,["responseMimeType"],G);const te=f(e,["responseSchema"]);te!=null&&g(i,["responseSchema"],Ag(te));const K=f(e,["responseJsonSchema"]);if(K!=null&&g(i,["responseJsonSchema"],K),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let L=W;Array.isArray(L)&&(L=L.map(P=>HL(P))),g(t,["safetySettings"],L)}const se=f(e,["tools"]);if(t!==void 0&&se!=null){let L=Oa(se);Array.isArray(L)&&(L=L.map(P=>$L(La(P)))),g(t,["tools"],L)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&g(t,["toolConfig"],de),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&g(t,["cachedContent"],Ss(n,ue));const M=f(e,["responseModalities"]);M!=null&&g(i,["responseModalities"],M);const x=f(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const N=f(e,["speechConfig"]);if(N!=null&&g(i,["speechConfig"],Cg(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&g(i,["thinkingConfig"],D);const V=f(e,["imageConfig"]);return V!=null&&g(i,["imageConfig"],V),i}function tL(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&g(t,["systemInstruction"],cn(o));const a=f(e,["temperature"]);a!=null&&g(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&g(i,["topP"],u);const d=f(e,["topK"]);d!=null&&g(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=f(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&g(i,["stopSequences"],v);const E=f(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const S=f(e,["logprobs"]);S!=null&&g(i,["logprobs"],S);const b=f(e,["presencePenalty"]);b!=null&&g(i,["presencePenalty"],b);const q=f(e,["frequencyPenalty"]);q!=null&&g(i,["frequencyPenalty"],q);const B=f(e,["seed"]);B!=null&&g(i,["seed"],B);const G=f(e,["responseMimeType"]);G!=null&&g(i,["responseMimeType"],G);const te=f(e,["responseSchema"]);te!=null&&g(i,["responseSchema"],Ag(te));const K=f(e,["responseJsonSchema"]);K!=null&&g(i,["responseJsonSchema"],K);const W=f(e,["routingConfig"]);W!=null&&g(i,["routingConfig"],W);const se=f(e,["modelSelectionConfig"]);se!=null&&g(i,["modelConfig"],se);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let H=de;Array.isArray(H)&&(H=H.map(ae=>ae)),g(t,["safetySettings"],H)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let H=Oa(ue);Array.isArray(H)&&(H=H.map(ae=>dI(La(ae)))),g(t,["tools"],H)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const x=f(e,["labels"]);t!==void 0&&x!=null&&g(t,["labels"],x);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&g(t,["cachedContent"],Ss(n,N));const D=f(e,["responseModalities"]);D!=null&&g(i,["responseModalities"],D);const V=f(e,["mediaResolution"]);V!=null&&g(i,["mediaResolution"],V);const L=f(e,["speechConfig"]);L!=null&&g(i,["speechConfig"],cI(Cg(L)));const P=f(e,["audioTimestamp"]);P!=null&&g(i,["audioTimestamp"],P);const ot=f(e,["thinkingConfig"]);ot!=null&&g(i,["thinkingConfig"],ot);const ht=f(e,["imageConfig"]);return ht!=null&&g(i,["imageConfig"],ht),i}function JE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>hf(d))),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],eL(n,a,t)),t}function YE(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=ti(o);Array.isArray(u)&&(u=u.map(d=>d)),g(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&g(t,["generationConfig"],tL(n,a,t)),t}function KE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>IU(m))),g(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function $E(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const o=f(n,["createTime"]);o!=null&&g(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&g(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function nL(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(n,["imageSize"]);if(e!==void 0&&b!=null&&g(e,["parameters","sampleImageSize"],b),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function iL(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&g(e,["parameters","includeRaiReason"],S);const b=f(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const q=f(n,["outputMimeType"]);e!==void 0&&q!=null&&g(e,["parameters","outputOptions","mimeType"],q);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&g(e,["parameters","outputOptions","compressionQuality"],B);const G=f(n,["addWatermark"]);e!==void 0&&G!=null&&g(e,["parameters","addWatermark"],G);const te=f(n,["labels"]);e!==void 0&&te!=null&&g(e,["labels"],te);const K=f(n,["imageSize"]);e!==void 0&&K!=null&&g(e,["parameters","sampleImageSize"],K);const W=f(n,["enhancePrompt"]);return e!==void 0&&W!=null&&g(e,["parameters","enhancePrompt"],W),t}function sL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&nL(a,t),t}function rL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&iL(a,t),t}function oL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>_L(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],lI(o)),e}function aL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>pf(u))),g(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&g(e,["positivePromptSafetyAttributes"],uI(o)),e}function lL(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],mf(v));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(b=>a4(b))),g(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function uL(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=f(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","negativePrompt"],S);const b=f(n,["enhancePrompt"]);e!==void 0&&b!=null&&g(e,["parameters","enhancePrompt"],b);const q=f(n,["generateAudio"]);e!==void 0&&q!=null&&g(e,["parameters","generateAudio"],q);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&g(e,["instances[0]","lastFrame"],mi(B));const G=f(n,["referenceImages"]);if(e!==void 0&&G!=null){let W=G;Array.isArray(W)&&(W=W.map(se=>l4(se))),g(e,["instances[0]","referenceImages"],W)}const te=f(n,["mask"]);e!==void 0&&te!=null&&g(e,["instances[0]","mask"],o4(te));const K=f(n,["compressionQuality"]);return e!==void 0&&K!=null&&g(e,["parameters","compressionQuality"],K),t}function cL(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],pL(u)),e}function dL(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],mL(u)),e}function fL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],mf(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],fI(u));const d=f(e,["source"]);d!=null&&gL(d,t);const p=f(e,["config"]);return p!=null&&lL(p,t),t}function hL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&g(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&g(t,["instances[0]","image"],mi(a));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],hI(u));const d=f(e,["source"]);d!=null&&yL(d,t);const p=f(e,["config"]);return p!=null&&uL(p,t),t}function pL(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>TL(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function mL(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>EL(u))),g(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&g(e,["raiMediaFilteredReasons"],o),e}function gL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mf(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],fI(a)),t}function yL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mi(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],hI(a)),t}function _L(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],RL(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&g(e,["safetyAttributes"],lI(o)),e}function pf(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],aI(t));const i=f(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&g(e,["safetyAttributes"],uI(o));const a=f(n,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function vL(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],aI(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(e,["labels"],o)}return e}function TL(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],s4(t)),e}function EL(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],r4(t)),e}function SL(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&g(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=f(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const S=f(n,["responseLogprobs"]);S!=null&&g(e,["responseLogprobs"],S);const b=f(n,["responseMimeType"]);b!=null&&g(e,["responseMimeType"],b);const q=f(n,["responseModalities"]);q!=null&&g(e,["responseModalities"],q);const B=f(n,["responseSchema"]);B!=null&&g(e,["responseSchema"],B);const G=f(n,["routingConfig"]);G!=null&&g(e,["routingConfig"],G);const te=f(n,["seed"]);te!=null&&g(e,["seed"],te);const K=f(n,["speechConfig"]);K!=null&&g(e,["speechConfig"],cI(K));const W=f(n,["stopSequences"]);W!=null&&g(e,["stopSequences"],W);const se=f(n,["temperature"]);se!=null&&g(e,["temperature"],se);const de=f(n,["thinkingConfig"]);de!=null&&g(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&g(e,["topK"],ue);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function AL(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function CL(n,e){const t={},i=f(e,["model"]);return i!=null&&g(t,["_url","name"],Xe(n,i)),t}function IL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function wL(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function RL(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],kr(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function aI(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function mf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],kr(t));const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function mi(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function bL(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],ZC(n,d)),i}function xL(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&g(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],ZC(n,d)),i}function NL(n,e){const t={},i=f(e,["config"]);return i!=null&&bL(n,i,t),t}function ML(n,e){const t={},i=f(e,["config"]);return i!=null&&xL(n,i,t),t}function DL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=eI(o);Array.isArray(a)&&(a=a.map(u=>mm(u))),g(e,["models"],a)}return e}function PL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=eI(o);Array.isArray(a)&&(a=a.map(u=>gm(u))),g(e,["models"],a)}return e}function kL(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&g(e,["dilation"],o),e}function mm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["version"]);a!=null&&g(e,["version"],a);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],QL(u));const d=f(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=f(n,["supportedGenerationMethods"]);return m!=null&&g(e,["supportedActions"],m),e}function gm(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["displayName"]);i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);o!=null&&g(e,["description"],o);const a=f(n,["versionId"]);a!=null&&g(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(S=>XU(S))),g(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&g(e,["labels"],d);const p=f(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],WL(p));const m=f(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),g(e,["checkpoints"],E)}return e}function VL(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],jU(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],CU(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function UL(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],mi(t)),e}function LL(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","editConfig","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const b=f(n,["labels"]);return e!==void 0&&b!=null&&g(e,["labels"],b),t}function OL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["source"]);o!=null&&BL(o,t);const a=f(e,["config"]);return a!=null&&LL(a,t),t}function qL(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>pf(o))),g(e,["generatedImages"],i)}return e}function BL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],mi(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>UL(d))),g(e,["instances[0]","productImages"],u)}return t}function FL(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],mi(t));const i=f(n,["referenceId"]);i!=null&&g(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&g(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],kL(a));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],MU(u));const d=f(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function lI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function uI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&g(e,["contentType"],o),e}function HL(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function zL(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],mi(t)),e}function GL(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function JL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["source"]);o!=null&&KL(o,t);const a=f(e,["config"]);return a!=null&&GL(a,t),t}function YL(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>vL(o))),g(e,["generatedMasks"],i)}return e}function KL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],mi(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],zL(a)),t}function cI(n){const e={},t=f(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=f(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function $L(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],IL(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],wL(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function dI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>ZU(S))),g(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&g(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&g(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&g(e,["googleMaps"],p);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function QL(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function WL(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&g(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&g(e,["updateTime"],o),e}function XL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function jL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function ZL(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","name"],Xe(n,i));const o=f(e,["config"]);return o!=null&&XL(o,t),t}function e4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&jL(o,t),t}function t4(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&g(e,["parameters","sampleCount"],S);const b=f(n,["mode"]);return e!==void 0&&b!=null&&g(e,["parameters","mode"],b),t}function n4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["_url","model"],Xe(n,i));const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],mi(o));const a=f(e,["upscaleFactor"]);a!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&t4(u,t),t}function i4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>pf(a))),g(e,["generatedImages"],o)}return e}function s4(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],kr(i));const o=f(n,["encoding"]);return o!=null&&g(e,["mimeType"],o),e}function r4(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}function o4(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],mi(t));const i=f(n,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function a4(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],mf(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function l4(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],mi(t));const i=f(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function fI(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["encodedVideo"],kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["encoding"],o),e}function hI(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],kr(i));const o=f(n,["mimeType"]);return o!=null&&g(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u4="Content-Type",c4="X-Server-Timeout",d4="User-Agent",ym="x-goog-api-client",f4="1.29.0",h4=`google-genai-sdk/${f4}`,p4="v1beta1",m4="v1beta",QE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class g4{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:p4,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:m4,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&y4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await WE(o),new fm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await WE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Ia(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:p}=yield dt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=a.decode(p,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),b=S.status,q=S.code,B=`got status: ${b}. ${JSON.stringify(E)}`;if(q>=400&&q<600)throw new ff({message:B,status:q})}}catch(E){if(E.name==="ApiError")throw E}u+=m;let v=u.match(QE);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield dt(new fm(S)),u=u.slice(v[0].length),v=u.match(QE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=h4+" "+this.clientOptions.userAgentExtra;return e[d4]=t,e[ym]=t,e[u4]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(c4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},m=this.getFileName(e),v=fe("upload/v1beta/files",p._url),E=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,m,p,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const S=await this.fetchUploadUrl(m,d,p,v,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function WE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new ff({message:o,status:t}):new Error(o)}}function y4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const m=u[p],v=d[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[p]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[p]=m)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _4="mcp_used/unknown";let v4=!1;function pI(n){for(const e of n)if(T4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return v4}function mI(n){var e;const t=(e=n[ym])!==null&&e!==void 0?e:"";n[ym]=(t+` ${_4}`).trimStart()}function T4(n){return n!==null&&typeof n=="object"&&n instanceof wg}function E4(n,e=100){return Ia(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield dt(n.listTools({cursor:i}));for(const u of a.tools)yield yield dt(u),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class wg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new wg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var d=!0,p=(t=void 0,ou(E4(v))),m;m=await p.next(),e=m.done,!e;d=!0){o=m.value,d=!1;const E=o;u.push(E);const S=E.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),wk(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function S4(n,e,t){const i=new _k;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class A4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=w4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(W=>{m=W}),E=e.callbacks,S=function(){m({})},b=this.apiClient,q={onopen:S,onmessage:W=>{S4(b,E.onmessage,W)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(W){}},B=this.webSocketFactory.create(p,I4(u),q);B.connect(),await v;const K={setup:{model:Xe(this.apiClient,e.model)}};return B.send(JSON.stringify(K)),new C4(B,this.apiClient)}}class C4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=mU(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=pU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(va.PLAY)}pause(){this.sendPlaybackControl(va.PAUSE)}stop(){this.sendPlaybackControl(va.STOP)}resetContext(){this.sendPlaybackControl(va.RESET_CONTEXT)}close(){this.conn.close()}}function I4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function w4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function b4(n,e,t){const i=new yk;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=_U(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class x4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new A4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&pI(e.config.tools)&&mI(E);const S=P4(E);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const N=this.apiClient.getApiKey();let D="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",V="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${D}?${V}=${N}`}let b=()=>{};const q=new Promise(N=>{b=N}),B=e.callbacks,G=function(){var N;(N=B==null?void 0:B.onopen)===null||N===void 0||N.call(B),b({})},te=this.apiClient,K={onopen:G,onmessage:N=>{b4(te,B.onmessage,N)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=B==null?void 0:B.onclose)!==null&&i!==void 0?i:function(N){}},W=this.webSocketFactory.create(v,D4(S),K);W.connect(),await q;let se=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const N=this.apiClient.getProject(),D=this.apiClient.getLocation();se=`projects/${N}/locations/${D}/`+se}let de={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Hd.AUDIO]}:e.config.responseModalities=[Hd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const N of ue)if(this.isCallableTool(N)){const D=N;M.push(await D.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const x={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=hU(this.apiClient,x):de=fU(this.apiClient,x),delete de.config,W.send(JSON.stringify(de)),new M4(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const N4={turnComplete:!0};class M4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ti(t.turns),e.isVertexAI()||(i=i.map(o=>hf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(R4)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},N4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:yU(e)}:t={realtimeInput:gU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function D4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function P4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XE=10;function jE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(wa(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function wa(n){return"callTool"in n&&typeof n.callTool=="function"}function k4(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>wa(o)))!==null&&i!==void 0?i:!1}function ZE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(wa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function eS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V4 extends Es{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!k4(t)||jE(t.config))return await this.generateContentInternal(p);const m=ZE(t);if(m.length>0){const B=m.map(G=>`tools[${G}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let v,E;const S=ti(p.contents),b=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:XE;let q=0;for(;q<b&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const B=v.candidates[0].content,G=[];for(const te of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(wa(te)){const W=await te.callTool(v.functionCalls);G.push(...W)}q++,E={role:"user",parts:G},p.contents=ti(p.contents),p.contents.push(B),p.contents.push(E),eS(p.config)&&(S.push(B),S.push(E))}return eS(p.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),jE(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}const i=ZE(t);if(i.length>0){const o=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ro(Ts.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>wa(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&pI(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),mI(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(wa(u)){const d=u,p=await d.tool();for(const m of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:XE;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(m,v,E){var S,b;return Ia(this,arguments,function*(){for(var q,B,G,te;d<a;){u&&(d++,u=!1);const de=yield dt(m.processParamsMaybeAddMcpUsage(E)),ue=yield dt(m.generateContentStreamInternal(de)),M=[],x=[];try{for(var K=!0,W=(B=void 0,ou(ue)),se;se=yield dt(W.next()),q=se.done,!q;K=!0){te=se.value,K=!1;const N=te;if(yield yield dt(N),N.candidates&&(!((S=N.candidates[0])===null||S===void 0)&&S.content)){x.push(N.candidates[0].content);for(const D of(b=N.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(d<a&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(D.functionCall.name)){const V=yield dt(v.get(D.functionCall.name).callTool([D.functionCall]));M.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(N){B={error:N}}finally{try{!K&&!q&&(G=W.return)&&(yield dt(G.call(W)))}finally{if(B)throw B.error}}if(M.length>0){u=!0;const N=new Gl;N.candidates=[{content:{role:"user",parts:M}}],yield yield dt(N);const D=[];D.push(...x),D.push({role:"user",parts:M});const V=ti(E.contents).concat(D);E.contents=V}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=YE(this.apiClient,e);return d=fe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=$E(v),S=new Gl;return Object.assign(S,E),S})}else{const m=JE(this.apiClient,e);return d=fe("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=KE(v),S=new Gl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=YE(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Ia(this,arguments,function*(){var S,b,q,B;try{for(var G=!0,te=ou(E),K;K=yield dt(te.next()),S=K.done,!S;G=!0){B=K.value,G=!1;const W=B,se=$E(yield dt(W.json()));se.sdkHttpResponse={headers:W.headers};const de=new Gl;Object.assign(de,se),yield yield dt(de)}}catch(W){b={error:W}}finally{try{!G&&!S&&(q=te.return)&&(yield dt(q.call(te)))}finally{if(b)throw b.error}}})})}else{const m=JE(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Ia(this,arguments,function*(){var S,b,q,B;try{for(var G=!0,te=ou(E),K;K=yield dt(te.next()),S=K.done,!S;G=!0){B=K.value,G=!1;const W=B,se=KE(yield dt(W.json()));se.sdkHttpResponse={headers:W.headers};const de=new Gl;Object.assign(de,se),yield yield dt(de)}}catch(W){b={error:W}}finally{try{!G&&!S&&(q=te.return)&&(yield dt(q.call(te)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=$U(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=WU(v),S=new xE;return Object.assign(S,E),S})}else{const m=KU(this.apiClient,e);return d=fe("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=QU(v),S=new xE;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=rL(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=aL(v),S=new NE;return Object.assign(S,E),S})}else{const m=sL(this.apiClient,e);return d=fe("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=oL(v),S=new NE;return Object.assign(S,E),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=zU(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=GU(p),v=new ok;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=n4(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=i4(p),v=new ak;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=OL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=qL(p),v=new lk;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=JL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=YL(p),v=new uk;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=CL(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>gm(v))}else{const m=AL(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>mm(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=ML(this.apiClient,e);return d=fe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=PL(v),S=new ME;return Object.assign(S,E),S})}else{const m=NL(this.apiClient,e);return d=fe("{models_url}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=DL(v),S=new ME;return Object.assign(S,E),S})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=e4(this.apiClient,e);return d=fe("{model}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>gm(v))}else{const m=ZL(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>mm(v))}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=qU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=FU(v),S=new DE;return Object.assign(S,E),S})}else{const m=OU(this.apiClient,e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=BU(v),S=new DE;return Object.assign(S,E),S})}}async countTokens(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=VU(this.apiClient,e);return d=fe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=LU(v),S=new PE;return Object.assign(S,E),S})}else{const m=kU(this.apiClient,e);return d=fe("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=UU(v),S=new PE;return Object.assign(S,E),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=RU(this.apiClient,e);return a=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const m=bU(p),v=new ck;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=hL(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const E=dL(v),S=new zd;return Object.assign(S,E),S})}else{const m=fL(this.apiClient,e);return d=fe("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const E=cL(v),S=new zd;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U4 extends Es{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=ek(e);return d=fe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const m=ZP(e);return d=fe("{operationName}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=YP(e);return a=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L4(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function O4(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Y4(a))),g(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&g(e,["role"],i),e}function q4(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&g(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&g(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],J4(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),i}function B4(n,e){const t={},i=f(e,["config"]);return i!=null&&g(t,["config"],q4(n,i,t)),t}function F4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function H4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function z4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function G4(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],Ig(E));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","thinkingConfig"],S);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],b);const q=f(n,["systemInstruction"]);e!==void 0&&q!=null&&g(e,["setup","systemInstruction"],O4(cn(q)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=Oa(B);Array.isArray(ue)&&(ue=ue.map(M=>$4(La(M)))),g(e,["setup","tools"],ue)}const G=f(n,["sessionResumption"]);e!==void 0&&G!=null&&g(e,["setup","sessionResumption"],K4(G));const te=f(n,["inputAudioTranscription"]);e!==void 0&&te!=null&&g(e,["setup","inputAudioTranscription"],te);const K=f(n,["outputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","outputAudioTranscription"],K);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&g(e,["setup","realtimeInputConfig"],W);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&g(e,["setup","contextWindowCompression"],se);const de=f(n,["proactivity"]);return e!==void 0&&de!=null&&g(e,["setup","proactivity"],de),t}function J4(n,e){const t={},i=f(e,["model"]);i!=null&&g(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&g(t,["config"],G4(o,t)),t}function Y4(n){const e={},t=f(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=f(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&g(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&g(e,["fileData"],F4(a));const u=f(n,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const d=f(n,["inlineData"]);d!=null&&g(e,["inlineData"],L4(d));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const m=f(n,["thought"]);m!=null&&g(e,["thought"],m);const v=f(n,["thoughtSignature"]);v!=null&&g(e,["thoughtSignature"],v);const E=f(n,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function K4(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(E=>E)),g(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&g(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&g(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],H4(d));const p=f(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],z4(p));const m=f(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function W4(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=Q4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(m=>u.includes(m)?`generationConfig.${m}`:m));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class X4 extends Es{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=B4(this.apiClient,e);a=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=W4(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j4(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),t}function Z4(n){const e={},t=f(n,["config"]);return t!=null&&j4(t,e),e}function e3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function t3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&e3(i,e),e}function n3(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function i3(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&g(e,["chunkingConfig"],o),t}function s3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const i=f(n,["metadata"]);i!=null&&g(e,["metadata"],i);const o=f(n,["done"]);o!=null&&g(e,["done"],o);const a=f(n,["error"]);a!=null&&g(e,["error"],a);const u=f(n,["response"]);return u!=null&&g(e,["response"],o3(u)),e}function r3(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&g(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&i3(o,e),e}function o3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&g(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&g(e,["documentName"],o),e}function a3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function l3(n){const e={},t=f(n,["config"]);return t!=null&&a3(t,e),e}function u3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["fileSearchStores"],a)}return e}function c3(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),g(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function d3(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&c3(i,e),e}function f3(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function p3(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&h3(i,e),e}function m3(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function g3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&g(e,["_query","pageToken"],o),t}function y3(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&g3(i,e),e}function _3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v3 extends Es{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ro(Ts.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m3(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=p3(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=y3(e);return a=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=_3(p),v=new dk;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T3 extends Es{constructor(e,t=new v3(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Ro(Ts.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Z4(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=n3(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=t3(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=l3(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=u3(p),v=new fk;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=d3(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=f3(p),v=new hk;return Object.assign(v,m),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=r3(e);return a=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const m=s3(p),v=new Tg;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function S3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function A3(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&g(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function C3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec"],tS(b))}else if(o==="PREFERENCE_TUNING"){const b=f(n,["validationDataset"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec"],tS(b))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(d==="PREFERENCE_TUNING"){const b=f(n,["epochCount"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(p==="PREFERENCE_TUNING"){const b=f(n,["learningRateMultiplier"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(m==="PREFERENCE_TUNING"){const b=f(n,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(v==="PREFERENCE_TUNING"){const b=f(n,["adapterSize"]);e!==void 0&&b!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const S=f(n,["beta"]);return e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function I3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&U3(a);const u=f(n,["config"]);return u!=null&&A3(u,t),t}function w3(n,e){const t={},i=f(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&g(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&L3(a,t,e);const u=f(n,["config"]);return u!=null&&C3(u,t,e),t}function R3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function b3(n,e){const t={},i=f(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function x3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function N3(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&g(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),i}function M3(n,e){const t={},i=f(n,["config"]);return i!=null&&x3(i,t),t}function D3(n,e){const t={},i=f(n,["config"]);return i!=null&&N3(i,t),t}function P3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>gI(d))),g(t,["tuningJobs"],u)}return t}function k3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&g(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>_m(d))),g(t,["tuningJobs"],u)}return t}function V3(n,e){const t={},i=f(n,["name"]);i!=null&&g(t,["model"],i);const o=f(n,["name"]);return o!=null&&g(t,["endpoint"],o),t}function U3(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),g(t,["examples","examples"],o)}return t}function L3(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function gI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],XC(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const E=f(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const S=f(n,["_self"]);return S!=null&&g(t,["tunedModel"],V3(S)),t}function _m(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["state"]);a!=null&&g(t,["state"],XC(a));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&g(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=f(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const E=f(n,["description"]);E!=null&&g(t,["description"],E);const S=f(n,["baseModel"]);S!=null&&g(t,["baseModel"],S);const b=f(n,["tunedModel"]);b!=null&&g(t,["tunedModel"],b);const q=f(n,["preTunedModel"]);q!=null&&g(t,["preTunedModel"],q);const B=f(n,["supervisedTuningSpec"]);B!=null&&g(t,["supervisedTuningSpec"],B);const G=f(n,["preferenceOptimizationSpec"]);G!=null&&g(t,["preferenceOptimizationSpec"],G);const te=f(n,["tuningDataStats"]);te!=null&&g(t,["tuningDataStats"],te);const K=f(n,["encryptionSpec"]);K!=null&&g(t,["encryptionSpec"],K);const W=f(n,["partnerModelTuningSpec"]);W!=null&&g(t,["partnerModelTuningSpec"],W);const se=f(n,["customBaseModel"]);se!=null&&g(t,["customBaseModel"],se);const de=f(n,["experiment"]);de!=null&&g(t,["experiment"],de);const ue=f(n,["labels"]);ue!=null&&g(t,["labels"],ue);const M=f(n,["outputUri"]);M!=null&&g(t,["outputUri"],M);const x=f(n,["pipelineJob"]);x!=null&&g(t,["pipelineJob"],x);const N=f(n,["serviceAccount"]);N!=null&&g(t,["serviceAccount"],N);const D=f(n,["tunedModelDisplayName"]);D!=null&&g(t,["tunedModelDisplayName"],D);const V=f(n,["veoTuningSpec"]);return V!=null&&g(t,["veoTuningSpec"],V),t}function O3(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&g(t,["name"],o);const a=f(n,["metadata"]);a!=null&&g(t,["metadata"],a);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const d=f(n,["error"]);return d!=null&&g(t,["error"],d),t}function tS(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&g(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&g(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q3 extends Es{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Ro(Ts.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:dm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=b3(e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>_m(v))}else{const m=R3(e);return d=fe("{name}",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>gI(v))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const m=D3(e);return d=fe("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=k3(v),S=new kE;return Object.assign(S,E),S})}else{const m=M3(e);return d=fe("tunedModels",m._url),p=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const E=P3(v),S=new kE;return Object.assign(S,E),S})}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=S3(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=E3(e);u=fe("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=w3(e,e);return a=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>_m(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=I3(e);return a=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>O3(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const F3=1024*1024*8,H3=3,z3=1e3,G3=2,Jd="x-goog-upload-status";async function J3(n,e,t){var i;const o=await yI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Y3(n,e,t){var i;const o=await yI(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=JC(a),d=new Eg;return Object.assign(d,u),d}async function yI(n,e,t){var i,o;let a=0,u=0,d=new fm(new Response),p="upload";for(a=n.size;u<a;){const m=Math.min(F3,a-u),v=n.slice(u,u+m);u+m>=a&&(p+=", finalize");let E=0,S=z3;for(;E<H3&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Jd]));)E++,await $3(S),S=S*G3;if(u+=m,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Jd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function K3(n){return{size:n.size,type:n.type}}function $3(n){return new Promise(e=>setTimeout(e,n))}class Q3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await J3(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Y3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await K3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W3{create(e,t,i){return new X3(e,t,i)}}class X3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nS="x-goog-api-key";class j3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(nS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(nS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z3="gl-node/";class eO{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=GP(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new j3(this.apiKey);this.apiClient=new g4({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Z3+"web",uploader:new Q3,downloader:new B3}),this.models=new V4(this.apiClient),this.live=new x4(this.apiClient,o,new W3),this.batches=new mV(this.apiClient),this.chats=new KV(this.models,this.apiClient),this.caches=new GV(this.apiClient),this.files=new iU(this.apiClient),this.operations=new U4(this.apiClient),this.authTokens=new X4(this.apiClient),this.tunings=new q3(this.apiClient),this.fileSearchStores=new T3(this.apiClient)}}const tO={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY"},gf=new eO({apiKey:tO.geminiApiKey});async function nO(n){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},t=n.map(o=>({inlineData:{data:o,mimeType:"image/jpeg"}})),i=await gf.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...t]},config:{responseMimeType:"application/json",responseSchema:{type:ke.OBJECT,properties:{items:{type:ke.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:ke.OBJECT,properties:{analysis:{type:ke.STRING,description:"La description concise du vtement."},category:{type:ke.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:ke.STRING,description:"La couleur principale du vtement."},material:{type:ke.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const o=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return o.items.forEach(u=>{a.includes(u.category)||(console.warn(`Catgorie invalide reue de l'IA: ${u.category}, fallback sur "Accessoires"`),u.category="Accessoires")}),o.items}catch(o){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",o),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function iO(n){return n&&n.name&&Array.isArray(n.itemIds)}async function sO(n,e,t,i){const o=new Set(e.flatMap(S=>S.itemIds)),u=n.filter(S=>!o.has(S.id)).map(S=>`- ${S.analysis} (Catgorie: ${S.category}, Couleur: ${S.color}, Matire: ${S.material})`).join(`
`),d=e.map(S=>`- ${S.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=i?`
**RGLE CRITIQUE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${iO(i)?i.name:i.analysis}". C'est la pice matresse.**
`:"",v=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pour un utilisateur en fonction de sa garde-robe et d'un contexte prcis.

    Contexte de l'utilisateur : "${t}"
    
    RGLE IMPORTANTE : Les articles marqus comme "(Ensemble)" sont des groupes de vtements insparables. Si tu utilises un ensemble, tu dois le lister par son nom (ex: "Costume bleu marine") et ne pas lister ses composants individuels.

    Vtements et Ensembles disponibles :
    ${p}
    ${m}
    En te basant **uniquement** sur les vtements et ensembles lists ci-dessus, cre 3 tenues distinctes et cohrentes qui correspondent au contexte de l'utilisateur.

    Pour chaque tenue, fournis :
    1. Un nom de titre court et accrocheur pour la tenue.
    2. Une brve description de l'ambiance ou du style de la tenue.
    3. La liste exacte des descriptions des vtements ou des noms d'ensembles de la liste fournie  utiliser.

    Rponds en franais.
  `,E=await gf.models.generateContent({model:"gemini-2.5-pro",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:ke.OBJECT,properties:{tenues:{type:ke.ARRAY,description:"La liste des suggestions de tenues.",items:{type:ke.OBJECT,properties:{titre:{type:ke.STRING,description:"Le nom de la tenue."},description:{type:ke.STRING,description:"Une brve description du style de la tenue."},vetements:{type:ke.ARRAY,items:{type:ke.STRING,description:"Description d'un vtement ou nom d'un ensemble de la liste fournie."},description:"La liste des descriptions des vtements ou ensembles composant la tenue."}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(S){throw console.error("Erreur de parsing JSON de la rponse Gemini:",S),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function rO(n,e){const t=n.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${n.length} pices):
${t}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,o=await gf.models.generateContent({model:"gemini-2.5-pro",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:ke.OBJECT,properties:{summary:{type:ke.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:ke.ARRAY,items:{type:ke.STRING},description:"Liste des points forts"},gaps:{type:ke.ARRAY,items:{type:ke.STRING},description:"Liste des manques"},suggestions:{type:ke.ARRAY,items:{type:ke.OBJECT,properties:{category:{type:ke.STRING},description:{type:ke.STRING},reason:{type:ke.STRING},priority:{type:ke.STRING,enum:["high","medium","low"]},estimatedPrice:{type:ke.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(o.text)}catch(a){throw console.error("Erreur:",a),a}}async function oO(n,e,t,i){const o=new Set(e.flatMap(E=>E.itemIds)),u=n.filter(E=>!o.has(E.id)).map(E=>`- ${E.analysis} (Catgorie: ${E.category}, Couleur: ${E.color}, Matire: ${E.material})`).join(`
`),d=e.map(E=>`- ${E.name} (Ensemble)`).join(`
`),p=[u,d].filter(Boolean).join(`
`),m=`
    Tu es un styliste de voyage et un expert en organisation. Ta mission est de crer une valise optimise pour un voyage.

    Dtails du voyage :
    - Dure : ${t} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles dans la garde-robe :
    ${p}
    
    RGLES :
    1. Cre une liste de vtements  emporter qui soit polyvalente et minimale.
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Les articles marqus comme "(Ensemble)" sont insparables.
    4. Assure-toi que la quantit de vtements est approprie pour ${t} jour(s).
    `,v=await gf.models.generateContent({model:"gemini-2.5-pro",contents:m,config:{responseMimeType:"application/json",responseSchema:{type:ke.OBJECT,properties:{titre:{type:ke.STRING,description:"Le nom du plan de valise."},resume:{type:ke.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:ke.ARRAY,items:{type:ke.STRING},description:"La liste des vtements  emporter."}},required:["titre","resume","valise"]}}});try{return JSON.parse(v.text)}catch(E){throw console.error("Erreur de parsing JSON:",E),new Error("L'IA a renvoy une rponse malforme.")}}const aO=async(n,e)=>{try{const t=cf(df,"users",n,"wardrobe","items");await wC(t,{items:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des vtements:",t),t}},lO=async n=>{try{const e=cf(df,"users",n,"wardrobe","items"),t=await IC(e);return t.exists()?t.data().items||[]:[]}catch(e){return console.error("Erreur lors du chargement des vtements:",e),[]}},uO=async(n,e)=>{try{const t=cf(df,"users",n,"wardrobe","sets");await wC(t,{sets:e})}catch(t){throw console.error("Erreur lors de la sauvegarde des ensembles:",t),t}},cO=async n=>{try{const e=cf(df,"users",n,"wardrobe","sets"),t=await IC(e);return t.exists()?t.data().sets||[]:[]}catch(e){return console.error("Erreur lors du chargement des ensembles:",e),[]}},dO=async(n,e,t)=>{try{const i=PP(BP,`users/${n}/clothing/${t}.jpg`);return await MP(i,e,"data_url"),await DP(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},fO=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),hO=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),iS=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),pO=()=>I.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Rg=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),bg=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),mO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),_I=()=>I.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),gO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),yO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),_O=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),vO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),TO=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),vI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),TI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),EO=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),EI=()=>I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),SO=()=>I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[I.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),I.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),AO=({theme:n,toggleTheme:e,children:t})=>I.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:I.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[I.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:[I.jsx("span",{className:"text-gold",children:"DRESS"}),"CODE"]}),I.jsxs("div",{className:"flex items-center gap-4",children:[t,I.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:n==="light"?I.jsx(hO,{}):I.jsx(fO,{})})]})]})}),CO=({user:n})=>{var S,b,q;const[e,t]=Te.useState(""),[i,o]=Te.useState(""),[a,u]=Te.useState(!1),[d,p]=Te.useState(!1),m=async()=>{try{await fx(Xl,qP)}catch(B){console.error("Erreur de connexion Google:",B)}},v=async B=>{B.preventDefault();try{a?await Fb(Xl,e,i):await Hb(Xl,e,i)}catch(G){console.error("Erreur d'authentification:",G)}},E=async()=>{try{await Yb(Xl)}catch(B){console.error("Erreur de dconnexion:",B)}};return n?I.jsxs("div",{className:"relative",children:[I.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[I.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((S=n.displayName)==null?void 0:S[0])||((b=n.email)==null?void 0:b[0])||"U").toUpperCase()}),I.jsx("span",{className:"hidden md:block text-sm font-medium",children:n.displayName||((q=n.email)==null?void 0:q.split("@")[0])})]}),d&&I.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[I.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[I.jsx("p",{className:"text-sm font-medium",children:n.displayName||"Utilisateur"}),I.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.email})]}),I.jsxs("button",{onClick:E,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[I.jsx("span",{className:"text-gold",children:"Dress"}),"Code AI"]}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),I.jsxs("button",{onClick:m,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[I.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[I.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),I.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),I.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),I.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),I.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),I.jsxs("div",{className:"relative my-6",children:[I.jsx("div",{className:"absolute inset-0 flex items-center",children:I.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),I.jsx("div",{className:"relative flex justify-center text-sm",children:I.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),I.jsxs("form",{onSubmit:v,className:"space-y-4",children:[I.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:B=>t(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),I.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:B=>o(B.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),I.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),I.jsx("button",{onClick:()=>u(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},IO=({onAnalyze:n,isAnalyzing:e})=>{const t=Te.useRef(null),[i,o]=Te.useState([]),[a,u]=Te.useState(!1),[d,p]=Te.useState(!1);Te.useEffect(()=>{const K=()=>p(window.innerWidth<1024);return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),Te.useEffect(()=>()=>{i.forEach(K=>URL.revokeObjectURL(K.preview))},[i]);const m=K=>{const W=K.map(se=>({id:`${se.name}-${se.lastModified}-${Math.random()}`,file:se,preview:URL.createObjectURL(se)}));o(se=>[...se,...W])},v=K=>{K.target.files&&(m(Array.from(K.target.files)),K.target.value="")},E=()=>{var K;e||(K=t.current)==null||K.click()},S=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!0))},b=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!1))},q=K=>{d||(K.preventDefault(),K.stopPropagation())},B=K=>{d||(K.preventDefault(),K.stopPropagation(),u(!1),K.dataTransfer.files&&K.dataTransfer.files.length>0&&(m(Array.from(K.dataTransfer.files)),K.dataTransfer.clearData()))},G=K=>{const W=i.find(se=>se.id===K);W&&URL.revokeObjectURL(W.preview),o(se=>se.filter(de=>de.id!==K))},te=()=>{i.length>0&&!e&&(n(i.map(K=>K.file)),o([]))};return I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:S,onDragLeave:b,onDragOver:q,onDrop:B,children:[I.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),I.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[I.jsx("input",{type:"file",ref:t,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),I.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?I.jsxs(I.Fragment,{children:[I.jsx(pO,{}),I.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:I.jsx(iS,{})}),I.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),I.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",I.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!d&&I.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[I.jsx("div",{className:"text-black transform-gpu scale-110",children:I.jsx(iS,{})}),I.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&I.jsxs("div",{className:"mt-8",children:[I.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),I.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(K=>I.jsxs("div",{className:"relative group aspect-square",children:[I.jsx("img",{src:K.preview,alt:K.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),I.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),I.jsx("button",{onClick:()=>G(K.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:I.jsx(bg,{})})]},K.id))}),I.jsxs("button",{onClick:te,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(Rg,{}),"Analyser les ",i.length," article(s)"]})]})]})},wO=({imageSrc:n,analysis:e,onClick:t,onRemove:i,isSelected:o,isSet:a})=>I.jsxs("div",{onClick:t,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[I.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),I.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${o?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),I.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),a&&!o&&I.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white",children:I.jsx(TI,{})}),o&&I.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx",children:I.jsx(EO,{})}),I.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:I.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),I.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:I.jsx(bg,{})})]}),RO={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},bO=({clothingItems:n,clothingSets:e,onRemoveItem:t,onRemoveSet:i,onSelectItem:o,onCreateSet:a})=>{const[u,d]=Te.useState("Hauts"),[p,m]=Te.useState(RO),[v,E]=Te.useState(!1),[S,b]=Te.useState([]),[q,B]=Te.useState(!1),G=Te.useMemo(()=>new Set(e.flatMap(x=>x.itemIds)),[e]),te=n.length,K=[{name:"Hauts",icon:gO},{name:"Bas",icon:yO},{name:"Chaussures",icon:_O},{name:"Accessoires",icon:vO}],W=()=>{E(!v),b([]),B(!1)},se=x=>{v?b(N=>N.includes(x.id)?N.filter(D=>D!==x.id):[...N,x.id]):o(x)},de=Te.useMemo(()=>S.length<2?null:e.find(x=>x.itemIds.length===S.length&&x.itemIds.every(N=>S.includes(N))),[S,e]);if(te===0)return I.jsxs("div",{className:"text-center py-20 px-6 bg-white dark:bg-raisin-black rounded-xl border border-dashed border-gray-300/50 dark:border-gray-700/50 flex flex-col items-center",children:[I.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:I.jsx(mO,{})}),I.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide."}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ajoutez des vtements pour commencer  crer."})]});const ue=x=>d(N=>N===x?null:x),M=(x,N,D)=>{m(V=>({...V,[x]:{...V[x],[N]:D}}))};return I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mb-8",children:[I.jsxs("h2",{className:"text-3xl font-serif font-bold",children:["Ma Garde-Robe ",I.jsxs("span",{className:"text-gray-500",children:["(",te,")"]})]}),I.jsx("button",{onClick:W,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-colors ${v?"bg-gold/20 text-gold":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700"}`,children:v?"Annuler la slection":"Crer un ensemble"})]}),I.jsx("div",{className:"space-y-4",children:K.map(({name:x,icon:N})=>{const D=n.filter(H=>H.category===x);if(D.length===0)return null;const V=u===x,L=["Hauts","Bas","Chaussures"].includes(x),P=[...new Set(D.map(H=>H.color))].sort(),ot=[...new Set(D.map(H=>H.material))].sort(),ht=D.filter(H=>{const{color:ae,material:ye}=p[x];return(ae==="Toutes"||H.color===ae)&&(ye==="Toutes"||H.material===ye)});return I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-lg shadow-black/5 dark:shadow-black/10 ring-1 ring-black/5 dark:ring-white/10 overflow-hidden transition-all duration-300",children:[I.jsxs("button",{onClick:()=>ue(x),className:"w-full flex justify-between items-center p-4 lg:p-5 text-left","aria-expanded":V,children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("span",{className:"text-gold",children:I.jsx(N,{})}),I.jsx("span",{className:"font-serif font-bold text-xl text-raisin-black dark:text-snow",children:x}),I.jsx("span",{className:"text-sm font-medium bg-snow dark:bg-onyx px-2 py-0.5 rounded-full text-gray-500 dark:text-gray-400",children:D.length})]}),I.jsx(TO,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${V?"rotate-180":""}`})]}),I.jsx("div",{className:`grid transition-all duration-500 ease-in-out ${V?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:I.jsx("div",{className:"overflow-hidden",children:I.jsxs("div",{className:"p-4 lg:p-5 border-t border-black/5 dark:border-white/10",children:[L&&I.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:`${x}-color-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Couleur"}),I.jsxs("select",{id:`${x}-color-filter`,value:p[x].color,onChange:H=>M(x,"color",H.target.value),onClick:H=>H.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[I.jsx("option",{value:"Toutes",children:"Toutes"}),P.map(H=>I.jsx("option",{value:H,children:H},H))]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:`${x}-material-filter`,className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Matire"}),I.jsxs("select",{id:`${x}-material-filter`,value:p[x].material,onChange:H=>M(x,"material",H.target.value),onClick:H=>H.stopPropagation(),className:"w-full appearance-none text-sm px-3 py-1.5 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors",children:[I.jsx("option",{value:"Toutes",children:"Toutes"}),ot.map(H=>I.jsx("option",{value:H,children:H},H))]})]})]}),I.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:ht.map(H=>I.jsx(wO,{imageSrc:H.imageSrc,analysis:H.analysis,onClick:()=>se(H),onRemove:ae=>{ae.stopPropagation(),t(H.id)},isSelected:v&&S.includes(H.id),isSet:G.has(H.id)},H.id))})]})})})]},x)})}),v&&I.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[60] w-full max-w-md px-4",children:q?I.jsxs("form",{onSubmit:x=>{x.preventDefault();const D=new FormData(x.currentTarget).get("setName");D&&D.trim()&&(a(S,D.trim()),W())},className:"flex items-center gap-2 bg-white dark:bg-raisin-black p-2 rounded-full shadow-2xl ring-1 ring-gold/50",children:[I.jsx("input",{type:"text",name:"setName",placeholder:"Nom de l'ensemble...",className:"flex-grow bg-transparent px-4 py-1 text-onyx dark:text-snow focus:outline-none",autoFocus:!0}),I.jsx("button",{type:"submit",className:"bg-gold text-onyx font-bold px-4 py-1.5 rounded-full hover:bg-gold-dark transition-colors",children:"Crer"}),I.jsx("button",{type:"button",onClick:()=>B(!1),className:"text-gray-500 dark:text-gray-400 p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:I.jsx(bg,{})})]}):de?I.jsxs("button",{onClick:()=>{i(de.id),W()},className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-rose-500 text-white font-bold rounded-full shadow-2xl hover:bg-rose-600 transition-all duration-300 transform hover:scale-105",children:[I.jsx(EI,{}),"Dissocier l'ensemble"]}):S.length>1&&I.jsxs("button",{onClick:()=>B(!0),className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-gold text-onyx font-bold rounded-full shadow-2xl hover:bg-gold-dark transition-all duration-300 transform hover:scale-105",children:[I.jsx(TI,{}),"Crer un ensemble avec ",S.length," articles"]})})]})},xO=({onGenerate:n,isGenerating:e,context:t,setContext:i})=>{const o=u=>{u.preventDefault(),t.trim()&&n(t)},a=["Casual","Chic","Formel"];return I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Crateur de Tenues"}),I.jsx("form",{onSubmit:o,children:I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"context",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ou mto ?"}),I.jsx("div",{className:"flex justify-center gap-2 mb-4",children:a.map(u=>I.jsx("button",{type:"button",onClick:()=>i(u),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${t===u?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:e,children:u},u))}),I.jsx("input",{id:"context",type:"text",value:t,onChange:u=>i(u.target.value),placeholder:"Ou dcrivez... Ex: un brunch ensoleill",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e})]}),I.jsxs("button",{type:"submit",disabled:e||!t.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(Rg,{}),e?"Gnration...":"Gnrer des Tenues"]})]})})]})},NO=({outfits:n,allClothingItems:e})=>{const[t,i]=Te.useState(null);Te.useEffect(()=>{if(!t)return;const a=u=>{u.key==="Escape"&&i(null)};return window.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",a),document.body.style.overflow="auto"}},[t]);const o=a=>{const u=a.toLowerCase(),d=e.find(p=>{if(p.analysis.toLowerCase()===u)return!0;const m=new Set(p.analysis.toLowerCase().split(/\s+/)),v=u.split(/\s+/);return v.filter(S=>m.has(S)).length/v.length>.5});return d?d.imageSrc:null};return I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"mt-10 space-y-8",children:n.map((a,u)=>I.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[I.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:a.titre}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:a.description}),I.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:a.vetements.map((d,p)=>{const m=o(d);return I.jsx("button",{onClick:()=>m&&i(m),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!m,"aria-label":`Agrandir l'image de : ${d}`,children:m?I.jsx("img",{src:m,alt:d,className:"w-full h-full object-cover"}):I.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:I.jsx(_I,{})})},p)})}),I.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:a.vetements.map((d,p)=>I.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:d},p))})]},u))}),t&&I.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>i(null),role:"dialog","aria-modal":"true",children:I.jsxs("div",{className:"relative",onClick:a=>a.stopPropagation(),children:[I.jsx("img",{src:t,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),I.jsx("button",{onClick:()=>i(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:I.jsx(vI,{})})]})})]})},MO=({item:n,clothingSets:e,onClose:t,onUpdate:i,onGenerateFrom:o,onRemoveSet:a})=>{const[u,d]=Te.useState({analysis:n.analysis,category:n.category,color:n.color,material:n.material}),p=e.find(E=>E.itemIds.includes(n.id));Te.useEffect(()=>{d({analysis:n.analysis,category:n.category,color:n.color,material:n.material})},[n]),Te.useEffect(()=>{const E=S=>{S.key==="Escape"&&t()};return document.body.style.overflow="hidden",window.addEventListener("keydown",E),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",E)}},[t]);const m=E=>{const{name:S,value:b}=E.target;d(q=>({...q,[S]:b}))},v=E=>{E.preventDefault(),i({...n,...u})};return I.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:E=>E.stopPropagation(),children:[I.jsxs("div",{className:"relative",children:[I.jsx("img",{src:n.imageSrc,alt:n.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),I.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:I.jsx(vI,{})})]}),I.jsxs("form",{onSubmit:v,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[I.jsxs("div",{className:"space-y-4 flex-grow",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),I.jsx("textarea",{id:"analysis",name:"analysis",value:u.analysis,onChange:m,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),I.jsx("select",{id:"category",name:"category",value:u.category,onChange:m,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(E=>I.jsx("option",{value:E,children:E},E))})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),I.jsx("input",{type:"text",id:"color",name:"color",value:u.color,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),I.jsx("input",{type:"text",id:"material",name:"material",value:u.material,onChange:m,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),p&&I.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),I.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:p.name,children:p.name})]}),I.jsxs("button",{type:"button",onClick:()=>{a(p.id),t()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[I.jsx(EI,{}),I.jsx("span",{children:"Dissocier"})]})]})]}),I.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3",children:[I.jsxs("button",{type:"button",onClick:()=>o(n),className:"w-full flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[I.jsx(Rg,{}),"Crer une tenue avec cet article"]}),I.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2.5 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300",children:"Enregistrer"})]})]})]})})},DO=({onGenerate:n,isGenerating:e})=>{const[t,i]=Te.useState(3),[o,a]=Te.useState(""),u=d=>{d.preventDefault(),o.trim()&&t>0&&n(t,o)};return I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-center mb-6 text-gold",children:"Planificateur de Valise"}),I.jsxs("form",{onSubmit:u,className:"space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[I.jsxs("div",{className:"sm:col-span-1",children:[I.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),I.jsx("input",{id:"days",type:"number",value:t,onChange:d=>i(parseInt(d.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:e,required:!0})]}),I.jsxs("div",{className:"sm:col-span-2",children:[I.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),I.jsx("input",{id:"vacation-context",type:"text",value:o,onChange:d=>a(d.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:e,required:!0})]})]}),I.jsxs("button",{type:"submit",disabled:e||!o.trim()||t<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[I.jsx(SO,{}),e?"Prparation...":"Gnrer la valise"]})]})]})},PO=({plan:n,allClothingItems:e})=>{const t=i=>{const o=i.toLowerCase(),a=e.find(d=>d.analysis.toLowerCase()===o);if(a)return a.imageSrc;const u=e.map(d=>{const p=new Set(d.analysis.toLowerCase().split(/\s+/)),m=o.split(/\s+/),E=m.filter(S=>p.has(S)).length/m.length;return{item:d,score:E}}).filter(d=>d.score>.5).sort((d,p)=>p.score-d.score)[0];return u?u.item.imageSrc:null};return I.jsx("div",{className:"mt-10",children:I.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[I.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:n.titre}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:n.resume}),I.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:n.valise.map((i,o)=>{const a=t(i);return I.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:i,children:[a?I.jsx("img",{src:a,alt:i,className:"w-full h-full object-cover"}):I.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:I.jsx(_I,{})}),I.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:I.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:i})})]},o)})}),I.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:n.valise.map((i,o)=>I.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:i},o))})]})})},kO=({onFilesSelected:n,isAnalyzing:e})=>{const[t,i]=Te.useState(!1),o=a=>{const u=Array.from(a.target.files||[]);u.length>0&&(n(u),i(!1))};return I.jsxs(I.Fragment,{children:[I.jsx("button",{onClick:()=>i(!0),disabled:e,className:"md:hidden fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?I.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):I.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),t&&I.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>i(!1),children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:a=>a.stopPropagation(),children:[I.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),I.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),I.jsxs("div",{className:"space-y-3",children:[I.jsxs("label",{className:"block",children:[I.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:o,className:"hidden"}),I.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gold/10 hover:bg-gold/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[I.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:I.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("p",{className:"font-semibold",children:"Prendre une photo"}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Utiliser l'appareil photo"})]})]})]}),I.jsxs("label",{className:"block",children:[I.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"}),I.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[I.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:I.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("p",{className:"font-semibold",children:"Galerie"}),I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),I.jsx("button",{onClick:()=>i(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},VO=({onAnalyzeWardrobe:n,onScrollToOutfits:e,onScrollToVacation:t,isAnalyzingWardrobe:i,clothingCount:o})=>I.jsxs("div",{className:"space-y-4 pb-24",children:[I.jsxs("div",{className:"text-center py-6",children:[I.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[I.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),I.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[o," vtement",o>1?"s":""," dans votre collection"]})]}),I.jsxs("div",{className:"space-y-3 px-4",children:[o>=3&&I.jsx("button",{onClick:n,disabled:i,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:I.jsxs("div",{className:"flex items-start gap-4",children:[I.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:i?I.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):I.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),I.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:I.jsxs("div",{className:"flex items-start gap-4",children:[I.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:I.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),I.jsx("button",{onClick:t,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:I.jsxs("div",{className:"flex items-start gap-4",children:[I.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:I.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),I.jsx("div",{className:"px-4 pt-6",children:I.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[I.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),I.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[I.jsx("p",{className:"text-2xl font-bold text-gold",children:o}),I.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[I.jsx("p",{className:"text-2xl font-bold text-purple-500",children:""}),I.jsx("p",{className:"text-xs text-gray-500",children:"Tenues possibles"})]})]})]})})]}),UO=({activeTab:n,onTabChange:e,counts:t})=>{const i=[{id:"home",label:"Home",icon:I.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:I.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:t.hauts},{id:"bas",label:"Bas",icon:I.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:t.bas},{id:"chaussures",label:"Chaussures",icon:I.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:t.chaussures},{id:"accessoires",label:"Accessoires",icon:I.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:t.accessoires}];return I.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-safe",children:I.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(o=>{const a=n===o.id;return I.jsxs("button",{onClick:()=>e(o.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[I.jsxs("div",{className:"relative",children:[o.icon,o.count!==null&&o.count>0&&I.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:o.count})]}),I.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:o.label})]},o.id)})})})},LO=({analysis:n,onClose:e})=>{if(!n)return null;const t={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return I.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:I.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[I.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),I.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:I.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),I.jsxs("div",{className:"p-6 space-y-6",children:[I.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[I.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),I.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.summary})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[I.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),I.jsx("div",{className:"grid gap-2",children:n.strengths.map((o,a)=>I.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[I.jsx("span",{className:"text-green-500 mt-0.5",children:""}),I.jsx("span",{children:o})]},a))})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[I.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),I.jsx("div",{className:"grid gap-2",children:n.gaps.map((o,a)=>I.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[I.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),I.jsx("span",{children:o})]},a))})]}),I.jsxs("div",{children:[I.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[I.jsx("span",{children:""})," Pices recommandes"]}),I.jsx("div",{className:"grid gap-4",children:n.suggestions.map((o,a)=>I.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[I.jsxs("div",{className:"flex justify-between items-start mb-3",children:[I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-lg",children:o.description}),I.jsx("p",{className:"text-sm text-gray-500",children:o.category})]}),I.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${t[o.priority]}`,children:i[o.priority]})]}),I.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[I.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",o.reason]}),o.estimatedPrice&&I.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[I.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.estimatedPrice]})]},a))})]})]})]})})},OO=()=>{const[n,e]=Te.useState(null),[t,i]=Te.useState("dark"),[o,a]=Te.useState([]),[u,d]=Te.useState([]),[p,m]=Te.useState(null),[v,E]=Te.useState(!1),[S,b]=Te.useState(null),[q,B]=Te.useState([]),[G,te]=Te.useState(!1),[K,W]=Te.useState(null),[se,de]=Te.useState(!1),[ue,M]=Te.useState(null),[x,N]=Te.useState(!1),[D,V]=Te.useState("home");Te.useEffect(()=>{const ce=Jb(Xl,we=>{e(we)});return()=>ce()},[]),Te.useEffect(()=>{(async()=>{if(n)try{const we=await lO(n.uid);a(we);const qe=await cO(n.uid);d(qe)}catch(we){console.error("Erreur lors du chargement des donnes:",we)}else a([]),d([])})()},[n]),Te.useEffect(()=>{console.log(" Save Effect:",{user:!!n,itemsLength:o.length}),n&&o.length>0&&(console.log(" SAVING ITEMS..."),aO(n.uid,o).then(()=>console.log(" SAVE SUCCESS!")).catch(ce=>console.error(" SAVE ERROR:",ce)))},[o,n]),Te.useEffect(()=>{n&&u.length>0&&uO(n.uid,u).catch(console.error)},[u,n]),Te.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const L=()=>{i(ce=>ce==="light"?"dark":"light")},P=Te.useCallback(async ce=>{if(ce.length!==0){E(!0),b(null);try{const we=ce.map(Rt=>new Promise((ii,Oi)=>{const si=new FileReader;si.onload=()=>ii(si.result),si.onerror=Oi,si.readAsDataURL(Rt)})),qe=await Promise.all(we),fn=qe.map(Rt=>Rt.split(",")[1]),Bn=await nO(fn),As=Math.min(Bn.length,ce.length),hn=[];for(let Rt=0;Rt<As;Rt++){const ii=`${Date.now()}-${ce[Rt].name}-${Math.random()}`;let Oi=qe[Rt];if(n)try{Oi=await dO(n.uid,qe[Rt],ii),console.log(" Image uploaded to Storage:",Oi)}catch(si){console.error(" Failed to upload image, using base64:",si)}hn.push({id:ii,imageSrc:Oi,...Bn[Rt]})}Bn.length!==ce.length&&(console.warn(`Le nombre de rsultats d'analyse (${Bn.length}) ne correspond pas au nombre de fichiers (${ce.length}).`),b(`L'IA a analys ${hn.length} sur ${ce.length} image(s). Certaines ont peut-tre t ignores.`)),a(Rt=>[...Rt,...hn])}catch(we){console.error("Erreur lors de l'analyse par lot des images:",we),b("Une erreur est survenue lors de l'analyse des images. L'IA a peut-tre rencontr un problme. Veuillez ressayer.")}finally{E(!1)}}},[n]),ot=Te.useCallback(async(ce,we)=>{if(o.length===0){b("Veuillez d'abord ajouter des vtements  votre garde-robe.");return}te(!0),b(null);try{const qe=await sO(o,u,ce,we);B(qe)}catch(qe){console.error("Erreur lors de la gnration des tenues:",qe),b("Impossible de gnrer des tenues. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{te(!1)}},[o,u]),ht=Te.useCallback(async(ce,we)=>{if(o.length===0){b("Veuillez d'abord ajouter des vtements  votre garde-robe.");return}de(!0),b(null);try{const qe=await oO(o,u,ce,we);W(qe)}catch(qe){console.error("Erreur lors de la gnration du plan de valise:",qe),b("Impossible de gnrer un plan de valise. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{de(!1)}},[o,u]),H=Te.useCallback(async()=>{if(o.length<3){b("Ajoutez au moins 3 vtements pour une analyse pertinente.");return}N(!0),b(null);try{const ce=await rO(o,u);M(ce)}catch(ce){console.error("Erreur lors de l'analyse de la garde-robe:",ce),b("Impossible d'analyser la garde-robe. L'IA est peut-tre surcharge. Veuillez ressayer.")}finally{N(!1)}},[o,u]),ae=Te.useCallback(()=>{const ce=document.getElementById("outfit-generator");ce&&ce.scrollIntoView({behavior:"smooth",block:"start"})},[]),ye=Te.useCallback(()=>{const ce=document.getElementById("vacation-planner");ce&&ce.scrollIntoView({behavior:"smooth",block:"start"})},[]),Ge=ce=>{m(ce)},Ke=()=>{m(null)},O=ce=>{a(we=>we.filter(qe=>qe.id!==ce)),d(we=>we.map(qe=>({...qe,itemIds:qe.itemIds.filter(fn=>fn!==ce)}))),m(null)},Z=ce=>{a(we=>we.map(qe=>qe.id===ce.id?ce:qe)),m(ce)},oe=ce=>{ot(`Crer des tenues avec ce vtement: ${ce.analysis}`,ce),m(null)},pe=Te.useCallback((ce,we)=>{const qe={id:`set-${Date.now()}-${Math.random()}`,name:ce,itemIds:we};d(fn=>[...fn,qe])},[]),Ae=Te.useCallback(ce=>{d(we=>we.filter(qe=>qe.id!==ce))},[]),Me={hauts:o.filter(ce=>ce.category==="Hauts").length,bas:o.filter(ce=>ce.category==="Bas").length,chaussures:o.filter(ce=>ce.category==="Chaussures").length,accessoires:o.filter(ce=>ce.category==="Accessoires").length},Pe=D==="home"?[]:o.filter(ce=>D==="hauts"?ce.category==="Hauts":D==="bas"?ce.category==="Bas":D==="chaussures"?ce.category==="Chaussures":D==="accessoires"?ce.category==="Accessoires":!1);return I.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:[I.jsx(AO,{theme:t,toggleTheme:L,children:I.jsx(CO,{user:n})}),I.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[S&&I.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[I.jsx("strong",{className:"font-bold",children:"Erreur: "}),I.jsx("span",{className:"block sm:inline",children:S})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[I.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[o.length>=3&&I.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),I.jsx("button",{onClick:H,disabled:x,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:x?I.jsxs(I.Fragment,{children:[I.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[I.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),I.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyse..."]}):I.jsxs(I.Fragment,{children:[I.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Analyser ma garde-robe"]})})]}),I.jsx("div",{className:"hidden md:block",children:I.jsx(IO,{onAnalyze:P,isAnalyzing:v})}),I.jsx("div",{className:"hidden md:block",children:I.jsx(bO,{clothingItems:o,onItemClick:Ge,onDeleteItem:O})}),I.jsxs("div",{className:"md:hidden",children:[D==="home"&&I.jsx(VO,{onAnalyzeWardrobe:H,onScrollToOutfits:ae,onScrollToVacation:ye,isAnalyzingWardrobe:x,clothingCount:o.length}),D!=="home"&&I.jsxs("div",{className:"pb-24",children:[I.jsxs("div",{className:"text-center py-6 px-4",children:[I.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:D}),I.jsxs("p",{className:"text-sm text-gray-500",children:[Pe.length," vtement",Pe.length>1?"s":""]})]}),Pe.length>0?I.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Pe.map(ce=>I.jsxs("div",{onClick:()=>Ge(ce),className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[I.jsx("div",{className:"aspect-square",children:I.jsx("img",{src:ce.imageSrc,alt:ce.analysis,className:"w-full h-full object-cover"})}),I.jsxs("div",{className:"p-3",children:[I.jsx("p",{className:"text-sm font-medium line-clamp-2",children:ce.analysis}),I.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ce.color})]})]},ce.id))}):I.jsx("div",{className:"text-center py-12 px-4",children:I.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),I.jsxs("div",{className:"space-y-10",children:[I.jsx("div",{id:"outfit-generator",children:I.jsx(xO,{clothingItems:o,clothingSets:u,onGenerate:ot,isGenerating:G})}),q.length>0&&I.jsx(NO,{outfits:q,allClothingItems:o}),I.jsx("div",{id:"vacation-planner",children:I.jsx(DO,{clothingItems:o,clothingSets:u,onGeneratePlan:ht,isGenerating:se})}),K&&I.jsx(PO,{plan:K,allClothingItems:o,onCreateSet:pe})]})]}),p&&I.jsx(MO,{item:p,clothingSets:u,onClose:Ke,onUpdate:Z,onGenerateFrom:oe,onRemoveSet:Ae}),ue&&I.jsx(LO,{analysis:ue,onClose:()=>M(null)}),I.jsx(kO,{onFilesSelected:P,isAnalyzing:v}),I.jsx(UO,{activeTab:D,onTabChange:V,counts:Me})]})]})},SI=document.getElementById("root");if(!SI)throw new Error("L'lment root est introuvable dans le DOM");const qO=aR.createRoot(SI);qO.render(I.jsx(Zw.StrictMode,{children:I.jsx(OO,{})}));
