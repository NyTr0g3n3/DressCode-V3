(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function e2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bv={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function rO(){if(e1)return Ec;e1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return Ec.Fragment=e,Ec.jsx=n,Ec.jsxs=n,Ec}var t1;function iO(){return t1||(t1=1,Bv.exports=rO()),Bv.exports}var g=iO(),Fv={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function sO(){if(n1)return Be;n1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function E(B){return B===null||typeof B!="object"?null:(B=x&&B[x]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,M={};function U(B,J,ee){this.props=B,this.context=J,this.refs=M,this.updater=ee||A}U.prototype.isReactComponent={},U.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},U.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=U.prototype;function z(B,J,ee){this.props=B,this.context=J,this.refs=M,this.updater=ee||A}var G=z.prototype=new j;G.constructor=z,D(G,U.prototype),G.isPureReactComponent=!0;var $=Array.isArray;function q(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function I(B,J,ee){var re=ee.ref;return{$$typeof:t,type:B,key:J,ref:re!==void 0?re:null,props:ee}}function V(B,J){return I(B.type,J,B.props)}function P(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function L(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ee){return J[ee]})}var N=/\/+/g;function be(B,J){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):J.toString(36)}function ke(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(q,q):(B.status="pending",B.then(function(J){B.status==="pending"&&(B.status="fulfilled",B.value=J)},function(J){B.status==="pending"&&(B.status="rejected",B.reason=J)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Q(B,J,ee,re,fe){var je=typeof B;(je==="undefined"||je==="boolean")&&(B=null);var Te=!1;if(B===null)Te=!0;else switch(je){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(B.$$typeof){case t:case e:Te=!0;break;case v:return Te=B._init,Q(Te(B._payload),J,ee,re,fe)}}if(Te)return fe=fe(B),Te=re===""?"."+be(B,0):re,$(fe)?(ee="",Te!=null&&(ee=Te.replace(N,"$&/")+"/"),Q(fe,J,ee,"",function(qn){return qn})):fe!=null&&(P(fe)&&(fe=V(fe,ee+(fe.key==null||B&&B.key===fe.key?"":(""+fe.key).replace(N,"$&/")+"/")+Te)),J.push(fe)),1;Te=0;var Mt=re===""?".":re+":";if($(B))for(var St=0;St<B.length;St++)re=B[St],je=Mt+be(re,St),Te+=Q(re,J,ee,je,fe);else if(St=E(B),typeof St=="function")for(B=St.call(B),St=0;!(re=B.next()).done;)re=re.value,je=Mt+be(re,St++),Te+=Q(re,J,ee,je,fe);else if(je==="object"){if(typeof B.then=="function")return Q(ke(B),J,ee,re,fe);throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Te}function se(B,J,ee){if(B==null)return B;var re=[],fe=0;return Q(B,re,"","",function(je){return J.call(ee,je,fe++)}),re}function he(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(ee){(B._status===0||B._status===-1)&&(B._status=1,B._result=ee)},function(ee){(B._status===0||B._status===-1)&&(B._status=2,B._result=ee)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var we=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Ee={map:se,forEach:function(B,J,ee){se(B,function(){J.apply(this,arguments)},ee)},count:function(B){var J=0;return se(B,function(){J++}),J},toArray:function(B){return se(B,function(J){return J})||[]},only:function(B){if(!P(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Be.Activity=b,Be.Children=Ee,Be.Component=U,Be.Fragment=n,Be.Profiler=s,Be.PureComponent=z,Be.StrictMode=r,Be.Suspense=h,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Be.__COMPILER_RUNTIME={__proto__:null,c:function(B){return C.H.useMemoCache(B)}},Be.cache=function(B){return function(){return B.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(B,J,ee){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var re=D({},B.props),fe=B.key;if(J!=null)for(je in J.key!==void 0&&(fe=""+J.key),J)!S.call(J,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&J.ref===void 0||(re[je]=J[je]);var je=arguments.length-2;if(je===1)re.children=ee;else if(1<je){for(var Te=Array(je),Mt=0;Mt<je;Mt++)Te[Mt]=arguments[Mt+2];re.children=Te}return I(B.type,fe,re)},Be.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Be.createElement=function(B,J,ee){var re,fe={},je=null;if(J!=null)for(re in J.key!==void 0&&(je=""+J.key),J)S.call(J,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(fe[re]=J[re]);var Te=arguments.length-2;if(Te===1)fe.children=ee;else if(1<Te){for(var Mt=Array(Te),St=0;St<Te;St++)Mt[St]=arguments[St+2];fe.children=Mt}if(B&&B.defaultProps)for(re in Te=B.defaultProps,Te)fe[re]===void 0&&(fe[re]=Te[re]);return I(B,je,fe)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(B){return{$$typeof:d,render:B}},Be.isValidElement=P,Be.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:he}},Be.memo=function(B,J){return{$$typeof:f,type:B,compare:J===void 0?null:J}},Be.startTransition=function(B){var J=C.T,ee={};C.T=ee;try{var re=B(),fe=C.S;fe!==null&&fe(ee,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(q,we)}catch(je){we(je)}finally{J!==null&&ee.types!==null&&(J.types=ee.types),C.T=J}},Be.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Be.use=function(B){return C.H.use(B)},Be.useActionState=function(B,J,ee){return C.H.useActionState(B,J,ee)},Be.useCallback=function(B,J){return C.H.useCallback(B,J)},Be.useContext=function(B){return C.H.useContext(B)},Be.useDebugValue=function(){},Be.useDeferredValue=function(B,J){return C.H.useDeferredValue(B,J)},Be.useEffect=function(B,J){return C.H.useEffect(B,J)},Be.useEffectEvent=function(B){return C.H.useEffectEvent(B)},Be.useId=function(){return C.H.useId()},Be.useImperativeHandle=function(B,J,ee){return C.H.useImperativeHandle(B,J,ee)},Be.useInsertionEffect=function(B,J){return C.H.useInsertionEffect(B,J)},Be.useLayoutEffect=function(B,J){return C.H.useLayoutEffect(B,J)},Be.useMemo=function(B,J){return C.H.useMemo(B,J)},Be.useOptimistic=function(B,J){return C.H.useOptimistic(B,J)},Be.useReducer=function(B,J,ee){return C.H.useReducer(B,J,ee)},Be.useRef=function(B){return C.H.useRef(B)},Be.useState=function(B){return C.H.useState(B)},Be.useSyncExternalStore=function(B,J,ee){return C.H.useSyncExternalStore(B,J,ee)},Be.useTransition=function(){return C.H.useTransition()},Be.version="19.2.3",Be}var r1;function B0(){return r1||(r1=1,Fv.exports=sO()),Fv.exports}var O=B0();const Nn=e2(O);var qv={exports:{}},Tc={},Hv={exports:{}},Gv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function aO(){return i1||(i1=1,(function(t){function e(Q,se){var he=Q.length;Q.push(se);e:for(;0<he;){var we=he-1>>>1,Ee=Q[we];if(0<s(Ee,se))Q[we]=se,Q[he]=Ee,he=we;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var se=Q[0],he=Q.pop();if(he!==se){Q[0]=he;e:for(var we=0,Ee=Q.length,B=Ee>>>1;we<B;){var J=2*(we+1)-1,ee=Q[J],re=J+1,fe=Q[re];if(0>s(ee,he))re<Ee&&0>s(fe,ee)?(Q[we]=fe,Q[re]=he,we=re):(Q[we]=ee,Q[J]=he,we=J);else if(re<Ee&&0>s(fe,he))Q[we]=fe,Q[re]=he,we=re;else break e}}return se}function s(Q,se){var he=Q.sortIndex-se.sortIndex;return he!==0?he:Q.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var h=[],f=[],v=1,b=null,x=3,E=!1,A=!1,D=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function G(Q){for(var se=n(f);se!==null;){if(se.callback===null)r(f);else if(se.startTime<=Q)r(f),se.sortIndex=se.expirationTime,e(h,se);else break;se=n(f)}}function $(Q){if(D=!1,G(Q),!A)if(n(h)!==null)A=!0,q||(q=!0,L());else{var se=n(f);se!==null&&ke($,se.startTime-Q)}}var q=!1,C=-1,S=5,I=-1;function V(){return M?!0:!(t.unstable_now()-I<S)}function P(){if(M=!1,q){var Q=t.unstable_now();I=Q;var se=!0;try{e:{A=!1,D&&(D=!1,j(C),C=-1),E=!0;var he=x;try{t:{for(G(Q),b=n(h);b!==null&&!(b.expirationTime>Q&&V());){var we=b.callback;if(typeof we=="function"){b.callback=null,x=b.priorityLevel;var Ee=we(b.expirationTime<=Q);if(Q=t.unstable_now(),typeof Ee=="function"){b.callback=Ee,G(Q),se=!0;break t}b===n(h)&&r(h),G(Q)}else r(h);b=n(h)}if(b!==null)se=!0;else{var B=n(f);B!==null&&ke($,B.startTime-Q),se=!1}}break e}finally{b=null,x=he,E=!1}se=void 0}}finally{se?L():q=!1}}}var L;if(typeof z=="function")L=function(){z(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,be=N.port2;N.port1.onmessage=P,L=function(){be.postMessage(null)}}else L=function(){U(P,0)};function ke(Q,se){C=U(function(){Q(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var he=x;x=se;try{return Q()}finally{x=he}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(Q,se){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var he=x;x=Q;try{return se()}finally{x=he}},t.unstable_scheduleCallback=function(Q,se,he){var we=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?we+he:we):he=we,Q){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=he+Ee,Q={id:v++,callback:se,priorityLevel:Q,startTime:he,expirationTime:Ee,sortIndex:-1},he>we?(Q.sortIndex=he,e(f,Q),n(h)===null&&Q===n(f)&&(D?(j(C),C=-1):D=!0,ke($,he-we))):(Q.sortIndex=Ee,e(h,Q),A||E||(A=!0,q||(q=!0,L()))),Q},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Q){var se=x;return function(){var he=x;x=se;try{return Q.apply(this,arguments)}finally{x=he}}}})(Gv)),Gv}var s1;function oO(){return s1||(s1=1,Hv.exports=aO()),Hv.exports}var $v={exports:{}},lr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1;function lO(){if(a1)return lr;a1=1;var t=B0();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(h,f,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:h,containerInfo:f,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,lr.createPortal=function(h,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,v)},lr.flushSync=function(h){var f=u.T,v=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=f,r.p=v,r.d.f()}},lr.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},lr.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},lr.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var v=f.as,b=d(v,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;v==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:E}):v==="script"&&r.d.X(h,{crossOrigin:b,integrity:x,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},lr.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var v=d(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},lr.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var v=f.as,b=d(v,f.crossOrigin);r.d.L(h,v,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},lr.preloadModule=function(h,f){if(typeof h=="string")if(f){var v=d(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},lr.requestFormReset=function(h){r.d.r(h)},lr.unstable_batchedUpdates=function(h,f){return h(f)},lr.useFormState=function(h,f,v){return u.H.useFormState(h,f,v)},lr.useFormStatus=function(){return u.H.useHostTransitionStatus()},lr.version="19.2.3",lr}var o1;function t2(){if(o1)return $v.exports;o1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$v.exports=lO(),$v.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function uO(){if(l1)return Tc;l1=1;var t=oO(),e=B0(),n=t2();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(r(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return h(p),i;if(y===c)return h(p),a;y=y.sibling}throw Error(r(188))}if(l.return!==c.return)l=p,c=y;else{for(var w=!1,R=p.child;R;){if(R===l){w=!0,l=p,c=y;break}if(R===c){w=!0,c=p,l=y;break}R=R.sibling}if(!w){for(R=y.child;R;){if(R===l){w=!0,l=y,c=p;break}if(R===c){w=!0,c=y,l=p;break}R=R.sibling}if(!w)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),z=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function be(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case $:return"Suspense";case q:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case z:return i.displayName||"Context";case j:return(i._context.displayName||"Context")+".Consumer";case G:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return a=i.displayName||null,a!==null?a:be(i.type)||"Memo";case S:a=i._payload,i=i._init;try{return be(i(a))}catch{}}return null}var ke=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},we=[],Ee=-1;function B(i){return{current:i}}function J(i){0>Ee||(i.current=we[Ee],we[Ee]=null,Ee--)}function ee(i,a){Ee++,we[Ee]=i.current,i.current=a}var re=B(null),fe=B(null),je=B(null),Te=B(null);function Mt(i,a){switch(ee(je,a),ee(fe,i),ee(re,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?EE(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=EE(a),i=TE(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(re),ee(re,i)}function St(){J(re),J(fe),J(je)}function qn(i){i.memoizedState!==null&&ee(Te,i);var a=re.current,l=TE(a,i.type);a!==l&&(ee(fe,i),ee(re,l))}function Tr(i){fe.current===i&&(J(re),J(fe)),Te.current===i&&(J(Te),bc._currentValue=he)}var Vt,Hn;function Tn(i){if(Vt===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Vt=a&&a[1]||"",Hn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vt+i+Hn}var Dn=!1;function On(i,a){if(!i||Dn)return"";Dn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(te){var Z=te}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(te){Z=te}i.call(oe.prototype)}}else{try{throw Error()}catch(te){Z=te}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),w=y[0],R=y[1];if(w&&R){var F=w.split(`
`),X=R.split(`
`);for(p=c=0;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(c===F.length||p===X.length)for(c=F.length-1,p=X.length-1;1<=c&&0<=p&&F[c]!==X[p];)p--;for(;1<=c&&0<=p;c--,p--)if(F[c]!==X[p]){if(c!==1||p!==1)do if(c--,p--,0>p||F[c]!==X[p]){var ie=`
`+F[c].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=c&&0<=p);break}}}finally{Dn=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Tn(l):""}function nr(i,a){switch(i.tag){case 26:case 27:case 5:return Tn(i.type);case 16:return Tn("Lazy");case 13:return i.child!==a&&a!==null?Tn("Suspense Fallback"):Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return On(i.type,!1);case 11:return On(i.type.render,!1);case 1:return On(i.type,!0);case 31:return Tn("Activity");default:return""}}function zr(i){try{var a="",l=null;do a+=nr(i,l),l=i,i=i.return;while(i);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Sr=Object.prototype.hasOwnProperty,jn=t.unstable_scheduleCallback,Ar=t.unstable_cancelCallback,_i=t.unstable_shouldYield,Br=t.unstable_requestPaint,wt=t.unstable_now,on=t.unstable_getCurrentPriorityLevel,He=t.unstable_ImmediatePriority,Lt=t.unstable_UserBlockingPriority,$t=t.unstable_NormalPriority,Kt=t.unstable_LowPriority,Fr=t.unstable_IdlePriority,Ls=t.log,Mn=t.unstable_setDisableYieldValue,rr=null,mn=null;function le(i){if(typeof Ls=="function"&&Mn(i),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(rr,i)}catch{}}var ge=Math.clz32?Math.clz32:mt,_e=Math.log,qe=Math.LN2;function mt(i){return i>>>=0,i===0?32:31-(_e(i)/qe|0)|0}var $e=256,Ye=262144,Je=4194304;function Ze(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Re(i,a,l){var c=i.pendingLanes;if(c===0)return 0;var p=0,y=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var R=c&134217727;return R!==0?(c=R&~y,c!==0?p=Ze(c):(w&=R,w!==0?p=Ze(w):l||(l=R&~i,l!==0&&(p=Ze(l))))):(R=c&~y,R!==0?p=Ze(R):w!==0?p=Ze(w):l||(l=c&~i,l!==0&&(p=Ze(l)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:p}function Le(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Ce(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sn(){var i=Je;return Je<<=1,(Je&62914560)===0&&(Je=4194304),i}function At(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function De(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function pt(i,a,l,c,p,y){var w=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,F=i.expirationTimes,X=i.hiddenUpdates;for(l=w&~l;0<l;){var ie=31-ge(l),oe=1<<ie;R[ie]=0,F[ie]=-1;var Z=X[ie];if(Z!==null)for(X[ie]=null,ie=0;ie<Z.length;ie++){var te=Z[ie];te!==null&&(te.lane&=-536870913)}l&=~oe}c!==0&&ln(i,c,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(w&~a))}function ln(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-ge(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&261930}function kt(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-ge(l),p=1<<c;p&a|i[c]&a&&(i[c]|=a),l&=~p}}function Yt(i,a){var l=a&-a;return l=(l&42)!==0?1:An(l),(l&(i.suspendedLanes|a))!==0?0:l}function An(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Cn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Pn(){var i=se.p;return i!==0?i:(i=window.event,i===void 0?32:KE(i.type))}function ii(i,a){var l=se.p;try{return se.p=i,a()}finally{se.p=l}}var pn=Math.random().toString(36).slice(2),Dt="__reactFiber$"+pn,Qt="__reactProps$"+pn,ir="__reactContainer$"+pn,Cr="__reactEvents$"+pn,sr="__reactListeners$"+pn,ts="__reactHandles$"+pn,qr="__reactResources$"+pn,Gn="__reactMarker$"+pn;function Rr(i){delete i[Dt],delete i[Qt],delete i[Cr],delete i[sr],delete i[ts]}function ar(i){var a=i[Dt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[ir]||l[Dt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=kE(i);i!==null;){if(l=i[Dt])return l;i=kE(i)}return a}i=l,l=i.parentNode}return null}function $n(i){if(i=i[Dt]||i[ir]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Ir(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function de(i){var a=i[qr];return a||(a=i[qr]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ve(i){i[Gn]=!0}var ze=new Set,Xe={};function yt(i,a){Rn(i,a),Rn(i+"Capture",a)}function Rn(i,a){for(Xe[i]=a,i=0;i<a.length;i++)ze.add(a[i])}var Ja=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ns={},rs={};function Za(i){return Sr.call(rs,i)?!0:Sr.call(ns,i)?!1:Ja.test(i)?rs[i]=!0:(ns[i]=!0,!1)}function Us(i,a,l){if(Za(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function zs(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function si(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}function vr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Jd(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qp(i,a,l){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(w){l=""+w,y.call(this,w)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function tl(i){if(!i._valueTracker){var a=Jd(i)?"checked":"value";i._valueTracker=qp(i,a,""+i[a])}}function Du(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=Jd(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function nl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var is=/[\n"\\]/g;function Zt(i){return i.replace(is,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Bs(i,a,l,c,p,y,w,R){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),a!=null?w==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+vr(a)):i.value!==""+vr(a)&&(i.value=""+vr(a)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),a!=null?rl(i,w,vr(a)):l!=null?rl(i,w,vr(l)):c!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+vr(R):i.removeAttribute("name")}function eo(i,a,l,c,p,y,w,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){tl(i);return}l=l!=null?""+vr(l):"",a=a!=null?""+vr(a):l,R||a===i.value||(i.value=a),i.defaultValue=a}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=R?i.checked:!!c,i.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),tl(i)}function rl(i,a,l){a==="number"&&nl(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ct(i,a,l,c){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&c&&(i[l].defaultSelected=!0)}else{for(l=""+vr(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,c&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function to(i,a,l){if(a!=null&&(a=""+vr(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+vr(l):""}function Fs(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(ke(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=vr(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c),tl(i)}function ai(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Hp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ou(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||Hp.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Zd(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var p in a)c=a[p],a.hasOwnProperty(p)&&l[p]!==c&&Ou(i,p,c)}else for(var y in a)a.hasOwnProperty(y)&&Ou(i,y,a[y])}function ju(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$p=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pi(i){return $p.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Vn(){}var il=null;function sl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ss=null,Hr=null;function eh(i){var a=$n(i);if(a&&(i=a.stateNode)){var l=i[Qt]||null;e:switch(i=a.stateNode,a.type){case"input":if(Bs(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Zt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var p=c[Qt]||null;if(!p)throw Error(r(90));Bs(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&Du(c)}break e;case"textarea":to(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ct(i,!!l.multiple,a,!1)}}}var Mu=!1;function th(i,a,l){if(Mu)return i(a,l);Mu=!0;try{var c=i(a);return c}finally{if(Mu=!1,(ss!==null||Hr!==null)&&(Xh(),ss&&(a=ss,i=Hr,Hr=ss=null,eh(a),i)))for(a=0;a<i.length;a++)eh(i[a])}}function Nr(i,a){var l=i.stateNode;if(l===null)return null;var c=l[Qt]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=!1;if(wi)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){Pu=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{Pu=!1}var Gr=null,al=null,Li=null;function qs(){if(Li)return Li;var i,a=al,l=a.length,c,p="value"in Gr?Gr.value:Gr.textContent,y=p.length;for(i=0;i<l&&a[i]===p[i];i++);var w=l-i;for(c=1;c<=w&&a[l-c]===p[y-c];c++);return Li=p.slice(i,1<c?1-c:void 0)}function no(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Hs(){return!0}function Ut(){return!1}function or(i){function a(l,c,p,y,w){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Hs:Ut,this.isPropagationStopped=Ut,this}return b(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),a}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=or(as),Gs=b({},as,{view:0,detail:0}),nh=or(Gs),$s,ol,yr,io=b({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yr&&(yr&&i.type==="mousemove"?($s=i.screenX-yr.screenX,ol=i.screenY-yr.screenY):ol=$s=0,yr=i),$s)},movementY:function(i){return"movementY"in i?i.movementY:ol}}),rh=or(io),so=b({},io,{dataTransfer:0}),ih=or(so),Vu=b({},Gs,{relatedTarget:0}),Ks=or(Vu),sh=b({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),ll=or(sh),Kp=b({},as,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ah=or(Kp),ao=b({},as,{data:0}),Lu=or(ao),oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lh(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=zu[i])?!!a[i]:!1}function Ys(){return lh}var uh=b({},Gs,{key:function(i){if(i.key){var a=oh[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=no(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Uu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(i){return i.type==="keypress"?no(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?no(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ch=or(uh),os=b({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bu=or(os),dh=b({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),hh=or(dh),fh=b({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),ul=or(fh),br=b({},io,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),mh=or(br),ph=b({},as,{newState:0,oldState:0}),Qs=or(ph),m=[9,13,27,32],_=wi&&"CompositionEvent"in window,T=null;wi&&"documentMode"in document&&(T=document.documentMode);var k=wi&&"TextEvent"in window&&!T,Y=wi&&(!_||T&&8<T&&11>=T),ne=" ",me=!1;function bt(i,a){switch(i){case"keyup":return m.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gn(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qe=!1;function Ln(i,a){switch(i){case"compositionend":return gn(a);case"keypress":return a.which!==32?null:(me=!0,ne);case"textInput":return i=a.data,i===ne&&me?null:i;default:return null}}function Un(i,a){if(Qe)return i==="compositionend"||!_&&bt(i,a)?(i=qs(),Li=al=Gr=null,Qe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Y&&a.locale!=="ko"?null:a.data;default:return null}}var Ws={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kr(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Ws[i.type]:a==="textarea"}function oo(i,a,l,c){ss?Hr?Hr.push(c):Hr=[c]:ss=c,a=sf(a,"onChange"),0<a.length&&(l=new ro("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var ls=null,Fu=null;function Nk(i){vE(i,0)}function gh(i){var a=Ir(i);if(Du(a))return i}function Px(i,a){if(i==="change")return a}var Vx=!1;if(wi){var Yp;if(wi){var Qp="oninput"in document;if(!Qp){var Lx=document.createElement("div");Lx.setAttribute("oninput","return;"),Qp=typeof Lx.oninput=="function"}Yp=Qp}else Yp=!1;Vx=Yp&&(!document.documentMode||9<document.documentMode)}function Ux(){ls&&(ls.detachEvent("onpropertychange",zx),Fu=ls=null)}function zx(i){if(i.propertyName==="value"&&gh(Fu)){var a=[];oo(a,Fu,i,sl(i)),th(Nk,a)}}function kk(i,a,l){i==="focusin"?(Ux(),ls=a,Fu=l,ls.attachEvent("onpropertychange",zx)):i==="focusout"&&Ux()}function Dk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gh(Fu)}function Ok(i,a){if(i==="click")return gh(a)}function jk(i,a){if(i==="input"||i==="change")return gh(a)}function Mk(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var $r=typeof Object.is=="function"?Object.is:Mk;function qu(i,a){if($r(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!Sr.call(a,p)||!$r(i[p],a[p]))return!1}return!0}function Bx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Fx(i,a){var l=Bx(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bx(l)}}function qx(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?qx(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Hx(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=nl(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=nl(i.document)}return a}function Wp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var Pk=wi&&"documentMode"in document&&11>=document.documentMode,cl=null,Xp=null,Hu=null,Jp=!1;function Gx(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Jp||cl==null||cl!==nl(c)||(c=cl,"selectionStart"in c&&Wp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Hu&&qu(Hu,c)||(Hu=c,c=sf(Xp,"onSelect"),0<c.length&&(a=new ro("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=cl)))}function lo(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var dl={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},Zp={},$x={};wi&&($x=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function uo(i){if(Zp[i])return Zp[i];if(!dl[i])return i;var a=dl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in $x)return Zp[i]=a[l];return i}var Kx=uo("animationend"),Yx=uo("animationiteration"),Qx=uo("animationstart"),Vk=uo("transitionrun"),Lk=uo("transitionstart"),Uk=uo("transitioncancel"),Wx=uo("transitionend"),Xx=new Map,eg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eg.push("scrollEnd");function Ei(i,a){Xx.set(i,a),yt(a,[i])}var vh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},oi=[],hl=0,tg=0;function yh(){for(var i=hl,a=tg=hl=0;a<i;){var l=oi[a];oi[a++]=null;var c=oi[a];oi[a++]=null;var p=oi[a];oi[a++]=null;var y=oi[a];if(oi[a++]=null,c!==null&&p!==null){var w=c.pending;w===null?p.next=p:(p.next=w.next,w.next=p),c.pending=p}y!==0&&Jx(l,p,y)}}function bh(i,a,l,c){oi[hl++]=i,oi[hl++]=a,oi[hl++]=l,oi[hl++]=c,tg|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function ng(i,a,l,c){return bh(i,a,l,c),xh(i)}function co(i,a){return bh(i,null,null,a),xh(i)}function Jx(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var p=!1,y=i.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&a!==null&&(p=31-ge(l),i=y.hiddenUpdates,c=i[p],c===null?i[p]=[a]:c.push(a),a.lane=l|536870912),y):null}function xh(i){if(50<hc)throw hc=0,dv=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var fl={};function zk(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(i,a,l,c){return new zk(i,a,l,c)}function rg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function us(i,a){var l=i.alternate;return l===null?(l=Kr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Zx(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function _h(i,a,l,c,p,y){var w=0;if(c=i,typeof i=="function")rg(i)&&(w=1);else if(typeof i=="string")w=GD(i,l,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=Kr(31,l,a,p),i.elementType=I,i.lanes=y,i;case D:return ho(l.children,p,y,a);case M:w=8,p|=24;break;case U:return i=Kr(12,l,a,p|2),i.elementType=U,i.lanes=y,i;case $:return i=Kr(13,l,a,p),i.elementType=$,i.lanes=y,i;case q:return i=Kr(19,l,a,p),i.elementType=q,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:w=10;break e;case j:w=9;break e;case G:w=11;break e;case C:w=14;break e;case S:w=16,c=null;break e}w=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=Kr(w,l,a,p),a.elementType=i,a.type=c,a.lanes=y,a}function ho(i,a,l,c){return i=Kr(7,i,c,a),i.lanes=l,i}function ig(i,a,l){return i=Kr(6,i,null,a),i.lanes=l,i}function e_(i){var a=Kr(18,null,null,0);return a.stateNode=i,a}function sg(i,a,l){return a=Kr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var t_=new WeakMap;function li(i,a){if(typeof i=="object"&&i!==null){var l=t_.get(i);return l!==void 0?l:(a={value:i,source:a,stack:zr(a)},t_.set(i,a),a)}return{value:i,source:a,stack:zr(a)}}var ml=[],pl=0,wh=null,Gu=0,ui=[],ci=0,Xs=null,Ui=1,zi="";function cs(i,a){ml[pl++]=Gu,ml[pl++]=wh,wh=i,Gu=a}function n_(i,a,l){ui[ci++]=Ui,ui[ci++]=zi,ui[ci++]=Xs,Xs=i;var c=Ui;i=zi;var p=32-ge(c)-1;c&=~(1<<p),l+=1;var y=32-ge(a)+p;if(30<y){var w=p-p%5;y=(c&(1<<w)-1).toString(32),c>>=w,p-=w,Ui=1<<32-ge(a)+p|l<<p|c,zi=y+i}else Ui=1<<y|l<<p|c,zi=i}function ag(i){i.return!==null&&(cs(i,1),n_(i,1,0))}function og(i){for(;i===wh;)wh=ml[--pl],ml[pl]=null,Gu=ml[--pl],ml[pl]=null;for(;i===Xs;)Xs=ui[--ci],ui[ci]=null,zi=ui[--ci],ui[ci]=null,Ui=ui[--ci],ui[ci]=null}function r_(i,a){ui[ci++]=Ui,ui[ci++]=zi,ui[ci++]=Xs,Ui=a.id,zi=a.overflow,Xs=i}var Kn=null,zt=null,ot=!1,Js=null,di=!1,lg=Error(r(519));function Zs(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $u(li(a,i)),lg}function i_(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[Dt]=i,a[Qt]=c,l){case"dialog":tt("cancel",a),tt("close",a);break;case"iframe":case"object":case"embed":tt("load",a);break;case"video":case"audio":for(l=0;l<mc.length;l++)tt(mc[l],a);break;case"source":tt("error",a);break;case"img":case"image":case"link":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"input":tt("invalid",a),eo(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":tt("invalid",a);break;case"textarea":tt("invalid",a),Fs(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||_E(a.textContent,l)?(c.popover!=null&&(tt("beforetoggle",a),tt("toggle",a)),c.onScroll!=null&&tt("scroll",a),c.onScrollEnd!=null&&tt("scrollend",a),c.onClick!=null&&(a.onclick=Vn),a=!0):a=!1,a||Zs(i,!0)}function s_(i){for(Kn=i.return;Kn;)switch(Kn.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:Kn=Kn.return}}function gl(i){if(i!==Kn)return!1;if(!ot)return s_(i),ot=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Av(i.type,i.memoizedProps)),l=!l),l&&zt&&Zs(i),s_(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));zt=NE(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));zt=NE(i)}else a===27?(a=zt,fa(i.type)?(i=kv,kv=null,zt=i):zt=a):zt=Kn?fi(i.stateNode.nextSibling):null;return!0}function fo(){zt=Kn=null,ot=!1}function ug(){var i=Js;return i!==null&&(Mr===null?Mr=i:Mr.push.apply(Mr,i),Js=null),i}function $u(i){Js===null?Js=[i]:Js.push(i)}var cg=B(null),mo=null,ds=null;function ea(i,a,l){ee(cg,a._currentValue),a._currentValue=l}function hs(i){i._currentValue=cg.current,J(cg)}function dg(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function hg(i,a,l,c){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=p;for(var F=0;F<a.length;F++)if(R.context===a[F]){y.lanes|=l,R=y.alternate,R!==null&&(R.lanes|=l),dg(y.return,l,i),c||(w=null);break e}y=R.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(r(341));w.lanes|=l,y=w.alternate,y!==null&&(y.lanes|=l),dg(w,l,i),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function vl(i,a,l,c){i=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var R=p.type;$r(p.pendingProps.value,w.value)||(i!==null?i.push(R):i=[R])}}else if(p===Te.current){if(w=p.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(bc):i=[bc])}p=p.return}i!==null&&hg(a,i,l,c),a.flags|=262144}function Eh(i){for(i=i.firstContext;i!==null;){if(!$r(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function po(i){mo=i,ds=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yn(i){return a_(mo,i)}function Th(i,a){return mo===null&&po(i),a_(i,a)}function a_(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ds===null){if(i===null)throw Error(r(308));ds=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ds=ds.next=a;return l}var Bk=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},Fk=t.unstable_scheduleCallback,qk=t.unstable_NormalPriority,vn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fg(){return{controller:new Bk,data:new Map,refCount:0}}function Ku(i){i.refCount--,i.refCount===0&&Fk(qk,function(){i.controller.abort()})}var Yu=null,mg=0,yl=0,bl=null;function Hk(i,a){if(Yu===null){var l=Yu=[];mg=0,yl=vv(),bl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return mg++,a.then(o_,o_),a}function o_(){if(--mg===0&&Yu!==null){bl!==null&&(bl.status="fulfilled");var i=Yu;Yu=null,yl=0,bl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function Gk(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var l_=Q.S;Q.S=function(i,a){Gw=wt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Hk(i,a),l_!==null&&l_(i,a)};var go=B(null);function pg(){var i=go.current;return i!==null?i:Ot.pooledCache}function Sh(i,a){a===null?ee(go,go.current):ee(go,a.pool)}function u_(){var i=pg();return i===null?null:{parent:vn._currentValue,pool:i}}var xl=Error(r(460)),gg=Error(r(474)),Ah=Error(r(542)),Ch={then:function(){}};function c_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function d_(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Vn,Vn),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,f_(i),i;default:if(typeof a.status=="string")a.then(Vn,Vn);else{if(i=Ot,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=c}},function(c){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,f_(i),i}throw yo=a,xl}}function vo(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(yo=l,xl):l}}var yo=null;function h_(){if(yo===null)throw Error(r(459));var i=yo;return yo=null,i}function f_(i){if(i===xl||i===Ah)throw Error(r(483))}var _l=null,Qu=0;function Rh(i){var a=Qu;return Qu+=1,_l===null&&(_l=[]),d_(_l,i,a)}function Wu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Ih(i,a){throw a.$$typeof===x?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function m_(i){function a(K,H){if(i){var W=K.deletions;W===null?(K.deletions=[H],K.flags|=16):W.push(H)}}function l(K,H){if(!i)return null;for(;H!==null;)a(K,H),H=H.sibling;return null}function c(K){for(var H=new Map;K!==null;)K.key!==null?H.set(K.key,K):H.set(K.index,K),K=K.sibling;return H}function p(K,H){return K=us(K,H),K.index=0,K.sibling=null,K}function y(K,H,W){return K.index=W,i?(W=K.alternate,W!==null?(W=W.index,W<H?(K.flags|=67108866,H):W):(K.flags|=67108866,H)):(K.flags|=1048576,H)}function w(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function R(K,H,W,ae){return H===null||H.tag!==6?(H=ig(W,K.mode,ae),H.return=K,H):(H=p(H,W),H.return=K,H)}function F(K,H,W,ae){var Ie=W.type;return Ie===D?ie(K,H,W.props.children,ae,W.key):H!==null&&(H.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&vo(Ie)===H.type)?(H=p(H,W.props),Wu(H,W),H.return=K,H):(H=_h(W.type,W.key,W.props,null,K.mode,ae),Wu(H,W),H.return=K,H)}function X(K,H,W,ae){return H===null||H.tag!==4||H.stateNode.containerInfo!==W.containerInfo||H.stateNode.implementation!==W.implementation?(H=sg(W,K.mode,ae),H.return=K,H):(H=p(H,W.children||[]),H.return=K,H)}function ie(K,H,W,ae,Ie){return H===null||H.tag!==7?(H=ho(W,K.mode,ae,Ie),H.return=K,H):(H=p(H,W),H.return=K,H)}function oe(K,H,W){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=ig(""+H,K.mode,W),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return W=_h(H.type,H.key,H.props,null,K.mode,W),Wu(W,H),W.return=K,W;case A:return H=sg(H,K.mode,W),H.return=K,H;case S:return H=vo(H),oe(K,H,W)}if(ke(H)||L(H))return H=ho(H,K.mode,W,null),H.return=K,H;if(typeof H.then=="function")return oe(K,Rh(H),W);if(H.$$typeof===z)return oe(K,Th(K,H),W);Ih(K,H)}return null}function Z(K,H,W,ae){var Ie=H!==null?H.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ie!==null?null:R(K,H,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return W.key===Ie?F(K,H,W,ae):null;case A:return W.key===Ie?X(K,H,W,ae):null;case S:return W=vo(W),Z(K,H,W,ae)}if(ke(W)||L(W))return Ie!==null?null:ie(K,H,W,ae,null);if(typeof W.then=="function")return Z(K,H,Rh(W),ae);if(W.$$typeof===z)return Z(K,H,Th(K,W),ae);Ih(K,W)}return null}function te(K,H,W,ae,Ie){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return K=K.get(W)||null,R(H,K,""+ae,Ie);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case E:return K=K.get(ae.key===null?W:ae.key)||null,F(H,K,ae,Ie);case A:return K=K.get(ae.key===null?W:ae.key)||null,X(H,K,ae,Ie);case S:return ae=vo(ae),te(K,H,W,ae,Ie)}if(ke(ae)||L(ae))return K=K.get(W)||null,ie(H,K,ae,Ie,null);if(typeof ae.then=="function")return te(K,H,W,Rh(ae),Ie);if(ae.$$typeof===z)return te(K,H,W,Th(H,ae),Ie);Ih(H,ae)}return null}function Se(K,H,W,ae){for(var Ie=null,dt=null,Ae=H,Ke=H=0,it=null;Ae!==null&&Ke<W.length;Ke++){Ae.index>Ke?(it=Ae,Ae=null):it=Ae.sibling;var ht=Z(K,Ae,W[Ke],ae);if(ht===null){Ae===null&&(Ae=it);break}i&&Ae&&ht.alternate===null&&a(K,Ae),H=y(ht,H,Ke),dt===null?Ie=ht:dt.sibling=ht,dt=ht,Ae=it}if(Ke===W.length)return l(K,Ae),ot&&cs(K,Ke),Ie;if(Ae===null){for(;Ke<W.length;Ke++)Ae=oe(K,W[Ke],ae),Ae!==null&&(H=y(Ae,H,Ke),dt===null?Ie=Ae:dt.sibling=Ae,dt=Ae);return ot&&cs(K,Ke),Ie}for(Ae=c(Ae);Ke<W.length;Ke++)it=te(Ae,K,Ke,W[Ke],ae),it!==null&&(i&&it.alternate!==null&&Ae.delete(it.key===null?Ke:it.key),H=y(it,H,Ke),dt===null?Ie=it:dt.sibling=it,dt=it);return i&&Ae.forEach(function(ya){return a(K,ya)}),ot&&cs(K,Ke),Ie}function Oe(K,H,W,ae){if(W==null)throw Error(r(151));for(var Ie=null,dt=null,Ae=H,Ke=H=0,it=null,ht=W.next();Ae!==null&&!ht.done;Ke++,ht=W.next()){Ae.index>Ke?(it=Ae,Ae=null):it=Ae.sibling;var ya=Z(K,Ae,ht.value,ae);if(ya===null){Ae===null&&(Ae=it);break}i&&Ae&&ya.alternate===null&&a(K,Ae),H=y(ya,H,Ke),dt===null?Ie=ya:dt.sibling=ya,dt=ya,Ae=it}if(ht.done)return l(K,Ae),ot&&cs(K,Ke),Ie;if(Ae===null){for(;!ht.done;Ke++,ht=W.next())ht=oe(K,ht.value,ae),ht!==null&&(H=y(ht,H,Ke),dt===null?Ie=ht:dt.sibling=ht,dt=ht);return ot&&cs(K,Ke),Ie}for(Ae=c(Ae);!ht.done;Ke++,ht=W.next())ht=te(Ae,K,Ke,ht.value,ae),ht!==null&&(i&&ht.alternate!==null&&Ae.delete(ht.key===null?Ke:ht.key),H=y(ht,H,Ke),dt===null?Ie=ht:dt.sibling=ht,dt=ht);return i&&Ae.forEach(function(nO){return a(K,nO)}),ot&&cs(K,Ke),Ie}function It(K,H,W,ae){if(typeof W=="object"&&W!==null&&W.type===D&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case E:e:{for(var Ie=W.key;H!==null;){if(H.key===Ie){if(Ie=W.type,Ie===D){if(H.tag===7){l(K,H.sibling),ae=p(H,W.props.children),ae.return=K,K=ae;break e}}else if(H.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===S&&vo(Ie)===H.type){l(K,H.sibling),ae=p(H,W.props),Wu(ae,W),ae.return=K,K=ae;break e}l(K,H);break}else a(K,H);H=H.sibling}W.type===D?(ae=ho(W.props.children,K.mode,ae,W.key),ae.return=K,K=ae):(ae=_h(W.type,W.key,W.props,null,K.mode,ae),Wu(ae,W),ae.return=K,K=ae)}return w(K);case A:e:{for(Ie=W.key;H!==null;){if(H.key===Ie)if(H.tag===4&&H.stateNode.containerInfo===W.containerInfo&&H.stateNode.implementation===W.implementation){l(K,H.sibling),ae=p(H,W.children||[]),ae.return=K,K=ae;break e}else{l(K,H);break}else a(K,H);H=H.sibling}ae=sg(W,K.mode,ae),ae.return=K,K=ae}return w(K);case S:return W=vo(W),It(K,H,W,ae)}if(ke(W))return Se(K,H,W,ae);if(L(W)){if(Ie=L(W),typeof Ie!="function")throw Error(r(150));return W=Ie.call(W),Oe(K,H,W,ae)}if(typeof W.then=="function")return It(K,H,Rh(W),ae);if(W.$$typeof===z)return It(K,H,Th(K,W),ae);Ih(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,H!==null&&H.tag===6?(l(K,H.sibling),ae=p(H,W),ae.return=K,K=ae):(l(K,H),ae=ig(W,K.mode,ae),ae.return=K,K=ae),w(K)):l(K,H)}return function(K,H,W,ae){try{Qu=0;var Ie=It(K,H,W,ae);return _l=null,Ie}catch(Ae){if(Ae===xl||Ae===Ah)throw Ae;var dt=Kr(29,Ae,null,K.mode);return dt.lanes=ae,dt.return=K,dt}finally{}}}var bo=m_(!0),p_=m_(!1),ta=!1;function vg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function na(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ra(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(gt&2)!==0){var p=c.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),c.pending=a,a=xh(i),Jx(i,null,l),a}return bh(i,c,a,l),xh(i)}function Xu(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,kt(i,l)}}function bg(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,l=l.next}while(l!==null);y===null?p=y=a:y=y.next=a}else p=y=a;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var xg=!1;function Ju(){if(xg){var i=bl;if(i!==null)throw i}}function Zu(i,a,l,c){xg=!1;var p=i.updateQueue;ta=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var F=R,X=F.next;F.next=null,w===null?y=X:w.next=X,w=F;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,R=ie.lastBaseUpdate,R!==w&&(R===null?ie.firstBaseUpdate=X:R.next=X,ie.lastBaseUpdate=F))}if(y!==null){var oe=p.baseState;w=0,ie=X=F=null,R=y;do{var Z=R.lane&-536870913,te=Z!==R.lane;if(te?(rt&Z)===Z:(c&Z)===Z){Z!==0&&Z===yl&&(xg=!0),ie!==null&&(ie=ie.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Se=i,Oe=R;Z=a;var It=l;switch(Oe.tag){case 1:if(Se=Oe.payload,typeof Se=="function"){oe=Se.call(It,oe,Z);break e}oe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Oe.payload,Z=typeof Se=="function"?Se.call(It,oe,Z):Se,Z==null)break e;oe=b({},oe,Z);break e;case 2:ta=!0}}Z=R.callback,Z!==null&&(i.flags|=64,te&&(i.flags|=8192),te=p.callbacks,te===null?p.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ie===null?(X=ie=te,F=oe):ie=ie.next=te,w|=Z;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;te=R,R=te.next,te.next=null,p.lastBaseUpdate=te,p.shared.pending=null}}while(!0);ie===null&&(F=oe),p.baseState=F,p.firstBaseUpdate=X,p.lastBaseUpdate=ie,y===null&&(p.shared.lanes=0),la|=w,i.lanes=w,i.memoizedState=oe}}function g_(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function v_(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)g_(l[i],a)}var wl=B(null),Nh=B(0);function y_(i,a){i=_s,ee(Nh,i),ee(wl,a),_s=i|a.baseLanes}function _g(){ee(Nh,_s),ee(wl,wl.current)}function wg(){_s=Nh.current,J(wl),J(Nh)}var Yr=B(null),hi=null;function ia(i){var a=i.alternate;ee(un,un.current&1),ee(Yr,i),hi===null&&(a===null||wl.current!==null||a.memoizedState!==null)&&(hi=i)}function Eg(i){ee(un,un.current),ee(Yr,i),hi===null&&(hi=i)}function b_(i){i.tag===22?(ee(un,un.current),ee(Yr,i),hi===null&&(hi=i)):sa()}function sa(){ee(un,un.current),ee(Yr,Yr.current)}function Qr(i){J(Yr),hi===i&&(hi=null),J(un)}var un=B(0);function kh(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Iv(l)||Nv(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var fs=0,Ge=null,Ct=null,yn=null,Dh=!1,El=!1,xo=!1,Oh=0,ec=0,Tl=null,$k=0;function en(){throw Error(r(321))}function Tg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!$r(i[l],a[l]))return!1;return!0}function Sg(i,a,l,c,p,y){return fs=y,Ge=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Q.H=i===null||i.memoizedState===null?nw:zg,xo=!1,y=l(c,p),xo=!1,El&&(y=__(a,l,c,p)),x_(i),y}function x_(i){Q.H=rc;var a=Ct!==null&&Ct.next!==null;if(fs=0,yn=Ct=Ge=null,Dh=!1,ec=0,Tl=null,a)throw Error(r(300));i===null||bn||(i=i.dependencies,i!==null&&Eh(i)&&(bn=!0))}function __(i,a,l,c){Ge=i;var p=0;do{if(El&&(Tl=null),ec=0,El=!1,25<=p)throw Error(r(301));if(p+=1,yn=Ct=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Q.H=rw,y=a(l,c)}while(El);return y}function Kk(){var i=Q.H,a=i.useState()[0];return a=typeof a.then=="function"?tc(a):a,i=i.useState()[0],(Ct!==null?Ct.memoizedState:null)!==i&&(Ge.flags|=1024),a}function Ag(){var i=Oh!==0;return Oh=0,i}function Cg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Rg(i){if(Dh){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Dh=!1}fs=0,yn=Ct=Ge=null,El=!1,ec=Oh=0,Tl=null}function xr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Ge.memoizedState=yn=i:yn=yn.next=i,yn}function cn(){if(Ct===null){var i=Ge.alternate;i=i!==null?i.memoizedState:null}else i=Ct.next;var a=yn===null?Ge.memoizedState:yn.next;if(a!==null)yn=a,Ct=i;else{if(i===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));Ct=i,i={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},yn===null?Ge.memoizedState=yn=i:yn=yn.next=i}return yn}function jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tc(i){var a=ec;return ec+=1,Tl===null&&(Tl=[]),i=d_(Tl,i,a),a=Ge,(yn===null?a.memoizedState:yn.next)===null&&(a=a.alternate,Q.H=a===null||a.memoizedState===null?nw:zg),i}function Mh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return tc(i);if(i.$$typeof===z)return Yn(i)}throw Error(r(438,String(i)))}function Ig(i){var a=null,l=Ge.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Ge.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=jh(),Ge.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=V;return a.index++,l}function ms(i,a){return typeof a=="function"?a(i):a}function Ph(i){var a=cn();return Ng(a,Ct,i)}function Ng(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var p=i.baseQueue,y=c.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}a.baseQueue=p=y,c.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{a=p.next;var R=w=null,F=null,X=a,ie=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(rt&oe)===oe:(fs&oe)===oe){var Z=X.revertLane;if(Z===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===yl&&(ie=!0);else if((fs&Z)===Z){X=X.next,Z===yl&&(ie=!0);continue}else oe={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(R=F=oe,w=y):F=F.next=oe,Ge.lanes|=Z,la|=Z;oe=X.action,xo&&l(y,oe),y=X.hasEagerState?X.eagerState:l(y,oe)}else Z={lane:oe,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(R=F=Z,w=y):F=F.next=Z,Ge.lanes|=oe,la|=oe;X=X.next}while(X!==null&&X!==a);if(F===null?w=y:F.next=R,!$r(y,i.memoizedState)&&(bn=!0,ie&&(l=bl,l!==null)))throw l;i.memoizedState=y,i.baseState=w,i.baseQueue=F,c.lastRenderedState=y}return p===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function kg(i){var a=cn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,p=l.pending,y=a.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do y=i(y,w.action),w=w.next;while(w!==p);$r(y,a.memoizedState)||(bn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,c]}function w_(i,a,l){var c=Ge,p=cn(),y=ot;if(y){if(l===void 0)throw Error(r(407));l=l()}else l=a();var w=!$r((Ct||p).memoizedState,l);if(w&&(p.memoizedState=l,bn=!0),p=p.queue,jg(S_.bind(null,c,p,i),[i]),p.getSnapshot!==a||w||yn!==null&&yn.memoizedState.tag&1){if(c.flags|=2048,Sl(9,{destroy:void 0},T_.bind(null,c,p,l,a),null),Ot===null)throw Error(r(349));y||(fs&127)!==0||E_(c,a,l)}return l}function E_(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Ge.updateQueue,a===null?(a=jh(),Ge.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function T_(i,a,l,c){a.value=l,a.getSnapshot=c,A_(a)&&C_(i)}function S_(i,a,l){return l(function(){A_(a)&&C_(i)})}function A_(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!$r(i,l)}catch{return!0}}function C_(i){var a=co(i,2);a!==null&&Pr(a,i,2)}function Dg(i){var a=xr();if(typeof i=="function"){var l=i;if(i=l(),xo){le(!0);try{l()}finally{le(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:i},a}function R_(i,a,l,c){return i.baseState=l,Ng(i,Ct,typeof c=="function"?c:ms)}function Yk(i,a,l,c,p){if(Uh(i))throw Error(r(485));if(i=a.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};Q.T!==null?l(!0):y.isTransition=!1,c(y),l=a.pending,l===null?(y.next=a.pending=y,I_(a,y)):(y.next=l.next,a.pending=l.next=y)}}function I_(i,a){var l=a.action,c=a.payload,p=i.state;if(a.isTransition){var y=Q.T,w={};Q.T=w;try{var R=l(p,c),F=Q.S;F!==null&&F(w,R),N_(i,a,R)}catch(X){Og(i,a,X)}finally{y!==null&&w.types!==null&&(y.types=w.types),Q.T=y}}else try{y=l(p,c),N_(i,a,y)}catch(X){Og(i,a,X)}}function N_(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){k_(i,a,c)},function(c){return Og(i,a,c)}):k_(i,a,l)}function k_(i,a,l){a.status="fulfilled",a.value=l,D_(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,I_(i,l)))}function Og(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,D_(a),a=a.next;while(a!==c)}i.action=null}function D_(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function O_(i,a){return a}function j_(i,a){if(ot){var l=Ot.formState;if(l!==null){e:{var c=Ge;if(ot){if(zt){t:{for(var p=zt,y=di;p.nodeType!==8;){if(!y){p=null;break t}if(p=fi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){zt=fi(p.nextSibling),c=p.data==="F!";break e}}Zs(c)}c=!1}c&&(a=l[0])}}return l=xr(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O_,lastRenderedState:a},l.queue=c,l=Z_.bind(null,Ge,c),c.dispatch=l,c=Dg(!1),y=Ug.bind(null,Ge,!1,c.queue),c=xr(),p={state:a,dispatch:null,action:i,pending:null},c.queue=p,l=Yk.bind(null,Ge,p,y,l),p.dispatch=l,c.memoizedState=i,[a,l,!1]}function M_(i){var a=cn();return P_(a,Ct,i)}function P_(i,a,l){if(a=Ng(i,a,O_)[0],i=Ph(ms)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=tc(a)}catch(w){throw w===xl?Ah:w}else c=a;a=cn();var p=a.queue,y=p.dispatch;return l!==a.memoizedState&&(Ge.flags|=2048,Sl(9,{destroy:void 0},Qk.bind(null,p,l),null)),[c,y,i]}function Qk(i,a){i.action=a}function V_(i){var a=cn(),l=Ct;if(l!==null)return P_(a,l,i);cn(),a=a.memoizedState,l=cn();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function Sl(i,a,l,c){return i={tag:i,create:l,deps:c,inst:a,next:null},a=Ge.updateQueue,a===null&&(a=jh(),Ge.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function L_(){return cn().memoizedState}function Vh(i,a,l,c){var p=xr();Ge.flags|=i,p.memoizedState=Sl(1|a,{destroy:void 0},l,c===void 0?null:c)}function Lh(i,a,l,c){var p=cn();c=c===void 0?null:c;var y=p.memoizedState.inst;Ct!==null&&c!==null&&Tg(c,Ct.memoizedState.deps)?p.memoizedState=Sl(a,y,l,c):(Ge.flags|=i,p.memoizedState=Sl(1|a,y,l,c))}function U_(i,a){Vh(8390656,8,i,a)}function jg(i,a){Lh(2048,8,i,a)}function Wk(i){Ge.flags|=4;var a=Ge.updateQueue;if(a===null)a=jh(),Ge.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function z_(i){var a=cn().memoizedState;return Wk({ref:a,nextImpl:i}),function(){if((gt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function B_(i,a){return Lh(4,2,i,a)}function F_(i,a){return Lh(4,4,i,a)}function q_(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function H_(i,a,l){l=l!=null?l.concat([i]):null,Lh(4,4,q_.bind(null,a,i),l)}function Mg(){}function G_(i,a){var l=cn();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&Tg(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function $_(i,a){var l=cn();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&Tg(a,c[1]))return c[0];if(c=i(),xo){le(!0);try{i()}finally{le(!1)}}return l.memoizedState=[c,a],c}function Pg(i,a,l){return l===void 0||(fs&1073741824)!==0&&(rt&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=Kw(),Ge.lanes|=i,la|=i,l)}function K_(i,a,l,c){return $r(l,a)?l:wl.current!==null?(i=Pg(i,l,c),$r(i,a)||(bn=!0),i):(fs&42)===0||(fs&1073741824)!==0&&(rt&261930)===0?(bn=!0,i.memoizedState=l):(i=Kw(),Ge.lanes|=i,la|=i,a)}function Y_(i,a,l,c,p){var y=se.p;se.p=y!==0&&8>y?y:8;var w=Q.T,R={};Q.T=R,Ug(i,!1,a,l);try{var F=p(),X=Q.S;if(X!==null&&X(R,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ie=Gk(F,c);nc(i,a,ie,Jr(i))}else nc(i,a,c,Jr(i))}catch(oe){nc(i,a,{then:function(){},status:"rejected",reason:oe},Jr())}finally{se.p=y,w!==null&&R.types!==null&&(w.types=R.types),Q.T=w}}function Xk(){}function Vg(i,a,l,c){if(i.tag!==5)throw Error(r(476));var p=Q_(i).queue;Y_(i,p,a,he,l===null?Xk:function(){return W_(i),l(c)})}function Q_(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:he},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function W_(i){var a=Q_(i);a.next===null&&(a=i.alternate.memoizedState),nc(i,a.next.queue,{},Jr())}function Lg(){return Yn(bc)}function X_(){return cn().memoizedState}function J_(){return cn().memoizedState}function Jk(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Jr();i=na(l);var c=ra(a,i,l);c!==null&&(Pr(c,a,l),Xu(c,a,l)),a={cache:fg()},i.payload=a;return}a=a.return}}function Zk(i,a,l){var c=Jr();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Uh(i)?ew(a,l):(l=ng(i,a,l,c),l!==null&&(Pr(l,i,c),tw(l,a,c)))}function Z_(i,a,l){var c=Jr();nc(i,a,l,c)}function nc(i,a,l,c){var p={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Uh(i))ew(a,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var w=a.lastRenderedState,R=y(w,l);if(p.hasEagerState=!0,p.eagerState=R,$r(R,w))return bh(i,a,p,0),Ot===null&&yh(),!1}catch{}finally{}if(l=ng(i,a,p,c),l!==null)return Pr(l,i,c),tw(l,a,c),!0}return!1}function Ug(i,a,l,c){if(c={lane:2,revertLane:vv(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Uh(i)){if(a)throw Error(r(479))}else a=ng(i,l,c,2),a!==null&&Pr(a,i,2)}function Uh(i){var a=i.alternate;return i===Ge||a!==null&&a===Ge}function ew(i,a){El=Dh=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function tw(i,a,l){if((l&4194048)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,kt(i,l)}}var rc={readContext:Yn,use:Mh,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};rc.useEffectEvent=en;var nw={readContext:Yn,use:Mh,useCallback:function(i,a){return xr().memoizedState=[i,a===void 0?null:a],i},useContext:Yn,useEffect:U_,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Vh(4194308,4,q_.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Vh(4194308,4,i,a)},useInsertionEffect:function(i,a){Vh(4,2,i,a)},useMemo:function(i,a){var l=xr();a=a===void 0?null:a;var c=i();if(xo){le(!0);try{i()}finally{le(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=xr();if(l!==void 0){var p=l(a);if(xo){le(!0);try{l(a)}finally{le(!1)}}}else p=a;return c.memoizedState=c.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},c.queue=i,i=i.dispatch=Zk.bind(null,Ge,i),[c.memoizedState,i]},useRef:function(i){var a=xr();return i={current:i},a.memoizedState=i},useState:function(i){i=Dg(i);var a=i.queue,l=Z_.bind(null,Ge,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Mg,useDeferredValue:function(i,a){var l=xr();return Pg(l,i,a)},useTransition:function(){var i=Dg(!1);return i=Y_.bind(null,Ge,i.queue,!0,!1),xr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=Ge,p=xr();if(ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Ot===null)throw Error(r(349));(rt&127)!==0||E_(c,a,l)}p.memoizedState=l;var y={value:l,getSnapshot:a};return p.queue=y,U_(S_.bind(null,c,y,i),[i]),c.flags|=2048,Sl(9,{destroy:void 0},T_.bind(null,c,y,l,a),null),l},useId:function(){var i=xr(),a=Ot.identifierPrefix;if(ot){var l=zi,c=Ui;l=(c&~(1<<32-ge(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Oh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=$k++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Lg,useFormState:j_,useActionState:j_,useOptimistic:function(i){var a=xr();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Ug.bind(null,Ge,!0,l),l.dispatch=a,[i,a]},useMemoCache:Ig,useCacheRefresh:function(){return xr().memoizedState=Jk.bind(null,Ge)},useEffectEvent:function(i){var a=xr(),l={impl:i};return a.memoizedState=l,function(){if((gt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},zg={readContext:Yn,use:Mh,useCallback:G_,useContext:Yn,useEffect:jg,useImperativeHandle:H_,useInsertionEffect:B_,useLayoutEffect:F_,useMemo:$_,useReducer:Ph,useRef:L_,useState:function(){return Ph(ms)},useDebugValue:Mg,useDeferredValue:function(i,a){var l=cn();return K_(l,Ct.memoizedState,i,a)},useTransition:function(){var i=Ph(ms)[0],a=cn().memoizedState;return[typeof i=="boolean"?i:tc(i),a]},useSyncExternalStore:w_,useId:X_,useHostTransitionStatus:Lg,useFormState:M_,useActionState:M_,useOptimistic:function(i,a){var l=cn();return R_(l,Ct,i,a)},useMemoCache:Ig,useCacheRefresh:J_};zg.useEffectEvent=z_;var rw={readContext:Yn,use:Mh,useCallback:G_,useContext:Yn,useEffect:jg,useImperativeHandle:H_,useInsertionEffect:B_,useLayoutEffect:F_,useMemo:$_,useReducer:kg,useRef:L_,useState:function(){return kg(ms)},useDebugValue:Mg,useDeferredValue:function(i,a){var l=cn();return Ct===null?Pg(l,i,a):K_(l,Ct.memoizedState,i,a)},useTransition:function(){var i=kg(ms)[0],a=cn().memoizedState;return[typeof i=="boolean"?i:tc(i),a]},useSyncExternalStore:w_,useId:X_,useHostTransitionStatus:Lg,useFormState:V_,useActionState:V_,useOptimistic:function(i,a){var l=cn();return Ct!==null?R_(l,Ct,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Ig,useCacheRefresh:J_};rw.useEffectEvent=z_;function Bg(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:b({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Fg={enqueueSetState:function(i,a,l){i=i._reactInternals;var c=Jr(),p=na(c);p.payload=a,l!=null&&(p.callback=l),a=ra(i,p,c),a!==null&&(Pr(a,i,c),Xu(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=Jr(),p=na(c);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=ra(i,p,c),a!==null&&(Pr(a,i,c),Xu(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Jr(),c=na(l);c.tag=2,a!=null&&(c.callback=a),a=ra(i,c,l),a!==null&&(Pr(a,i,l),Xu(a,i,l))}};function iw(i,a,l,c,p,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,y,w):a.prototype&&a.prototype.isPureReactComponent?!qu(l,c)||!qu(p,y):!0}function sw(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&Fg.enqueueReplaceState(a,a.state,null)}function _o(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=b({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function aw(i){vh(i)}function ow(i){console.error(i)}function lw(i){vh(i)}function zh(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function uw(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function qg(i,a,l){return l=na(l),l.tag=3,l.payload={element:null},l.callback=function(){zh(i,a)},l}function cw(i){return i=na(i),i.tag=3,i}function dw(i,a,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;i.payload=function(){return p(y)},i.callback=function(){uw(a,l,c)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){uw(a,l,c),typeof p!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function eD(i,a,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&vl(a,l,p,!0),l=Yr.current,l!==null){switch(l.tag){case 31:case 13:return hi===null?Jh():l.alternate===null&&tn===0&&(tn=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===Ch?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),mv(i,c,p)),!1;case 22:return l.flags|=65536,c===Ch?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),mv(i,c,p)),!1}throw Error(r(435,l.tag))}return mv(i,c,p),Jh(),!1}if(ot)return a=Yr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,c!==lg&&(i=Error(r(422),{cause:c}),$u(li(i,l)))):(c!==lg&&(a=Error(r(423),{cause:c}),$u(li(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,c=li(c,l),p=qg(i.stateNode,c,p),bg(i,p),tn!==4&&(tn=2)),!1;var y=Error(r(520),{cause:c});if(y=li(y,l),dc===null?dc=[y]:dc.push(y),tn!==4&&(tn=2),a===null)return!0;c=li(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=qg(l.stateNode,c,i),bg(l,i),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ua===null||!ua.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=cw(p),dw(p,i,l,c),bg(l,p),!1}l=l.return}while(l!==null);return!1}var Hg=Error(r(461)),bn=!1;function Qn(i,a,l,c){a.child=i===null?p_(a,null,l,c):bo(a,i.child,l,c)}function hw(i,a,l,c,p){l=l.render;var y=a.ref;if("ref"in c){var w={};for(var R in c)R!=="ref"&&(w[R]=c[R])}else w=c;return po(a),c=Sg(i,a,l,w,y,p),R=Ag(),i!==null&&!bn?(Cg(i,a,p),ps(i,a,p)):(ot&&R&&ag(a),a.flags|=1,Qn(i,a,c,p),a.child)}function fw(i,a,l,c,p){if(i===null){var y=l.type;return typeof y=="function"&&!rg(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,mw(i,a,y,c,p)):(i=_h(l.type,null,c,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!Jg(i,p)){var w=y.memoizedProps;if(l=l.compare,l=l!==null?l:qu,l(w,c)&&i.ref===a.ref)return ps(i,a,p)}return a.flags|=1,i=us(y,c),i.ref=a.ref,i.return=a,a.child=i}function mw(i,a,l,c,p){if(i!==null){var y=i.memoizedProps;if(qu(y,c)&&i.ref===a.ref)if(bn=!1,a.pendingProps=c=y,Jg(i,p))(i.flags&131072)!==0&&(bn=!0);else return a.lanes=i.lanes,ps(i,a,p)}return Gg(i,a,l,c,p)}function pw(i,a,l,c){var p=c.children,y=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(c=a.child=i.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,a.child=null;return gw(i,a,y,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Sh(a,y!==null?y.cachePool:null),y!==null?y_(a,y):_g(),b_(a);else return c=a.lanes=536870912,gw(i,a,y!==null?y.baseLanes|l:l,l,c)}else y!==null?(Sh(a,y.cachePool),y_(a,y),sa(),a.memoizedState=null):(i!==null&&Sh(a,null),_g(),sa());return Qn(i,a,p,l),a.child}function ic(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function gw(i,a,l,c,p){var y=pg();return y=y===null?null:{parent:vn._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},i!==null&&Sh(a,null),_g(),b_(a),i!==null&&vl(i,a,c,!0),a.childLanes=p,null}function Bh(i,a){return a=qh({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function vw(i,a,l){return bo(a,i.child,null,l),i=Bh(a,a.pendingProps),i.flags|=2,Qr(a),a.memoizedState=null,i}function tD(i,a,l){var c=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(ot){if(c.mode==="hidden")return i=Bh(a,c),a.lanes=536870912,ic(null,i);if(Eg(a),(i=zt)?(i=IE(i,di),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Xs!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},l=e_(i),l.return=a,a.child=l,Kn=a,zt=null)):i=null,i===null)throw Zs(a);return a.lanes=536870912,null}return Bh(a,c)}var y=i.memoizedState;if(y!==null){var w=y.dehydrated;if(Eg(a),p)if(a.flags&256)a.flags&=-257,a=vw(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(bn||vl(i,a,l,!1),p=(l&i.childLanes)!==0,bn||p){if(c=Ot,c!==null&&(w=Yt(c,l),w!==0&&w!==y.retryLane))throw y.retryLane=w,co(i,w),Pr(c,i,w),Hg;Jh(),a=vw(i,a,l)}else i=y.treeContext,zt=fi(w.nextSibling),Kn=a,ot=!0,Js=null,di=!1,i!==null&&r_(a,i),a=Bh(a,c),a.flags|=4096;return a}return i=us(i.child,{mode:c.mode,children:c.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Fh(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Gg(i,a,l,c,p){return po(a),l=Sg(i,a,l,c,void 0,p),c=Ag(),i!==null&&!bn?(Cg(i,a,p),ps(i,a,p)):(ot&&c&&ag(a),a.flags|=1,Qn(i,a,l,p),a.child)}function yw(i,a,l,c,p,y){return po(a),a.updateQueue=null,l=__(a,c,l,p),x_(i),c=Ag(),i!==null&&!bn?(Cg(i,a,y),ps(i,a,y)):(ot&&c&&ag(a),a.flags|=1,Qn(i,a,l,y),a.child)}function bw(i,a,l,c,p){if(po(a),a.stateNode===null){var y=fl,w=l.contextType;typeof w=="object"&&w!==null&&(y=Yn(w)),y=new l(c,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Fg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=c,y.state=a.memoizedState,y.refs={},vg(a),w=l.contextType,y.context=typeof w=="object"&&w!==null?Yn(w):fl,y.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Bg(a,l,w,c),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Fg.enqueueReplaceState(y,y.state,null),Zu(a,c,y,p),Ju(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){y=a.stateNode;var R=a.memoizedProps,F=_o(l,R);y.props=F;var X=y.context,ie=l.contextType;w=fl,typeof ie=="object"&&ie!==null&&(w=Yn(ie));var oe=l.getDerivedStateFromProps;ie=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||X!==w)&&sw(a,y,c,w),ta=!1;var Z=a.memoizedState;y.state=Z,Zu(a,c,y,p),Ju(),X=a.memoizedState,R||Z!==X||ta?(typeof oe=="function"&&(Bg(a,l,oe,c),X=a.memoizedState),(F=ta||iw(a,l,F,c,Z,X,w))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=X),y.props=c,y.state=X,y.context=w,c=F):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{y=a.stateNode,yg(i,a),w=a.memoizedProps,ie=_o(l,w),y.props=ie,oe=a.pendingProps,Z=y.context,X=l.contextType,F=fl,typeof X=="object"&&X!==null&&(F=Yn(X)),R=l.getDerivedStateFromProps,(X=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==oe||Z!==F)&&sw(a,y,c,F),ta=!1,Z=a.memoizedState,y.state=Z,Zu(a,c,y,p),Ju();var te=a.memoizedState;w!==oe||Z!==te||ta||i!==null&&i.dependencies!==null&&Eh(i.dependencies)?(typeof R=="function"&&(Bg(a,l,R,c),te=a.memoizedState),(ie=ta||iw(a,l,ie,c,Z,te,F)||i!==null&&i.dependencies!==null&&Eh(i.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,te,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,te,F)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&Z===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&Z===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=te),y.props=c,y.state=te,y.context=F,c=ie):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&Z===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&Z===i.memoizedState||(a.flags|=1024),c=!1)}return y=c,Fh(i,a),c=(a.flags&128)!==0,y||c?(y=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&c?(a.child=bo(a,i.child,null,p),a.child=bo(a,null,l,p)):Qn(i,a,l,p),a.memoizedState=y.state,i=a.child):i=ps(i,a,p),i}function xw(i,a,l,c){return fo(),a.flags|=256,Qn(i,a,l,c),a.child}var $g={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kg(i){return{baseLanes:i,cachePool:u_()}}function Yg(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Xr),i}function _w(i,a,l){var c=a.pendingProps,p=!1,y=(a.flags&128)!==0,w;if((w=y)||(w=i!==null&&i.memoizedState===null?!1:(un.current&2)!==0),w&&(p=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,i===null){if(ot){if(p?ia(a):sa(),(i=zt)?(i=IE(i,di),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Xs!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},l=e_(i),l.return=a,a.child=l,Kn=a,zt=null)):i=null,i===null)throw Zs(a);return Nv(i)?a.lanes=32:a.lanes=536870912,null}var R=c.children;return c=c.fallback,p?(sa(),p=a.mode,R=qh({mode:"hidden",children:R},p),c=ho(c,p,l,null),R.return=a,c.return=a,R.sibling=c,a.child=R,c=a.child,c.memoizedState=Kg(l),c.childLanes=Yg(i,w,l),a.memoizedState=$g,ic(null,c)):(ia(a),Qg(a,R))}var F=i.memoizedState;if(F!==null&&(R=F.dehydrated,R!==null)){if(y)a.flags&256?(ia(a),a.flags&=-257,a=Wg(i,a,l)):a.memoizedState!==null?(sa(),a.child=i.child,a.flags|=128,a=null):(sa(),R=c.fallback,p=a.mode,c=qh({mode:"visible",children:c.children},p),R=ho(R,p,l,null),R.flags|=2,c.return=a,R.return=a,c.sibling=R,a.child=c,bo(a,i.child,null,l),c=a.child,c.memoizedState=Kg(l),c.childLanes=Yg(i,w,l),a.memoizedState=$g,a=ic(null,c));else if(ia(a),Nv(R)){if(w=R.nextSibling&&R.nextSibling.dataset,w)var X=w.dgst;w=X,c=Error(r(419)),c.stack="",c.digest=w,$u({value:c,source:null,stack:null}),a=Wg(i,a,l)}else if(bn||vl(i,a,l,!1),w=(l&i.childLanes)!==0,bn||w){if(w=Ot,w!==null&&(c=Yt(w,l),c!==0&&c!==F.retryLane))throw F.retryLane=c,co(i,c),Pr(w,i,c),Hg;Iv(R)||Jh(),a=Wg(i,a,l)}else Iv(R)?(a.flags|=192,a.child=i.child,a=null):(i=F.treeContext,zt=fi(R.nextSibling),Kn=a,ot=!0,Js=null,di=!1,i!==null&&r_(a,i),a=Qg(a,c.children),a.flags|=4096);return a}return p?(sa(),R=c.fallback,p=a.mode,F=i.child,X=F.sibling,c=us(F,{mode:"hidden",children:c.children}),c.subtreeFlags=F.subtreeFlags&65011712,X!==null?R=us(X,R):(R=ho(R,p,l,null),R.flags|=2),R.return=a,c.return=a,c.sibling=R,a.child=c,ic(null,c),c=a.child,R=i.child.memoizedState,R===null?R=Kg(l):(p=R.cachePool,p!==null?(F=vn._currentValue,p=p.parent!==F?{parent:F,pool:F}:p):p=u_(),R={baseLanes:R.baseLanes|l,cachePool:p}),c.memoizedState=R,c.childLanes=Yg(i,w,l),a.memoizedState=$g,ic(i.child,c)):(ia(a),l=i.child,i=l.sibling,l=us(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(w=a.deletions,w===null?(a.deletions=[i],a.flags|=16):w.push(i)),a.child=l,a.memoizedState=null,l)}function Qg(i,a){return a=qh({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function qh(i,a){return i=Kr(22,i,null,a),i.lanes=0,i}function Wg(i,a,l){return bo(a,i.child,null,l),i=Qg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function ww(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),dg(i.return,a,l)}function Xg(i,a,l,c,p,y){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p,treeForkCount:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=l,w.tailMode=p,w.treeForkCount=y)}function Ew(i,a,l){var c=a.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var w=un.current,R=(w&2)!==0;if(R?(w=w&1|2,a.flags|=128):w&=1,ee(un,w),Qn(i,a,c,l),c=ot?Gu:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ww(i,l,a);else if(i.tag===19)ww(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&kh(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Xg(a,!1,p,l,y,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&kh(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Xg(a,!0,l,null,y,c);break;case"together":Xg(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function ps(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),la|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(vl(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=us(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=us(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Jg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Eh(i)))}function nD(i,a,l){switch(a.tag){case 3:Mt(a,a.stateNode.containerInfo),ea(a,vn,i.memoizedState.cache),fo();break;case 27:case 5:qn(a);break;case 4:Mt(a,a.stateNode.containerInfo);break;case 10:ea(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Eg(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(ia(a),a.flags|=128,null):(l&a.child.childLanes)!==0?_w(i,a,l):(ia(a),i=ps(i,a,l),i!==null?i.sibling:null);ia(a);break;case 19:var p=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(vl(i,a,l,!1),c=(l&a.childLanes)!==0),p){if(c)return Ew(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ee(un,un.current),c)break;return null;case 22:return a.lanes=0,pw(i,a,l,a.pendingProps);case 24:ea(a,vn,i.memoizedState.cache)}return ps(i,a,l)}function Tw(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)bn=!0;else{if(!Jg(i,l)&&(a.flags&128)===0)return bn=!1,nD(i,a,l);bn=(i.flags&131072)!==0}else bn=!1,ot&&(a.flags&1048576)!==0&&n_(a,Gu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(i=vo(a.elementType),a.type=i,typeof i=="function")rg(i)?(c=_o(i,c),a.tag=1,a=bw(null,a,i,c,l)):(a.tag=0,a=Gg(null,a,i,c,l));else{if(i!=null){var p=i.$$typeof;if(p===G){a.tag=11,a=hw(null,a,i,c,l);break e}else if(p===C){a.tag=14,a=fw(null,a,i,c,l);break e}}throw a=be(i)||i,Error(r(306,a,""))}}return a;case 0:return Gg(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,p=_o(c,a.pendingProps),bw(i,a,c,p,l);case 3:e:{if(Mt(a,a.stateNode.containerInfo),i===null)throw Error(r(387));c=a.pendingProps;var y=a.memoizedState;p=y.element,yg(i,a),Zu(a,c,null,l);var w=a.memoizedState;if(c=w.cache,ea(a,vn,c),c!==y.cache&&hg(a,[vn],l,!0),Ju(),c=w.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=xw(i,a,c,l);break e}else if(c!==p){p=li(Error(r(424)),a),$u(p),a=xw(i,a,c,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(zt=fi(i.firstChild),Kn=a,ot=!0,Js=null,di=!0,l=p_(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(fo(),c===p){a=ps(i,a,l);break e}Qn(i,a,c,l)}a=a.child}return a;case 26:return Fh(i,a),i===null?(l=ME(a.type,null,a.pendingProps,null))?a.memoizedState=l:ot||(l=a.type,i=a.pendingProps,c=af(je.current).createElement(l),c[Dt]=a,c[Qt]=i,Wn(c,l,i),ve(c),a.stateNode=c):a.memoizedState=ME(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return qn(a),i===null&&ot&&(c=a.stateNode=DE(a.type,a.pendingProps,je.current),Kn=a,di=!0,p=zt,fa(a.type)?(kv=p,zt=fi(c.firstChild)):zt=p),Qn(i,a,a.pendingProps.children,l),Fh(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&ot&&((p=c=zt)&&(c=DD(c,a.type,a.pendingProps,di),c!==null?(a.stateNode=c,Kn=a,zt=fi(c.firstChild),di=!1,p=!0):p=!1),p||Zs(a)),qn(a),p=a.type,y=a.pendingProps,w=i!==null?i.memoizedProps:null,c=y.children,Av(p,y)?c=null:w!==null&&Av(p,w)&&(a.flags|=32),a.memoizedState!==null&&(p=Sg(i,a,Kk,null,null,l),bc._currentValue=p),Fh(i,a),Qn(i,a,c,l),a.child;case 6:return i===null&&ot&&((i=l=zt)&&(l=OD(l,a.pendingProps,di),l!==null?(a.stateNode=l,Kn=a,zt=null,i=!0):i=!1),i||Zs(a)),null;case 13:return _w(i,a,l);case 4:return Mt(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=bo(a,null,c,l):Qn(i,a,c,l),a.child;case 11:return hw(i,a,a.type,a.pendingProps,l);case 7:return Qn(i,a,a.pendingProps,l),a.child;case 8:return Qn(i,a,a.pendingProps.children,l),a.child;case 12:return Qn(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,ea(a,a.type,c.value),Qn(i,a,c.children,l),a.child;case 9:return p=a.type._context,c=a.pendingProps.children,po(a),p=Yn(p),c=c(p),a.flags|=1,Qn(i,a,c,l),a.child;case 14:return fw(i,a,a.type,a.pendingProps,l);case 15:return mw(i,a,a.type,a.pendingProps,l);case 19:return Ew(i,a,l);case 31:return tD(i,a,l);case 22:return pw(i,a,l,a.pendingProps);case 24:return po(a),c=Yn(vn),i===null?(p=pg(),p===null&&(p=Ot,y=fg(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),a.memoizedState={parent:c,cache:p},vg(a),ea(a,vn,p)):((i.lanes&l)!==0&&(yg(i,a),Zu(a,null,null,l),Ju()),p=i.memoizedState,y=a.memoizedState,p.parent!==c?(p={parent:c,cache:c},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),ea(a,vn,c)):(c=y.cache,ea(a,vn,c),c!==p.cache&&hg(a,[vn],l,!0))),Qn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function gs(i){i.flags|=4}function Zg(i,a,l,c,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(Xw())i.flags|=8192;else throw yo=Ch,gg}else i.flags&=-16777217}function Sw(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!zE(a))if(Xw())i.flags|=8192;else throw yo=Ch,gg}function Hh(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Sn():536870912,i.lanes|=a,Il|=a)}function sc(i,a){if(!ot)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Bt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function rD(i,a,l){var c=a.pendingProps;switch(og(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return Bt(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),hs(vn),St(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(gl(a)?gs(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ug())),Bt(a),null;case 26:var p=a.type,y=a.memoizedState;return i===null?(gs(a),y!==null?(Bt(a),Sw(a,y)):(Bt(a),Zg(a,p,null,c,l))):y?y!==i.memoizedState?(gs(a),Bt(a),Sw(a,y)):(Bt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==c&&gs(a),Bt(a),Zg(a,p,i,c,l)),null;case 27:if(Tr(a),l=je.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&gs(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Bt(a),null}i=re.current,gl(a)?i_(a):(i=DE(p,c,l),a.stateNode=i,gs(a))}return Bt(a),null;case 5:if(Tr(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&gs(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Bt(a),null}if(y=re.current,gl(a))i_(a);else{var w=af(je.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?w.createElement(p,{is:c.is}):w.createElement(p)}}y[Dt]=a,y[Qt]=c;e:for(w=a.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===a)break e;for(;w.sibling===null;){if(w.return===null||w.return===a)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}a.stateNode=y;e:switch(Wn(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&gs(a)}}return Bt(a),Zg(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&gs(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=je.current,gl(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,p=Kn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}i[Dt]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||_E(i.nodeValue,l)),i||Zs(a,!0)}else i=af(i).createTextNode(c),i[Dt]=a,a.stateNode=i}return Bt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(c=gl(a),l!==null){if(i===null){if(!c)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Dt]=a}else fo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),i=!1}else l=ug(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(Qr(a),a):(Qr(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Bt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=gl(a),c!==null&&c.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Dt]=a}else fo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),p=!1}else p=ug(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Qr(a),a):(Qr(a),null)}return Qr(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,i=i!==null&&i.memoizedState!==null,l&&(c=a.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),Hh(a,a.updateQueue),Bt(a),null);case 4:return St(),i===null&&_v(a.stateNode.containerInfo),Bt(a),null;case 10:return hs(a.type),Bt(a),null;case 19:if(J(un),c=a.memoizedState,c===null)return Bt(a),null;if(p=(a.flags&128)!==0,y=c.rendering,y===null)if(p)sc(c,!1);else{if(tn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=kh(i),y!==null){for(a.flags|=128,sc(c,!1),i=y.updateQueue,a.updateQueue=i,Hh(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Zx(l,i),l=l.sibling;return ee(un,un.current&1|2),ot&&cs(a,c.treeForkCount),a.child}i=i.sibling}c.tail!==null&&wt()>Qh&&(a.flags|=128,p=!0,sc(c,!1),a.lanes=4194304)}else{if(!p)if(i=kh(y),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,Hh(a,i),sc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!ot)return Bt(a),null}else 2*wt()-c.renderingStartTime>Qh&&l!==536870912&&(a.flags|=128,p=!0,sc(c,!1),a.lanes=4194304);c.isBackwards?(y.sibling=a.child,a.child=y):(i=c.last,i!==null?i.sibling=y:a.child=y,c.last=y)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=wt(),i.sibling=null,l=un.current,ee(un,p?l&1|2:l&1),ot&&cs(a,c.treeForkCount),i):(Bt(a),null);case 22:case 23:return Qr(a),wg(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),l=a.updateQueue,l!==null&&Hh(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&J(go),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),hs(vn),Bt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function iD(i,a){switch(og(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return hs(vn),St(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Tr(a),null;case 31:if(a.memoizedState!==null){if(Qr(a),a.alternate===null)throw Error(r(340));fo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Qr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));fo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return J(un),null;case 4:return St(),null;case 10:return hs(a.type),null;case 22:case 23:return Qr(a),wg(),i!==null&&J(go),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return hs(vn),null;case 25:return null;default:return null}}function Aw(i,a){switch(og(a),a.tag){case 3:hs(vn),St();break;case 26:case 27:case 5:Tr(a);break;case 4:St();break;case 31:a.memoizedState!==null&&Qr(a);break;case 13:Qr(a);break;case 19:J(un);break;case 10:hs(a.type);break;case 22:case 23:Qr(a),wg(),i!==null&&J(go);break;case 24:hs(vn)}}function ac(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&i)===i){c=void 0;var y=l.create,w=l.inst;c=y(),w.destroy=c}l=l.next}while(l!==p)}}catch(R){Tt(a,a.return,R)}}function aa(i,a,l){try{var c=a.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&i)===i){var w=c.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,p=a;var F=l,X=R;try{X()}catch(ie){Tt(p,F,ie)}}}c=c.next}while(c!==y)}}catch(ie){Tt(a,a.return,ie)}}function Cw(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{v_(a,l)}catch(c){Tt(i,i.return,c)}}}function Rw(i,a,l){l.props=_o(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){Tt(i,a,c)}}function oc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof l=="function"?i.refCleanup=l(c):l.current=c}}catch(p){Tt(i,a,p)}}function Bi(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){Tt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Tt(i,a,p)}else l.current=null}function Iw(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){Tt(i,i.return,p)}}function ev(i,a,l){try{var c=i.stateNode;AD(c,i.type,l,a),c[Qt]=a}catch(p){Tt(i,i.return,p)}}function Nw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&fa(i.type)||i.tag===4}function tv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Nw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&fa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function nv(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Vn));else if(c!==4&&(c===27&&fa(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(nv(i,a,l),i=i.sibling;i!==null;)nv(i,a,l),i=i.sibling}function Gh(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&(c===27&&fa(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Gh(i,a,l),i=i.sibling;i!==null;)Gh(i,a,l),i=i.sibling}function kw(i){var a=i.stateNode,l=i.memoizedProps;try{for(var c=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Wn(a,c,l),a[Dt]=i,a[Qt]=l}catch(y){Tt(i,i.return,y)}}var vs=!1,xn=!1,rv=!1,Dw=typeof WeakSet=="function"?WeakSet:Set,zn=null;function sD(i,a){if(i=i.containerInfo,Tv=ff,i=Hx(i),Wp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var w=0,R=-1,F=-1,X=0,ie=0,oe=i,Z=null;t:for(;;){for(var te;oe!==l||p!==0&&oe.nodeType!==3||(R=w+p),oe!==y||c!==0&&oe.nodeType!==3||(F=w+c),oe.nodeType===3&&(w+=oe.nodeValue.length),(te=oe.firstChild)!==null;)Z=oe,oe=te;for(;;){if(oe===i)break t;if(Z===l&&++X===p&&(R=w),Z===y&&++ie===c&&(F=w),(te=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=te}l=R===-1||F===-1?null:{start:R,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(Sv={focusedElem:i,selectionRange:l},ff=!1,zn=a;zn!==null;)if(a=zn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,zn=i;else for(;zn!==null;){switch(a=zn,y=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=a,p=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var Se=_o(l.type,p);i=c.getSnapshotBeforeUpdate(Se,y),c.__reactInternalSnapshotBeforeUpdate=i}catch(Oe){Tt(l,l.return,Oe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Rv(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Rv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,zn=i;break}zn=a.return}}function Ow(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:bs(i,l),c&4&&ac(5,l);break;case 1:if(bs(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(w){Tt(l,l.return,w)}else{var p=_o(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(w){Tt(l,l.return,w)}}c&64&&Cw(l),c&512&&oc(l,l.return);break;case 3:if(bs(i,l),c&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{v_(i,a)}catch(w){Tt(l,l.return,w)}}break;case 27:a===null&&c&4&&kw(l);case 26:case 5:bs(i,l),a===null&&c&4&&Iw(l),c&512&&oc(l,l.return);break;case 12:bs(i,l);break;case 31:bs(i,l),c&4&&Pw(i,l);break;case 13:bs(i,l),c&4&&Vw(i,l),c&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=mD.bind(null,l),jD(i,l))));break;case 22:if(c=l.memoizedState!==null||vs,!c){a=a!==null&&a.memoizedState!==null||xn,p=vs;var y=xn;vs=c,(xn=a)&&!y?xs(i,l,(l.subtreeFlags&8772)!==0):bs(i,l),vs=p,xn=y}break;case 30:break;default:bs(i,l)}}function jw(i){var a=i.alternate;a!==null&&(i.alternate=null,jw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Rr(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Gt=null,Dr=!1;function ys(i,a,l){for(l=l.child;l!==null;)Mw(i,a,l),l=l.sibling}function Mw(i,a,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(rr,l)}catch{}switch(l.tag){case 26:xn||Bi(l,a),ys(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:xn||Bi(l,a);var c=Gt,p=Dr;fa(l.type)&&(Gt=l.stateNode,Dr=!1),ys(i,a,l),gc(l.stateNode),Gt=c,Dr=p;break;case 5:xn||Bi(l,a);case 6:if(c=Gt,p=Dr,Gt=null,ys(i,a,l),Gt=c,Dr=p,Gt!==null)if(Dr)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(l.stateNode)}catch(y){Tt(l,a,y)}else try{Gt.removeChild(l.stateNode)}catch(y){Tt(l,a,y)}break;case 18:Gt!==null&&(Dr?(i=Gt,CE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Vl(i)):CE(Gt,l.stateNode));break;case 4:c=Gt,p=Dr,Gt=l.stateNode.containerInfo,Dr=!0,ys(i,a,l),Gt=c,Dr=p;break;case 0:case 11:case 14:case 15:aa(2,l,a),xn||aa(4,l,a),ys(i,a,l);break;case 1:xn||(Bi(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Rw(l,a,c)),ys(i,a,l);break;case 21:ys(i,a,l);break;case 22:xn=(c=xn)||l.memoizedState!==null,ys(i,a,l),xn=c;break;default:ys(i,a,l)}}function Pw(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Vl(i)}catch(l){Tt(a,a.return,l)}}}function Vw(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Vl(i)}catch(l){Tt(a,a.return,l)}}function aD(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Dw),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Dw),a;default:throw Error(r(435,i.tag))}}function $h(i,a){var l=aD(i);a.forEach(function(c){if(!l.has(c)){l.add(c);var p=pD.bind(null,i,c);c.then(p,p)}})}function Or(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],y=i,w=a,R=w;e:for(;R!==null;){switch(R.tag){case 27:if(fa(R.type)){Gt=R.stateNode,Dr=!1;break e}break;case 5:Gt=R.stateNode,Dr=!1;break e;case 3:case 4:Gt=R.stateNode.containerInfo,Dr=!0;break e}R=R.return}if(Gt===null)throw Error(r(160));Mw(y,w,p),Gt=null,Dr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Lw(a,i),a=a.sibling}var Ti=null;function Lw(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Or(a,i),jr(i),c&4&&(aa(3,i,i.return),ac(3,i),aa(5,i,i.return));break;case 1:Or(a,i),jr(i),c&512&&(xn||l===null||Bi(l,l.return)),c&64&&vs&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=Ti;if(Or(a,i),jr(i),c&512&&(xn||l===null||Bi(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Gn]||y[Dt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),Wn(y,c,l),y[Dt]=i,ve(y),c=y;break e;case"link":var w=LE("link","href",p).get(c+(l.href||""));if(w){for(var R=0;R<w.length;R++)if(y=w[R],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(R,1);break t}}y=p.createElement(c),Wn(y,c,l),p.head.appendChild(y);break;case"meta":if(w=LE("meta","content",p).get(c+(l.content||""))){for(R=0;R<w.length;R++)if(y=w[R],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(R,1);break t}}y=p.createElement(c),Wn(y,c,l),p.head.appendChild(y);break;default:throw Error(r(468,c))}y[Dt]=i,ve(y),c=y}i.stateNode=c}else UE(p,i.type,i.stateNode);else i.stateNode=VE(p,c,i.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?UE(p,i.type,i.stateNode):VE(p,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ev(i,i.memoizedProps,l.memoizedProps)}break;case 27:Or(a,i),jr(i),c&512&&(xn||l===null||Bi(l,l.return)),l!==null&&c&4&&ev(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Or(a,i),jr(i),c&512&&(xn||l===null||Bi(l,l.return)),i.flags&32){p=i.stateNode;try{ai(p,"")}catch(Se){Tt(i,i.return,Se)}}c&4&&i.stateNode!=null&&(p=i.memoizedProps,ev(i,p,l!==null?l.memoizedProps:p)),c&1024&&(rv=!0);break;case 6:if(Or(a,i),jr(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(Se){Tt(i,i.return,Se)}}break;case 3:if(uf=null,p=Ti,Ti=of(a.containerInfo),Or(a,i),Ti=p,jr(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Vl(a.containerInfo)}catch(Se){Tt(i,i.return,Se)}rv&&(rv=!1,Uw(i));break;case 4:c=Ti,Ti=of(i.stateNode.containerInfo),Or(a,i),jr(i),Ti=c;break;case 12:Or(a,i),jr(i);break;case 31:Or(a,i),jr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$h(i,c)));break;case 13:Or(a,i),jr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Yh=wt()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$h(i,c)));break;case 22:p=i.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,X=vs,ie=xn;if(vs=X||p,xn=ie||F,Or(a,i),xn=ie,vs=X,jr(i),c&8192)e:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||F||vs||xn||wo(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(y=F.stateNode,p)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{R=F.stateNode;var oe=F.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;R.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Se){Tt(F,F.return,Se)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=p?"":F.memoizedProps}catch(Se){Tt(F,F.return,Se)}}}else if(a.tag===18){if(l===null){F=a;try{var te=F.stateNode;p?RE(te,!0):RE(F.stateNode,!1)}catch(Se){Tt(F,F.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,$h(i,l))));break;case 19:Or(a,i),jr(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$h(i,c)));break;case 30:break;case 21:break;default:Or(a,i),jr(i)}}function jr(i){var a=i.flags;if(a&2){try{for(var l,c=i.return;c!==null;){if(Nw(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var p=l.stateNode,y=tv(i);Gh(i,y,p);break;case 5:var w=l.stateNode;l.flags&32&&(ai(w,""),l.flags&=-33);var R=tv(i);Gh(i,R,w);break;case 3:case 4:var F=l.stateNode.containerInfo,X=tv(i);nv(i,X,F);break;default:throw Error(r(161))}}catch(ie){Tt(i,i.return,ie)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Uw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Uw(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function bs(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ow(i,a.alternate,a),a=a.sibling}function wo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:aa(4,a,a.return),wo(a);break;case 1:Bi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Rw(a,a.return,l),wo(a);break;case 27:gc(a.stateNode);case 26:case 5:Bi(a,a.return),wo(a);break;case 22:a.memoizedState===null&&wo(a);break;case 30:wo(a);break;default:wo(a)}i=i.sibling}}function xs(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,p=i,y=a,w=y.flags;switch(y.tag){case 0:case 11:case 15:xs(p,y,l),ac(4,y);break;case 1:if(xs(p,y,l),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){Tt(c,c.return,X)}if(c=y,p=c.updateQueue,p!==null){var R=c.stateNode;try{var F=p.shared.hiddenCallbacks;if(F!==null)for(p.shared.hiddenCallbacks=null,p=0;p<F.length;p++)g_(F[p],R)}catch(X){Tt(c,c.return,X)}}l&&w&64&&Cw(y),oc(y,y.return);break;case 27:kw(y);case 26:case 5:xs(p,y,l),l&&c===null&&w&4&&Iw(y),oc(y,y.return);break;case 12:xs(p,y,l);break;case 31:xs(p,y,l),l&&w&4&&Pw(p,y);break;case 13:xs(p,y,l),l&&w&4&&Vw(p,y);break;case 22:y.memoizedState===null&&xs(p,y,l),oc(y,y.return);break;case 30:break;default:xs(p,y,l)}a=a.sibling}}function iv(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Ku(l))}function sv(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ku(i))}function Si(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)zw(i,a,l,c),a=a.sibling}function zw(i,a,l,c){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Si(i,a,l,c),p&2048&&ac(9,a);break;case 1:Si(i,a,l,c);break;case 3:Si(i,a,l,c),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ku(i)));break;case 12:if(p&2048){Si(i,a,l,c),i=a.stateNode;try{var y=a.memoizedProps,w=y.id,R=y.onPostCommit;typeof R=="function"&&R(w,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){Tt(a,a.return,F)}}else Si(i,a,l,c);break;case 31:Si(i,a,l,c);break;case 13:Si(i,a,l,c);break;case 23:break;case 22:y=a.stateNode,w=a.alternate,a.memoizedState!==null?y._visibility&2?Si(i,a,l,c):lc(i,a):y._visibility&2?Si(i,a,l,c):(y._visibility|=2,Al(i,a,l,c,(a.subtreeFlags&10256)!==0||!1)),p&2048&&iv(w,a);break;case 24:Si(i,a,l,c),p&2048&&sv(a.alternate,a);break;default:Si(i,a,l,c)}}function Al(i,a,l,c,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=i,w=a,R=l,F=c,X=w.flags;switch(w.tag){case 0:case 11:case 15:Al(y,w,R,F,p),ac(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?Al(y,w,R,F,p):lc(y,w):(ie._visibility|=2,Al(y,w,R,F,p)),p&&X&2048&&iv(w.alternate,w);break;case 24:Al(y,w,R,F,p),p&&X&2048&&sv(w.alternate,w);break;default:Al(y,w,R,F,p)}a=a.sibling}}function lc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,p=c.flags;switch(c.tag){case 22:lc(l,c),p&2048&&iv(c.alternate,c);break;case 24:lc(l,c),p&2048&&sv(c.alternate,c);break;default:lc(l,c)}a=a.sibling}}var uc=8192;function Cl(i,a,l){if(i.subtreeFlags&uc)for(i=i.child;i!==null;)Bw(i,a,l),i=i.sibling}function Bw(i,a,l){switch(i.tag){case 26:Cl(i,a,l),i.flags&uc&&i.memoizedState!==null&&$D(l,Ti,i.memoizedState,i.memoizedProps);break;case 5:Cl(i,a,l);break;case 3:case 4:var c=Ti;Ti=of(i.stateNode.containerInfo),Cl(i,a,l),Ti=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=uc,uc=16777216,Cl(i,a,l),uc=c):Cl(i,a,l));break;default:Cl(i,a,l)}}function Fw(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function cc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];zn=c,Hw(c,i)}Fw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)qw(i),i=i.sibling}function qw(i){switch(i.tag){case 0:case 11:case 15:cc(i),i.flags&2048&&aa(9,i,i.return);break;case 3:cc(i);break;case 12:cc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Kh(i)):cc(i);break;default:cc(i)}}function Kh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];zn=c,Hw(c,i)}Fw(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:aa(8,a,a.return),Kh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Kh(a));break;default:Kh(a)}i=i.sibling}}function Hw(i,a){for(;zn!==null;){var l=zn;switch(l.tag){case 0:case 11:case 15:aa(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ku(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,zn=c;else e:for(l=i;zn!==null;){c=zn;var p=c.sibling,y=c.return;if(jw(c),c===l){zn=null;break e}if(p!==null){p.return=y,zn=p;break e}zn=y}}}var oD={getCacheForType:function(i){var a=Yn(vn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Yn(vn).controller.signal}},lD=typeof WeakMap=="function"?WeakMap:Map,gt=0,Ot=null,et=null,rt=0,Et=0,Wr=null,oa=!1,Rl=!1,av=!1,_s=0,tn=0,la=0,Eo=0,ov=0,Xr=0,Il=0,dc=null,Mr=null,lv=!1,Yh=0,Gw=0,Qh=1/0,Wh=null,ua=null,In=0,ca=null,Nl=null,ws=0,uv=0,cv=null,$w=null,hc=0,dv=null;function Jr(){return(gt&2)!==0&&rt!==0?rt&-rt:Q.T!==null?vv():Pn()}function Kw(){if(Xr===0)if((rt&536870912)===0||ot){var i=Ye;Ye<<=1,(Ye&3932160)===0&&(Ye=262144),Xr=i}else Xr=536870912;return i=Yr.current,i!==null&&(i.flags|=32),Xr}function Pr(i,a,l){(i===Ot&&(Et===2||Et===9)||i.cancelPendingCommit!==null)&&(kl(i,0),da(i,rt,Xr,!1)),De(i,l),((gt&2)===0||i!==Ot)&&(i===Ot&&((gt&2)===0&&(Eo|=l),tn===4&&da(i,rt,Xr,!1)),Fi(i))}function Yw(i,a,l){if((gt&6)!==0)throw Error(r(327));var c=!l&&(a&127)===0&&(a&i.expiredLanes)===0||Le(i,a),p=c?dD(i,a):fv(i,a,!0),y=c;do{if(p===0){Rl&&!c&&da(i,a,0,!1);break}else{if(l=i.current.alternate,y&&!uD(l)){p=fv(i,a,!1),y=!1;continue}if(p===2){if(y=a,i.errorRecoveryDisabledLanes&y)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var R=i;p=dc;var F=R.current.memoizedState.isDehydrated;if(F&&(kl(R,w).flags|=256),w=fv(R,w,!1),w!==2){if(av&&!F){R.errorRecoveryDisabledLanes|=y,Eo|=y,p=4;break e}y=Mr,Mr=p,y!==null&&(Mr===null?Mr=y:Mr.push.apply(Mr,y))}p=w}if(y=!1,p!==2)continue}}if(p===1){kl(i,0),da(i,a,0,!0);break}e:{switch(c=i,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:da(c,a,Xr,!oa);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(p=Yh+300-wt(),10<p)){if(da(c,a,Xr,!oa),Re(c,0,!0)!==0)break e;ws=a,c.timeoutHandle=SE(Qw.bind(null,c,l,Mr,Wh,lv,a,Xr,Eo,Il,oa,y,"Throttled",-0,0),p);break e}Qw(c,l,Mr,Wh,lv,a,Xr,Eo,Il,oa,y,null,-0,0)}}break}while(!0);Fi(i)}function Qw(i,a,l,c,p,y,w,R,F,X,ie,oe,Z,te){if(i.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vn},Bw(a,y,oe);var Se=(y&62914560)===y?Yh-wt():(y&4194048)===y?Gw-wt():0;if(Se=KD(oe,Se),Se!==null){ws=y,i.cancelPendingCommit=Se(rE.bind(null,i,a,y,l,c,p,w,R,F,ie,oe,null,Z,te)),da(i,y,w,!X);return}}rE(i,a,y,l,c,p,w,R,F)}function uD(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],y=p.getSnapshot;p=p.value;try{if(!$r(y(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function da(i,a,l,c){a&=~ov,a&=~Eo,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var p=a;0<p;){var y=31-ge(p),w=1<<y;c[y]=-1,p&=~w}l!==0&&ln(i,l,a)}function Xh(){return(gt&6)===0?(fc(0),!1):!0}function hv(){if(et!==null){if(Et===0)var i=et.return;else i=et,ds=mo=null,Rg(i),_l=null,Qu=0,i=et;for(;i!==null;)Aw(i.alternate,i),i=i.return;et=null}}function kl(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,ID(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),ws=0,hv(),Ot=i,et=l=us(i.current,null),rt=a,Et=0,Wr=null,oa=!1,Rl=Le(i,a),av=!1,Il=Xr=ov=Eo=la=tn=0,Mr=dc=null,lv=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var p=31-ge(c),y=1<<p;a|=i[p],c&=~y}return _s=a,yh(),l}function Ww(i,a){Ge=null,Q.H=rc,a===xl||a===Ah?(a=h_(),Et=3):a===gg?(a=h_(),Et=4):Et=a===Hg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Wr=a,et===null&&(tn=1,zh(i,li(a,i.current)))}function Xw(){var i=Yr.current;return i===null?!0:(rt&4194048)===rt?hi===null:(rt&62914560)===rt||(rt&536870912)!==0?i===hi:!1}function Jw(){var i=Q.H;return Q.H=rc,i===null?rc:i}function Zw(){var i=Q.A;return Q.A=oD,i}function Jh(){tn=4,oa||(rt&4194048)!==rt&&Yr.current!==null||(Rl=!0),(la&134217727)===0&&(Eo&134217727)===0||Ot===null||da(Ot,rt,Xr,!1)}function fv(i,a,l){var c=gt;gt|=2;var p=Jw(),y=Zw();(Ot!==i||rt!==a)&&(Wh=null,kl(i,a)),a=!1;var w=tn;e:do try{if(Et!==0&&et!==null){var R=et,F=Wr;switch(Et){case 8:hv(),w=6;break e;case 3:case 2:case 9:case 6:Yr.current===null&&(a=!0);var X=Et;if(Et=0,Wr=null,Dl(i,R,F,X),l&&Rl){w=0;break e}break;default:X=Et,Et=0,Wr=null,Dl(i,R,F,X)}}cD(),w=tn;break}catch(ie){Ww(i,ie)}while(!0);return a&&i.shellSuspendCounter++,ds=mo=null,gt=c,Q.H=p,Q.A=y,et===null&&(Ot=null,rt=0,yh()),w}function cD(){for(;et!==null;)eE(et)}function dD(i,a){var l=gt;gt|=2;var c=Jw(),p=Zw();Ot!==i||rt!==a?(Wh=null,Qh=wt()+500,kl(i,a)):Rl=Le(i,a);e:do try{if(Et!==0&&et!==null){a=et;var y=Wr;t:switch(Et){case 1:Et=0,Wr=null,Dl(i,a,y,1);break;case 2:case 9:if(c_(y)){Et=0,Wr=null,tE(a);break}a=function(){Et!==2&&Et!==9||Ot!==i||(Et=7),Fi(i)},y.then(a,a);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:c_(y)?(Et=0,Wr=null,tE(a)):(Et=0,Wr=null,Dl(i,a,y,7));break;case 5:var w=null;switch(et.tag){case 26:w=et.memoizedState;case 5:case 27:var R=et;if(w?zE(w):R.stateNode.complete){Et=0,Wr=null;var F=R.sibling;if(F!==null)et=F;else{var X=R.return;X!==null?(et=X,Zh(X)):et=null}break t}}Et=0,Wr=null,Dl(i,a,y,5);break;case 6:Et=0,Wr=null,Dl(i,a,y,6);break;case 8:hv(),tn=6;break e;default:throw Error(r(462))}}hD();break}catch(ie){Ww(i,ie)}while(!0);return ds=mo=null,Q.H=c,Q.A=p,gt=l,et!==null?0:(Ot=null,rt=0,yh(),tn)}function hD(){for(;et!==null&&!_i();)eE(et)}function eE(i){var a=Tw(i.alternate,i,_s);i.memoizedProps=i.pendingProps,a===null?Zh(i):et=a}function tE(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=yw(l,a,a.pendingProps,a.type,void 0,rt);break;case 11:a=yw(l,a,a.pendingProps,a.type.render,a.ref,rt);break;case 5:Rg(a);default:Aw(l,a),a=et=Zx(a,_s),a=Tw(l,a,_s)}i.memoizedProps=i.pendingProps,a===null?Zh(i):et=a}function Dl(i,a,l,c){ds=mo=null,Rg(a),_l=null,Qu=0;var p=a.return;try{if(eD(i,p,a,l,rt)){tn=1,zh(i,li(l,i.current)),et=null;return}}catch(y){if(p!==null)throw et=p,y;tn=1,zh(i,li(l,i.current)),et=null;return}a.flags&32768?(ot||c===1?i=!0:Rl||(rt&536870912)!==0?i=!1:(oa=i=!0,(c===2||c===9||c===3||c===6)&&(c=Yr.current,c!==null&&c.tag===13&&(c.flags|=16384))),nE(a,i)):Zh(a)}function Zh(i){var a=i;do{if((a.flags&32768)!==0){nE(a,oa);return}i=a.return;var l=rD(a.alternate,a,_s);if(l!==null){et=l;return}if(a=a.sibling,a!==null){et=a;return}et=a=i}while(a!==null);tn===0&&(tn=5)}function nE(i,a){do{var l=iD(i.alternate,i);if(l!==null){l.flags&=32767,et=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){et=i;return}et=i=l}while(i!==null);tn=6,et=null}function rE(i,a,l,c,p,y,w,R,F){i.cancelPendingCommit=null;do ef();while(In!==0);if((gt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=tg,pt(i,l,y,w,R,F),i===Ot&&(et=Ot=null,rt=0),Nl=a,ca=i,ws=l,uv=y,cv=p,$w=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,gD($t,function(){return lE(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,p=se.p,se.p=2,w=gt,gt|=4;try{sD(i,a,l)}finally{gt=w,se.p=p,Q.T=c}}In=1,iE(),sE(),aE()}}function iE(){if(In===1){In=0;var i=ca,a=Nl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null;var c=se.p;se.p=2;var p=gt;gt|=4;try{Lw(a,i);var y=Sv,w=Hx(i.containerInfo),R=y.focusedElem,F=y.selectionRange;if(w!==R&&R&&R.ownerDocument&&qx(R.ownerDocument.documentElement,R)){if(F!==null&&Wp(R)){var X=F.start,ie=F.end;if(ie===void 0&&(ie=X),"selectionStart"in R)R.selectionStart=X,R.selectionEnd=Math.min(ie,R.value.length);else{var oe=R.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),Se=R.textContent.length,Oe=Math.min(F.start,Se),It=F.end===void 0?Oe:Math.min(F.end,Se);!te.extend&&Oe>It&&(w=It,It=Oe,Oe=w);var K=Fx(R,Oe),H=Fx(R,It);if(K&&H&&(te.rangeCount!==1||te.anchorNode!==K.node||te.anchorOffset!==K.offset||te.focusNode!==H.node||te.focusOffset!==H.offset)){var W=oe.createRange();W.setStart(K.node,K.offset),te.removeAllRanges(),Oe>It?(te.addRange(W),te.extend(H.node,H.offset)):(W.setEnd(H.node,H.offset),te.addRange(W))}}}}for(oe=[],te=R;te=te.parentNode;)te.nodeType===1&&oe.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<oe.length;R++){var ae=oe[R];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}ff=!!Tv,Sv=Tv=null}finally{gt=p,se.p=c,Q.T=l}}i.current=a,In=2}}function sE(){if(In===2){In=0;var i=ca,a=Nl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Q.T,Q.T=null;var c=se.p;se.p=2;var p=gt;gt|=4;try{Ow(i,a.alternate,a)}finally{gt=p,se.p=c,Q.T=l}}In=3}}function aE(){if(In===4||In===3){In=0,Br();var i=ca,a=Nl,l=ws,c=$w;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?In=5:(In=0,Nl=ca=null,oE(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(ua=null),Cn(l),a=a.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(rr,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=Q.T,p=se.p,se.p=2,Q.T=null;try{for(var y=i.onRecoverableError,w=0;w<c.length;w++){var R=c[w];y(R.value,{componentStack:R.stack})}}finally{Q.T=a,se.p=p}}(ws&3)!==0&&ef(),Fi(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===dv?hc++:(hc=0,dv=i):hc=0,fc(0)}}function oE(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Ku(a)))}function ef(){return iE(),sE(),aE(),lE()}function lE(){if(In!==5)return!1;var i=ca,a=uv;uv=0;var l=Cn(ws),c=Q.T,p=se.p;try{se.p=32>l?32:l,Q.T=null,l=cv,cv=null;var y=ca,w=ws;if(In=0,Nl=ca=null,ws=0,(gt&6)!==0)throw Error(r(331));var R=gt;if(gt|=4,qw(y.current),zw(y,y.current,w,l),gt=R,fc(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(rr,y)}catch{}return!0}finally{se.p=p,Q.T=c,oE(i,a)}}function uE(i,a,l){a=li(l,a),a=qg(i.stateNode,a,2),i=ra(i,a,2),i!==null&&(De(i,2),Fi(i))}function Tt(i,a,l){if(i.tag===3)uE(i,i,l);else for(;a!==null;){if(a.tag===3){uE(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ua===null||!ua.has(c))){i=li(l,i),l=cw(2),c=ra(a,l,2),c!==null&&(dw(l,c,a,i),De(c,2),Fi(c));break}}a=a.return}}function mv(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new lD;var p=new Set;c.set(a,p)}else p=c.get(a),p===void 0&&(p=new Set,c.set(a,p));p.has(l)||(av=!0,p.add(l),i=fD.bind(null,i,a,l),a.then(i,i))}function fD(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ot===i&&(rt&l)===l&&(tn===4||tn===3&&(rt&62914560)===rt&&300>wt()-Yh?(gt&2)===0&&kl(i,0):ov|=l,Il===rt&&(Il=0)),Fi(i)}function cE(i,a){a===0&&(a=Sn()),i=co(i,a),i!==null&&(De(i,a),Fi(i))}function mD(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),cE(i,l)}function pD(i,a){var l=0;switch(i.tag){case 31:case 13:var c=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),cE(i,l)}function gD(i,a){return jn(i,a)}var tf=null,Ol=null,pv=!1,nf=!1,gv=!1,ha=0;function Fi(i){i!==Ol&&i.next===null&&(Ol===null?tf=Ol=i:Ol=Ol.next=i),nf=!0,pv||(pv=!0,yD())}function fc(i,a){if(!gv&&nf){gv=!0;do for(var l=!1,c=tf;c!==null;){if(i!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var w=c.suspendedLanes,R=c.pingedLanes;y=(1<<31-ge(42|i)+1)-1,y&=p&~(w&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,mE(c,y))}else y=rt,y=Re(c,c===Ot?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Le(c,y)||(l=!0,mE(c,y));c=c.next}while(l);gv=!1}}function vD(){dE()}function dE(){nf=pv=!1;var i=0;ha!==0&&RD()&&(i=ha);for(var a=wt(),l=null,c=tf;c!==null;){var p=c.next,y=hE(c,a);y===0?(c.next=null,l===null?tf=p:l.next=p,p===null&&(Ol=l)):(l=c,(i!==0||(y&3)!==0)&&(nf=!0)),c=p}In!==0&&In!==5||fc(i),ha!==0&&(ha=0)}function hE(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var w=31-ge(y),R=1<<w,F=p[w];F===-1?((R&l)===0||(R&c)!==0)&&(p[w]=Ce(R,a)):F<=a&&(i.expiredLanes|=R),y&=~R}if(a=Ot,l=rt,l=Re(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,l===0||i===a&&(Et===2||Et===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Ar(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Le(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&Ar(c),Cn(l)){case 2:case 8:l=Lt;break;case 32:l=$t;break;case 268435456:l=Fr;break;default:l=$t}return c=fE.bind(null,i),l=jn(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&Ar(c),i.callbackPriority=2,i.callbackNode=null,2}function fE(i,a){if(In!==0&&In!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(ef()&&i.callbackNode!==l)return null;var c=rt;return c=Re(i,i===Ot?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Yw(i,c,a),hE(i,wt()),i.callbackNode!=null&&i.callbackNode===l?fE.bind(null,i):null)}function mE(i,a){if(ef())return null;Yw(i,a,!0)}function yD(){ND(function(){(gt&6)!==0?jn(He,vD):dE()})}function vv(){if(ha===0){var i=yl;i===0&&(i=$e,$e<<=1,($e&261888)===0&&($e=256)),ha=i}return ha}function pE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Pi(""+i)}function gE(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function bD(i,a,l,c,p){if(a==="submit"&&l&&l.stateNode===p){var y=pE((p[Qt]||null).action),w=c.submitter;w&&(a=(a=w[Qt]||null)?pE(a.formAction):w.getAttribute("formAction"),a!==null&&(y=a,w=null));var R=new ro("action","action",null,c,p);i.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ha!==0){var F=w?gE(p,w):new FormData(p);Vg(l,{pending:!0,data:F,method:p.method,action:y},null,F)}}else typeof y=="function"&&(R.preventDefault(),F=w?gE(p,w):new FormData(p),Vg(l,{pending:!0,data:F,method:p.method,action:y},y,F))},currentTarget:p}]})}}for(var yv=0;yv<eg.length;yv++){var bv=eg[yv],xD=bv.toLowerCase(),_D=bv[0].toUpperCase()+bv.slice(1);Ei(xD,"on"+_D)}Ei(Kx,"onAnimationEnd"),Ei(Yx,"onAnimationIteration"),Ei(Qx,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Vk,"onTransitionRun"),Ei(Lk,"onTransitionStart"),Ei(Uk,"onTransitionCancel"),Ei(Wx,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),yt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yt("onBeforeInput",["compositionend","keypress","textInput","paste"]),yt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mc));function vE(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],p=c.event;c=c.listeners;e:{var y=void 0;if(a)for(var w=c.length-1;0<=w;w--){var R=c[w],F=R.instance,X=R.currentTarget;if(R=R.listener,F!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=X;try{y(p)}catch(ie){vh(ie)}p.currentTarget=null,y=F}else for(w=0;w<c.length;w++){if(R=c[w],F=R.instance,X=R.currentTarget,R=R.listener,F!==y&&p.isPropagationStopped())break e;y=R,p.currentTarget=X;try{y(p)}catch(ie){vh(ie)}p.currentTarget=null,y=F}}}}function tt(i,a){var l=a[Cr];l===void 0&&(l=a[Cr]=new Set);var c=i+"__bubble";l.has(c)||(yE(a,i,2,!1),l.add(c))}function xv(i,a,l){var c=0;a&&(c|=4),yE(l,i,c,a)}var rf="_reactListening"+Math.random().toString(36).slice(2);function _v(i){if(!i[rf]){i[rf]=!0,ze.forEach(function(l){l!=="selectionchange"&&(wD.has(l)||xv(l,!1,i),xv(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[rf]||(a[rf]=!0,xv("selectionchange",!1,a))}}function yE(i,a,l,c){switch(KE(a)){case 2:var p=WD;break;case 8:p=XD;break;default:p=Pv}l=p.bind(null,a,l,i),p=void 0,!Pu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),c?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function wv(i,a,l,c,p){var y=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===p)break;if(w===4)for(w=c.return;w!==null;){var F=w.tag;if((F===3||F===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;R!==null;){if(w=ar(R),w===null)return;if(F=w.tag,F===5||F===6||F===26||F===27){c=y=w;continue e}R=R.parentNode}}c=c.return}th(function(){var X=y,ie=sl(l),oe=[];e:{var Z=Xx.get(i);if(Z!==void 0){var te=ro,Se=i;switch(i){case"keypress":if(no(l)===0)break e;case"keydown":case"keyup":te=ch;break;case"focusin":Se="focus",te=Ks;break;case"focusout":Se="blur",te=Ks;break;case"beforeblur":case"afterblur":te=Ks;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=hh;break;case Kx:case Yx:case Qx:te=ll;break;case Wx:te=ul;break;case"scroll":case"scrollend":te=nh;break;case"wheel":te=mh;break;case"copy":case"cut":case"paste":te=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Bu;break;case"toggle":case"beforetoggle":te=Qs}var Oe=(a&4)!==0,It=!Oe&&(i==="scroll"||i==="scrollend"),K=Oe?Z!==null?Z+"Capture":null:Z;Oe=[];for(var H=X,W;H!==null;){var ae=H;if(W=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||W===null||K===null||(ae=Nr(H,K),ae!=null&&Oe.push(pc(H,ae,W))),It)break;H=H.return}0<Oe.length&&(Z=new te(Z,Se,null,l,ie),oe.push({event:Z,listeners:Oe}))}}if((a&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",te=i==="mouseout"||i==="pointerout",Z&&l!==il&&(Se=l.relatedTarget||l.fromElement)&&(ar(Se)||Se[ir]))break e;if((te||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(Se=l.relatedTarget||l.toElement,te=X,Se=Se?ar(Se):null,Se!==null&&(It=o(Se),Oe=Se.tag,Se!==It||Oe!==5&&Oe!==27&&Oe!==6)&&(Se=null)):(te=null,Se=X),te!==Se)){if(Oe=rh,ae="onMouseLeave",K="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Oe=Bu,ae="onPointerLeave",K="onPointerEnter",H="pointer"),It=te==null?Z:Ir(te),W=Se==null?Z:Ir(Se),Z=new Oe(ae,H+"leave",te,l,ie),Z.target=It,Z.relatedTarget=W,ae=null,ar(ie)===X&&(Oe=new Oe(K,H+"enter",Se,l,ie),Oe.target=W,Oe.relatedTarget=It,ae=Oe),It=ae,te&&Se)t:{for(Oe=ED,K=te,H=Se,W=0,ae=K;ae;ae=Oe(ae))W++;ae=0;for(var Ie=H;Ie;Ie=Oe(Ie))ae++;for(;0<W-ae;)K=Oe(K),W--;for(;0<ae-W;)H=Oe(H),ae--;for(;W--;){if(K===H||H!==null&&K===H.alternate){Oe=K;break t}K=Oe(K),H=Oe(H)}Oe=null}else Oe=null;te!==null&&bE(oe,Z,te,Oe,!1),Se!==null&&It!==null&&bE(oe,It,Se,Oe,!0)}}e:{if(Z=X?Ir(X):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var dt=Px;else if(kr(Z))if(Vx)dt=jk;else{dt=Dk;var Ae=kk}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&ju(X.elementType)&&(dt=Px):dt=Ok;if(dt&&(dt=dt(i,X))){oo(oe,dt,l,ie);break e}Ae&&Ae(i,Z,X),i==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&rl(Z,"number",Z.value)}switch(Ae=X?Ir(X):window,i){case"focusin":(kr(Ae)||Ae.contentEditable==="true")&&(cl=Ae,Xp=X,Hu=null);break;case"focusout":Hu=Xp=cl=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,Gx(oe,l,ie);break;case"selectionchange":if(Pk)break;case"keydown":case"keyup":Gx(oe,l,ie)}var Ke;if(_)e:{switch(i){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Qe?bt(i,l)&&(it="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(it="onCompositionStart");it&&(Y&&l.locale!=="ko"&&(Qe||it!=="onCompositionStart"?it==="onCompositionEnd"&&Qe&&(Ke=qs()):(Gr=ie,al="value"in Gr?Gr.value:Gr.textContent,Qe=!0)),Ae=sf(X,it),0<Ae.length&&(it=new Lu(it,i,null,l,ie),oe.push({event:it,listeners:Ae}),Ke?it.data=Ke:(Ke=gn(l),Ke!==null&&(it.data=Ke)))),(Ke=k?Ln(i,l):Un(i,l))&&(it=sf(X,"onBeforeInput"),0<it.length&&(Ae=new Lu("onBeforeInput","beforeinput",null,l,ie),oe.push({event:Ae,listeners:it}),Ae.data=Ke)),bD(oe,i,X,l,ie)}vE(oe,a)})}function pc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function sf(i,a){for(var l=a+"Capture",c=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Nr(i,l),p!=null&&c.unshift(pc(i,p,y)),p=Nr(i,a),p!=null&&c.push(pc(i,p,y))),i.tag===3)return c;i=i.return}return[]}function ED(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function bE(i,a,l,c,p){for(var y=a._reactName,w=[];l!==null&&l!==c;){var R=l,F=R.alternate,X=R.stateNode;if(R=R.tag,F!==null&&F===c)break;R!==5&&R!==26&&R!==27||X===null||(F=X,p?(X=Nr(l,y),X!=null&&w.unshift(pc(l,X,F))):p||(X=Nr(l,y),X!=null&&w.push(pc(l,X,F)))),l=l.return}w.length!==0&&i.push({event:a,listeners:w})}var TD=/\r\n?/g,SD=/\u0000|\uFFFD/g;function xE(i){return(typeof i=="string"?i:""+i).replace(TD,`
`).replace(SD,"")}function _E(i,a){return a=xE(a),xE(i)===a}function Rt(i,a,l,c,p,y){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||ai(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&ai(i,""+c);break;case"className":zs(i,"class",c);break;case"tabIndex":zs(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":zs(i,l,c);break;case"style":Zd(i,c,y);break;case"data":if(a!=="object"){zs(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Pi(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&Rt(i,a,"name",p.name,p,null),Rt(i,a,"formEncType",p.formEncType,p,null),Rt(i,a,"formMethod",p.formMethod,p,null),Rt(i,a,"formTarget",p.formTarget,p,null)):(Rt(i,a,"encType",p.encType,p,null),Rt(i,a,"method",p.method,p,null),Rt(i,a,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=Pi(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=Vn);break;case"onScroll":c!=null&&tt("scroll",i);break;case"onScrollEnd":c!=null&&tt("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=Pi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":tt("beforetoggle",i),tt("toggle",i),Us(i,"popover",c);break;case"xlinkActuate":si(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":si(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":si(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":si(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":si(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":si(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":si(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":si(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":si(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Us(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Gp.get(l)||l,Us(i,l,c))}}function Ev(i,a,l,c,p,y){switch(l){case"style":Zd(i,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?ai(i,c):(typeof c=="number"||typeof c=="bigint")&&ai(i,""+c);break;case"onScroll":c!=null&&tt("scroll",i);break;case"onScrollEnd":c!=null&&tt("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xe.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),y=i[Qt]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(a,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,p);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):Us(i,l,c)}}}function Wn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",i),tt("load",i);var c=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var w=l[y];if(w!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Rt(i,a,y,w,l,null)}}p&&Rt(i,a,"srcSet",l.srcSet,l,null),c&&Rt(i,a,"src",l.src,l,null);return;case"input":tt("invalid",i);var R=y=w=p=null,F=null,X=null;for(c in l)if(l.hasOwnProperty(c)){var ie=l[c];if(ie!=null)switch(c){case"name":p=ie;break;case"type":w=ie;break;case"checked":F=ie;break;case"defaultChecked":X=ie;break;case"value":y=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,a));break;default:Rt(i,a,c,ie,l,null)}}eo(i,y,R,F,X,w,p,!1);return;case"select":tt("invalid",i),c=w=y=null;for(p in l)if(l.hasOwnProperty(p)&&(R=l[p],R!=null))switch(p){case"value":y=R;break;case"defaultValue":w=R;break;case"multiple":c=R;default:Rt(i,a,p,R,l,null)}a=y,l=w,i.multiple=!!c,a!=null?ct(i,!!c,a,!1):l!=null&&ct(i,!!c,l,!0);return;case"textarea":tt("invalid",i),y=p=c=null;for(w in l)if(l.hasOwnProperty(w)&&(R=l[w],R!=null))switch(w){case"value":c=R;break;case"defaultValue":p=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:Rt(i,a,w,R,l,null)}Fs(i,c,p,y);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(c=l[F],c!=null))switch(F){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Rt(i,a,F,c,l,null)}return;case"dialog":tt("beforetoggle",i),tt("toggle",i),tt("cancel",i),tt("close",i);break;case"iframe":case"object":tt("load",i);break;case"video":case"audio":for(c=0;c<mc.length;c++)tt(mc[c],i);break;case"image":tt("error",i),tt("load",i);break;case"details":tt("toggle",i);break;case"embed":case"source":case"link":tt("error",i),tt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(c=l[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Rt(i,a,X,c,l,null)}return;default:if(ju(a)){for(ie in l)l.hasOwnProperty(ie)&&(c=l[ie],c!==void 0&&Ev(i,a,ie,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&Rt(i,a,R,c,l,null))}function AD(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,R=null,F=null,X=null,ie=null;for(te in l){var oe=l[te];if(l.hasOwnProperty(te)&&oe!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":F=oe;default:c.hasOwnProperty(te)||Rt(i,a,te,null,c,oe)}}for(var Z in c){var te=c[Z];if(oe=l[Z],c.hasOwnProperty(Z)&&(te!=null||oe!=null))switch(Z){case"type":y=te;break;case"name":p=te;break;case"checked":X=te;break;case"defaultChecked":ie=te;break;case"value":w=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,a));break;default:te!==oe&&Rt(i,a,Z,te,c,oe)}}Bs(i,w,R,F,X,ie,y,p);return;case"select":te=w=R=Z=null;for(y in l)if(F=l[y],l.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":te=F;default:c.hasOwnProperty(y)||Rt(i,a,y,null,c,F)}for(p in c)if(y=c[p],F=l[p],c.hasOwnProperty(p)&&(y!=null||F!=null))switch(p){case"value":Z=y;break;case"defaultValue":R=y;break;case"multiple":w=y;default:y!==F&&Rt(i,a,p,y,c,F)}a=R,l=w,c=te,Z!=null?ct(i,!!l,Z,!1):!!c!=!!l&&(a!=null?ct(i,!!l,a,!0):ct(i,!!l,l?[]:"",!1));return;case"textarea":te=Z=null;for(R in l)if(p=l[R],l.hasOwnProperty(R)&&p!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Rt(i,a,R,null,c,p)}for(w in c)if(p=c[w],y=l[w],c.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":Z=p;break;case"defaultValue":te=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&Rt(i,a,w,p,c,y)}to(i,Z,te);return;case"option":for(var Se in l)if(Z=l[Se],l.hasOwnProperty(Se)&&Z!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":i.selected=!1;break;default:Rt(i,a,Se,null,c,Z)}for(F in c)if(Z=c[F],te=l[F],c.hasOwnProperty(F)&&Z!==te&&(Z!=null||te!=null))switch(F){case"selected":i.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Rt(i,a,F,Z,c,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in l)Z=l[Oe],l.hasOwnProperty(Oe)&&Z!=null&&!c.hasOwnProperty(Oe)&&Rt(i,a,Oe,null,c,Z);for(X in c)if(Z=c[X],te=l[X],c.hasOwnProperty(X)&&Z!==te&&(Z!=null||te!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:Rt(i,a,X,Z,c,te)}return;default:if(ju(a)){for(var It in l)Z=l[It],l.hasOwnProperty(It)&&Z!==void 0&&!c.hasOwnProperty(It)&&Ev(i,a,It,void 0,c,Z);for(ie in c)Z=c[ie],te=l[ie],!c.hasOwnProperty(ie)||Z===te||Z===void 0&&te===void 0||Ev(i,a,ie,Z,c,te);return}}for(var K in l)Z=l[K],l.hasOwnProperty(K)&&Z!=null&&!c.hasOwnProperty(K)&&Rt(i,a,K,null,c,Z);for(oe in c)Z=c[oe],te=l[oe],!c.hasOwnProperty(oe)||Z===te||Z==null&&te==null||Rt(i,a,oe,Z,c,te)}function wE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CD(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var p=l[c],y=p.transferSize,w=p.initiatorType,R=p.duration;if(y&&R&&wE(w)){for(w=0,R=p.responseEnd,c+=1;c<l.length;c++){var F=l[c],X=F.startTime;if(X>R)break;var ie=F.transferSize,oe=F.initiatorType;ie&&wE(oe)&&(F=F.responseEnd,w+=ie*(F<R?1:(R-X)/(F-X)))}if(--c,a+=8*(y+w)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Tv=null,Sv=null;function af(i){return i.nodeType===9?i:i.ownerDocument}function EE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TE(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Av(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cv=null;function RD(){var i=window.event;return i&&i.type==="popstate"?i===Cv?!1:(Cv=i,!0):(Cv=null,!1)}var SE=typeof setTimeout=="function"?setTimeout:void 0,ID=typeof clearTimeout=="function"?clearTimeout:void 0,AE=typeof Promise=="function"?Promise:void 0,ND=typeof queueMicrotask=="function"?queueMicrotask:typeof AE<"u"?function(i){return AE.resolve(null).then(i).catch(kD)}:SE;function kD(i){setTimeout(function(){throw i})}function fa(i){return i==="head"}function CE(i,a){var l=a,c=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(c===0){i.removeChild(p),Vl(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")gc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,gc(l);for(var y=l.firstChild;y;){var w=y.nextSibling,R=y.nodeName;y[Gn]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=w}}else l==="body"&&gc(i.ownerDocument.body);l=p}while(l);Vl(a)}function RE(i,a){var l=i;i=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=c}while(l)}function Rv(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Rv(l),Rr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function DD(i,a,l,c){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Gn])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=fi(i.nextSibling),i===null)break}return null}function OD(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=fi(i.nextSibling),i===null))return null;return i}function IE(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=fi(i.nextSibling),i===null))return null;return i}function Iv(i){return i.data==="$?"||i.data==="$~"}function Nv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function jD(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function fi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var kv=null;function NE(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return fi(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function kE(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function DE(i,a,l){switch(a=af(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function gc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Rr(i)}var mi=new Map,OE=new Set;function of(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Es=se.d;se.d={f:MD,r:PD,D:VD,C:LD,L:UD,m:zD,X:FD,S:BD,M:qD};function MD(){var i=Es.f(),a=Xh();return i||a}function PD(i){var a=$n(i);a!==null&&a.tag===5&&a.type==="form"?W_(a):Es.r(i)}var jl=typeof document>"u"?null:document;function jE(i,a,l){var c=jl;if(c&&typeof a=="string"&&a){var p=Zt(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),OE.has(p)||(OE.add(p),i={rel:i,crossOrigin:l,href:a},c.querySelector(p)===null&&(a=c.createElement("link"),Wn(a,"link",i),ve(a),c.head.appendChild(a)))}}function VD(i){Es.D(i),jE("dns-prefetch",i,null)}function LD(i,a){Es.C(i,a),jE("preconnect",i,a)}function UD(i,a,l){Es.L(i,a,l);var c=jl;if(c&&i&&a){var p='link[rel="preload"][as="'+Zt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Zt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Zt(l.imageSizes)+'"]')):p+='[href="'+Zt(i)+'"]';var y=p;switch(a){case"style":y=Ml(i);break;case"script":y=Pl(i)}mi.has(y)||(i=b({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),mi.set(y,i),c.querySelector(p)!==null||a==="style"&&c.querySelector(vc(y))||a==="script"&&c.querySelector(yc(y))||(a=c.createElement("link"),Wn(a,"link",i),ve(a),c.head.appendChild(a)))}}function zD(i,a){Es.m(i,a);var l=jl;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Zt(c)+'"][href="'+Zt(i)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Pl(i)}if(!mi.has(y)&&(i=b({rel:"modulepreload",href:i},a),mi.set(y,i),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(yc(y)))return}c=l.createElement("link"),Wn(c,"link",i),ve(c),l.head.appendChild(c)}}}function BD(i,a,l){Es.S(i,a,l);var c=jl;if(c&&i){var p=de(c).hoistableStyles,y=Ml(i);a=a||"default";var w=p.get(y);if(!w){var R={loading:0,preload:null};if(w=c.querySelector(vc(y)))R.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":a},l),(l=mi.get(y))&&Dv(i,l);var F=w=c.createElement("link");ve(F),Wn(F,"link",i),F._p=new Promise(function(X,ie){F.onload=X,F.onerror=ie}),F.addEventListener("load",function(){R.loading|=1}),F.addEventListener("error",function(){R.loading|=2}),R.loading|=4,lf(w,a,c)}w={type:"stylesheet",instance:w,count:1,state:R},p.set(y,w)}}}function FD(i,a){Es.X(i,a);var l=jl;if(l&&i){var c=de(l).hoistableScripts,p=Pl(i),y=c.get(p);y||(y=l.querySelector(yc(p)),y||(i=b({src:i,async:!0},a),(a=mi.get(p))&&Ov(i,a),y=l.createElement("script"),ve(y),Wn(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function qD(i,a){Es.M(i,a);var l=jl;if(l&&i){var c=de(l).hoistableScripts,p=Pl(i),y=c.get(p);y||(y=l.querySelector(yc(p)),y||(i=b({src:i,async:!0,type:"module"},a),(a=mi.get(p))&&Ov(i,a),y=l.createElement("script"),ve(y),Wn(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function ME(i,a,l,c){var p=(p=je.current)?of(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ml(l.href),l=de(p).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ml(l.href);var y=de(p).hoistableStyles,w=y.get(i);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,w),(y=p.querySelector(vc(i)))&&!y._p&&(w.instance=y,w.state.loading=5),mi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},mi.set(i,l),y||HD(p,i,l,w.state))),a&&c===null)throw Error(r(528,""));return w}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Pl(l),l=de(p).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ml(i){return'href="'+Zt(i)+'"'}function vc(i){return'link[rel="stylesheet"]['+i+"]"}function PE(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function HD(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Wn(a,"link",l),ve(a),i.head.appendChild(a))}function Pl(i){return'[src="'+Zt(i)+'"]'}function yc(i){return"script[async]"+i}function VE(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+Zt(l.href)+'"]');if(c)return a.instance=c,ve(c),c;var p=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),ve(c),Wn(c,"style",p),lf(c,l.precedence,i),a.instance=c;case"stylesheet":p=Ml(l.href);var y=i.querySelector(vc(p));if(y)return a.state.loading|=4,a.instance=y,ve(y),y;c=PE(l),(p=mi.get(p))&&Dv(c,p),y=(i.ownerDocument||i).createElement("link"),ve(y);var w=y;return w._p=new Promise(function(R,F){w.onload=R,w.onerror=F}),Wn(y,"link",c),a.state.loading|=4,lf(y,l.precedence,i),a.instance=y;case"script":return y=Pl(l.src),(p=i.querySelector(yc(y)))?(a.instance=p,ve(p),p):(c=l,(p=mi.get(y))&&(c=b({},l),Ov(c,p)),i=i.ownerDocument||i,p=i.createElement("script"),ve(p),Wn(p,"link",c),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,lf(c,l.precedence,i));return a.instance}function lf(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,w=0;w<c.length;w++){var R=c[w];if(R.dataset.precedence===a)y=R;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Dv(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Ov(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var uf=null;function LE(i,a,l){if(uf===null){var c=new Map,p=uf=new Map;p.set(l,c)}else p=uf,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var y=l[p];if(!(y[Gn]||y[Dt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(a)||"";w=i+w;var R=c.get(w);R?R.push(y):c.set(w,[y])}}return c}function UE(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function GD(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function zE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function $D(i,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Ml(c.href),y=a.querySelector(vc(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=cf.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=y,ve(y);return}y=a.ownerDocument||a,c=PE(c),(p=mi.get(p))&&Dv(c,p),y=y.createElement("link"),ve(y);var w=y;w._p=new Promise(function(R,F){w.onload=R,w.onerror=F}),Wn(y,"link",c),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=cf.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var jv=0;function KD(i,a){return i.stylesheets&&i.count===0&&hf(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var c=setTimeout(function(){if(i.stylesheets&&hf(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+a);0<i.imgBytes&&jv===0&&(jv=62500*CD());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&hf(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>jv?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function cf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var df=null;function hf(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,df=new Map,a.forEach(YD,i),df=null,cf.call(i))}function YD(i,a){if(!(a.state.loading&4)){var l=df.get(i);if(l)var c=l.get(null);else{l=new Map,df.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),c=w)}c&&l.set(null,c)}p=a.instance,w=p.getAttribute("data-precedence"),y=l.get(w)||c,y===c&&l.set(null,p),l.set(w,p),this.count++,c=cf.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var bc={$$typeof:z,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function QD(i,a,l,c,p,y,w,R,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=At(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.hiddenUpdates=At(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function BE(i,a,l,c,p,y,w,R,F,X,ie,oe){return i=new QD(i,a,l,w,F,X,ie,oe,R),a=1,y===!0&&(a|=24),y=Kr(3,null,null,a),i.current=y,y.stateNode=i,a=fg(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:a},vg(y),i}function FE(i){return i?(i=fl,i):fl}function qE(i,a,l,c,p,y){p=FE(p),c.context===null?c.context=p:c.pendingContext=p,c=na(a),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=ra(i,c,a),l!==null&&(Pr(l,i,a),Xu(l,i,a))}function HE(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Mv(i,a){HE(i,a),(i=i.alternate)&&HE(i,a)}function GE(i){if(i.tag===13||i.tag===31){var a=co(i,67108864);a!==null&&Pr(a,i,67108864),Mv(i,67108864)}}function $E(i){if(i.tag===13||i.tag===31){var a=Jr();a=An(a);var l=co(i,a);l!==null&&Pr(l,i,a),Mv(i,a)}}var ff=!0;function WD(i,a,l,c){var p=Q.T;Q.T=null;var y=se.p;try{se.p=2,Pv(i,a,l,c)}finally{se.p=y,Q.T=p}}function XD(i,a,l,c){var p=Q.T;Q.T=null;var y=se.p;try{se.p=8,Pv(i,a,l,c)}finally{se.p=y,Q.T=p}}function Pv(i,a,l,c){if(ff){var p=Vv(c);if(p===null)wv(i,a,c,mf,l),YE(i,c);else if(ZD(p,i,a,l,c))c.stopPropagation();else if(YE(i,c),a&4&&-1<JD.indexOf(i)){for(;p!==null;){var y=$n(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=Ze(y.pendingLanes);if(w!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var F=1<<31-ge(w);R.entanglements[1]|=F,w&=~F}Fi(y),(gt&6)===0&&(Qh=wt()+500,fc(0))}}break;case 31:case 13:R=co(y,2),R!==null&&Pr(R,y,2),Xh(),Mv(y,2)}if(y=Vv(c),y===null&&wv(i,a,c,mf,l),y===p)break;p=y}p!==null&&c.stopPropagation()}else wv(i,a,c,null,l)}}function Vv(i){return i=sl(i),Lv(i)}var mf=null;function Lv(i){if(mf=null,i=ar(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=d(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return mf=i,null}function KE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case He:return 2;case Lt:return 8;case $t:case Kt:return 32;case Fr:return 268435456;default:return 32}default:return 32}}var Uv=!1,ma=null,pa=null,ga=null,xc=new Map,_c=new Map,va=[],JD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function YE(i,a){switch(i){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":xc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(a.pointerId)}}function wc(i,a,l,c,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},a!==null&&(a=$n(a),a!==null&&GE(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function ZD(i,a,l,c,p){switch(a){case"focusin":return ma=wc(ma,i,a,l,c,p),!0;case"dragenter":return pa=wc(pa,i,a,l,c,p),!0;case"mouseover":return ga=wc(ga,i,a,l,c,p),!0;case"pointerover":var y=p.pointerId;return xc.set(y,wc(xc.get(y)||null,i,a,l,c,p)),!0;case"gotpointercapture":return y=p.pointerId,_c.set(y,wc(_c.get(y)||null,i,a,l,c,p)),!0}return!1}function QE(i){var a=ar(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,ii(i.priority,function(){$E(l)});return}}else if(a===31){if(a=d(l),a!==null){i.blockedOn=a,ii(i.priority,function(){$E(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function pf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Vv(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);il=c,l.target.dispatchEvent(c),il=null}else return a=$n(l),a!==null&&GE(a),i.blockedOn=l,!1;a.shift()}return!0}function WE(i,a,l){pf(i)&&l.delete(a)}function eO(){Uv=!1,ma!==null&&pf(ma)&&(ma=null),pa!==null&&pf(pa)&&(pa=null),ga!==null&&pf(ga)&&(ga=null),xc.forEach(WE),_c.forEach(WE)}function gf(i,a){i.blockedOn===a&&(i.blockedOn=null,Uv||(Uv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,eO)))}var vf=null;function XE(i){vf!==i&&(vf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){vf===i&&(vf=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],p=i[a+2];if(typeof c!="function"){if(Lv(c||l)===null)continue;break}var y=$n(l);y!==null&&(i.splice(a,3),a-=3,Vg(y,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function Vl(i){function a(F){return gf(F,i)}ma!==null&&gf(ma,i),pa!==null&&gf(pa,i),ga!==null&&gf(ga,i),xc.forEach(a),_c.forEach(a);for(var l=0;l<va.length;l++){var c=va[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<va.length&&(l=va[0],l.blockedOn===null);)QE(l),l.blockedOn===null&&va.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],y=l[c+1],w=p[Qt]||null;if(typeof y=="function")w||XE(l);else if(w){var R=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[Qt]||null)R=w.formAction;else if(Lv(p)!==null)continue}else R=w.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),XE(l)}}}function JE(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function zv(i){this._internalRoot=i}yf.prototype.render=zv.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=Jr();qE(l,c,i,a,null,null)},yf.prototype.unmount=zv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;qE(i.current,2,null,i,null,null),Xh(),a[ir]=null}};function yf(i){this._internalRoot=i}yf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Pn();i={blockedOn:null,target:i,priority:a};for(var l=0;l<va.length&&a!==0&&a<va[l].priority;l++);va.splice(l,0,i),l===0&&QE(i)}};var ZE=e.version;if(ZE!=="19.2.3")throw Error(r(527,ZE,"19.2.3"));se.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var tO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{rr=bf.inject(tO),mn=bf}catch{}}return Tc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",p=aw,y=ow,w=lw;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=BE(i,1,!1,null,null,l,c,null,p,y,w,JE),i[ir]=a.current,_v(i),new zv(a)},Tc.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,p="",y=aw,w=ow,R=lw,F=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=BE(i,1,!0,a,l??null,c,p,F,y,w,R,JE),a.context=FE(null),l=a.current,c=Jr(),c=An(c),p=na(c),p.callback=null,ra(l,p,c),l=c,a.current.lanes=l,De(a,l),Fi(a),i[ir]=a.current,_v(i),new yf(a)},Tc.version="19.2.3",Tc}var u1;function cO(){if(u1)return qv.exports;u1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qv.exports=uO(),qv.exports}var dO=cO();const hO=e2(dO),Sc=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],fO=({onComplete:t})=>{const[e,n]=O.useState(0),r=()=>{e<Sc.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},s=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Sc[e];return g.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[g.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:g.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Sc.length*100}%`}})}),g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),g.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),g.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Sc.map((u,d)=>g.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${d===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},d))}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:s,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),g.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Sc.length-1?"Suivant":"Commencer"})]})]})]})})},mO=()=>{};var c1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],d=t[n++],h=((s&7)<<18|(o&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},r2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,d=u?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,v=o>>2,b=(o&3)<<4|d>>4;let x=(d&15)<<2|f>>6,E=f&63;h||(E=64,u||(x=64)),r.push(n[v],n[b],n[x],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const b=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||d==null||f==null||b==null)throw new gO;const x=o<<2|d>>4;if(r.push(x),f!==64){const E=d<<4&240|f>>2;if(r.push(E),b!==64){const A=f<<6&192|b;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vO=function(t){const e=n2(t);return r2.encodeByteArray(e,!0)},gm=function(t){return vO(t).replace(/\./g,"")},i2=function(t){try{return r2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=()=>yO().__FIREBASE_DEFAULTS__,xO=()=>{if(typeof process>"u"||typeof c1>"u")return;const t=c1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_O=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&i2(t[1]);return e&&JSON.parse(e)},ip=()=>{try{return mO()||bO()||xO()||_O()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s2=t=>{var e,n;return(n=(e=ip())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},F0=t=>{const e=s2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},a2=()=>{var t;return(t=ip())===null||t===void 0?void 0:t.config},o2=t=>{var e;return(e=ip())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gm(JSON.stringify(n)),gm(JSON.stringify(u)),""].join(".")}const $c={};function EO(){const t={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?t.emulator.push(e):t.prod.push(e);return t}function TO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let d1=!1;function ap(t,e){if(typeof window>"u"||typeof document>"u"||!Vs(window.location.host)||$c[t]===e||$c[t]||d1)return;$c[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",o=EO().prod.length>0;function u(){const x=document.getElementById(r);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function h(x,E){x.setAttribute("width","24"),x.setAttribute("id",E),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{d1=!0,u()},x}function v(x,E){x.setAttribute("id",E),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=TO(r),E=n("text"),A=document.getElementById(E)||document.createElement("span"),D=n("learnmore"),M=document.getElementById(D)||document.createElement("a"),U=n("preprendIcon"),j=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const z=x.element;d(z),v(M,D);const G=f();h(j,U),z.append(j,A,M,G),document.body.appendChild(z)}o?(A.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function AO(){var t;const e=(t=ip())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NO(){const t=gr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kO(){return!AO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DO(){try{return typeof indexedDB=="object"}catch{return!1}}function OO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="FirebaseError";class Mi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jO,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dd.prototype.create)}}class Dd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?MO(o,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Mi(s,d,r)}}function MO(t,e){return t.replace(PO,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PO=/\{\$([^}]+)}/g;function VO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(h1(o)&&h1(u)){if(!zo(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function h1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Oc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LO(t,e){const n=new UO(t,e);return n.subscribe.bind(n)}class UO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zO(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Kv),s.error===void 0&&(s.error=Kv),s.complete===void 0&&(s.complete=Kv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){return t&&t._delegate?t._delegate:t}class ks{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qO(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FO(t){return t===Ao?void 0:t}function qO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const GO={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},$O=st.INFO,KO={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},YO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=KO[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q0{constructor(e){this.name=e,this._logLevel=$O,this._logHandler=YO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const QO=(t,e)=>e.some(n=>t instanceof n);let f1,m1;function WO(){return f1||(f1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XO(){return m1||(m1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u2=new WeakMap,Ny=new WeakMap,c2=new WeakMap,Yv=new WeakMap,H0=new WeakMap;function JO(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(Na(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&u2.set(n,t)}).catch(()=>{}),H0.set(e,t),e}function ZO(t){if(Ny.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});Ny.set(t,e)}let ky={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ny.get(t);if(e==="objectStoreNames")return t.objectStoreNames||c2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Na(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function e4(t){ky=t(ky)}function t4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qv(this),e,...n);return c2.set(r,e.sort?e.sort():[e]),Na(r)}:XO().includes(t)?function(...e){return t.apply(Qv(this),e),Na(u2.get(this))}:function(...e){return Na(t.apply(Qv(this),e))}}function n4(t){return typeof t=="function"?t4(t):(t instanceof IDBTransaction&&ZO(t),QO(t,WO())?new Proxy(t,ky):t)}function Na(t){if(t instanceof IDBRequest)return JO(t);if(Yv.has(t))return Yv.get(t);const e=n4(t);return e!==t&&(Yv.set(t,e),H0.set(e,t)),e}const Qv=t=>H0.get(t);function r4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),d=Na(u);return r&&u.addEventListener("upgradeneeded",h=>{r(Na(u.result),h.oldVersion,h.newVersion,Na(u.transaction),h)}),n&&u.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const i4=["get","getKey","getAll","getAllKeys","count"],s4=["put","add","delete","clear"],Wv=new Map;function p1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wv.get(e))return Wv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=s4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||i4.includes(n)))return;const o=async function(u,...d){const h=this.transaction(u,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),s&&h.done]))[0]};return Wv.set(e,o),o}e4(t=>({...t,get:(e,n,r)=>p1(e,n)||t.get(e,n,r),has:(e,n)=>!!p1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function o4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dy="@firebase/app",g1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new q0("@firebase/app"),l4="@firebase/app-compat",u4="@firebase/analytics-compat",c4="@firebase/analytics",d4="@firebase/app-check-compat",h4="@firebase/app-check",f4="@firebase/auth",m4="@firebase/auth-compat",p4="@firebase/database",g4="@firebase/data-connect",v4="@firebase/database-compat",y4="@firebase/functions",b4="@firebase/functions-compat",x4="@firebase/installations",_4="@firebase/installations-compat",w4="@firebase/messaging",E4="@firebase/messaging-compat",T4="@firebase/performance",S4="@firebase/performance-compat",A4="@firebase/remote-config",C4="@firebase/remote-config-compat",R4="@firebase/storage",I4="@firebase/storage-compat",N4="@firebase/firestore",k4="@firebase/ai",D4="@firebase/firestore-compat",O4="firebase",j4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="[DEFAULT]",M4={[Dy]:"fire-core",[l4]:"fire-core-compat",[c4]:"fire-analytics",[u4]:"fire-analytics-compat",[h4]:"fire-app-check",[d4]:"fire-app-check-compat",[f4]:"fire-auth",[m4]:"fire-auth-compat",[p4]:"fire-rtdb",[g4]:"fire-data-connect",[v4]:"fire-rtdb-compat",[y4]:"fire-fn",[b4]:"fire-fn-compat",[x4]:"fire-iid",[_4]:"fire-iid-compat",[w4]:"fire-fcm",[E4]:"fire-fcm-compat",[T4]:"fire-perf",[S4]:"fire-perf-compat",[A4]:"fire-rc",[C4]:"fire-rc-compat",[R4]:"fire-gcs",[I4]:"fire-gcs-compat",[N4]:"fire-fst",[D4]:"fire-fst-compat",[k4]:"fire-vertex","fire-js":"fire-js",[O4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map,P4=new Map,jy=new Map;function v1(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ma(t){const e=t.name;if(jy.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;jy.set(e,t);for(const n of vm.values())v1(n,t);for(const n of P4.values())v1(n,t);return!0}function jd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new Dd("app","Firebase",V4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=j4;function d2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Oy,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ka.create("bad-app-name",{appName:String(s)});if(n||(n=a2()),!n)throw ka.create("no-options");const o=vm.get(s);if(o){if(zo(n,o.options)&&zo(r,o.config))return o;throw ka.create("duplicate-app",{appName:s})}const u=new HO(s);for(const h of jy.values())u.addComponent(h);const d=new L4(n,r,u);return vm.set(s,d),d}function op(t=Oy){const e=vm.get(t);if(!e&&t===Oy&&a2())return d2();if(!e)throw ka.create("no-app",{appName:t});return e}function bi(t,e,n){var r;let s=(r=M4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(d.join(" "));return}Ma(new ks(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4="firebase-heartbeat-database",z4=1,md="firebase-heartbeat-store";let Xv=null;function h2(){return Xv||(Xv=r4(U4,z4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(md)}catch(n){console.warn(n)}}}}).catch(t=>{throw ka.create("idb-open",{originalErrorMessage:t.message})})),Xv}async function B4(t){try{const n=(await h2()).transaction(md),r=await n.objectStore(md).get(f2(t));return await n.done,r}catch(e){if(e instanceof Mi)Ds.warn(e.message);else{const n=ka.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function y1(t,e){try{const r=(await h2()).transaction(md,"readwrite");await r.objectStore(md).put(e,f2(t)),await r.done}catch(n){if(n instanceof Mi)Ds.warn(n.message);else{const r=ka.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(r.message)}}}function f2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1024,q4=30;class H4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=b1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>q4){const u=K4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b1(),{heartbeatsToSend:r,unsentEntries:s}=G4(this._heartbeatsCache.heartbeats),o=gm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ds.warn(n),""}}}function b1(){return new Date().toISOString().substring(0,10)}function G4(t,e=F4){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),x1(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),x1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DO()?OO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await B4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return y1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return y1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function x1(t){return gm(JSON.stringify({version:2,heartbeats:t})).length}function K4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t){Ma(new ks("platform-logger",e=>new a4(e),"PRIVATE")),Ma(new ks("heartbeat",e=>new H4(e),"PRIVATE")),bi(Dy,g1,t),bi(Dy,g1,"esm2017"),bi("fire-js","")}Y4("");function G0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function m2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q4=m2,p2=new Dd("auth","Firebase",m2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new q0("@firebase/auth");function W4(t,...e){ym.logLevel<=st.WARN&&ym.warn(`Auth (${Yo}): ${t}`,...e)}function Wf(t,...e){ym.logLevel<=st.ERROR&&ym.error(`Auth (${Yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,...e){throw K0(t,...e)}function Di(t,...e){return K0(t,...e)}function $0(t,e,n){const r=Object.assign(Object.assign({},Q4()),{[e]:n});return new Dd("auth","Firebase",r).create(e,{appName:t.name})}function Rs(t){return $0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function X4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&xi(t,"argument-error"),$0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function K0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return p2.create(t,...e)}function Pe(t,e,...n){if(!t)throw K0(e,...n)}function As(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wf(e),new Error(e)}function Os(t,e){t||As(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function J4(){return _1()==="http:"||_1()==="https:"}function _1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J4()||RO()||"connection"in navigator)?navigator.onLine:!0}function ej(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.shortDelay=e,this.longDelay=n,Os(n>e,"Short delay should be less than long delay!"),this.isMobile=SO()||IO()}get(){return Z4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t,e){Os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;As("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;As("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;As("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rj=new Md(3e4,6e4);function Ga(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $a(t,e,n,r,s={}){return v2(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const d=Od(Object.assign({key:t.config.apiKey},u)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},o);return CO()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Vs(t.emulatorConfig.host)&&(f.credentials="include"),g2.fetch()(await y2(t,t.config.apiHost,n,d),f)})}async function v2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tj),e);try{const s=new sj(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw xf(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const d=o.ok?u.errorMessage:u.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw xf(t,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw xf(t,"email-already-in-use",u);if(h==="USER_DISABLED")throw xf(t,"user-disabled",u);const v=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw $0(t,v,f);xi(t,v)}}catch(s){if(s instanceof Mi)throw s;xi(t,"network-request-failed",{message:String(s)})}}async function Pd(t,e,n,r,s={}){const o=await $a(t,e,n,r,s);return"mfaPendingCredential"in o&&xi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function y2(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?Y0(t.config,s):`${t.config.apiScheme}://${s}`;return nj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function ij(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Di(this.auth,"network-request-failed")),rj.get())})}}function xf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Di(t,e,r);return s.customData._tokenResponse=n,s}function w1(t){return t!==void 0&&t.enterprise!==void 0}class aj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ij(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oj(t,e){return $a(t,"GET","/v2/recaptchaConfig",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e){return $a(t,"POST","/v1/accounts:delete",e)}async function bm(t,e){return $a(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uj(t,e=!1){const n=jt(t),r=await n.getIdToken(e),s=Q0(r);Pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Kc(Jv(s.auth_time)),issuedAtTime:Kc(Jv(s.iat)),expirationTime:Kc(Jv(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Jv(t){return Number(t)*1e3}function Q0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wf("JWT malformed, contained fewer than 3 sections"),null;try{const s=i2(n);return s?JSON.parse(s):(Wf("Failed to decode base64 JWT payload"),null)}catch(s){return Wf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function E1(t){const e=Q0(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Mi&&cj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pd(t,bm(n,{idToken:r}));Pe(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?b2(o.providerUserInfo):[],d=fj(t.providerData,u),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(d!=null&&d.length),v=h?f:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Py(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,b)}async function hj(t){const e=jt(t);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function b2(t){return t.map(e=>{var{providerId:n}=e,r=G0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e){const n=await v2(t,{},async()=>{const r=Od({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await y2(t,s,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return t.emulatorConfig&&Vs(t.emulatorConfig.host)&&(h.credentials="include"),g2.fetch()(u,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pj(t,e){return $a(t,"POST","/v2/accounts:revokeToken",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=E1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await mj(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new eu;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Pe(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(Pe(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eu,this.toJSON())}_performRefresh(){return As("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ii{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=G0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Py(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await pd(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uj(this,e)}reload(){return hj(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wr(this.auth.app))return Promise.reject(Rs(this.auth));const e=await this.getIdToken();return await pd(this,lj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,u,d,h,f,v;const b=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,E=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(u=n.photoURL)!==null&&u!==void 0?u:void 0,D=(d=n.tenantId)!==null&&d!==void 0?d:void 0,M=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,U=(f=n.createdAt)!==null&&f!==void 0?f:void 0,j=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:z,emailVerified:G,isAnonymous:$,providerData:q,stsTokenManager:C}=n;Pe(z&&C,e,"internal-error");const S=eu.fromJSON(this.name,C);Pe(typeof z=="string",e,"internal-error"),ba(b,e.name),ba(x,e.name),Pe(typeof G=="boolean",e,"internal-error"),Pe(typeof $=="boolean",e,"internal-error"),ba(E,e.name),ba(A,e.name),ba(D,e.name),ba(M,e.name),ba(U,e.name),ba(j,e.name);const I=new Ii({uid:z,auth:e,email:x,emailVerified:G,displayName:b,isAnonymous:$,photoURL:A,phoneNumber:E,tenantId:D,stsTokenManager:S,createdAt:U,lastLoginAt:j});return q&&Array.isArray(q)&&(I.providerData=q.map(V=>Object.assign({},V))),M&&(I._redirectEventId=M),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new eu;s.updateFromServerResponse(n);const o=new Ii({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Pe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?b2(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),d=new eu;d.updateFromIdToken(r);const h=new Ii({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Py(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new Map;function Cs(t){Os(t instanceof Function,"Expected a class definition");let e=T1.get(t);return e?(Os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}x2.type="NONE";const S1=x2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,n){return`firebase:${t}:${e}:${n}`}class tu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Xf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Xf("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bm(this.auth,{idToken:e}).catch(()=>{});return n?Ii._fromGetAccountInfoResponse(this.auth,n,e):null}return Ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tu(Cs(S1),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Cs(S1);const u=Xf(r,e.config.apiKey,e.name);let d=null;for(const f of n)try{const v=await f._get(u);if(v){let b;if(typeof v=="string"){const x=await bm(e,{idToken:v}).catch(()=>{});if(!x)break;b=await Ii._fromGetAccountInfoResponse(e,x,v)}else b=Ii._fromJSON(e,v);f!==o&&(d=b),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new tu(o,e,r):(o=h[0],d&&await o._set(u,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(u)}catch{}})),new tu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A2(e))return"Blackberry";if(C2(e))return"Webos";if(w2(e))return"Safari";if((e.includes("chrome/")||E2(e))&&!e.includes("edge/"))return"Chrome";if(S2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _2(t=gr()){return/firefox\//i.test(t)}function w2(t=gr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E2(t=gr()){return/crios\//i.test(t)}function T2(t=gr()){return/iemobile/i.test(t)}function S2(t=gr()){return/android/i.test(t)}function A2(t=gr()){return/blackberry/i.test(t)}function C2(t=gr()){return/webos/i.test(t)}function W0(t=gr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gj(t=gr()){var e;return W0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vj(){return NO()&&document.documentMode===10}function R2(t=gr()){return W0(t)||S2(t)||C2(t)||A2(t)||/windows phone/i.test(t)||T2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t,e=[]){let n;switch(t){case"Browser":n=A1(gr());break;case"Worker":n=`${A1(gr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,d)=>{try{const h=e(o);u(h)}catch(h){d(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e={}){return $a(t,"GET","/v2/passwordPolicy",Ga(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=6;class _j{constructor(e){var n,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:xj,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,u,d;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(u=h.containsNumericCharacter)!==null&&u!==void 0?u:!0),h.isValid&&(h.isValid=(d=h.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C1(this),this.idTokenSubscription=new C1(this),this.beforeStateQueue=new yj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cs(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await tu.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bm(this,{idToken:e}),r=await Ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!u||u===d)&&(h!=null&&h.user)&&(s=h.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ej()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wr(this.app))return Promise.reject(Rs(this));const n=e?jt(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wr(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wr(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bj(this),n=new _j(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cs(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await tu.create(this,[Cs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(d,this,"internal-error"),d.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{u=!0,h()}}else{const h=e.addObserver(n);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&W4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ka(t){return jt(t)}class C1{constructor(e){this.auth=e,this.observer=null,this.addObserver=LO(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ej(t){lp=t}function N2(t){return lp.loadJS(t)}function Tj(){return lp.recaptchaEnterpriseScript}function Sj(){return lp.gapiScript}function Aj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Cj{constructor(){this.enterprise=new Rj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Rj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Ij="recaptcha-enterprise",k2="NO_RECAPTCHA";class Nj{constructor(e){this.type=Ij,this.auth=Ka(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,d)=>{oj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new aj(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,u(f.siteKey)}}).catch(h=>{d(h)})})}function s(o,u,d){const h=window.grecaptcha;w1(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{u(f)}).catch(()=>{u(k2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Cj().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(d=>{if(!n&&w1(window.grecaptcha))s(d,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Tj();h.length!==0&&(h+=d),N2(h).then(()=>{s(d,o,u)}).catch(f=>{u(f)})}}).catch(d=>{u(d)})})}}async function R1(t,e,n,r=!1,s=!1){const o=new Nj(t);let u;if(s)u=k2;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Vy(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await R1(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await R1(t,e,n,n==="getOobCode");return r(t,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e){const n=jd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(zo(o,e??{}))return s;xi(s,"already-initialized")}return n.initialize({options:e})}function Dj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Oj(t,e,n){const r=Ka(t);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=D2(e),{host:u,port:d}=jj(e),h=d===null?"":`:${d}`,f={url:`${o}//${u}${h}/`},v=Object.freeze({host:u,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(zo(f,r.config.emulator)&&zo(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Vs(u)?(sp(`${o}//${u}${h}`),ap("Auth",!0)):Mj()}function D2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jj(t){const e=D2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:I1(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:I1(u)}}}function I1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Mj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return As("not implemented")}_getIdTokenResponse(e){return As("not implemented")}_linkToIdToken(e,n){return As("not implemented")}_getReauthenticationResolver(e){return As("not implemented")}}async function Pj(t,e){return $a(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(t,e){return Pd(t,"POST","/v1/accounts:signInWithPassword",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(t,e){return Pd(t,"POST","/v1/accounts:signInWithEmailLink",Ga(t,e))}async function Uj(t,e){return Pd(t,"POST","/v1/accounts:signInWithEmailLink",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends X0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new gd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vy(e,n,"signInWithPassword",Vj);case"emailLink":return Lj(e,{email:this._email,oobCode:this._password});default:xi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vy(e,r,"signUpPassword",Pj);case"emailLink":return Uj(e,{idToken:n,email:this._email,oobCode:this._password});default:xi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,e){return Pd(t,"POST","/v1/accounts:signInWithIdp",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj="http://localhost";class Bo extends X0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=G0(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Bo(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return nu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nu(e,n)}buildRequest(){const e={requestUri:zj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Od(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fj(t){const e=Oc(jc(t)).link,n=e?Oc(jc(e)).deep_link_id:null,r=Oc(jc(t)).deep_link_id;return(r?Oc(jc(r)).link:null)||r||n||e||t}class J0{constructor(e){var n,r,s,o,u,d;const h=Oc(jc(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,v=(r=h.oobCode)!==null&&r!==void 0?r:null,b=Bj((s=h.mode)!==null&&s!==void 0?s:null);Pe(f&&v&&b,"argument-error"),this.apiKey=f,this.operation=b,this.code=v,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=h.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=h.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=Fj(e);try{return new J0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.providerId=wu.PROVIDER_ID}static credential(e,n){return gd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=J0.parseLink(n);return Pe(r,"argument-error"),gd._fromEmailAndCode(e,r.code,r.tenantId)}}wu.PROVIDER_ID="password";wu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Z0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Vd{constructor(){super("facebook.com")}static credential(e){return Bo._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Vd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bo._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ss.credential(n,r)}catch{return null}}}Ss.GOOGLE_SIGN_IN_METHOD="google.com";Ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Vd{constructor(){super("github.com")}static credential(e){return Bo._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.GITHUB_SIGN_IN_METHOD="github.com";wa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Vd{constructor(){super("twitter.com")}static credential(e,n){return Bo._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ea.credential(n,r)}catch{return null}}}Ea.TWITTER_SIGN_IN_METHOD="twitter.com";Ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,e){return Pd(t,"POST","/v1/accounts:signUp",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Ii._fromIdTokenResponse(e,r,s),u=N1(r);return new Fo({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=N1(r);return new Fo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function N1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends Mi{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,_m.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new _m(e,n,r,s)}}function O2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_m._fromErrorAndOperation(t,o,e,r):o})}async function Hj(t,e,n=!1){const r=await pd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e,n=!1){const{auth:r}=t;if(wr(r.app))return Promise.reject(Rs(r));const s="reauthenticate";try{const o=await pd(t,O2(r,s,e,t),n);Pe(o.idToken,r,"internal-error");const u=Q0(o.idToken);Pe(u,r,"internal-error");const{sub:d}=u;return Pe(t.uid===d,r,"user-mismatch"),Fo._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&xi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e,n=!1){if(wr(t.app))return Promise.reject(Rs(t));const r="signIn",s=await O2(t,r,e),o=await Fo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function $j(t,e){return j2(Ka(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t){const e=Ka(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Kj(t,e,n){if(wr(t.app))return Promise.reject(Rs(t));const r=Ka(t),u=await Vy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qj).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&M2(t),h}),d=await Fo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function Yj(t,e,n){return wr(t.app)?Promise.reject(Rs(t)):$j(jt(t),wu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&M2(t),r})}function Qj(t,e,n,r){return jt(t).onIdTokenChanged(e,n,r)}function Wj(t,e,n){return jt(t).beforeAuthStateChanged(e,n)}function Xj(t,e,n,r){return jt(t).onAuthStateChanged(e,n,r)}function Zv(t){return jt(t).signOut()}const wm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wm,"1"),this.storage.removeItem(wm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=1e3,Zj=10;class V2 extends P2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,h)=>{this.notifyListeners(u,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);vj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Zj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Jj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}V2.type="LOCAL";const eM=V2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2 extends P2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}L2.type="SESSION";const U2=L2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new up(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async f=>f(n.origin,o)),h=await tM(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}up.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((d,h)=>{const f=eb("",20);s.port1.start();const v=setTimeout(()=>{h(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(b){const x=b;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(x.data.response);break;default:clearTimeout(v),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function rM(t){$i().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function iM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aM(){return z2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="firebaseLocalStorageDb",oM=1,Em="firebaseLocalStorage",F2="fbase_key";class Ld{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cp(t,e){return t.transaction([Em],e?"readwrite":"readonly").objectStore(Em)}function lM(){const t=indexedDB.deleteDatabase(B2);return new Ld(t).toPromise()}function Ly(){const t=indexedDB.open(B2,oM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Em,{keyPath:F2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Em)?e(r):(r.close(),await lM(),e(await Ly()))})})}async function k1(t,e,n){const r=cp(t,!0).put({[F2]:e,value:n});return new Ld(r).toPromise()}async function uM(t,e){const n=cp(t,!1).get(e),r=await new Ld(n).toPromise();return r===void 0?null:r.value}function D1(t,e){const n=cp(t,!0).delete(e);return new Ld(n).toPromise()}const cM=800,dM=3;class q2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>dM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=up._getInstance(aM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iM(),!this.activeServiceWorker)return;this.sender=new nM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ly();return await k1(e,wm,"1"),await D1(e,wm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>k1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=cp(s,!1).getAll();return new Ld(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q2.type="LOCAL";const hM=q2;new Md(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t,e){return e?Cs(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb extends X0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fM(t){return j2(t.auth,new tb(t),t.bypassAuthState)}function mM(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),Gj(n,new tb(t),t.bypassAuthState)}async function pM(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),Hj(n,new tb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:d}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fM;case"linkViaPopup":case"linkViaRedirect":return pM;case"reauthViaPopup":case"reauthViaRedirect":return mM;default:xi(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new Md(2e3,1e4);async function vM(t,e,n){if(wr(t.app))return Promise.reject(Di(t,"operation-not-supported-in-this-environment"));const r=Ka(t);X4(t,e,Z0);const s=H2(r,n);return new ko(r,"signInViaPopup",e,s).executeNotNull()}class ko extends G2{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=eb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gM.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM="pendingRedirect",Jf=new Map;class bM extends G2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jf.get(this.auth._key());if(!e){try{const r=await xM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jf.set(this.auth._key(),e)}return this.bypassAuthState||Jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xM(t,e){const n=EM(e),r=wM(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _M(t,e){Jf.set(t._key(),e)}function wM(t){return Cs(t._redirectPersistence)}function EM(t){return Xf(yM,t.config.apiKey,t.name)}async function TM(t,e,n=!1){if(wr(t.app))return Promise.reject(Rs(t));const r=Ka(t),s=H2(r,e),u=await new bM(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=600*1e3;class AM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$2(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Di(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SM&&this.cachedEventUids.clear(),this.cachedEventUids.has(O1(e))}saveEventToCache(e){this.cachedEventUids.add(O1(e)),this.lastProcessedEventTime=Date.now()}}function O1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e={}){return $a(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NM=/^https?/;async function kM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RM(t);for(const n of e)try{if(DM(n))return}catch{}xi(t,"unauthorized-domain")}function DM(t){const e=My(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!NM.test(n))return!1;if(IM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new Md(3e4,6e4);function j1(){const t=$i().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jM(t){return new Promise((e,n)=>{var r,s,o;function u(){j1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j1(),n(Di(t,"network-request-failed"))},timeout:OM.get()})}if(!((s=(r=$i().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=$i().gapi)===null||o===void 0)&&o.load)u();else{const d=Aj("iframefcb");return $i()[d]=()=>{gapi.load?u():n(Di(t,"network-request-failed"))},N2(`${Sj()}?onload=${d}`).catch(h=>n(h))}}).catch(e=>{throw Zf=null,e})}let Zf=null;function MM(t){return Zf=Zf||jM(t),Zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new Md(5e3,15e3),VM="__/auth/iframe",LM="emulator/auth/iframe",UM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BM(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Y0(e,LM):`https://${t.config.authDomain}/${VM}`,r={apiKey:e.apiKey,appName:t.name,v:Yo},s=zM.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Od(r).slice(1)}`}async function FM(t){const e=await MM(t),n=$i().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:BM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UM,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=Di(t,"network-request-failed"),d=$i().setTimeout(()=>{o(u)},PM.get());function h(){$i().clearTimeout(d),s(r)}r.ping(h).then(h,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HM=500,GM=600,$M="_blank",KM="http://localhost";class M1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YM(t,e,n,r=HM,s=GM){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h=Object.assign(Object.assign({},qM),{width:r.toString(),height:s.toString(),top:o,left:u}),f=gr().toLowerCase();n&&(d=E2(f)?$M:n),_2(f)&&(e=e||KM,h.scrollbars="yes");const v=Object.entries(h).reduce((x,[E,A])=>`${x}${E}=${A},`,"");if(gj(f)&&d!=="_self")return QM(e||"",d),new M1(null);const b=window.open(e||"",d,v);Pe(b,t,"popup-blocked");try{b.focus()}catch{}return new M1(b)}function QM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="__/auth/handler",XM="emulator/auth/handler",JM=encodeURIComponent("fac");async function P1(t,e,n,r,s,o){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yo,eventId:s};if(e instanceof Z0){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",VO(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))u[v]=b}if(e instanceof Vd){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(u.scopes=v.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const h=await t._getAppCheckToken(),f=h?`#${JM}=${encodeURIComponent(h)}`:"";return`${ZM(t)}?${Od(d).slice(1)}${f}`}function ZM({config:t}){return t.emulator?Y0(t,XM):`https://${t.authDomain}/${WM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="webStorageSupport";class eP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U2,this._completeRedirectFn=TM,this._overrideRedirectResult=_M}async _openPopup(e,n,r,s){var o;Os((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await P1(e,n,r,My(),s);return YM(e,u,eb())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await P1(e,n,r,My(),s);return rM(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Os(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FM(e),r=new AM(e);return n.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ey,{type:ey},s=>{var o;const u=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[ey];u!==void 0&&n(!!u),xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R2()||w2()||W0()}}const tP=eP;var V1="@firebase/auth",L1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iP(t){Ma(new ks("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I2(t)},f=new wj(r,s,o,h);return Dj(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ma(new ks("auth-internal",e=>{const n=Ka(e.getProvider("auth").getImmediate());return(r=>new nP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(V1,L1,rP(t)),bi(V1,L1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=300,aP=o2("authIdTokenMaxAge")||sP;let U1=null;const oP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>aP)return;const s=n==null?void 0:n.token;U1!==s&&(U1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lP(t=op()){const e=jd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kj(t,{popupRedirectResolver:tP,persistence:[hM,eM,U2]}),r=o2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=oP(o.toString());Wj(n,u,()=>u(n.currentUser)),Qj(n,d=>u(d))}}const s=s2("auth");return s&&Oj(n,`http://${s}`),n}function uP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ej({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Di("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",uP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iP("Browser");var cP="firebase",dP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi(cP,dP,"app");var z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Da,K2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function I(){}I.prototype=S.prototype,C.D=S.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(V,P,L){for(var N=Array(arguments.length-2),be=2;be<arguments.length;be++)N[be-2]=arguments[be];return S.prototype[P].apply(V,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,S,I){I||(I=0);var V=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)V[P]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(P=0;16>P;++P)V[P]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=C.g[0],I=C.g[1],P=C.g[2];var L=C.g[3],N=S+(L^I&(P^L))+V[0]+3614090360&4294967295;S=I+(N<<7&4294967295|N>>>25),N=L+(P^S&(I^P))+V[1]+3905402710&4294967295,L=S+(N<<12&4294967295|N>>>20),N=P+(I^L&(S^I))+V[2]+606105819&4294967295,P=L+(N<<17&4294967295|N>>>15),N=I+(S^P&(L^S))+V[3]+3250441966&4294967295,I=P+(N<<22&4294967295|N>>>10),N=S+(L^I&(P^L))+V[4]+4118548399&4294967295,S=I+(N<<7&4294967295|N>>>25),N=L+(P^S&(I^P))+V[5]+1200080426&4294967295,L=S+(N<<12&4294967295|N>>>20),N=P+(I^L&(S^I))+V[6]+2821735955&4294967295,P=L+(N<<17&4294967295|N>>>15),N=I+(S^P&(L^S))+V[7]+4249261313&4294967295,I=P+(N<<22&4294967295|N>>>10),N=S+(L^I&(P^L))+V[8]+1770035416&4294967295,S=I+(N<<7&4294967295|N>>>25),N=L+(P^S&(I^P))+V[9]+2336552879&4294967295,L=S+(N<<12&4294967295|N>>>20),N=P+(I^L&(S^I))+V[10]+4294925233&4294967295,P=L+(N<<17&4294967295|N>>>15),N=I+(S^P&(L^S))+V[11]+2304563134&4294967295,I=P+(N<<22&4294967295|N>>>10),N=S+(L^I&(P^L))+V[12]+1804603682&4294967295,S=I+(N<<7&4294967295|N>>>25),N=L+(P^S&(I^P))+V[13]+4254626195&4294967295,L=S+(N<<12&4294967295|N>>>20),N=P+(I^L&(S^I))+V[14]+2792965006&4294967295,P=L+(N<<17&4294967295|N>>>15),N=I+(S^P&(L^S))+V[15]+1236535329&4294967295,I=P+(N<<22&4294967295|N>>>10),N=S+(P^L&(I^P))+V[1]+4129170786&4294967295,S=I+(N<<5&4294967295|N>>>27),N=L+(I^P&(S^I))+V[6]+3225465664&4294967295,L=S+(N<<9&4294967295|N>>>23),N=P+(S^I&(L^S))+V[11]+643717713&4294967295,P=L+(N<<14&4294967295|N>>>18),N=I+(L^S&(P^L))+V[0]+3921069994&4294967295,I=P+(N<<20&4294967295|N>>>12),N=S+(P^L&(I^P))+V[5]+3593408605&4294967295,S=I+(N<<5&4294967295|N>>>27),N=L+(I^P&(S^I))+V[10]+38016083&4294967295,L=S+(N<<9&4294967295|N>>>23),N=P+(S^I&(L^S))+V[15]+3634488961&4294967295,P=L+(N<<14&4294967295|N>>>18),N=I+(L^S&(P^L))+V[4]+3889429448&4294967295,I=P+(N<<20&4294967295|N>>>12),N=S+(P^L&(I^P))+V[9]+568446438&4294967295,S=I+(N<<5&4294967295|N>>>27),N=L+(I^P&(S^I))+V[14]+3275163606&4294967295,L=S+(N<<9&4294967295|N>>>23),N=P+(S^I&(L^S))+V[3]+4107603335&4294967295,P=L+(N<<14&4294967295|N>>>18),N=I+(L^S&(P^L))+V[8]+1163531501&4294967295,I=P+(N<<20&4294967295|N>>>12),N=S+(P^L&(I^P))+V[13]+2850285829&4294967295,S=I+(N<<5&4294967295|N>>>27),N=L+(I^P&(S^I))+V[2]+4243563512&4294967295,L=S+(N<<9&4294967295|N>>>23),N=P+(S^I&(L^S))+V[7]+1735328473&4294967295,P=L+(N<<14&4294967295|N>>>18),N=I+(L^S&(P^L))+V[12]+2368359562&4294967295,I=P+(N<<20&4294967295|N>>>12),N=S+(I^P^L)+V[5]+4294588738&4294967295,S=I+(N<<4&4294967295|N>>>28),N=L+(S^I^P)+V[8]+2272392833&4294967295,L=S+(N<<11&4294967295|N>>>21),N=P+(L^S^I)+V[11]+1839030562&4294967295,P=L+(N<<16&4294967295|N>>>16),N=I+(P^L^S)+V[14]+4259657740&4294967295,I=P+(N<<23&4294967295|N>>>9),N=S+(I^P^L)+V[1]+2763975236&4294967295,S=I+(N<<4&4294967295|N>>>28),N=L+(S^I^P)+V[4]+1272893353&4294967295,L=S+(N<<11&4294967295|N>>>21),N=P+(L^S^I)+V[7]+4139469664&4294967295,P=L+(N<<16&4294967295|N>>>16),N=I+(P^L^S)+V[10]+3200236656&4294967295,I=P+(N<<23&4294967295|N>>>9),N=S+(I^P^L)+V[13]+681279174&4294967295,S=I+(N<<4&4294967295|N>>>28),N=L+(S^I^P)+V[0]+3936430074&4294967295,L=S+(N<<11&4294967295|N>>>21),N=P+(L^S^I)+V[3]+3572445317&4294967295,P=L+(N<<16&4294967295|N>>>16),N=I+(P^L^S)+V[6]+76029189&4294967295,I=P+(N<<23&4294967295|N>>>9),N=S+(I^P^L)+V[9]+3654602809&4294967295,S=I+(N<<4&4294967295|N>>>28),N=L+(S^I^P)+V[12]+3873151461&4294967295,L=S+(N<<11&4294967295|N>>>21),N=P+(L^S^I)+V[15]+530742520&4294967295,P=L+(N<<16&4294967295|N>>>16),N=I+(P^L^S)+V[2]+3299628645&4294967295,I=P+(N<<23&4294967295|N>>>9),N=S+(P^(I|~L))+V[0]+4096336452&4294967295,S=I+(N<<6&4294967295|N>>>26),N=L+(I^(S|~P))+V[7]+1126891415&4294967295,L=S+(N<<10&4294967295|N>>>22),N=P+(S^(L|~I))+V[14]+2878612391&4294967295,P=L+(N<<15&4294967295|N>>>17),N=I+(L^(P|~S))+V[5]+4237533241&4294967295,I=P+(N<<21&4294967295|N>>>11),N=S+(P^(I|~L))+V[12]+1700485571&4294967295,S=I+(N<<6&4294967295|N>>>26),N=L+(I^(S|~P))+V[3]+2399980690&4294967295,L=S+(N<<10&4294967295|N>>>22),N=P+(S^(L|~I))+V[10]+4293915773&4294967295,P=L+(N<<15&4294967295|N>>>17),N=I+(L^(P|~S))+V[1]+2240044497&4294967295,I=P+(N<<21&4294967295|N>>>11),N=S+(P^(I|~L))+V[8]+1873313359&4294967295,S=I+(N<<6&4294967295|N>>>26),N=L+(I^(S|~P))+V[15]+4264355552&4294967295,L=S+(N<<10&4294967295|N>>>22),N=P+(S^(L|~I))+V[6]+2734768916&4294967295,P=L+(N<<15&4294967295|N>>>17),N=I+(L^(P|~S))+V[13]+1309151649&4294967295,I=P+(N<<21&4294967295|N>>>11),N=S+(P^(I|~L))+V[4]+4149444226&4294967295,S=I+(N<<6&4294967295|N>>>26),N=L+(I^(S|~P))+V[11]+3174756917&4294967295,L=S+(N<<10&4294967295|N>>>22),N=P+(S^(L|~I))+V[2]+718787259&4294967295,P=L+(N<<15&4294967295|N>>>17),N=I+(L^(P|~S))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var I=S-this.blockSize,V=this.B,P=this.h,L=0;L<S;){if(P==0)for(;L<=I;)s(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<S;)if(V[P++]=C.charCodeAt(L++),P==this.blockSize){s(this,V),P=0;break}}else for(;L<S;)if(V[P++]=C[L++],P==this.blockSize){s(this,V),P=0;break}}this.h=P,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var I=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=I&255,I/=256;for(this.u(C),C=Array(16),S=I=0;4>S;++S)for(var V=0;32>V;V+=8)C[I++]=this.g[S]>>>V&255;return C};function o(C,S){var I=d;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=S(C)}function u(C,S){this.h=S;for(var I=[],V=!0,P=C.length-1;0<=P;P--){var L=C[P]|0;V&&L==S||(I[P]=L,V=!1)}this.g=I}var d={};function h(C){return-128<=C&&128>C?o(C,function(S){return new u([S|0],0>S?-1:0)}):new u([C|0],0>C?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return b;if(0>C)return M(f(-C));for(var S=[],I=1,V=0;C>=I;V++)S[V]=C/I|0,I*=4294967296;return new u(S,0)}function v(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return M(v(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=f(Math.pow(S,8)),V=b,P=0;P<C.length;P+=8){var L=Math.min(8,C.length-P),N=parseInt(C.substring(P,P+L),S);8>L?(L=f(Math.pow(S,L)),V=V.j(L).add(f(N))):(V=V.j(I),V=V.add(f(N)))}return V}var b=h(0),x=h(1),E=h(16777216);t=u.prototype,t.m=function(){if(D(this))return-M(this).m();for(var C=0,S=1,I=0;I<this.g.length;I++){var V=this.i(I);C+=(0<=V?V:4294967296+V)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(A(this))return"0";if(D(this))return"-"+M(this).toString(C);for(var S=f(Math.pow(C,6)),I=this,V="";;){var P=G(I,S).g;I=U(I,P.j(S));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=P,A(I))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function A(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function D(C){return C.h==-1}t.l=function(C){return C=U(this,C),D(C)?-1:A(C)?0:1};function M(C){for(var S=C.g.length,I=[],V=0;V<S;V++)I[V]=~C.g[V];return new u(I,~C.h).add(x)}t.abs=function(){return D(this)?M(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],V=0,P=0;P<=S;P++){var L=V+(this.i(P)&65535)+(C.i(P)&65535),N=(L>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);V=N>>>16,L&=65535,N&=65535,I[P]=N<<16|L}return new u(I,I[I.length-1]&-2147483648?-1:0)};function U(C,S){return C.add(M(S))}t.j=function(C){if(A(this)||A(C))return b;if(D(this))return D(C)?M(this).j(M(C)):M(M(this).j(C));if(D(C))return M(this.j(M(C)));if(0>this.l(E)&&0>C.l(E))return f(this.m()*C.m());for(var S=this.g.length+C.g.length,I=[],V=0;V<2*S;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var P=0;P<C.g.length;P++){var L=this.i(V)>>>16,N=this.i(V)&65535,be=C.i(P)>>>16,ke=C.i(P)&65535;I[2*V+2*P]+=N*ke,j(I,2*V+2*P),I[2*V+2*P+1]+=L*ke,j(I,2*V+2*P+1),I[2*V+2*P+1]+=N*be,j(I,2*V+2*P+1),I[2*V+2*P+2]+=L*be,j(I,2*V+2*P+2)}for(V=0;V<S;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=S;V<2*S;V++)I[V]=0;return new u(I,0)};function j(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function z(C,S){this.g=C,this.h=S}function G(C,S){if(A(S))throw Error("division by zero");if(A(C))return new z(b,b);if(D(C))return S=G(M(C),S),new z(M(S.g),M(S.h));if(D(S))return S=G(C,M(S)),new z(M(S.g),S.h);if(30<C.g.length){if(D(C)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var I=x,V=S;0>=V.l(C);)I=$(I),V=$(V);var P=q(I,1),L=q(V,1);for(V=q(V,2),I=q(I,2);!A(V);){var N=L.add(V);0>=N.l(C)&&(P=P.add(I),L=N),V=q(V,1),I=q(I,1)}return S=U(C,P.j(S)),new z(P,S)}for(P=b;0<=C.l(S);){for(I=Math.max(1,Math.floor(C.m()/S.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=f(I),N=L.j(S);D(N)||0<N.l(C);)I-=V,L=f(I),N=L.j(S);A(L)&&(L=x),P=P.add(L),C=U(C,N)}return new z(P,C)}t.A=function(C){return G(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)&C.i(V);return new u(I,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)|C.i(V);return new u(I,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),I=[],V=0;V<S;V++)I[V]=this.i(V)^C.i(V);return new u(I,this.h^C.h)};function $(C){for(var S=C.g.length+1,I=[],V=0;V<S;V++)I[V]=C.i(V)<<1|C.i(V-1)>>>31;return new u(I,C.h)}function q(C,S){var I=S>>5;S%=32;for(var V=C.g.length-I,P=[],L=0;L<V;L++)P[L]=0<S?C.i(L+I)>>>S|C.i(L+I+1)<<32-S:C.i(L+I);return new u(P,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K2=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=v,Da=u}).apply(typeof z1<"u"?z1:typeof self<"u"?self:typeof window<"u"?window:{});var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y2,Mc,Q2,em,Uy,W2,X2,J2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,_,T){return m==Array.prototype||m==Object.prototype||(m[_]=T.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof _f=="object"&&_f];for(var _=0;_<m.length;++_){var T=m[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(m,_){if(_)e:{var T=r;m=m.split(".");for(var k=0;k<m.length-1;k++){var Y=m[k];if(!(Y in T))break e;T=T[Y]}m=m[m.length-1],k=T[m],_=_(k),_!=k&&_!=null&&e(T,m,{configurable:!0,writable:!0,value:_})}}function o(m,_){m instanceof String&&(m+="");var T=0,k=!1,Y={next:function(){if(!k&&T<m.length){var ne=T++;return{value:_(ne,m[ne]),done:!1}}return k=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(m){return m||function(){return o(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function h(m){var _=typeof m;return _=_!="object"?_:m?Array.isArray(m)?"array":_:"null",_=="array"||_=="object"&&typeof m.length=="number"}function f(m){var _=typeof m;return _=="object"&&m!=null||_=="function"}function v(m,_,T){return m.call.apply(m.bind,arguments)}function b(m,_,T){if(!m)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,k),m.apply(_,Y)}}return function(){return m.apply(_,arguments)}}function x(m,_,T){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,x.apply(null,arguments)}function E(m,_){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function A(m,_){function T(){}T.prototype=_.prototype,m.aa=_.prototype,m.prototype=new T,m.prototype.constructor=m,m.Qb=function(k,Y,ne){for(var me=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)me[bt-2]=arguments[bt];return _.prototype[Y].apply(k,me)}}function D(m){const _=m.length;if(0<_){const T=Array(_);for(let k=0;k<_;k++)T[k]=m[k];return T}return[]}function M(m,_){for(let T=1;T<arguments.length;T++){const k=arguments[T];if(h(k)){const Y=m.length||0,ne=k.length||0;m.length=Y+ne;for(let me=0;me<ne;me++)m[Y+me]=k[me]}else m.push(k)}}class U{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(m){return/^[\s\xa0]*$/.test(m)}function z(){var m=d.navigator;return m&&(m=m.userAgent)?m:""}function G(m){return G[" "](m),m}G[" "]=function(){};var $=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function q(m,_,T){for(const k in m)_.call(T,m[k],k,m)}function C(m,_){for(const T in m)_.call(void 0,m[T],T,m)}function S(m){const _={};for(const T in m)_[T]=m[T];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(m,_){let T,k;for(let Y=1;Y<arguments.length;Y++){k=arguments[Y];for(T in k)m[T]=k[T];for(let ne=0;ne<I.length;ne++)T=I[ne],Object.prototype.hasOwnProperty.call(k,T)&&(m[T]=k[T])}}function P(m){var _=1;m=m.split(":");const T=[];for(;0<_&&m.length;)T.push(m.shift()),_--;return m.length&&T.push(m.join(":")),T}function L(m){d.setTimeout(()=>{throw m},0)}function N(){var m=we;let _=null;return m.g&&(_=m.g,m.g=m.g.next,m.g||(m.h=null),_.next=null),_}class be{constructor(){this.h=this.g=null}add(_,T){const k=ke.get();k.set(_,T),this.h?this.h.next=k:this.g=k,this.h=k}}var ke=new U(()=>new Q,m=>m.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let se,he=!1,we=new be,Ee=()=>{const m=d.Promise.resolve(void 0);se=()=>{m.then(B)}};var B=()=>{for(var m;m=N();){try{m.h.call(m.g)}catch(T){L(T)}var _=ke;_.j(m),100>_.h&&(_.h++,m.next=_.g,_.g=m)}he=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(m,_){this.type=m,this.g=this.target=_,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var re=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var m=!1,_=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};d.addEventListener("test",T,_),d.removeEventListener("test",T,_)}catch{}return m})();function fe(m,_){if(ee.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var T=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=_,_=m.relatedTarget){if($){e:{try{G(_.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(_=null)}}else T=="mouseover"?_=m.fromElement:T=="mouseout"&&(_=m.toElement);this.relatedTarget=_,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:je[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&fe.aa.h.call(this)}}A(fe,ee);var je={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),Mt=0;function St(m,_,T,k,Y){this.listener=m,this.proxy=null,this.src=_,this.type=T,this.capture=!!k,this.ha=Y,this.key=++Mt,this.da=this.fa=!1}function qn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Tr(m){this.src=m,this.g={},this.h=0}Tr.prototype.add=function(m,_,T,k,Y){var ne=m.toString();m=this.g[ne],m||(m=this.g[ne]=[],this.h++);var me=Hn(m,_,k,Y);return-1<me?(_=m[me],T||(_.fa=!1)):(_=new St(_,this.src,ne,!!k,Y),_.fa=T,m.push(_)),_};function Vt(m,_){var T=_.type;if(T in m.g){var k=m.g[T],Y=Array.prototype.indexOf.call(k,_,void 0),ne;(ne=0<=Y)&&Array.prototype.splice.call(k,Y,1),ne&&(qn(_),m.g[T].length==0&&(delete m.g[T],m.h--))}}function Hn(m,_,T,k){for(var Y=0;Y<m.length;++Y){var ne=m[Y];if(!ne.da&&ne.listener==_&&ne.capture==!!T&&ne.ha==k)return Y}return-1}var Tn="closure_lm_"+(1e6*Math.random()|0),Dn={};function On(m,_,T,k,Y){if(Array.isArray(_)){for(var ne=0;ne<_.length;ne++)On(m,_[ne],T,k,Y);return null}return T=on(T),m&&m[Te]?m.K(_,T,f(k)?!!k.capture:!1,Y):nr(m,_,T,!1,k,Y)}function nr(m,_,T,k,Y,ne){if(!_)throw Error("Invalid event type");var me=f(Y)?!!Y.capture:!!Y,bt=Br(m);if(bt||(m[Tn]=bt=new Tr(m)),T=bt.add(_,T,k,me,ne),T.proxy)return T;if(k=zr(),T.proxy=k,k.src=m,k.listener=T,m.addEventListener)re||(Y=me),Y===void 0&&(Y=!1),m.addEventListener(_.toString(),k,Y);else if(m.attachEvent)m.attachEvent(Ar(_.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function zr(){function m(T){return _.call(m.src,m.listener,T)}const _=_i;return m}function Sr(m,_,T,k,Y){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)Sr(m,_[ne],T,k,Y);else k=f(k)?!!k.capture:!!k,T=on(T),m&&m[Te]?(m=m.i,_=String(_).toString(),_ in m.g&&(ne=m.g[_],T=Hn(ne,T,k,Y),-1<T&&(qn(ne[T]),Array.prototype.splice.call(ne,T,1),ne.length==0&&(delete m.g[_],m.h--)))):m&&(m=Br(m))&&(_=m.g[_.toString()],m=-1,_&&(m=Hn(_,T,k,Y)),(T=-1<m?_[m]:null)&&jn(T))}function jn(m){if(typeof m!="number"&&m&&!m.da){var _=m.src;if(_&&_[Te])Vt(_.i,m);else{var T=m.type,k=m.proxy;_.removeEventListener?_.removeEventListener(T,k,m.capture):_.detachEvent?_.detachEvent(Ar(T),k):_.addListener&&_.removeListener&&_.removeListener(k),(T=Br(_))?(Vt(T,m),T.h==0&&(T.src=null,_[Tn]=null)):qn(m)}}}function Ar(m){return m in Dn?Dn[m]:Dn[m]="on"+m}function _i(m,_){if(m.da)m=!0;else{_=new fe(_,this);var T=m.listener,k=m.ha||m.src;m.fa&&jn(m),m=T.call(k,_)}return m}function Br(m){return m=m[Tn],m instanceof Tr?m:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(m){return typeof m=="function"?m:(m[wt]||(m[wt]=function(_){return m.handleEvent(_)}),m[wt])}function He(){J.call(this),this.i=new Tr(this),this.M=this,this.F=null}A(He,J),He.prototype[Te]=!0,He.prototype.removeEventListener=function(m,_,T,k){Sr(this,m,_,T,k)};function Lt(m,_){var T,k=m.F;if(k)for(T=[];k;k=k.F)T.push(k);if(m=m.M,k=_.type||_,typeof _=="string")_=new ee(_,m);else if(_ instanceof ee)_.target=_.target||m;else{var Y=_;_=new ee(k,m),V(_,Y)}if(Y=!0,T)for(var ne=T.length-1;0<=ne;ne--){var me=_.g=T[ne];Y=$t(me,k,!0,_)&&Y}if(me=_.g=m,Y=$t(me,k,!0,_)&&Y,Y=$t(me,k,!1,_)&&Y,T)for(ne=0;ne<T.length;ne++)me=_.g=T[ne],Y=$t(me,k,!1,_)&&Y}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var m=this.i,_;for(_ in m.g){for(var T=m.g[_],k=0;k<T.length;k++)qn(T[k]);delete m.g[_],m.h--}}this.F=null},He.prototype.K=function(m,_,T,k){return this.i.add(String(m),_,!1,T,k)},He.prototype.L=function(m,_,T,k){return this.i.add(String(m),_,!0,T,k)};function $t(m,_,T,k){if(_=m.i.g[String(_)],!_)return!0;_=_.concat();for(var Y=!0,ne=0;ne<_.length;++ne){var me=_[ne];if(me&&!me.da&&me.capture==T){var bt=me.listener,gn=me.ha||me.src;me.fa&&Vt(m.i,me),Y=bt.call(gn,k)!==!1&&Y}}return Y&&!k.defaultPrevented}function Kt(m,_,T){if(typeof m=="function")T&&(m=x(m,T));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(m,_||0)}function Fr(m){m.g=Kt(()=>{m.g=null,m.i&&(m.i=!1,Fr(m))},m.l);const _=m.h;m.h=null,m.m.apply(null,_)}class Ls extends J{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(m){J.call(this),this.h=m,this.g={}}A(Mn,J);var rr=[];function mn(m){q(m.g,function(_,T){this.g.hasOwnProperty(T)&&jn(_)},m),m.g={}}Mn.prototype.N=function(){Mn.aa.N.call(this),mn(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=d.JSON.stringify,ge=d.JSON.parse,_e=class{stringify(m){return d.JSON.stringify(m,void 0)}parse(m){return d.JSON.parse(m,void 0)}};function qe(){}qe.prototype.h=null;function mt(m){return m.h||(m.h=m.i())}function $e(){}var Ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Je(){ee.call(this,"d")}A(Je,ee);function Ze(){ee.call(this,"c")}A(Ze,ee);var Re={},Le=null;function Ce(){return Le=Le||new He}Re.La="serverreachability";function Sn(m){ee.call(this,Re.La,m)}A(Sn,ee);function At(m){const _=Ce();Lt(_,new Sn(_))}Re.STAT_EVENT="statevent";function De(m,_){ee.call(this,Re.STAT_EVENT,m),this.stat=_}A(De,ee);function pt(m){const _=Ce();Lt(_,new De(_,m))}Re.Ma="timingevent";function ln(m,_){ee.call(this,Re.Ma,m),this.size=_}A(ln,ee);function kt(m,_){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){m()},_)}function Yt(){this.g=!0}Yt.prototype.xa=function(){this.g=!1};function An(m,_,T,k,Y,ne){m.info(function(){if(m.g)if(ne)for(var me="",bt=ne.split("&"),gn=0;gn<bt.length;gn++){var Qe=bt[gn].split("=");if(1<Qe.length){var Ln=Qe[0];Qe=Qe[1];var Un=Ln.split("_");me=2<=Un.length&&Un[1]=="type"?me+(Ln+"="+Qe+"&"):me+(Ln+"=redacted&")}}else me=null;else me=ne;return"XMLHTTP REQ ("+k+") [attempt "+Y+"]: "+_+`
`+T+`
`+me})}function Cn(m,_,T,k,Y,ne,me){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Y+"]: "+_+`
`+T+`
`+ne+" "+me})}function Pn(m,_,T,k){m.info(function(){return"XMLHTTP TEXT ("+_+"): "+pn(m,T)+(k?" "+k:"")})}function ii(m,_){m.info(function(){return"TIMEOUT: "+_})}Yt.prototype.info=function(){};function pn(m,_){if(!m.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(m=0;m<T.length;m++)if(Array.isArray(T[m])){var k=T[m];if(!(2>k.length)){var Y=k[1];if(Array.isArray(Y)&&!(1>Y.length)){var ne=Y[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var me=1;me<Y.length;me++)Y[me]=""}}}}return le(T)}catch{return _}}var Dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function Cr(){}A(Cr,qe),Cr.prototype.g=function(){return new XMLHttpRequest},Cr.prototype.i=function(){return{}},ir=new Cr;function sr(m,_,T,k){this.j=m,this.i=_,this.l=T,this.R=k||1,this.U=new Mn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ts}function ts(){this.i=null,this.g="",this.h=!1}var qr={},Gn={};function Rr(m,_,T){m.L=1,m.v=to(Zt(_)),m.m=T,m.P=!0,ar(m,null)}function ar(m,_){m.F=Date.now(),de(m),m.A=Zt(m.v);var T=m.A,k=m.R;Array.isArray(k)||(k=[String(k)]),ss(T.i,"t",k),m.C=0,T=m.j.J,m.h=new ts,m.g=hh(m.j,T?_:null,!m.m),0<m.O&&(m.M=new Ls(x(m.Y,m,m.g),m.O)),_=m.U,T=m.g,k=m.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(rr[0]=Y.toString()),Y=rr);for(var ne=0;ne<Y.length;ne++){var me=On(T,Y[ne],k||_.handleEvent,!1,_.h||_);if(!me)break;_.g[me.key]=me}_=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,_)):(m.u="GET",m.g.ea(m.A,m.u,null,_)),At(),An(m.i,m.u,m.A,m.l,m.R,m.m)}sr.prototype.ca=function(m){m=m.target;const _=this.M;_&&yr(m)==3?_.j():this.Y(m)},sr.prototype.Y=function(m){try{if(m==this.g)e:{const Un=yr(this.g);var _=this.g.Ba();const Ws=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||io(this.g)))){this.J||Un!=4||_==7||(_==8||0>=Ws?At(3):At(2)),ze(this);var T=this.g.Z();this.X=T;t:if($n(this)){var k=io(this.g);m="";var Y=k.length,ne=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yt(this),Xe(this);var me="";break t}this.h.i=new d.TextDecoder}for(_=0;_<Y;_++)this.h.h=!0,m+=this.h.i.decode(k[_],{stream:!(ne&&_==Y-1)});k.length=0,this.h.g+=m,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=T==200,Cn(this.i,this.u,this.A,this.l,this.R,Un,T),this.o){if(this.T&&!this.K){t:{if(this.g){var bt,gn=this.g;if((bt=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(bt)){var Qe=bt;break t}}Qe=null}if(T=Qe)Pn(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rn(this,T);else{this.o=!1,this.s=3,pt(12),yt(this),Xe(this);break e}}if(this.P){T=!0;let kr;for(;!this.J&&this.C<me.length;)if(kr=Ir(this,me),kr==Gn){Un==4&&(this.s=4,pt(14),T=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(kr==qr){this.s=4,pt(15),Pn(this.i,this.l,me,"[Invalid Chunk]"),T=!1;break}else Pn(this.i,this.l,kr,null),Rn(this,kr);if($n(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||me.length!=0||this.h.h||(this.s=1,pt(16),T=!1),this.o=this.o&&T,!T)Pn(this.i,this.l,me,"[Invalid Chunked Response]"),yt(this),Xe(this);else if(0<me.length&&!this.W){this.W=!0;var Ln=this.j;Ln.g==this&&Ln.ba&&!Ln.M&&(Ln.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),zu(Ln),Ln.M=!0,pt(11))}}else Pn(this.i,this.l,me,null),Rn(this,me);Un==4&&yt(this),this.o&&!this.J&&(Un==4?uh(this.j,this):(this.o=!1,de(this)))}else rh(this.g),T==400&&0<me.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),yt(this),Xe(this)}}}catch{}finally{}};function $n(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Ir(m,_){var T=m.C,k=_.indexOf(`
`,T);return k==-1?Gn:(T=Number(_.substring(T,k)),isNaN(T)?qr:(k+=1,k+T>_.length?Gn:(_=_.slice(k,k+T),m.C=k+T,_)))}sr.prototype.cancel=function(){this.J=!0,yt(this)};function de(m){m.S=Date.now()+m.I,ve(m,m.I)}function ve(m,_){if(m.B!=null)throw Error("WatchDog timer not null");m.B=kt(x(m.ba,m),_)}function ze(m){m.B&&(d.clearTimeout(m.B),m.B=null)}sr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(ii(this.i,this.A),this.L!=2&&(At(),pt(17)),yt(this),this.s=2,Xe(this)):ve(this,this.S-m)};function Xe(m){m.j.G==0||m.J||uh(m.j,m)}function yt(m){ze(m);var _=m.M;_&&typeof _.ma=="function"&&_.ma(),m.M=null,mn(m.U),m.g&&(_=m.g,m.g=null,_.abort(),_.ma())}function Rn(m,_){try{var T=m.j;if(T.G!=0&&(T.g==m||Us(T.h,m))){if(!m.K&&Us(T.h,m)&&T.G==3){try{var k=T.Da.g.parse(_)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Y=k;if(Y[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<m.F)Ys(T),Ks(T);else break e;Uu(T),pt(18)}}else T.za=Y[1],0<T.za-T.T&&37500>Y[2]&&T.F&&T.v==0&&!T.C&&(T.C=kt(x(T.Za,T),6e3));if(1>=Za(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else os(T,11)}else if((m.K||T.g==m)&&Ys(T),!j(_))for(Y=T.Da.g.parse(_),_=0;_<Y.length;_++){let Qe=Y[_];if(T.T=Qe[0],Qe=Qe[1],T.G==2)if(Qe[0]=="c"){T.K=Qe[1],T.ia=Qe[2];const Ln=Qe[3];Ln!=null&&(T.la=Ln,T.j.info("VER="+T.la));const Un=Qe[4];Un!=null&&(T.Aa=Un,T.j.info("SVER="+T.Aa));const Ws=Qe[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(k=1.5*Ws,T.L=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const kr=m.g;if(kr){const oo=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var ne=k.h;ne.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(zs(ne,ne.h),ne.h=null))}if(k.D){const ls=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;ls&&(k.ya=ls,ct(k.I,k.D,ls))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-m.F,T.j.info("Handshake RTT: "+T.R+"ms")),k=T;var me=m;if(k.qa=dh(k,k.J?k.ia:null,k.W),me.K){si(k.h,me);var bt=me,gn=k.L;gn&&(bt.I=gn),bt.B&&(ze(bt),de(bt)),k.g=me}else oh(k);0<T.i.length&&ll(T)}else Qe[0]!="stop"&&Qe[0]!="close"||os(T,7);else T.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?os(T,7):Vu(T):Qe[0]!="noop"&&T.l&&T.l.ta(Qe),T.v=0)}}At(4)}catch{}}var Ja=class{constructor(m,_){this.g=m,this.map=_}};function ns(m){this.l=m||10,d.PerformanceNavigationTiming?(m=d.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rs(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Za(m){return m.h?1:m.g?m.g.size:0}function Us(m,_){return m.h?m.h==_:m.g?m.g.has(_):!1}function zs(m,_){m.g?m.g.add(_):m.h=_}function si(m,_){m.h&&m.h==_?m.h=null:m.g&&m.g.has(_)&&m.g.delete(_)}ns.prototype.cancel=function(){if(this.i=vr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function vr(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let _=m.i;for(const T of m.g.values())_=_.concat(T.D);return _}return D(m.i)}function Jd(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var _=[],T=m.length,k=0;k<T;k++)_.push(m[k]);return _}_=[],T=0;for(k in m)_[T++]=m[k];return _}function qp(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var _=[];m=m.length;for(var T=0;T<m;T++)_.push(T);return _}_=[],T=0;for(const k in m)_[T++]=k;return _}}}function tl(m,_){if(m.forEach&&typeof m.forEach=="function")m.forEach(_,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,_,void 0);else for(var T=qp(m),k=Jd(m),Y=k.length,ne=0;ne<Y;ne++)_.call(void 0,k[ne],T&&T[ne],m)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nl(m,_){if(m){m=m.split("&");for(var T=0;T<m.length;T++){var k=m[T].indexOf("="),Y=null;if(0<=k){var ne=m[T].substring(0,k);Y=m[T].substring(k+1)}else ne=m[T];_(ne,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function is(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof is){this.h=m.h,Bs(this,m.j),this.o=m.o,this.g=m.g,eo(this,m.s),this.l=m.l;var _=m.i,T=new Pi;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),rl(this,T),this.m=m.m}else m&&(_=String(m).match(Du))?(this.h=!1,Bs(this,_[1]||"",!0),this.o=Fs(_[2]||""),this.g=Fs(_[3]||"",!0),eo(this,_[4]),this.l=Fs(_[5]||"",!0),rl(this,_[6]||"",!0),this.m=Fs(_[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}is.prototype.toString=function(){var m=[],_=this.j;_&&m.push(ai(_,Ou,!0),":");var T=this.g;return(T||_=="file")&&(m.push("//"),(_=this.o)&&m.push(ai(_,Ou,!0),"@"),m.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&m.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(ai(T,T.charAt(0)=="/"?ju:Zd,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",ai(T,$p)),m.join("")};function Zt(m){return new is(m)}function Bs(m,_,T){m.j=T?Fs(_,!0):_,m.j&&(m.j=m.j.replace(/:$/,""))}function eo(m,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);m.s=_}else m.s=null}function rl(m,_,T){_ instanceof Pi?(m.i=_,eh(m.i,m.h)):(T||(_=ai(_,Gp)),m.i=new Pi(_,m.h))}function ct(m,_,T){m.i.set(_,T)}function to(m){return ct(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Fs(m,_){return m?_?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ai(m,_,T){return typeof m=="string"?(m=encodeURI(m).replace(_,Hp),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Hp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ou=/[#\/\?@]/g,Zd=/[#\?:]/g,ju=/[#\?]/g,Gp=/[#\?@]/g,$p=/#/g;function Pi(m,_){this.h=this.g=null,this.i=m||null,this.j=!!_}function Vn(m){m.g||(m.g=new Map,m.h=0,m.i&&nl(m.i,function(_,T){m.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}t=Pi.prototype,t.add=function(m,_){Vn(this),this.i=null,m=Hr(this,m);var T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(_),this.h+=1,this};function il(m,_){Vn(m),_=Hr(m,_),m.g.has(_)&&(m.i=null,m.h-=m.g.get(_).length,m.g.delete(_))}function sl(m,_){return Vn(m),_=Hr(m,_),m.g.has(_)}t.forEach=function(m,_){Vn(this),this.g.forEach(function(T,k){T.forEach(function(Y){m.call(_,Y,k,this)},this)},this)},t.na=function(){Vn(this);const m=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let k=0;k<_.length;k++){const Y=m[k];for(let ne=0;ne<Y.length;ne++)T.push(_[k])}return T},t.V=function(m){Vn(this);let _=[];if(typeof m=="string")sl(this,m)&&(_=_.concat(this.g.get(Hr(this,m))));else{m=Array.from(this.g.values());for(let T=0;T<m.length;T++)_=_.concat(m[T])}return _},t.set=function(m,_){return Vn(this),this.i=null,m=Hr(this,m),sl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[_]),this.h+=1,this},t.get=function(m,_){return m?(m=this.V(m),0<m.length?String(m[0]):_):_};function ss(m,_,T){il(m,_),0<T.length&&(m.i=null,m.g.set(Hr(m,_),D(T)),m.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var k=_[T];const ne=encodeURIComponent(String(k)),me=this.V(k);for(k=0;k<me.length;k++){var Y=ne;me[k]!==""&&(Y+="="+encodeURIComponent(String(me[k]))),m.push(Y)}}return this.i=m.join("&")};function Hr(m,_){return _=String(_),m.j&&(_=_.toLowerCase()),_}function eh(m,_){_&&!m.j&&(Vn(m),m.i=null,m.g.forEach(function(T,k){var Y=k.toLowerCase();k!=Y&&(il(this,k),ss(this,Y,T))},m)),m.j=_}function Mu(m,_){const T=new Yt;if(d.Image){const k=new Image;k.onload=E(Nr,T,"TestLoadImage: loaded",!0,_,k),k.onerror=E(Nr,T,"TestLoadImage: error",!1,_,k),k.onabort=E(Nr,T,"TestLoadImage: abort",!1,_,k),k.ontimeout=E(Nr,T,"TestLoadImage: timeout",!1,_,k),d.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else _(!1)}function th(m,_){const T=new Yt,k=new AbortController,Y=setTimeout(()=>{k.abort(),Nr(T,"TestPingServer: timeout",!1,_)},1e4);fetch(m,{signal:k.signal}).then(ne=>{clearTimeout(Y),ne.ok?Nr(T,"TestPingServer: ok",!0,_):Nr(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Y),Nr(T,"TestPingServer: error",!1,_)})}function Nr(m,_,T,k,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),k(T)}catch{}}function wi(){this.g=new _e}function Pu(m,_,T){const k=T||"";try{tl(m,function(Y,ne){let me=Y;f(Y)&&(me=le(Y)),_.push(k+ne+"="+encodeURIComponent(me))})}catch(Y){throw _.push(k+"type="+encodeURIComponent("_badmap")),Y}}function Vi(m){this.l=m.Ub||null,this.j=m.eb||!1}A(Vi,qe),Vi.prototype.g=function(){return new Gr(this.l,this.j)},Vi.prototype.i=(function(m){return function(){return m}})({});function Gr(m,_){He.call(this),this.D=m,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Gr,He),t=Gr.prototype,t.open=function(m,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=_,this.readyState=1,qs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(_.body=m),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;al(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function al(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var _=m.value?m.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!m.done}))&&(this.response=this.responseText+=_)}m.done?Li(this):qs(this),this.readyState==3&&al(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Li(this))},t.Qa=function(m){this.g&&(this.response=m,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(m){m.readyState=4,m.l=null,m.j=null,m.v=null,qs(m)}t.setRequestHeader=function(m,_){this.u.append(m,_)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=_.next();return m.join(`\r
`)};function qs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function no(m){let _="";return q(m,function(T,k){_+=k,_+=":",_+=T,_+=`\r
`}),_}function Hs(m,_,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=no(T),typeof m=="string"?T!=null&&encodeURIComponent(String(T)):ct(m,_,T))}function Ut(m){He.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ut,He);var or=/^https?$/i,as=["POST","PUT"];t=Ut.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,_,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);_=_?_.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?mt(this.o):mt(ir),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(m),!0),this.B=!1}catch(ne){ro(this,ne);return}if(m=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Y in k)T.set(Y,k[Y]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ne of k.keys())T.set(ne,k.get(ne));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),Y=d.FormData&&m instanceof d.FormData,!(0<=Array.prototype.indexOf.call(as,_,void 0))||k||Y||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,me]of T)this.g.setRequestHeader(ne,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ol(this),this.u=!0,this.g.send(m),this.u=!1}catch(ne){ro(this,ne)}};function ro(m,_){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=_,m.m=5,Gs(m),$s(m)}function Gs(m){m.A||(m.A=!0,Lt(m,"complete"),Lt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Lt(this,"complete"),Lt(this,"abort"),$s(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$s(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nh(this):this.bb())},t.bb=function(){nh(this)};function nh(m){if(m.h&&typeof u<"u"&&(!m.v[1]||yr(m)!=4||m.Z()!=2)){if(m.u&&yr(m)==4)Kt(m.Ea,0,m);else if(Lt(m,"readystatechange"),yr(m)==4){m.h=!1;try{const me=m.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var k;if(k=me===0){var Y=String(m.D).match(Du)[1]||null;!Y&&d.self&&d.self.location&&(Y=d.self.location.protocol.slice(0,-1)),k=!or.test(Y?Y.toLowerCase():"")}T=k}if(T)Lt(m,"complete"),Lt(m,"success");else{m.m=6;try{var ne=2<yr(m)?m.g.statusText:""}catch{ne=""}m.l=ne+" ["+m.Z()+"]",Gs(m)}}finally{$s(m)}}}}function $s(m,_){if(m.g){ol(m);const T=m.g,k=m.v[0]?()=>{}:null;m.g=null,m.v=null,_||Lt(m,"ready");try{T.onreadystatechange=k}catch{}}}function ol(m){m.I&&(d.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function yr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var _=this.g.responseText;return m&&_.indexOf(m)==0&&(_=_.substring(m.length)),ge(_)}};function io(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function rh(m){const _={};m=(m.g&&2<=yr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(j(m[k]))continue;var T=P(m[k]);const Y=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=_[Y]||[];_[Y]=ne,ne.push(T)}C(_,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(m,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||_}function ih(m){this.Aa=0,this.i=[],this.j=new Yt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=so("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=so("baseRetryDelayMs",5e3,m),this.cb=so("retryDelaySeedMs",1e4,m),this.Wa=so("forwardChannelMaxRetries",2,m),this.wa=so("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new ns(m&&m.concurrentRequestLimit),this.Da=new wi,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ih.prototype,t.la=8,t.G=1,t.connect=function(m,_,T,k){pt(0),this.W=m,this.H=_||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.I=dh(this,null,this.W),ll(this)};function Vu(m){if(sh(m),m.G==3){var _=m.U++,T=Zt(m.I);if(ct(T,"SID",m.K),ct(T,"RID",_),ct(T,"TYPE","terminate"),ao(m,T),_=new sr(m,m.j,_),_.L=2,_.v=to(Zt(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=_.v,T=!0),T||(_.g=hh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),de(_)}Bu(m)}function Ks(m){m.g&&(zu(m),m.g.cancel(),m.g=null)}function sh(m){Ks(m),m.u&&(d.clearTimeout(m.u),m.u=null),Ys(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&d.clearTimeout(m.s),m.s=null)}function ll(m){if(!rs(m.h)&&!m.s){m.s=!0;var _=m.Ga;se||Ee(),he||(se(),he=!0),we.add(_,m),m.B=0}}function Kp(m,_){return Za(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=_.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=kt(x(m.Ga,m,_),ch(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Y=new sr(this,this.j,m);let ne=this.o;if(this.S&&(ne?(ne=S(ne),V(ne,this.S)):ne=this.S),this.m!==null||this.O||(Y.H=ne,ne=null),this.P)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(_+=k,4096<_){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Lu(this,Y,_),T=Zt(this.I),ct(T,"RID",m),ct(T,"CVER",22),this.D&&ct(T,"X-HTTP-Session-Id",this.D),ao(this,T),ne&&(this.O?_="headers="+encodeURIComponent(String(no(ne)))+"&"+_:this.m&&Hs(T,this.m,ne)),zs(this.h,Y),this.Ua&&ct(T,"TYPE","init"),this.P?(ct(T,"$req",_),ct(T,"SID","null"),Y.T=!0,Rr(Y,T,null)):Rr(Y,T,_),this.G=2}}else this.G==3&&(m?ah(this,m):this.i.length==0||rs(this.h)||ah(this))};function ah(m,_){var T;_?T=_.l:T=m.U++;const k=Zt(m.I);ct(k,"SID",m.K),ct(k,"RID",T),ct(k,"AID",m.T),ao(m,k),m.m&&m.o&&Hs(k,m.m,m.o),T=new sr(m,m.j,T,m.B+1),m.m===null&&(T.H=m.o),_&&(m.i=_.D.concat(m.i)),_=Lu(m,T,1e3),T.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),zs(m.h,T),Rr(T,k,_)}function ao(m,_){m.H&&q(m.H,function(T,k){ct(_,k,T)}),m.l&&tl({},function(T,k){ct(_,k,T)})}function Lu(m,_,T){T=Math.min(m.i.length,T);var k=m.l?x(m.l.Na,m.l,m):null;e:{var Y=m.i;let ne=-1;for(;;){const me=["count="+T];ne==-1?0<T?(ne=Y[0].g,me.push("ofs="+ne)):ne=0:me.push("ofs="+ne);let bt=!0;for(let gn=0;gn<T;gn++){let Qe=Y[gn].g;const Ln=Y[gn].map;if(Qe-=ne,0>Qe)ne=Math.max(0,Y[gn].g-100),bt=!1;else try{Pu(Ln,me,"req"+Qe+"_")}catch{k&&k(Ln)}}if(bt){k=me.join("&");break e}}}return m=m.i.splice(0,T),_.D=m,k}function oh(m){if(!m.g&&!m.u){m.Y=1;var _=m.Fa;se||Ee(),he||(se(),he=!0),we.add(_,m),m.v=0}}function Uu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=kt(x(m.Fa,m),ch(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,lh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=kt(x(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Ks(this),lh(this))};function zu(m){m.A!=null&&(d.clearTimeout(m.A),m.A=null)}function lh(m){m.g=new sr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var _=Zt(m.qa);ct(_,"RID","rpc"),ct(_,"SID",m.K),ct(_,"AID",m.T),ct(_,"CI",m.F?"0":"1"),!m.F&&m.ja&&ct(_,"TO",m.ja),ct(_,"TYPE","xmlhttp"),ao(m,_),m.m&&m.o&&Hs(_,m.m,m.o),m.L&&(m.g.I=m.L);var T=m.g;m=m.ia,T.L=1,T.v=to(Zt(_)),T.m=null,T.P=!0,ar(T,m)}t.Za=function(){this.C!=null&&(this.C=null,Ks(this),Uu(this),pt(19))};function Ys(m){m.C!=null&&(d.clearTimeout(m.C),m.C=null)}function uh(m,_){var T=null;if(m.g==_){Ys(m),zu(m),m.g=null;var k=2}else if(Us(m.h,_))T=_.D,si(m.h,_),k=1;else return;if(m.G!=0){if(_.o)if(k==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var Y=m.B;k=Ce(),Lt(k,new ln(k,T)),ll(m)}else oh(m);else if(Y=_.s,Y==3||Y==0&&0<_.X||!(k==1&&Kp(m,_)||k==2&&Uu(m)))switch(T&&0<T.length&&(_=m.h,_.i=_.i.concat(T)),Y){case 1:os(m,5);break;case 4:os(m,10);break;case 3:os(m,6);break;default:os(m,2)}}}function ch(m,_){let T=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(T*=2),T*_}function os(m,_){if(m.j.info("Error code "+_),_==2){var T=x(m.fb,m),k=m.Xa;const Y=!k;k=new is(k||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Bs(k,"https"),to(k),Y?Mu(k.toString(),T):th(k.toString(),T)}else pt(2);m.G=0,m.l&&m.l.sa(_),Bu(m),sh(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Bu(m){if(m.G=0,m.ka=[],m.l){const _=vr(m.h);(_.length!=0||m.i.length!=0)&&(M(m.ka,_),M(m.ka,m.i),m.h.i.length=0,D(m.i),m.i.length=0),m.l.ra()}}function dh(m,_,T){var k=T instanceof is?Zt(T):new is(T);if(k.g!="")_&&(k.g=_+"."+k.g),eo(k,k.s);else{var Y=d.location;k=Y.protocol,_=_?_+"."+Y.hostname:Y.hostname,Y=+Y.port;var ne=new is(null);k&&Bs(ne,k),_&&(ne.g=_),Y&&eo(ne,Y),T&&(ne.l=T),k=ne}return T=m.D,_=m.ya,T&&_&&ct(k,T,_),ct(k,"VER",m.la),ao(m,k),k}function hh(m,_,T){if(_&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=m.Ca&&!m.pa?new Ut(new Vi({eb:T})):new Ut(m.pa),_.Ha(m.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fh(){}t=fh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ul(){}ul.prototype.g=function(m,_){return new br(m,_)};function br(m,_){He.call(this),this.g=new ih(_),this.l=m,this.h=_&&_.messageUrlParams||null,m=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(m?m["X-WebChannel-Content-Type"]=_.messageContentType:m={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(m?m["X-WebChannel-Client-Profile"]=_.va:m={"X-WebChannel-Client-Profile":_.va}),this.g.S=m,(m=_&&_.Sb)&&!j(m)&&(this.g.m=m),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.D=_,m=this.h,m!==null&&_ in m&&(m=this.h,_ in m&&delete m[_])),this.j=new Qs(this)}A(br,He),br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},br.prototype.close=function(){Vu(this.g)},br.prototype.o=function(m){var _=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.u&&(T={},T.__data__=le(m),m=T);_.i.push(new Ja(_.Ya++,m)),_.G==3&&ll(_)},br.prototype.N=function(){this.g.l=null,delete this.j,Vu(this.g),delete this.g,br.aa.N.call(this)};function mh(m){Je.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var _=m.__sm__;if(_){e:{for(const T in _){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,_=_!==null&&m in _?_[m]:void 0),this.data=_}else this.data=m}A(mh,Je);function ph(){Ze.call(this),this.status=1}A(ph,Ze);function Qs(m){this.g=m}A(Qs,fh),Qs.prototype.ua=function(){Lt(this.g,"a")},Qs.prototype.ta=function(m){Lt(this.g,new mh(m))},Qs.prototype.sa=function(m){Lt(this.g,new ph)},Qs.prototype.ra=function(){Lt(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,br.prototype.send=br.prototype.o,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,J2=function(){return new ul},X2=function(){return Ce()},W2=Re,Uy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,em=Dt,Qt.COMPLETE="complete",Q2=Qt,$e.EventType=Ye,Ye.OPEN="a",Ye.CLOSE="b",Ye.ERROR="c",Ye.MESSAGE="d",He.prototype.listen=He.prototype.K,Mc=$e,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,Y2=Ut}).apply(typeof _f<"u"?_f:typeof self<"u"?self:typeof window<"u"?window:{});const B1="@firebase/firestore",F1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new q0("@firebase/firestore");function ql(){return qo.logLevel}function xe(t,...e){if(qo.logLevel<=st.DEBUG){const n=e.map(nb);qo.debug(`Firestore (${Eu}): ${t}`,...n)}}function js(t,...e){if(qo.logLevel<=st.ERROR){const n=e.map(nb);qo.error(`Firestore (${Eu}): ${t}`,...n)}}function Pa(t,...e){if(qo.logLevel<=st.WARN){const n=e.map(nb);qo.warn(`Firestore (${Eu}): ${t}`,...n)}}function nb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Z2(t,r,n)}function Z2(t,e,n){let r=`FIRESTORE (${Eu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw js(r),new Error(r)}function _t(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Z2(e,s,r)}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(fr.UNAUTHENTICATED)))}shutdown(){}}class fP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class mP{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_t(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let o=new Oa;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Oa,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},d=h=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Oa)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new eC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class pP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new pP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(fr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_t(this.o===void 0,3512);const r=o=>{o.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,xe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new q1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(_t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new q1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=yP(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function zy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return We(r,s);{const o=tC(),u=bP(o.encode(H1(t,n)),o.encode(H1(e,n)));return u!==0?u:We(r,s)}}n+=r>65535?2:1}return We(t.length,e.length)}function H1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function bP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return We(t[n],e[n]);return We(t.length,e.length)}function uu(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="__name__";class Gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Gi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return We(e.length,n.length)}static compareSegments(e,n){const r=Gi.isNumericId(e),s=Gi.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Gi.extractNumericId(e).compare(Gi.extractNumericId(n)):zy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Da.fromString(e.substring(4,e.length-2))}}class Pt extends Gi{construct(e,n,r){return new Pt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Pt(n)}static emptyPath(){return new Pt([])}}const xP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Gi{construct(e,n,r){return new er(e,n,r)}static isValidIdentifier(e){return xP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G1}static keyField(){return new er([G1])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ye(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new ye(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ye(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(o(),s++)}if(o(),u)throw new ye(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(n)}static emptyPath(){return new er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Pt.fromString(e))}static fromName(e){return new Ne(Pt.fromString(e).popFirst(5))}static empty(){return new Ne(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e,n){if(!n)throw new ye(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _P(t,e,n,r){if(e===!0&&r===!0)throw new ye(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $1(t){if(!Ne.isDocumentKey(t))throw new ye(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K1(t){if(Ne.isDocumentKey(t))throw new ye(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function Ki(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dp(t);throw new ye(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ud(t,e){if(!rC(t))throw new ye(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const u=t[r];if(s&&typeof u!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&u!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ye(ue.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=-62135596800,Q1=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Q1);return new qt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Y1)throw new ye(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q1}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ud(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:En("string",qt._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new qt(0,0))}static max(){return new Ue(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=-1;function wP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(r===1e9?new qt(n+1,0):new qt(n,r));return new Va(s,Ne.empty(),e)}function EP(t){return new Va(t.readTime,t.key,vd)}class Va{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Va(Ue.min(),Ne.empty(),vd)}static max(){return new Va(Ue.max(),Ne.empty(),vd)}}function TP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==SP)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ce.reject(n)}static resolve(e){return new ce(((n,r)=>{n(e)}))}static reject(e){return new ce(((n,r)=>{r(e)}))}static waitFor(e){return new ce(((n,r)=>{let s=0,o=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++o,u&&o===s&&n()}),(h=>r(h)))})),u=!0,o===s&&n()}))}static or(e){let n=ce.resolve(!1);for(const r of e)n=n.next((s=>s?ce.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new ce(((r,s)=>{const o=e.length,u=new Array(o);let d=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((v=>{u[f]=v,++d,d===o&&r(u)}),(v=>s(v)))}}))}static doWhile(e,n){return new ce(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function CP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Su(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}hp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=-1;function fp(t){return t==null}function Tm(t){return t===0&&1/t==-1/0}function RP(t){return typeof t=="number"&&Number.isInteger(t)&&!Tm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="";function IP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=W1(e)),e=NP(t.get(n),e);return W1(e)}function NP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case iC:n+="";break;default:n+=o}}return n}function W1(t){return t+iC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ya(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||Zn.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wf(this.root,e,this.comparator,!0)}}class wf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Zn.RED,this.left=s??Zn.EMPTY,this.right=o??Zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Zn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Zn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new Zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J1(this.data.getIterator())}getIteratorFrom(e){return new J1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new kn(this.comparator);return n.data=e,n}}class J1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Zr([])}unionWith(e){let n=new kn(er.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uu(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new aC("Invalid base64 string: "+o):o}})(e);return new tr(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o})(e);return new tr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const kP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function La(t){if(_t(!!t,39018),typeof t=="string"){let e=0;const n=kP.exec(t);if(_t(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hn(t.seconds),nanos:hn(t.nanos)}}function hn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ua(t){return typeof t=="string"?tr.fromBase64String(t):tr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="server_timestamp",lC="__type__",uC="__previous_value__",cC="__local_write_time__";function sb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[lC])===null||n===void 0?void 0:n.stringValue)===oC}function mp(t){const e=t.mapValue.fields[uC];return sb(e)?mp(e):e}function yd(t){const e=La(t.mapValue.fields[cC].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n,r,s,o,u,d,h,f,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=v}}const Sm="(default)";class bd{constructor(e,n){this.projectId=e,this.database=n||Sm}static empty(){return new bd("","")}get isDefaultDatabase(){return this.database===Sm}isEqual(e){return e instanceof bd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="__type__",OP="__max__",Ef={mapValue:{}},hC="__vector__",Am="value";function za(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sb(t)?4:MP(t)?9007199254740991:jP(t)?10:11:Ve(28295,{value:t})}function es(t,e){if(t===e)return!0;const n=za(t);if(n!==za(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yd(t).isEqual(yd(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=La(s.timestampValue),d=La(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Ua(s.bytesValue).isEqual(Ua(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return hn(s.geoPointValue.latitude)===hn(o.geoPointValue.latitude)&&hn(s.geoPointValue.longitude)===hn(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return hn(s.integerValue)===hn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=hn(s.doubleValue),d=hn(o.doubleValue);return u===d?Tm(u)===Tm(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return uu(t.arrayValue.values||[],e.arrayValue.values||[],es);case 10:case 11:return(function(s,o){const u=s.mapValue.fields||{},d=o.mapValue.fields||{};if(X1(u)!==X1(d))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(d[h]===void 0||!es(u[h],d[h])))return!1;return!0})(t,e);default:return Ve(52216,{left:t})}}function xd(t,e){return(t.values||[]).find((n=>es(n,e)))!==void 0}function cu(t,e){if(t===e)return 0;const n=za(t),r=za(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return(function(o,u){const d=hn(o.integerValue||o.doubleValue),h=hn(u.integerValue||u.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(t,e);case 3:return Z1(t.timestampValue,e.timestampValue);case 4:return Z1(yd(t),yd(e));case 5:return zy(t.stringValue,e.stringValue);case 6:return(function(o,u){const d=Ua(o),h=Ua(u);return d.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,u){const d=o.split("/"),h=u.split("/");for(let f=0;f<d.length&&f<h.length;f++){const v=We(d[f],h[f]);if(v!==0)return v}return We(d.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,u){const d=We(hn(o.latitude),hn(u.latitude));return d!==0?d:We(hn(o.longitude),hn(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return eT(t.arrayValue,e.arrayValue);case 10:return(function(o,u){var d,h,f,v;const b=o.fields||{},x=u.fields||{},E=(d=b[Am])===null||d===void 0?void 0:d.arrayValue,A=(h=x[Am])===null||h===void 0?void 0:h.arrayValue,D=We(((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0,((v=A==null?void 0:A.values)===null||v===void 0?void 0:v.length)||0);return D!==0?D:eT(E,A)})(t.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Ef.mapValue&&u===Ef.mapValue)return 0;if(o===Ef.mapValue)return 1;if(u===Ef.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),f=u.fields||{},v=Object.keys(f);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){const x=zy(h[b],v[b]);if(x!==0)return x;const E=cu(d[h[b]],f[v[b]]);if(E!==0)return E}return We(h.length,v.length)})(t.mapValue,e.mapValue);default:throw Ve(23264,{le:n})}}function Z1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=La(t),r=La(e),s=We(n.seconds,r.seconds);return s!==0?s:We(n.nanos,r.nanos)}function eT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=cu(n[s],r[s]);if(o)return o}return We(n.length,r.length)}function du(t){return By(t)}function By(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=La(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ua(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=By(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${By(n.fields[u])}`;return s+"}"})(t.mapValue):Ve(61005,{value:t})}function tm(t){switch(za(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mp(t);return e?16+tm(e):16;case 5:return 2*t.stringValue.length;case 6:return Ua(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+tm(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Ya(r.fields,((o,u)=>{s+=o.length+tm(u)})),s})(t.mapValue);default:throw Ve(13486,{value:t})}}function tT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fy(t){return!!t&&"integerValue"in t}function ab(t){return!!t&&"arrayValue"in t}function nT(t){return!!t&&"nullValue"in t}function rT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nm(t){return!!t&&"mapValue"in t}function jP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[dC])===null||n===void 0?void 0:n.stringValue)===hC}function Yc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ya(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Yc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===OP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.value=e}static empty(){return new Lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(n)}setAll(e){let n=er.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=d.popLast()}u?r[d.lastSegment()]=Yc(u):s.push(d.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());nm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return es(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ya(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Lr(Yc(this.value))}}function fC(t){const e=[];return Ya(t.fields,((n,r)=>{const s=new er([n]);if(nm(r)){const o=fC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)})),new Zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,s,o,u,d){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new mr(e,0,Ue.min(),Ue.min(),Ue.min(),Lr.empty(),0)}static newFoundDocument(e,n,r,s){return new mr(e,1,n,Ue.min(),r,s,0)}static newNoDocument(e,n){return new mr(e,2,n,Ue.min(),Ue.min(),Lr.empty(),0)}static newUnknownDocument(e,n){return new mr(e,3,n,Ue.min(),Ue.min(),Lr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.position=e,this.inclusive=n}}function iT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=Ne.comparator(Ne.fromName(u.referenceValue),n.key):r=cu(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!es(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n="asc"){this.field=e,this.dir=n}}function PP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{}class wn extends mC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LP(e,n,r):n==="array-contains"?new BP(e,r):n==="in"?new FP(e,r):n==="not-in"?new qP(e,r):n==="array-contains-any"?new HP(e,r):new wn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UP(e,r):new zP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cu(n,this.value)):n!==null&&za(this.value)===za(n)&&this.matchesComparison(cu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ji extends mC{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new ji(e,n)}matches(e){return pC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function pC(t){return t.op==="and"}function gC(t){return VP(t)&&pC(t)}function VP(t){for(const e of t.filters)if(e instanceof ji)return!1;return!0}function qy(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+du(t.value);if(gC(t))return t.filters.map((e=>qy(e))).join(",");{const e=t.filters.map((n=>qy(n))).join(",");return`${t.op}(${e})`}}function vC(t,e){return t instanceof wn?(function(r,s){return s instanceof wn&&r.op===s.op&&r.field.isEqual(s.field)&&es(r.value,s.value)})(t,e):t instanceof ji?(function(r,s){return s instanceof ji&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,u,d)=>o&&vC(u,s.filters[d])),!0):!1})(t,e):void Ve(19439)}function yC(t){return t instanceof wn?(function(n){return`${n.field.canonicalString()} ${n.op} ${du(n.value)}`})(t):t instanceof ji?(function(n){return n.op.toString()+" {"+n.getFilters().map(yC).join(" ,")+"}"})(t):"Filter"}class LP extends wn{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class UP extends wn{constructor(e,n){super(e,"in",n),this.keys=bC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class zP extends wn{constructor(e,n){super(e,"not-in",n),this.keys=bC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Ne.fromName(r.referenceValue)))}class BP extends wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ab(n)&&xd(n.arrayValue,this.value)}}class FP extends wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xd(this.value.arrayValue,n)}}class qP extends wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xd(this.value.arrayValue,n)}}class HP extends wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ab(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>xd(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n=null,r=[],s=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=d,this.Pe=null}}function aT(t,e=null,n=[],r=[],s=null,o=null,u=null){return new GP(t,e,n,r,s,o,u)}function ob(t){const e=Fe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>qy(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),fp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>du(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>du(r))).join(",")),e.Pe=n}return e.Pe}function lb(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sT(t.startAt,e.startAt)&&sT(t.endAt,e.endAt)}function Hy(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n=null,r=[],s=[],o=null,u="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function $P(t,e,n,r,s,o,u,d){return new zd(t,e,n,r,s,o,u,d)}function pp(t){return new zd(t)}function oT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xC(t){return t.collectionGroup!==null}function Qc(t){const e=Fe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new kn(er.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Rm(o,r))})),n.has(er.keyField().canonicalString())||e.Te.push(new Rm(er.keyField(),r))}return e.Te}function Yi(t){const e=Fe(t);return e.Ie||(e.Ie=KP(e,Qc(t))),e.Ie}function KP(t,e){if(t.limitType==="F")return aT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Rm(s.field,o)}));const n=t.endAt?new Cm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cm(t.startAt.position,t.startAt.inclusive):null;return aT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gy(t,e){const n=t.filters.concat([e]);return new zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $y(t,e,n){return new zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gp(t,e){return lb(Yi(t),Yi(e))&&t.limitType===e.limitType}function _C(t){return`${ob(Yi(t))}|lt:${t.limitType}`}function Hl(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>yC(s))).join(", ")}]`),fp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>du(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>du(s))).join(",")),`Target(${r})`})(Yi(t))}; limitType=${t.limitType})`}function vp(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of Qc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,h){const f=iT(u,d,h);return u.inclusive?f<=0:f<0})(r.startAt,Qc(r),s)||r.endAt&&!(function(u,d,h){const f=iT(u,d,h);return u.inclusive?f>=0:f>0})(r.endAt,Qc(r),s))})(t,e)}function YP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wC(t){return(e,n)=>{let r=!1;for(const s of Qc(t)){const o=QP(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function QP(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(o,u,d){const h=u.data.field(o),f=d.data.field(o);return h!==null&&f!==null?cu(h,f):Ve(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ya(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return sC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new Jt(Ne.comparator);function Ms(){return WP}const EC=new Jt(Ne.comparator);function Pc(...t){let e=EC;for(const n of t)e=e.insert(n.key,n);return e}function TC(t){let e=EC;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Do(){return Wc()}function SC(){return Wc()}function Wc(){return new Qo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const XP=new Jt(Ne.comparator),JP=new kn(Ne.comparator);function at(...t){let e=JP;for(const n of t)e=e.add(n);return e}const ZP=new kn(We);function e3(){return ZP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tm(e)?"-0":e}}function AC(t){return{integerValue:""+t}}function t3(t,e){return RP(e)?AC(e):ub(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this._=void 0}}function n3(t,e,n){return t instanceof Im?(function(s,o){const u={fields:{[lC]:{stringValue:oC},[cC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&sb(o)&&(o=mp(o)),o&&(u.fields[uC]=o),{mapValue:u}})(n,e):t instanceof _d?RC(t,e):t instanceof wd?IC(t,e):(function(s,o){const u=CC(s,o),d=lT(u)+lT(s.Ee);return Fy(u)&&Fy(s.Ee)?AC(d):ub(s.serializer,d)})(t,e)}function r3(t,e,n){return t instanceof _d?RC(t,e):t instanceof wd?IC(t,e):n}function CC(t,e){return t instanceof Nm?(function(r){return Fy(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Im extends yp{}class _d extends yp{constructor(e){super(),this.elements=e}}function RC(t,e){const n=NC(e);for(const r of t.elements)n.some((s=>es(s,r)))||n.push(r);return{arrayValue:{values:n}}}class wd extends yp{constructor(e){super(),this.elements=e}}function IC(t,e){let n=NC(e);for(const r of t.elements)n=n.filter((s=>!es(s,r)));return{arrayValue:{values:n}}}class Nm extends yp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function lT(t){return hn(t.integerValue||t.doubleValue)}function NC(t){return ab(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function i3(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof _d&&s instanceof _d||r instanceof wd&&s instanceof wd?uu(r.elements,s.elements,es):r instanceof Nm&&s instanceof Nm?es(r.Ee,s.Ee):r instanceof Im&&s instanceof Im})(t.transform,e.transform)}class s3{constructor(e,n){this.version=e,this.transformResults=n}}class Oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bp{}function kC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cb(t.key,Oi.none()):new Bd(t.key,t.data,Oi.none());{const n=t.data,r=Lr.empty();let s=new kn(er.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Qa(t.key,r,new Zr(s.toArray()),Oi.none())}}function a3(t,e,n){t instanceof Bd?(function(s,o,u){const d=s.value.clone(),h=cT(s.fieldTransforms,o,u.transformResults);d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Qa?(function(s,o,u){if(!rm(s.precondition,o))return void o.convertToUnknownDocument(u.version);const d=cT(s.fieldTransforms,o,u.transformResults),h=o.data;h.setAll(DC(s)),h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):(function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Xc(t,e,n,r){return t instanceof Bd?(function(o,u,d,h){if(!rm(o.precondition,u))return d;const f=o.value.clone(),v=dT(o.fieldTransforms,h,u);return f.setAll(v),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Qa?(function(o,u,d,h){if(!rm(o.precondition,u))return d;const f=dT(o.fieldTransforms,h,u),v=u.data;return v.setAll(DC(o)),v.setAll(f),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(t,e,n,r):(function(o,u,d){return rm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function o3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=CC(r.transform,s||null);o!=null&&(n===null&&(n=Lr.empty()),n.set(r.field,o))}return n||null}function uT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&uu(r,s,((o,u)=>i3(o,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bd extends bp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Qa extends bp{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function DC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function cT(t,e,n){const r=new Map;_t(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,d=e.data.field(o.field);r.set(o.field,r3(u,d,n[s]))}return r}function dT(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,n3(o,u,e))}return r}class cb extends bp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l3 extends bp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&a3(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=SC();return this.mutations.forEach((s=>{const o=e.get(s.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=n.has(s.key)?null:d;const h=kC(u,d);h!==null&&r.set(s.key,h),u.isValidDocument()||u.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),at())}isEqual(e){return this.batchId===e.batchId&&uu(this.mutations,e.mutations,((n,r)=>uT(n,r)))&&uu(this.baseMutations,e.baseMutations,((n,r)=>uT(n,r)))}}class db{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_t(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return XP})();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new db(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,ut;function h3(t){switch(t){case ue.OK:return Ve(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function OC(t){if(t===void 0)return js("GRPC error has no .code"),ue.UNKNOWN;switch(t){case _n.OK:return ue.OK;case _n.CANCELLED:return ue.CANCELLED;case _n.UNKNOWN:return ue.UNKNOWN;case _n.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case _n.INTERNAL:return ue.INTERNAL;case _n.UNAVAILABLE:return ue.UNAVAILABLE;case _n.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case _n.NOT_FOUND:return ue.NOT_FOUND;case _n.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case _n.ABORTED:return ue.ABORTED;case _n.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case _n.DATA_LOSS:return ue.DATA_LOSS;default:return Ve(39323,{code:t})}}(ut=_n||(_n={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=new Da([4294967295,4294967295],0);function hT(t){const e=tC().encode(t),n=new K2;return n.update(e),new Uint8Array(n.digest())}function fT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Da([n,r],0),new Da([s,o],0)]}class hb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vc(`Invalid padding: ${n}`);if(r<0)throw new Vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Da.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Da.fromNumber(r)));return s.compare(f3)===1&&(s=new Da([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=hT(e),[r,s]=fT(n);for(let o=0;o<this.hashCount;o++){const u=this.pe(r,s,o);if(!this.ye(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new hb(o,s,n);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.fe===0)return;const n=hT(e),[r,s]=fT(n);for(let o=0;o<this.hashCount;o++){const u=this.pe(r,s,o);this.we(u)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xp(Ue.min(),s,new Jt(We),Ms(),at())}}class Fd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fd(r,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class jC{constructor(e,n){this.targetId=e,this.De=n}}class MC{constructor(e,n,r=tr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mT{constructor(){this.ve=0,this.Ce=pT(),this.Fe=tr.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=at(),n=at(),r=at();return this.Ce.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ve(38017,{changeType:o})}})),new Fd(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=pT()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class m3{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ms(),this.je=Tf(),this.Je=Tf(),this.He=new Jt(We)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((r,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const o=s.target;if(Hy(o))if(r===0){const u=new Ne(o.path);this.Xe(n,u,mr.newNoDocument(u,Ue.min()))}else _t(r===1,20013,{expectedCount:r});else{const u=this.ot(n);if(u!==r){const d=this._t(e),h=d?this.ut(d,e,u):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,d;try{u=Ua(r).toUint8Array()}catch(h){if(h instanceof aC)return Pa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new hb(u,s,o)}catch(h){return Pa(h instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.fe===0?null:d}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,o,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((o,u)=>{const d=this.st(u);if(d){if(o.current&&Hy(d.target)){const h=new Ne(d.target.path);this.Tt(h).has(u)||this.It(u,h)||this.Xe(u,h,mr.newNoDocument(h,e))}o.Ne&&(n.set(u,o.Le()),o.ke())}}));let r=at();this.Je.forEach(((o,u)=>{let d=!0;u.forEachWhile((h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.ze.forEach(((o,u)=>u.setReadTime(e)));const s=new xp(e,n,this.He,this.ze,r);return this.ze=Ms(),this.je=Tf(),this.Je=Tf(),this.He=new Jt(We),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new mT,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new kn(We),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new kn(We),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mT),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Tf(){return new Jt(Ne.comparator)}function pT(){return new Jt(Ne.comparator)}const p3={asc:"ASCENDING",desc:"DESCENDING"},g3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v3={and:"AND",or:"OR"};class y3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ky(t,e){return t.useProto3Json||fp(e)?e:{value:e}}function km(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b3(t,e){return km(t,e.toTimestamp())}function Qi(t){return _t(!!t,49232),Ue.fromTimestamp((function(n){const r=La(n);return new qt(r.seconds,r.nanos)})(t))}function fb(t,e){return Yy(t,e).canonicalString()}function Yy(t,e){const n=(function(s){return new Pt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function VC(t){const e=Pt.fromString(t);return _t(FC(e),10190,{key:e.toString()}),e}function Qy(t,e){return fb(t.databaseId,e.path)}function ty(t,e){const n=VC(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(UC(n))}function LC(t,e){return fb(t.databaseId,e)}function x3(t){const e=VC(t);return e.length===4?Pt.emptyPath():UC(e)}function Wy(t){return new Pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UC(t){return _t(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gT(t,e,n){return{name:Qy(t,e),fields:n.value.mapValue.fields}}function _3(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ve(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,v){return f.useProto3Json?(_t(v===void 0||typeof v=="string",58123),tr.fromBase64String(v||"")):(_t(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),tr.fromUint8Array(v||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(f){const v=f.code===void 0?ue.UNKNOWN:OC(f.code);return new ye(v,f.message||"")})(u);n=new MC(r,s,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ty(t,r.document.name),o=Qi(r.document.updateTime),u=r.document.createTime?Qi(r.document.createTime):Ue.min(),d=new Lr({mapValue:{fields:r.document.fields}}),h=mr.newFoundDocument(s,o,u,d),f=r.targetIds||[],v=r.removedTargetIds||[];n=new im(f,v,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ty(t,r.document),o=r.readTime?Qi(r.readTime):Ue.min(),u=mr.newNoDocument(s,o),d=r.removedTargetIds||[];n=new im([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ty(t,r.document),o=r.removedTargetIds||[];n=new im([],o,s,null)}else{if(!("filter"in e))return Ve(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new d3(s,o),d=r.targetId;n=new jC(d,u)}}return n}function w3(t,e){let n;if(e instanceof Bd)n={update:gT(t,e.key,e.value)};else if(e instanceof cb)n={delete:Qy(t,e.key)};else if(e instanceof Qa)n={update:gT(t,e.key,e.data),updateMask:k3(e.fieldMask)};else{if(!(e instanceof l3))return Ve(16599,{Rt:e.type});n={verify:Qy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const d=u.transform;if(d instanceof Im)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _d)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nm)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Ve(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:b3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve(27497)})(t,e.precondition)),n}function E3(t,e){return t&&t.length>0?(_t(e!==void 0,14353),t.map((n=>(function(s,o){let u=s.updateTime?Qi(s.updateTime):Qi(o);return u.isEqual(Ue.min())&&(u=Qi(o)),new s3(u,s.transformResults||[])})(n,e)))):[]}function T3(t,e){return{documents:[LC(t,e.path)]}}function S3(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LC(t,s);const o=(function(f){if(f.length!==0)return BC(ji.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const u=(function(f){if(f.length!==0)return f.map((v=>(function(x){return{field:Gl(x.field),direction:R3(x.dir)}})(v)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Ky(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:n,parent:s}}function A3(t){let e=x3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_t(r===1,65062);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=(function(b){const x=zC(b);return x instanceof ji&&gC(x)?x.getFilters():[x]})(n.where));let u=[];n.orderBy&&(u=(function(b){return b.map((x=>(function(A){return new Rm($l(A.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(x)))})(n.orderBy));let d=null;n.limit&&(d=(function(b){let x;return x=typeof b=="object"?b.value:b,fp(x)?null:x})(n.limit));let h=null;n.startAt&&(h=(function(b){const x=!!b.before,E=b.values||[];return new Cm(E,x)})(n.startAt));let f=null;return n.endAt&&(f=(function(b){const x=!b.before,E=b.values||[];return new Cm(E,x)})(n.endAt)),$P(e,s,u,o,d,"F",h,f)}function C3(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$l(n.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$l(n.unaryFilter.field);return wn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=$l(n.unaryFilter.field);return wn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=$l(n.unaryFilter.field);return wn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(t):t.fieldFilter!==void 0?(function(n){return wn.create($l(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ji.create(n.compositeFilter.filters.map((r=>zC(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(n.compositeFilter.op))})(t):Ve(30097,{filter:t})}function R3(t){return p3[t]}function I3(t){return g3[t]}function N3(t){return v3[t]}function Gl(t){return{fieldPath:t.canonicalString()}}function $l(t){return er.fromServerFormat(t.fieldPath)}function BC(t){return t instanceof wn?(function(n){if(n.op==="=="){if(rT(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(nT(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rT(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(nT(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:I3(n.op),value:n.value}}})(t):t instanceof ji?(function(n){const r=n.getFilters().map((s=>BC(s)));return r.length===1?r[0]:{compositeFilter:{op:N3(n.op),filters:r}}})(t):Ve(54877,{filter:t})}function k3(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function FC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r,s,o=Ue.min(),u=Ue.min(),d=tr.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new Ra(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.gt=e}}function O3(t){const e=A3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$y(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.Dn=new M3}addToCollectionParentIndex(e,n){return this.Dn.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(Va.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(Va.min())}updateCollectionGroup(e,n,r){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class M3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new kn(Pt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new kn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qC=41943040;class Vr{static withCacheSize(e){return new Vr(e,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(qC,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new hu(0)}static ur(){return new hu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="LruGarbageCollector",P3=1048576;function bT([t,e],[n,r]){const s=We(t,n);return s===0?We(e,r):s}class V3{constructor(e){this.Tr=e,this.buffer=new kn(bT),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class L3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){xe(yT,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Su(n)?xe(yT,"Ignoring IndexedDB error during garbage collection: ",n):await Tu(n)}await this.Rr(3e5)}))}}class U3{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ce.resolve(hp.ue);const r=new V3(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(vT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vT):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,o,u,d,h,f;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),s=this.params.maximumSequenceNumbersToCollect):s=b,u=Date.now(),this.nthSequenceNumber(e,s)))).next((b=>(r=b,d=Date.now(),this.removeTargets(e,r,n)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(f=Date.now(),ql()<=st.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${b} documents in `+(f-h)+`ms
Total Duration: ${f-v}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:b}))))}}function z3(t,e){return new U3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.changes=new Qo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Xc(r.mutation,s,Zr.empty(),qt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,at()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=at()){const s=Do();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let u=Pc();return o.forEach(((d,h)=>{u=u.insert(d,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const r=Do();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,at())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,r,s){let o=Ms();const u=Wc(),d=(function(){return Wc()})();return n.forEach(((h,f)=>{const v=r.get(f.key);s.has(f.key)&&(v===void 0||v.mutation instanceof Qa)?o=o.insert(f.key,f):v!==void 0?(u.set(f.key,v.mutation.getFieldMask()),Xc(v.mutation,f,v.mutation.getFieldMask(),qt.now())):u.set(f.key,Zr.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,v)=>u.set(f,v))),n.forEach(((f,v)=>{var b;return d.set(f,new F3(v,(b=u.get(f))!==null&&b!==void 0?b:null))})),d)))}recalculateAndSaveOverlays(e,n){const r=Wc();let s=new Jt(((u,d)=>u-d)),o=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let v=r.get(h)||Zr.empty();v=d.applyToLocalView(f,v),r.set(h,v);const b=(s.get(d.batchId)||at()).add(h);s=s.insert(d.batchId,b)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,v=h.value,b=SC();v.forEach((x=>{if(!o.has(x)){const E=kC(n.get(x),r.get(x));E!==null&&b.set(x,E),o=o.add(x)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,b))}return ce.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(u){return Ne.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):ce.resolve(Do());let d=vd,h=o;return u.next((f=>ce.forEach(f,((v,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),o.get(v)?ce.resolve():this.remoteDocumentCache.getEntry(e,v).next((x=>{h=h.insert(v,x)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,at()))).next((v=>({batchId:d,changes:TC(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((r=>{let s=Pc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=Pc();return this.indexManager.getCollectionParents(e,o).next((d=>ce.forEach(d,(h=>{const f=(function(b,x){return new zd(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((v=>{v.forEach(((b,x)=>{u=u.insert(b,x)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((u=>{o.forEach(((h,f)=>{const v=f.getKey();u.get(v)===null&&(u=u.insert(v,mr.newInvalidDocument(v)))}));let d=Pc();return u.forEach(((h,f)=>{const v=o.get(h);v!==void 0&&Xc(v.mutation,f,Zr.empty(),qt.now()),vp(n,f)&&(d=d.insert(h,f))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ce.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Qi(s.createTime)}})(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:O3(s.bundledQuery),readTime:Qi(s.readTime)}})(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.overlays=new Jt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Do();return ce.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.wt(e,n,o)})),ce.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(r)),ce.resolve()}getOverlaysForCollection(e,n,r){const s=Do(),o=n.length+1,u=new Ne(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Jt(((f,v)=>f-v));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let v=o.get(f.largestBatchId);v===null&&(v=Do(),o=o.insert(f.largestBatchId,v)),v.set(f.getKey(),f)}}const d=Do(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,v)=>d.set(f,v))),!(d.size()>=s)););return ce.resolve(d)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new c3(n,r));let o=this.kr.get(n);o===void 0&&(o=at(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(){this.qr=new kn(Fn.Qr),this.$r=new kn(Fn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Fn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Fn(e,n))}Gr(e,n){e.forEach((r=>this.removeReference(r,n)))}zr(e){const n=new Ne(new Pt([])),r=new Fn(n,e),s=new Fn(n,e+1),o=[];return this.$r.forEachInRange([r,s],(u=>{this.Wr(u),o.push(u.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Pt([])),r=new Fn(n,e),s=new Fn(n,e+1);let o=at();return this.$r.forEachInRange([r,s],(u=>{o=o.add(u.key)})),o}containsKey(e){const n=new Fn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||We(e.Hr,n.Hr)}static Ur(e,n){return We(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new kn(Fn.Qr)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new u3(o,n,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new Fn(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,n){return ce.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),o=s<0?0:s;return ce.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?ib:this.er-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fn(n,0),s=new Fn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,s],(u=>{const d=this.Zr(u.Hr);o.push(d)})),ce.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kn(We);return n.forEach((s=>{const o=new Fn(s,0),u=new Fn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,u],(d=>{r=r.add(d.Hr)}))})),ce.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const u=new Fn(new Ne(o),0);let d=new kn(We);return this.Yr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(d=d.add(h.Hr)),!0)}),u),ce.resolve(this.ei(d))}ei(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){_t(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ce.forEach(n.mutations,(s=>{const o=new Fn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,n){const r=new Fn(n,0),s=this.Yr.firstAfterOrEqual(r);return ce.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.ni=e,this.docs=(function(){return new Jt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ce.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(n))}getEntries(e,n){let r=Ms();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():mr.newInvalidDocument(s))})),ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Ms();const u=n.path,d=new Ne(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:v}}=h.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||TP(EP(v),r)<=0||(s.has(v.key)||vp(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ve(9500)}ri(e,n){return ce.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Q3(this)}getSize(e){return ce.resolve(this.size)}}class Q3 extends B3{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),ce.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.persistence=e,this.ii=new Qo((n=>ob(n)),lb),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.si=0,this.oi=new mb,this.targetCount=0,this._i=hu.ar()}forEachTarget(e,n){return this.ii.forEach(((r,s)=>n(s))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ce.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new hu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.hr(n),ce.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.ii.forEach(((u,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.ii.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ce.waitFor(o).next((()=>s))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ce.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ce.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((u=>{o.push(s.markPotentiallyOrphaned(e,u))})),ce.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ce.resolve(r)}containsKey(e,n){return ce.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.ai={},this.overlays={},this.ui=new hp(0),this.ci=!1,this.ci=!0,this.li=new $3,this.referenceDelegate=e(this),this.hi=new W3(this),this.indexManager=new j3,this.remoteDocumentCache=(function(s){return new Y3(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new D3(n),this.Ti=new H3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new G3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new K3(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){xe("MemoryPersistence","Starting transaction:",e);const s=new X3(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(e,n){return ce.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,n))))}}class X3 extends AP{constructor(e){super(),this.currentSequenceNumber=e}}class pb{constructor(e){this.persistence=e,this.Ai=new mb,this.Ri=null}static Vi(e){return new pb(e)}get mi(){if(this.Ri)return this.Ri;throw Ve(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ce.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.mi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.mi,(r=>{const s=Ne.fromPath(r);return this.fi(e,s).next((o=>{o||n.removeEntry(s,Ue.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ce.or([()=>ce.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Dm{constructor(e,n){this.persistence=e,this.gi=new Qo((r=>IP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=z3(this,n)}static Vi(e,n){return new Dm(e,n)}Ii(){}di(e){return ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}yr(e){let n=0;return this.gr(e,(r=>{n++})).next((()=>n))}gr(e,n){return ce.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((o=>o?ce.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,(u=>this.Sr(e,u,n).next((d=>{d||(r++,o.removeEntry(u,Ue.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ce.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ce.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ce.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tm(e.data.value)),n}Sr(e,n,r){return ce.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ce.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=at(),s=at();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new gb(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return kO()?8:CP(gr())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ps(e,n).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ys(e,n,s,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new J3;return this.ws(e,n,u).next((d=>{if(o.result=d,this.Rs)return this.Ss(e,n,u,d.size)}))})).next((()=>o.result))}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(ql()<=st.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ce.resolve()):(ql()<=st.DEBUG&&xe("QueryEngine","Query:",Hl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ql()<=st.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(n))):ce.resolve())}ps(e,n){if(oT(n))return ce.resolve(null);let r=Yi(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=$y(n,null,"F"),r=Yi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=at(...o);return this.gs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.bs(n,d);return this.Ds(n,f,u,h.readTime)?this.ps(e,$y(n,null,"F")):this.vs(e,f,n,h)}))))})))))}ys(e,n,r,s){return oT(n)||s.isEqual(Ue.min())?ce.resolve(null):this.gs.getDocuments(e,r).next((o=>{const u=this.bs(n,o);return this.Ds(n,u,r,s)?ce.resolve(null):(ql()<=st.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hl(n)),this.vs(e,u,n,wP(s,vd)).next((d=>d)))}))}bs(e,n){let r=new kn(wC(e));return n.forEach(((s,o)=>{vp(e,o)&&(r=r.add(o))})),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,n,r){return ql()<=st.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.gs.getDocumentsMatchingQuery(e,n,Va.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="LocalStore",eV=3e8;class tV{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Jt(We),this.Ms=new Qo((o=>ob(o)),lb),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q3(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function nV(t,e,n,r){return new tV(t,e,n,r)}async function GC(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],d=[];let h=at();for(const f of s){u.push(f.batchId);for(const v of f.mutations)h=h.add(v.key)}for(const f of o){d.push(f.batchId);for(const v of f.mutations)h=h.add(v.key)}return n.localDocuments.getDocuments(r,h).next((f=>({Bs:f,removedBatchIds:u,addedBatchIds:d})))}))}))}function rV(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(d,h,f,v){const b=f.batch,x=b.keys();let E=ce.resolve();return x.forEach((A=>{E=E.next((()=>v.getEntry(h,A))).next((D=>{const M=f.docVersions.get(A);_t(M!==null,48541),D.version.compareTo(M)<0&&(b.applyToRemoteDocument(D,f),D.isValidDocument()&&(D.setReadTime(f.commitVersion),v.addEntry(D)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(h,b)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let h=at();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function $C(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function iV(t,e){const n=Fe(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const d=[];e.targetChanges.forEach(((v,b)=>{const x=s.get(b);if(!x)return;d.push(n.hi.removeMatchingKeys(o,v.removedDocuments,b).next((()=>n.hi.addMatchingKeys(o,v.addedDocuments,b))));let E=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?E=E.withResumeToken(tr.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(v.resumeToken,r)),s=s.insert(b,E),(function(D,M,U){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=eV?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(x,E,v)&&d.push(n.hi.updateTargetData(o,E))}));let h=Ms(),f=at();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))})),d.push(sV(o,u,e.documentUpdates).next((v=>{h=v.Ls,f=v.ks}))),!r.isEqual(Ue.min())){const v=n.hi.getLastRemoteSnapshotVersion(o).next((b=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(v)}return ce.waitFor(d).next((()=>u.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(n.Fs=s,o)))}function sV(t,e,n){let r=at(),s=at();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let u=Ms();return n.forEach(((d,h)=>{const f=o.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(d)),h.isNoDocument()&&h.version.isEqual(Ue.min())?(e.removeEntry(d,h.readTime),u=u.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),u=u.insert(d,h)):xe(vb,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)})),{Ls:u,ks:s}}))}function aV(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ib),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function oV(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.hi.getTargetData(r,e).next((o=>o?(s=o,ce.resolve(s)):n.hi.allocateTargetId(r).next((u=>(s=new Ra(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r}))}async function Xy(t,e,n){const r=Fe(t),s=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Su(u))throw u;xe(vb,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function xT(t,e,n){const r=Fe(t);let s=Ue.min(),o=at();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,f,v){const b=Fe(h),x=b.Ms.get(v);return x!==void 0?ce.resolve(b.Fs.get(x)):b.hi.getTargetData(f,v)})(r,u,Yi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,n?s:Ue.min(),n?o:at()))).next((d=>(lV(r,YP(e),d),{documents:d,qs:o})))))}function lV(t,e,n){let r=t.xs.get(e)||Ue.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.xs.set(e,r)}class _T{constructor(){this.activeTargetIds=e3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uV{constructor(){this.Fo=new _T,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _T,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="ConnectivityMonitor";class ET{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){xe(wT,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){xe(wT,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf=null;function Jy(){return Sf===null?Sf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sf++,"0x"+Sf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="RestConnection",dV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Sm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,o){const u=Jy(),d=this.Go(e,n.toUriEncodedString());xe(ny,`Sending RPC '${e}' ${u}:`,d,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,o);const{host:f}=new URL(d),v=Vs(f);return this.jo(e,d,h,r,v).then((b=>(xe(ny,`Received RPC '${e}' ${u}: `,b),b)),(b=>{throw Pa(ny,`RPC '${e}' ${u} failed with error: `,b,"url: ",d,"request:",r),b}))}Jo(e,n,r,s,o,u){return this.Wo(e,n,r,s,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Eu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}Go(e,n){const r=dV[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="WebChannelConnection";class mV extends hV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,o){const u=Jy();return new Promise(((d,h)=>{const f=new Y2;f.setWithCredentials(!0),f.listenOnce(Q2.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case em.NO_ERROR:const b=f.getResponseJson();xe(ur,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),d(b);break;case em.TIMEOUT:xe(ur,`RPC '${e}' ${u} timed out`),h(new ye(ue.DEADLINE_EXCEEDED,"Request time out"));break;case em.HTTP_ERROR:const x=f.getStatus();if(xe(ur,`RPC '${e}' ${u} failed with status:`,x,"response text:",f.getResponseText()),x>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const A=E==null?void 0:E.error;if(A&&A.status&&A.message){const D=(function(U){const j=U.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(j)>=0?j:ue.UNKNOWN})(A.status);h(new ye(D,A.message))}else h(new ye(ue.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ye(ue.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{c_:e,streamId:u,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{xe(ur,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(s);xe(ur,`RPC '${e}' ${u} sending request:`,s),f.send(n,"POST",v,r,15)}))}P_(e,n,r){const s=Jy(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=J2(),d=X2(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const v=o.join("");xe(ur,`Creating RPC '${e}' stream ${s}: ${v}`,h);const b=u.createWebChannel(v,h);this.T_(b);let x=!1,E=!1;const A=new fV({Ho:M=>{E?xe(ur,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(x||(xe(ur,`Opening RPC '${e}' stream ${s} transport.`),b.open(),x=!0),xe(ur,`RPC '${e}' stream ${s} sending:`,M),b.send(M))},Yo:()=>b.close()}),D=(M,U,j)=>{M.listen(U,(z=>{try{j(z)}catch(G){setTimeout((()=>{throw G}),0)}}))};return D(b,Mc.EventType.OPEN,(()=>{E||(xe(ur,`RPC '${e}' stream ${s} transport opened.`),A.s_())})),D(b,Mc.EventType.CLOSE,(()=>{E||(E=!0,xe(ur,`RPC '${e}' stream ${s} transport closed`),A.__(),this.I_(b))})),D(b,Mc.EventType.ERROR,(M=>{E||(E=!0,Pa(ur,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),A.__(new ye(ue.UNAVAILABLE,"The operation could not be completed")))})),D(b,Mc.EventType.MESSAGE,(M=>{var U;if(!E){const j=M.data[0];_t(!!j,16349);const z=j,G=(z==null?void 0:z.error)||((U=z[0])===null||U===void 0?void 0:U.error);if(G){xe(ur,`RPC '${e}' stream ${s} received error:`,G);const $=G.status;let q=(function(I){const V=_n[I];if(V!==void 0)return OC(V)})($),C=G.message;q===void 0&&(q=ue.INTERNAL,C="Unknown error status: "+$+" with message "+G.message),E=!0,A.__(new ye(q,C)),b.close()}else xe(ur,`RPC '${e}' stream ${s} received:`,j),A.a_(j)}})),D(d,W2.STAT_EVENT,(M=>{M.stat===Uy.PROXY?xe(ur,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===Uy.NOPROXY&&xe(ur,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.o_()}),0),A}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function ry(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){return new y3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="PersistentStream";class YC{constructor(e,n,r,s,o,u,d,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new KC(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(js(n.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===n&&this.W_(r,s)}),(r=>{e((()=>{const s=new ye(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return xe(TT,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(xe(TT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pV extends YC{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=_3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ue.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?Qi(u.readTime):Ue.min()})(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Wy(this.serializer),n.addTarget=(function(o,u){let d;const h=u.target;if(d=Hy(h)?{documents:T3(o,h)}:{query:S3(o,h).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=PC(o,u.resumeToken);const f=Ky(o,u.expectedCount);f!==null&&(d.expectedCount=f)}else if(u.snapshotVersion.compareTo(Ue.min())>0){d.readTime=km(o,u.snapshotVersion.toTimestamp());const f=Ky(o,u.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const r=C3(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Wy(this.serializer),n.removeTarget=e,this.k_(n)}}class gV extends YC{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=E3(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Wy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>w3(this.serializer,r)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{}class yV extends vV{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ye(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Wo(e,Yy(n,r),s,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ue.UNKNOWN,o.toString())}))}Jo(e,n,r,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Jo(e,Yy(n,r),s,u,d,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(ue.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class bV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(js(n),this._a=!1):xe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RemoteStore";class xV{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{Wo(this)&&(xe(Ho,"Restarting streams for network reachability change."),await(async function(h){const f=Fe(h);f.Ia.add(4),await qd(f),f.Aa.set("Unknown"),f.Ia.delete(4),await wp(f)})(this))}))})),this.Aa=new bV(r,s)}}async function wp(t){if(Wo(t))for(const e of t.da)await e(!0)}async function qd(t){for(const e of t.da)await e(!1)}function QC(t,e){const n=Fe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),_b(n)?xb(n):Au(n).x_()&&bb(n,e))}function yb(t,e){const n=Fe(t),r=Au(n);n.Ta.delete(e),r.x_()&&WC(n,e),n.Ta.size===0&&(r.x_()?r.B_():Wo(n)&&n.Aa.set("Unknown"))}function bb(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Au(t).H_(e)}function WC(t,e){t.Ra.$e(e),Au(t).Y_(e)}function xb(t){t.Ra=new m3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Au(t).start(),t.Aa.aa()}function _b(t){return Wo(t)&&!Au(t).M_()&&t.Ta.size>0}function Wo(t){return Fe(t).Ia.size===0}function XC(t){t.Ra=void 0}async function _V(t){t.Aa.set("Online")}async function wV(t){t.Ta.forEach(((e,n)=>{bb(t,e)}))}async function EV(t,e){XC(t),_b(t)?(t.Aa.la(e),xb(t)):t.Aa.set("Unknown")}async function TV(t,e,n){if(t.Aa.set("Online"),e instanceof MC&&e.state===2&&e.cause)try{await(async function(s,o){const u=o.cause;for(const d of o.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))})(t,e)}catch(r){xe(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Om(t,r)}else if(e instanceof im?t.Ra.Ye(e):e instanceof jC?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ue.min()))try{const r=await $C(t.localStore);n.compareTo(r)>=0&&await(function(o,u){const d=o.Ra.Pt(u);return d.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const v=o.Ta.get(f);v&&o.Ta.set(f,v.withResumeToken(h.resumeToken,u))}})),d.targetMismatches.forEach(((h,f)=>{const v=o.Ta.get(h);if(!v)return;o.Ta.set(h,v.withResumeToken(tr.EMPTY_BYTE_STRING,v.snapshotVersion)),WC(o,h);const b=new Ra(v.target,h,f,v.sequenceNumber);bb(o,b)})),o.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(r){xe(Ho,"Failed to raise snapshot:",r),await Om(t,r)}}async function Om(t,e,n){if(!Su(e))throw e;t.Ia.add(1),await qd(t),t.Aa.set("Offline"),n||(n=()=>$C(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{xe(Ho,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await wp(t)}))}function JC(t,e){return e().catch((n=>Om(t,n,e)))}async function Ep(t){const e=Fe(t),n=Ba(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ib;for(;SV(e);)try{const s=await aV(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,AV(e,s)}catch(s){await Om(e,s)}ZC(e)&&eR(e)}function SV(t){return Wo(t)&&t.Pa.length<10}function AV(t,e){t.Pa.push(e);const n=Ba(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function ZC(t){return Wo(t)&&!Ba(t).M_()&&t.Pa.length>0}function eR(t){Ba(t).start()}async function CV(t){Ba(t).na()}async function RV(t){const e=Ba(t);for(const n of t.Pa)e.X_(n.mutations)}async function IV(t,e,n){const r=t.Pa.shift(),s=db.from(r,e,n);await JC(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Ep(t)}async function NV(t,e){e&&Ba(t).Z_&&await(async function(r,s){if((function(u){return h3(u)&&u!==ue.ABORTED})(s.code)){const o=r.Pa.shift();Ba(r).N_(),await JC(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Ep(r)}})(t,e),ZC(t)&&eR(t)}async function ST(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),xe(Ho,"RemoteStore received new credentials");const r=Wo(n);n.Ia.add(3),await qd(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await wp(n)}async function kV(t,e){const n=Fe(t);e?(n.Ia.delete(2),await wp(n)):e||(n.Ia.add(2),await qd(n),n.Aa.set("Unknown"))}function Au(t){return t.Va||(t.Va=(function(n,r,s){const o=Fe(n);return o.ia(),new pV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Zo:_V.bind(null,t),e_:wV.bind(null,t),n_:EV.bind(null,t),J_:TV.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),_b(t)?xb(t):t.Aa.set("Unknown")):(await t.Va.stop(),XC(t))}))),t.Va}function Ba(t){return t.ma||(t.ma=(function(n,r,s){const o=Fe(n);return o.ia(),new gV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:CV.bind(null,t),n_:NV.bind(null,t),ea:RV.bind(null,t),ta:IV.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Ep(t)):(await t.ma.stop(),t.Pa.length>0&&(xe(Ho,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,d=new wb(e,n,u,s,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eb(t,e){if(js("AsyncQueue",`${e}: ${t}`),Su(t))return new ye(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{static emptySet(e){return new ru(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=Pc(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ru)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ru;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.fa=new Jt(Ne.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ve(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,r)=>{e.push(r)})),e}}class fu{constructor(e,n,r,s,o,u,d,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new fu(e,n,ru.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class OV{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Fe(n),o=s.queries;s.queries=CT(),o.forEach(((u,d)=>{for(const h of d.wa)h.onError(r)}))})(this,new ye(ue.ABORTED,"Firestore shutting down"))}}function CT(){return new Qo((t=>_C(t)),gp)}async function tR(t,e){const n=Fe(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Sa()&&e.ba()&&(r=2):(o=new DV,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(s,!0);break;case 1:o.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const d=Eb(u,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(d)}n.queries.set(s,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Tb(n)}async function nR(t,e){const n=Fe(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.wa.indexOf(e);u>=0&&(o.wa.splice(u,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jV(t,e){const n=Fe(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&Tb(n)}function MV(t,e,n){const r=Fe(t),s=r.queries.get(e);if(s)for(const o of s.wa)o.onError(n);r.queries.delete(e)}function Tb(t){t.Da.forEach((e=>{e.next()}))}var Zy,RT;(RT=Zy||(Zy={})).Fa="default",RT.Cache="cache";class rR{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Zy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.key=e}}class sR{constructor(e){this.key=e}}class PV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=at(),this.mutatedKeys=at(),this.Xa=wC(e),this.eu=new ru(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new AT,s=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,d=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,b)=>{const x=s.get(v),E=vp(this.query,b)?b:null,A=!!x&&this.mutatedKeys.has(x.key),D=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let M=!1;x&&E?x.data.isEqual(E.data)?A!==D&&(r.track({type:3,doc:E}),M=!0):this.iu(x,E)||(r.track({type:2,doc:E}),M=!0,(h&&this.Xa(E,h)>0||f&&this.Xa(E,f)<0)&&(d=!0)):!x&&E?(r.track({type:0,doc:E}),M=!0):x&&!E&&(r.track({type:1,doc:x}),M=!0,(h||f)&&(d=!0)),M&&(E?(u=u.add(E),o=D?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),r.track({type:1,doc:v})}return{eu:u,ru:r,Ds:d,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((v,b)=>(function(E,A){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{At:M})}};return D(E)-D(A)})(v.type,b.type)||this.Xa(v.doc,b.doc))),this.su(r),s=s!=null&&s;const d=n&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,f=h!==this.Ya;return this.Ya=h,u.length!==0||f?{snapshot:new fu(this.query,e.eu,o,u,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new AT,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=at(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return e.forEach((r=>{this.Za.has(r)||n.push(new sR(r))})),this.Za.forEach((r=>{e.has(r)||n.push(new iR(r))})),n}uu(e){this.Ha=e.qs,this.Za=at();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return fu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Sb="SyncEngine";class VV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class LV{constructor(e){this.key=e,this.lu=!1}}class UV{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Qo((d=>_C(d)),gp),this.Tu=new Map,this.Iu=new Set,this.du=new Jt(Ne.comparator),this.Eu=new Map,this.Au=new mb,this.Ru={},this.Vu=new Map,this.mu=hu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function zV(t,e,n=!0){const r=dR(t);let s;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await aR(r,e,n,!0),s}async function BV(t,e){const n=dR(t);await aR(n,e,!0,!1)}async function aR(t,e,n,r){const s=await oV(t.localStore,Yi(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let d;return r&&(d=await FV(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&QC(t.remoteStore,s),d}async function FV(t,e,n,r,s){t.gu=(b,x,E)=>(async function(D,M,U,j){let z=M.view.nu(U);z.Ds&&(z=await xT(D.localStore,M.query,!1).then((({documents:C})=>M.view.nu(C,z))));const G=j&&j.targetChanges.get(M.targetId),$=j&&j.targetMismatches.get(M.targetId)!=null,q=M.view.applyChanges(z,D.isPrimaryClient,G,$);return NT(D,M.targetId,q._u),q.snapshot})(t,b,x,E);const o=await xT(t.localStore,e,!0),u=new PV(e,o.qs),d=u.nu(o.documents),h=Fd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=u.applyChanges(d,t.isPrimaryClient,h);NT(t,n,f._u);const v=new VV(e,n,u);return t.Pu.set(e,v),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function qV(t,e,n){const r=Fe(t),s=r.Pu.get(e),o=r.Tu.get(s.targetId);if(o.length>1)return r.Tu.set(s.targetId,o.filter((u=>!gp(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Xy(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yb(r.remoteStore,s.targetId),e0(r,s.targetId)})).catch(Tu)):(e0(r,s.targetId),await Xy(r.localStore,s.targetId,!0))}async function HV(t,e){const n=Fe(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yb(n.remoteStore,r.targetId))}async function GV(t,e,n){const r=JV(t);try{const s=await(function(u,d){const h=Fe(u),f=qt.now(),v=d.reduce(((E,A)=>E.add(A.key)),at());let b,x;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let A=Ms(),D=at();return h.Os.getEntries(E,v).next((M=>{A=M,A.forEach(((U,j)=>{j.isValidDocument()||(D=D.add(U))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,A))).next((M=>{b=M;const U=[];for(const j of d){const z=o3(j,b.get(j.key).overlayedDocument);z!=null&&U.push(new Qa(j.key,z,fC(z.value.mapValue),Oi.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,U,d)})).next((M=>{x=M;const U=M.applyToLocalDocumentSet(b,D);return h.documentOverlayCache.saveOverlays(E,M.batchId,U)}))})).then((()=>({batchId:x.batchId,changes:TC(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,h){let f=u.Ru[u.currentUser.toKey()];f||(f=new Jt(We)),f=f.insert(d,h),u.Ru[u.currentUser.toKey()]=f})(r,s.batchId,n),await Hd(r,s.changes),await Ep(r.remoteStore)}catch(s){const o=Eb(s,"Failed to persist write");n.reject(o)}}async function oR(t,e){const n=Fe(t);try{const r=await iV(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const u=n.Eu.get(o);u&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?_t(u.lu,14607):s.removedDocuments.size>0&&(_t(u.lu,42227),u.lu=!1))})),await Hd(n,r,e)}catch(r){await Tu(r)}}function IT(t,e,n){const r=Fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach(((o,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const h=Fe(u);h.onlineState=d;let f=!1;h.queries.forEach(((v,b)=>{for(const x of b.wa)x.va(d)&&(f=!0)})),f&&Tb(h)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $V(t,e,n){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new Jt(Ne.comparator);u=u.insert(o,mr.newNoDocument(o,Ue.min()));const d=at().add(o),h=new xp(Ue.min(),new Map,new Jt(We),u,d);await oR(r,h),r.du=r.du.remove(o),r.Eu.delete(e),Ab(r)}else await Xy(r.localStore,e,!1).then((()=>e0(r,e,n))).catch(Tu)}async function KV(t,e){const n=Fe(t),r=e.batch.batchId;try{const s=await rV(n.localStore,e);uR(n,r,null),lR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hd(n,s)}catch(s){await Tu(s)}}async function YV(t,e,n){const r=Fe(t);try{const s=await(function(u,d){const h=Fe(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let v;return h.mutationQueue.lookupMutationBatch(f,d).next((b=>(_t(b!==null,37113),v=b.keys(),h.mutationQueue.removeMutationBatch(f,b)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,v,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,v))).next((()=>h.localDocuments.getDocuments(f,v)))}))})(r.localStore,e);uR(r,e,n),lR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hd(r,s)}catch(s){await Tu(s)}}function lR(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function uR(t,e,n){const r=Fe(t);let s=r.Ru[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function e0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((r=>{t.Au.containsKey(r)||cR(t,r)}))}function cR(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(yb(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ab(t))}function NT(t,e,n){for(const r of n)r instanceof iR?(t.Au.addReference(r.key,e),QV(t,r)):r instanceof sR?(xe(Sb,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||cR(t,r.key)):Ve(19791,{yu:r})}function QV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(xe(Sb,"New document in limbo: "+n),t.Iu.add(r),Ab(t))}function Ab(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne(Pt.fromString(e)),r=t.mu.next();t.Eu.set(r,new LV(n)),t.du=t.du.insert(n,r),QC(t.remoteStore,new Ra(Yi(pp(n.path)),r,"TargetPurposeLimboResolution",hp.ue))}}async function Hd(t,e,n){const r=Fe(t),s=[],o=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((d,h)=>{u.push(r.gu(h,e,n).then((f=>{var v;if((f||n)&&r.isPrimaryClient){const b=f?!f.fromCache:(v=n==null?void 0:n.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(f){s.push(f);const b=gb.Es(h.targetId,f);o.push(b)}})))})),await Promise.all(u),r.hu.J_(s),await(async function(h,f){const v=Fe(h);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ce.forEach(f,(x=>ce.forEach(x.Is,(E=>v.persistence.referenceDelegate.addReference(b,x.targetId,E))).next((()=>ce.forEach(x.ds,(E=>v.persistence.referenceDelegate.removeReference(b,x.targetId,E)))))))))}catch(b){if(!Su(b))throw b;xe(vb,"Failed to update sequence numbers: "+b)}for(const b of f){const x=b.targetId;if(!b.fromCache){const E=v.Fs.get(x),A=E.snapshotVersion,D=E.withLastLimboFreeSnapshotVersion(A);v.Fs=v.Fs.insert(x,D)}}})(r.localStore,o))}async function WV(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){xe(Sb,"User change. New user:",e.toKey());const r=await GC(n.localStore,e);n.currentUser=e,(function(o,u){o.Vu.forEach((d=>{d.forEach((h=>{h.reject(new ye(ue.CANCELLED,u))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hd(n,r.Bs)}}function XV(t,e){const n=Fe(t),r=n.Eu.get(e);if(r&&r.lu)return at().add(r.key);{let s=at();const o=n.Tu.get(e);if(!o)return s;for(const u of o){const d=n.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function dR(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$V.bind(null,e),e.hu.J_=jV.bind(null,e.eventManager),e.hu.pu=MV.bind(null,e.eventManager),e}function JV(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YV.bind(null,e),e}class jm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_p(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return nV(this.persistence,new Z3,e.initialUser,this.serializer)}Du(e){return new HC(pb.Vi,this.serializer)}bu(e){return new uV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jm.provider={build:()=>new jm};class ZV extends jm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){_t(this.persistence.referenceDelegate instanceof Dm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new L3(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new HC((r=>Dm.Vi(r,n)),this.serializer)}}class t0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>IT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WV.bind(null,this.syncEngine),await kV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OV})()}createDatastore(e){const n=_p(e.databaseInfo.databaseId),r=(function(o){return new mV(o)})(e.databaseInfo);return(function(o,u,d,h){return new yV(o,u,d,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,u,d){return new xV(r,s,o,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>IT(this.syncEngine,n,0)),(function(){return ET.C()?new ET:new cV})())}createSyncEngine(e,n){return(function(s,o,u,d,h,f,v){const b=new UV(s,o,u,d,h,f);return v&&(b.fu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const o=Fe(s);xe(Ho,"RemoteStore shutting down."),o.Ia.add(5),await qd(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}t0.provider={build:()=>new t0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):js("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="FirestoreClient";class e5{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=fr.UNAUTHENTICATED,this.clientId=rb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{xe(Fa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(xe(Fa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Eb(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function iy(t,e){t.asyncQueue.verifyOperationInProgress(),xe(Fa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await GC(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{Pa("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{xe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Pa("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function kT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await t5(t);xe(Fa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>ST(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>ST(e.remoteStore,s))),t._onlineComponents=e}async function t5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe(Fa,"Using user provided OfflineComponentProvider");try{await iy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Pa("Error using user provided cache. Falling back to memory cache: "+n),await iy(t,new jm)}}else xe(Fa,"Using default OfflineComponentProvider"),await iy(t,new ZV(void 0));return t._offlineComponents}async function fR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe(Fa,"Using user provided OnlineComponentProvider"),await kT(t,t._uninitializedComponentsProvider._online)):(xe(Fa,"Using default OnlineComponentProvider"),await kT(t,new t0))),t._onlineComponents}function n5(t){return fR(t).then((e=>e.syncEngine))}async function n0(t){const e=await fR(t),n=e.eventManager;return n.onListen=zV.bind(null,e.syncEngine),n.onUnlisten=qV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=BV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HV.bind(null,e.syncEngine),n}function r5(t,e,n={}){const r=new Oa;return t.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,h,f){const v=new hR({next:x=>{v.Ou(),u.enqueueAndForget((()=>nR(o,b)));const E=x.docs.has(d);!E&&x.fromCache?f.reject(new ye(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&x.fromCache&&h&&h.source==="server"?f.reject(new ye(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),b=new rR(pp(d.path),v,{includeMetadataChanges:!0,ka:!0});return tR(o,b)})(await n0(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="firestore.googleapis.com",OT=!0;class jT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pR,this.ssl=OT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:OT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P3)throw new ye(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_P("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ye(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ye(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ye(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new hP;switch(r.type){case"firstParty":return new gP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=DT.get(n);r&&(xe("ComponentProvider","Removing Datastore"),DT.delete(n),r.terminate())})(this),Promise.resolve()}}function i5(t,e,n,r={}){var s;t=Ki(t,Tp);const o=Vs(e),u=t._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),h=`${e}:${n}`;o&&(sp(`https://${h}`),ap("Firestore",!0)),u.host!==pR&&u.host!==h&&Pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},u),{host:h,ssl:o,emulatorOptions:r});if(!zo(f,d)&&(t._setSettings(f),r.mockUserToken)){let v,b;if(typeof r.mockUserToken=="string")v=r.mockUserToken,b=fr.MOCK_USER;else{v=l2(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ye(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fr(x)}t._authCredentials=new fP(new eC(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cu(this.firestore,e,this._query)}}class fn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}toJSON(){return{type:fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ud(n,fn._jsonSchema))return new fn(e,r||null,new Ne(Pt.fromString(n.referencePath)))}}fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:En("string",fn._jsonSchemaVersion),referencePath:En("string")};class ja extends Cu{constructor(e,n,r){super(e,n,pp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new Ne(e))}withConverter(e){return new ja(this.firestore,e,this._path)}}function Wa(t,e,...n){if(t=jt(t),nC("collection","path",e),t instanceof Tp){const r=Pt.fromString(e,...n);return K1(r),new ja(t,null,r)}{if(!(t instanceof fn||t instanceof ja))throw new ye(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pt.fromString(e,...n));return K1(r),new ja(t.firestore,null,r)}}function Ru(t,e,...n){if(t=jt(t),arguments.length===1&&(e=rb.newId()),nC("doc","path",e),t instanceof Tp){const r=Pt.fromString(e,...n);return $1(r),new fn(t,null,new Ne(r))}{if(!(t instanceof fn||t instanceof ja))throw new ye(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pt.fromString(e,...n));return $1(r),new fn(t.firestore,t instanceof ja?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="AsyncQueue";class PT{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new KC(this,"async_queue_retry"),this.oc=()=>{const r=ry();r&&xe(MT,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=ry();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=ry();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Oa;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Su(e))throw e;xe(MT,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,js("INTERNAL UNHANDLED ERROR: ",VT(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=wb.createAndSchedule(this,e,n,r,(o=>this.lc(o)));return this.ec.push(s),s}ac(){this.tc&&Ve(47125,{hc:VT(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function VT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Go extends Tp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new PT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PT(e),this._firestoreClient=void 0,await e}}}function s5(t,e){const n=typeof t=="object"?t:op(),r=typeof t=="string"?t:Sm,s=jd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=F0("firestore");o&&i5(s,...o)}return s}function Cb(t){if(t._terminated)throw new ye(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||a5(t),t._firestoreClient}function a5(t){var e,n,r;const s=t._freezeSettings(),o=(function(d,h,f,v){return new DP(d,h,f,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,mR(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new e5(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(tr.fromBase64String(e))}catch(n){throw new ye(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yi(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ud(e,yi._jsonSchema))return yi.fromBase64String(e.bytes)}}yi._jsonSchemaVersion="firestore/bytes/1.0",yi._jsonSchema={type:En("string",yi._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wi._jsonSchemaVersion}}static fromJSON(e){if(Ud(e,Wi._jsonSchema))return new Wi(e.latitude,e.longitude)}}Wi._jsonSchemaVersion="firestore/geoPoint/1.0",Wi._jsonSchema={type:En("string",Wi._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ud(e,Xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Xi(e.vectorValues);throw new ye(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xi._jsonSchemaVersion="firestore/vectorValue/1.0",Xi._jsonSchema={type:En("string",Xi._jsonSchemaVersion),vectorValues:En("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=/^__.*__$/;class l5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bd(e,this.data,n,this.fieldTransforms)}}class gR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ec:t})}}class Ib{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ib(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Mm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(vR(this.Ec)&&o5.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class u5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_p(e)}Dc(e,n,r,s=!1){return new Ib({Ec:e,methodName:n,bc:r,path:er.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nb(t){const e=t._freezeSettings(),n=_p(t._databaseId);return new u5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function c5(t,e,n,r,s,o={}){const u=t.Dc(o.merge||o.mergeFields?2:0,e,n,s);kb("Data must be an object, but it was:",u,r);const d=yR(r,u);let h,f;if(o.merge)h=new Zr(u.fieldMask),f=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const b of o.mergeFields){const x=r0(e,b,n);if(!u.contains(x))throw new ye(ue.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);xR(v,x)||v.push(x)}h=new Zr(v),f=u.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,f=u.fieldTransforms;return new l5(new Lr(d),h,f)}class Ap extends Rb{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ap}}function d5(t,e,n,r){const s=t.Dc(1,e,n);kb("Data must be an object, but it was:",s,r);const o=[],u=Lr.empty();Ya(r,((h,f)=>{const v=Db(e,h,n);f=jt(f);const b=s.gc(v);if(f instanceof Ap)o.push(v);else{const x=Gd(f,b);x!=null&&(o.push(v),u.set(v,x))}}));const d=new Zr(o);return new gR(u,d,s.fieldTransforms)}function h5(t,e,n,r,s,o){const u=t.Dc(1,e,n),d=[r0(e,r,n)],h=[s];if(o.length%2!=0)throw new ye(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)d.push(r0(e,o[x])),h.push(o[x+1]);const f=[],v=Lr.empty();for(let x=d.length-1;x>=0;--x)if(!xR(f,d[x])){const E=d[x];let A=h[x];A=jt(A);const D=u.gc(E);if(A instanceof Ap)f.push(E);else{const M=Gd(A,D);M!=null&&(f.push(E),v.set(E,M))}}const b=new Zr(f);return new gR(v,b,u.fieldTransforms)}function f5(t,e,n,r=!1){return Gd(n,t.Dc(r?4:3,e))}function Gd(t,e){if(bR(t=jt(t)))return kb("Unsupported field value:",e,t),yR(t,e);if(t instanceof Rb)return(function(r,s){if(!vR(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const o=[];let u=0;for(const d of r){let h=Gd(d,s.yc(u));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),u++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=qt.fromDate(r);return{timestampValue:km(s.serializer,o)}}if(r instanceof qt){const o=new qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:km(s.serializer,o)}}if(r instanceof Wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yi)return{bytesValue:PC(s.serializer,r._byteString)};if(r instanceof fn){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fb(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xi)return(function(u,d){return{mapValue:{fields:{[dC]:{stringValue:hC},[Am]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw d.wc("VectorValues must only contain numeric values.");return ub(d.serializer,f)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${dp(r)}`)})(t,e)}function yR(t,e){const n={};return sC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ya(t,((r,s)=>{const o=Gd(s,e.Vc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function bR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof Wi||t instanceof yi||t instanceof fn||t instanceof Rb||t instanceof Xi)}function kb(t,e,n){if(!bR(n)||!rC(n)){const r=dp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function r0(t,e,n){if((e=jt(e))instanceof Sp)return e._internalPath;if(typeof e=="string")return Db(t,e);throw Mm("Field path arguments must be of type string or ",t,!1,void 0,n)}const m5=new RegExp("[~\\*/\\[\\]]");function Db(t,e,n){if(e.search(m5)>=0)throw Mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sp(...e.split("."))._internalPath}catch{throw Mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mm(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||u)&&(h+=" (found",o&&(h+=` in field ${r}`),u&&(h+=` in document ${s}`),h+=")"),new ye(ue.INVALID_ARGUMENT,d+t+h)}function xR(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new p5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ob("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class p5 extends _R{data(){return super.data()}}function Ob(t,e){return typeof e=="string"?Db(t,e):e instanceof Sp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jb{}class v5 extends jb{}function Cp(t,e,...n){let r=[];e instanceof jb&&r.push(e),r=r.concat(n),(function(o){const u=o.filter((h=>h instanceof Mb)).length,d=o.filter((h=>h instanceof Rp)).length;if(u>1||u>0&&d>0)throw new ye(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Rp extends v5{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Rp(e,n,r)}_apply(e){const n=this._parse(e);return wR(e._query,n),new Cu(e.firestore,e.converter,Gy(e._query,n))}_parse(e){const n=Nb(e.firestore);return(function(o,u,d,h,f,v,b){let x;if(f.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){zT(b,v);const A=[];for(const D of b)A.push(UT(h,o,D));x={arrayValue:{values:A}}}else x=UT(h,o,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||zT(b,v),x=f5(d,u,b,v==="in"||v==="not-in");return wn.create(f,v,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function y5(t,e,n){const r=e,s=Ob("where",t);return Rp._create(s,r,n)}class Mb extends jb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mb(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ji.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let u=s;const d=o.getFlattenedFilters();for(const h of d)wR(u,h),u=Gy(u,h)})(e._query,n),new Cu(e.firestore,e.converter,Gy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function UT(t,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new ye(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xC(e)&&n.indexOf("/")!==-1)throw new ye(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pt.fromString(n));if(!Ne.isDocumentKey(r))throw new ye(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tT(t,new Ne(r))}if(n instanceof fn)return tT(t,n._key);throw new ye(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dp(n)}.`)}function zT(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wR(t,e){const n=(function(s,o){for(const u of s)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ye(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class b5{convertValue(e,n="none"){switch(za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ya(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Am].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>hn(u.doubleValue)));return new Xi(o)}convertGeoPoint(e){return new Wi(hn(e.latitude),hn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){const n=La(e);return new qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pt.fromString(e);_t(FC(r),9688,{name:e});const s=new bd(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return s.isEqual(n)||js(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Lc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends _R{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ob("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:En("string",jo._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class sm extends jo{data(e={}){return super.data(e)}}class iu{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Lc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new sm(this._firestore,this._userDataWriter,r.key,r,new Lc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const h=new sm(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Lc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new sm(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Lc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,v=-1;return d.type!==0&&(f=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:_5(d.type),doc:h,oldIndex:f,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=iu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(t){t=Ki(t,fn);const e=Ki(t.firestore,Go);return r5(Cb(e),t._key).then((n=>TR(e,t,n)))}iu._jsonSchemaVersion="firestore/querySnapshot/1.0",iu._jsonSchema={type:En("string",iu._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};class ER extends b5{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,n)}}function E5(t,e,n,...r){t=Ki(t,fn);const s=Ki(t.firestore,Go),o=Nb(s);let u;return u=typeof(e=jt(e))=="string"||e instanceof Sp?h5(o,"updateDoc",t._key,e,n,r):d5(o,"updateDoc",t._key,e),Vb(s,[u.toMutation(t._key,Oi.exists(!0))])}function Pb(t){return Vb(Ki(t.firestore,Go),[new cb(t._key,Oi.none())])}function Ip(t,e){const n=Ki(t.firestore,Go),r=Ru(t),s=x5(t.converter,e);return Vb(n,[c5(Nb(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Oi.exists(!1))]).then((()=>r))}function Np(t,...e){var n,r,s;t=jt(t);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||LT(e[u])||(o=e[u++]);const d={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(LT(e[u])){const b=e[u];e[u]=(n=b.next)===null||n===void 0?void 0:n.bind(b),e[u+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),e[u+2]=(s=b.complete)===null||s===void 0?void 0:s.bind(b)}let h,f,v;if(t instanceof fn)f=Ki(t.firestore,Go),v=pp(t._key.path),h={next:b=>{e[u]&&e[u](TR(f,t,b))},error:e[u+1],complete:e[u+2]};else{const b=Ki(t,Cu);f=Ki(b.firestore,Go),v=b._query;const x=new ER(f);h={next:E=>{e[u]&&e[u](new iu(f,x,b,E))},error:e[u+1],complete:e[u+2]},g5(t._query)}return(function(x,E,A,D){const M=new hR(D),U=new rR(E,M,A);return x.asyncQueue.enqueueAndForget((async()=>tR(await n0(x),U))),()=>{M.Ou(),x.asyncQueue.enqueueAndForget((async()=>nR(await n0(x),U)))}})(Cb(f),v,d,h)}function Vb(t,e){return(function(r,s){const o=new Oa;return r.asyncQueue.enqueueAndForget((async()=>GV(await n5(r),s,o))),o.promise})(Cb(t),e)}function TR(t,e,n){const r=n.docs.get(e._key),s=new ER(t);return new jo(t,s,e._key,r,new Lc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Eu=s})(Yo),Ma(new ks("firestore",((r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),d=new Go(new mP(r.getProvider("auth-internal")),new vP(u,r.getProvider("app-check-internal")),(function(f,v){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ye(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bd(f.options.projectId,v)})(u,s),u);return o=Object.assign({useFetchStreams:n},o),d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),bi(B1,F1,e),bi(B1,F1,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="firebasestorage.googleapis.com",AR="storageBucket",T5=120*1e3,S5=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends Mi{constructor(e,n,r=0){super(sy(e),`Firebase Storage: ${n} (${sy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,an.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var sn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(sn||(sn={}));function sy(t){return"storage/"+t}function Lb(){const t="An unknown error occurred, please check the error payload for server response.";return new an(sn.UNKNOWN,t)}function A5(t){return new an(sn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function C5(t){return new an(sn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function R5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new an(sn.UNAUTHENTICATED,t)}function I5(){return new an(sn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function N5(t){return new an(sn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function k5(){return new an(sn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function D5(){return new an(sn.CANCELED,"User canceled the upload/download.")}function O5(t){return new an(sn.INVALID_URL,"Invalid URL '"+t+"'.")}function j5(t){return new an(sn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function M5(){return new an(sn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+AR+"' property when initializing the app?")}function P5(){return new an(sn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function V5(){return new an(sn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function L5(t){return new an(sn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function i0(t){return new an(sn.INVALID_ARGUMENT,t)}function CR(){return new an(sn.APP_DELETED,"The Firebase app was deleted.")}function U5(t){return new an(sn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jc(t,e){return new an(sn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ac(t){throw new an(sn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ei.makeFromUrl(e,n)}catch{return new ei(e,"")}if(r.path==="")return r;throw j5(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),h={bucket:1,path:3};function f(G){G.path_=decodeURIComponent(G.path)}const v="v[A-Za-z0-9_]+",b=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",E=new RegExp(`^https?://${b}/${v}/b/${s}/o${x}`,"i"),A={bucket:1,path:3},D=n===SR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",U=new RegExp(`^https?://${D}/${s}/${M}`,"i"),z=[{regex:d,indices:h,postModify:o},{regex:E,indices:A,postModify:f},{regex:U,indices:{bucket:1,path:2},postModify:f}];for(let G=0;G<z.length;G++){const $=z[G],q=$.regex.exec(e);if(q){const C=q[$.indices.bucket];let S=q[$.indices.path];S||(S=""),r=new ei(C,S),$.postModify(r);break}}if(r==null)throw O5(e);return r}}class z5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(t,e,n){let r=1,s=null,o=null,u=!1,d=0;function h(){return d===2}let f=!1;function v(...M){f||(f=!0,e.apply(null,M))}function b(M){s=setTimeout(()=>{s=null,t(E,h())},M)}function x(){o&&clearTimeout(o)}function E(M,...U){if(f){x();return}if(M){x(),v.call(null,M,...U);return}if(h()||u){x(),v.call(null,M,...U);return}r<64&&(r*=2);let z;d===1?(d=2,z=0):z=(r+Math.random())*1e3,b(z)}let A=!1;function D(M){A||(A=!0,x(),!f&&(s!==null?(M||(d=2),clearTimeout(s),b(0)):M||(d=1)))}return b(0),o=setTimeout(()=>{u=!0,D(!0)},n),D}function F5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t){return t!==void 0}function H5(t){return typeof t=="object"&&!Array.isArray(t)}function Ub(t){return typeof t=="string"||t instanceof String}function BT(t){return zb()&&t instanceof Blob}function zb(){return typeof Blob<"u"}function FT(t,e,n,r){if(r<e)throw i0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw i0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function RR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Mo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Mo||(Mo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r,s,o,u,d,h,f,v,b,x=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=v,this.connectionFactory_=b,this.retry=x,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,D)=>{this.resolve_=A,this.reject_=D,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Af(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=d=>{const h=d.loaded,f=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const d=o.getErrorCode()===Mo.NO_ERROR,h=o.getStatus();if(!d||G5(h,this.additionalRetryCodes_)&&this.retry){const v=o.getErrorCode()===Mo.ABORT;r(!1,new Af(!1,null,v));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new Af(f,o))})},n=(r,s)=>{const o=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());q5(h)?o(h):o()}catch(h){u(h)}else if(d!==null){const h=Lb();h.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,h)):u(h)}else if(s.canceled){const h=this.appDelete_?CR():D5();u(h)}else{const h=k5();u(h)}};this.canceled_?n(!1,new Af(!1,null,!0)):this.backoffId_=B5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&F5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Af{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function K5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Y5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Q5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function W5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function X5(t,e,n,r,s,o,u=!0,d=!1){const h=RR(t.urlParams),f=t.url+h,v=Object.assign({},t.headers);return Q5(v,e),K5(v,n),Y5(v,o),W5(v,r),new $5(f,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Z5(...t){const e=J5();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(zb())return new Blob(t);throw new an(sn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function e6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t){if(typeof atob>"u")throw L5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ay{constructor(e,n){this.data=e,this.contentType=n||null}}function IR(t,e){switch(t){case Ni.RAW:return new ay(NR(e));case Ni.BASE64:case Ni.BASE64URL:return new ay(kR(t,e));case Ni.DATA_URL:return new ay(r6(e),i6(e))}throw Lb()}function NR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,u=t.charCodeAt(++n);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function n6(t){let e;try{e=decodeURIComponent(t)}catch{throw Jc(Ni.DATA_URL,"Malformed data URL.")}return NR(e)}function kR(t,e){switch(t){case Ni.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw Jc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ni.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw Jc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=t6(e)}catch(s){throw s.message.includes("polyfill")?s:Jc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class DR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Jc(Ni.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=s6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function r6(t){const e=new DR(t);return e.base64?kR(Ni.BASE64,e.rest):n6(e.rest)}function i6(t){return new DR(t).contentType}function s6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){let r=0,s="";BT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(BT(this.data_)){const r=this.data_,s=e6(r,e,n);return s===null?null:new Ta(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ta(r,!0)}}static getBlob(...e){if(zb()){const n=e.map(r=>r instanceof Ta?r.data_:r);return new Ta(Z5.apply(null,n))}else{const n=e.map(u=>Ub(u)?IR(Ni.RAW,u).data:u.data_);let r=0;n.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)s[o++]=u[d]}),new Ta(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){let e;try{e=JSON.parse(t)}catch{return null}return H5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function o6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function jR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t,e){return e}class _r{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||l6}}let Cf=null;function u6(t){return!Ub(t)||t.length<2?t:jR(t)}function MR(){if(Cf)return Cf;const t=[];t.push(new _r("bucket")),t.push(new _r("generation")),t.push(new _r("metageneration")),t.push(new _r("name","fullPath",!0));function e(o,u){return u6(u)}const n=new _r("name");n.xform=e,t.push(n);function r(o,u){return u!==void 0?Number(u):u}const s=new _r("size");return s.xform=r,t.push(s),t.push(new _r("timeCreated")),t.push(new _r("updated")),t.push(new _r("md5Hash",null,!0)),t.push(new _r("cacheControl",null,!0)),t.push(new _r("contentDisposition",null,!0)),t.push(new _r("contentEncoding",null,!0)),t.push(new _r("contentLanguage",null,!0)),t.push(new _r("contentType",null,!0)),t.push(new _r("metadata","customMetadata",!0)),Cf=t,Cf}function c6(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new ei(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function d6(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const u=n[o];r[u.local]=u.xform(r,e[u.server])}return c6(r,t),r}function PR(t,e,n){const r=OR(e);return r===null?null:d6(t,r,n)}function h6(t,e,n,r){const s=OR(e);if(s===null||!Ub(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const u=encodeURIComponent;return o.split(",").map(f=>{const v=t.bucket,b=t.fullPath,x="/b/"+u(v)+"/o/"+u(b),E=Bb(x,n,r),A=RR({alt:"media",token:f});return E+A})[0]}function f6(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class VR{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){if(!t)throw Lb()}function m6(t,e){function n(r,s){const o=PR(t,s,e);return LR(o!==null),o}return n}function p6(t,e){function n(r,s){const o=PR(t,s,e);return LR(o!==null),h6(o,s,t.host,t._protocol)}return n}function UR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=I5():s=R5():n.getStatus()===402?s=C5(t.bucket):n.getStatus()===403?s=N5(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function g6(t){const e=UR(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=A5(t.path)),o.serverResponse=s.serverResponse,o}return n}function v6(t,e,n){const r=e.fullServerUrl(),s=Bb(r,t.host,t._protocol),o="GET",u=t.maxOperationRetryTime,d=new VR(s,o,p6(t,n),u);return d.errorHandler=g6(e),d}function y6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function b6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=y6(null,e)),r}function x6(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let z="";for(let G=0;G<2;G++)z=z+Math.random().toString().slice(2);return z}const h=d();u["Content-Type"]="multipart/related; boundary="+h;const f=b6(e,r,s),v=f6(f,n),b="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,x=`\r
--`+h+"--",E=Ta.getBlob(b,r,x);if(E===null)throw P5();const A={name:f.fullPath},D=Bb(o,t.host,t._protocol),M="POST",U=t.maxUploadRetryTime,j=new VR(D,M,m6(t,n),U);return j.urlParams=A,j.headers=u,j.body=E.uploadData(),j.errorHandler=UR(e),j}class _6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,o){if(this.sent_)throw Ac("cannot .send() more than once");if(Vs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class w6 extends _6{initXhr(){this.xhr_.responseType="text"}}function zR(){return new w6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this._service=e,n instanceof ei?this._location=n:this._location=ei.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new $o(e,n)}get root(){const e=new ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jR(this._location.path)}get storage(){return this._service}get parent(){const e=a6(this._location.path);if(e===null)return null;const n=new ei(this._location.bucket,e);return new $o(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw U5(e)}}function BR(t,e,n){t._throwIfRoot("uploadBytes");const r=x6(t.storage,t._location,MR(),new Ta(e,!0),n);return t.storage.makeRequestWithTokens(r,zR).then(s=>({metadata:s,ref:t}))}function E6(t,e,n=Ni.RAW,r){t._throwIfRoot("uploadString");const s=IR(n,e),o=Object.assign({},r);return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),BR(t,s.data,o)}function T6(t){t._throwIfRoot("getDownloadURL");const e=v6(t.storage,t._location,MR());return t.storage.makeRequestWithTokens(e,zR).then(n=>{if(n===null)throw V5();return n})}function S6(t,e){const n=o6(t._location.path,e),r=new ei(t._location.bucket,n);return new $o(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t){return/^[A-Za-z]+:\/\//.test(t)}function C6(t,e){return new $o(t,e)}function FR(t,e){if(t instanceof Fb){const n=t;if(n._bucket==null)throw M5();const r=new $o(n,n._bucket);return e!=null?FR(r,e):r}else return e!==void 0?S6(t,e):t}function R6(t,e){if(e&&A6(e)){if(t instanceof Fb)return C6(t,e);throw i0("To use ref(service, url), the first argument must be a Storage instance.")}else return FR(t,e)}function qT(t,e){const n=e==null?void 0:e[AR];return n==null?null:ei.makeFromBucketSpec(n,t)}function I6(t,e,n,r={}){t.host=`${e}:${n}`;const s=Vs(e);s&&(sp(`https://${t.host}/b`),ap("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:l2(o,t.app.options.projectId))}class Fb{constructor(e,n,r,s,o,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=SR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=T5,this._maxUploadRetryTime=S5,this._requests=new Set,s!=null?this._bucket=ei.makeFromBucketSpec(s,this._host):this._bucket=qT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ei.makeFromBucketSpec(this._url,e):this._bucket=qT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $o(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new z5(CR());{const u=X5(e,this._appId,r,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const HT="@firebase/storage",GT="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="storage";function N6(t,e,n){return t=jt(t),BR(t,e,n)}function k6(t,e,n,r){return t=jt(t),E6(t,e,n,r)}function HR(t){return t=jt(t),T6(t)}function GR(t,e){return t=jt(t),R6(t,e)}function D6(t=op(),e){t=jt(t);const r=jd(t,qR).getImmediate({identifier:e}),s=F0("storage");return s&&O6(r,...s),r}function O6(t,e,n,r={}){I6(t,e,n,r)}function j6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Fb(n,r,s,e,Yo)}function M6(){Ma(new ks(qR,j6,"PUBLIC").setMultipleInstances(!0)),bi(HT,GT,""),bi(HT,GT,"esm2017")}M6();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="type.googleapis.com/google.protobuf.Int64Value",V6="type.googleapis.com/google.protobuf.UInt64Value";function $R(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Pm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Pm(e));if(typeof t=="function"||typeof t=="object")return $R(t,e=>Pm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function mu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case P6:case V6:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>mu(e)):typeof t=="function"||typeof t=="object"?$R(t,e=>mu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ur extends Mi{constructor(e,n,r){super(`${qb}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Ur.prototype)}}function L6(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Vm(t,e){let n=L6(t),r=n,s;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!$T[u])return new Ur("internal","internal");n=$T[u],r=u}const d=o.message;typeof d=="string"&&(r=d),s=o.details,s!==void 0&&(s=mu(s))}}catch{}return n==="ok"?null:new Ur(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,wr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s==null||s.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="us-central1",z6=/^data: (.*?)(?:\n|$)/;function B6(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Ur("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class F6{constructor(e,n,r,s,o=s0,u=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new U6(e,n,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(o);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=s0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function q6(t,e,n){const r=Vs(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(sp(t.emulatorOrigin),ap("Functions",!0))}function H6(t,e,n){const r=s=>$6(t,e,s,{});return r.stream=(s,o)=>Y6(t,e,s,o),r}async function G6(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function KR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function $6(t,e,n,r){const s=t._url(e);return K6(t,s,n,r)}async function K6(t,e,n,r){n=Pm(n);const s={data:n},o=await KR(t,r),u=r.timeout||7e4,d=B6(u),h=await Promise.race([G6(e,s,o,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Ur("cancelled","Firebase Functions instance was deleted.");const f=Vm(h.status,h.json);if(f)throw f;if(!h.json)throw new Ur("internal","Response is not valid JSON object.");let v=h.json.data;if(typeof v>"u"&&(v=h.json.result),typeof v>"u")throw new Ur("internal","Response is missing data field.");return{data:mu(v)}}function Y6(t,e,n,r){const s=t._url(e);return Q6(t,s,n,r||{})}async function Q6(t,e,n,r){var s;n=Pm(n);const o={data:n},u=await KR(t,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:r==null?void 0:r.signal})}catch(E){if(E instanceof Error&&E.name==="AbortError"){const D=new Ur("cancelled","Request was cancelled.");return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}const A=Vm(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let h,f;const v=new Promise((E,A)=>{h=E,f=A});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const E=new Ur("cancelled","Request was cancelled.");f(E)});const b=d.body.getReader(),x=W6(b,h,f,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const E=x.getReader();return{async next(){const{value:A,done:D}=await E.read();return{value:A,done:D}},async return(){return await E.cancel(),{done:!0,value:void 0}}}}},data:v}}function W6(t,e,n,r){const s=(u,d)=>{const h=u.match(z6);if(!h)return;const f=h[1];try{const v=JSON.parse(f);if("result"in v){e(mu(v.result));return}if("message"in v){d.enqueue(mu(v.message));return}if("error"in v){const b=Vm(0,v);d.error(b),n(b);return}}catch(v){if(v instanceof Ur){d.error(v),n(v);return}}},o=new TextDecoder;return new ReadableStream({start(u){let d="";return h();async function h(){if(r!=null&&r.aborted){const f=new Ur("cancelled","Request was cancelled");return u.error(f),n(f),Promise.resolve()}try{const{value:f,done:v}=await t.read();if(v){d.trim()&&s(d.trim(),u),u.close();return}if(r!=null&&r.aborted){const x=new Ur("cancelled","Request was cancelled");u.error(x),n(x),await t.cancel();return}d+=o.decode(f,{stream:!0});const b=d.split(`
`);d=b.pop()||"";for(const x of b)x.trim()&&s(x.trim(),u);return h()}catch(f){const v=f instanceof Ur?f:Vm(0,null);u.error(v),n(v)}}},cancel(){return t.cancel()}})}const KT="@firebase/functions",YT="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="auth-internal",J6="app-check-internal",Z6="messaging-internal";function eL(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(X6),u=n.getProvider(Z6),d=n.getProvider(J6);return new F6(s,o,u,d,r)};Ma(new ks(qb,e,"PUBLIC").setMultipleInstances(!0)),bi(KT,YT,t),bi(KT,YT,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(t=op(),e=s0){const r=jd(jt(t),qb).getImmediate({identifier:e}),s=F0("functions");return s&&nL(r,...s),r}function nL(t,e,n){q6(jt(t),e,n)}function Xo(t,e,n){return H6(jt(t),e)}eL();const rL={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},kp=d2(rL),Co=lP(kp),iL=new Ss,ri=s5(kp),YR=D6(kp),Jo=tL(kp,"us-central1"),sL=Xo(Jo,"analyzeClothingImages");async function aL(t){try{return(await sL({base64Images:t})).data.items||[]}catch(e){throw console.error("Erreur lors de l'analyse des vtements:",e),new Error("Erreur lors de l'analyse des vtements.")}}const oL=Xo(Jo,"generateOutfitsFunction"),lL=Xo(Jo,"generateOutfitsFunction"),uL=Xo(Jo,"generateChatResponseFunction");async function cL(t,e,n,r){const s=new Set((e||[]).flatMap(b=>b.itemIds)),u=t.filter(b=>!s.has(b.id)&&!b.isExcluded).map(b=>`- ${b.analysis} (ID: ${b.id}, Cat: ${b.category}, Matire: ${b.material})`).join(`
`),d=e.map(b=>`- ${b.name} (Ensemble, ID: ${b.id})`).join(`
`),h=[u,d].filter(Boolean).join(`
`),f=r?`

 PRIORIT 0 - ARTICLE OBLIGATOIRE (RGLE ABSOLUE)


 **CONTRAINTE NON NGOCIABLE** :
CHACUNE DES 3 TENUES DOIT ABSOLUMENT INCLURE :
 "${"name"in r?r.name:r.analysis}" (ID: ${r.id})

Cette pice doit apparatre dans TOUTES les tenues gnres sans exception.
Si une tenue n'inclut pas cet article, elle est INVALIDE.


`:"",v=`Tu es un styliste expert. Cre 3 tenues compltes et harmonieuses pour : "${n}".
${f}
Vtements disponibles :
${h}


 PRIORIT 1 - TEMPRATURE (RGLE ABSOLUE)


Analyse la mto dans le contexte et applique :

| Temprature | Rgle stricte |
|-------------|---------------|
| **< 15C** | Layering OBLIGATOIRE : Base (t-shirt/chemise) + Pull/Sweat + Manteau |
| **15-20C** | Pull, sweat, ou veste lgre suffisent |
| **20-25C** | 1 seule couche (t-shirt OU chemise lgre) |
| **> 25C** | Vtements TRS lgers uniquement. INTERDITS : jeans pais, pulls, vestes |

 **INTERDICTIONS THERMIQUES** :
- Doudoune/manteau si > 15C
- Short si < 22C
- Pull laine si > 15C
- Sandales si < 25C


 PRIORIT 2 - LAYERING (SUPERPOSITION)


**RGLES DE SUPERPOSITION VALIDES** :

 **Pull col V**  TOUJOURS avec chemise dessous (sinon nglig)
 **Pull col zipp/camionneur**  TOUJOURS avec t-shirt ou chemise dessous
 **Pull col rond (classique)**  UNIQUEMENT avec t-shirt uni dessous, JAMAIS avec chemise
 **Sweat/Pull sportif**  UNIQUEMENT avec t-shirt, JAMAIS avec chemise
 **Veste/Blazer**  Sur t-shirt, chemise, pull fin, ou col roul
 **Manteau**  Sur pull, sweat, ou veste (si trs froid)
 **Col roul**  JAMAIS avec chemise !

 **INTERDICTIONS ABSOLUES DE LAYERING** :
- JAMAIS chemise avec col roul (aberration stylistique)
- JAMAIS chemise avec pull col rond/ras-du-cou (trop formel + trop casual = clash)
- JAMAIS chemise avec sweat ou pull sportif (incompatibilit de style totale)
- JAMAIS col V sans rien dessous en contexte formel
- JAMAIS pull pais sous veste ajuste (volume excessif)
- JAMAIS 2 cols montants ensemble (col roul + col montant)


 PRIORIT 3 - COHRENCE & HARMONIE


**STRUCTURE** : Chaque tenue = Haut + Bas + Chaussures (minimum)

**COHRENCE DE STYLE (CRUCIAL)** :
-  JAMAIS mlanger sportif et formel (ex: sweat dlav + chemise = NON)
-  JAMAIS associer streetwear et business (ex: jogger + chemise = NON)
-  Style cohrent : tout casual OU tout formel OU smart-casual quilibr
-  Chemise = TOUJOURS avec pices au moins smart-casual (chino, jean brut, blazer)
-  Pull sportif/sweat = TOUJOURS avec pices casual (jean dlav, jogger, sneakers)

**COULEURS** :
- Maximum 3 couleurs par tenue
- 1 seul motif maximum (si haut  motifs  bas uni)
- vite contrastes trop proches (bleu marine + noir)

**VARIT** :
- 3 looks visuellement diffrents
- vite de rpter le mme pantalon 3 fois si possible


 ACCESSOIRES


**OBLIGATOIRES** :
- Montre : TOUJOURS inclure si disponible dans les accessoires

**OPTIONNELS** :
- Bracelet : Peut tre ajout EN PLUS de la montre si disponible
- Ceinture : Pour pantalon classique
- charpe : Si < 10C

**IMPORTANT** : Utilise les IDs EXACTS des articles. Sois cratif dans les limites.${r?`


 RAPPEL FINAL - ARTICLE OBLIGATOIRE

VRIFIE que CHACUNE des 3 tenues inclut bien :
 "${"name"in r?r.name:r.analysis}" (ID: ${r.id})
`:""}`;try{return(await oL({prompt:v})).data.tenues}catch(b){throw console.error("Erreur gnration tenues:",b),new Error("Erreur lors de la gnration des tenues.")}}async function dL(t,e,n,r,s){const o=new Set((e||[]).flatMap(A=>A.itemIds)),d=t.filter(A=>!o.has(A.id)&&!A.isExcluded).map(A=>`- ${A.analysis} (ID: ${A.id}, Cat: ${A.category}, Matire: ${A.material})`).join(`
`),h=e.map(A=>`- ${A.name} (Ensemble, ID: ${A.id})`).join(`
`),f=[d,h].filter(Boolean).join(`
`),b=r.vetements.filter(A=>A.id!==s.id).map(A=>`   GARDER : "${A.description}" (ID: ${A.id})`).join(`
`),x=`   REMPLACER : "${s.description}" (ID: ${s.id})`,E=`Tu es un styliste expert. L'utilisateur aime cette tenue mais veut remplacer UNE SEULE pice.

**TENUE ACTUELLE** : "${r.titre}"
${r.description}

**INSTRUCTIONS DE MODIFICATION** :
${b}
${x}

 **RGLE ABSOLUE** : Tu DOIS inclure EXACTEMENT les mmes articles marqus " GARDER" avec leurs IDs exacts dans chacune des 3 tenues.
Tu dois UNIQUEMENT remplacer l'article marqu " REMPLACER" par une alternative diffrente parmi les vtements disponibles.

**CONTEXTE** : ${n}

Vtements disponibles :
${f}


 PRIORIT 1 - TEMPRATURE (RGLE ABSOLUE)


Analyse la mto dans le contexte et applique :

| Temprature | Rgle stricte |
|-------------|---------------|
| **< 15C** | Layering OBLIGATOIRE : Base (t-shirt/chemise) + Pull/Sweat + Manteau |
| **15-20C** | Pull, sweat, ou veste lgre suffisent |
| **20-25C** | 1 seule couche (t-shirt OU chemise lgre) |
| **> 25C** | Vtements TRS lgers uniquement. INTERDITS : jeans pais, pulls, vestes |

 **INTERDICTIONS THERMIQUES** :
- Doudoune/manteau si > 15C
- Short si < 22C
- Pull laine si > 15C
- Sandales si < 25C


 PRIORIT 2 - LAYERING (SUPERPOSITION)


**RGLES DE SUPERPOSITION VALIDES** :

 **Pull col V**  TOUJOURS avec chemise dessous (sinon nglig)
 **Pull col zipp/camionneur**  TOUJOURS avec t-shirt ou chemise dessous
 **Pull col rond (classique)**  UNIQUEMENT avec t-shirt uni dessous, JAMAIS avec chemise
 **Sweat/Pull sportif**  UNIQUEMENT avec t-shirt, JAMAIS avec chemise
 **Veste/Blazer**  Sur t-shirt, chemise, pull fin, ou col roul
 **Manteau**  Sur pull, sweat, ou veste (si trs froid)
 **Col roul**  JAMAIS avec chemise !

 **INTERDICTIONS ABSOLUES DE LAYERING** :
- JAMAIS chemise avec col roul (aberration stylistique)
- JAMAIS chemise avec pull col rond/ras-du-cou (trop formel + trop casual = clash)
- JAMAIS chemise avec sweat ou pull sportif (incompatibilit de style totale)
- JAMAIS col V sans rien dessous en contexte formel
- JAMAIS pull pais sous veste ajuste (volume excessif)
- JAMAIS 2 cols montants ensemble (col roul + col montant)


 PRIORIT 3 - COHRENCE & HARMONIE


**STRUCTURE** : Chaque tenue = Haut + Bas + Chaussures (minimum)

**COHRENCE DE STYLE (CRUCIAL)** :
-  JAMAIS mlanger sportif et formel (ex: sweat dlav + chemise = NON)
-  JAMAIS associer streetwear et business (ex: jogger + chemise = NON)
-  Style cohrent : tout casual OU tout formel OU smart-casual quilibr
-  Chemise = TOUJOURS avec pices au moins smart-casual (chino, jean brut, blazer)
-  Pull sportif/sweat = TOUJOURS avec pices casual (jean dlav, jogger, sneakers)

**COULEURS** :
- Maximum 3 couleurs par tenue
- 1 seul motif maximum (si haut  motifs  bas uni)
- vite contrastes trop proches (bleu marine + noir)

**VARIT** :
- 3 alternatives DIFFRENTES pour remplacer la pice dsigne
- Garde l'harmonie avec les pices conserves


 ACCESSOIRES


**OBLIGATOIRES** :
- Montre : TOUJOURS inclure si disponible dans les accessoires

**OPTIONNELS** :
- Bracelet : Peut tre ajout EN PLUS de la montre si disponible
- Ceinture : Pour pantalon classique
- charpe : Si < 10C

**IMPORTANT** : Utilise les IDs EXACTS des articles. Gnre 3 variantes qui respectent TOUTES les rgles ci-dessus.`;try{return(await lL({prompt:E})).data.tenues}catch(A){throw console.error("Erreur gnration variantes:",A),new Error("Erreur lors de la gnration des variantes.")}}async function hL(t,e,n,r,s){const o=new Set((s||[]).flatMap(E=>E.itemIds)),u=r.filter(E=>!o.has(E.id)&&!E.isExcluded),d={Hauts:u.filter(E=>E.category==="Hauts"),Bas:u.filter(E=>E.category==="Bas"),Chaussures:u.filter(E=>E.category==="Chaussures"),Accessoires:u.filter(E=>E.category==="Accessoires")},h=Object.entries(d).map(([E,A])=>{if(A.length===0)return"";const D=A.map(M=>`  - ${M.analysis} (ID: ${M.id}, Matire: ${M.material})`).join(`
`);return`**${E}** (${A.length}) :
${D}`}).filter(Boolean).join(`

`),f=s.length>0?`
**Ensembles** (${s.length}) :
${s.map(E=>`  - ${E.name} (ID: ${E.id})`).join(`
`)}`:"",v=n.map(E=>`${E.role==="user"?"User":"Assistant"}: ${E.content}`).join(`
`),b=t.vetements.map(E=>`  - ${E.description} (ID: ${E.id})`).join(`
`),x=`Tu es un ASSISTANT STYLISTE SPCIALIS pour l'application DressCode.

 **RGLES ABSOLUES** :
1. Tu REFUSES CATGORIQUEMENT toute question hors mode/style/vtements
2. Si demande hors-sujet  Rponds: "Je suis ton styliste IA  Je ne peux parler que de mode, tenues et style. Comment puis-je t'aider avec tes vtements ?"
3. PAS de recettes, code, math, histoire, etc.
4. UNIQUEMENT : conseils de style, tenues, accessoires, couleurs, matires

 **RGLE CRITIQUE - SUGGESTIONS UNIQUEMENT DEPUIS LA GARDE-ROBE** :

 TU DOIS :
- TOUJOURS suggrer des pices qui existent dans sa garde-robe
- Dcrire les items de manire naturelle SANS mentionner leur ID (ex: "Ta veste bomber noire Burberry" au lieu de "ID: 12345")
- Expliquer POURQUOI cette pice spcifique irait mieux
- Si aucune alternative n'existe, le dire clairement

 TU NE DOIS JAMAIS :
- Suggrer d'acheter quoi que ce soit
- Inventer des pices qu'il ne possde pas
- Donner des conseils gnriques sans rfrencer ses items rels
- Afficher les IDs techniques dans tes rponses (ils sont moches et inutiles pour l'utilisateur)



 **TENUE ACTUELLE** : "${t.titre}"
${t.description}

Pices composant cette tenue :
${b}



 **GARDE-ROBE COMPLTE DE L'UTILISATEUR** :

${h}${f}



 **HISTORIQUE DE CONVERSATION** :
${v||"(Pas d'historique)"}



 **NOUVEAU MESSAGE** :
${e}



 **INSTRUCTIONS DE RPONSE** :
- Rponds en franais, de manire concise et amicale (2-4 phrases max)
- Si tu suggres une alternative, dcris-la naturellement (sans ID) et explique pourquoi
- Si l'utilisateur n'a pas d'alternative, sois honnte
- Reste focus sur cette tenue spcifique
- Pas d'actions (gnration) pour le moment, uniquement des conseils

 **FORMAT DE RPONSE JSON** :
{
  "message": "Ta rponse textuelle ici",
  "isRejected": true/false
}

 Mets "isRejected": true UNIQUEMENT si la question est TOTALEMENT hors-sujet mode/style (recette, code, math, histoire, etc.)
 Mets "isRejected": false pour toute question lie  la mode, mme vaguement`;try{const A=(await uL({prompt:x})).data;return{message:A.message,isRejected:A.isRejected}}catch(E){throw console.error("Erreur gnration chat:",E),new Error("Erreur lors de la gnration de la rponse.")}}const fL=Xo(Jo,"analyzeWardrobeGapsFunction");async function mL(t,e){const n={Hauts:t.filter(d=>d.category==="Hauts"),Bas:t.filter(d=>d.category==="Bas"),Chaussures:t.filter(d=>d.category==="Chaussures"),Accessoires:t.filter(d=>d.category==="Accessoires")},r=Object.entries(n).map(([d,h])=>`**${d}** (${h.length}) :
${h.map(f=>`  - ${f.analysis} (${f.color}, ${f.material})`).join(`
`)}`).join(`

`),s=t.length,o=e.length>0,u=`Tu es un expert styliste et conseiller en garde-robe avec 20 ans d'exprience. Ta mission : analyser cette garde-robe et suggrer des achats stratgiques pour maximiser la polyvalence.

 **INVENTAIRE ACTUEL** (${s} pices${o?`, ${e.length} ensembles`:""}) :

${r}

---

 **OBJECTIF DE L'ANALYSE** :
Identifier les **pices manquantes cls** qui permettront de crer le maximum de tenues diffrentes avec l'existant.

 **MTHODOLOGIE** :

1. **ANALYSE STRATGIQUE** :
   - quilibre entre catgories (ratio Hauts/Bas/Chaussures)
   - Diversit des couleurs (neutres vs. vives)
   - Polyvalence des pices existantes
   - Occasions couvertes (casual, formel, sport, etc.)
   - Saisons couvertes

2. **IDENTIFICATION DES GAPS CRITIQUES** :
   - Pices basiques manquantes (ex: chemise blanche, jean brut)
   - Couleurs absentes pour complter les palettes
   - Styles/occasions non couverts
   - Opportunits de layering (superposition)

3. **PRIORISATION** :
   - **HIGH** : Pice essentielle manquante qui dbloque 5+ nouvelles tenues
   - **MEDIUM** : Pice utile qui ajoute de la varit (3-5 tenues)
   - **LOW** : Pice "nice-to-have" pour occasions spcifiques

4. **SUGGESTIONS D'ACHATS** (4-6 pices maximum) :
   - Focus sur la **POLYVALENCE** : chaque suggestion doit se marier avec plusieurs pices existantes
   - Inclure des **pices basiques intemporelles** avant les tendances
   - quilibrer les priorits (au moins 1-2 high priority)
   - Pour chaque suggestion, fournis :
     * Une description prcise (ex: "Chemise oxford bleu clair en coton")
     * La raison stratgique (ex: "Se marie avec vos 3 pantalons et cre une base smart-casual")
     * Un prix estim raliste en 
     * Une requte de recherche optimise (mots-cls pour Zalando/autres boutiques)

---

 **RGLES CRITIQUES** :

- NE suggre PAS de pices similaires  l'existant
- Favorise les neutres (blanc, noir, beige, navy) pour maximiser les combinaisons
- vite les pices trs spcifiques/occasionnelles (sauf si totalement absentes)
- Sois concis mais prcis dans les descriptions
- Le champ \`searchQuery\` doit contenir des mots-cls optimiss pour recherche en ligne (ex: "chemise oxford homme coton bleu clair" ou "pull col V mrinos noir homme")

Retourne ton analyse au format JSON.`;try{return(await fL({prompt:u})).data}catch(d){throw console.error("Erreur analyse garde-robe:",d),new Error("Erreur lors de l'analyse de la garde-robe.")}}const pL=Xo(Jo,"generateVacationPlanFunction");async function gL(t,e,n,r,s){const o=new Set((e||[]).flatMap(x=>x.itemIds)),d=t.filter(x=>!o.has(x.id)&&!x.isExcluded).map(x=>`- ${x.analysis} (ID: ${x.id}, Cat: ${x.category}, Couleur: ${x.color}, Matire: ${x.material})`).join(`
`),h=e.map(x=>`- ${x.name} (Ensemble, ID: ${x.id})`).join(`
`),f=[d,h].filter(Boolean).join(`
`),v=s?`
**CONTRAINTE POIDS** : Le poids total NE DOIT PAS dpasser ${s} kg. Estime le poids moyen selon ces rfrences ralistes :
- T-shirt : ~150g
- Chemise : ~200g
- Jean/Denim : ~900g
- Pantalon coton/chino : ~500g
- Jogging/Pantalon lger : ~350g
- Pull laine : ~700g
- Sweat : ~400g
- Veste lgre : ~500g
- Manteau/Doudoune : ~1kg
- Chaussures (par paire) : ~1kg
- Baskets (par paire) : ~1kg
- Chaussures de ville cuir : ~1,2kg
- Sous-vtements : ~50g
- Chaussettes : ~50g`:"",b=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${r}

**PRINCIPE CAPSULE WARDROBE** : Slectionner peu de pices qui se combinent TOUTES entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :

   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** :
   -  Doudoune/veste ski/polaire paisse si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **HARMONIE CAPSULE (pour que tout se combine)** :
   - **Palette de couleurs** : Maximum 4-5 couleurs qui vont ensemble (ex: bleu marine, blanc, beige, une couleur d'accent)
   - **Motifs** : Maximum 2 pices  motifs dans toute la valise, le reste UNI
   - **Neutralit** : Au moins 50% de pices en couleurs neutres (noir, blanc, gris, beige, marine)

5. **QUANTITS RECOMMANDES pour ${n} jours** :
   - Hauts : ${Math.min(n+1,7)} pices max (on peut reporter un t-shirt)
   - Bas : ${Math.min(Math.ceil(n/2)+1,4)} pices max
   - Chaussures : 2-3 paires max
   - Accessoires : selon besoin

6. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

${v}

**VTEMENTS DISPONIBLES** :
${f}

**SORTIE** :
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- La liste des articles avec leur ID exact`;try{return(await pL({prompt:b})).data}catch(x){throw console.error("Erreur gnration plan vacances:",x),new Error("Erreur lors de la gnration du plan vacances.")}}Xo(Jo,"generateVisualOutfit");const vL=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),yL=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),a0=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),bL=({className:t="h-8 w-8 text-gold"})=>g.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ed=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),Hb=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),QT=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),QR=()=>g.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),xL=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),_L=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),wL=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),EL=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),Zc=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),TL=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Dp=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),Gb=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),SL=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),WR=()=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[g.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),g.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),Lm=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),pu=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),o0=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),XR=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),JR=({className:t="h-5 w-5"})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),AL=({theme:t,toggleTheme:e,children:n,isModalOpen:r=!1})=>g.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${r?"z-10":"z-50"}`,children:g.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[g.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsxs("div",{className:"flex items-center gap-4",children:[n,g.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?g.jsx(yL,{}):g.jsx(vL,{})})]})]})}),CL="DRESSMEUP2025",WT=({user:t})=>{var G,$,q;const[e,n]=O.useState(""),[r,s]=O.useState(""),[o,u]=O.useState(""),[d,h]=O.useState(!1),[f,v]=O.useState(!1),[b,x]=O.useState(null),[E,A]=O.useState(!1),D=O.useRef(null);O.useEffect(()=>{const C=S=>{D.current&&!D.current.contains(S.target)&&v(!1)};return f&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[f]);const M=async C=>{try{return(await w5(Ru(ri,"allowedEmails",C.toLowerCase()))).exists()}catch(S){return console.error("Erreur vrification email:",S),!1}},U=async()=>{A(!0),x(null);try{const S=(await vM(Co,iL)).user.email;if(!S){await Zv(Co),x("Impossible de rcuprer l'email du compte Google.");return}if(!await M(S)){await Zv(Co),x("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(C){console.error("Erreur de connexion Google:",C),x(C.message||"Erreur de connexion")}finally{A(!1)}},j=async C=>{C.preventDefault(),A(!0),x(null);try{if(d){if(o!==CL){x("Code d'invitation invalide."),A(!1);return}if(!await M(e)){x("Votre email n'est pas dans la liste des beta testeurs."),A(!1);return}await Kj(Co,e,r)}else{if(!await M(e)){x("Votre email n'est pas autoris  accder  la beta."),A(!1);return}await Yj(Co,e,r)}}catch(S){console.error("Erreur d'authentification:",S),S.code==="auth/user-not-found"?x("Aucun compte trouv avec cet email."):S.code==="auth/wrong-password"?x("Mot de passe incorrect."):S.code==="auth/email-already-in-use"?x("Cet email est dj utilis."):S.code==="auth/weak-password"?x("Le mot de passe doit contenir au moins 6 caractres."):x(S.message||"Erreur d'authentification")}finally{A(!1)}},z=async()=>{try{await Zv(Co)}catch(C){console.error("Erreur de dconnexion:",C)}};return t?g.jsxs("div",{className:"relative",ref:D,children:[g.jsxs("button",{onClick:()=>v(!f),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((G=t.displayName)==null?void 0:G[0])||(($=t.email)==null?void 0:$[0])||"U").toUpperCase()}),g.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((q=t.email)==null?void 0:q.split("@")[0])})]}),f&&g.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[g.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),g.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),g.jsxs("button",{onClick:z,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:d?"Rejoindre la beta":"Bienvenue"}),g.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:g.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),b&&g.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:b}),g.jsx("button",{onClick:U,disabled:E,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:E?g.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsxs(g.Fragment,{children:[g.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[g.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),g.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),g.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),g.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),g.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),g.jsxs("form",{onSubmit:j,className:"space-y-4",children:[g.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:C=>n(C.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),g.jsx("input",{type:"password",placeholder:"Mot de passe",value:r,onChange:C=>s(C.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),d&&g.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:C=>u(C.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),g.jsx("button",{type:"submit",disabled:E,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:E?g.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Rejoindre la beta":"Se connecter"})]}),g.jsx("button",{onClick:()=>{h(!d),x(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:d?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},$b=O.createContext({});function Kb(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const Op=O.createContext(null),Yb=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class RL extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function IL({children:t,isPresent:e}){const n=O.useId(),r=O.useRef(null),s=O.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=O.useContext(Yb);return O.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f}=s.current;if(e||!r.current||!u||!d)return;r.current.dataset.motionPopId=n;const v=document.createElement("style");return o&&(v.nonce=o),document.head.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            top: ${h}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(v)}},[e]),g.jsx(RL,{isPresent:e,childRef:r,sizeRef:s,children:O.cloneElement(t,{ref:r})})}const NL=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:u})=>{const d=Kb(kL),h=O.useId(),f=O.useCallback(b=>{d.set(b,!0);for(const x of d.values())if(!x)return;r&&r()},[d,r]),v=O.useMemo(()=>({id:h,initial:e,isPresent:n,custom:s,onExitComplete:f,register:b=>(d.set(b,!1),()=>d.delete(b))}),o?[Math.random(),f]:[n,f]);return O.useMemo(()=>{d.forEach((b,x)=>d.set(x,!1))},[n]),O.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),u==="popLayout"&&(t=g.jsx(IL,{isPresent:n,children:t})),g.jsx(Op.Provider,{value:v,children:t})};function kL(){return new Map}function ZR(t=!0){const e=O.useContext(Op);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=O.useId();O.useEffect(()=>{t&&s(o)},[t]);const u=O.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,u]:[!0]}const Rf=t=>t.key||"";function XT(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const Qb=typeof window<"u",eI=Qb?O.useLayoutEffect:O.useEffect,DL=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:u=!1})=>{const[d,h]=ZR(u),f=O.useMemo(()=>XT(t),[t]),v=u&&!d?[]:f.map(Rf),b=O.useRef(!0),x=O.useRef(f),E=Kb(()=>new Map),[A,D]=O.useState(f),[M,U]=O.useState(f);eI(()=>{b.current=!1,x.current=f;for(let G=0;G<M.length;G++){const $=Rf(M[G]);v.includes($)?E.delete($):E.get($)!==!0&&E.set($,!1)}},[M,v.length,v.join("-")]);const j=[];if(f!==A){let G=[...f];for(let $=0;$<M.length;$++){const q=M[$],C=Rf(q);v.includes(C)||(G.splice($,0,q),j.push(q))}o==="wait"&&j.length&&(G=j),U(XT(G)),D(f);return}const{forceRender:z}=O.useContext($b);return g.jsx(g.Fragment,{children:M.map(G=>{const $=Rf(G),q=u&&!d?!1:f===M||v.includes($),C=()=>{if(E.has($))E.set($,!0);else return;let S=!0;E.forEach(I=>{I||(S=!1)}),S&&(z==null||z(),U(x.current),u&&(h==null||h()),r&&r())};return g.jsx(NL,{isPresent:q,initial:!b.current||n?void 0:!1,custom:q?void 0:e,presenceAffectsLayout:s,mode:o,onExitComplete:q?void 0:C,children:G},$)})})},ti=t=>t;let tI=ti;function Wb(t){let e;return()=>(e===void 0&&(e=t()),e)}const gu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Is=t=>t*1e3,Ns=t=>t/1e3,OL={useManualTiming:!1};function jL(t){let e=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(f){o.has(f)&&(h.schedule(f),t()),f(u)}const h={schedule:(f,v=!1,b=!1)=>{const E=b&&r?e:n;return v&&o.add(f),E.has(f)||E.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(u=f,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(d),e.clear(),r=!1,s&&(s=!1,h.process(f))}};return h}const If=["read","resolveKeyframes","update","preRender","render","postRender"],ML=40;function nI(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=If.reduce((U,j)=>(U[j]=jL(o),U),{}),{read:d,resolveKeyframes:h,update:f,preRender:v,render:b,postRender:x}=u,E=()=>{const U=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(U-s.timestamp,ML),1),s.timestamp=U,s.isProcessing=!0,d.process(s),h.process(s),f.process(s),v.process(s),b.process(s),x.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(E))},A=()=>{n=!0,r=!0,s.isProcessing||t(E)};return{schedule:If.reduce((U,j)=>{const z=u[j];return U[j]=(G,$=!1,q=!1)=>(n||A(),z.schedule(G,$,q)),U},{}),cancel:U=>{for(let j=0;j<If.length;j++)u[If[j]].cancel(U)},state:s,steps:u}}const{schedule:Ht,cancel:qa,state:Jn,steps:oy}=nI(typeof requestAnimationFrame<"u"?requestAnimationFrame:ti,!0),rI=O.createContext({strict:!1}),JT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vu={};for(const t in JT)vu[t]={isEnabled:e=>JT[t].some(n=>!!e[n])};function PL(t){for(const e in t)vu[e]={...vu[e],...t[e]}}const VL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Um(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VL.has(t)}let iI=t=>!Um(t);function LL(t){t&&(iI=e=>e.startsWith("on")?!Um(e):t(e))}try{LL(require("@emotion/is-prop-valid").default)}catch{}function UL(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(iI(s)||n===!0&&Um(s)||!e&&!Um(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function zL(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const jp=O.createContext({});function Td(t){return typeof t=="string"||Array.isArray(t)}function Mp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Xb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Jb=["initial",...Xb];function Pp(t){return Mp(t.animate)||Jb.some(e=>Td(t[e]))}function sI(t){return!!(Pp(t)||t.variants)}function BL(t,e){if(Pp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Td(n)?n:void 0,animate:Td(r)?r:void 0}}return t.inherit!==!1?e:{}}function FL(t){const{initial:e,animate:n}=BL(t,O.useContext(jp));return O.useMemo(()=>({initial:e,animate:n}),[ZT(e),ZT(n)])}function ZT(t){return Array.isArray(t)?t.join(" "):t}const qL=Symbol.for("motionComponentSymbol");function Yl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function HL(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yl(n)&&(n.current=r))},[e])}const Zb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),GL="framerAppearId",aI="data-"+Zb(GL),{schedule:ex}=nI(queueMicrotask,!1),oI=O.createContext({});function $L(t,e,n,r,s){var o,u;const{visualElement:d}=O.useContext(jp),h=O.useContext(rI),f=O.useContext(Op),v=O.useContext(Yb).reducedMotion,b=O.useRef(null);r=r||h.renderer,!b.current&&r&&(b.current=r(t,{visualState:e,parent:d,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:v}));const x=b.current,E=O.useContext(oI);x&&!x.projection&&s&&(x.type==="html"||x.type==="svg")&&KL(b.current,n,s,E);const A=O.useRef(!1);O.useInsertionEffect(()=>{x&&A.current&&x.update(n,f)});const D=n[aI],M=O.useRef(!!D&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,D))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,D)));return eI(()=>{x&&(A.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),ex.render(x.render),M.current&&x.animationState&&x.animationState.animateChanges())}),O.useEffect(()=>{x&&(!M.current&&x.animationState&&x.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)===null||U===void 0||U.call(window,D)}),M.current=!1))}),x}function KL(t,e,n,r){const{layoutId:s,layout:o,drag:u,dragConstraints:d,layoutScroll:h,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:lI(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!u||d&&Yl(d),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:h,layoutRoot:f})}function lI(t){if(t)return t.options.allowProjection!==!1?t.projection:lI(t.parent)}function YL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var o,u;t&&PL(t);function d(f,v){let b;const x={...O.useContext(Yb),...f,layoutId:QL(f)},{isStatic:E}=x,A=FL(f),D=r(f,E);if(!E&&Qb){WL();const M=XL(x);b=M.MeasureLayout,A.visualElement=$L(s,D,x,e,M.ProjectionNode)}return g.jsxs(jp.Provider,{value:A,children:[b&&A.visualElement?g.jsx(b,{visualElement:A.visualElement,...x}):null,n(s,f,HL(D,A.visualElement,v),D,E,A.visualElement)]})}d.displayName=`motion.${typeof s=="string"?s:`create(${(u=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&u!==void 0?u:""})`}`;const h=O.forwardRef(d);return h[qL]=s,h}function QL({layoutId:t}){const e=O.useContext($b).id;return e&&t!==void 0?e+"-"+t:t}function WL(t,e){O.useContext(rI).strict}function XL(t){const{drag:e,layout:n}=vu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const JL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tx(t){return typeof t!="string"||t.includes("-")?!1:!!(JL.indexOf(t)>-1||/[A-Z]/u.test(t))}function eS(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function nx(t,e,n,r){if(typeof e=="function"){const[s,o]=eS(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=eS(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const l0=t=>Array.isArray(t),ZL=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),eU=t=>l0(t)?t[t.length-1]||0:t,pr=t=>!!(t&&t.getVelocity);function am(t){const e=pr(t)?t.get():t;return ZL(e)?e.toValue():e}function tU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const u={latestValues:nU(r,s,o,t),renderState:e()};return n&&(u.onMount=d=>n({props:r,current:d,...u}),u.onUpdate=d=>n(d)),u}const uI=t=>(e,n)=>{const r=O.useContext(jp),s=O.useContext(Op),o=()=>tU(t,e,r,s);return n?o():Kb(o)};function nU(t,e,n,r){const s={},o=r(t,{});for(const x in o)s[x]=am(o[x]);let{initial:u,animate:d}=t;const h=Pp(t),f=sI(t);e&&f&&!h&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let v=n?n.initial===!1:!1;v=v||u===!1;const b=v?d:u;if(b&&typeof b!="boolean"&&!Mp(b)){const x=Array.isArray(b)?b:[b];for(let E=0;E<x.length;E++){const A=nx(t,x[E]);if(A){const{transitionEnd:D,transition:M,...U}=A;for(const j in U){let z=U[j];if(Array.isArray(z)){const G=v?z.length-1:0;z=z[G]}z!==null&&(s[j]=z)}for(const j in D)s[j]=D[j]}}}return s}const Iu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zo=new Set(Iu),cI=t=>e=>typeof e=="string"&&e.startsWith(t),dI=cI("--"),rU=cI("var(--"),rx=t=>rU(t)?iU.test(t.split("/*")[0].trim()):!1,iU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ps=(t,e,n)=>n>e?e:n<t?t:n,Nu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Sd={...Nu,transform:t=>Ps(0,1,t)},Nf={...Nu,default:1},$d=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xa=$d("deg"),Ji=$d("%"),Me=$d("px"),sU=$d("vh"),aU=$d("vw"),tS={...Ji,parse:t=>Ji.parse(t)/100,transform:t=>Ji.transform(t*100)},oU={borderWidth:Me,borderTopWidth:Me,borderRightWidth:Me,borderBottomWidth:Me,borderLeftWidth:Me,borderRadius:Me,radius:Me,borderTopLeftRadius:Me,borderTopRightRadius:Me,borderBottomRightRadius:Me,borderBottomLeftRadius:Me,width:Me,maxWidth:Me,height:Me,maxHeight:Me,top:Me,right:Me,bottom:Me,left:Me,padding:Me,paddingTop:Me,paddingRight:Me,paddingBottom:Me,paddingLeft:Me,margin:Me,marginTop:Me,marginRight:Me,marginBottom:Me,marginLeft:Me,backgroundPositionX:Me,backgroundPositionY:Me},lU={rotate:xa,rotateX:xa,rotateY:xa,rotateZ:xa,scale:Nf,scaleX:Nf,scaleY:Nf,scaleZ:Nf,skew:xa,skewX:xa,skewY:xa,distance:Me,translateX:Me,translateY:Me,translateZ:Me,x:Me,y:Me,z:Me,perspective:Me,transformPerspective:Me,opacity:Sd,originX:tS,originY:tS,originZ:Me},nS={...Nu,transform:Math.round},ix={...oU,...lU,zIndex:nS,size:Me,fillOpacity:Sd,strokeOpacity:Sd,numOctaves:nS},uU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cU=Iu.length;function dU(t,e,n){let r="",s=!0;for(let o=0;o<cU;o++){const u=Iu[o],d=t[u];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(u.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const f=hI(d,ix[u]);if(!h){s=!1;const v=uU[u]||u;r+=`${v}(${f}) `}n&&(e[u]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function sx(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let u=!1,d=!1;for(const h in e){const f=e[h];if(Zo.has(h)){u=!0;continue}else if(dI(h)){s[h]=f;continue}else{const v=hI(f,ix[h]);h.startsWith("origin")?(d=!0,o[h]=v):r[h]=v}}if(e.transform||(u||n?r.transform=dU(e,t.transform,n):r.transform&&(r.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:v=0}=o;r.transformOrigin=`${h} ${f} ${v}`}}const hU={offset:"stroke-dashoffset",array:"stroke-dasharray"},fU={offset:"strokeDashoffset",array:"strokeDasharray"};function mU(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?hU:fU;t[o.offset]=Me.transform(-r);const u=Me.transform(e),d=Me.transform(n);t[o.array]=`${u} ${d}`}function rS(t,e,n){return typeof t=="string"?t:Me.transform(e+n*t)}function pU(t,e,n){const r=rS(e,t.x,t.width),s=rS(n,t.y,t.height);return`${r} ${s}`}function ax(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:u,pathSpacing:d=1,pathOffset:h=0,...f},v,b){if(sx(t,f,b),v){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:E,dimensions:A}=t;x.transform&&(A&&(E.transform=x.transform),delete x.transform),A&&(s!==void 0||o!==void 0||E.transform)&&(E.transformOrigin=pU(A,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),u!==void 0&&mU(x,u,d,h,!1)}const ox=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),fI=()=>({...ox(),attrs:{}}),lx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mI(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const pI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gI(t,e,n,r){mI(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(pI.has(s)?s:Zb(s),e.attrs[s])}const zm={};function gU(t){Object.assign(zm,t)}function vI(t,{layout:e,layoutId:n}){return Zo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zm[t]||t==="opacity")}function ux(t,e,n){var r;const{style:s}=t,o={};for(const u in s)(pr(s[u])||e.style&&pr(e.style[u])||vI(u,t)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[u]=s[u]);return o}function yI(t,e,n){const r=ux(t,e,n);for(const s in t)if(pr(t[s])||pr(e[s])){const o=Iu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}function vU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const iS=["x","y","width","height","cx","cy","r"],yU={useVisualState:uI({scrapeMotionValuesFromProps:yI,createRenderState:fI,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const d in s)if(Zo.has(d)){o=!0;break}}if(!o)return;let u=!e;if(e)for(let d=0;d<iS.length;d++){const h=iS[d];t[h]!==e[h]&&(u=!0)}u&&Ht.read(()=>{vU(n,r),Ht.render(()=>{ax(r,s,lx(n.tagName),t.transformTemplate),gI(n,r)})})}})},bU={useVisualState:uI({scrapeMotionValuesFromProps:ux,createRenderState:ox})};function bI(t,e,n){for(const r in e)!pr(e[r])&&!vI(r,n)&&(t[r]=e[r])}function xU({transformTemplate:t},e){return O.useMemo(()=>{const n=ox();return sx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function _U(t,e){const n=t.style||{},r={};return bI(r,n,t),Object.assign(r,xU(t,e)),r}function wU(t,e){const n={},r=_U(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function EU(t,e,n,r){const s=O.useMemo(()=>{const o=fI();return ax(o,e,lx(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};bI(o,t.style,t),s.style={...o,...s.style}}return s}function TU(t=!1){return(n,r,s,{latestValues:o},u)=>{const h=(tx(n)?EU:wU)(r,o,u,n),f=UL(r,typeof n=="string",t),v=n!==O.Fragment?{...f,...h,ref:s}:{},{children:b}=r,x=O.useMemo(()=>pr(b)?b.get():b,[b]);return O.createElement(n,{...v,children:x})}}function SU(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const u={...tx(r)?yU:bU,preloadedFeatures:t,useRender:TU(s),createVisualElement:e,Component:r};return YL(u)}}function xI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Vp(t,e,n){const r=t.getProps();return nx(r,e,n!==void 0?n:r.custom,t)}const AU=Wb(()=>window.ScrollTimeline!==void 0);class CU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(AU()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class RU extends CU{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function cx(t,e){return t?t[e]||t.default||t:void 0}const u0=2e4;function _I(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<u0;)e+=n,r=t.next(e);return e>=u0?1/0:e}function dx(t){return typeof t=="function"}function sS(t,e){t.timeline=e,t.onfinish=null}const hx=t=>Array.isArray(t)&&typeof t[0]=="number",IU={linearEasing:void 0};function NU(t,e){const n=Wb(t);return()=>{var r;return(r=IU[e])!==null&&r!==void 0?r:n()}}const Bm=NU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wI=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(gu(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function EI(t){return!!(typeof t=="function"&&Bm()||!t||typeof t=="string"&&(t in c0||Bm())||hx(t)||Array.isArray(t)&&t.every(EI))}const Uc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,c0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uc([0,.65,.55,1]),circOut:Uc([.55,0,1,.45]),backIn:Uc([.31,.01,.66,-.59]),backOut:Uc([.33,1.53,.69,.99])};function TI(t,e){if(t)return typeof t=="function"&&Bm()?wI(t,e):hx(t)?Uc(t):Array.isArray(t)?t.map(n=>TI(n,e)||c0.easeOut):c0[t]}const Ai={x:!1,y:!1};function SI(){return Ai.x||Ai.y}function kU(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function AI(t,e){const n=kU(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function aS(t){return e=>{e.pointerType==="touch"||SI()||t(e)}}function DU(t,e,n={}){const[r,s,o]=AI(t,n),u=aS(d=>{const{target:h}=d,f=e(d);if(typeof f!="function"||!h)return;const v=aS(b=>{f(b),h.removeEventListener("pointerleave",v)});h.addEventListener("pointerleave",v,s)});return r.forEach(d=>{d.addEventListener("pointerenter",u,s)}),o}const CI=(t,e)=>e?t===e?!0:CI(t,e.parentElement):!1,fx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,OU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jU(t){return OU.has(t.tagName)||t.tabIndex!==-1}const zc=new WeakSet;function oS(t){return e=>{e.key==="Enter"&&t(e)}}function ly(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const MU=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=oS(()=>{if(zc.has(n))return;ly(n,"down");const s=oS(()=>{ly(n,"up")}),o=()=>ly(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function lS(t){return fx(t)&&!SI()}function PU(t,e,n={}){const[r,s,o]=AI(t,n),u=d=>{const h=d.currentTarget;if(!lS(d)||zc.has(h))return;zc.add(h);const f=e(d),v=(E,A)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",x),!(!lS(E)||!zc.has(h))&&(zc.delete(h),typeof f=="function"&&f(E,{success:A}))},b=E=>{v(E,n.useGlobalTarget||CI(h,E.target))},x=E=>{v(E,!1)};window.addEventListener("pointerup",b,s),window.addEventListener("pointercancel",x,s)};return r.forEach(d=>{!jU(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0),(n.useGlobalTarget?window:d).addEventListener("pointerdown",u,s),d.addEventListener("focus",f=>MU(f,s),s)}),o}function VU(t){return t==="x"||t==="y"?Ai[t]?null:(Ai[t]=!0,()=>{Ai[t]=!1}):Ai.x||Ai.y?null:(Ai.x=Ai.y=!0,()=>{Ai.x=Ai.y=!1})}const RI=new Set(["width","height","top","left","right","bottom",...Iu]);let om;function LU(){om=void 0}const Zi={now:()=>(om===void 0&&Zi.set(Jn.isProcessing||OL.useManualTiming?Jn.timestamp:performance.now()),om),set:t=>{om=t,queueMicrotask(LU)}};function mx(t,e){t.indexOf(e)===-1&&t.push(e)}function px(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class gx{constructor(){this.subscriptions=[]}add(e){return mx(this.subscriptions,e),()=>px(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function II(t,e){return e?t*(1e3/e):0}const uS=30,UU=t=>!isNaN(parseFloat(t));class zU{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Zi.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Zi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gx);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>uS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,uS);return II(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ad(t,e){return new zU(t,e)}function BU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ad(n))}function FU(t,e){const n=Vp(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const u in o){const d=eU(o[u]);BU(t,u,d)}}function qU(t){return!!(pr(t)&&t.add)}function d0(t,e){const n=t.getValue("willChange");if(qU(n))return n.add(e)}function NI(t){return t.props[aI]}const kI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,HU=1e-7,GU=12;function $U(t,e,n,r,s){let o,u,d=0;do u=e+(n-e)/2,o=kI(u,r,s)-t,o>0?n=u:e=u;while(Math.abs(o)>HU&&++d<GU);return u}function Kd(t,e,n,r){if(t===e&&n===r)return ti;const s=o=>$U(o,0,1,t,n);return o=>o===0||o===1?o:kI(s(o),e,r)}const DI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,OI=t=>e=>1-t(1-e),jI=Kd(.33,1.53,.69,.99),vx=OI(jI),MI=DI(vx),PI=t=>(t*=2)<1?.5*vx(t):.5*(2-Math.pow(2,-10*(t-1))),yx=t=>1-Math.sin(Math.acos(t)),VI=OI(yx),LI=DI(yx),UI=t=>/^0[^.\s]+$/u.test(t);function KU(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||UI(t):!0}const ed=t=>Math.round(t*1e5)/1e5,bx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function YU(t){return t==null}const QU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xx=(t,e)=>n=>!!(typeof n=="string"&&QU.test(n)&&n.startsWith(t)||e&&!YU(n)&&Object.prototype.hasOwnProperty.call(n,e)),zI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,u,d]=r.match(bx);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},WU=t=>Ps(0,255,t),uy={...Nu,transform:t=>Math.round(WU(t))},Oo={test:xx("rgb","red"),parse:zI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+uy.transform(t)+", "+uy.transform(e)+", "+uy.transform(n)+", "+ed(Sd.transform(r))+")"};function XU(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const h0={test:xx("#"),parse:XU,transform:Oo.transform},Ql={test:xx("hsl","hue"),parse:zI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ji.transform(ed(e))+", "+Ji.transform(ed(n))+", "+ed(Sd.transform(r))+")"},dr={test:t=>Oo.test(t)||h0.test(t)||Ql.test(t),parse:t=>Oo.test(t)?Oo.parse(t):Ql.test(t)?Ql.parse(t):h0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Oo.transform(t):Ql.transform(t)},JU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ZU(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bx))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(JU))===null||n===void 0?void 0:n.length)||0)>0}const BI="number",FI="color",e9="var",t9="var(",cS="${}",n9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const d=e.replace(n9,h=>(dr.test(h)?(r.color.push(o),s.push(FI),n.push(dr.parse(h))):h.startsWith(t9)?(r.var.push(o),s.push(e9),n.push(h)):(r.number.push(o),s.push(BI),n.push(parseFloat(h))),++o,cS)).split(cS);return{values:n,split:d,indexes:r,types:s}}function qI(t){return Cd(t).values}function HI(t){const{split:e,types:n}=Cd(t),r=e.length;return s=>{let o="";for(let u=0;u<r;u++)if(o+=e[u],s[u]!==void 0){const d=n[u];d===BI?o+=ed(s[u]):d===FI?o+=dr.transform(s[u]):o+=s[u]}return o}}const r9=t=>typeof t=="number"?0:t;function i9(t){const e=qI(t);return HI(t)(e.map(r9))}const Ha={test:ZU,parse:qI,createTransformer:HI,getAnimatableNone:i9},s9=new Set(["brightness","contrast","saturate","opacity"]);function a9(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bx)||[];if(!r)return t;const s=n.replace(r,"");let o=s9.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const o9=/\b([a-z-]*)\(.*?\)/gu,f0={...Ha,getAnimatableNone:t=>{const e=t.match(o9);return e?e.map(a9).join(" "):t}},l9={...ix,color:dr,backgroundColor:dr,outlineColor:dr,fill:dr,stroke:dr,borderColor:dr,borderTopColor:dr,borderRightColor:dr,borderBottomColor:dr,borderLeftColor:dr,filter:f0,WebkitFilter:f0},_x=t=>l9[t];function GI(t,e){let n=_x(t);return n!==f0&&(n=Ha),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const u9=new Set(["auto","none","0"]);function c9(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!u9.has(o)&&Cd(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=GI(n,s)}const dS=t=>t===Nu||t===Me,hS=(t,e)=>parseFloat(t.split(", ")[e]),fS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return hS(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?hS(o[1],t):0}},d9=new Set(["x","y","z"]),h9=Iu.filter(t=>!d9.has(t));function f9(t){const e=[];return h9.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:fS(4,13),y:fS(5,14)};yu.translateX=yu.x;yu.translateY=yu.y;const Po=new Set;let m0=!1,p0=!1;function $I(){if(p0){const t=Array.from(Po).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=f9(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,u])=>{var d;(d=r.getValue(o))===null||d===void 0||d.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}p0=!1,m0=!1,Po.forEach(t=>t.complete()),Po.clear()}function KI(){Po.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(p0=!0)})}function m9(){KI(),$I()}class wx{constructor(e,n,r,s,o,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Po.add(this),m0||(m0=!0,Ht.read(KI),Ht.resolveKeyframes($I))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const u=s==null?void 0:s.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const h=r.readValue(n,d);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=d),s&&u===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Po.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Po.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const YI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),p9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g9(t){const e=p9.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function QI(t,e,n=1){const[r,s]=g9(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return YI(u)?parseFloat(u):u}return rx(s)?QI(s,e,n+1):s}const WI=t=>e=>e.test(t),v9={test:t=>t==="auto",parse:t=>t},XI=[Nu,Me,Ji,xa,aU,sU,v9],mS=t=>XI.find(WI(t));class JI extends wx{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),rx(f))){const v=QI(f,n.current);v!==void 0&&(e[h]=v),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!RI.has(r)||e.length!==2)return;const[s,o]=e,u=mS(s),d=mS(o);if(u!==d)if(dS(u)&&dS(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)KU(e[s])&&r.push(s);r.length&&c9(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const u=s.length-1,d=s[u];s[u]=yu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,f])=>{n.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const pS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ha.test(t)||t==="0")&&!t.startsWith("url("));function y9(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function b9(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=pS(s,e),d=pS(o,e);return!u||!d?!1:y9(t)||(n==="spring"||dx(n))&&r}const x9=t=>t!==null;function Lp(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(x9),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const _9=40;class ZI{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:u="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Zi.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:u,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>_9?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&m9(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Zi.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:u,onComplete:d,onUpdate:h,isGenerator:f}=this.options;if(!f&&!b9(e,r,s,o))if(u)this.options.duration=0;else{h&&h(Lp(e,this.options,n)),d&&d(),this.resolveFinishedPromise();return}const v=this.initPlayback(e,n);v!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...v},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Xt=(t,e,n)=>t+(e-t)*n;function cy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function w9({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,u=0;if(!e)s=o=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;s=cy(h,d,t+1/3),o=cy(h,d,t),u=cy(h,d,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}function Fm(t,e){return n=>n>0?e:t}const dy=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},E9=[h0,Oo,Ql],T9=t=>E9.find(e=>e.test(t));function gS(t){const e=T9(t);if(!e)return!1;let n=e.parse(t);return e===Ql&&(n=w9(n)),n}const vS=(t,e)=>{const n=gS(t),r=gS(e);if(!n||!r)return Fm(t,e);const s={...n};return o=>(s.red=dy(n.red,r.red,o),s.green=dy(n.green,r.green,o),s.blue=dy(n.blue,r.blue,o),s.alpha=Xt(n.alpha,r.alpha,o),Oo.transform(s))},S9=(t,e)=>n=>e(t(n)),Yd=(...t)=>t.reduce(S9),g0=new Set(["none","hidden"]);function A9(t,e){return g0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function C9(t,e){return n=>Xt(t,e,n)}function Ex(t){return typeof t=="number"?C9:typeof t=="string"?rx(t)?Fm:dr.test(t)?vS:N9:Array.isArray(t)?eN:typeof t=="object"?dr.test(t)?vS:R9:Fm}function eN(t,e){const n=[...t],r=n.length,s=t.map((o,u)=>Ex(o)(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=s[u](o);return n}}function R9(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Ex(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function I9(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const u=e.types[o],d=t.indexes[u][s[u]],h=(n=t.values[d])!==null&&n!==void 0?n:0;r[o]=h,s[u]++}return r}const N9=(t,e)=>{const n=Ha.createTransformer(e),r=Cd(t),s=Cd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?g0.has(t)&&!s.values.length||g0.has(e)&&!r.values.length?A9(t,e):Yd(eN(I9(r,s),s.values),n):Fm(t,e)};function tN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xt(t,e,n):Ex(t)(t,e)}const k9=5;function nN(t,e,n){const r=Math.max(e-k9,0);return II(n-t(r),e-r)}const rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hy=.001;function D9({duration:t=rn.duration,bounce:e=rn.bounce,velocity:n=rn.velocity,mass:r=rn.mass}){let s,o,u=1-e;u=Ps(rn.minDamping,rn.maxDamping,u),t=Ps(rn.minDuration,rn.maxDuration,Ns(t)),u<1?(s=f=>{const v=f*u,b=v*t,x=v-n,E=v0(f,u),A=Math.exp(-b);return hy-x/E*A},o=f=>{const b=f*u*t,x=b*n+n,E=Math.pow(u,2)*Math.pow(f,2)*t,A=Math.exp(-b),D=v0(Math.pow(f,2),u);return(-s(f)+hy>0?-1:1)*((x-E)*A)/D}):(s=f=>{const v=Math.exp(-f*t),b=(f-n)*t+1;return-hy+v*b},o=f=>{const v=Math.exp(-f*t),b=(n-f)*(t*t);return v*b});const d=5/t,h=j9(s,o,d);if(t=Is(t),isNaN(h))return{stiffness:rn.stiffness,damping:rn.damping,duration:t};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:u*2*Math.sqrt(r*f),duration:t}}}const O9=12;function j9(t,e,n){let r=n;for(let s=1;s<O9;s++)r=r-t(r)/e(r);return r}function v0(t,e){return t*Math.sqrt(1-e*e)}const M9=["duration","bounce"],P9=["stiffness","damping","mass"];function yS(t,e){return e.some(n=>t[n]!==void 0)}function V9(t){let e={velocity:rn.velocity,stiffness:rn.stiffness,damping:rn.damping,mass:rn.mass,isResolvedFromDuration:!1,...t};if(!yS(t,P9)&&yS(t,M9))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Ps(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:rn.mass,stiffness:s,damping:o}}else{const n=D9(t);e={...e,...n,mass:rn.mass},e.isResolvedFromDuration=!0}return e}function rN(t=rn.visualDuration,e=rn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],d={done:!1,value:o},{stiffness:h,damping:f,mass:v,duration:b,velocity:x,isResolvedFromDuration:E}=V9({...n,velocity:-Ns(n.velocity||0)}),A=x||0,D=f/(2*Math.sqrt(h*v)),M=u-o,U=Ns(Math.sqrt(h/v)),j=Math.abs(M)<5;r||(r=j?rn.restSpeed.granular:rn.restSpeed.default),s||(s=j?rn.restDelta.granular:rn.restDelta.default);let z;if(D<1){const $=v0(U,D);z=q=>{const C=Math.exp(-D*U*q);return u-C*((A+D*U*M)/$*Math.sin($*q)+M*Math.cos($*q))}}else if(D===1)z=$=>u-Math.exp(-U*$)*(M+(A+U*M)*$);else{const $=U*Math.sqrt(D*D-1);z=q=>{const C=Math.exp(-D*U*q),S=Math.min($*q,300);return u-C*((A+D*U*M)*Math.sinh(S)+$*M*Math.cosh(S))/$}}const G={calculatedDuration:E&&b||null,next:$=>{const q=z($);if(E)d.done=$>=b;else{let C=0;D<1&&(C=$===0?Is(A):nN(z,$,q));const S=Math.abs(C)<=r,I=Math.abs(u-q)<=s;d.done=S&&I}return d.value=d.done?u:q,d},toString:()=>{const $=Math.min(_I(G),u0),q=wI(C=>G.next($*C).value,$,30);return $+"ms "+q}};return G}function bS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:u,min:d,max:h,restDelta:f=.5,restSpeed:v}){const b=t[0],x={done:!1,value:b},E=S=>d!==void 0&&S<d||h!==void 0&&S>h,A=S=>d===void 0?h:h===void 0||Math.abs(d-S)<Math.abs(h-S)?d:h;let D=n*e;const M=b+D,U=u===void 0?M:u(M);U!==M&&(D=U-b);const j=S=>-D*Math.exp(-S/r),z=S=>U+j(S),G=S=>{const I=j(S),V=z(S);x.done=Math.abs(I)<=f,x.value=x.done?U:V};let $,q;const C=S=>{E(x.value)&&($=S,q=rN({keyframes:[x.value,A(x.value)],velocity:nN(z,S,x.value),damping:s,stiffness:o,restDelta:f,restSpeed:v}))};return C(0),{calculatedDuration:null,next:S=>{let I=!1;return!q&&$===void 0&&(I=!0,G(S),C(S)),$!==void 0&&S>=$?q.next(S-$):(!I&&G(S),x)}}}const L9=Kd(.42,0,1,1),U9=Kd(0,0,.58,1),iN=Kd(.42,0,.58,1),z9=t=>Array.isArray(t)&&typeof t[0]!="number",B9={linear:ti,easeIn:L9,easeInOut:iN,easeOut:U9,circIn:yx,circInOut:LI,circOut:VI,backIn:vx,backInOut:MI,backOut:jI,anticipate:PI},xS=t=>{if(hx(t)){tI(t.length===4);const[e,n,r,s]=t;return Kd(e,n,r,s)}else if(typeof t=="string")return B9[t];return t};function F9(t,e,n){const r=[],s=n||tN,o=t.length-1;for(let u=0;u<o;u++){let d=s(t[u],t[u+1]);if(e){const h=Array.isArray(e)?e[u]||ti:e;d=Yd(h,d)}r.push(d)}return r}function q9(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(tI(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=F9(e,r,s),h=d.length,f=v=>{if(u&&v<t[0])return e[0];let b=0;if(h>1)for(;b<t.length-2&&!(v<t[b+1]);b++);const x=gu(t[b],t[b+1],v);return d[b](x)};return n?v=>f(Ps(t[0],t[o-1],v)):f}function H9(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=gu(0,e,r);t.push(Xt(n,1,s))}}function G9(t){const e=[0];return H9(e,t.length-1),e}function $9(t,e){return t.map(n=>n*e)}function K9(t,e){return t.map(()=>e||iN).splice(0,t.length-1)}function qm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=z9(r)?r.map(xS):xS(r),o={done:!1,value:e[0]},u=$9(n&&n.length===e.length?n:G9(e),t),d=q9(u,e,{ease:Array.isArray(s)?s:K9(e,s)});return{calculatedDuration:t,next:h=>(o.value=d(h),o.done=h>=t,o)}}const Y9=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ht.update(e,!0),stop:()=>qa(e),now:()=>Jn.isProcessing?Jn.timestamp:Zi.now()}},Q9={decay:bS,inertia:bS,tween:qm,keyframes:qm,spring:rN},W9=t=>t/100;class Tx extends ZI{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,u=(s==null?void 0:s.KeyframeResolver)||wx,d=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new u(o,d,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:u=0}=this.options,d=dx(n)?n:Q9[n]||qm;let h,f;d!==qm&&typeof e[0]!="number"&&(h=Yd(W9,tN(e[0],e[1])),e=[0,100]);const v=d({...this.options,keyframes:e});o==="mirror"&&(f=d({...this.options,keyframes:[...e].reverse(),velocity:-u})),v.calculatedDuration===null&&(v.calculatedDuration=_I(v));const{calculatedDuration:b}=v,x=b+s,E=x*(r+1)-s;return{generator:v,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:b,resolvedDuration:x,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:u,mapPercentToKeyframes:d,keyframes:h,calculatedDuration:f,totalDuration:v,resolvedDuration:b}=r;if(this.startTime===null)return o.next(0);const{delay:x,repeat:E,repeatType:A,repeatDelay:D,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-v/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const U=this.currentTime-x*(this.speed>=0?1:-1),j=this.speed>=0?U<0:U>v;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=v);let z=this.currentTime,G=o;if(E){const S=Math.min(this.currentTime,v)/b;let I=Math.floor(S),V=S%1;!V&&S>=1&&(V=1),V===1&&I--,I=Math.min(I,E+1),!!(I%2)&&(A==="reverse"?(V=1-V,D&&(V-=D/b)):A==="mirror"&&(G=u)),z=Ps(0,1,V)*b}const $=j?{done:!1,value:h[0]}:G.next(z);d&&($.value=d($.value));let{done:q}=$;!j&&f!==null&&(q=this.speed>=0?this.currentTime>=v:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return C&&s!==void 0&&($.value=Lp(h,this.options,s)),M&&M($.value),C&&this.finish(),$}get duration(){const{resolved:e}=this;return e?Ns(e.calculatedDuration):0}get time(){return Ns(this.currentTime)}set time(e){e=Is(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ns(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Y9,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const X9=new Set(["opacity","clipPath","filter","transform"]);function J9(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:u="loop",ease:d="easeInOut",times:h}={}){const f={[e]:n};h&&(f.offset=h);const v=TI(d,s);return Array.isArray(v)&&(f.easing=v),t.animate(f,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}const Z9=Wb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Hm=10,e8=2e4;function t8(t){return dx(t.type)||t.type==="spring"||!EI(t.ease)}function n8(t,e){const n=new Tx({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<e8;)r=n.sample(o),s.push(r.value),o+=Hm;return{times:void 0,keyframes:s,duration:o-Hm,ease:"linear"}}const sN={anticipate:PI,backInOut:MI,circInOut:LI};function r8(t){return t in sN}class _S extends ZI{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new JI(o,(u,d)=>this.onKeyframesResolved(u,d),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:u,motionValue:d,name:h,startTime:f}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof o=="string"&&Bm()&&r8(o)&&(o=sN[o]),t8(this.options)){const{onComplete:b,onUpdate:x,motionValue:E,element:A,...D}=this.options,M=n8(e,D);e=M.keyframes,e.length===1&&(e[1]=e[0]),r=M.duration,s=M.times,o=M.ease,u="keyframes"}const v=J9(d.owner.current,h,e,{...this.options,duration:r,times:s,ease:o});return v.startTime=f??this.calcStartTime(),this.pendingTimeline?(sS(v,this.pendingTimeline),this.pendingTimeline=void 0):v.onfinish=()=>{const{onComplete:b}=this.options;d.set(Lp(e,this.options,n)),b&&b(),this.cancel(),this.resolveFinishedPromise()},{animation:v,duration:r,times:s,type:u,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ns(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ns(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Is(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ti;const{animation:r}=n;sS(r,e)}return ti}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:u,times:d}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:v,onComplete:b,element:x,...E}=this.options,A=new Tx({...E,keyframes:r,duration:s,type:o,ease:u,times:d,isGenerator:!0}),D=Is(this.time);f.setWithVelocity(A.sample(D-Hm).value,A.sample(D).value,Hm)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:u,type:d}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=n.owner.getProps();return Z9()&&r&&X9.has(r)&&!h&&!f&&!s&&o!=="mirror"&&u!==0&&d!=="inertia"}}const i8={type:"spring",stiffness:500,damping:25,restSpeed:10},s8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),a8={type:"keyframes",duration:.8},o8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l8=(t,{keyframes:e})=>e.length>2?a8:Zo.has(t)?t.startsWith("scale")?s8(e[1]):i8:o8;function u8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:u,repeatDelay:d,from:h,elapsed:f,...v}){return!!Object.keys(v).length}const Sx=(t,e,n,r={},s,o)=>u=>{const d=cx(r,t)||{},h=d.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Is(h);let v={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:o?void 0:s};u8(d)||(v={...v,...l8(t,v)}),v.duration&&(v.duration=Is(v.duration)),v.repeatDelay&&(v.repeatDelay=Is(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let b=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(v.duration=0,v.delay===0&&(b=!0)),b&&!o&&e.get()!==void 0){const x=Lp(v.keyframes,d);if(x!==void 0)return Ht.update(()=>{v.onUpdate(x),v.onComplete()}),new RU([])}return!o&&_S.supports(v)?new _S(v):new Tx(v)};function c8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function aN(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var o;let{transition:u=t.getDefaultTransition(),transitionEnd:d,...h}=e;r&&(u=r);const f=[],v=s&&t.animationState&&t.animationState.getState()[s];for(const b in h){const x=t.getValue(b,(o=t.latestValues[b])!==null&&o!==void 0?o:null),E=h[b];if(E===void 0||v&&c8(v,b))continue;const A={delay:n,...cx(u||{},b)};let D=!1;if(window.MotionHandoffAnimation){const U=NI(t);if(U){const j=window.MotionHandoffAnimation(U,b,Ht);j!==null&&(A.startTime=j,D=!0)}}d0(t,b),x.start(Sx(b,x,E,t.shouldReduceMotion&&RI.has(b)?{type:!1}:A,t,D));const M=x.animation;M&&f.push(M)}return d&&Promise.all(f).then(()=>{Ht.update(()=>{d&&FU(t,d)})}),f}function y0(t,e,n={}){var r;const s=Vp(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const u=s?()=>Promise.all(aN(t,s,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:v=0,staggerChildren:b,staggerDirection:x}=o;return d8(t,e,v+f,b,x,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,v]=h==="beforeChildren"?[u,d]:[d,u];return f().then(()=>v())}else return Promise.all([u(),d(n.delay)])}function d8(t,e,n=0,r=0,s=1,o){const u=[],d=(t.variantChildren.size-1)*r,h=s===1?(f=0)=>f*r:(f=0)=>d-f*r;return Array.from(t.variantChildren).sort(h8).forEach((f,v)=>{f.notify("AnimationStart",e),u.push(y0(f,e,{...o,delay:n+h(v)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(u)}function h8(t,e){return t.sortNodePosition(e)}function f8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>y0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=y0(t,e,n);else{const s=typeof e=="function"?Vp(t,e,n.custom):e;r=Promise.all(aN(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const m8=Jb.length;function oN(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?oN(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<m8;n++){const r=Jb[n],s=t.props[r];(Td(s)||s===!1)&&(e[r]=s)}return e}const p8=[...Xb].reverse(),g8=Xb.length;function v8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>f8(t,n,r)))}function y8(t){let e=v8(t),n=wS(),r=!0;const s=h=>(f,v)=>{var b;const x=Vp(t,v,h==="exit"?(b=t.presenceContext)===null||b===void 0?void 0:b.custom:void 0);if(x){const{transition:E,transitionEnd:A,...D}=x;f={...f,...D,...A}}return f};function o(h){e=h(t)}function u(h){const{props:f}=t,v=oN(t.parent)||{},b=[],x=new Set;let E={},A=1/0;for(let M=0;M<g8;M++){const U=p8[M],j=n[U],z=f[U]!==void 0?f[U]:v[U],G=Td(z),$=U===h?j.isActive:null;$===!1&&(A=M);let q=z===v[U]&&z!==f[U]&&G;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),j.protectedKeys={...E},!j.isActive&&$===null||!z&&!j.prevProp||Mp(z)||typeof z=="boolean")continue;const C=b8(j.prevProp,z);let S=C||U===h&&j.isActive&&!q&&G||M>A&&G,I=!1;const V=Array.isArray(z)?z:[z];let P=V.reduce(s(U),{});$===!1&&(P={});const{prevResolvedValues:L={}}=j,N={...L,...P},be=se=>{S=!0,x.has(se)&&(I=!0,x.delete(se)),j.needsAnimating[se]=!0;const he=t.getValue(se);he&&(he.liveStyle=!1)};for(const se in N){const he=P[se],we=L[se];if(E.hasOwnProperty(se))continue;let Ee=!1;l0(he)&&l0(we)?Ee=!xI(he,we):Ee=he!==we,Ee?he!=null?be(se):x.add(se):he!==void 0&&x.has(se)?be(se):j.protectedKeys[se]=!0}j.prevProp=z,j.prevResolvedValues=P,j.isActive&&(E={...E,...P}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(q&&C)||I)&&b.push(...V.map(se=>({animation:se,options:{type:U}})))}if(x.size){const M={};x.forEach(U=>{const j=t.getBaseTarget(U),z=t.getValue(U);z&&(z.liveStyle=!0),M[U]=j??null}),b.push({animation:M})}let D=!!b.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(b):Promise.resolve()}function d(h,f){var v;if(n[h].isActive===f)return Promise.resolve();(v=t.variantChildren)===null||v===void 0||v.forEach(x=>{var E;return(E=x.animationState)===null||E===void 0?void 0:E.setActive(h,f)}),n[h].isActive=f;const b=u(h);for(const x in n)n[x].protectedKeys={};return b}return{animateChanges:u,setActive:d,setAnimateFunction:o,getState:()=>n,reset:()=>{n=wS(),r=!0}}}function b8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xI(e,t):!1}function To(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wS(){return{animate:To(!0),whileInView:To(),whileHover:To(),whileTap:To(),whileDrag:To(),whileFocus:To(),exit:To()}}class Xa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class x8 extends Xa{constructor(e){super(e),e.animationState||(e.animationState=y8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let _8=0;class w8 extends Xa{constructor(){super(...arguments),this.id=_8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const E8={animation:{Feature:x8},exit:{Feature:w8}};function Rd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Qd(t){return{point:{x:t.pageX,y:t.pageY}}}const T8=t=>e=>fx(e)&&t(e,Qd(e));function td(t,e,n,r){return Rd(t,e,T8(n),r)}const ES=(t,e)=>Math.abs(t-e);function S8(t,e){const n=ES(t.x,e.x),r=ES(t.y,e.y);return Math.sqrt(n**2+r**2)}class lN{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=my(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,E=S8(b.offset,{x:0,y:0})>=3;if(!x&&!E)return;const{point:A}=b,{timestamp:D}=Jn;this.history.push({...A,timestamp:D});const{onStart:M,onMove:U}=this.handlers;x||(M&&M(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,b)},this.handlePointerMove=(b,x)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=fy(x,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(b,x)=>{this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=my(b.type==="pointercancel"?this.lastMoveEventInfo:fy(x,this.transformPagePoint),this.history);this.startEvent&&E&&E(b,M),A&&A(b,M)},!fx(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const u=Qd(e),d=fy(u,this.transformPagePoint),{point:h}=d,{timestamp:f}=Jn;this.history=[{...h,timestamp:f}];const{onSessionStart:v}=n;v&&v(e,my(d,this.history)),this.removeListeners=Yd(td(this.contextWindow,"pointermove",this.handlePointerMove),td(this.contextWindow,"pointerup",this.handlePointerUp),td(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qa(this.updatePoint)}}function fy(t,e){return e?{point:e(t.point)}:t}function TS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function my({point:t},e){return{point:t,delta:TS(t,uN(e)),offset:TS(t,A8(e)),velocity:C8(e,.1)}}function A8(t){return t[0]}function uN(t){return t[t.length-1]}function C8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=uN(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Is(e)));)n--;if(!r)return{x:0,y:0};const o=Ns(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const cN=1e-4,R8=1-cN,I8=1+cN,dN=.01,N8=0-dN,k8=0+dN;function ni(t){return t.max-t.min}function D8(t,e,n){return Math.abs(t-e)<=n}function SS(t,e,n,r=.5){t.origin=r,t.originPoint=Xt(e.min,e.max,t.origin),t.scale=ni(n)/ni(e),t.translate=Xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=R8&&t.scale<=I8||isNaN(t.scale))&&(t.scale=1),(t.translate>=N8&&t.translate<=k8||isNaN(t.translate))&&(t.translate=0)}function nd(t,e,n,r){SS(t.x,e.x,n.x,r?r.originX:void 0),SS(t.y,e.y,n.y,r?r.originY:void 0)}function AS(t,e,n){t.min=n.min+e.min,t.max=t.min+ni(e)}function O8(t,e,n){AS(t.x,e.x,n.x),AS(t.y,e.y,n.y)}function CS(t,e,n){t.min=e.min-n.min,t.max=t.min+ni(e)}function rd(t,e,n){CS(t.x,e.x,n.x),CS(t.y,e.y,n.y)}function j8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Xt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Xt(n,t,r.max):Math.min(t,n)),t}function RS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function M8(t,{top:e,left:n,bottom:r,right:s}){return{x:RS(t.x,n,s),y:RS(t.y,e,r)}}function IS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function P8(t,e){return{x:IS(t.x,e.x),y:IS(t.y,e.y)}}function V8(t,e){let n=.5;const r=ni(t),s=ni(e);return s>r?n=gu(e.min,e.max-r,t.min):r>s&&(n=gu(t.min,t.max-s,e.min)),Ps(0,1,n)}function L8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const b0=.35;function U8(t=b0){return t===!1?t=0:t===!0&&(t=b0),{x:NS(t,"left","right"),y:NS(t,"top","bottom")}}function NS(t,e,n){return{min:kS(t,e),max:kS(t,n)}}function kS(t,e){return typeof t=="number"?t:t[e]||0}const DS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wl=()=>({x:DS(),y:DS()}),OS=()=>({min:0,max:0}),dn=()=>({x:OS(),y:OS()});function gi(t){return[t("x"),t("y")]}function hN({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function z8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function B8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function py(t){return t===void 0||t===1}function x0({scale:t,scaleX:e,scaleY:n}){return!py(t)||!py(e)||!py(n)}function Ro(t){return x0(t)||fN(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function fN(t){return jS(t.x)||jS(t.y)}function jS(t){return t&&t!=="0%"}function Gm(t,e,n){const r=t-n,s=e*r;return n+s}function MS(t,e,n,r,s){return s!==void 0&&(t=Gm(t,s,r)),Gm(t,n,r)+e}function _0(t,e=0,n=1,r,s){t.min=MS(t.min,e,n,r,s),t.max=MS(t.max,e,n,r,s)}function mN(t,{x:e,y:n}){_0(t.x,e.translate,e.scale,e.originPoint),_0(t.y,n.translate,n.scale,n.originPoint)}const PS=.999999999999,VS=1.0000000000001;function F8(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,u;for(let d=0;d<s;d++){o=n[d],u=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Jl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,mN(t,u)),r&&Ro(o.latestValues)&&Jl(t,o.latestValues))}e.x<VS&&e.x>PS&&(e.x=1),e.y<VS&&e.y>PS&&(e.y=1)}function Xl(t,e){t.min=t.min+e,t.max=t.max+e}function LS(t,e,n,r,s=.5){const o=Xt(t.min,t.max,s);_0(t,e,n,o,r)}function Jl(t,e){LS(t.x,e.x,e.scaleX,e.scale,e.originX),LS(t.y,e.y,e.scaleY,e.scale,e.originY)}function pN(t,e){return hN(B8(t.getBoundingClientRect(),e))}function q8(t,e,n){const r=pN(t,n),{scroll:s}=e;return s&&(Xl(r.x,s.offset.x),Xl(r.y,s.offset.y)),r}const gN=({current:t})=>t?t.ownerDocument.defaultView:null,H8=new WeakMap;class G8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=v=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qd(v).point)},o=(v,b)=>{const{drag:x,dragPropagation:E,onDragStart:A}=this.getProps();if(x&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VU(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gi(M=>{let U=this.getAxisMotionValue(M).get()||0;if(Ji.test(U)){const{projection:j}=this.visualElement;if(j&&j.layout){const z=j.layout.layoutBox[M];z&&(U=ni(z)*(parseFloat(U)/100))}}this.originPoint[M]=U}),A&&Ht.postRender(()=>A(v,b)),d0(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},u=(v,b)=>{const{dragPropagation:x,dragDirectionLock:E,onDirectionLock:A,onDrag:D}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:M}=b;if(E&&this.currentDirection===null){this.currentDirection=$8(M),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",b.point,M),this.updateAxis("y",b.point,M),this.visualElement.render(),D&&D(v,b)},d=(v,b)=>this.stop(v,b),h=()=>gi(v=>{var b;return this.getAnimationState(v)==="paused"&&((b=this.getAxisMotionValue(v).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new lN(e,{onSessionStart:s,onStart:o,onMove:u,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:gN(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Ht.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!kf(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=j8(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Yl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=M8(s.layoutBox,n):this.constraints=!1,this.elastic=U8(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&gi(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=L8(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=q8(r,s.root,this.visualElement.getTransformPagePoint());let u=P8(s.layout.layoutBox,o);if(n){const d=n(z8(u));this.hasMutatedConstraints=!!d,d&&(u=hN(d))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=gi(v=>{if(!kf(v,n,this.currentDirection))return;let b=h&&h[v]||{};u&&(b={min:0,max:0});const x=s?200:1e6,E=s?40:1e7,A={type:"inertia",velocity:r?e[v]:0,bounceStiffness:x,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...b};return this.startAxisValueAnimation(v,A)});return Promise.all(f).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return d0(this.visualElement,e),r.start(Sx(e,r,0,n,this.visualElement,!1))}stopAnimation(){gi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){gi(n=>{const{drag:r}=this.getProps();if(!kf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:u,max:d}=s.layout.layoutBox[n];o.set(e[n]-Xt(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};gi(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const h=d.get();s[u]=V8({min:h,max:h},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gi(u=>{if(!kf(u,e,null))return;const d=this.getAxisMotionValue(u),{min:h,max:f}=this.constraints[u];d.set(Xt(h,f,s[u]))})}addListeners(){if(!this.visualElement.current)return;H8.set(this.visualElement,this);const e=this.visualElement.current,n=td(e,"pointerdown",h=>{const{drag:f,dragListener:v=!0}=this.getProps();f&&v&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Yl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ht.read(r);const u=Rd(window,"resize",()=>this.scalePositionWithinConstraints()),d=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(gi(v=>{const b=this.getAxisMotionValue(v);b&&(this.originPoint[v]+=h[v].translate,b.set(b.get()+h[v].translate))}),this.visualElement.render())}));return()=>{u(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:u=b0,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:u,dragMomentum:d}}}function kf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class K8 extends Xa{constructor(e){super(e),this.removeGroupControls=ti,this.removeListeners=ti,this.controls=new G8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const US=t=>(e,n)=>{t&&Ht.postRender(()=>t(e,n))};class Y8 extends Xa{constructor(){super(...arguments),this.removePointerDownListener=ti}onPointerDown(e){this.session=new lN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:US(e),onStart:US(n),onMove:r,onEnd:(o,u)=>{delete this.session,s&&Ht.postRender(()=>s(o,u))}}}mount(){this.removePointerDownListener=td(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Me.test(t))t=parseFloat(t);else return t;const n=zS(t,e.target.x),r=zS(t,e.target.y);return`${n}% ${r}%`}},Q8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ha.parse(t);if(s.length>5)return r;const o=Ha.createTransformer(t),u=typeof s[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;s[0+u]/=d,s[1+u]/=h;const f=Xt(d,h,.5);return typeof s[2+u]=="number"&&(s[2+u]/=f),typeof s[3+u]=="number"&&(s[3+u]/=f),o(s)}};class W8 extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;gU(X8),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),lm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,s||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Ht.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ex.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vN(t){const[e,n]=ZR(),r=O.useContext($b);return g.jsx(W8,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(oI),isPresent:e,safeToRemove:n})}const X8={borderRadius:{...Cc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cc,borderTopRightRadius:Cc,borderBottomLeftRadius:Cc,borderBottomRightRadius:Cc,boxShadow:Q8};function J8(t,e,n){const r=pr(t)?t:Ad(t);return r.start(Sx("",r,e,n)),r.animation}function Z8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const ez=(t,e)=>t.depth-e.depth;class tz{constructor(){this.children=[],this.isDirty=!1}add(e){mx(this.children,e),this.isDirty=!0}remove(e){px(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ez),this.isDirty=!1,this.children.forEach(e)}}function nz(t,e){const n=Zi.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(qa(r),t(o-e))};return Ht.read(r,!0),()=>qa(r)}const yN=["TopLeft","TopRight","BottomLeft","BottomRight"],rz=yN.length,BS=t=>typeof t=="string"?parseFloat(t):t,FS=t=>typeof t=="number"||Me.test(t);function iz(t,e,n,r,s,o){s?(t.opacity=Xt(0,n.opacity!==void 0?n.opacity:1,sz(r)),t.opacityExit=Xt(e.opacity!==void 0?e.opacity:1,0,az(r))):o&&(t.opacity=Xt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<rz;u++){const d=`border${yN[u]}Radius`;let h=qS(e,d),f=qS(n,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||FS(h)===FS(f)?(t[d]=Math.max(Xt(BS(h),BS(f),r),0),(Ji.test(f)||Ji.test(h))&&(t[d]+="%")):t[d]=f}(e.rotate||n.rotate)&&(t.rotate=Xt(e.rotate||0,n.rotate||0,r))}function qS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sz=bN(0,.5,VI),az=bN(.5,.95,ti);function bN(t,e,n){return r=>r<t?0:r>e?1:n(gu(t,e,r))}function HS(t,e){t.min=e.min,t.max=e.max}function pi(t,e){HS(t.x,e.x),HS(t.y,e.y)}function GS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function $S(t,e,n,r,s){return t-=e,t=Gm(t,1/n,r),s!==void 0&&(t=Gm(t,1/s,r)),t}function oz(t,e=0,n=1,r=.5,s,o=t,u=t){if(Ji.test(e)&&(e=parseFloat(e),e=Xt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=Xt(o.min,o.max,r);t===o&&(d-=e),t.min=$S(t.min,e,n,d,s),t.max=$S(t.max,e,n,d,s)}function KS(t,e,[n,r,s],o,u){oz(t,e[n],e[r],e[s],e.scale,o,u)}const lz=["x","scaleX","originX"],uz=["y","scaleY","originY"];function YS(t,e,n,r){KS(t.x,e,lz,n?n.x:void 0,r?r.x:void 0),KS(t.y,e,uz,n?n.y:void 0,r?r.y:void 0)}function QS(t){return t.translate===0&&t.scale===1}function xN(t){return QS(t.x)&&QS(t.y)}function WS(t,e){return t.min===e.min&&t.max===e.max}function cz(t,e){return WS(t.x,e.x)&&WS(t.y,e.y)}function XS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function _N(t,e){return XS(t.x,e.x)&&XS(t.y,e.y)}function JS(t){return ni(t.x)/ni(t.y)}function ZS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class dz{constructor(){this.members=[]}add(e){mx(this.members,e),e.scheduleRender()}remove(e){if(px(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hz(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((s||o||u)&&(r=`translate3d(${s}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:v,rotateX:b,rotateY:x,skewX:E,skewY:A}=n;f&&(r=`perspective(${f}px) ${r}`),v&&(r+=`rotate(${v}deg) `),b&&(r+=`rotateX(${b}deg) `),x&&(r+=`rotateY(${x}deg) `),E&&(r+=`skewX(${E}deg) `),A&&(r+=`skewY(${A}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(r+=`scale(${d}, ${h})`),r||"none"}const Io={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bc=typeof window<"u"&&window.MotionDebug!==void 0,gy=["","X","Y","Z"],fz={visibility:"hidden"},eA=1e3;let mz=0;function vy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function wN(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=NI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ht,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&wN(r)}function EN({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},d=e==null?void 0:e()){this.id=mz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bc&&(Io.totalNodes=Io.resolvedTargetDeltas=Io.recalculatedProjection=0),this.nodes.forEach(vz),this.nodes.forEach(wz),this.nodes.forEach(Ez),this.nodes.forEach(yz),Bc&&window.MotionDebug.record(Io)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new tz)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new gx),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const h=this.eventHandlers.get(u);h&&h.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Z8(u),this.instance=u;const{layoutId:h,layout:f,visualElement:v}=this.options;if(v&&!v.current&&v.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(f||h)&&(this.isLayoutDirty=!0),t){let b;const x=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=nz(x,250),lm.hasAnimatedSinceResize&&(lm.hasAnimatedSinceResize=!1,this.nodes.forEach(nA))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&v&&(h||f)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x,hasRelativeTargetChanged:E,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||v.getDefaultTransition()||Rz,{onLayoutAnimationStart:M,onLayoutAnimationComplete:U}=v.getProps(),j=!this.targetLayout||!_N(this.targetLayout,A)||E,z=!x&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||z||x&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,z);const G={...cx(D,"layout"),onPlay:M,onComplete:U};(v.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else x||nA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Tz),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const b=this.path[v];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tA);return}this.isUpdating||this.nodes.forEach(xz),this.isUpdating=!1,this.nodes.forEach(_z),this.nodes.forEach(pz),this.nodes.forEach(gz),this.clearAllSnapshots();const d=Zi.now();Jn.delta=Ps(0,1e3/60,d-Jn.timestamp),Jn.timestamp=d,Jn.isProcessing=!0,oy.update.process(Jn),oy.preRender.process(Jn),oy.render.process(Jn),Jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ex.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bz),this.sharedNodes.forEach(Sz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!xN(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,v=f!==this.prevTransformTemplateValue;u&&(d||Ro(this.latestValues)||v)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return u&&(h=this.removeTransform(h)),Iz(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:d}=this.options;if(!d)return dn();const h=d.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(Nz))){const{scroll:v}=this.root;v&&(Xl(h.x,v.offset.x),Xl(h.y,v.offset.y))}return h}removeElementScroll(u){var d;const h=dn();if(pi(h,u),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return h;for(let f=0;f<this.path.length;f++){const v=this.path[f],{scroll:b,options:x}=v;v!==this.root&&b&&x.layoutScroll&&(b.wasRoot&&pi(h,u),Xl(h.x,b.offset.x),Xl(h.y,b.offset.y))}return h}applyTransform(u,d=!1){const h=dn();pi(h,u);for(let f=0;f<this.path.length;f++){const v=this.path[f];!d&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Jl(h,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Ro(v.latestValues)&&Jl(h,v.latestValues)}return Ro(this.latestValues)&&Jl(h,this.latestValues),h}removeTransform(u){const d=dn();pi(d,u);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Ro(f.latestValues))continue;x0(f.latestValues)&&f.updateSnapshot();const v=dn(),b=f.measurePageBox();pi(v,b),YS(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,v)}return Ro(this.latestValues)&&YS(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:x}=this.options;if(!(!this.layout||!(b||x))){if(this.resolvedRelativeTargetAt=Jn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dn(),this.relativeTargetOrigin=dn(),rd(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dn(),this.targetWithTransforms=dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),O8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pi(this.target,this.layout.layoutBox),mN(this.target,this.targetDelta)):pi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dn(),this.relativeTargetOrigin=dn(),rd(this.relativeTargetOrigin,this.target,E.target),pi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bc&&Io.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||x0(this.parent.latestValues)||fN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),h=!!this.resumingFrom||this!==d;let f=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Jn.timestamp&&(f=!1),f)return;const{layout:v,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(v||b))return;pi(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,E=this.treeScale.y;F8(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=dn());const{target:A}=d;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GS(this.prevProjectionDelta.x,this.projectionDelta.x),GS(this.prevProjectionDelta.y,this.projectionDelta.y)),nd(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==E||!ZS(this.projectionDelta.x,this.prevProjectionDelta.x)||!ZS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),Bc&&Io.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wl(),this.projectionDelta=Wl(),this.projectionDeltaWithTransform=Wl()}setAnimationOrigin(u,d=!1){const h=this.snapshot,f=h?h.latestValues:{},v={...this.latestValues},b=Wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=dn(),E=h?h.source:void 0,A=this.layout?this.layout.source:void 0,D=E!==A,M=this.getStack(),U=!M||M.members.length<=1,j=!!(D&&!U&&this.options.crossfade===!0&&!this.path.some(Cz));this.animationProgress=0;let z;this.mixTargetDelta=G=>{const $=G/1e3;rA(b.x,u.x,$),rA(b.y,u.y,$),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rd(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Az(this.relativeTarget,this.relativeTargetOrigin,x,$),z&&cz(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=dn()),pi(z,this.relativeTarget)),D&&(this.animationValues=v,iz(v,f,this.latestValues,$,j,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{lm.hasAnimatedSinceResize=!0,this.currentAnimation=J8(0,eA,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:v}=u;if(!(!d||!h||!f)){if(this!==u&&this.layout&&f&&TN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||dn();const b=ni(this.layout.layoutBox.x);h.x.min=u.target.x.min,h.x.max=h.x.min+b;const x=ni(this.layout.layoutBox.y);h.y.min=u.target.y.min,h.y.max=h.y.min+x}pi(d,h),Jl(d,v),nd(this.projectionDeltaWithTransform,this.layoutCorrected,d,v)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new dz),this.sharedNodes.get(u).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:h}=u;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&vy("z",u,f,this.animationValues);for(let v=0;v<gy.length;v++)vy(`rotate${gy[v]}`,u,f,this.animationValues),vy(`skew${gy[v]}`,u,f,this.animationValues);u.render();for(const v in f)u.setStaticValue(v,f[v]),this.animationValues&&(this.animationValues[v]=f[v]);u.scheduleRender()}getProjectionStyles(u){var d,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fz;const f={visibility:""},v=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=am(u==null?void 0:u.pointerEvents)||"",f.transform=v?v(this.latestValues,""):"none",f;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const D={};return this.options.layoutId&&(D.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,D.pointerEvents=am(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Ro(this.latestValues)&&(D.transform=v?v({},""):"none",this.hasProjected=!1),D}const x=b.animationValues||b.latestValues;this.applyTransformsToTarget(),f.transform=hz(this.projectionDeltaWithTransform,this.treeScale,x),v&&(f.transform=v(x,f.transform));const{x:E,y:A}=this.projectionDelta;f.transformOrigin=`${E.origin*100}% ${A.origin*100}% 0`,b.animationValues?f.opacity=b===this?(h=(d=x.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:f.opacity=b===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const D in zm){if(x[D]===void 0)continue;const{correct:M,applyTo:U}=zm[D],j=f.transform==="none"?x[D]:M(x[D],b);if(U){const z=U.length;for(let G=0;G<z;G++)f[U[G]]=j}else f[D]=j}return this.options.layoutId&&(f.pointerEvents=b===this?am(u==null?void 0:u.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(tA),this.root.sharedNodes.clear()}}}function pz(t){t.updateLayout()}function gz(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?gi(b=>{const x=u?n.measuredBox[b]:n.layoutBox[b],E=ni(x);x.min=r[b].min,x.max=x.min+E}):TN(o,n.layoutBox,r)&&gi(b=>{const x=u?n.measuredBox[b]:n.layoutBox[b],E=ni(r[b]);x.max=x.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[b].max=t.relativeTarget[b].min+E)});const d=Wl();nd(d,r,n.layoutBox);const h=Wl();u?nd(h,t.applyTransform(s,!0),n.measuredBox):nd(h,r,n.layoutBox);const f=!xN(d);let v=!1;if(!t.resumeFrom){const b=t.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:x,layout:E}=b;if(x&&E){const A=dn();rd(A,n.layoutBox,x.layoutBox);const D=dn();rd(D,r,E.layoutBox),_N(A,D)||(v=!0),b.options.layoutRoot&&(t.relativeTarget=D,t.relativeTargetOrigin=A,t.relativeParent=b)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:h,layoutDelta:d,hasLayoutChanged:f,hasRelativeTargetChanged:v})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function vz(t){Bc&&Io.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function yz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bz(t){t.clearSnapshot()}function tA(t){t.clearMeasurements()}function xz(t){t.isLayoutDirty=!1}function _z(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function nA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wz(t){t.resolveTargetDelta()}function Ez(t){t.calcProjection()}function Tz(t){t.resetSkewAndRotation()}function Sz(t){t.removeLeadSnapshot()}function rA(t,e,n){t.translate=Xt(e.translate,0,n),t.scale=Xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function iA(t,e,n,r){t.min=Xt(e.min,n.min,r),t.max=Xt(e.max,n.max,r)}function Az(t,e,n,r){iA(t.x,e.x,n.x,r),iA(t.y,e.y,n.y,r)}function Cz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Rz={duration:.45,ease:[.4,0,.1,1]},sA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),aA=sA("applewebkit/")&&!sA("chrome/")?Math.round:ti;function oA(t){t.min=aA(t.min),t.max=aA(t.max)}function Iz(t){oA(t.x),oA(t.y)}function TN(t,e,n){return t==="position"||t==="preserve-aspect"&&!D8(JS(e),JS(n),.2)}function Nz(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const kz=EN({attachResizeListener:(t,e)=>Rd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yy={current:void 0},SN=EN({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!yy.current){const t=new kz({});t.mount(window),t.setOptions({layoutScroll:!0}),yy.current=t}return yy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Dz={pan:{Feature:Y8},drag:{Feature:K8,ProjectionNode:SN,MeasureLayout:vN}};function lA(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Ht.postRender(()=>o(e,Qd(e)))}class Oz extends Xa{mount(){const{current:e}=this.node;e&&(this.unmount=DU(e,n=>(lA(this.node,n,"Start"),r=>lA(this.node,r,"End"))))}unmount(){}}class jz extends Xa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yd(Rd(this.node.current,"focus",()=>this.onFocus()),Rd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uA(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Ht.postRender(()=>o(e,Qd(e)))}class Mz extends Xa{mount(){const{current:e}=this.node;e&&(this.unmount=PU(e,n=>(uA(this.node,n,"Start"),(r,{success:s})=>uA(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const w0=new WeakMap,by=new WeakMap,Pz=t=>{const e=w0.get(t.target);e&&e(t)},Vz=t=>{t.forEach(Pz)};function Lz({root:t,...e}){const n=t||document;by.has(n)||by.set(n,{});const r=by.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Vz,{root:t,...e})),r[s]}function Uz(t,e,n){const r=Lz(e);return w0.set(t,n),r.observe(t),()=>{w0.delete(t),r.unobserve(t)}}const zz={some:0,all:1};class Bz extends Xa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:zz[s]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:v,onViewportLeave:b}=this.node.getProps(),x=f?v:b;x&&x(h)};return Uz(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Fz(e,n))&&this.startObserver()}unmount(){}}function Fz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const qz={inView:{Feature:Bz},tap:{Feature:Mz},focus:{Feature:jz},hover:{Feature:Oz}},Hz={layout:{ProjectionNode:SN,MeasureLayout:vN}},E0={current:null},AN={current:!1};function Gz(){if(AN.current=!0,!!Qb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>E0.current=t.matches;t.addListener(e),e()}else E0.current=!1}const $z=[...XI,dr,Ha],Kz=t=>$z.find(WI(t)),cA=new WeakMap;function Yz(t,e,n){for(const r in e){const s=e[r],o=n[r];if(pr(s))t.addValue(r,s);else if(pr(o))t.addValue(r,Ad(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=t.getStaticValue(r);t.addValue(r,Ad(u!==void 0?u:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const dA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Qz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Zi.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,Ht.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:v}=u;this.onUpdate=v,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=Pp(n),this.isVariantNode=sI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:b,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in x){const A=x[E];h[E]!==void 0&&pr(A)&&A.set(h[E],!1)}}mount(e){this.current=e,cA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),AN.current||Gz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:E0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cA.delete(this.current),this.projection&&this.projection.unmount(),qa(this.notifyUpdate),qa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Zo.has(e),s=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vu){const n=vu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dA.length;r++){const s=dA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,u=e[o];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=Yz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ad(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(YI(s)||UI(s))?s=parseFloat(s):!Kz(s)&&Ha.test(n)&&(s=GI(e,n)),this.setBaseTarget(e,pr(s)?s.get():s)),pr(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const u=nx(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(s=u[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!pr(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class CN extends Qz{constructor(){super(...arguments),this.KeyframeResolver=JI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Wz(t){return window.getComputedStyle(t)}class Xz extends CN{constructor(){super(...arguments),this.type="html",this.renderInstance=mI}readValueFromInstance(e,n){if(Zo.has(n)){const r=_x(n);return r&&r.default||0}else{const r=Wz(e),s=(dI(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pN(e,n)}build(e,n,r){sx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ux(e,n,r)}}class Jz extends CN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zo.has(n)){const r=_x(n);return r&&r.default||0}return n=pI.has(n)?n:Zb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return yI(e,n,r)}build(e,n,r){ax(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){gI(e,n,r,s)}mount(e){this.isSVGTag=lx(e.tagName),super.mount(e)}}const Zz=(t,e)=>tx(t)?new Jz(e):new Xz(e,{allowProjection:t!==O.Fragment}),eB=SU({...E8,...qz,...Dz,...Hz},Zz),Hi=zL(eB),tB=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),nB=()=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),rB=({onGetStarted:t})=>{const e={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},n={animate:{transition:{staggerChildren:.1}}};return g.jsxs("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow overflow-x-hidden",children:[g.jsxs("nav",{className:"absolute top-0 w-full p-6 flex justify-between items-center z-50",children:[g.jsxs("div",{className:"text-2xl font-serif font-bold",children:["Dress ",g.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),g.jsx("button",{onClick:t,className:"text-sm font-semibold hover:text-gold transition-colors bg-white/10 backdrop-blur-md px-4 py-2 rounded-full border border-white/20",children:"Se connecter"})]}),g.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center text-center px-4 pt-20",children:[g.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[500px] h-[500px] bg-gold/10 rounded-full blur-[100px] pointer-events-none"}),g.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[400px] h-[400px] bg-purple-500/5 rounded-full blur-[100px] pointer-events-none"}),g.jsxs(Hi.div,{initial:"initial",animate:"animate",variants:n,className:"max-w-4xl mx-auto z-10",children:[g.jsxs(Hi.div,{variants:e,className:"mb-6 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gold/10 border border-gold/20 text-gold text-xs font-bold uppercase tracking-wider",children:[g.jsx(Ed,{}),g.jsx("span",{children:"Assistant Mode IA  Beta Prive"})]}),g.jsxs(Hi.h1,{variants:e,className:"text-5xl md:text-7xl lg:text-8xl font-serif font-bold mb-8 leading-tight",children:["Votre style, ",g.jsx("br",{}),g.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-600",children:"rinvent par l'IA."})]}),g.jsxs(Hi.p,{variants:e,className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:[`Fini le "Je n'ai rien  me mettre". `,g.jsx("strong",{children:"Dress Me Up!"})," analyse votre garde-robe, cre des tenues sur-mesure et prpare vos valises en un clic."]}),g.jsx(Hi.div,{variants:e,className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:g.jsxs("button",{onClick:t,className:"group relative px-8 py-4 bg-gold text-onyx text-lg font-bold rounded-full overflow-hidden shadow-lg shadow-gold/20 hover:shadow-gold/40 transition-all hover:scale-105 active:scale-95",children:[g.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Commencer l'exprience ",g.jsx(tB,{})]}),g.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})})]}),g.jsx(Hi.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.8,duration:1},className:"absolute left-4 md:left-20 bottom-20 hidden lg:block",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black p-4 rounded-xl shadow-2xl border border-white/10 rotate-[-6deg] max-w-xs backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("div",{className:"w-8 h-8 bg-gold rounded-full flex items-center justify-center text-onyx",children:""}),g.jsx("div",{className:"text-xs font-medium",children:"Suggestion IA"})]}),g.jsx("p",{className:"text-sm font-serif italic",children:'"Pour ce soir  Rome, opte pour la chemise en lin blanc et le pantalon beige."'})]})}),g.jsx(Hi.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1,duration:1},className:"absolute right-4 md:right-20 top-40 hidden lg:block",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black p-3 rounded-xl shadow-2xl border border-white/10 rotate-[6deg] backdrop-blur-lg bg-opacity-90 dark:bg-opacity-90",children:[g.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-2 flex items-center justify-center text-4xl",children:""}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Manteau Laine"}),g.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})]})}),g.jsxs(Hi.div,{initial:{opacity:0},animate:{opacity:1,y:[0,10,0]},transition:{opacity:{delay:1.5,duration:.6},y:{repeat:1/0,duration:1.5,ease:"easeInOut"}},className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 cursor-pointer",onClick:()=>{window.scrollTo({top:window.innerHeight,behavior:"smooth"})},children:[g.jsx("span",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider",children:"Dcouvrir"}),g.jsx("div",{className:"text-gold",children:g.jsx(nB,{})})]})]}),g.jsx("section",{className:"py-24 px-4 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-16",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold mb-4",children:"Votre dressing intelligent"}),g.jsx("p",{className:"text-gray-500 max-w-xl mx-auto",children:"Une suite d'outils puissants pour digitaliser et optimiser votre style au quotidien."})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[g.jsx(xy,{icon:g.jsx(a0,{}),title:"Digitalisez en un clair",description:"Prenez une photo, l'IA dtecte automatiquement la catgorie, la couleur et la matire. Votre garde-robe dans votre poche."}),g.jsx(xy,{icon:g.jsx(Ed,{}),title:"Styliste Personnel",description:"Une runion ? Un date ? Demandez  l'IA de crer la tenue parfaite en fonction de la mto et de l'occasion."}),g.jsx(xy,{icon:g.jsx(WR,{}),title:"Valise Optimise",description:"Partez l'esprit lger. Gnrez une liste de vtements optimise pour la dure et la destination de votre voyage."})]})]})}),g.jsx("section",{className:"py-20 px-4 text-center",children:g.jsxs("div",{className:"max-w-3xl mx-auto",children:[g.jsx("h2",{className:"text-3xl md:text-5xl font-serif font-bold mb-8",children:"Prt  upgrader votre style ?"}),g.jsx("button",{onClick:t,className:"px-10 py-4 bg-raisin-black dark:bg-snow text-snow dark:text-onyx font-bold rounded-full text-lg hover:opacity-90 transition-opacity transform hover:scale-105 duration-200",children:"Rejoindre maintenant"}),g.jsx("p",{className:"mt-8 text-sm text-gray-500",children:" 2025 Dress Me Up! - Fait avec  & IA."})]})})]})},xy=({icon:t,title:e,description:n})=>g.jsxs(Hi.div,{whileHover:{y:-5},className:"p-8 rounded-2xl bg-white dark:bg-raisin-black border border-black/5 dark:border-white/5 shadow-xl shadow-black/5 dark:shadow-black/20",children:[g.jsx("div",{className:"w-12 h-12 bg-gold/10 text-gold rounded-xl flex items-center justify-center mb-6",children:g.jsx("div",{className:"w-6 h-6",children:t})}),g.jsx("h3",{className:"text-xl font-bold mb-3",children:e}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400 leading-relaxed",children:n})]}),iB=({onAnalyze:t,isAnalyzing:e})=>{const n=O.useRef(null),[r,s]=O.useState([]),[o,u]=O.useState(!1),[d,h]=O.useState(!1);O.useEffect(()=>{const j=()=>h(window.innerWidth<1024);return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),O.useEffect(()=>()=>{r.forEach(j=>URL.revokeObjectURL(j.preview))},[r]);const f=j=>{const z=j.map(G=>({id:`${G.name}-${G.lastModified}-${Math.random()}`,file:G,preview:URL.createObjectURL(G)}));s(G=>[...G,...z])},v=j=>{j.target.files&&(f(Array.from(j.target.files)),j.target.value="")},b=()=>{var j;e||(j=n.current)==null||j.click()},x=j=>{d||(j.preventDefault(),j.stopPropagation(),u(!0))},E=j=>{d||(j.preventDefault(),j.stopPropagation(),u(!1))},A=j=>{d||(j.preventDefault(),j.stopPropagation())},D=j=>{d||(j.preventDefault(),j.stopPropagation(),u(!1),j.dataTransfer.files&&j.dataTransfer.files.length>0&&(f(Array.from(j.dataTransfer.files)),j.dataTransfer.clearData()))},M=j=>{const z=r.find(G=>G.id===j);z&&URL.revokeObjectURL(z.preview),s(G=>G.filter($=>$.id!==j))},U=()=>{r.length>0&&!e&&(t(r.map(j=>j.file)),s([]))};return g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:x,onDragLeave:E,onDragOver:A,onDrop:D,children:[g.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),g.jsxs("div",{onClick:b,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[g.jsx("input",{type:"file",ref:n,onChange:v,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),g.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?g.jsxs(g.Fragment,{children:[g.jsx(bL,{}),g.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:g.jsx(a0,{})}),g.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",g.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!d&&g.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[g.jsx("div",{className:"text-black transform-gpu scale-110",children:g.jsx(a0,{})}),g.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),r.length>0&&!e&&g.jsxs("div",{className:"mt-8",children:[g.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),g.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:r.map(j=>g.jsxs("div",{className:"relative group aspect-square",children:[g.jsx("img",{src:j.preview,alt:j.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),g.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),g.jsx("button",{onClick:()=>M(j.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:g.jsx(Hb,{})})]},j.id))}),g.jsxs("button",{onClick:U,disabled:e||r.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(Ed,{}),"Analyser les ",r.length," article(s)"]})]})]})},sB=()=>g.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),aB=({imageSrc:t,analysis:e,onClick:n,isSelected:r,isSet:s,isFavorite:o,isExcluded:u})=>g.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[g.jsx("img",{src:t,alt:e,loading:"lazy",className:`w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 ${u?"opacity-40":""}`}),g.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${r?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),u&&g.jsx("div",{className:"absolute inset-0 bg-gray-500/30 backdrop-blur-[1px] flex items-center justify-center z-5",children:g.jsx("div",{className:"bg-gray-800/80 backdrop-blur-sm rounded-full p-3",children:g.jsx(o0,{className:"w-8 h-8 text-gray-300"})})}),r?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:g.jsx(Gb,{})}):o?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:g.jsx(pu,{className:"w-4 h-4"})}):s?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:g.jsx(Dp,{})}):null,g.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:g.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})})]}),oB={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},lB=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:r,onDeleteItem:s,onCreateSet:o})=>{var B,J;const[u,d]=O.useState("Hauts"),[h,f]=O.useState(oB),[v,b]=O.useState(""),[x,E]=O.useState("favorites"),[A,D]=O.useState(!1),[M,U]=O.useState(new Set),j=O.useMemo(()=>n||[],[n]),z=O.useMemo(()=>new Set(j.flatMap(ee=>ee.itemIds||[])),[j]),G=t.length,$=[{name:"Hauts",icon:g.jsx(xL,{})},{name:"Bas",icon:g.jsx(_L,{})},{name:"Chaussures",icon:g.jsx(wL,{})},{name:"Accessoires",icon:g.jsx(EL,{})}],q=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],C=ee=>{A?U(re=>{const fe=new Set(re);return fe.has(ee.id)?fe.delete(ee.id):fe.add(ee.id),fe}):r(ee)},S=ee=>[...ee].sort((re,fe)=>{switch(x){case"favorites":return(fe.isFavorite?1:0)-(re.isFavorite?1:0);case"newest":return!re.createdAt&&!fe.createdAt?0:re.createdAt?fe.createdAt?fe.createdAt-re.createdAt:-1:1;case"oldest":return!re.createdAt&&!fe.createdAt?0:re.createdAt?fe.createdAt?re.createdAt-fe.createdAt:-1:1;case"color":return re.color.localeCompare(fe.color);case"category":return re.category.localeCompare(fe.category);default:return 0}}),I=O.useMemo(()=>{if(!v.trim())return t;const ee=v.toLowerCase();return t.filter(re=>re.analysis.toLowerCase().includes(ee)||re.color.toLowerCase().includes(ee)||re.material.toLowerCase().includes(ee)||re.category.toLowerCase().includes(ee))},[t,v]),V=O.useMemo(()=>{if(!u)return[];const ee=I.filter(fe=>fe.category===u),re=h[u];return re?ee.filter(fe=>{const je=re.color==="Toutes"||fe.color===re.color,Te=re.material==="Toutes"||fe.material===re.material;return je&&Te}):ee},[I,u,(B=h[u])==null?void 0:B.color,(J=h[u])==null?void 0:J.material]),P=O.useMemo(()=>S(V),[V,x]),L=O.useMemo(()=>$.reduce((ee,{name:re})=>(ee[re]=I.filter(fe=>fe.category===re).length,ee),{}),[I]),N=O.useMemo(()=>{if(!u)return[];const ee=I.filter(re=>re.category===u).map(re=>re.color);return["Toutes",...Array.from(new Set(ee))]},[I,u]),be=O.useMemo(()=>{if(!u)return[];const ee=I.filter(re=>re.category===u).map(re=>re.material);return["Toutes",...Array.from(new Set(ee))]},[I,u]),ke=ee=>{u&&f(re=>({...re,[u]:{...re[u],color:ee}}))},Q=ee=>{u&&f(re=>({...re,[u]:{...re[u],material:ee}}))},se=ee=>{d(u===ee?null:ee)},he=()=>{D(!A),U(new Set)},we=()=>{if(M.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const ee=window.prompt("Donnez un nom  cet ensemble :");ee&&(o(ee,Array.from(M)),he())},Ee=()=>{b("")};return e?g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),g.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((ee,re)=>g.jsx(sB,{},re))})]}):G===0?g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[g.jsx(QT,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),g.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),g.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(QT,{className:"w-8 h-8 text-gold"}),g.jsxs("div",{children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[g.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),g.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[G," vtement",G>1?"s":""]})]})]}),A?g.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[g.jsx("button",{onClick:he,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),g.jsxs("button",{onClick:we,disabled:M.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",M.size,")"]})]}):g.jsxs("button",{onClick:he,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[g.jsx(Dp,{}),"Crer un ensemble"]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx(XR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",value:v,onChange:ee=>b(ee.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),v&&g.jsx("button",{onClick:Ee,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:g.jsx(Hb,{})})]}),g.jsxs("div",{className:"relative sm:w-48",children:[g.jsx(JR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),g.jsx("select",{value:x,onChange:ee=>E(ee.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:q.map(ee=>g.jsx("option",{value:ee.value,children:ee.label},ee.value))}),g.jsx(Zc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),v&&g.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[I.length," rsultat",I.length>1?"s":"",' pour "',v,'"']}),A&&g.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[g.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),g.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),g.jsx("div",{className:"space-y-6",children:$.map(({name:ee,icon:re})=>{const fe=L[ee]||0,je=u===ee;return g.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[g.jsxs("button",{onClick:()=>se(ee),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"w-5 h-5 text-gold",children:re}),g.jsx("span",{className:"font-semibold text-lg",children:ee}),g.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",fe,")"]})]}),g.jsx(Zc,{className:`w-5 h-5 transition-transform ${je?"rotate-180":""}`})]}),je&&g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsxs("div",{className:"flex flex-wrap gap-4",children:[g.jsxs("div",{className:"flex-1 min-w-[150px]",children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),g.jsx("select",{value:h[ee].color,onChange:Te=>ke(Te.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:N.map(Te=>g.jsx("option",{value:Te,children:Te},Te))})]}),g.jsxs("div",{className:"flex-1 min-w-[150px]",children:[g.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),g.jsx("select",{value:h[ee].material,onChange:Te=>Q(Te.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:be.map(Te=>g.jsx("option",{value:Te,children:Te},Te))})]})]}),P.length>0?g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:g.jsx(DL,{mode:"popLayout",children:P.map((Te,Mt)=>g.jsx(Hi.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:Mt*.05,type:"spring",bounce:.3},children:g.jsx(aB,{imageSrc:Te.imageSrc,analysis:Te.analysis,onClick:()=>C(Te),isSelected:M.has(Te.id),isSet:z.has(Te.id),isFavorite:Te.isFavorite,isExcluded:Te.isExcluded})},Te.id))})}):g.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},ee)})})]})},RN=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:r,weatherInfo:s,weatherError:o,anchorItem:u,onClearAnchor:d})=>{const[h,f]=Nn.useState(""),v=u?"name"in u?u.name:u.analysis:null,b=E=>{E.preventDefault(),n(h||"Casual")},x=["Casual","Soire chic","Travail (formel)"];return g.jsxs("div",{children:[v&&g.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-gold/10 border border-gold/30 relative",children:[g.jsxs("p",{className:"text-sm font-semibold text-gold-dark dark:text-gold text-center pr-8",children:[" Crer une tenue avec : ",g.jsx("span",{className:"font-bold",children:v})]}),d&&g.jsx("button",{type:"button",onClick:d,className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:bg-gold/20 rounded-full transition-colors","aria-label":"Supprimer l'ancre",title:"Gnrer sans cet article",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&g.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),o&&g.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!s&&!o&&g.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),g.jsx("form",{onSubmit:b,children:g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),g.jsx("div",{className:"flex justify-center gap-2 mb-4",children:x.map(E=>g.jsx("button",{type:"button",onClick:()=>f(E),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${h===E?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:r,children:E},E))}),g.jsx("input",{id:"occasion",type:"text",value:h,onChange:E=>f(E.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r})]}),g.jsxs("button",{type:"submit",disabled:r,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(Ed,{}),r?"Gnration...":"Gnrer des Tenues"]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Gnration : 30-60 secondes (selon la taille de votre garde-robe)"})})]})})]})},uB=!1,cB=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:r,onToggleFavorite:s,onGenerateVisual:o,generatingVisualFor:u,selectedOutfit:d,onSelectOutfit:h,onGenerateVariants:f,isGenerating:v,onOpenChat:b})=>{const[x,E]=O.useState(null),[A,D]=O.useState(null);O.useEffect(()=>{if(!x)return;const U=j=>{j.key==="Escape"&&E(null)};return window.addEventListener("keydown",U),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",U),document.body.style.overflow="auto"}},[x]);const M=U=>{const{id:j,description:z}=U,G=j?j.trim():"",$=z?z.trim().toLowerCase():"";let q=e.find(S=>S.id===G);if(q)return q;let C=n.find(S=>S.id===G);if(C)return C;if(G&&(q=e.find(S=>S.analysis.toLowerCase().includes(G.toLowerCase())),q)||$&&(q=e.find(S=>{const I=S.analysis.toLowerCase();return I.includes($)||$.includes(I)}),q))return q};return g.jsxs(g.Fragment,{children:[v&&g.jsxs("div",{className:"mt-10 flex flex-col items-center justify-center py-12 px-6 bg-gradient-to-br from-gold/5 to-gold/10 dark:from-gold/10 dark:to-gold/5 rounded-xl border-2 border-dashed border-gold/30",children:[g.jsxs("svg",{className:"animate-spin h-12 w-12 text-gold mb-4",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"text-lg font-medium text-gold-dark dark:text-gold mb-1",children:"Gnration de variantes..."}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"L'IA cre 3 nouvelles tenues adaptes"})]}),g.jsx("div",{className:"mt-10 space-y-8",children:t.map((U,j)=>{const z=r.some($=>$.titre===U.titre&&$.description===U.description);U.titre;const G=(d==null?void 0:d.titre)===U.titre&&(d==null?void 0:d.description)===U.description;return g.jsxs("div",{className:`bg-snow dark:bg-onyx border-2 rounded-lg p-5 transition-all duration-300 hover:shadow-lg relative ${G?"border-gold shadow-gold/30 shadow-lg":"border-black/10 dark:border-white/10 hover:border-gold/50"}`,children:[G&&g.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gold to-gold-dark text-onyx px-4 py-1 rounded-full text-xs font-bold shadow-lg flex items-center gap-1.5",children:[g.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Tenue choisie"]}),g.jsxs("div",{className:"flex justify-between items-start",children:[g.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:U.titre}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>h(U),className:`p-1.5 transition-colors ${G?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"}`,"aria-label":G?"Dslectionner cette tenue":"Choisir cette tenue",title:G?"Dslectionner cette tenue":"Choisir cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:G?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),b&&g.jsx("button",{onClick:()=>b(U),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":"Demander conseil",title:"Demander conseil sur cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),g.jsx("button",{onClick:()=>D(A===j?null:j),disabled:v,className:`p-1.5 transition-colors ${A===j?"text-gold":"text-gray-400 hover:text-gold dark:hover:text-gold"} disabled:opacity-50 disabled:cursor-not-allowed`,"aria-label":A===j?"Annuler la modification":"Modifier cette tenue",title:A===j?"Annuler la modification":"Modifier cette tenue",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),uB,g.jsx("button",{onClick:()=>s(U),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":z?"Retirer des favoris":"Ajouter aux favoris",children:z?g.jsx(pu,{className:"w-6 h-6 text-gold"}):g.jsx(Lm,{className:"w-6 h-6"})})]})]}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-3",children:U.description}),A===j&&g.jsx("div",{className:"mb-4 p-3 bg-gold/10 border border-gold/30 rounded-lg",children:g.jsxs("p",{className:"text-sm text-gold-dark dark:text-gold font-medium flex items-center gap-2",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Cliquez sur une pice pour la remplacer"]})}),g.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:U.vetements.map(($,q)=>{const C=M($),S=C?C.imageSrc:null,I=A===j;return g.jsxs("div",{className:"relative",children:[g.jsx("button",{onClick:()=>S&&!I&&E(S),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!S||I,"aria-label":`Agrandir l'image de : ${$.description}`,title:$.description,children:S?g.jsx("img",{src:S,alt:$.description,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:g.jsx(QR,{})})}),I&&S&&g.jsx("button",{onClick:()=>{f(U,$),D(null)},disabled:v,className:"absolute inset-0 flex items-center justify-center bg-onyx/80 backdrop-blur-sm rounded-md transition-all hover:bg-gold/90 disabled:opacity-50 disabled:cursor-not-allowed group","aria-label":`Remplacer ${$.description}`,title:`Remplacer ${$.description}`,children:g.jsx("svg",{className:"w-8 h-8 text-white group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]},q)})}),g.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:U.vetements.map(($,q)=>g.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:$.description},q))})]},j)})}),x&&g.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>E(null),role:"dialog","aria-modal":"true",children:g.jsxs("div",{className:"relative",onClick:U=>U.stopPropagation(),children:[g.jsx("img",{src:x,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),g.jsx("button",{onClick:()=>E(null),className:"absolute top-2 right-2 p-2 bg-raisin-black/90 border-2 border-white/50 rounded-full text-white hover:bg-red-500 hover:border-white hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold shadow-lg","aria-label":"Fermer",children:g.jsx(TL,{})})]})})]})},su=O.memo(cB);var IN=t2(),dB=hB()?O.useLayoutEffect:O.useEffect;function hB(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function fB(){var t=O.useState(Object.create(null)),e=t[1];return O.useCallback(function(){e(Object.create(null))},[])}var mB=function(e){var n=e.children,r=e.type,s=r===void 0?"reach-portal":r,o=O.useRef(null),u=O.useRef(null),d=fB();return dB(function(){if(o.current){var h=o.current.ownerDocument;return u.current=h==null?void 0:h.createElement(s),h.body.appendChild(u.current),d(),function(){u.current&&u.current.ownerDocument&&u.current.ownerDocument.body.removeChild(u.current)}}},[s,d]),u.current?IN.createPortal(n,u.current):O.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pe=function(){return pe=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},pe.apply(this,arguments)};function Ax(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function lt(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o}function Ft(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Nt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Nt||(Nt={}));var bu;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(bu||(bu={}));var T0=Nt.Start,Cx=Nt.Stop,Wd=Nt.Raise,Up=Nt.Send,NN=Nt.Cancel,pB=Nt.NullEvent,Rx=Nt.Assign;Nt.After;Nt.DoneState;var kN=Nt.Log,gB=Nt.Init,S0=Nt.Invoke;Nt.ErrorExecution;var hA=Nt.ErrorPlatform,vB=Nt.ErrorCustom,DN=Nt.Update,yB=Nt.Choose,bB=Nt.Pure,ON=".",fA={},A0="xstate.guard",xB="",Df;function Ix(t,e,n){n===void 0&&(n=ON);var r=id(t,n),s=id(e,n);return xt(s)?xt(r)?s===r:!1:xt(r)?r in s:Object.keys(r).every(function(o){return o in s?Ix(r[o],s[o]):!1})}function jN(t){try{return xt(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function C0(t,e){try{return ku(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function _B(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function id(t,e){if(_B(t))return t.value;if(ku(t))return $m(t);if(typeof t!="string")return t;var n=C0(t,e);return $m(n)}function $m(t){if(t.length===1)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function Fc(t,e){for(var n={},r=Object.keys(t),s=0;s<r.length;s++){var o=r[s];n[o]=e(t[o],o,t,s)}return n}function mA(t,e,n){var r,s,o={};try{for(var u=lt(Object.keys(t)),d=u.next();!d.done;d=u.next()){var h=d.value,f=t[h];n(f)&&(o[h]=e(f,h,t))}}catch(v){r={error:v}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}var wB=function(t){return function(e){var n,r,s=e;try{for(var o=lt(t),u=o.next();!u.done;u=o.next()){var d=u.value;s=s[d]}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}};function EB(t,e){return function(n){var r,s,o=n;try{for(var u=lt(t),d=u.next();!d.done;d=u.next()){var h=d.value;o=o[e][h]}}catch(f){r={error:f}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}}function um(t){if(!t)return[[]];if(xt(t))return[[t]];var e=Wt(Object.keys(t).map(function(n){var r=t[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:um(t[n]).map(function(s){return[n].concat(s)})}));return e}function Wt(t){var e;return(e=[]).concat.apply(e,Ft([],ft(t),!1))}function MN(t){return ku(t)?t:[t]}function Ci(t){return t===void 0?[]:MN(t)}function Km(t,e,n){var r,s;if(vt(t))return t(e,n.data);var o={};try{for(var u=lt(Object.keys(t)),d=u.next();!d.done;d=u.next()){var h=d.value,f=t[h];vt(f)?o[h]=f(e,n.data):o[h]=f}}catch(v){r={error:v}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return o}function TB(t){return/^(done|error)\./.test(t)}function pA(t){return!!(t instanceof Promise||t!==null&&(vt(t)||typeof t=="object")&&vt(t.then))}function SB(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function AB(t,e){var n,r,s=ft([[],[]],2),o=s[0],u=s[1];try{for(var d=lt(t),h=d.next();!h.done;h=d.next()){var f=h.value;e(f)?o.push(f):u.push(f)}}catch(v){n={error:v}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return[o,u]}function PN(t,e){return Fc(t.states,function(n,r){if(n){var s=(xt(e)?void 0:e[r])||(n?n.current:void 0);if(s)return{current:s,states:PN(n,s)}}})}function CB(t,e){return{current:e,states:PN(t,e)}}function gA(t,e,n,r){var s=t&&n.reduce(function(o,u){var d,h,f=u.assignment,v={state:r,action:u,_event:e},b={};if(vt(f))b=f(o,e.data,v);else try{for(var x=lt(Object.keys(f)),E=x.next();!E.done;E=x.next()){var A=E.value,D=f[A];b[A]=vt(D)?D(o,e.data,v):D}}catch(M){d={error:M}}finally{try{E&&!E.done&&(h=x.return)&&h.call(x)}finally{if(d)throw d.error}}return Object.assign({},o,b)},t);return s}var RB=function(){};function ku(t){return Array.isArray(t)}function vt(t){return typeof t=="function"}function xt(t){return typeof t=="string"}function VN(t,e){if(t)return xt(t)?{type:A0,name:t,predicate:e?e[t]:void 0}:vt(t)?{type:A0,name:t.name,predicate:t}:t}function IB(t){try{return"subscribe"in t&&vt(t.subscribe)}catch{return!1}}var Sa=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Df={},Df[Sa]=function(){return this},Df[Symbol.observable]=function(){return this};function xu(t){return!!t&&"__xstatenode"in t}function NB(t){return!!t&&typeof t.send=="function"}function zp(t,e){return xt(t)||typeof t=="number"?pe({type:t},e):t}function Xn(t,e){if(!xt(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=zp(t);return pe({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function Ll(t,e){var n=MN(e).map(function(r){return typeof r>"u"||typeof r=="string"||xu(r)?{target:r,event:t}:pe(pe({},r),{event:t})});return n}function kB(t){if(!(t===void 0||t===xB))return Ci(t)}function LN(t,e,n,r,s){var o=t.options.guards,u={state:s,cond:e,_event:r};if(e.type===A0)return((o==null?void 0:o[e.name])||e.predicate)(n,r.data,u);var d=o==null?void 0:o[e.type];if(!d)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return d(n,r.data,u)}function UN(t){return typeof t=="string"?{type:t}:t}function cm(t,e,n){var r=function(){},s=typeof t=="object",o=s?t:null;return{next:((s?t.next:t)||r).bind(o),error:((s?t.error:e)||r).bind(o),complete:((s?t.complete:n)||r).bind(o)}}function Of(t,e){return"".concat(t,":invocation[").concat(e,"]")}function R0(t){return(t.type===Wd||t.type===Up&&t.to===bu.Internal)&&typeof t.delay!="number"}var au=Xn({type:gB});function I0(t,e){return e&&e[t]||void 0}function Id(t,e){var n;if(xt(t)||typeof t=="number"){var r=I0(t,e);vt(r)?n={type:t,exec:r}:r?n=r:n={type:t,exec:void 0}}else if(vt(t))n={type:t.name||t.toString(),exec:t};else{var r=I0(t.type,e);if(vt(r))n=pe(pe({},t),{exec:r});else if(r){var s=r.type||t.type;n=pe(pe(pe({},r),t),{type:s})}else n=t}return n}var Aa=function(t,e){if(!t)return[];var n=ku(t)?t:[t];return n.map(function(r){return Id(r,e)})};function Nx(t){var e=Id(t);return pe(pe({id:xt(t)?t:e.id},e),{type:e.type})}function DB(t,e){return{type:Wd,event:typeof t=="function"?t:zp(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function OB(t,e,n,r){var s={_event:n},o=Xn(vt(t.event)?t.event(e,n.data,s):t.event),u;if(xt(t.delay)){var d=r&&r[t.delay];u=vt(d)?d(e,n.data,s):d}else u=vt(t.delay)?t.delay(e,n.data,s):t.delay;return pe(pe({},t),{type:Wd,_event:o,delay:u})}function jB(t,e){return{to:e?e.to:void 0,type:Up,event:vt(t)?t:zp(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:vt(t)?t.name:jN(t)}}function MB(t,e,n,r){var s={_event:n},o=Xn(vt(t.event)?t.event(e,n.data,s):t.event),u;if(xt(t.delay)){var d=r&&r[t.delay];u=vt(d)?d(e,n.data,s):d}else u=vt(t.delay)?t.delay(e,n.data,s):t.delay;var h=vt(t.to)?t.to(e,n.data,s):t.to;return pe(pe({},t),{to:h,_event:o,event:o.data,delay:u})}var PB=function(t,e,n){return pe(pe({},t),{value:xt(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},VB=function(t){return{type:NN,sendId:t}};function LB(t){var e=Nx(t);return{type:Nt.Start,activity:e,exec:void 0}}function UB(t){var e=vt(t)?t:Nx(t);return{type:Nt.Stop,activity:e,exec:void 0}}function zB(t,e,n){var r=vt(t.activity)?t.activity(e,n.data):t.activity,s=typeof r=="string"?{id:r}:r,o={type:Nt.Stop,activity:s};return o}var BB=function(t){return{type:Rx,assignment:t}};function FB(t,e){var n=e?"#".concat(e):"";return"".concat(Nt.After,"(").concat(t,")").concat(n)}function jf(t,e){var n="".concat(Nt.DoneState,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function dm(t,e){var n="".concat(Nt.DoneInvoke,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function qc(t,e){var n="".concat(Nt.ErrorPlatform,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}var qB=function(t){var e,n,r=[];try{for(var s=lt(t),o=s.next();!o.done;o=s.next())for(var u=o.value,d=0;d<u.actions.length;){if(u.actions[d].type===Rx){r.push(u.actions[d]),u.actions.splice(d,1);continue}d++}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r};function Ym(t,e,n,r,s,o,u){u===void 0&&(u=!1);var d=u?[]:qB(s),h=d.length?gA(n,r,d,e):n,f=u?[n]:void 0,v=[];function b(A,D){var M;switch(D.type){case Wd:{var U=OB(D,h,r,t.options.delays);return o&&typeof U.delay=="number"&&o(U,h,r),U}case Up:var j=MB(D,h,r,t.options.delays);return o&&j.to!==bu.Internal&&(A==="entry"?v.push(j):o(j,h,r)),j;case kN:{var z=PB(D,h,r);return o==null||o(z,h,r),z}case yB:{var G=D,$=(M=G.conds.find(function(Q){var se=VN(Q.cond,t.options.guards);return!se||LN(t,se,h,r,o?void 0:e)}))===null||M===void 0?void 0:M.actions;if(!$)return[];var q=ft(Ym(t,e,h,r,[{type:A,actions:Aa(Ci($),t.options.actions)}],o,u),2),C=q[0],S=q[1];return h=S,f==null||f.push(h),C}case bB:{var $=D.get(h,r.data);if(!$)return[];var I=ft(Ym(t,e,h,r,[{type:A,actions:Aa(Ci($),t.options.actions)}],o,u),2),V=I[0],P=I[1];return h=P,f==null||f.push(h),V}case Cx:{var z=zB(D,h,r);return o==null||o(z,n,r),z}case Rx:{h=gA(h,r,[D],o?void 0:e),f==null||f.push(h);break}default:var L=Id(D,t.options.actions),N=L.exec;if(o)o(L,h,r);else if(N&&f){var be=f.length-1,ke=pe(pe({},L),{exec:function(Q){for(var se=[],he=1;he<arguments.length;he++)se[he-1]=arguments[he];N.apply(void 0,Ft([f[be]],ft(se),!1))}});L=ke}return L}}function x(A){var D,M,U=[];try{for(var j=lt(A.actions),z=j.next();!z.done;z=j.next()){var G=z.value,$=b(A.type,G);$&&(U=U.concat($))}}catch(q){D={error:q}}finally{try{z&&!z.done&&(M=j.return)&&M.call(j)}finally{if(D)throw D.error}}return v.forEach(function(q){o(q,h,r)}),v.length=0,U}var E=Wt(s.map(x));return[E,h]}var Kl=function(t,e){var n=e(t);return n};function zN(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Sa]=function(){return this},e}function HB(t,e,n,r){var s,o=UN(t.src),u=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[o.type],d=t.data?Km(t.data,n,r):void 0,h=u?BN(u,t.id,d):zN(t.id);return h.meta=t,h}function BN(t,e,n){var r=zN(e);if(r.deferred=!0,xu(t)){var s=r.state=Kl(void 0,function(){return(n?t.withContext(n):t).initialState});r.getSnapshot=function(){return s}}return r}function GB(t){try{return typeof t.send=="function"}catch{return!1}}function $B(t){return GB(t)&&"id"in t}function KB(t){var e;return pe((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Sa]=function(){return this},e),t)}var Qm=function(t){return t.type==="atomic"||t.type==="final"};function FN(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Nd(t){return FN(t).filter(function(e){return e.type!=="history"})}function qN(t){var e=[t];return Qm(t)?e:e.concat(Wt(Nd(t).map(qN)))}function Hc(t,e){var n,r,s,o,u,d,h,f,v=new Set(t),b=N0(v),x=new Set(e);try{for(var E=lt(x),A=E.next();!A.done;A=E.next())for(var D=A.value,M=D.parent;M&&!x.has(M);)x.add(M),M=M.parent}catch(I){n={error:I}}finally{try{A&&!A.done&&(r=E.return)&&r.call(E)}finally{if(n)throw n.error}}var U=N0(x);try{for(var j=lt(x),z=j.next();!z.done;z=j.next()){var D=z.value;if(D.type==="compound"&&(!U.get(D)||!U.get(D).length))b.get(D)?b.get(D).forEach(function(V){return x.add(V)}):D.initialStateNodes.forEach(function(V){return x.add(V)});else if(D.type==="parallel")try{for(var G=(u=void 0,lt(Nd(D))),$=G.next();!$.done;$=G.next()){var q=$.value;x.has(q)||(x.add(q),b.get(q)?b.get(q).forEach(function(V){return x.add(V)}):q.initialStateNodes.forEach(function(V){return x.add(V)}))}}catch(V){u={error:V}}finally{try{$&&!$.done&&(d=G.return)&&d.call(G)}finally{if(u)throw u.error}}}}catch(I){s={error:I}}finally{try{z&&!z.done&&(o=j.return)&&o.call(j)}finally{if(s)throw s.error}}try{for(var C=lt(x),S=C.next();!S.done;S=C.next())for(var D=S.value,M=D.parent;M&&!x.has(M);)x.add(M),M=M.parent}catch(I){h={error:I}}finally{try{S&&!S.done&&(f=C.return)&&f.call(C)}finally{if(h)throw h.error}}return x}function HN(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var r=n[0];if(r){if(Qm(r))return r.key}else return{}}var s={};return n.forEach(function(o){s[o.key]=HN(o,e)}),s}function N0(t){var e,n,r=new Map;try{for(var s=lt(t),o=s.next();!o.done;o=s.next()){var u=o.value;r.has(u)||r.set(u,[]),u.parent&&(r.has(u.parent)||r.set(u.parent,[]),r.get(u.parent).push(u))}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r}function YB(t,e){var n=Hc([t],e);return HN(t,N0(n))}function Gc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function QB(t){return Ft([],ft(new Set(Wt(Ft([],ft(t.map(function(e){return e.ownEvents})),!1)))),!1)}function hm(t,e){return e.type==="compound"?Nd(e).some(function(n){return n.type==="final"&&Gc(t,n)}):e.type==="parallel"?Nd(e).every(function(n){return hm(t,n)}):!1}function WB(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function vA(t){return new Set(Wt(t.map(function(e){return e.tags})))}function GN(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(xt(t)||xt(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(s){return GN(t[s],e[s])})}function XB(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function JB(t,e){var n=t.exec,r=pe(pe({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return r}var vi=(function(){function t(e){var n=this,r;this.actions=[],this.activities=fA,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||fA,this.meta=WB(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(r=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&r!==void 0?r:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return QB(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var r=au;return new t({value:e,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=au;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var r=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),xt(e))return[e];var s=Object.keys(e);return s.concat.apply(s,Ft([],ft(s.map(function(o){return r.toStrings(e[o],n).map(function(u){return o+n+u})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var r=Ax(e,["configuration","transitions","tags","machine"]);return pe(pe({},r),{tags:Array.from(n)})},t.prototype.matches=function(e){return Ix(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;RB(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),ZB={deferEvents:!1},yA=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=pe(pe({},ZB),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),_y=new Map,e7=0,Rc={bookId:function(){return"x:".concat(e7++)},register:function(t,e){return _y.set(t,e),t},get:function(t){return _y.get(t)},free:function(t){_y.delete(t)}};function kx(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function t7(){var t=kx();if(t&&"__xstate__"in t)return t.__xstate__}function n7(t){if(kx()){var e=t7();e&&e.register(t)}}function r7(t,e){e===void 0&&(e={});var n=t.initialState,r=new Set,s=[],o=!1,u=function(){if(!o){for(o=!0;s.length>0;){var f=s.shift();n=t.transition(n,f,h),r.forEach(function(v){return v.next(n)})}o=!1}},d=KB({id:e.id,send:function(f){s.push(f),u()},getSnapshot:function(){return n},subscribe:function(f,v,b){var x=cm(f,v,b);return r.add(x),x.next(n),{unsubscribe:function(){r.delete(x)}}}}),h={parent:e.parent,self:d,id:e.id||"anonymous",observers:r};return n=t.start?t.start(h):n,d}var i7={sync:!1,autoForward:!1},Bn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Bn||(Bn={}));var s7=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var r=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Bn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(v,b){if(ku(v))return r.batch(v),r.state;var x=Xn(zp(v,b));if(r.status===Bn.Stopped)return r.state;if(r.status!==Bn.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(x.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(x.data)));return r.scheduler.schedule(function(){r.forward(x);var E=r._nextState(x);r.update(E,x)}),r._state},this.sendTo=function(v,b,x){var E=r.parent&&(b===bu.Parent||r.parent.id===b),A=E?r.parent:xt(b)?b===bu.Internal?r:r.children.get(b)||Rc.get(b):NB(b)?b:void 0;if(!A){if(!E)throw new Error("Unable to send event to child '".concat(b,"' from service '").concat(r.id,"'."));return}if("machine"in A){if(r.status!==Bn.Stopped||r.parent!==A||r.state.done){var D=pe(pe({},v),{name:v.name===vB?"".concat(qc(r.id)):v.name,origin:r.sessionId});!x&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([A,D]):A.send(D)}}else!x&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([A,v.data]):A.send(v.data)},this._exec=function(v,b,x,E){E===void 0&&(E=r.machine.options.actions);var A=v.exec||I0(v.type,E),D=vt(A)?A:A?A.exec:v.exec;if(D)try{return D(b,x.data,r.machine.config.predictableActionArguments?{action:v,_event:x}:{action:v,state:r.state,_event:x})}catch(be){throw r.parent&&r.parent.send({type:"xstate.error",data:be}),be}switch(v.type){case Wd:{var M=v;r.defer(M);break}case Up:var U=v;if(typeof U.delay=="number"){r.defer(U);return}else U.to?r.sendTo(U._event,U.to,x===au):r.send(U._event);break;case NN:r.cancel(v.sendId);break;case T0:{if(r.status!==Bn.Running)return;var j=v.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[j.id||j.type])break;if(j.type===Nt.Invoke){var z=UN(j.src),G=r.machine.options.services?r.machine.options.services[z.type]:void 0,$=j.id,q=j.data,C="autoForward"in j?j.autoForward:!!j.forward;if(!G)return;var S=q?Km(q,b,x):void 0;if(typeof G=="string")return;var I=vt(G)?G(b,x.data,{data:S,src:z,meta:j.meta}):G;if(!I)return;var V=void 0;xu(I)&&(I=S?I.withContext(S):I,V={autoForward:C}),r.spawn(I,$,V)}else r.spawnActivity(j);break}case Cx:{r.stopChild(v.activity.id);break}case kN:var P=v,L=P.label,N=P.value;L?r.logger(L,N):r.logger(N);break}};var s=pe(pe({},t.defaultOptions),n),o=s.clock,u=s.logger,d=s.parent,h=s.id,f=h!==void 0?h:e.id;this.id=f,this.logger=u,this.clock=o,this.parent=d,this.options=s,this.scheduler=new yA({deferEvents:this.options.deferEvents}),this.sessionId=Rc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Kl(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var r,s;try{for(var o=lt(e.actions),u=o.next();!u.done;u=o.next()){var d=u.value;this.exec(d,e,n)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}},t.prototype.update=function(e,n){var r,s,o,u,d,h,f,v,b=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===au)&&this.options.execute)this.execute(this.state);else for(var x=void 0;x=this._outgoingQueue.shift();)x[0].send(x[1]);if(this.children.forEach(function(I){b.state.children[I.id]=I}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var E=lt(this.eventListeners),A=E.next();!A.done;A=E.next()){var D=A.value;D(e.event)}}catch(I){r={error:I}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(r)throw r.error}}try{for(var M=lt(this.listeners),U=M.next();!U.done;U=M.next()){var D=U.value;D(e,e.event)}}catch(I){o={error:I}}finally{try{U&&!U.done&&(u=M.return)&&u.call(M)}finally{if(o)throw o.error}}try{for(var j=lt(this.contextListeners),z=j.next();!z.done;z=j.next()){var G=z.value;G(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(I){d={error:I}}finally{try{z&&!z.done&&(h=j.return)&&h.call(j)}finally{if(d)throw d.error}}if(this.state.done){var $=e.configuration.find(function(I){return I.type==="final"&&I.parent===b.machine}),q=$&&$.doneData?Km($.doneData,e.context,n):void 0;this._doneEvent=dm(this.id,q);try{for(var C=lt(this.doneListeners),S=C.next();!S.done;S=C.next()){var D=S.value;D(this._doneEvent)}}catch(I){f={error:I}}finally{try{S&&!S.done&&(v=C.return)&&v.call(C)}finally{if(f)throw f.error}}this._stop(),this._stopChildren(),Rc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Bn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,r){var s=this,o=cm(e,n,r);this.listeners.add(o.next),this.status!==Bn.NotStarted&&o.next(this.state);var u=function(){s.doneListeners.delete(u),s.stopListeners.delete(u),o.complete()};return this.status===Bn.Stopped?o.complete():(this.onDone(u),this.onStop(u)),{unsubscribe:function(){s.listeners.delete(o.next),s.doneListeners.delete(u),s.stopListeners.delete(u)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Bn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Bn.Running)return this;this.machine._init(),Rc.register(this.sessionId,this),this.initialized=!0,this.status=Bn.Running;var r=e===void 0?this.initialState:Kl(this,function(){return XB(e)?n.machine.resolveState(e):n.machine.resolveState(vi.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,au)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){vt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,r,s,o,u,d,h,f,v;try{for(var b=lt(this.listeners),x=b.next();!x.done;x=b.next()){var E=x.value;this.listeners.delete(E)}}catch(C){e={error:C}}finally{try{x&&!x.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}try{for(var A=lt(this.stopListeners),D=A.next();!D.done;D=A.next()){var E=D.value;E(),this.stopListeners.delete(E)}}catch(C){r={error:C}}finally{try{D&&!D.done&&(s=A.return)&&s.call(A)}finally{if(r)throw r.error}}try{for(var M=lt(this.contextListeners),U=M.next();!U.done;U=M.next()){var E=U.value;this.contextListeners.delete(E)}}catch(C){o={error:C}}finally{try{U&&!U.done&&(u=M.return)&&u.call(M)}finally{if(o)throw o.error}}try{for(var j=lt(this.doneListeners),z=j.next();!z.done;z=j.next()){var E=z.value;this.doneListeners.delete(E)}}catch(C){d={error:C}}finally{try{z&&!z.done&&(h=j.return)&&h.call(j)}finally{if(d)throw d.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Bn.Stopped,this._initialState=void 0;try{for(var G=lt(Object.keys(this.delayedEventsMap)),$=G.next();!$.done;$=G.next()){var q=$.value;this.clock.clearTimeout(this.delayedEventsMap[q])}}catch(C){f={error:C}}finally{try{$&&!$.done&&(v=G.return)&&v.call(G)}finally{if(f)throw f.error}}this.scheduler.clear(),this.scheduler=new yA({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r;if(!(!((r=e._state)===null||r===void 0)&&r.done)){var s=Xn({type:"xstate.stop"}),o=Kl(e,function(){var u=Wt(Ft([],ft(e.state.configuration),!1).sort(function(b,x){return x.order-b.order}).map(function(b){return Aa(b.onExit,e.machine.options.actions)})),d=ft(Ym(e.machine,e.state,e.state.context,s,[{type:"exit",actions:u}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),h=d[0],f=d[1],v=new vi({value:e.state.value,context:f,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:h.filter(function(b){return!R0(b)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return v.changed=!0,v});e.update(o,s),e._stopChildren(),Rc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Bn.NotStarted&&this.options.deferEvents)){if(this.status!==Bn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,o,u=n.state,d=!1,h=[],f=function(E){var A=Xn(E);n.forward(A),u=Kl(n,function(){return n.machine.transition(u,A,void 0,r||void 0)}),h.push.apply(h,Ft([],ft(n.machine.config.predictableActionArguments?u.actions:u.actions.map(function(D){return JB(D,u)})),!1)),d=d||!!u.changed};try{for(var v=lt(e),b=v.next();!b.done;b=v.next()){var x=b.value;f(x)}}catch(E){s={error:E}}finally{try{b&&!b.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}u.changed=d,u.actions=h,n.update(u,Xn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=Xn(e);if(s.name.indexOf(hA)===0&&!this.state.nextEvents.some(function(u){return u.indexOf(hA)===0}))throw s.data.data;var o=Kl(this,function(){return r.machine.transition(r.state,s,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,r;try{for(var s=lt(this.forwardTo),o=s.next();!o.done;o=s.next()){var u=o.value,d=this.children.get(u);if(!d)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(u,"'."));d.send(e)}}catch(h){n={error:h}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,r=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=r)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(e,n.context,n._event,r)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),vt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,r){if(this.status!==Bn.Running)return BN(e,n);if(pA(e))return this.spawnPromise(Promise.resolve(e),n);if(vt(e))return this.spawnCallback(e,n);if($B(e))return this.spawnActor(e,n);if(IB(e))return this.spawnObservable(e,n);if(xu(e))return this.spawnMachine(e,pe(pe({},r),{id:n}));if(SB(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var r=this;n===void 0&&(n={});var s=new t(e,pe(pe({},this.options),{parent:this,id:n.id||e.id})),o=pe(pe({},i7),n);o.sync&&s.onTransition(function(d){r.send(DN,{state:d,id:s.id})});var u=s;return this.children.set(s.id,u),o.autoForward&&this.forwardTo.add(s.id),s.onDone(function(d){r.removeChild(s.id),r.send(Xn(d,{origin:s.id}))}).start(),u},t.prototype.spawnBehavior=function(e,n){var r=r7(e,{id:n,parent:this});return this.children.set(n,r),r},t.prototype.spawnPromise=function(e,n){var r,s=this,o=!1,u;e.then(function(h){o||(u=h,s.removeChild(n),s.send(Xn(dm(n,h),{origin:n})))},function(h){if(!o){s.removeChild(n);var f=qc(n,h);try{s.send(Xn(f,{origin:n}))}catch{s.devTools&&s.devTools.send(f,s.state),s.machine.strict&&s.stop()}}});var d=(r={id:n,send:function(){},subscribe:function(h,f,v){var b=cm(h,f,v),x=!1;return e.then(function(E){x||(b.next(E),!x&&b.complete())},function(E){x||b.error(E)}),{unsubscribe:function(){return x=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return u}},r[Sa]=function(){return this},r);return this.children.set(n,d),d},t.prototype.spawnCallback=function(e,n){var r,s=this,o=!1,u=new Set,d=new Set,h,f=function(x){h=x,d.forEach(function(E){return E(x)}),!o&&s.send(Xn(x,{origin:n}))},v;try{v=e(f,function(x){u.add(x)})}catch(x){this.send(qc(n,x))}if(pA(v))return this.spawnPromise(v,n);var b=(r={id:n,send:function(x){return u.forEach(function(E){return E(x)})},subscribe:function(x){var E=cm(x);return d.add(E.next),{unsubscribe:function(){d.delete(E.next)}}},stop:function(){o=!0,vt(v)&&v()},toJSON:function(){return{id:n}},getSnapshot:function(){return h}},r[Sa]=function(){return this},r);return this.children.set(n,b),b},t.prototype.spawnObservable=function(e,n){var r,s=this,o,u=e.subscribe(function(h){o=h,s.send(Xn(h,{origin:n}))},function(h){s.removeChild(n),s.send(Xn(qc(n,h),{origin:n}))},function(){s.removeChild(n),s.send(Xn(dm(n),{origin:n}))}),d=(r={id:n,send:function(){},subscribe:function(h,f,v){return e.subscribe(h,f,v)},stop:function(){return u.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},r[Sa]=function(){return this},r);return this.children.set(n,d),d},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var r=n(this.state.context,e);this.spawnEffect(e.id,r)}},t.prototype.spawnEffect=function(e,n){var r;this.children.set(e,(r={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},r[Sa]=function(){return this},r))},t.prototype.attachDev=function(){var e=kx();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(pe(pe({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:pe({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}n7(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Sa]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Bn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=$N,t})();function $N(t,e){var n=new s7(t,e);return n}function a7(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Mf(t){return pe(pe({type:S0},t),{toJSON:function(){t.onDone,t.onError;var e=Ax(t,["onDone","onError"]);return pe(pe({},e),{type:S0,src:a7(t.src)})}})}var Pf="",k0="#",wy="*",Ul={},zl=function(t){return t[0]===k0},o7=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},l7=(function(){function t(e,n,r,s){r===void 0&&(r="context"in e?e.context:void 0);var o=this,u;this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(o7(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:ON),this.id=this.config.id||Ft([this.machine.key],ft(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(u=this.config.schema)!==null&&u!==void 0?u:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Fc(this.config.states,function(f,v){var b,x=new t(f,{},void 0,{parent:o,key:v});return Object.assign(o.idMap,pe((b={},b[x.id]=x,b),x.idMap)),x}):Ul;var d=0;function h(f){var v,b;f.order=d++;try{for(var x=lt(FN(f)),E=x.next();!E.done;E=x.next()){var A=E.value;h(A)}}catch(D){v={error:D}}finally{try{E&&!E.done&&(b=x.return)&&b.call(x)}finally{if(v)throw v.error}}}h(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(f){var v=f.event;return v===Pf}):Pf in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Ci(this.config.entry||this.config.onEntry).map(function(f){return Id(f)}),this.onExit=Ci(this.config.exit||this.config.onExit).map(function(f){return Id(f)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Ci(this.config.invoke).map(function(f,v){var b,x;if(xu(f)){var E=Of(o.id,v);return o.machine.options.services=pe((b={},b[E]=f,b),o.machine.options.services),Mf({src:E,id:E})}else if(xt(f.src)){var E=f.id||Of(o.id,v);return Mf(pe(pe({},f),{id:E,src:f.src}))}else if(xu(f.src)||vt(f.src)){var E=f.id||Of(o.id,v);return o.machine.options.services=pe((x={},x[E]=f.src,x),o.machine.options.services),Mf(pe(pe({id:E},f),{src:E}))}else{var A=f.src;return Mf(pe(pe({id:Of(o.id,v)},f),{src:A}))}}),this.activities=Ci(this.config.activities).concat(this.invoke).map(function(f){return Nx(f)}),this.transition=this.transition.bind(this),this.tags=Ci(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||qN(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var r=this.options,s=r.actions,o=r.activities,u=r.guards,d=r.services,h=r.delays;return new t(this.config,{actions:pe(pe({},s),e.actions),activities:pe(pe({},o),e.activities),guards:pe(pe({},u),e.guards),services:pe(pe({},d),e.services),delays:pe(pe({},h),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return vt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Fc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Pf,r=this.transitions.filter(function(s){var o=s.eventType===e;return n?o:o||s.eventType===wy});return this.__cache.candidates[e]=r,r},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var r=function(o,u){var d=vt(o)?"".concat(e.id,":delay[").concat(u,"]"):o,h=FB(d,e.id);return e.onEntry.push(jB(h,{delay:o})),e.onExit.push(VB(h)),h},s=ku(n)?n.map(function(o,u){var d=r(o.delay,u);return pe(pe({},o),{event:d})}):Wt(Object.keys(n).map(function(o,u){var d=n[o],h=xt(d)?{target:d}:d,f=isNaN(+o)?o:+o,v=r(f,u);return Ci(h).map(function(b){return pe(pe({},b),{event:v,delay:f})})}));return s.map(function(o){var u=o.delay;return pe(pe({},e.formatTransition(o)),{delay:u})})},t.prototype.getStateNodes=function(e){var n,r=this;if(!e)return[];var s=e instanceof vi?e.value:id(e,this.delimiter);if(xt(s)){var o=this.getStateNode(s).initial;return o!==void 0?this.getStateNodes((n={},n[s]=o,n)):[this,this.states[s]]}var u=Object.keys(s),d=[this];return d.push.apply(d,Ft([],ft(Wt(u.map(function(h){return r.getStateNode(h).getStateNodes(s[h])}))),!1)),d},t.prototype.handles=function(e){var n=jN(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof vi?e:vi.create(e),r=Array.from(Hc([],this.getStateNodes(n.value)));return new vi(pe(pe({},n),{value:this.resolve(n.value),configuration:r,done:hm(r,this),tags:vA(r),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,r){var s=this.getStateNode(e),o=s.next(n,r);return!o||!o.transitions.length?this.next(n,r):o},t.prototype.transitionCompoundNode=function(e,n,r){var s=Object.keys(e),o=this.getStateNode(s[0]),u=o._transition(e[s[0]],n,r);return!u||!u.transitions.length?this.next(n,r):u},t.prototype.transitionParallelNode=function(e,n,r){var s,o,u={};try{for(var d=lt(Object.keys(e)),h=d.next();!h.done;h=d.next()){var f=h.value,v=e[f];if(v){var b=this.getStateNode(f),x=b._transition(v,n,r);x&&(u[f]=x)}}}catch(U){s={error:U}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}var E=Object.keys(u).map(function(U){return u[U]}),A=Wt(E.map(function(U){return U.transitions})),D=E.some(function(U){return U.transitions.length>0});if(!D)return this.next(n,r);var M=Wt(Object.keys(u).map(function(U){return u[U].configuration}));return{transitions:A,exitSet:Wt(E.map(function(U){return U.exitSet})),configuration:M,source:n,actions:Wt(Object.keys(u).map(function(U){return u[U].actions}))}},t.prototype._transition=function(e,n,r){return xt(e)?this.transitionLeafNode(e,n,r):Object.keys(e).length===1?this.transitionCompoundNode(e,n,r):this.transitionParallelNode(e,n,r)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Xn(n))},t.prototype.next=function(e,n){var r,s,o=this,u=n.name,d=[],h=[],f;try{for(var v=lt(this.getCandidates(u)),b=v.next();!b.done;b=v.next()){var x=b.value,E=x.cond,A=x.in,D=e.context,M=A?xt(A)&&zl(A)?e.matches(id(this.getStateNodeById(A).path,this.delimiter)):Ix(id(A,this.delimiter),wB(this.path.slice(0,-2))(e.value)):!0,U=!1;try{U=!E||LN(this.machine,E,D,n,e)}catch(G){throw new Error("Unable to evaluate guard '".concat(E.name||E.type,"' in transition for event '").concat(u,"' in state node '").concat(this.id,`':
`).concat(G.message))}if(U&&M){x.target!==void 0&&(h=x.target),d.push.apply(d,Ft([],ft(x.actions),!1)),f=x;break}}}catch(G){r={error:G}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(r)throw r.error}}if(f){if(!h.length)return{transitions:[f],exitSet:[],configuration:e.value?[this]:[],source:e,actions:d};var j=Wt(h.map(function(G){return o.getRelativeStateNodes(G,e.historyValue)})),z=!!f.internal;return{transitions:[f],exitSet:z?[]:Wt(h.map(function(G){return o.getPotentiallyReenteringNodes(G)})),configuration:j,source:e,actions:d}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],r=this,s=e;r&&r!==s;)n.push(r),r=r.parent;return r!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,r,s,o,u,d){var h,f,v,b,x=this,E=u?Hc([],this.getStateNodes(u.value)):[],A=new Set;try{for(var D=lt(Array.from(e).sort(function(P,L){return P.order-L.order})),M=D.next();!M.done;M=D.next()){var U=M.value;(!Gc(E,U)||Gc(r.exitSet,U)||U.parent&&A.has(U.parent))&&A.add(U)}}catch(P){h={error:P}}finally{try{M&&!M.done&&(f=D.return)&&f.call(D)}finally{if(h)throw h.error}}try{for(var j=lt(E),z=j.next();!z.done;z=j.next()){var U=z.value;(!Gc(e,U)||Gc(r.exitSet,U.parent))&&r.exitSet.push(U)}}catch(P){v={error:P}}finally{try{z&&!z.done&&(b=j.return)&&b.call(j)}finally{if(v)throw v.error}}r.exitSet.sort(function(P,L){return L.order-P.order});var G=Array.from(A).sort(function(P,L){return P.order-L.order}),$=new Set(r.exitSet),q=Wt(G.map(function(P){var L=[];if(P.type!=="final")return L;var N=P.parent;if(!N.parent)return L;L.push(jf(P.id,P.doneData),jf(N.id,P.doneData?Km(P.doneData,s,o):void 0));var be=N.parent;return be.type==="parallel"&&Nd(be).every(function(ke){return hm(r.configuration,ke)})&&L.push(jf(be.id)),L})),C=G.map(function(P){var L=P.onEntry,N=P.activities.map(function(be){return LB(be)});return{type:"entry",actions:Aa(d?Ft(Ft([],ft(L),!1),ft(N),!1):Ft(Ft([],ft(N),!1),ft(L),!1),x.machine.options.actions)}}).concat({type:"state_done",actions:q.map(function(P){return DB(P)})}),S=Array.from($).map(function(P){return{type:"exit",actions:Aa(Ft(Ft([],ft(P.onExit),!1),ft(P.activities.map(function(L){return UB(L)})),!1),x.machine.options.actions)}}),I=S.concat({type:"transition",actions:Aa(r.actions,this.machine.options.actions)}).concat(C);if(n){var V=Aa(Wt(Ft([],ft(e),!1).sort(function(P,L){return L.order-P.order}).map(function(P){return P.onExit})),this.machine.options.actions).filter(function(P){return!R0(P)});return I.concat({type:"stop",actions:V})}return I},t.prototype.transition=function(e,n,r,s){e===void 0&&(e=this.initialState);var o=Xn(n),u;if(e instanceof vi)u=r===void 0?e:this.resolveState(vi.from(e,r));else{var d=xt(e)?this.resolve($m(this.getResolvedPath(e))):this.resolve(e),h=r??this.machine.context;u=this.resolveState(vi.from(d,h))}if(this.strict&&!this.events.includes(o.name)&&!TB(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var f=this._transition(u.value,u,o)||{transitions:[],configuration:[],exitSet:[],source:u,actions:[]},v=Hc([],this.getStateNodes(u.value)),b=f.configuration.length?Hc(v,f.configuration):v;return f.configuration=Ft([],ft(b),!1),this.resolveTransition(f,u,u.context,s,o)},t.prototype.resolveRaisedTransition=function(e,n,r,s){var o,u=e.actions;return e=this.transition(e,n,void 0,s),e._event=r,e.event=r.data,(o=e.actions).unshift.apply(o,Ft([],ft(u),!1)),e},t.prototype.resolveTransition=function(e,n,r,s,o){var u,d,h,f,v=this;o===void 0&&(o=au);var b=e.configuration,x=!n||e.transitions.length>0,E=x?e.configuration:n?n.configuration:[],A=hm(E,this),D=x?YB(this.machine,b):void 0,M=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,U=this.getActions(new Set(E),A,e,r,o,n,s),j=n?pe({},n.activities):{};try{for(var z=lt(U),G=z.next();!G.done;G=z.next()){var $=G.value;try{for(var q=(h=void 0,lt($.actions)),C=q.next();!C.done;C=q.next()){var S=C.value;S.type===T0?j[S.activity.id||S.activity.type]=S:S.type===Cx&&(j[S.activity.id||S.activity.type]=!1)}}catch(re){h={error:re}}finally{try{C&&!C.done&&(f=q.return)&&f.call(q)}finally{if(h)throw h.error}}}}catch(re){u={error:re}}finally{try{G&&!G.done&&(d=z.return)&&d.call(z)}finally{if(u)throw u.error}}var I=ft(Ym(this,n,r,o,U,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=I[0],P=I[1],L=ft(AB(V,R0),2),N=L[0],be=L[1],ke=V.filter(function(re){var fe;return re.type===T0&&((fe=re.activity)===null||fe===void 0?void 0:fe.type)===S0}),Q=ke.reduce(function(re,fe){return re[fe.activity.id]=HB(fe.activity,v.machine,P,o),re},n?pe({},n.children):{}),se=new vi({value:D||n.value,context:P,_event:o,_sessionid:n?n._sessionid:null,historyValue:D?M?CB(M,D):void 0:n?n.historyValue:void 0,history:!D||e.source?n:void 0,actions:D?be:[],activities:D?j:n?n.activities:{},events:[],configuration:E,transitions:e.transitions,children:Q,done:A,tags:vA(E),machine:this}),he=r!==P;se.changed=o.name===DN||he;var we=se.history;we&&delete we.history;var Ee=!A&&(this._transient||b.some(function(re){return re._transient}));if(!x&&(!Ee||o.name===Pf))return se;var B=se;if(!A)for(Ee&&(B=this.resolveRaisedTransition(B,{type:pB},o,s));N.length;){var J=N.shift();B=this.resolveRaisedTransition(B,J._event,o,s)}var ee=B.changed||(we?!!B.actions.length||he||typeof we.value!=typeof B.value||!GN(B.value,we.value):void 0);return B.changed=ee,B.history=we,B},t.prototype.getStateNode=function(e){if(zl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=zl(e)?e.slice(k0.length):e;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&zl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=C0(e,this.delimiter).slice(),r=this;n.length;){var s=n.shift();if(!s.length)break;r=r.getStateNode(s)}return r},t.prototype.resolve=function(e){var n,r=this;if(!e)return this.initialStateValue||Ul;switch(this.type){case"parallel":return Fc(this.initialStateValue,function(o,u){return o?r.getStateNode(u).resolve(e[u]||o):Ul});case"compound":if(xt(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?Fc(e,function(o,u){return o?r.getStateNode(u).resolve(o):Ul}):this.initialStateValue||{};default:return e||Ul}},t.prototype.getResolvedPath=function(e){if(zl(e)){var n=this.machine.idMap[e.slice(k0.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return C0(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=mA(this.states,function(r){return r.initialStateValue||Ul},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Qm(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var r=this.getStateNodes(e);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;xt(n.target)?e=zl(n.target)?$m(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,r){return r===void 0&&(r=!0),r?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Qm(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=um(this.initialStateValue);return Wt(n.map(function(r){return e.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=ft(e),r=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if(o.type==="history")return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:mA(this.states,function(n,r){if(!e)return n.historyValue();var s=xt(e)?void 0:e[r];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!e){var s=this.target;return s?Wt(um(s).map(function(u){return r.getFromRelativePath(u)})):r.initialStateNodes}var o=EB(r.path,"states")(e).current;return xt(o)?[r.getStateNode(o)]:Wt(um(o).map(function(u){return n.history==="deep"?r.getFromRelativePath(u):[r.states[u[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Wt(Object.keys(this.states).map(function(r){return e.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,r,s;if(this.__cache.events)return this.__cache.events;var o=this.states,u=new Set(this.ownEvents);if(o)try{for(var d=lt(Object.keys(o)),h=d.next();!h.done;h=d.next()){var f=h.value,v=o[f];if(v.states)try{for(var b=(r=void 0,lt(v.events)),x=b.next();!x.done;x=b.next()){var E=x.value;u.add("".concat(E))}}catch(A){r={error:A}}finally{try{x&&!x.done&&(s=b.return)&&s.call(b)}finally{if(r)throw r.error}}}}catch(A){e={error:A}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(u)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(r){if(!xt(r))return r;var s=r[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(r.slice(1));var o=s?n.key+r:r;if(n.parent)try{var u=n.parent.getStateNodeByPath(o);return u}catch(d){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(d.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,r=kB(e.target),s="internal"in e?e.internal:r?r.some(function(h){return xt(h)&&h[0]===n.delimiter}):!0,o=this.machine.options.guards,u=this.resolveTarget(r),d=pe(pe({},e),{actions:Aa(Ci(e.actions)),cond:VN(e.cond,o),target:u,source:this,internal:s,eventType:e.event,toJSON:function(){return pe(pe({},d),{target:d.target?d.target.map(function(h){return"#".concat(h.id)}):void 0,source:"#".concat(n.id)})}});return d},t.prototype.formatTransitions=function(){var e,n,r=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var o=this.config.on,u=wy,d=o[u],h=d===void 0?[]:d,f=Ax(o,[typeof u=="symbol"?u:u+""]);s=Wt(Object.keys(f).map(function(j){var z=Ll(j,f[j]);return z}).concat(Ll(wy,h)))}var v=this.config.always?Ll("",this.config.always):[],b=this.config.onDone?Ll(String(jf(this.id)),this.config.onDone):[],x=Wt(this.invoke.map(function(j){var z=[];return j.onDone&&z.push.apply(z,Ft([],ft(Ll(String(dm(j.id)),j.onDone)),!1)),j.onError&&z.push.apply(z,Ft([],ft(Ll(String(qc(j.id)),j.onError)),!1)),z})),E=this.after,A=Wt(Ft(Ft(Ft(Ft([],ft(b),!1),ft(x),!1),ft(s),!1),ft(v),!1).map(function(j){return Ci(j).map(function(z){return r.formatTransition(z)})}));try{for(var D=lt(E),M=D.next();!M.done;M=D.next()){var U=M.value;A.push(U)}}catch(j){e={error:j}}finally{try{M&&!M.done&&(n=D.return)&&n.call(D)}finally{if(e)throw e.error}}return A},t})();function u7(t,e,n){return n===void 0&&(n=t.context),new l7(t,e,n)}var c7=BB,D0;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(D0||(D0={}));var sd=O.useLayoutEffect;function bA(t){var e=O.useRef();return e.current||(e.current={v:t()}),e.current.v}var d7=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},h7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function f7(t,e){var n,r,s=d7([[],[]],2),o=s[0],u=s[1];try{for(var d=h7(t),h=d.next();!h.done;h=d.next()){var f=h.value;e(f)?o.push(f):u.push(f)}}catch(v){n={error:v}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return[o,u]}var Ic=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},xA=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function _A(t,e){var n=t.exec,r=n(e.context,e._event.data,{action:t,state:e,_event:e._event});r()}function m7(t){var e=O.useRef([]),n=O.useRef([]);sd(function(){var r=t.subscribe(function(s){var o,u;if(s.actions.length){var d=s.actions.filter(function(b){return typeof b.exec=="function"&&"__effect"in b.exec}),h=Ic(f7(d,function(b){return b.exec.__effect===D0.Effect}),2),f=h[0],v=h[1];(o=e.current).push.apply(o,xA([],Ic(f.map(function(b){return[b,s]})),!1)),(u=n.current).push.apply(u,xA([],Ic(v.map(function(b){return[b,s]})),!1))}});return function(){r.unsubscribe()}},[]),sd(function(){for(;n.current.length;){var r=Ic(n.current.shift(),2),s=r[0],o=r[1];_A(s,o)}}),O.useEffect(function(){for(;e.current.length;){var r=Ic(e.current.shift(),2),s=r[0],o=r[1];_A(s,o)}})}var ad=function(){return ad=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},ad.apply(this,arguments)},p7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};function g7(t,e,n){if(typeof t=="object")return t;var r=function(){};return{next:t,error:e||r,complete:n||r}}function v7(t,e,n){e===void 0&&(e={});var r=bA(function(){return typeof t=="function"?t():t}),s=e.context,o=e.guards,u=e.actions,d=e.activities,h=e.services,f=e.delays,v=e.state,b=p7(e,["context","guards","actions","activities","services","delays","state"]),x=bA(function(){var E={context:s,guards:o,actions:u,activities:d,services:h,delays:f},A=r.withConfig(E,function(){return ad(ad({},r.context),s)});return $N(A,ad({deferEvents:!0},b))});return sd(function(){var E;return n&&(E=x.subscribe(g7(n))),function(){E==null||E.unsubscribe()}},[n]),sd(function(){return x.start(v?vi.create(v):void 0),function(){x.stop()}},[]),sd(function(){Object.assign(x.machine.options.actions,u),Object.assign(x.machine.options.guards,o),Object.assign(x.machine.options.activities,d),Object.assign(x.machine.options.services,h),Object.assign(x.machine.options.delays,f)},[u,o,d,h,f]),m7(x),x}var y7=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],u;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){u={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o};function b7(t,e){e===void 0&&(e={});var n=O.useCallback(function(d){var h=d.changed===void 0&&Object.keys(d.children).length;(d.changed||h)&&u(d)},[]),r=v7(t,e,n),s=y7(O.useState(function(){var d=r.machine.initialState;return e.state?vi.create(e.state):d}),2),o=s[0],u=s[1];return[o,r.send,r]}function nn(){return nn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nn.apply(null,arguments)}function ou(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}const nt={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(nt.str(t)||nt.num(t))return t===e;if(nt.obj(t)&&nt.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return nt.und(n)?t===e:!0}};function x7(t,e){return n=>(nt.arr(n)?n:Object.keys(n)).reduce((r,s)=>{const o=s;return r[o]=t(o),r},t)}function _7(){const t=O.useState(!1),e=t[1];return O.useCallback(()=>e(r=>!r),[])}function So(t,e){return nt.und(t)||nt.nul(t)?e:t}function Vf(t){return nt.und(t)?[]:nt.arr(t)?t:[t]}function Zl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return nt.fun(t)?t(...n):t}function w7(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,ou(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Ey(t){const e=w7(t);if(nt.und(e))return nn({to:e},t);const n=Object.keys(t).reduce((r,s)=>nt.und(e[s])?nn({},r,{[s]:t[s]}):r,{});return nn({to:e},n)}function E7(t,e){return e&&(nt.fun(e)?e(t):nt.obj(e)&&(e.current=t)),t}class Ri{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class O0 extends Ri{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Ri&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Ri&&e.removeChild(this))}}class KN extends Ri{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Ri&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Ri&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const r in this.payload){const s=this.payload[r];e&&!(s instanceof Ri)||(n[r]=s instanceof Ri?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let Dx;function T7(t,e){Dx={fn:t,transform:e}}let YN;function S7(t){YN=t}let QN=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,Wm;function A7(t){Wm=t}let WN=()=>Date.now(),C7=t=>t.current,XN;function R7(t){XN=t}class I7 extends KN{constructor(e,n){super(),this.update=void 0,this.payload=e.style?nn({},e,{style:XN(e.style)}):e,this.update=n,this.attach()}}const N7=t=>nt.fun(t)&&!(t.prototype instanceof Nn.Component),k7=t=>O.forwardRef((n,r)=>{const s=_7(),o=O.useRef(!0),u=O.useRef(null),d=O.useRef(null),h=O.useCallback(x=>{const E=u.current,A=()=>{let D=!1;d.current&&(D=Dx.fn(d.current,u.current.getAnimatedValue())),(!d.current||D===!1)&&s()};u.current=new I7(x,A),E&&E.detach()},[]);O.useEffect(()=>()=>{o.current=!1,u.current&&u.current.detach()},[]),O.useImperativeHandle(r,()=>C7(d)),h(n);const f=u.current.getValue();f.scrollTop,f.scrollLeft;const v=ou(f,["scrollTop","scrollLeft"]),b=N7(t)?void 0:x=>d.current=E7(x,r);return Nn.createElement(t,nn({},v,{ref:b}))});let od=!1;const Vo=new Set,JN=()=>{if(!od)return!1;let t=WN();for(let e of Vo){let n=!1;for(let r=0;r<e.configs.length;r++){let s=e.configs[r],o,u;for(let d=0;d<s.animatedValues.length;d++){let h=s.animatedValues[d];if(h.done)continue;let f=s.fromValues[d],v=s.toValues[d],b=h.lastPosition,x=v instanceof Ri,E=Array.isArray(s.initialVelocity)?s.initialVelocity[d]:s.initialVelocity;if(x&&(v=v.getValue()),s.immediate){h.setValue(v),h.done=!0;continue}if(typeof f=="string"||typeof v=="string"){h.setValue(v),h.done=!0;continue}if(s.duration!==void 0)b=f+s.easing((t-h.startTime)/s.duration)*(v-f),o=t>=h.startTime+s.duration;else if(s.decay)b=f+E/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-h.startTime))),o=Math.abs(h.lastPosition-b)<.1,o&&(v=b);else{u=h.lastTime!==void 0?h.lastTime:t,E=h.lastVelocity!==void 0?h.lastVelocity:s.initialVelocity,t>u+64&&(u=t);let A=Math.floor(t-u);for(let j=0;j<A;++j){let z=-s.tension*(b-v),G=-s.friction*E,$=(z+G)/s.mass;E=E+$*1/1e3,b=b+E*1/1e3}let D=s.clamp&&s.tension!==0?f<v?b>v:b<v:!1,M=Math.abs(E)<=s.precision,U=s.tension!==0?Math.abs(v-b)<=s.precision:!0;o=D||M&&U,h.lastVelocity=E,h.lastTime=t}x&&!s.toValues[d].done&&(o=!1),o?(h.value!==v&&(b=v),h.done=!0):n=!0,h.setValue(b),h.lastPosition=b}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(Vo.delete(e),e.stop(!0))}return Vo.size?QN(JN):od=!1,od},D7=t=>{Vo.has(t)||Vo.add(t),od||(od=!0,QN(JN))},O7=t=>{Vo.has(t)&&Vo.delete(t)};function Xm(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Xm({range:t,output:e,extrapolate:n});if(Wm&&typeof t.output[0]=="string")return Wm(t);const r=t,s=r.output,o=r.range||[0,1],u=r.extrapolateLeft||r.extrapolate||"extend",d=r.extrapolateRight||r.extrapolate||"extend",h=r.easing||(f=>f);return f=>{const v=M7(f,o);return j7(f,o[v],o[v+1],s[v],s[v+1],h,u,d,r.map)}}function j7(t,e,n,r,s,o,u,d,h){let f=h?h(t):t;if(f<e){if(u==="identity")return f;u==="clamp"&&(f=e)}if(f>n){if(d==="identity")return f;d==="clamp"&&(f=n)}return r===s?r:e===n?t<=e?r:s:(e===-1/0?f=-f:n===1/0?f=f-e:f=(f-e)/(n-e),f=o(f),r===-1/0?f=-f:s===1/0?f=f+r:f=f*(s-r)+r,f)}function M7(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class _u extends O0{constructor(e,n,r,s){super(),this.calc=void 0,this.payload=e instanceof O0&&!(e instanceof _u)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Xm(n,r,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,r){this.calc=Xm(e,n,r)}interpolate(e,n,r){return new _u(this,e,n,r)}}const Bl=(t,e,n)=>t&&new _u(t,e,n),P7={default:{tension:170,friction:26}};function ZN(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>ZN(n,e))}class j0 extends Ri{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(r,s){s===void 0&&(s=!0),n.value=r,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&ZN(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,r){return new _u(this,e,n,r)}}class V7 extends O0{constructor(e){super(),this.payload=e.map(n=>new j0(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((r,s)=>this.payload[s].setValue(r,n)):this.payload.forEach(r=>r.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new _u(this,e,n)}}let L7=0,U7=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=L7++}update(e){if(!e)return this;const n=Ey(e),r=n.delay,s=r===void 0?0:r,o=n.to,u=ou(n,["delay","to"]);if(nt.arr(o)||nt.fun(o))this.queue.push(nn({},u,{delay:s,to:o}));else if(o){let d={};Object.entries(o).forEach(h=>{let f=h[0],v=h[1];const b=nn({to:{[f]:v},delay:Zl(s,f)},u),x=d[b.delay]&&d[b.delay].to;d[b.delay]=nn({},d[b.delay],b,{to:nn({},x,b.to)})}),this.queue=Object.values(d)}return this.queue=this.queue.sort((d,h)=>d.delay-h.delay),this.diff(u),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let o=s.from,u=o===void 0?{}:o,d=s.to,h=d===void 0?{}:d;nt.obj(u)&&(this.merged=nn({},u,this.merged)),nt.obj(h)&&(this.merged=nn({},this.merged,h))});const n=this.local=++this.guid,r=this.localQueue=this.queue;this.queue=[],r.forEach((s,o)=>{let u=s.delay,d=ou(s,["delay"]);const h=v=>{o===r.length-1&&n===this.guid&&v&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let f=nt.arr(d.to)||nt.fun(d.to);u?setTimeout(()=>{n===this.guid&&(f?this.runAsync(d,h):this.diff(d).start(h))},u):f?this.runAsync(d,h):this.diff(d).start(h)})}else nt.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),D7(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&O7(this),this}runAsync(e,n){var r=this;e.delay;let s=ou(e,["delay"]);const o=this.local;let u=Promise.resolve(void 0);if(nt.arr(s.to))for(let d=0;d<s.to.length;d++){const h=d,f=nn({},s,Ey(s.to[h]));nt.arr(f.config)&&(f.config=f.config[h]),u=u.then(()=>{if(o===this.guid)return new Promise(v=>this.diff(f).start(v))})}else if(nt.fun(s.to)){let d=0,h;u=u.then(()=>s.to(f=>{const v=nn({},s,Ey(f));if(nt.arr(v.config)&&(v.config=v.config[d]),d++,o===this.guid)return h=new Promise(b=>this.diff(v).start(b))},function(f){return f===void 0&&(f=!0),r.stop(f)}).then(()=>h))}u.then(n)}diff(e){this.props=nn({},this.props,e);let n=this.props,r=n.from,s=r===void 0?{}:r,o=n.to,u=o===void 0?{}:o,d=n.config,h=d===void 0?{}:d,f=n.reverse,v=n.attach,b=n.reset,x=n.immediate;if(f){var E=[u,s];s=E[0],u=E[1]}this.merged=nn({},s,this.merged,u),this.hasChanged=!1;let A=v&&v(this);if(this.animations=Object.entries(this.merged).reduce((D,M)=>{let U=M[0],j=M[1],z=D[U]||{};const G=nt.num(j),$=nt.str(j)&&!j.startsWith("#")&&!/\d/.test(j)&&!YN[j],q=nt.arr(j),C=!G&&!q&&!$;let S=nt.und(s[U])?j:s[U],I=G||q||$?j:1,V=Zl(h,U);A&&(I=A.animations[U].parent);let P=z.parent,L=z.interpolation,N=Vf(A?I.getPayload():I),be,ke=j;C&&(ke=Wm({range:[0,1],output:[j,j]})(1));let Q=L&&L.getValue();const he=!nt.und(P)&&z.animatedValues.some(J=>!J.done),we=!nt.equ(ke,Q),Ee=!nt.equ(ke,z.previous),B=!nt.equ(V,z.config);if(b||Ee&&we||B){if(G||$)P=L=z.parent||new j0(S);else if(q)P=L=z.parent||new V7(S);else if(C){let J=z.interpolation&&z.interpolation.calc(z.parent.value);J=J!==void 0&&!b?J:S,z.parent?(P=z.parent,P.setValue(0,!1)):P=new j0(0);const ee={output:[J,j]};z.interpolation?(L=z.interpolation,z.interpolation.updateConfig(ee)):L=P.interpolate(ee)}return N=Vf(A?I.getPayload():I),be=Vf(P.getPayload()),b&&!C&&P.setValue(S,!1),this.hasChanged=!0,be.forEach(J=>{J.startPosition=J.value,J.lastPosition=J.value,J.lastVelocity=he?J.lastVelocity:void 0,J.lastTime=he?J.lastTime:void 0,J.startTime=WN(),J.done=!1,J.animatedStyles.clear()}),Zl(x,U)&&P.setValue(C?I:j,!1),nn({},D,{[U]:nn({},z,{name:U,parent:P,interpolation:L,animatedValues:be,toValues:N,previous:ke,config:V,fromValues:Vf(P.getValue()),immediate:Zl(x,U),initialVelocity:So(V.velocity,0),clamp:So(V.clamp,!1),precision:So(V.precision,.01),tension:So(V.tension,170),friction:So(V.friction,26),mass:So(V.mass,1),duration:V.duration,easing:So(V.easing,J=>J),decay:V.decay})})}else return we?D:(C&&(P.setValue(1,!1),L.updateConfig({output:[ke,ke]})),P.done=!0,this.hasChanged=!0,nn({},D,{[U]:nn({},D[U],{previous:ke})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let D in this.animations)this.interpolations[D]=this.animations[D].interpolation,this.values[D]=this.animations[D].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const z7=(t,e)=>{const n=O.useRef(!1),r=O.useRef(),s=nt.fun(e),o=O.useMemo(()=>{r.current&&(r.current.map(b=>b.destroy()),r.current=void 0);let v;return[new Array(t).fill().map((b,x)=>{const E=new U7,A=s?Zl(e,x,E):e[x];return x===0&&(v=A.ref),E.update(A),v||E.start(),E}),v]},[t]),u=o[0],d=o[1];r.current=u,O.useImperativeHandle(d,()=>({start:()=>Promise.all(r.current.map(v=>new Promise(b=>v.start(b)))),stop:v=>r.current.forEach(b=>b.stop(v)),get controllers(){return r.current}}));const h=O.useMemo(()=>v=>r.current.map((b,x)=>{b.update(s?Zl(v,x,b):v[x]),d||b.start()}),[t]);O.useEffect(()=>{n.current?s||h(e):d||r.current.forEach(v=>v.start())}),O.useEffect(()=>(n.current=!0,()=>r.current.forEach(v=>v.destroy())),[]);const f=r.current.map(v=>v.getValues());return s?[f,h,v=>r.current.forEach(b=>b.pause(v))]:f},B7=t=>{const e=nt.fun(t),n=z7(1,e?t:[t]),r=n[0],s=n[1],o=n[2];return e?[r[0],s,o]:r};class F7 extends KN{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Ri)&&(e=Dx.transform(e)),this.payload=e}}const Jm={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ki="[-+]?\\d*\\.?\\d+",Zm=ki+"%";function Bp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const q7=new RegExp("rgb"+Bp(ki,ki,ki)),H7=new RegExp("rgba"+Bp(ki,ki,ki,ki)),G7=new RegExp("hsl"+Bp(ki,Zm,Zm)),$7=new RegExp("hsla"+Bp(ki,Zm,Zm,ki)),K7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Y7=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Q7=/^#([0-9a-fA-F]{6})$/,W7=/^#([0-9a-fA-F]{8})$/;function X7(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=Q7.exec(t))?parseInt(e[1]+"ff",16)>>>0:Jm.hasOwnProperty(t)?Jm[t]:(e=q7.exec(t))?(Fl(e[1])<<24|Fl(e[2])<<16|Fl(e[3])<<8|255)>>>0:(e=H7.exec(t))?(Fl(e[1])<<24|Fl(e[2])<<16|Fl(e[3])<<8|TA(e[4]))>>>0:(e=K7.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=W7.exec(t))?parseInt(e[1],16)>>>0:(e=Y7.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=G7.exec(t))?(wA(EA(e[1]),Lf(e[2]),Lf(e[3]))|255)>>>0:(e=$7.exec(t))?(wA(EA(e[1]),Lf(e[2]),Lf(e[3]))|TA(e[4]))>>>0:null}function Ty(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function wA(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=Ty(s,r,t+1/3),u=Ty(s,r,t),d=Ty(s,r,t-1/3);return Math.round(o*255)<<24|Math.round(u*255)<<16|Math.round(d*255)<<8}function Fl(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function EA(t){return(parseFloat(t)%360+360)%360/360}function TA(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Lf(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function SA(t){let e=X7(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,r=(e&16711680)>>>16,s=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${r}, ${s}, ${o})`}const Uf=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,J7=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Z7=new RegExp(`(${Object.keys(Jm).join("|")})`,"g"),eF=t=>{const e=t.output.map(s=>s.replace(J7,SA)).map(s=>s.replace(Z7,SA)),n=e[0].match(Uf).map(()=>[]);e.forEach(s=>{s.match(Uf).forEach((o,u)=>n[u].push(+o))});const r=e[0].match(Uf).map((s,o)=>Xm(nn({},t,{output:n[o]})));return s=>{let o=0;return e[0].replace(Uf,()=>r[o++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(u,d,h,f,v)=>`rgba(${Math.round(d)}, ${Math.round(h)}, ${Math.round(f)}, ${v})`)}};let ld={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const tF=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),nF=["Webkit","Ms","Moz","O"];ld=Object.keys(ld).reduce((t,e)=>(nF.forEach(n=>t[tF(n,e)]=t[e]),t),ld);function rF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(ld.hasOwnProperty(t)&&ld[t])?e+"px":(""+e).trim()}const AA={};R7(t=>new F7(t));A7(eF);S7(Jm);T7((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,o=e.children,u=e.scrollTop,d=e.scrollLeft,h=ou(e,["style","children","scrollTop","scrollLeft"]),f=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";u!==void 0&&(t.scrollTop=u),d!==void 0&&(t.scrollLeft=d),o!==void 0&&(t.textContent=o);for(let v in s)if(s.hasOwnProperty(v)){var n=v.indexOf("--")===0,r=rF(v,s[v],n);v==="float"&&(v="cssFloat"),n?t.style.setProperty(v,r):t.style[v]=r}for(let v in h){const b=f?v:AA[v]||(AA[v]=v.replace(/([A-Z])/g,x=>"-"+x.toLowerCase()));typeof t.getAttribute(b)<"u"&&t.setAttribute(b,h[v])}return}else return!1},t=>t);const iF=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],sF=x7(k7),aF=sF(iF);function CA(t,e){return t.map(function(n,r){return n+e[r]})}function ek(t,e){return t.map(function(n,r){return n-e[r]})}function M0(t){return Math.hypot.apply(Math,t)}function oF(t,e,n){var r=M0(e),s=r===0?0:1/r,o=n===0?0:1/n,u=o*r,d=e.map(function(v){return o*v}),h=e.map(function(v){return s*v}),f=M0(t);return{velocities:d,velocity:u,distance:f,direction:h}}function P0(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function lF(t,e,n){return Math.max(e,Math.min(t,n))}function uF(t,e){return Math.pow(t,e*5)}function RA(t,e,n){return e===0||Math.abs(e)===1/0?uF(t,n):t*e*n/(e+n*t)}function ud(t,e,n,r){return r===void 0&&(r=.15),r===0?lF(t,e,n):t<e?-RA(e-t,n-e,r)+e:t>n?+RA(t-n,n-e,r)+n:t}function cF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dF(t,e,n){return e&&cF(t.prototype,e),t}function Er(){return Er=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Er.apply(this,arguments)}function tk(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function hF(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function zf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fF(t,e){if(t){if(typeof t=="string")return IA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IA(t,e)}}function IA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fp(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=fF(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function nk(){}function rk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?nk:e.length===1?e[0]:function(){for(var r,s=Fp(e),o;!(o=s()).done;){var u=o.value;r=u.apply(this,arguments)||r}return r}}function Ca(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function Bf(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}else return t}function Ox(t,e){t===void 0&&(t={});for(var n={},r=0,s=Object.entries(e);r<s.length;r++){var o=s[r],u=o[0],d=o[1];switch(typeof d){case"function":n[u]=d.call(n,t[u],u,t);break;case"object":n[u]=Ox(t[u],d);break;case"boolean":d&&(n[u]=t[u]);break}}return n}var mF=180,pF=.15,gF=.5,vF=60,yF={threshold:function(e){return e===void 0&&(e=0),Ca(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Ca(pF);case!1:return Ca(0);default:return Ca(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Ca(e)}},ik=Er({},yF,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(b){return ik.bounds(e(b))};var n=e,r=n.left,s=r===void 0?-1/0:r,o=n.right,u=o===void 0?1/0:o,d=n.top,h=d===void 0?-1/0:d,f=n.bottom,v=f===void 0?1/0:f;return[[s,u],[h,v]]}}),bF=typeof window<"u"&&window.document&&window.document.createElement,xF={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=bF?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,r=n.passive,s=r===void 0?!0:r,o=n.capture,u=o===void 0?!1:o;return{passive:s,capture:u}}},_F=Er({},ik,{threshold:function(e,n,r){var s=r.filterTaps,o=s===void 0?!1:s,u=r.lockDirection,d=u===void 0?!1:u,h=r.axis,f=h===void 0?void 0:h,v=Ca(e,o?3:d||f?1:0);return this.filterTaps=o||v[0]+v[1]>0,v},swipeVelocity:function(e){return e===void 0&&(e=gF),Ca(e)},swipeDistance:function(e){return e===void 0&&(e=vF),Ca(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return mF;case!1:return 0;default:return e}}});function wF(t){return t===void 0&&(t={}),Ox(t,xF)}function EF(t){return t===void 0&&(t={}),Ox(t,_F)}function TF(t){var e=t.domTarget,n=t.eventOptions,r=t.window,s=t.enabled,o=hF(t,["domTarget","eventOptions","window","enabled"]),u=wF({domTarget:e,eventOptions:n,window:r,enabled:s});return u.drag=EF(o),u}function Nc(t){return Er({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:nk,canceled:!1,memo:void 0,args:void 0},t)}function sk(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Nc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Nc({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),r=Nc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=Nc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=Nc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:r,move:s,scroll:o}}var No=new Map,SF=(function(){function t(n,r){var s=this;r===void 0&&(r=[]),this.controller=n,this.args=r,this.debounced=!0,this.setTimeout=function(o,u){var d;u===void 0&&(u=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var h=arguments.length,f=new Array(h>2?h-2:0),v=2;v<h;v++)f[v-2]=arguments[v];s.controller.timeouts[s.stateKey]=(d=window).setTimeout.apply(d,[o,u].concat(f))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!o&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var u=s.state.active,d=s.state._active;s.state.active=d,s.state.first=d&&!u,s.state.last=u&&!d,s.controller.state.shared[s.ingKey]=d}var h=Er({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),f=s.handler(h);return s.state.memo=f!==void 0?f:s.state.memo,s.state._active||s.clean(),h}}var e=t.prototype;return e.updateSharedState=function(r){Object.assign(this.controller.state.shared,r)},e.updateGestureState=function(r){Object.assign(this.state,r)},e.checkIntentionality=function(r,s){return{_intentional:r,_blocked:!1}},e.getMovement=function(r){var s=this.config,o=s.initial,u=s.bounds,d=s.rubberband,h=s.threshold,f=this.state,v=f._bounds,b=f._initial,x=f._active,E=f._intentional,A=f.lastOffset,D=f.movement,M=this.getInternalMovement(r,this.state),U=E[0]===!1?NA(M[0],h[0]):E[0],j=E[1]===!1?NA(M[1],h[1]):E[1],z=this.checkIntentionality([U,j],M);if(z._blocked)return Er({},z,{_movement:M,delta:[0,0]});var G=z._intentional,$=M,q,C;if(G[0]!==!1&&E[0]===!1&&(C=Bf(o,this.state),q=Bf(u,this.state),b[0]=C[0],v[0]=q[0]),G[1]!==!1&&E[1]===!1){var S,I;C=(S=C)!=null?S:Bf(o,this.state),q=(I=q)!=null?I:Bf(u,this.state),b[1]=C[1],v[1]=q[1]}var V=[G[0]!==!1?M[0]-G[0]:b[0],G[1]!==!1?M[1]-G[1]:b[1]],P=CA(V,A),L=x?d:[0,0];return V=kA(v,CA(V,b),L),Er({},z,{intentional:G[0]!==!1||G[1]!==!1,_initial:b,_movement:$,movement:V,values:r,offset:kA(v,P,L),delta:ek(V,D)})},e.clean=function(){this.clearTimeout()},dF(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function NA(t,e){return Math.abs(t)>=e?P0(t)*e:!1}function kA(t,e,n){var r=e[0],s=e[1],o=n[0],u=n[1],d=t[0],h=d[0],f=d[1],v=t[1],b=v[0],x=v[1];return[ud(r,h,f,o),ud(s,b,x,u)]}function Sy(t,e,n){var r=t.state,s=t.args,o=e.timeStamp,u=e.type,d=r.values,h=n?0:o-r.startTime;return{_lastEventType:u,event:e,timeStamp:o,elapsedTime:h,args:s,previous:d}}function AF(t,e,n){var r=t.state.offset,s=n.timeStamp;return Er({},sk()[t.stateKey],{_active:!0,values:e,initial:e,offset:r,lastOffset:r,startTime:s})}function CF(t,e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return t.call.apply(t,[this,Er({},e,{event:n})].concat(s))}}var RF=function(e){var n=this;this.classes=e,this.bind=function(){for(var r={},s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];for(var d=Fp(n.classes),h;!(h=d()).done;){var f=h.value;new f(n,o).addBindings(r)}for(var v=0,b=Object.entries(n.nativeRefs);v<b.length;v++){var x=b[v],E=x[0],A=x[1];V0(r,E,CF(A,Er({},n.state.shared,{args:o})))}return n.config.domTarget?DF(n,r):OF(n,r)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var r=ok(n.config),s=n.config.eventOptions;r&&Xd(r,ak(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),IF(n)},this.state=sk(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function IF(t){var e=t.config,n=e.window,r=e.eventOptions,s=t.windowListeners;if(n){for(var o in s){var u=s[o];Xd(n,u,r)}t.windowListeners={}}}function NF(t,e){var n=t.config,r=t.windowListeners;n.window&&(Xd(n.window,r[e],n.eventOptions),delete r[e])}function kF(t,e,n){var r=t.config,s=t.windowListeners;n===void 0&&(n=[]),r.window&&(Xd(r.window,s[e],r.eventOptions),lk(r.window,s[e]=n,r.eventOptions))}function DF(t,e){var n=t.config,r=t.domListeners,s=ok(n);if(!s)throw new Error("domTarget must be defined");var o=n.eventOptions;Xd(s,ak(r),o);for(var u=0,d=Object.entries(e);u<d.length;u++){var h=d[u],f=h[0],v=h[1],b=f.slice(2).toLowerCase();r.push([b,rk.apply(void 0,v)])}lk(s,r,o)}function OF(t,e){for(var n=t.config,r={},s=n.eventOptions.capture?"Capture":"",o=0,u=Object.entries(e);o<u.length;o++){var d=u[o],h=d[0],f=d[1],v=Array.isArray(f)?f:[f],b=h+s;r[b]=rk.apply(void 0,v)}return r}function ak(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function ok(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function V0(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function lk(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var r=Fp(e),s;!(s=r()).done;){var o=s.value,u=o[0],d=o[1];t.addEventListener(u,d,n)}}function Xd(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var r=Fp(e),s;!(s=r()).done;){var o=s.value,u=o[0],d=o[1];t.removeEventListener(u,d,n)}}function jF(t,e,n){n===void 0&&(n={});var r=PF(t),s=Nn.useMemo(function(){return new RF(r)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,Nn.useEffect(s.effect,[]),s.config.domTarget?MF:s.bind}function MF(){}function PF(t){var e=new Set;return t.drag&&e.add(No.get("drag")),t.wheel&&e.add(No.get("wheel")),t.scroll&&e.add(No.get("scroll")),t.move&&e.add(No.get("move")),t.pinch&&e.add(No.get("pinch")),t.hover&&e.add(No.get("hover")),e}var VF=(function(t){tk(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,o){return ek(s,o.initial)},n.checkIntentionality=function(s,o){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var u=o.map(Math.abs),d=u[0],h=u[1],f=this.state.axis||(d>h?"x":d<h?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:f}:f?this.config.axis&&f!==this.config.axis?{_intentional:s,_blocked:!0,axis:f}:(s[f==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:f}):{_intentional:[!1,!1],_blocked:!1,axis:f}},n.getKinematics=function(s,o){var u=this.getMovement(s);if(!u._blocked){var d=o.timeStamp-this.state.timeStamp;Object.assign(u,oF(u.movement,u.delta,d))}return u},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(SF);function uk(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function DA(t){var e="buttons"in t?t.buttons:0,n=uk(t),r=n&&n.length||0,s=r>0||e>0,o=t.shiftKey,u=t.altKey,d=t.metaKey,h=t.ctrlKey;return{touches:r,down:s,buttons:e,shiftKey:o,altKey:u,metaKey:d,ctrlKey:h}}function OA(t){var e=uk(t),n=e?e[0]:t,r=n.clientX,s=n.clientY;return[r,s]}var LF=3,UF=220,zF=(function(t){tk(e,t);function e(){var r;return r=t.apply(this,arguments)||this,r.ingKey="dragging",r.stateKey="drag",r.onDragStart=function(s){!r.enabled||r.state._active||(kF(r.controller,r.stateKey,[["pointermove",r.onDragChange],["pointerup",r.onDragEnd],["pointercancel",r.onDragEnd]]),r.updateGestureState({_pointerId:s.pointerId}),r.config.delay>0?(r.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),r.setTimeout(r.startDrag.bind(zf(r)),r.config.delay,s)):r.startDrag(s))},r.onDragChange=function(s){if(!r.state.canceled&&s.pointerId===r.state._pointerId){if(!r.state._active){r.state._delayedEvent&&(r.clearTimeout(),r.startDrag(s));return}var o=DA(s);if(!o.down){r.onDragEnd(s);return}r.updateSharedState(o);var u=OA(s),d=r.getKinematics(u,s),h=Sy(zf(r),s),f=r.state._isTap,v=M0(d._movement);f&&v>=LF&&(f=!1),r.updateGestureState(Er({},h,d,{_isTap:f})),r.fireGestureHandler()}},r.onDragEnd=function(s){if(s.pointerId===r.state._pointerId){r.state._active=!1,r.updateSharedState({down:!1,buttons:0,touches:0});var o=r.state._isTap,u=r.state.velocities,d=u[0],h=u[1],f=r.state.movement,v=f[0],b=f[1],x=r.state._intentional,E=x[0],A=x[1],D=r.config.swipeVelocity,M=D[0],U=D[1],j=r.config.swipeDistance,z=j[0],G=j[1],$=Er({},Sy(zf(r),s),r.getMovement(r.state.values)),q=[0,0];$.elapsedTime<UF&&(E!==!1&&Math.abs(d)>M&&Math.abs(v)>z&&(q[0]=P0(d)),A!==!1&&Math.abs(h)>U&&Math.abs(b)>G&&(q[1]=P0(h))),r.updateGestureState(Er({},$,{tap:o,swipe:q})),r.fireGestureHandler(o===!0)}},r.clean=function(){t.prototype.clean.call(zf(r)),r.state._delayedEvent=!1,NF(r.controller,r.stateKey)},r.onCancel=function(){r.state.canceled||(r.updateGestureState({canceled:!0}),r.state._active=!1,r.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return r.fireGestureHandler()}))},r.onClick=function(s){r.state._isTap||s.stopPropagation()},r}var n=e.prototype;return n.startDrag=function(s){var o=OA(s);this.updateSharedState(DA(s)),this.updateGestureState(Er({},AF(this,o,s),Sy(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(s){if(V0(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";V0(s,o,this.onClick)}},e})(VF);function BF(t,e){var n,r=[],s,o=!1;function u(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return o&&n===this&&e(h,r)||(s=t.apply(this,h),o=!0,n=this,r=h),s}return u}function fm(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!fm(t[r],e[r]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;for(o=t.entries();!(r=o.next()).done;)if(!fm(r.value[1],e.get(r.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!(s[r]==="_owner"&&t.$$typeof)&&!fm(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}function FF(t,e){try{return fm(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function qF(t,e){e===void 0&&(e={}),No.set("drag",zF);var n=O.useRef();return n.current||(n.current=BF(TF,FF)),jF({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ck=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ep=ck.join(","),dk=typeof Element>"u",Ko=dk?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,L0=!dk&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},hk=function(e,n,r){var s=Array.prototype.slice.apply(e.querySelectorAll(ep));return n&&Ko.call(e,ep)&&s.unshift(e),s=s.filter(r),s},fk=function t(e,n,r){for(var s=[],o=Array.from(e);o.length;){var u=o.shift();if(u.tagName==="SLOT"){var d=u.assignedElements(),h=d.length?d:u.children,f=t(h,!0,r);r.flatten?s.push.apply(s,f):s.push({scope:u,candidates:f})}else{var v=Ko.call(u,ep);v&&r.filter(u)&&(n||!e.includes(u))&&s.push(u);var b=u.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(u),x=!r.shadowRootFilter||r.shadowRootFilter(u);if(b&&x){var E=t(b===!0?u.children:b.children,!0,r);r.flatten?s.push.apply(s,E):s.push({scope:u,candidates:E})}else o.unshift.apply(o,u.children)}}return s},mk=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},HF=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},pk=function(e){return e.tagName==="INPUT"},GF=function(e){return pk(e)&&e.type==="hidden"},$F=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},KF=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},YF=function(e){if(!e.name)return!0;var n=e.form||L0(e),r=function(d){return n.querySelectorAll('input[type="radio"][name="'+d+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var o=KF(s,e.form);return!o||o===e},QF=function(e){return pk(e)&&e.type==="radio"},WF=function(e){return QF(e)&&!YF(e)},jA=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},XF=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=Ko.call(e,"details>summary:first-of-type"),u=o?e.parentElement:e;if(Ko.call(u,"details:not([open]) *"))return!0;var d=L0(e).host,h=(d==null?void 0:d.ownerDocument.contains(d))||e.ownerDocument.contains(e);if(!r||r==="full"){if(typeof s=="function"){for(var f=e;e;){var v=e.parentElement,b=L0(e);if(v&&!v.shadowRoot&&s(v)===!0)return jA(e);e.assignedSlot?e=e.assignedSlot:!v&&b!==e.ownerDocument?e=b.host:e=v}e=f}if(h)return!e.getClientRects().length}else if(r==="non-zero-area")return jA(e);return!1},JF=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Ko.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},tp=function(e,n){return!(n.disabled||GF(n)||XF(n,e)||$F(n)||JF(n))},U0=function(e,n){return!(WF(n)||mk(n)<0||!tp(e,n))},ZF=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},eq=function t(e){var n=[],r=[];return e.forEach(function(s,o){var u=!!s.scope,d=u?s.scope:s,h=mk(d,u),f=u?t(s.candidates):d;h===0?u?n.push.apply(n,f):n.push(d):r.push({documentOrder:o,tabIndex:h,item:s,isScope:u,content:f})}),r.sort(HF).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(n)},tq=function(e,n){n=n||{};var r;return n.getShadowRoot?r=fk([e],n.includeContainer,{filter:U0.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ZF}):r=hk(e,n.includeContainer,U0.bind(null,n)),eq(r)},nq=function(e,n){n=n||{};var r;return n.getShadowRoot?r=fk([e],n.includeContainer,{filter:tp.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=hk(e,n.includeContainer,tp.bind(null,n)),r},Ff=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ko.call(e,ep)===!1?!1:U0(n,e)},rq=ck.concat("iframe").join(","),Ay=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ko.call(e,rq)===!1?!1:tp(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function MA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function PA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MA(Object(n),!0).forEach(function(r){iq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var VA=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var r=t[t.length-1];r!==n&&r.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var r=t.indexOf(n);r!==-1&&t.splice(r,1),t.length>0&&t[t.length-1].unpause()}}})(),sq=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},aq=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},oq=function(e){return e.key==="Tab"||e.keyCode===9},LA=function(e){return setTimeout(e,0)},UA=function(e,n){var r=-1;return e.every(function(s,o){return n(s)?(r=o,!1):!0}),r},kc=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,r):e},qf=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},lq=function(e,n){var r=(n==null?void 0:n.document)||document,s=PA({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},u,d=function(q,C,S){return q&&q[C]!==void 0?q[C]:s[S||C]},h=function(q){return o.containerGroups.findIndex(function(C){var S=C.container,I=C.tabbableNodes;return S.contains(q)||I.find(function(V){return V===q})})},f=function(q){var C=s[q];if(typeof C=="function"){for(var S=arguments.length,I=new Array(S>1?S-1:0),V=1;V<S;V++)I[V-1]=arguments[V];C=C.apply(void 0,I)}if(C===!0&&(C=void 0),!C){if(C===void 0||C===!1)return C;throw new Error("`".concat(q,"` was specified but was not a node, or did not return a node"))}var P=C;if(typeof C=="string"&&(P=r.querySelector(C),!P))throw new Error("`".concat(q,"` as selector refers to no known node"));return P},v=function(){var q=f("initialFocus");if(q===!1)return!1;if(q===void 0)if(h(r.activeElement)>=0)q=r.activeElement;else{var C=o.tabbableGroups[0],S=C&&C.firstTabbableNode;q=S||f("fallbackFocus")}if(!q)throw new Error("Your focus-trap needs to have at least one focusable element");return q},b=function(){if(o.containerGroups=o.containers.map(function(q){var C=tq(q,s.tabbableOptions),S=nq(q,s.tabbableOptions);return{container:q,tabbableNodes:C,focusableNodes:S,firstTabbableNode:C.length>0?C[0]:null,lastTabbableNode:C.length>0?C[C.length-1]:null,nextTabbableNode:function(V){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,L=S.findIndex(function(N){return N===V});if(!(L<0))return P?S.slice(L+1).find(function(N){return Ff(N,s.tabbableOptions)}):S.slice(0,L).reverse().find(function(N){return Ff(N,s.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(q){return q.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},x=function $(q){if(q!==!1&&q!==r.activeElement){if(!q||!q.focus){$(v());return}q.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=q,sq(q)&&q.select()}},E=function(q){var C=f("setReturnFocus",q);return C||(C===!1?!1:q)},A=function(q){var C=qf(q);if(!(h(C)>=0)){if(kc(s.clickOutsideDeactivates,q)){u.deactivate({returnFocus:s.returnFocusOnDeactivate&&!Ay(C,s.tabbableOptions)});return}kc(s.allowOutsideClick,q)||q.preventDefault()}},D=function(q){var C=qf(q),S=h(C)>=0;S||C instanceof Document?S&&(o.mostRecentlyFocusedNode=C):(q.stopImmediatePropagation(),x(o.mostRecentlyFocusedNode||v()))},M=function(q){var C=qf(q);b();var S=null;if(o.tabbableGroups.length>0){var I=h(C),V=I>=0?o.containerGroups[I]:void 0;if(I<0)q.shiftKey?S=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:S=o.tabbableGroups[0].firstTabbableNode;else if(q.shiftKey){var P=UA(o.tabbableGroups,function(se){var he=se.firstTabbableNode;return C===he});if(P<0&&(V.container===C||Ay(C,s.tabbableOptions)&&!Ff(C,s.tabbableOptions)&&!V.nextTabbableNode(C,!1))&&(P=I),P>=0){var L=P===0?o.tabbableGroups.length-1:P-1,N=o.tabbableGroups[L];S=N.lastTabbableNode}}else{var be=UA(o.tabbableGroups,function(se){var he=se.lastTabbableNode;return C===he});if(be<0&&(V.container===C||Ay(C,s.tabbableOptions)&&!Ff(C,s.tabbableOptions)&&!V.nextTabbableNode(C))&&(be=I),be>=0){var ke=be===o.tabbableGroups.length-1?0:be+1,Q=o.tabbableGroups[ke];S=Q.firstTabbableNode}}}else S=f("fallbackFocus");S&&(q.preventDefault(),x(S))},U=function(q){if(aq(q)&&kc(s.escapeDeactivates,q)!==!1){q.preventDefault(),u.deactivate();return}if(oq(q)){M(q);return}},j=function(q){var C=qf(q);h(C)>=0||kc(s.clickOutsideDeactivates,q)||kc(s.allowOutsideClick,q)||(q.preventDefault(),q.stopImmediatePropagation())},z=function(){if(o.active)return VA.activateTrap(u),o.delayInitialFocusTimer=s.delayInitialFocus?LA(function(){x(v())}):x(v()),r.addEventListener("focusin",D,!0),r.addEventListener("mousedown",A,{capture:!0,passive:!1}),r.addEventListener("touchstart",A,{capture:!0,passive:!1}),r.addEventListener("click",j,{capture:!0,passive:!1}),r.addEventListener("keydown",U,{capture:!0,passive:!1}),u},G=function(){if(o.active)return r.removeEventListener("focusin",D,!0),r.removeEventListener("mousedown",A,!0),r.removeEventListener("touchstart",A,!0),r.removeEventListener("click",j,!0),r.removeEventListener("keydown",U,!0),u};return u={get active(){return o.active},get paused(){return o.paused},activate:function(q){if(o.active)return this;var C=d(q,"onActivate"),S=d(q,"onPostActivate"),I=d(q,"checkCanFocusTrap");I||b(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,C&&C();var V=function(){I&&b(),z(),S&&S()};return I?(I(o.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(q){if(!o.active)return this;var C=PA({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},q);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,G(),o.active=!1,o.paused=!1,VA.deactivateTrap(u);var S=d(C,"onDeactivate"),I=d(C,"onPostDeactivate"),V=d(C,"checkCanReturnFocus"),P=d(C,"returnFocus","returnFocusOnDeactivate");S&&S();var L=function(){LA(function(){P&&x(E(o.nodeFocusedBeforeActivation)),I&&I()})};return P&&V?(V(E(o.nodeFocusedBeforeActivation)).then(L,L),this):(L(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,G(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,b(),z(),this)},updateContainerElements:function(q){var C=[].concat(q).filter(Boolean);return o.containers=C.map(function(S){return typeof S=="string"?r.querySelector(S):S}),o.active&&b(),this}},u.updateContainerElements(e),u};function uq(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var jx=!1;if(typeof window<"u"){var zA={get passive(){jx=!0}};window.addEventListener("testPassive",null,zA),window.removeEventListener("testPassive",null,zA)}var gk=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),Ia=[],np=!1,vk=-1,cd=void 0,dd=void 0,yk=function(e){return Ia.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},rp=function(e){var n=e||window.event;return yk(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},cq=function(e){if(dd===void 0){var n=!!e&&e.reserveScrollBarGap===!0,r=window.innerWidth-document.documentElement.clientWidth;n&&r>0&&(dd=document.body.style.paddingRight,document.body.style.paddingRight=r+"px")}cd===void 0&&(cd=document.body.style.overflow,document.body.style.overflow="hidden")},dq=function(){dd!==void 0&&(document.body.style.paddingRight=dd,dd=void 0),cd!==void 0&&(document.body.style.overflow=cd,cd=void 0)},hq=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},fq=function(e,n){var r=e.targetTouches[0].clientY-vk;return yk(e.target)?!1:n&&n.scrollTop===0&&r>0||hq(n)&&r<0?rp(e):(e.stopPropagation(),!0)},mq=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!Ia.some(function(s){return s.targetElement===e})){var r={targetElement:e,options:n||{}};Ia=[].concat(uq(Ia),[r]),gk?(e.ontouchstart=function(s){s.targetTouches.length===1&&(vk=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&fq(s,e)},np||(document.addEventListener("touchmove",rp,jx?{passive:!1}:void 0),np=!0)):cq(n)}},pq=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}Ia=Ia.filter(function(n){return n.targetElement!==e}),gk?(e.ontouchstart=null,e.ontouchmove=null,np&&Ia.length===0&&(document.removeEventListener("touchmove",rp,jx?{passive:!1}:void 0),np=!1)):Ia.length||dq()},Lo=[],gq=function(){return Lo.some(function(t){return t.activeTargets.length>0})},vq=function(){return Lo.some(function(t){return t.skippedTargets.length>0})},BA="ResizeObserver loop completed with undelivered notifications.",yq=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:BA}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=BA),window.dispatchEvent(t)},kd;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(kd||(kd={}));var Uo=function(t){return Object.freeze(t)},bq=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,Uo(this)}return t})(),bk=(function(){function t(e,n,r,s){return this.x=e,this.y=n,this.width=r,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Uo(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,r=e.y,s=e.top,o=e.right,u=e.bottom,d=e.left,h=e.width,f=e.height;return{x:n,y:r,top:s,right:o,bottom:u,left:d,width:h,height:f}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),Mx=function(t){return t instanceof SVGElement&&"getBBox"in t},xk=function(t){if(Mx(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var s=t,o=s.offsetWidth,u=s.offsetHeight;return!(o||u||t.getClientRects().length)},FA=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},xq=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},hd=typeof window<"u"?window:{},Hf=new WeakMap,qA=/auto|scroll/,_q=/^tb|vertical/,wq=/msie|trident/i.test(hd.navigator&&hd.navigator.userAgent),qi=function(t){return parseFloat(t||"0")},lu=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new bq((n?e:t)||0,(n?t:e)||0)},HA=Uo({devicePixelContentBoxSize:lu(),borderBoxSize:lu(),contentBoxSize:lu(),contentRect:new bk(0,0,0,0)}),_k=function(t,e){if(e===void 0&&(e=!1),Hf.has(t)&&!e)return Hf.get(t);if(xk(t))return Hf.set(t,HA),HA;var n=getComputedStyle(t),r=Mx(t)&&t.ownerSVGElement&&t.getBBox(),s=!wq&&n.boxSizing==="border-box",o=_q.test(n.writingMode||""),u=!r&&qA.test(n.overflowY||""),d=!r&&qA.test(n.overflowX||""),h=r?0:qi(n.paddingTop),f=r?0:qi(n.paddingRight),v=r?0:qi(n.paddingBottom),b=r?0:qi(n.paddingLeft),x=r?0:qi(n.borderTopWidth),E=r?0:qi(n.borderRightWidth),A=r?0:qi(n.borderBottomWidth),D=r?0:qi(n.borderLeftWidth),M=b+f,U=h+v,j=D+E,z=x+A,G=d?t.offsetHeight-z-t.clientHeight:0,$=u?t.offsetWidth-j-t.clientWidth:0,q=s?M+j:0,C=s?U+z:0,S=r?r.width:qi(n.width)-q-$,I=r?r.height:qi(n.height)-C-G,V=S+M+$+j,P=I+U+G+z,L=Uo({devicePixelContentBoxSize:lu(Math.round(S*devicePixelRatio),Math.round(I*devicePixelRatio),o),borderBoxSize:lu(V,P,o),contentBoxSize:lu(S,I,o),contentRect:new bk(b,h,S,I)});return Hf.set(t,L),L},wk=function(t,e,n){var r=_k(t,n),s=r.borderBoxSize,o=r.contentBoxSize,u=r.devicePixelContentBoxSize;switch(e){case kd.DEVICE_PIXEL_CONTENT_BOX:return u;case kd.BORDER_BOX:return s;default:return o}},Eq=(function(){function t(e){var n=_k(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=Uo([n.borderBoxSize]),this.contentBoxSize=Uo([n.contentBoxSize]),this.devicePixelContentBoxSize=Uo([n.devicePixelContentBoxSize])}return t})(),Ek=function(t){if(xk(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Tq=function(){var t=1/0,e=[];Lo.forEach(function(u){if(u.activeTargets.length!==0){var d=[];u.activeTargets.forEach(function(f){var v=new Eq(f.target),b=Ek(f.target);d.push(v),f.lastReportedSize=wk(f.target,f.observedBox),b<t&&(t=b)}),e.push(function(){u.callback.call(u.observer,d,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var n=0,r=e;n<r.length;n++){var s=r[n];s()}return t},GA=function(t){Lo.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(Ek(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},Sq=function(){var t=0;for(GA(t);gq();)t=Tq(),GA(t);return vq()&&yq(),t>0},Cy,Tk=[],Aq=function(){return Tk.splice(0).forEach(function(t){return t()})},Cq=function(t){if(!Cy){var e=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return Aq()}).observe(n,r),Cy=function(){n.textContent="".concat(e?e--:e++)}}Tk.push(t),Cy()},Rq=function(t){Cq(function(){requestAnimationFrame(t)})},mm=0,Iq=function(){return!!mm},Nq=250,kq={attributes:!0,characterData:!0,childList:!0,subtree:!0},$A=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],KA=function(t){return t===void 0&&(t=0),Date.now()+t},Ry=!1,Dq=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=Nq),!Ry){Ry=!0;var r=KA(e);Rq(function(){var s=!1;try{s=Sq()}finally{if(Ry=!1,e=r-KA(),!Iq())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,kq)};document.body?n():hd.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),$A.forEach(function(n){return hd.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),$A.forEach(function(n){return hd.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),z0=new Dq,YA=function(t){!mm&&t>0&&z0.start(),mm+=t,!mm&&z0.stop()},Oq=function(t){return!Mx(t)&&!xq(t)&&getComputedStyle(t).display==="inline"},jq=(function(){function t(e,n){this.target=e,this.observedBox=n||kd.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=wk(this.target,this.observedBox,!0);return Oq(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),Mq=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Gf=new WeakMap,QA=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},$f=(function(){function t(){}return t.connect=function(e,n){var r=new Mq(e,n);Gf.set(e,r)},t.observe=function(e,n,r){var s=Gf.get(e),o=s.observationTargets.length===0;QA(s.observationTargets,n)<0&&(o&&Lo.push(s),s.observationTargets.push(new jq(n,r&&r.box)),YA(1),z0.schedule())},t.unobserve=function(e,n){var r=Gf.get(e),s=QA(r.observationTargets,n),o=r.observationTargets.length===1;s>=0&&(o&&Lo.splice(Lo.indexOf(r),1),r.observationTargets.splice(s,1),YA(-1))},t.disconnect=function(e){var n=this,r=Gf.get(e);r.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),r.activeTargets.splice(0,r.activeTargets.length)},t})(),Pq=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");$f.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!FA(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");$f.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!FA(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");$f.unobserve(this,e)},t.prototype.disconnect=function(){$f.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function hr(){return hr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hr.apply(this,arguments)}function pm(t,e){if(t==null)return{};var n,r,s={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(s[n]=t[n]);return s}var fd=typeof window<"u"?O.useLayoutEffect:O.useEffect;function Dc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function Kf(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var Vq={box:"border-box"};function Iy(t,e){var n=e.label,r=e.enabled,s=e.resizeSourceRef,o=O.useState(0),u=o[0],d=o[1];O.useDebugValue(n+": "+u);var h=O.useCallback(function(f){d(f[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return fd(function(){if(t.current&&r){var f=new Pq(h);return f.observe(t.current,Vq),function(){f.disconnect()}}},[t,h,r]),r?u:0}function cr(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var WA={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},XA={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},Lq=u7({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:hr({},WA,XA)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:hr({},WA,XA)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:hr({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[c7({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(cr()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(cr()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(cr()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(cr()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(cr()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(cr()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(cr()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(cr()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(cr()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(cr()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(cr()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(cr()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(cr()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(cr()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(cr()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(cr()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),Uq=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],zq=["velocity"],Bq=["onRest","config"],Sk=P7.default,Fq=Sk.tension,Yf=Sk.friction,qq=Nn.forwardRef(function(t,e){var n=t.children,r=t.sibling,s=t.className,o=t.footer,u=t.header,d=t.open,h=t.initialState,f=t.lastSnapRef,v=t.initialFocusRef,b=t.onDismiss,x=t.maxHeight,E=t.defaultSnap,A=E===void 0?Gq:E,D=t.snapPoints,M=D===void 0?$q:D,U=t.blocking,j=U===void 0||U,z=t.scrollLocking,G=z===void 0||z,$=t.style,q=t.onSpringStart,C=t.onSpringCancel,S=t.onSpringEnd,I=t.reserveScrollBarGap,V=I===void 0?j:I,P=t.expandOnContentDrag,L=P!==void 0&&P,N=pm(t,Uq),be=(function(){var le=O.useState(!1),ge=le[0],_e=le[1],qe=O.useState({}),mt=qe[0],$e=qe[1],Ye=O.useCallback(function(Je){return $e(function(Ze){var Re;return hr({},Ze,((Re={})[Je]=!1,Re))}),function(){$e(function(Ze){var Re;return hr({},Ze,((Re={})[Je]=!0,Re))})}},[]);return O.useEffect(function(){var Je=Object.values(mt);Je.length!==0&&Je.every(Boolean)&&_e(!0)},[mt]),{ready:ge,registerReady:Ye}})(),ke=be.ready,Q=be.registerReady,se=O.useRef(!1),he=O.useRef(q),we=O.useRef(C),Ee=O.useRef(S);O.useEffect(function(){he.current=q,we.current=C,Ee.current=S},[C,q,S]);var B,J,ee=B7(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),re=ee[0],fe=ee[1],je=O.useRef(null),Te=O.useRef(null),Mt=O.useRef(null),St=O.useRef(null),qn=O.useRef(null),Tr=O.useRef(null),Vt=O.useRef(0),Hn=O.useRef(),Tn=O.useRef(!1),Dn=(B=O.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),J=O.useRef(B==null?void 0:B.matches),O.useDebugValue(J.current?"reduce":"no-preference"),O.useEffect(function(){var le=function(ge){J.current=ge.matches};return B==null||B.addListener(le),function(){return B==null?void 0:B.removeListener(le)}},[B]),J),On=(function(le){var ge=le.targetRef,_e=le.enabled,qe=le.reserveScrollBarGap,mt=O.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return O.useDebugValue(_e?"Enabled":"Disabled"),O.useEffect(function(){if(!_e)return mt.current.deactivate(),void(mt.current={activate:function(){},deactivate:function(){}});var $e=ge.current,Ye=!1;mt.current={activate:function(){Ye||(Ye=!0,mq($e,{allowTouchMove:function(Je){return Je.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:qe}))},deactivate:function(){Ye&&(Ye=!1,pq($e))}}},[_e,ge,qe]),mt})({targetRef:Te,enabled:ke&&G,reserveScrollBarGap:V}),nr=(function(le){var ge=le.targetRef,_e=le.enabled,qe=O.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return O.useDebugValue(_e?"Enabled":"Disabled"),O.useEffect(function(){if(!_e)return qe.current.deactivate(),void(qe.current={activate:function(){},deactivate:function(){}});var mt=ge.current,$e=!1,Ye=[],Je=[];qe.current={activate:function(){if(!$e){$e=!0;var Ze=mt.parentNode;document.querySelectorAll("body > *").forEach(function(Re){if(Re!==Ze){var Le=Re.getAttribute("aria-hidden");Le!==null&&Le!=="false"||(Ye.push(Le),Je.push(Re),Re.setAttribute("aria-hidden","true"))}})}},deactivate:function(){$e&&($e=!1,Je.forEach(function(Ze,Re){var Le=Ye[Re];Le===null?Ze.removeAttribute("aria-hidden"):Ze.setAttribute("aria-hidden",Le)}),Ye=[],Je=[])}}},[ge,_e]),qe})({targetRef:je,enabled:ke&&j}),zr=(function(le){var ge=le.targetRef,_e=le.fallbackRef,qe=le.initialFocusRef,mt=le.enabled,$e=O.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return O.useDebugValue(mt?"Enabled":"Disabled"),O.useEffect(function(){if(!mt)return $e.current.deactivate(),void($e.current={activate:function(){},deactivate:function(){}});var Ye=_e.current,Je=lq(ge.current,{onActivate:void 0,initialFocus:qe?function(){return(qe==null?void 0:qe.current)||Ye}:void 0,fallbackFocus:Ye,escapeDeactivates:!1,clickOutsideDeactivates:!1}),Ze=!1;$e.current={activate:function(){try{return Ze?Promise.resolve():(Ze=!0,Promise.resolve(Je.activate()).then(function(){return Promise.resolve(new Promise(function(Re){return setTimeout(function(){return Re(void 0)},0)})).then(function(){})}))}catch(Re){return Promise.reject(Re)}},deactivate:function(){Ze&&(Ze=!1,Je.deactivate())}}},[mt,_e,qe,ge]),$e})({targetRef:je,fallbackRef:Tr,initialFocusRef:v||void 0,enabled:ke&&j&&v!==!1}),Sr=(function(le){var ge=le.getSnapPoints,_e=le.heightRef,qe=le.lastSnapRef,mt=le.ready,$e=(function(De){var pt=De.contentRef,ln=De.controlledMaxHeight,kt=De.footerEnabled,Yt=De.footerRef,An=De.headerEnabled,Cn=De.headerRef,Pn=De.registerReady,ii=De.resizeSourceRef,pn=O.useMemo(function(){return Pn("contentHeight")},[Pn]),Dt=(function(qr,Gn,Rr){var ar=O.useMemo(function(){return Gn("maxHeight")},[Gn]),$n=O.useState(function(){return Kf(qr)||typeof window<"u"?window.innerHeight:0}),Ir=$n[0],de=$n[1],ve=Ir>0,ze=O.useRef(0);return O.useDebugValue(qr?"controlled":"auto"),O.useEffect(function(){ve&&ar()},[ve,ar]),fd(function(){if(qr)return de(Kf(qr)),void(Rr.current="maxheightprop");var Xe=function(){ze.current||(ze.current=requestAnimationFrame(function(){de(window.innerHeight),Rr.current="window",ze.current=0}))};return window.addEventListener("resize",Xe),de(window.innerHeight),Rr.current="window",ar(),function(){window.removeEventListener("resize",Xe),cancelAnimationFrame(ze.current)}},[qr,ar,Rr]),Ir})(ln,Pn,ii),Qt=Iy(Cn,{label:"headerHeight",enabled:An,resizeSourceRef:ii}),ir=Iy(pt,{label:"contentHeight",enabled:!0,resizeSourceRef:ii}),Cr=Iy(Yt,{label:"footerHeight",enabled:kt,resizeSourceRef:ii}),sr=Math.min(Dt-Qt-Cr,ir)+Qt+Cr;O.useDebugValue("minHeight: "+sr);var ts=ir>0;return O.useEffect(function(){ts&&pn()},[ts,pn]),{maxHeight:Dt,minHeight:sr,headerHeight:Qt,footerHeight:Cr}})({contentRef:le.contentRef,controlledMaxHeight:le.controlledMaxHeight,footerEnabled:le.footerEnabled,footerRef:le.footerRef,headerEnabled:le.headerEnabled,headerRef:le.headerRef,registerReady:le.registerReady,resizeSourceRef:le.resizeSourceRef}),Ye=$e.maxHeight,Je=$e.minHeight,Ze=$e.headerHeight,Re=$e.footerHeight,Le=(function(De,pt){var ln=[].concat(De).map(Kf).reduce(function(Cn,Pn){return Cn.add(Dc(Pn,0,pt)),Cn},new Set),kt=Array.from(ln),Yt=Math.min.apply(Math,kt);if(Number.isNaN(Yt))throw new TypeError("minSnap is NaN");var An=Math.max.apply(Math,kt);if(Number.isNaN(An))throw new TypeError("maxSnap is NaN");return{snapPoints:kt,minSnap:Yt,maxSnap:An}})(mt?ge({height:_e.current,footerHeight:Re,headerHeight:Ze,minHeight:Je,maxHeight:Ye}):[0],Ye),Ce=Le.snapPoints,Sn=Le.minSnap,At=Le.maxSnap;return O.useDebugValue("minSnap: "+Sn+", maxSnap:"+At),{minSnap:Sn,maxSnap:At,findSnap:function(De){var pt=Kf(typeof De=="function"?De({footerHeight:Re,headerHeight:Ze,height:_e.current,minHeight:Je,maxHeight:Ye,snapPoints:Ce,lastSnap:qe.current}):De);return Ce.reduce(function(ln,kt){return Math.abs(kt-pt)<Math.abs(ln-pt)?kt:ln},Sn)},maxHeight:Ye}})({contentRef:Mt,controlledMaxHeight:x,footerEnabled:!!o,footerRef:qn,getSnapPoints:M,headerEnabled:u!==!1,headerRef:St,heightRef:Vt,lastSnapRef:f,ready:ke,registerReady:Q,resizeSourceRef:Hn}),jn=Sr.minSnap,Ar=Sr.maxSnap,_i=Sr.maxHeight,Br=Sr.findSnap,wt=O.useRef(_i),on=O.useRef(jn),He=O.useRef(Ar),Lt=O.useRef(Br),$t=O.useRef(0);fd(function(){wt.current=_i,He.current=Ar,on.current=jn,Lt.current=Br,$t.current=Br(A)},[Br,A,_i,Ar,jn]);var Kt=O.useCallback(function(le){var ge=le.onRest,_e=le.config,qe=(_e=_e===void 0?{}:_e).velocity,mt=qe===void 0?1:qe,$e=pm(_e,zq),Ye=pm(le,Bq);return new Promise(function(Je){return fe(hr({},Ye,{config:hr({velocity:mt},$e,{mass:1,tension:Fq,friction:Math.max(Yf,Yf+(Yf-Yf*mt))}),onRest:function(){var Ze=[].slice.call(arguments);Je.apply(void 0,Ze),ge==null||ge.apply(void 0,Ze)}}))})},[fe]),Fr=b7(Lq,{devTools:!1,actions:{onOpenCancel:O.useCallback(function(){return we.current==null?void 0:we.current({type:"OPEN"})},[]),onSnapCancel:O.useCallback(function(le){return we.current==null?void 0:we.current({type:"SNAP",source:le.snapSource})},[]),onCloseCancel:O.useCallback(function(){return we.current==null?void 0:we.current({type:"CLOSE"})},[]),onResizeCancel:O.useCallback(function(){return we.current==null?void 0:we.current({type:"RESIZE",source:Hn.current})},[]),onOpenEnd:O.useCallback(function(){return Ee.current==null?void 0:Ee.current({type:"OPEN"})},[]),onSnapEnd:O.useCallback(function(le,ge){return Ee.current==null?void 0:Ee.current({type:"SNAP",source:le.snapSource})},[]),onResizeEnd:O.useCallback(function(){return Ee.current==null?void 0:Ee.current({type:"RESIZE",source:Hn.current})},[])},context:{initialState:h},services:{onSnapStart:O.useCallback(function(le,ge){try{return Promise.resolve(he.current==null?void 0:he.current({type:"SNAP",source:ge.payload.source||"custom"}))}catch(_e){return Promise.reject(_e)}},[]),onOpenStart:O.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseStart:O.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeStart:O.useCallback(function(){try{return Promise.resolve(he.current==null?void 0:he.current({type:"RESIZE",source:Hn.current}))}catch(le){return Promise.reject(le)}},[]),onSnapEnd:O.useCallback(function(le,ge){try{return Promise.resolve(Ee.current==null?void 0:Ee.current({type:"SNAP",source:le.snapSource}))}catch(_e){return Promise.reject(_e)}},[]),onOpenEnd:O.useCallback(function(){try{return Promise.resolve(Ee.current==null?void 0:Ee.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseEnd:O.useCallback(function(){try{return Promise.resolve(Ee.current==null?void 0:Ee.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeEnd:O.useCallback(function(){try{return Promise.resolve(Ee.current==null?void 0:Ee.current({type:"RESIZE",source:Hn.current}))}catch(le){return Promise.reject(le)}},[]),renderVisuallyHidden:O.useCallback(function(le,ge){try{return Promise.resolve(Kt({y:$t.current,ready:0,maxHeight:wt.current,maxSnap:He.current,minSnap:$t.current,immediate:!0})).then(function(){})}catch(_e){return Promise.reject(_e)}},[Kt]),activate:O.useCallback(function(le,ge){try{return se.current=!0,Promise.resolve(Promise.all([On.current.activate(),zr.current.activate(),nr.current.activate()])).then(function(){})}catch(_e){return Promise.reject(_e)}},[nr,zr,On]),deactivate:O.useCallback(function(){try{return On.current.deactivate(),zr.current.deactivate(),nr.current.deactivate(),se.current=!1,Promise.resolve()}catch(le){return Promise.reject(le)}},[nr,zr,On]),openImmediately:O.useCallback(function(){try{return Vt.current=$t.current,Promise.resolve(Kt({y:$t.current,ready:1,maxHeight:wt.current,maxSnap:He.current,minSnap:$t.current,immediate:!0})).then(function(){})}catch(le){return Promise.reject(le)}},[Kt]),openSmoothly:O.useCallback(function(){try{return Promise.resolve(Kt({y:0,ready:1,maxHeight:wt.current,maxSnap:He.current,minSnap:$t.current,immediate:!0})).then(function(){return Vt.current=$t.current,Promise.resolve(Kt({y:$t.current,ready:1,maxHeight:wt.current,maxSnap:He.current,minSnap:$t.current,immediate:Dn.current})).then(function(){})})}catch(le){return Promise.reject(le)}},[Kt,Dn]),snapSmoothly:O.useCallback(function(le,ge){try{var _e=Lt.current(le.y);return Vt.current=_e,f.current=_e,Promise.resolve(Kt({y:_e,ready:1,maxHeight:wt.current,maxSnap:He.current,minSnap:on.current,immediate:Dn.current,config:{velocity:le.velocity}})).then(function(){})}catch(qe){return Promise.reject(qe)}},[Kt,f,Dn]),resizeSmoothly:O.useCallback(function(){try{var le=Lt.current(Vt.current);return Vt.current=le,f.current=le,Promise.resolve(Kt({y:le,ready:1,maxHeight:wt.current,maxSnap:He.current,minSnap:on.current,immediate:Hn.current!=="element"||Dn.current})).then(function(){})}catch(ge){return Promise.reject(ge)}},[Kt,f,Dn]),closeSmoothly:O.useCallback(function(le,ge){try{return Kt({minSnap:Vt.current,immediate:!0}),Vt.current=0,Promise.resolve(Kt({y:0,maxHeight:wt.current,maxSnap:He.current,immediate:Dn.current})).then(function(){return Promise.resolve(Kt({ready:0,immediate:!0})).then(function(){})})}catch(_e){return Promise.reject(_e)}},[Kt,Dn])}}),Ls=Fr[0],Mn=Fr[1];O.useEffect(function(){ke&&Mn(d?"OPEN":"CLOSE")},[d,Mn,ke]),fd(function(){(_i||Ar||jn)&&Mn("RESIZE")},[_i,Ar,jn,Mn]),O.useEffect(function(){return function(){On.current.deactivate(),zr.current.deactivate(),nr.current.deactivate()}},[nr,zr,On]),O.useImperativeHandle(e,function(){return{snapTo:function(le,ge){var _e=ge===void 0?{}:ge,qe=_e.velocity,mt=qe===void 0?1:qe,$e=_e.source,Ye=$e===void 0?"custom":$e;Mn("SNAP",{payload:{y:Lt.current(le),velocity:mt,source:Ye}})},get height(){return Vt.current}}},[Mn]),O.useEffect(function(){var le=Te.current,ge=function(qe){Tn.current&&qe.preventDefault()},_e=function(qe){le.scrollTop<0&&(requestAnimationFrame(function(){le.style.overflow="hidden",le.scrollTop=0,le.style.removeProperty("overflow")}),qe.preventDefault())};return L&&(le.addEventListener("scroll",ge),le.addEventListener("touchmove",ge),le.addEventListener("touchstart",_e)),function(){le.removeEventListener("scroll",ge),le.removeEventListener("touchmove",ge),le.removeEventListener("touchstart",_e)}},[L,Te]);var rr=qF(function(le){var ge=le.args,_e=(ge=ge===void 0?[]:ge)[0],qe=(_e=_e===void 0?{}:_e).closeOnTap,mt=qe!==void 0&&qe,$e=_e.isContentDragging,Ye=$e!==void 0&&$e,Je=le.cancel,Ze=le.direction[1],Re=le.down,Le=le.first,Ce=le.last,Sn=le.memo,At=Sn===void 0?re.y.getValue():Sn,De=le.tap,pt=le.velocity,ln=-1*le.movement[1];if(!se.current)return Je(),At;if(b&&mt&&De)return Je(),setTimeout(function(){return b()},0),At;if(De)return At;var kt=At+ln,Yt=ln*pt,An=Math.max(on.current,Math.min(He.current,kt+2*Yt));if(!Re&&b&&Ze>0&&kt+Yt<on.current/2)return Je(),b(),At;var Cn=Re?b||on.current!==He.current?ud(kt,b?0:on.current,He.current,.55):kt<on.current?ud(kt,on.current,2*He.current,.55):ud(kt,on.current/2,He.current,.55):An;return L&&Ye?(Cn>=He.current&&(Cn=He.current),At===He.current&&Te.current.scrollTop>0&&(Cn=He.current),Tn.current=Cn<He.current):Tn.current=!1,Le&&Mn("DRAG"),Ce?(Mn("SNAP",{payload:{y:Cn,velocity:pt>.05?pt:1,source:"dragging"}}),At):(fe({y:Cn,ready:1,maxHeight:wt.current,maxSnap:He.current,minSnap:on.current,immediate:!0,config:{velocity:pt}}),At)},{filterTaps:!0});if(Number.isNaN(He.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(on.current))throw new TypeError("minSnapRef is NaN!!");var mn=(function(le){var ge,_e=le.spring,qe=Bl([_e.y,_e.maxHeight],function(Re,Le){return Math.round(Dc(Le-Re,0,16))+"px"}),mt=Bl([_e.y,_e.minSnap,_e.maxSnap],function(Re,Le,Ce){return Dc(Re,Le,Ce)+"px"}),$e=Bl([_e.y,_e.minSnap,_e.maxSnap],function(Re,Le,Ce){return Re<Le?Le-Re+"px":Re>Ce?Ce-Re+"px":"0px"}),Ye=Bl([_e.y,_e.maxSnap],function(Re,Le){return Re>=Le?Math.ceil(Re-Le):0}),Je=Bl([_e.y,_e.minSnap],function(Re,Le){if(!Le)return 0;var Ce=Math.max(Le/2-45,0);return Dc((Re-Ce)*(1/(Math.min(Le/2+45,Le)-Ce)+0),0,1)}),Ze=Bl([_e.y,_e.minSnap],function(Re,Le){return Le?Dc(Re/Le,0,1):0});return(ge={})["--rsbs-content-opacity"]=Je,ge["--rsbs-backdrop-opacity"]=Ze,ge["--rsbs-antigap-scale-y"]=Ye,ge["--rsbs-overlay-translate-y"]=$e,ge["--rsbs-overlay-rounded"]=qe,ge["--rsbs-overlay-h"]=mt,ge})({spring:re});return Nn.createElement(aF.div,hr({},N,{"data-rsbs-root":!0,"data-rsbs-state":Hq.find(Ls.matches),"data-rsbs-is-blocking":j,"data-rsbs-is-dismissable":!!b,"data-rsbs-has-header":!!u,"data-rsbs-has-footer":!!o,className:s,ref:je,style:hr({},mn,$,{opacity:re.ready})}),r,j&&Nn.createElement("div",hr({key:"backdrop","data-rsbs-backdrop":!0},rr({closeOnTap:!0}))),Nn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:Tr,onKeyDown:function(le){le.key==="Escape"&&(le.stopPropagation(),b&&b())}},u!==!1&&Nn.createElement("div",hr({key:"header","data-rsbs-header":!0,ref:St},rr()),u),Nn.createElement("div",hr({key:"scroll","data-rsbs-scroll":!0,ref:Te},L?rr({isContentDragging:!0}):{}),Nn.createElement("div",{"data-rsbs-content":!0,ref:Mt},n)),o&&Nn.createElement("div",hr({key:"footer",ref:qn,"data-rsbs-footer":!0},rr()),o)))}),Hq=["closed","opening","open","closing","dragging","snapping","resizing"];function Gq(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function $q(t){return t.minHeight}var Kq=["onSpringStart","onSpringEnd","skipInitialTransition"],el=O.forwardRef(function(t,e){var n=t.onSpringStart,r=t.onSpringEnd,s=t.skipInitialTransition,o=pm(t,Kq),u=O.useState(!1),d=u[0],h=u[1],f=O.useRef(),v=O.useRef(null),b=O.useRef(s&&o.open?"OPEN":"CLOSED");fd(function(){if(o.open)return cancelAnimationFrame(f.current),h(!0),function(){b.current="CLOSED"}},[o.open]);var x=O.useCallback(function(A){return Promise.resolve(n==null?void 0:n(A)).then(function(){A.type==="OPEN"&&cancelAnimationFrame(f.current)})},[n]),E=O.useCallback(function(A){return Promise.resolve(r==null?void 0:r(A)).then(function(){A.type==="CLOSE"&&(f.current=requestAnimationFrame(function(){return h(!1)}))})},[r]);return d?Nn.createElement(mB,{"data-rsbs-portal":!0},Nn.createElement(qq,hr({},o,{lastSnapRef:v,ref:e,initialState:b.current,onSpringStart:x,onSpringEnd:E}))):null});const Yq=({item:t,clothingSets:e,onClose:n,onUpdate:r,onGenerateFrom:s,onRemoveSet:o,onDelete:u,getItemWearCount:d})=>{const[h,f]=O.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[v,b]=O.useState(!1),[x,E]=O.useState(window.innerWidth<768),[A,D]=O.useState(!1),[M,U]=O.useState(!1),j=document.documentElement.classList.contains("dark"),z=e.find(N=>N.itemIds.includes(t.id));O.useEffect(()=>{f({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),D(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{D(!0)})})},[t]),O.useEffect(()=>{const N=()=>E(window.innerWidth<768);return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]),O.useEffect(()=>{if(!x){const N=be=>{be.key==="Escape"&&n()};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)}},[x,n]);const G=N=>{const{name:be,value:ke}=N.target;f(Q=>({...Q,[be]:ke}))},$=N=>{N.preventDefault(),r({...t,...h}),b(!0),setTimeout(()=>{b(!1)},2e3)},q=()=>{U(!0)},C=()=>{u(t.id),U(!1),n()},S=()=>{U(!1)},I=N=>{N.stopPropagation(),r({...t,isFavorite:!t.isFavorite})},V=N=>{N.stopPropagation(),r({...t,isExcluded:!t.isExcluded})},P=g.jsxs("div",{className:"bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx("div",{className:"relative px-4 pt-2 pb-4",children:g.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[40vh] object-contain rounded-lg"})}),g.jsxs("form",{onSubmit:$,className:"p-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),g.jsx("textarea",{id:"analysis",name:"analysis",value:h.analysis,onChange:G,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),g.jsx("select",{id:"category",name:"category",value:h.category,onChange:G,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(N=>g.jsx("option",{value:N,children:N},N))})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),g.jsx("input",{type:"text",id:"color",name:"color",value:h.color,onChange:G,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),g.jsx("input",{type:"text",id:"material",name:"material",value:h.material,onChange:G,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),g.jsx("div",{className:"bg-gradient-to-r from-gold/5 to-gold-dark/5 dark:from-gold/10 dark:to-gold-dark/10 p-3 rounded-lg border border-gold/20",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-semibold text-gold dark:text-gold-light uppercase tracking-wider",children:"Statistique"}),g.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1",children:["Port ",g.jsx("span",{className:"font-bold text-lg text-gold",children:d(t.id)})," fois ces 30 derniers jours"]})]}),g.jsx("div",{className:"text-3xl",children:""})]})}),z&&g.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),g.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:z.name,children:z.name})]}),g.jsxs("button",{type:"button",onClick:()=>{o(z.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[g.jsx(SL,{}),g.jsx("span",{children:"Dissocier"})]})]})]}),g.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[g.jsxs("button",{type:"button",onClick:q,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[g.jsx(Hb,{}),"Supprimer"]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[g.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[g.jsx(Ed,{}),"Crer une tenue"]}),g.jsx("button",{type:"submit",disabled:v,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${v?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:v?g.jsxs(g.Fragment,{children:[g.jsx(Gb,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]}),L=M?IN.createPortal(g.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 transition-opacity duration-200",style:{zIndex:999999,pointerEvents:"auto"},onClick:S,children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all duration-200 scale-100",onClick:N=>N.stopPropagation(),children:[g.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[g.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h3",{className:"text-lg font-bold text-raisin-black dark:text-snow mb-1",children:"Supprimer cet article ?"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:t.analysis})]})]}),g.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-sm font-semibold text-red-800 dark:text-red-300 mb-1",children:"Cette action est irrversible"}),g.jsx("p",{className:"text-xs text-red-700 dark:text-red-400",children:"L'article sera dfinitivement supprim de votre garde-robe et ne pourra pas tre rcupr."})]})]})}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:N=>{N.stopPropagation(),S()},className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-semibold rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Annuler"}),g.jsx("button",{onClick:N=>{N.stopPropagation(),C()},className:"flex-1 px-4 py-2.5 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors shadow-lg shadow-red-500/30",children:"Supprimer"})]})]})}),document.body):null;return x?g.jsxs(g.Fragment,{children:[g.jsx(el,{open:!!t&&!M,onDismiss:n,className:j?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full px-4 py-2",children:[g.jsx("h2",{className:"text-lg font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:V,className:`p-1.5 rounded-full transition-colors ${t.isExcluded?"bg-gray-500/20 text-gray-700 dark:text-gray-300":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,"aria-label":t.isExcluded?"Inclure dans les suggestions":"Exclure des suggestions",title:t.isExcluded?"Inclure dans les suggestions":"Ne pas suggrer cet article",children:g.jsx(o0,{className:"w-6 h-6"})}),g.jsx("button",{onClick:I,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?g.jsx(pu,{className:"w-6 h-6 text-red-500"}):g.jsx(Lm,{className:"w-6 h-6"})})]})]}),defaultSnap:({maxHeight:N})=>N*.85,snapPoints:({maxHeight:N})=>[N*.5,N*.85,N*.95],children:P}),L]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-200 ${A?"opacity-100":"opacity-0"}`,style:M?{pointerEvents:"none"}:void 0,onClick:n,children:g.jsxs("div",{className:`relative bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transition-all duration-200 ${A?"opacity-100 scale-100":"opacity-0 scale-95"}`,style:M?{pointerEvents:"none"}:void 0,onClick:N=>N.stopPropagation(),children:[g.jsxs("div",{className:"sticky top-0 bg-white dark:bg-raisin-black border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:"Dtails de l'article"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:V,className:`p-2 rounded-full transition-colors ${t.isExcluded?"bg-gray-500/20 text-gray-700 dark:text-gray-300":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,"aria-label":t.isExcluded?"Inclure dans les suggestions":"Exclure des suggestions",title:t.isExcluded?"Inclure dans les suggestions":"Ne pas suggrer cet article",children:g.jsx(o0,{className:"w-6 h-6"})}),g.jsx("button",{onClick:I,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?g.jsx(pu,{className:"w-6 h-6 text-red-500"}):g.jsx(Lm,{className:"w-6 h-6"})}),g.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors","aria-label":"Fermer",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),P]})}),L]})},Ak=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:r})=>{const[s,o]=O.useState(3),[u,d]=O.useState(""),[h,f]=O.useState(""),v=b=>{b.preventDefault();const x=u||"",E=h?parseFloat(h):void 0;x.trim()&&s>0&&n(s,x,E)};return g.jsxs("form",{onSubmit:v,className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[g.jsxs("div",{className:"sm:col-span-1",children:[g.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),g.jsx("input",{id:"days",type:"number",value:s,onChange:b=>o(parseInt(b.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r,required:!0})]}),g.jsxs("div",{className:"sm:col-span-1",children:[g.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{id:"weight",type:"number",value:h,onChange:b=>f(b.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:r}),g.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),g.jsxs("div",{className:"sm:col-span-2",children:[g.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),g.jsx("input",{id:"vacation-context",type:"text",value:u,onChange:b=>d(b.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:r,required:!0})]})]}),g.jsxs("button",{type:"submit",disabled:r||!(u||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[g.jsx(WR,{}),r?"Analyse du poids...":"Gnrer la valise"]}),g.jsx("div",{className:"text-center mt-2",children:g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Gnration : 30-60 secondes (selon la taille de votre garde-robe)"})})]})},Ck=({plan:t,allClothingItems:e,allClothingSets:n})=>{const r=s=>{const{id:o,description:u}=s;let d=e.find(f=>f.id===o);if(d)return d;let h=n.find(f=>f.id===o);if(h)return h;if(d=e.find(f=>f.analysis===o),d||(d=e.find(f=>f.analysis===u),d))return d};return g.jsx("div",{className:"mt-10",children:g.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[g.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),g.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,o)=>{const u=r(s),d=u?u.imageSrc:null;return g.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[d?g.jsx("img",{src:d,alt:s.description,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:g.jsx(QR,{})}),g.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:g.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},o)})}),g.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,o)=>g.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},o))})]})})},Qq=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[r,s]=O.useState(!1),o=O.useRef(null),u=O.useRef(null),d=b=>{const x=Array.from(b.target.files||[]);x.length>0&&(t(x),s(!1)),b.target.value=""},h=()=>{s(!r)},f=()=>{var b;(b=o.current)==null||b.click()},v=()=>{var b;(b=u.current)==null||b.click()};return n?null:g.jsxs(g.Fragment,{children:[g.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:d,className:"hidden"}),g.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,onChange:d,className:"hidden"}),r&&g.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>s(!1)}),g.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[g.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${r?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[g.jsxs("button",{type:"button",onClick:f,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[g.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:g.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),g.jsxs("button",{type:"button",onClick:v,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[g.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),g.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),g.jsx("button",{onClick:h,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${r?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":r?"Fermer le menu":"Ajouter un vtement",children:e?g.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},Wq=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:r,onShowFavorites:s,onShowWornOutfits:o,isAnalyzingWardrobe:u,clothingCount:d,favoriteOutfitCount:h,wornOutfitCount:f})=>g.jsxs("div",{className:"space-y-4 pb-24",children:[g.jsxs("div",{className:"text-center py-6",children:[g.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[g.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),g.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[d," vtement",d>1?"s":""," dans votre collection"]})]}),g.jsxs("div",{className:"space-y-3 px-4",children:[d>=3&&g.jsx("button",{onClick:t,disabled:u,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:u?g.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):g.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" ~30 secondes"})]})]})}),g.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" 30-60 secondes"})]})]})}),g.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:g.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" 30-60 secondes"})]})]})})]}),g.jsx("div",{className:"px-4 pt-6",children:g.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[g.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsxs("button",{onClick:o,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-blue-500",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),g.jsx("p",{className:"text-2xl font-bold",children:f}),g.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Portes (7j)"})]}),g.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-green-500",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),g.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),g.jsxs("button",{onClick:s,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[g.jsx("div",{className:"text-red-500",children:g.jsx(Lm,{})}),g.jsx("p",{className:"text-2xl font-bold",children:h}),g.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),Xq=({activeTab:t,onTabChange:e,counts:n})=>{const r=[{id:"home",label:"Home",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return g.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:g.jsx("div",{className:"flex justify-around items-center h-16",children:r.map(s=>{const o=t===s.id;return g.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[g.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&g.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),g.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:s.label})]},s.id)})})})},Jq=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},r={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return g.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[g.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:g.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),g.jsxs("div",{className:"p-6 space-y-6",children:[g.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[g.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),g.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),g.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,o)=>g.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-green-500 mt-0.5",children:""}),g.jsx("span",{children:s})]},o))})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),g.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,o)=>g.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),g.jsx("span",{children:s})]},o))})]}),g.jsxs("div",{children:[g.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[g.jsx("span",{children:""})," Pices recommandes"]}),g.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,o)=>g.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[g.jsxs("div",{className:"flex justify-between items-start mb-3",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-lg",children:s.description}),g.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),g.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:r[s.priority]})]}),g.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[g.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.estimatedPrice&&g.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]}),g.jsxs("a",{href:`https://www.google.com/search?q=${encodeURIComponent(s.searchQuery+" achat en ligne")}&tbm=shop`,target:"_blank",rel:"noopener noreferrer",className:"ml-auto inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-sm hover:shadow-md",children:[g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Rechercher en ligne"]})]})]},o))})]})]})]})})},Zq=({open:t,clothingItems:e,clothingSets:n,onGenerate:r,isGenerating:s,suggestedOutfits:o,onClose:u,weatherInfo:d,weatherError:h,favoriteOutfits:f,onToggleFavorite:v,onGenerateVisual:b,generatingVisualFor:x,selectedOutfit:E,onSelectOutfit:A,anchorItem:D,onClearAnchor:M,onGenerateVariants:U,onOpenChat:j})=>{const z=document.documentElement.classList.contains("dark"),G=O.useRef(null);return O.useEffect(()=>{!s&&o.length>0&&G.current&&G.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[s,o.length]),g.jsx(el,{open:t,onDismiss:u,className:z?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),g.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:$})=>$*.75,snapPoints:({minHeight:$,maxHeight:q})=>[$,q*.75,q*.9],children:g.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx(RN,{clothingItems:e,clothingSets:n,onGenerate:r,isGenerating:s,weatherInfo:d,weatherError:h,anchorItem:D,onClearAnchor:M}),s&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[g.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),g.jsx("div",{ref:G,children:o.length>0&&g.jsx(su,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:f,onToggleFavorite:v,onGenerateVisual:b,generatingVisualFor:x,selectedOutfit:E,onSelectOutfit:A,onGenerateVariants:U,isGenerating:s,onOpenChat:j})})]})})},eH=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:r,isGenerating:s,vacationPlan:o,onCreateSet:u,onClose:d})=>{const h=document.documentElement.classList.contains("dark");return g.jsx(el,{open:t,onDismiss:d,className:h?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),g.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:f})=>f*.7,snapPoints:({maxHeight:f})=>[f*.7,f*.9],children:g.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[g.jsx(Ak,{clothingItems:e,clothingSets:n,onGeneratePlan:r,isGenerating:s}),s&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[g.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&g.jsx(Ck,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:u})]})})},tH=({open:t,clothingItems:e,clothingSets:n,onClose:r,onCreateSet:s})=>{const[o,u]=O.useState(new Set),d=new Set(n.flatMap(E=>E.itemIds)),f=e.filter(E=>!d.has(E.id)).reduce((E,A)=>(E[A.category]||(E[A.category]=[]),E[A.category].push(A),E),{}),v=E=>{u(A=>{const D=new Set(A);return D.has(E)?D.delete(E):D.add(E),D})},b=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const E=window.prompt("Donnez un nom  cet ensemble :");E&&s(E,Array.from(o))},x=document.documentElement.classList.contains("dark");return g.jsx(el,{open:t,onDismiss:r,className:x?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),g.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:g.jsxs("button",{onClick:b,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[g.jsx(Dp,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:E})=>E*.6,snapPoints:({maxHeight:E})=>[E*.6,E*.85],children:g.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[g.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),g.jsx("div",{className:"space-y-4",children:Object.keys(f).map(E=>f[E].length>0&&g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-lg mb-2",children:E}),g.jsx("div",{className:"grid grid-cols-3 gap-3",children:f[E].map(A=>{const D=o.has(A.id);return g.jsxs("button",{onClick:()=>v(A.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:D?"#D4AF37":"transparent"},children:[D&&g.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:g.jsx(Gb,{})}),g.jsx("div",{className:"aspect-square",children:g.jsx("img",{src:A.imageSrc,alt:A.analysis,className:"w-full h-full object-cover"})}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),g.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:A.analysis})]},A.id)})})]},E))})]})})},nH=(t,e)=>{const n=Wa(ri,"users",t,"items"),r=Cp(n);return Np(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (items listener):",o)})},rH=async(t,e)=>{try{const n=Wa(ri,"users",t,"items");return(await Ip(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},JA=async(t,e,n)=>{try{const r=Ru(ri,"users",t,"items",e);await E5(r,n)}catch(r){throw console.error("Erreur lors de la mise  jour d'un vtement:",r),r}},ZA=async(t,e)=>{try{const n=Ru(ri,"users",t,"items",e);await Pb(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},iH=(t,e)=>{const n=Wa(ri,"users",t,"favoriteOutfits"),r=Cp(n);return Np(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},sH=async(t,e)=>{try{const n=Wa(ri,"users",t,"favoriteOutfits");return(await Ip(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},aH=async(t,e)=>{try{const n=Ru(ri,"users",t,"favoriteOutfits",e);await Pb(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},oH=(t,e)=>{const n=Wa(ri,"users",t,"sets"),r=Cp(n);return Np(r,o=>{const u=o.docs.map(d=>({id:d.id,...d.data()}));e(u)},o=>{console.error("Erreur (sets listener):",o)})},lH=async(t,e)=>{try{const n=Wa(ri,"users",t,"sets");return(await Ip(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},uH=async(t,e)=>{try{const n=Ru(ri,"users",t,"sets",e);await Pb(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},cH=async(t,e,n,r)=>{try{const s=Wa(ri,"users",t,"wearHistory");return(await Ip(s,{outfitTitle:e,outfitDescription:n,itemIds:r,wornAt:Date.now()})).id}catch(s){throw console.error("Erreur lors de l'ajout de l'historique de port:",s),s}},dH=(t,e)=>{const n=Wa(ri,"users",t,"wearHistory"),r=Date.now()-720*60*60*1e3,s=Cp(n,y5("wornAt",">=",r));return Np(s,u=>{const d=u.docs.map(h=>({id:h.id,...h.data()}));e(d)},u=>{console.error("Erreur (wearHistory listener):",u)})},hH=async(t,e,n)=>{try{const r=GR(YR,`users/${t}/clothing/${n}.jpg`);return await k6(r,e,"data_url"),await HR(r)}catch(r){throw console.error("Erreur upload vtement:",r),r}},fH=async(t,e)=>{try{const n=await mH(e,1024),r=GR(YR,`users/${t}/profile/model_photo.jpg`);return await N6(r,n),await HR(r)}catch(n){throw console.error("Erreur upload photo profil:",n),n}},mH=(t,e)=>new Promise((n,r)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=o=>{var d;const u=new Image;u.src=(d=o.target)==null?void 0:d.result,u.onload=()=>{const h=e/u.width,f=document.createElement("canvas");f.width=e,f.height=u.height*h;const v=f.getContext("2d");v?(v.drawImage(u,0,0,f.width,f.height),f.toBlob(b=>{b?n(b):r(new Error("Blob creation failed"))},"image/jpeg",.85)):r(new Error("Canvas error"))}},s.onerror=o=>r(o)}),Rk=O.createContext(void 0),pH=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=s=>{var u;const o=new Image;o.src=(u=s.target)==null?void 0:u.result,o.onload=()=>{const d=document.createElement("canvas"),h=800,f=h/o.width;d.width=h,d.height=o.height*f;const v=d.getContext("2d");v?(v.drawImage(o,0,0,d.width,d.height),e(d.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=d=>n(d)},r.onerror=s=>n(s)}),gH=({children:t,user:e})=>{const[n,r]=O.useState([]),[s,o]=O.useState([]),[u,d]=O.useState([]),[h,f]=O.useState([]),[v,b]=O.useState(localStorage.getItem("dressmup_user_model_url")),[x,E]=O.useState(!1),[A,D]=O.useState(!0);O.useEffect(()=>{v&&localStorage.setItem("dressmup_user_model_url",v)},[v]),O.useEffect(()=>{if(e){const L=nH(e.uid,Q=>{r(Q),D(!1)}),N=oH(e.uid,Q=>{o(Q)}),be=iH(e.uid,Q=>{d(Q)}),ke=dH(e.uid,Q=>{f(Q)});return()=>{L(),N(),be(),ke()}}else r([]),o([]),d([]),f([]),D(!1)},[e]);const M=O.useCallback(async L=>{if(e)try{const N=await fH(e.uid,L);b(N)}catch(N){throw console.error("Erreur mise  jour photo modle:",N),N}},[e]),U=O.useCallback(async L=>{if(!(L.length===0||!e)){E(!0);try{const N=L.map(he=>pH(he)),be=await Promise.all(N),ke=be.map(he=>he.split(",")[1]),Q=await aL(ke),se=Math.min(Q.length,L.length);for(let he=0;he<se;he++){const we=Q[he];let Ee="";try{Ee=await rH(e.uid,{...we,createdAt:Date.now()});const B=await hH(e.uid,be[he],Ee);await JA(e.uid,Ee,{imageSrc:B})}catch(B){console.error(`chec pour ${L[he].name}.`,B),Ee&&await ZA(e.uid,Ee)}}}catch(N){console.error("Erreur lot:",N)}finally{E(!1)}}},[e]),j=O.useCallback(async L=>{e&&await ZA(e.uid,L)},[e]),z=O.useCallback(async L=>{e&&await JA(e.uid,L.id,L)},[e]),G=O.useCallback(async L=>{if(!e)return;const{id:N,...be}=L;await sH(e.uid,be)},[e]),$=O.useCallback(async L=>{e&&await aH(e.uid,L)},[e]),q=O.useCallback(async(L,N)=>{var Q;if(!e)return;const be=((Q=n.find(se=>se.id===N[0]))==null?void 0:Q.imageSrc)||"",ke={name:L,itemIds:N,imageSrc:be};await lH(e.uid,ke)},[e,n]),C=O.useCallback(async L=>{e&&await uH(e.uid,L)},[e]),S=O.useCallback(async(L,N,be)=>{e&&await cH(e.uid,L,N,be)},[e]),I=O.useCallback(L=>h.filter(N=>N.itemIds.includes(L)).length,[h]),V=O.useCallback(()=>{const L=Date.now()-6048e5;return h.filter(N=>N.wornAt>=L).sort((N,be)=>be.wornAt-N.wornAt)},[h]),P={clothingItems:n,clothingSets:s,favoriteOutfits:u,wearHistory:h,userModelImage:v,setUserModelImage:b,updateUserModelPhoto:M,isAnalyzing:x,analyzeClothingItems:U,deleteClothingItem:j,updateClothingItem:z,createClothingSet:q,deleteClothingSet:C,addFavoriteOutfit:G,deleteFavoriteOutfit:$,recordOutfitWear:S,getItemWearCount:I,getWornOutfitsLast7Days:V,loading:A};return g.jsx(Rk.Provider,{value:P,children:t})},vH=()=>{const t=O.useContext(Rk);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},yH=({open:t,outfit:e,onClose:n,onSendMessage:r,isGenerating:s,messages:o})=>{const[u,d]=O.useState(""),h=O.useRef(null),f=document.documentElement.classList.contains("dark"),v=()=>{var x;(x=h.current)==null||x.scrollIntoView({behavior:"smooth"})};O.useEffect(()=>{v()},[o]);const b=async x=>{if(x.preventDefault(),!u.trim()||s)return;const E={role:"user",content:u.trim(),timestamp:Date.now()};d("");try{await r(u.trim(),[...o,E])}catch(A){console.error("Error sending message:",A)}};return e?g.jsx(el,{open:t,onDismiss:n,className:f?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Conseils Styliste"}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.titre})]}),g.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:x})=>x*.7,snapPoints:({minHeight:x,maxHeight:E})=>[x,E*.7,E*.95],children:g.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-raisin-black",children:[g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.length===0&&g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gold/10 mb-4",children:g.jsx("svg",{className:"w-8 h-8 text-gold",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),g.jsx("h3",{className:"font-bold text-raisin-black dark:text-snow mb-2",children:"Posez-moi une question"}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-sm mx-auto",children:"Je peux vous conseiller sur cette tenue, suggrer des alternatives de votre garde-robe, ou rpondre  vos questions de style."})]}),o.map((x,E)=>g.jsx("div",{className:`flex ${x.role==="user"?"justify-end":"justify-start"}`,children:g.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${x.role==="user"?"bg-gold text-raisin-black":"bg-gray-100 dark:bg-gray-800 text-raisin-black dark:text-snow"}`,children:g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:x.content})})},E)),s&&g.jsx("div",{className:"flex justify-start",children:g.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl px-4 py-3",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs("div",{className:"flex space-x-1",children:[g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),g.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),g.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Rflexion en cours..."})]})})}),g.jsx("div",{ref:h})]}),g.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:g.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[g.jsx("input",{type:"text",value:u,onChange:x=>d(x.target.value),placeholder:"Posez votre question...",disabled:s,className:"flex-1 px-4 py-2 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-raisin-black dark:text-snow focus:outline-none focus:ring-2 focus:ring-gold disabled:opacity-50"}),g.jsx("button",{type:"submit",disabled:!u.trim()||s,className:"px-6 py-2 bg-gold text-raisin-black rounded-full font-medium hover:bg-gold-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Envoyer"})]})})]})}):null},bH={openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},xH=({open:t,onClose:e,allClothingItems:n,allClothingSets:r,favoriteOutfits:s,onToggleFavorite:o,onGenerateVisual:u,generatingVisualFor:d,selectedOutfit:h,onSelectOutfit:f,onGenerateVariants:v,isGenerating:b,onOpenChat:x})=>{const E=document.documentElement.classList.contains("dark");return g.jsx(el,{open:t,onDismiss:e,className:E?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:A})=>A*.65,snapPoints:({maxHeight:A})=>[A*.65,A*.85],children:g.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:s.length>0?g.jsx(su,{outfits:s,allClothingItems:n,allClothingSets:r,favoriteOutfits:s,onToggleFavorite:o,onGenerateVisual:u,generatingVisualFor:d,selectedOutfit:h,onSelectOutfit:f,onGenerateVariants:v,isGenerating:b,onOpenChat:x}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},_H=({open:t,onClose:e,allClothingItems:n,allClothingSets:r,wornOutfits:s,favoriteOutfits:o,onToggleFavorite:u,onGenerateVisual:d,generatingVisualFor:h,selectedOutfit:f,onSelectOutfit:v,onGenerateVariants:b,isGenerating:x,onOpenChat:E})=>{const A=document.documentElement.classList.contains("dark"),D=O.useMemo(()=>s.map(M=>{const U=M.itemIds.map(j=>{const z=n.find(G=>G.id===j);return z?{id:z.id,description:z.analysis}:{id:j,description:"Article supprim"}});return{titre:M.outfitTitle,description:M.outfitDescription,vetements:U}}),[s,n]);return g.jsx(el,{open:t,onDismiss:e,className:A?"dark":"",header:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Portes"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:M})=>M*.65,snapPoints:({maxHeight:M})=>[M*.65,M*.85],children:g.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:D.length>0?g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Vos tenues portes ces 7 derniers jours"}),g.jsx(su,{outfits:D,allClothingItems:n,allClothingSets:r,favoriteOutfits:o,onToggleFavorite:u,onGenerateVisual:d,generatingVisualFor:h,selectedOutfit:f,onSelectOutfit:v,onGenerateVariants:b,isGenerating:x,onOpenChat:E})]}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("p",{className:"text-gray-500 font-medium",children:"Vous n'avez pas encore port de tenue cette semaine."}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Slectionnez une tenue en cliquant sur  pour l'ajouter  votre historique"})]})})})},Qf=!1,Ts=t=>{const e=t instanceof Error?t.message:String(t);return e.includes("API_KEY_HTTP_REFERRER_BLOCKED")||e.includes("403")?" Accs refus par Google : Domaine non autoris. Vrifiez la console Google Cloud.":e.includes("429")||e.includes("payment method")||e.includes("throttled")?" Limite de gnration atteinte. Veuillez attendre quelques secondes ou ajouter un moyen de paiement sur Replicate.":e.includes("prediction")?" Erreur lors de la gnration visuelle. Le service est peut-tre surcharg.":e.includes("404")?" Modle introuvable. Veuillez ressayer plus tard.":e.includes("API_KEY_INVALID")?" Cl API invalide. Vrifiez votre configuration.":e},wH=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(null),[s,o]=O.useState([]),[u,d]=O.useState(null),[h,f]=O.useState(!1),[v,b]=O.useState(null),[x,E]=O.useState(!1),[A,D]=O.useState(null),[M,U]=O.useState(!1),[j,z]=O.useState("home"),[G,$]=O.useState(!1),[q,C]=O.useState(!1),[S,I]=O.useState(!1),[V,P]=O.useState(!1),[L,N]=O.useState(!1),[be,ke]=O.useState(!1),[Q,se]=O.useState(null),[he,we]=O.useState(null),[Ee,B]=O.useState(!1),[J,ee]=O.useState(0),[re,fe]=O.useState(null),[je,Te]=O.useState(null),[Mt,St]=O.useState(!1),[qn,Tr]=O.useState(!1),[Vt,Hn]=O.useState(""),[Tn,Dn]=O.useState("favorites"),[On,nr]=O.useState(null),[zr,Sr]=O.useState(!1),[jn,Ar]=O.useState(null),[_i,Br]=O.useState(!1),[wt,on]=O.useState([]);O.useEffect(()=>{if(n){const de=n.includes("Accs refus")?1e4:5e3,ve=setTimeout(()=>r(null),de);return()=>clearTimeout(ve)}},[n]);const[He,Lt]=O.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:$t,clothingSets:Kt,isAnalyzing:Fr,analyzeClothingItems:Ls,deleteClothingItem:Mn,createClothingSet:rr,updateClothingItem:mn,deleteClothingSet:le,favoriteOutfits:ge,addFavoriteOutfit:_e,deleteFavoriteOutfit:qe,userModelImage:mt,recordOutfitWear:$e,getItemWearCount:Ye,getWornOutfitsLast7Days:Je,loading:Ze}=vH(),[Re,Le]=O.useState(null),Ce=Nn.useMemo(()=>($t||[]).sort((ve,ze)=>(ze.isFavorite?1:0)-(ve.isFavorite?1:0)),[$t]),Sn=O.useCallback(de=>{const ve=ge.find(ze=>ze.titre===de.titre&&ze.description===de.description);ve?(qe(ve.id),Le("Retir des favoris")):(_e(de),Le("Ajout aux favoris ")),setTimeout(()=>Le(null),2e3)},[ge,_e,qe]),At=O.useCallback(de=>{if((u==null?void 0:u.titre)===de.titre&&(u==null?void 0:u.description)===de.description)d(null),Le("Slection annule");else{d(de),Le("Tenue choisie ");const ze=de.vetements.map(Xe=>Xe.id);$e(de.titre,de.description,ze)}setTimeout(()=>Le(null),2e3)},[u,$e]),De=Nn.useMemo(()=>Kt||[],[Kt]),pt=Nn.useMemo(()=>new Set(De.flatMap(de=>de.itemIds||[])),[De]),ln=O.useMemo(()=>Je(),[Je]);O.useEffect(()=>{const de=async(Xe,yt)=>{const Rn=bH.openWeatherApiKey,Ja=`https://api.openweathermap.org/data/2.5/weather?lat=${Xe}&lon=${yt}&appid=${Rn}&units=metric&lang=fr`;try{const ns=await fetch(Ja);if(!ns.ok)throw new Error("Impossible de rcuprer la mto.");const rs=await ns.json(),Za=`${Math.round(rs.main.temp)}C, ${rs.weather[0].description},  ${rs.name}`;se(Za),we(null),localStorage.setItem("cachedWeather",JSON.stringify({weather:Za,timestamp:Date.now()}))}catch{we("Mto indisponible.")}},ve=localStorage.getItem("cachedWeather");if(ve)try{const{weather:Xe,timestamp:yt}=JSON.parse(ve),Rn=1800*1e3;if(Date.now()-yt<Rn){se(Xe),we(null);return}}catch{}const ze=localStorage.getItem("cachedPosition");if(ze)try{const{lat:Xe,lon:yt,timestamp:Rn}=JSON.parse(ze),Ja=1800*1e3;if(Date.now()-Rn<Ja){de(Xe,yt);return}}catch{}navigator.geolocation?navigator.geolocation.getCurrentPosition(Xe=>{const yt=Xe.coords.latitude,Rn=Xe.coords.longitude;localStorage.setItem("cachedPosition",JSON.stringify({lat:yt,lon:Rn,timestamp:Date.now()})),de(yt,Rn)},()=>we("Activez la golocalisation pour la mto.")):we("Golocalisation non supporte.")},[]);const kt=O.useCallback(async(de,ve)=>{if(Ce.length===0){r("Veuillez d'abord ajouter des vtements.");return}f(!0),r(null);const ze=ve||On,Xe=Q?`Mto actuelle : ${Q}. Occasion : ${de}`:`Occasion : ${de}`;try{const yt=await cL(Ce,De,Xe,ze||void 0);o(yt),nr(null)}catch(yt){r(Ts(yt))}finally{f(!1)}},[Ce,De,Q,On]),Yt=O.useCallback(async(de,ve)=>{if(Ce.length===0){r("Veuillez d'abord ajouter des vtements.");return}f(!0),r(null);const ze=Q?`Mto actuelle : ${Q}. Contexte original : ${de.description}`:`Contexte original : ${de.description}`;try{const Xe=await dL(Ce,De,ze,de,ve);o(Xe)}catch(Xe){r(Ts(Xe))}finally{f(!1)}},[Ce,De,Q]),An=O.useCallback(de=>{Ar(de),on([]),$(!1),P(!1),N(!1),Sr(!0)},[]),Cn=O.useCallback(async(de,ve)=>{if(jn){on(ve),Br(!0);try{const Xe={role:"assistant",content:(await hL(jn,de,ve,Ce,De)).message,timestamp:Date.now()};on(yt=>[...yt,Xe])}catch(ze){r(Ts(ze))}finally{Br(!1)}}},[jn,Ce,De]),Pn=O.useCallback(async(de,ve,ze)=>{if(Ce.length===0){r("Veuillez d'abord ajouter des vtements.");return}E(!0),r(null);try{const Xe=await gL(Ce,De,de,ve,ze);b(Xe)}catch(Xe){r(Ts(Xe))}finally{E(!1)}},[Ce,De]),ii=O.useCallback(async()=>{if(Ce.length<3){r("Ajoutez au moins 3 vtements pour une analyse.");return}U(!0),r(null);try{const de=await mL(Ce,De);D(de)}catch(de){r(Ts(de))}finally{U(!1)}},[Ce,De]),pn=O.useCallback(async de=>{},[Ce,mt]),Dt=O.useCallback(()=>$(!0),[]),Qt=O.useCallback(()=>C(!0),[]),ir=de=>e(de),Cr=()=>e(null),sr=de=>{Mn(de).catch(ve=>r(Ts(ve))),e(null)},ts=de=>{mn(de).catch(ve=>r(Ts(ve))),e(de)},qr=de=>{nr(de),e(null),$(!0)},Gn=O.useCallback((de,ve)=>{rr(de,ve).catch(ze=>r(Ts(ze)))},[rr]),Rr=O.useCallback(de=>{le(de).catch(ve=>r(Ts(ve)))},[le]);O.useCallback(async()=>{B(!0),await new Promise(de=>setTimeout(de,1e3)),B(!1)},[]);const ar={hauts:Ce.filter(de=>de.category==="Hauts").length,bas:Ce.filter(de=>de.category==="Bas").length,chaussures:Ce.filter(de=>de.category==="Chaussures").length,accessoires:Ce.filter(de=>de.category==="Accessoires").length},$n=O.useMemo(()=>{if(j==="home")return[];let de=Ce.filter(ve=>j==="hauts"?ve.category==="Hauts":j==="bas"?ve.category==="Bas":j==="chaussures"?ve.category==="Chaussures":j==="accessoires"?ve.category==="Accessoires":!1);if(Vt.trim()){const ve=Vt.toLowerCase();de=de.filter(ze=>ze.analysis.toLowerCase().includes(ve)||ze.color.toLowerCase().includes(ve)||ze.material.toLowerCase().includes(ve))}return[...de].sort((ve,ze)=>{switch(Tn){case"favorites":return(ze.isFavorite?1:0)-(ve.isFavorite?1:0);case"newest":return(ze.createdAt||0)-(ve.createdAt||0);case"oldest":return(ve.createdAt||0)-(ze.createdAt||0);case"color":return ve.color.localeCompare(ze.color);default:return 0}})},[j,Ce,Vt,Tn]),Ir=G||q||S||!!t||!!A||!!je||be;return O.useEffect(()=>{const de=document.querySelector("header");de&&(de.style.zIndex=Ir?"10":"50")},[Ir]),O.useEffect(()=>{if(!Fr&&Ce.length>J&&J>0){const de=Ce.length-J;Le(`${de} vtement${de>1?"s":""} ajout${de>1?"s":""} `),setTimeout(()=>Le(null),2e3)}ee(Ce.length)},[Fr,Ce.length]),g.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[Qf,n&&g.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between shadow-sm animate-pulse",role:"alert",children:[g.jsxs("div",{className:"flex-1 mr-2",children:[g.jsx("strong",{className:"font-bold block mb-1",children:"Attention :"}),g.jsx("span",{className:"block text-sm leading-relaxed",children:n})]}),g.jsx("button",{onClick:()=>r(null),className:"p-1.5 hover:bg-red-500/30 rounded-full transition-colors flex-shrink-0","aria-label":"Fermer",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[Qf,Ce.length>=3&&g.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:" Analyse : ~30 secondes"})]}),g.jsx("button",{onClick:ii,disabled:M,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:M?"Analyse...":"Analyser ma garde-robe"})]}),g.jsx("div",{className:"hidden md:block",children:g.jsx(iB,{onAnalyze:Ls,isAnalyzing:Fr})}),g.jsx("div",{className:"hidden md:block",children:g.jsx(lB,{clothingItems:Ce,clothingSets:De,onItemClick:ir,onDeleteItem:sr,onCreateSet:Gn,isLoading:Ze})}),g.jsxs("div",{className:"md:hidden",children:[j==="home"&&g.jsx(Wq,{onAnalyzeWardrobe:ii,onScrollToOutfits:Dt,onScrollToVacation:Qt,onStartSetCreation:()=>I(!0),onShowFavorites:()=>P(!0),onShowWornOutfits:()=>N(!0),isAnalyzingWardrobe:M,clothingCount:Ce.length,favoriteOutfitCount:ge.length,wornOutfitCount:ln.length}),j!=="home"&&g.jsxs("div",{className:"pb-24",children:[Ee&&g.jsx("div",{className:"flex justify-center py-4",children:g.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),g.jsxs("div",{className:"text-center py-4 px-4",children:[g.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:j}),g.jsxs("p",{className:"text-sm text-gray-500",children:[$n.length," vtement",$n.length>1?"s":""]})]}),g.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[g.jsxs("div",{className:"relative",children:[g.jsx(XR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),g.jsx("input",{type:"text",value:Vt,onChange:de=>Hn(de.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),Vt&&g.jsx("button",{onClick:()=>Hn(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:g.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"relative",children:[g.jsx(JR,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),g.jsxs("select",{value:Tn,onChange:de=>Dn(de.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[g.jsx("option",{value:"favorites",children:"Favoris d'abord"}),g.jsx("option",{value:"newest",children:"Plus rcents"}),g.jsx("option",{value:"oldest",children:"Plus anciens"}),g.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),g.jsx(Zc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),$n.length>0?g.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:$n.map(de=>g.jsxs("div",{onClick:()=>ir(de),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[de.isFavorite?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:g.jsx(pu,{className:"w-4 h-4"})}):pt.has(de.id)?g.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:g.jsx(Dp,{})}):null,g.jsx("div",{className:"aspect-square",children:g.jsx("img",{src:de.imageSrc,alt:de.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"p-3",children:[g.jsx("p",{className:"text-sm font-medium line-clamp-2",children:de.analysis}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:de.color})]})]},de.id))}):g.jsx("div",{className:"text-center py-12 px-4",children:Vt?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',Vt,'"']}),g.jsx("button",{onClick:()=>Hn(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),g.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),g.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[g.jsx("div",{id:"outfit-generator",children:g.jsx(RN,{clothingItems:Ce,clothingSets:De,onGenerate:kt,isGenerating:h,weatherInfo:Q,weatherError:he,anchorItem:On,onClearAnchor:()=>nr(null)})}),s.length>0&&g.jsx(su,{outfits:s,allClothingItems:Ce,allClothingSets:De,favoriteOutfits:ge,onToggleFavorite:Sn,onGenerateVisual:pn,generatingVisualFor:re,selectedOutfit:u,onSelectOutfit:At,onGenerateVariants:Yt,isGenerating:h,onOpenChat:An}),ge.length>0&&g.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[g.jsxs("button",{onClick:()=>St(!Mt),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(pu,{className:"text-gold w-5 h-5"}),g.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",g.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",ge.length,")"]})]})]}),g.jsx("div",{className:`transition-transform duration-300 ${Mt?"rotate-180":""} text-gray-400`,children:g.jsx(Zc,{})})]}),Mt&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:g.jsx(su,{outfits:ge,allClothingItems:Ce,allClothingSets:De,favoriteOutfits:ge,onToggleFavorite:Sn,onGenerateVisual:pn,generatingVisualFor:re,selectedOutfit:u,onSelectOutfit:At,onGenerateVariants:Yt,isGenerating:h,onOpenChat:An})})]}),ln.length>0&&g.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[g.jsxs("button",{onClick:()=>Tr(!qn),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),g.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Tenues Portes ",g.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(7 derniers jours - ",ln.length,")"]})]})]}),g.jsx("div",{className:`transition-transform duration-300 ${qn?"rotate-180":""} text-gray-400`,children:g.jsx(Zc,{})})]}),qn&&g.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:g.jsx(su,{outfits:ln.map(de=>({titre:de.outfitTitle,description:de.outfitDescription,vetements:de.itemIds.map(ve=>{const ze=Ce.find(Xe=>Xe.id===ve);return{id:ve,description:ze?ze.analysis:"Article supprim"}})})),allClothingItems:Ce,allClothingSets:De,favoriteOutfits:ge,onToggleFavorite:Sn,onGenerateVisual:pn,generatingVisualFor:re,selectedOutfit:u,onSelectOutfit:At,onGenerateVariants:Yt,isGenerating:h,onOpenChat:An})})]}),g.jsx("div",{id:"vacation-planner",children:g.jsx(Ak,{clothingItems:Ce,clothingSets:De,onGeneratePlan:Pn,isGenerating:x})}),v&&g.jsx(Ck,{plan:v,allClothingItems:Ce,allClothingSets:De,onCreateSet:Gn})]})]}),t&&g.jsx(Yq,{item:t,clothingSets:De,onClose:Cr,onUpdate:ts,onGenerateFrom:qr,onRemoveSet:Rr,onDelete:sr,getItemWearCount:Ye}),A&&g.jsx(Jq,{analysis:A,onClose:()=>D(null)}),Qf,g.jsx(Qq,{onFilesSelected:Ls,isAnalyzing:Fr,isOtherModalOpen:Ir}),g.jsx(Xq,{activeTab:j,onTabChange:z,counts:ar}),g.jsx(Zq,{open:G,clothingItems:Ce,clothingSets:De,onGenerate:kt,isGenerating:h,suggestedOutfits:s,onClose:()=>{$(!1),nr(null)},weatherInfo:Q,weatherError:he,favoriteOutfits:ge,onToggleFavorite:Sn,onGenerateVisual:pn,generatingVisualFor:re,selectedOutfit:u,onSelectOutfit:At,anchorItem:On,onClearAnchor:()=>nr(null),onGenerateVariants:Yt,onOpenChat:An}),g.jsx(eH,{open:q,clothingItems:Ce,clothingSets:De,onGeneratePlan:Pn,isGenerating:x,vacationPlan:v,onCreateSet:Gn,onClose:()=>C(!1)}),g.jsx(yH,{open:zr,outfit:jn,onClose:()=>Sr(!1),onSendMessage:async(de,ve)=>{await Cn(de,ve)},isGenerating:_i,messages:wt}),g.jsx(tH,{open:S,clothingItems:Ce,clothingSets:De,onClose:()=>I(!1),onCreateSet:(de,ve)=>{Gn(de,ve),I(!1)}}),g.jsx(xH,{open:V,onClose:()=>P(!1),allClothingItems:Ce,allClothingSets:De,favoriteOutfits:ge,onToggleFavorite:Sn,onGenerateVisual:pn,generatingVisualFor:re,selectedOutfit:u,onSelectOutfit:At,onGenerateVariants:Yt,isGenerating:h,onOpenChat:An}),g.jsx(_H,{open:L,onClose:()=>N(!1),allClothingItems:Ce,allClothingSets:De,wornOutfits:ln,favoriteOutfits:ge,onToggleFavorite:Sn,onGenerateVisual:pn,generatingVisualFor:re,selectedOutfit:u,onSelectOutfit:At,onGenerateVariants:Yt,isGenerating:h,onOpenChat:An}),Qf,He&&g.jsx(fO,{onComplete:()=>Lt(!1)}),Re&&g.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:g.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[Re.includes("")&&g.jsx("span",{className:"animate-pulse",children:""}),Re.includes("Retir")&&g.jsx("span",{children:""}),Re.includes("ajout")&&!Re.includes("")&&g.jsx("span",{children:""}),g.jsx("span",{children:Re.replace("","").trim()})]})})]})},EH=()=>{const[t,e]=O.useState(null),[n,r]=O.useState("dark"),[s,o]=O.useState(!1);O.useEffect(()=>{const d=Xj(Co,h=>{e(h),h&&o(!1)});return()=>d()},[]),O.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const u=()=>{r(d=>d==="light"?"dark":"light")};return g.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?g.jsxs(g.Fragment,{children:[g.jsx(AL,{theme:n,toggleTheme:u,children:g.jsx(WT,{user:t})}),g.jsx(gH,{user:t,children:g.jsx(wH,{})})]}):s?g.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 animate-slide-up",children:g.jsxs("div",{className:"w-full max-w-md",children:[g.jsx("button",{onClick:()=>o(!1),className:"mb-4 flex items-center gap-2 text-gray-500 hover:text-gold transition-colors text-sm font-medium",children:" Retour"}),g.jsx(WT,{user:t})]})}):g.jsx(rB,{onGetStarted:()=>o(!0)})})},Ik=document.getElementById("root");if(!Ik)throw new Error("L'lment root est introuvable dans le DOM");const TH=hO.createRoot(Ik);TH.render(g.jsx(Nn.StrictMode,{children:g.jsx(EH,{})}));
