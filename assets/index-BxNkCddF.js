(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function aC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mg={exports:{}},$u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS;function XN(){if(eS)return $u;eS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:a}}return $u.Fragment=e,$u.jsx=n,$u.jsxs=n,$u}var tS;function ZN(){return tS||(tS=1,Mg.exports=XN()),Mg.exports}var b=ZN(),kg={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nS;function eD(){if(nS)return Fe;nS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function w(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,L={};function H(z,Q,fe){this.props=z,this.context=Q,this.refs=L,this.updater=fe||D}H.prototype.isReactComponent={},H.prototype.setState=function(z,Q){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Q,"setState")},H.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function F(){}F.prototype=H.prototype;function q(z,Q,fe){this.props=z,this.context=Q,this.refs=L,this.updater=fe||D}var $=q.prototype=new F;$.constructor=q,V($,H.prototype),$.isPureReactComponent=!0;var Z=Array.isArray;function G(){}var I={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(z,Q,fe){var me=fe.ref;return{$$typeof:t,type:z,key:Q,ref:me!==void 0?me:null,props:fe}}function P(z,Q){return R(z.type,Q,z.props)}function M(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function O(z){var Q={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(fe){return Q[fe]})}var U=/\/+/g;function Ie(z,Q){return typeof z=="object"&&z!==null&&z.key!=null?O(""+z.key):Q.toString(36)}function _e(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(G,G):(z.status="pending",z.then(function(Q){z.status==="pending"&&(z.status="fulfilled",z.value=Q)},function(Q){z.status==="pending"&&(z.status="rejected",z.reason=Q)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function te(z,Q,fe,me,de){var Oe=typeof z;(Oe==="undefined"||Oe==="boolean")&&(z=null);var we=!1;if(z===null)we=!0;else switch(Oe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(z.$$typeof){case t:case e:we=!0;break;case y:return we=z._init,te(we(z._payload),Q,fe,me,de)}}if(we)return de=de(z),we=me===""?"."+Ie(z,0):me,Z(de)?(fe="",we!=null&&(fe=we.replace(U,"$&/")+"/"),te(de,Q,fe,"",function(Fn){return Fn})):de!=null&&(M(de)&&(de=P(de,fe+(de.key==null||z&&z.key===de.key?"":(""+de.key).replace(U,"$&/")+"/")+we)),Q.push(de)),1;we=0;var jt=me===""?".":me+":";if(Z(z))for(var gt=0;gt<z.length;gt++)me=z[gt],Oe=jt+Ie(me,gt),we+=te(me,Q,fe,Oe,de);else if(gt=w(z),typeof gt=="function")for(z=gt.call(z),gt=0;!(me=z.next()).done;)me=me.value,Oe=jt+Ie(me,gt++),we+=te(me,Q,fe,Oe,de);else if(Oe==="object"){if(typeof z.then=="function")return te(_e(z),Q,fe,me,de);throw Q=String(z),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return we}function ce(z,Q,fe){if(z==null)return z;var me=[],de=0;return te(z,me,"","",function(Oe){return Q.call(fe,Oe,de++)}),me}function ge(z){if(z._status===-1){var Q=z._result;Q=Q(),Q.then(function(fe){(z._status===0||z._status===-1)&&(z._status=1,z._result=fe)},function(fe){(z._status===0||z._status===-1)&&(z._status=2,z._result=fe)}),z._status===-1&&(z._status=0,z._result=Q)}if(z._status===1)return z._result.default;throw z._result}var xe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Me={map:ce,forEach:function(z,Q,fe){ce(z,function(){Q.apply(this,arguments)},fe)},count:function(z){var Q=0;return ce(z,function(){Q++}),Q},toArray:function(z){return ce(z,function(Q){return Q})||[]},only:function(z){if(!M(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Fe.Activity=E,Fe.Children=Me,Fe.Component=H,Fe.Fragment=n,Fe.Profiler=s,Fe.PureComponent=q,Fe.StrictMode=i,Fe.Suspense=d,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(z){return I.H.useMemoCache(z)}},Fe.cache=function(z){return function(){return z.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(z,Q,fe){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var me=V({},z.props),de=z.key;if(Q!=null)for(Oe in Q.key!==void 0&&(de=""+Q.key),Q)!x.call(Q,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&Q.ref===void 0||(me[Oe]=Q[Oe]);var Oe=arguments.length-2;if(Oe===1)me.children=fe;else if(1<Oe){for(var we=Array(Oe),jt=0;jt<Oe;jt++)we[jt]=arguments[jt+2];me.children=we}return R(z.type,de,me)},Fe.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},Fe.createElement=function(z,Q,fe){var me,de={},Oe=null;if(Q!=null)for(me in Q.key!==void 0&&(Oe=""+Q.key),Q)x.call(Q,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(de[me]=Q[me]);var we=arguments.length-2;if(we===1)de.children=fe;else if(1<we){for(var jt=Array(we),gt=0;gt<we;gt++)jt[gt]=arguments[gt+2];de.children=jt}if(z&&z.defaultProps)for(me in we=z.defaultProps,we)de[me]===void 0&&(de[me]=we[me]);return R(z,Oe,de)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(z){return{$$typeof:c,render:z}},Fe.isValidElement=M,Fe.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:ge}},Fe.memo=function(z,Q){return{$$typeof:h,type:z,compare:Q===void 0?null:Q}},Fe.startTransition=function(z){var Q=I.T,fe={};I.T=fe;try{var me=z(),de=I.S;de!==null&&de(fe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(G,xe)}catch(Oe){xe(Oe)}finally{Q!==null&&fe.types!==null&&(Q.types=fe.types),I.T=Q}},Fe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Fe.use=function(z){return I.H.use(z)},Fe.useActionState=function(z,Q,fe){return I.H.useActionState(z,Q,fe)},Fe.useCallback=function(z,Q){return I.H.useCallback(z,Q)},Fe.useContext=function(z){return I.H.useContext(z)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(z,Q){return I.H.useDeferredValue(z,Q)},Fe.useEffect=function(z,Q){return I.H.useEffect(z,Q)},Fe.useEffectEvent=function(z){return I.H.useEffectEvent(z)},Fe.useId=function(){return I.H.useId()},Fe.useImperativeHandle=function(z,Q,fe){return I.H.useImperativeHandle(z,Q,fe)},Fe.useInsertionEffect=function(z,Q){return I.H.useInsertionEffect(z,Q)},Fe.useLayoutEffect=function(z,Q){return I.H.useLayoutEffect(z,Q)},Fe.useMemo=function(z,Q){return I.H.useMemo(z,Q)},Fe.useOptimistic=function(z,Q){return I.H.useOptimistic(z,Q)},Fe.useReducer=function(z,Q,fe){return I.H.useReducer(z,Q,fe)},Fe.useRef=function(z){return I.H.useRef(z)},Fe.useState=function(z){return I.H.useState(z)},Fe.useSyncExternalStore=function(z,Q,fe){return I.H.useSyncExternalStore(z,Q,fe)},Fe.useTransition=function(){return I.H.useTransition()},Fe.version="19.2.0",Fe}var iS;function ov(){return iS||(iS=1,kg.exports=eD()),kg.exports}var K=ov();const vn=aC(K);var Pg={exports:{}},Ju={},Vg={exports:{}},Lg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS;function tD(){return rS||(rS=1,(function(t){function e(te,ce){var ge=te.length;te.push(ce);e:for(;0<ge;){var xe=ge-1>>>1,Me=te[xe];if(0<s(Me,ce))te[xe]=ce,te[ge]=Me,ge=xe;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ce=te[0],ge=te.pop();if(ge!==ce){te[0]=ge;e:for(var xe=0,Me=te.length,z=Me>>>1;xe<z;){var Q=2*(xe+1)-1,fe=te[Q],me=Q+1,de=te[me];if(0>s(fe,ge))me<Me&&0>s(de,fe)?(te[xe]=de,te[me]=ge,xe=me):(te[xe]=fe,te[Q]=ge,xe=Q);else if(me<Me&&0>s(de,ge))te[xe]=de,te[me]=ge,xe=me;else break e}}return ce}function s(te,ce){var ge=te.sortIndex-ce.sortIndex;return ge!==0?ge:te.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],y=1,E=null,T=3,w=!1,D=!1,V=!1,L=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function $(te){for(var ce=n(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=te)i(h),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(h)}}function Z(te){if(V=!1,$(te),!D)if(n(d)!==null)D=!0,G||(G=!0,O());else{var ce=n(h);ce!==null&&_e(Z,ce.startTime-te)}}var G=!1,I=-1,x=5,R=-1;function P(){return L?!0:!(t.unstable_now()-R<x)}function M(){if(L=!1,G){var te=t.unstable_now();R=te;var ce=!0;try{e:{D=!1,V&&(V=!1,F(I),I=-1),w=!0;var ge=T;try{t:{for($(te),E=n(d);E!==null&&!(E.expirationTime>te&&P());){var xe=E.callback;if(typeof xe=="function"){E.callback=null,T=E.priorityLevel;var Me=xe(E.expirationTime<=te);if(te=t.unstable_now(),typeof Me=="function"){E.callback=Me,$(te),ce=!0;break t}E===n(d)&&i(d),$(te)}else i(d);E=n(d)}if(E!==null)ce=!0;else{var z=n(h);z!==null&&_e(Z,z.startTime-te),ce=!1}}break e}finally{E=null,T=ge,w=!1}ce=void 0}}finally{ce?O():G=!1}}}var O;if(typeof q=="function")O=function(){q(M)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Ie=U.port2;U.port1.onmessage=M,O=function(){Ie.postMessage(null)}}else O=function(){H(M,0)};function _e(te,ce){I=H(function(){te(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(te){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var ge=T;T=ce;try{return te()}finally{T=ge}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ge=T;T=te;try{return ce()}finally{T=ge}},t.unstable_scheduleCallback=function(te,ce,ge){var xe=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?xe+ge:xe):ge=xe,te){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=ge+Me,te={id:y++,callback:ce,priorityLevel:te,startTime:ge,expirationTime:Me,sortIndex:-1},ge>xe?(te.sortIndex=ge,e(h,te),n(d)===null&&te===n(h)&&(V?(F(I),I=-1):V=!0,_e(Z,ge-xe))):(te.sortIndex=Me,e(d,te),D||w||(D=!0,G||(G=!0,O()))),te},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(te){var ce=T;return function(){var ge=T;T=ce;try{return te.apply(this,arguments)}finally{T=ge}}}})(Lg)),Lg}var sS;function nD(){return sS||(sS=1,Vg.exports=tD()),Vg.exports}var Og={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS;function iD(){if(oS)return Gn;oS=1;var t=ov();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,h,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:d,containerInfo:h,implementation:y}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gn.createPortal=function(d,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,y)},Gn.flushSync=function(d){var h=l.T,y=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=y,i.d.f()}},Gn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},Gn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Gn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:w}):y==="script"&&i.d.X(d,{crossOrigin:E,integrity:T,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Gn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},Gn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin);i.d.L(d,y,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Gn.preloadModule=function(d,h){if(typeof d=="string")if(h){var y=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},Gn.requestFormReset=function(d){i.d.r(d)},Gn.unstable_batchedUpdates=function(d,h){return d(h)},Gn.useFormState=function(d,h,y){return l.H.useFormState(d,h,y)},Gn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Gn.version="19.2.0",Gn}var aS;function lC(){if(aS)return Og.exports;aS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Og.exports=iD(),Og.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function rD(){if(lS)return Ju;lS=1;var t=nD(),e=ov(),n=lC();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,f=o;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return d(v),r;if(_===f)return d(v),o;_=_.sibling}throw Error(i(188))}if(u.return!==f.return)u=v,f=_;else{for(var A=!1,N=v.child;N;){if(N===u){A=!0,u=v,f=_;break}if(N===f){A=!0,f=v,u=_;break}N=N.sibling}if(!A){for(N=_.child;N;){if(N===u){A=!0,u=_,f=v;break}if(N===f){A=!0,f=_,u=v;break}N=N.sibling}if(!A)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function y(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=y(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),q=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function O(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var U=Symbol.for("react.client.reference");function Ie(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===U?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case V:return"Fragment";case H:return"Profiler";case L:return"StrictMode";case Z:return"Suspense";case G:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case D:return"Portal";case q:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case $:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return o=r.displayName||null,o!==null?o:Ie(r.type)||"Memo";case x:o=r._payload,r=r._init;try{return Ie(r(o))}catch{}}return null}var _e=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},xe=[],Me=-1;function z(r){return{current:r}}function Q(r){0>Me||(r.current=xe[Me],xe[Me]=null,Me--)}function fe(r,o){Me++,xe[Me]=r.current,r.current=o}var me=z(null),de=z(null),Oe=z(null),we=z(null);function jt(r,o){switch(fe(Oe,o),fe(de,r),fe(me,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?bT(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=bT(o),r=AT(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Q(me),fe(me,r)}function gt(){Q(me),Q(de),Q(Oe)}function Fn(r){r.memoizedState!==null&&fe(we,r);var o=me.current,u=AT(o,r.type);o!==u&&(fe(de,r),fe(me,u))}function Xn(r){de.current===r&&(Q(me),Q(de)),we.current===r&&(Q(we),Hu._currentValue=ge)}var mn,Zn;function En(r){if(mn===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);mn=o&&o[1]||"",Zn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mn+r+Zn}var Tn=!1;function qn(r,o){if(!r||Tn)return"";Tn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ne){var ee=ne}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(ne){ee=ne}r.call(oe.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),A=_[0],N=_[1];if(A&&N){var B=A.split(`
`),X=N.split(`
`);for(v=f=0;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;for(;v<X.length&&!X[v].includes("DetermineComponentFrameRoot");)v++;if(f===B.length||v===X.length)for(f=B.length-1,v=X.length-1;1<=f&&0<=v&&B[f]!==X[v];)v--;for(;1<=f&&0<=v;f--,v--)if(B[f]!==X[v]){if(f!==1||v!==1)do if(f--,v--,0>v||B[f]!==X[v]){var re=`
`+B[f].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=f&&0<=v);break}}}finally{Tn=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?En(u):""}function qi(r,o){switch(r.tag){case 26:case 27:case 5:return En(r.type);case 16:return En("Lazy");case 13:return r.child!==o&&o!==null?En("Suspense Fallback"):En("Suspense");case 19:return En("SuspenseList");case 0:case 15:return qn(r.type,!1);case 11:return qn(r.type.render,!1);case 1:return qn(r.type,!0);case 31:return En("Activity");default:return""}}function Ai(r){try{var o="",u=null;do o+=qi(r,u),u=r,r=r.return;while(r);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Bn=Object.prototype.hasOwnProperty,ei=t.unstable_scheduleCallback,fi=t.unstable_cancelCallback,di=t.unstable_shouldYield,Bi=t.unstable_requestPaint,he=t.unstable_now,it=t.unstable_getCurrentPriorityLevel,De=t.unstable_ImmediatePriority,yt=t.unstable_UserBlockingPriority,Kt=t.unstable_NormalPriority,$t=t.unstable_LowPriority,zi=t.unstable_IdlePriority,jr=t.log,Sn=t.unstable_setDisableYieldValue,wi=null,bn=null;function le(r){if(typeof jr=="function"&&Sn(r),bn&&typeof bn.setStrictMode=="function")try{bn.setStrictMode(wi,r)}catch{}}var Ae=Math.clz32?Math.clz32:Tt,be=Math.log,Ge=Math.LN2;function Tt(r){return r>>>=0,r===0?32:31-(be(r)/Ge|0)|0}var Je=256,Ye=262144,at=4194304;function rt(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ke(r,o,u){var f=r.pendingLanes;if(f===0)return 0;var v=0,_=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var N=f&134217727;return N!==0?(f=N&~_,f!==0?v=rt(f):(A&=N,A!==0?v=rt(A):u||(u=N&~r,u!==0&&(v=rt(u))))):(N=f&~_,N!==0?v=rt(N):A!==0?v=rt(A):u||(u=f&~r,u!==0&&(v=rt(u)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:v}function je(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function gn(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hi(){var r=at;return at<<=1,(at&62914560)===0&&(at=4194304),r}function en(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Nt(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function St(r,o,u,f,v,_){var A=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var N=r.entanglements,B=r.expirationTimes,X=r.hiddenUpdates;for(u=A&~u;0<u;){var re=31-Ae(u),oe=1<<re;N[re]=0,B[re]=-1;var ee=X[re];if(ee!==null)for(X[re]=null,re=0;re<ee.length;re++){var ne=ee[re];ne!==null&&(ne.lane&=-536870913)}u&=~oe}f!==0&&ti(r,f,0),_!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=_&~(A&~o))}function ti(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-Ae(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|u&261930}function Ft(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var f=31-Ae(u),v=1<<f;v&o|r[f]&o&&(r[f]|=o),u&=~v}}function zn(r,o){var u=o&-o;return u=(u&42)!==0?1:Gi(u),(u&(r.suspendedLanes|o))!==0?0:u}function Gi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Nn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ni(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:$T(r.type))}function Kr(r,o){var u=ce.p;try{return ce.p=r,o()}finally{ce.p=u}}var Ci=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Ci,tn="__reactProps$"+Ci,Ii="__reactContainer$"+Ci,ji="__reactEvents$"+Ci,xi="__reactListeners$"+Ci,Vo="__reactHandles$"+Ci,ur="__reactResources$"+Ci,Ki="__reactMarker$"+Ci;function $i(r){delete r[Mt],delete r[tn],delete r[ji],delete r[xi],delete r[Vo]}function hi(r){var o=r[Mt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[Ii]||u[Mt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=DT(r);r!==null;){if(u=r[Mt])return u;r=DT(r)}return o}r=u,u=r.parentNode}return null}function Ji(r){if(r=r[Mt]||r[Ii]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function wr(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function ii(r){var o=r[ur];return o||(o=r[ur]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function qt(r){r[Ki]=!0}var cr=new Set,fr={};function ri(r,o){Cr(r,o),Cr(r+"Capture",o)}function Cr(r,o){for(fr[r]=o,r=0;r<o.length;r++)cr.add(o[r])}var kp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eu={},tu={};function of(r){return Bn.call(tu,r)?!0:Bn.call(eu,r)?!1:kp.test(r)?tu[r]=!0:(eu[r]=!0,!1)}function As(r,o,u){if(of(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function ws(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Yi(r,o,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+f)}}function si(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function af(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Pp(r,o,u){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,_=f.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(A){u=""+A,_.call(this,A)}}),Object.defineProperty(r,o,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function xa(r){if(!r._valueTracker){var o=af(r)?"checked":"value";r._valueTracker=Pp(r,o,""+r[o])}}function nu(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return r&&(f=af(r)?r.checked?"true":"false":r.value),r=f,r!==u?(o.setValue(r),!0):!1}function Ra(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var $r=/[\n"\\]/g;function Jt(r){return r.replace($r,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Cs(r,o,u,f,v,_,A,N){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),o!=null?A==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+si(o)):r.value!==""+si(o)&&(r.value=""+si(o)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),o!=null?Na(r,A,si(o)):u!=null?Na(r,A,si(u)):f!=null&&r.removeAttribute("value"),v==null&&_!=null&&(r.defaultChecked=!!_),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.name=""+si(N):r.removeAttribute("name")}function Lo(r,o,u,f,v,_,A,N){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){xa(r);return}u=u!=null?""+si(u):"",o=o!=null?""+si(o):u,N||o===r.value||(r.value=o),r.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=N?r.checked:!!f,r.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A),xa(r)}function Na(r,o,u){o==="number"&&Ra(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function ut(r,o,u,f){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&f&&(r[u].defaultSelected=!0)}else{for(u=""+si(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,f&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function Oo(r,o,u){if(o!=null&&(o=""+si(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+si(u):""}function Is(r,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(i(92));if(_e(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=si(o),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f),xa(r)}function Wi(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Vp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iu(r,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,u):typeof u!="number"||u===0||Vp.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function lf(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&u[v]!==f&&iu(r,v,f)}else for(var _ in o)o.hasOwnProperty(_)&&iu(r,_,o[_])}function ru(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Op=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ir(r){return Op.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function An(){}var Da=null;function Ma(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Jr=null,Ri=null;function uf(r){var o=Ji(r);if(o&&(r=o.stateNode)){var u=r[tn]||null;e:switch(r=o.stateNode,o.type){case"input":if(Cs(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Jt(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==r&&f.form===r.form){var v=f[tn]||null;if(!v)throw Error(i(90));Cs(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===r.form&&nu(f)}break e;case"textarea":Oo(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&ut(r,!!u.multiple,o,!1)}}}var su=!1;function cf(r,o,u){if(su)return r(o,u);su=!0;try{var f=r(o);return f}finally{if(su=!1,(Jr!==null||Ri!==null)&&(od(),Jr&&(o=Jr,r=Ri,Ri=Jr=null,uf(o),r)))for(o=0;o<r.length;o++)uf(r[o])}}function pi(r,o){var u=r.stateNode;if(u===null)return null;var f=u[tn]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(dr)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){ou=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{ou=!1}var Ni=null,ka=null,Rr=null;function xs(){if(Rr)return Rr;var r,o=ka,u=o.length,f,v="value"in Ni?Ni.value:Ni.textContent,_=v.length;for(r=0;r<u&&o[r]===v[r];r++);var A=u-r;for(f=1;f<=A&&o[u-f]===v[_-f];f++);return Rr=v.slice(r,1<f?1-f:void 0)}function Uo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Rs(){return!0}function kt(){return!1}function Hn(r){function o(u,f,v,_,A){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(u=r[N],this[N]=u?u(_):_[N]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Rs:kt,this.isPropagationStopped=kt,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),o}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fo=Hn(Yr),Ns=E({},Yr,{view:0,detail:0}),ff=Hn(Ns),Ds,Pa,oi,qo=E({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==oi&&(oi&&r.type==="mousemove"?(Ds=r.screenX-oi.screenX,Pa=r.screenY-oi.screenY):Pa=Ds=0,oi=r),Ds)},movementY:function(r){return"movementY"in r?r.movementY:Pa}}),df=Hn(qo),Bo=E({},qo,{dataTransfer:0}),hf=Hn(Bo),au=E({},Ns,{relatedTarget:0}),Ms=Hn(au),pf=E({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=Hn(pf),Up=E({},Yr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),mf=Hn(Up),zo=E({},Yr,{data:0}),lu=Hn(zo),gf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yf(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=cu[r])?!!o[r]:!1}function ks(){return yf}var vf=E({},Ns,{key:function(r){if(r.key){var o=gf[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Uo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?uu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(r){return r.type==="keypress"?Uo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Uo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),_f=Hn(vf),Wr=E({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fu=Hn(Wr),Ef=E({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),Tf=Hn(Ef),Sf=E({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),La=Hn(Sf),ai=E({},qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),bf=Hn(ai),Af=E({},Yr,{newState:0,oldState:0}),Ps=Hn(Af),m=[9,13,27,32],S=dr&&"CompositionEvent"in window,C=null;dr&&"documentMode"in document&&(C=document.documentMode);var k=dr&&"TextEvent"in window&&!C,Y=dr&&(!S||C&&8<C&&11>=C),ie=" ",pe=!1;function vt(r,o){switch(r){case"keyup":return m.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function on(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ke=!1;function wn(r,o){switch(r){case"compositionend":return on(o);case"keypress":return o.which!==32?null:(pe=!0,ie);case"textInput":return r=o.data,r===ie&&pe?null:r;default:return null}}function Cn(r,o){if(Ke)return r==="compositionend"||!S&&vt(r,o)?(r=xs(),Rr=ka=Ni=null,Ke=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Y&&o.locale!=="ko"?null:o.data;default:return null}}var Vs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mi(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Vs[r.type]:o==="textarea"}function Ho(r,o,u,f){Jr?Ri?Ri.push(f):Ri=[f]:Jr=f,o=hd(o,"onChange"),0<o.length&&(u=new Fo("onChange","change",null,u,f),r.push({event:u,listeners:o}))}var Qr=null,du=null;function w1(r){yT(r,0)}function wf(r){var o=wr(r);if(nu(o))return r}function L0(r,o){if(r==="change")return o}var O0=!1;if(dr){var Fp;if(dr){var qp="oninput"in document;if(!qp){var U0=document.createElement("div");U0.setAttribute("oninput","return;"),qp=typeof U0.oninput=="function"}Fp=qp}else Fp=!1;O0=Fp&&(!document.documentMode||9<document.documentMode)}function F0(){Qr&&(Qr.detachEvent("onpropertychange",q0),du=Qr=null)}function q0(r){if(r.propertyName==="value"&&wf(du)){var o=[];Ho(o,du,r,Ma(r)),cf(w1,o)}}function C1(r,o,u){r==="focusin"?(F0(),Qr=o,du=u,Qr.attachEvent("onpropertychange",q0)):r==="focusout"&&F0()}function I1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return wf(du)}function x1(r,o){if(r==="click")return wf(o)}function R1(r,o){if(r==="input"||r==="change")return wf(o)}function N1(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Di=typeof Object.is=="function"?Object.is:N1;function hu(r,o){if(Di(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!Bn.call(o,v)||!Di(r[v],o[v]))return!1}return!0}function B0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function z0(r,o){var u=B0(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=o&&f>=o)return{node:u,offset:o-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=B0(u)}}function H0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?H0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function G0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Ra(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Ra(r.document)}return o}function Bp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var D1=dr&&"documentMode"in document&&11>=document.documentMode,Oa=null,zp=null,pu=null,Hp=!1;function j0(r,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Hp||Oa==null||Oa!==Ra(f)||(f=Oa,"selectionStart"in f&&Bp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),pu&&hu(pu,f)||(pu=f,f=hd(zp,"onSelect"),0<f.length&&(o=new Fo("onSelect","select",null,o,u),r.push({event:o,listeners:f}),o.target=Oa)))}function Go(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Ua={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionrun:Go("Transition","TransitionRun"),transitionstart:Go("Transition","TransitionStart"),transitioncancel:Go("Transition","TransitionCancel"),transitionend:Go("Transition","TransitionEnd")},Gp={},K0={};dr&&(K0=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function jo(r){if(Gp[r])return Gp[r];if(!Ua[r])return r;var o=Ua[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in K0)return Gp[r]=o[u];return r}var $0=jo("animationend"),J0=jo("animationiteration"),Y0=jo("animationstart"),M1=jo("transitionrun"),k1=jo("transitionstart"),P1=jo("transitioncancel"),W0=jo("transitionend"),Q0=new Map,jp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jp.push("scrollEnd");function hr(r,o){Q0.set(r,o),ri(o,[r])}var Cf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Qi=[],Fa=0,Kp=0;function If(){for(var r=Fa,o=Kp=Fa=0;o<r;){var u=Qi[o];Qi[o++]=null;var f=Qi[o];Qi[o++]=null;var v=Qi[o];Qi[o++]=null;var _=Qi[o];if(Qi[o++]=null,f!==null&&v!==null){var A=f.pending;A===null?v.next=v:(v.next=A.next,A.next=v),f.pending=v}_!==0&&X0(u,v,_)}}function xf(r,o,u,f){Qi[Fa++]=r,Qi[Fa++]=o,Qi[Fa++]=u,Qi[Fa++]=f,Kp|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function $p(r,o,u,f){return xf(r,o,u,f),Rf(r)}function Ko(r,o){return xf(r,null,null,o),Rf(r)}function X0(r,o,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var v=!1,_=r.return;_!==null;)_.childLanes|=u,f=_.alternate,f!==null&&(f.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(v=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,v&&o!==null&&(v=31-Ae(u),r=_.hiddenUpdates,f=r[v],f===null?r[v]=[o]:f.push(o),o.lane=u|536870912),_):null}function Rf(r){if(50<Lu)throw Lu=0,ng=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var qa={};function V1(r,o,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(r,o,u,f){return new V1(r,o,u,f)}function Jp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Xr(r,o){var u=r.alternate;return u===null?(u=Mi(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Z0(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Nf(r,o,u,f,v,_){var A=0;if(f=r,typeof r=="function")Jp(r)&&(A=1);else if(typeof r=="string")A=qN(r,u,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Mi(31,u,o,v),r.elementType=R,r.lanes=_,r;case V:return $o(u.children,v,_,o);case L:A=8,v|=24;break;case H:return r=Mi(12,u,o,v|2),r.elementType=H,r.lanes=_,r;case Z:return r=Mi(13,u,o,v),r.elementType=Z,r.lanes=_,r;case G:return r=Mi(19,u,o,v),r.elementType=G,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:A=10;break e;case F:A=9;break e;case $:A=11;break e;case I:A=14;break e;case x:A=16,f=null;break e}A=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return o=Mi(A,u,o,v),o.elementType=r,o.type=f,o.lanes=_,o}function $o(r,o,u,f){return r=Mi(7,r,f,o),r.lanes=u,r}function Yp(r,o,u){return r=Mi(6,r,null,o),r.lanes=u,r}function e_(r){var o=Mi(18,null,null,0);return o.stateNode=r,o}function Wp(r,o,u){return o=Mi(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var t_=new WeakMap;function Xi(r,o){if(typeof r=="object"&&r!==null){var u=t_.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Ai(o)},t_.set(r,o),o)}return{value:r,source:o,stack:Ai(o)}}var Ba=[],za=0,Df=null,mu=0,Zi=[],er=0,Ls=null,Nr=1,Dr="";function Zr(r,o){Ba[za++]=mu,Ba[za++]=Df,Df=r,mu=o}function n_(r,o,u){Zi[er++]=Nr,Zi[er++]=Dr,Zi[er++]=Ls,Ls=r;var f=Nr;r=Dr;var v=32-Ae(f)-1;f&=~(1<<v),u+=1;var _=32-Ae(o)+v;if(30<_){var A=v-v%5;_=(f&(1<<A)-1).toString(32),f>>=A,v-=A,Nr=1<<32-Ae(o)+v|u<<v|f,Dr=_+r}else Nr=1<<_|u<<v|f,Dr=r}function Qp(r){r.return!==null&&(Zr(r,1),n_(r,1,0))}function Xp(r){for(;r===Df;)Df=Ba[--za],Ba[za]=null,mu=Ba[--za],Ba[za]=null;for(;r===Ls;)Ls=Zi[--er],Zi[er]=null,Dr=Zi[--er],Zi[er]=null,Nr=Zi[--er],Zi[er]=null}function i_(r,o){Zi[er++]=Nr,Zi[er++]=Dr,Zi[er++]=Ls,Nr=o.id,Dr=o.overflow,Ls=r}var Dn=null,Pt=null,st=!1,Os=null,tr=!1,Zp=Error(i(519));function Us(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gu(Xi(o,r)),Zp}function r_(r){var o=r.stateNode,u=r.type,f=r.memoizedProps;switch(o[Mt]=r,o[tn]=f,u){case"dialog":Qe("cancel",o),Qe("close",o);break;case"iframe":case"object":case"embed":Qe("load",o);break;case"video":case"audio":for(u=0;u<Uu.length;u++)Qe(Uu[u],o);break;case"source":Qe("error",o);break;case"img":case"image":case"link":Qe("error",o),Qe("load",o);break;case"details":Qe("toggle",o);break;case"input":Qe("invalid",o),Lo(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Qe("invalid",o);break;case"textarea":Qe("invalid",o),Is(o,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||TT(o.textContent,u)?(f.popover!=null&&(Qe("beforetoggle",o),Qe("toggle",o)),f.onScroll!=null&&Qe("scroll",o),f.onScrollEnd!=null&&Qe("scrollend",o),f.onClick!=null&&(o.onclick=An),o=!0):o=!1,o||Us(r,!0)}function s_(r){for(Dn=r.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:Dn=Dn.return}}function Ha(r){if(r!==Dn)return!1;if(!st)return s_(r),st=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||yg(r.type,r.memoizedProps)),u=!u),u&&Pt&&Us(r),s_(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Pt=NT(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Pt=NT(r)}else o===27?(o=Pt,Xs(r.type)?(r=Sg,Sg=null,Pt=r):Pt=o):Pt=Dn?ir(r.stateNode.nextSibling):null;return!0}function Jo(){Pt=Dn=null,st=!1}function em(){var r=Os;return r!==null&&(_i===null?_i=r:_i.push.apply(_i,r),Os=null),r}function gu(r){Os===null?Os=[r]:Os.push(r)}var tm=z(null),Yo=null,es=null;function Fs(r,o,u){fe(tm,o._currentValue),o._currentValue=u}function ts(r){r._currentValue=tm.current,Q(tm)}function nm(r,o,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===u)break;r=r.return}}function im(r,o,u,f){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){var A=v.child;_=_.firstContext;e:for(;_!==null;){var N=_;_=v;for(var B=0;B<o.length;B++)if(N.context===o[B]){_.lanes|=u,N=_.alternate,N!==null&&(N.lanes|=u),nm(_.return,u,r),f||(A=null);break e}_=N.next}}else if(v.tag===18){if(A=v.return,A===null)throw Error(i(341));A.lanes|=u,_=A.alternate,_!==null&&(_.lanes|=u),nm(A,u,r),A=null}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===r){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}}function Ga(r,o,u,f){r=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var A=v.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var N=v.type;Di(v.pendingProps.value,A.value)||(r!==null?r.push(N):r=[N])}}else if(v===we.current){if(A=v.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Hu):r=[Hu])}v=v.return}r!==null&&im(o,r,u,f),o.flags|=262144}function Mf(r){for(r=r.firstContext;r!==null;){if(!Di(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Wo(r){Yo=r,es=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Mn(r){return o_(Yo,r)}function kf(r,o){return Yo===null&&Wo(r),o_(r,o)}function o_(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},es===null){if(r===null)throw Error(i(308));es=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else es=es.next=o;return u}var L1=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},O1=t.unstable_scheduleCallback,U1=t.unstable_NormalPriority,an={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rm(){return{controller:new L1,data:new Map,refCount:0}}function yu(r){r.refCount--,r.refCount===0&&O1(U1,function(){r.controller.abort()})}var vu=null,sm=0,ja=0,Ka=null;function F1(r,o){if(vu===null){var u=vu=[];sm=0,ja=lg(),Ka={status:"pending",value:void 0,then:function(f){u.push(f)}}}return sm++,o.then(a_,a_),o}function a_(){if(--sm===0&&vu!==null){Ka!==null&&(Ka.status="fulfilled");var r=vu;vu=null,ja=0,Ka=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function q1(r,o){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var l_=te.S;te.S=function(r,o){jE=he(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&F1(r,o),l_!==null&&l_(r,o)};var Qo=z(null);function om(){var r=Qo.current;return r!==null?r:Rt.pooledCache}function Pf(r,o){o===null?fe(Qo,Qo.current):fe(Qo,o.pool)}function u_(){var r=om();return r===null?null:{parent:an._currentValue,pool:r}}var $a=Error(i(460)),am=Error(i(474)),Vf=Error(i(542)),Lf={then:function(){}};function c_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function f_(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(An,An),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,h_(r),r;default:if(typeof o.status=="string")o.then(An,An);else{if(r=Rt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,h_(r),r}throw Zo=o,$a}}function Xo(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Zo=u,$a):u}}var Zo=null;function d_(){if(Zo===null)throw Error(i(459));var r=Zo;return Zo=null,r}function h_(r){if(r===$a||r===Vf)throw Error(i(483))}var Ja=null,_u=0;function Of(r){var o=_u;return _u+=1,Ja===null&&(Ja=[]),f_(Ja,r,o)}function Eu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Uf(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function p_(r){function o(J,j){if(r){var W=J.deletions;W===null?(J.deletions=[j],J.flags|=16):W.push(j)}}function u(J,j){if(!r)return null;for(;j!==null;)o(J,j),j=j.sibling;return null}function f(J){for(var j=new Map;J!==null;)J.key!==null?j.set(J.key,J):j.set(J.index,J),J=J.sibling;return j}function v(J,j){return J=Xr(J,j),J.index=0,J.sibling=null,J}function _(J,j,W){return J.index=W,r?(W=J.alternate,W!==null?(W=W.index,W<j?(J.flags|=67108866,j):W):(J.flags|=67108866,j)):(J.flags|=1048576,j)}function A(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function N(J,j,W,se){return j===null||j.tag!==6?(j=Yp(W,J.mode,se),j.return=J,j):(j=v(j,W),j.return=J,j)}function B(J,j,W,se){var Re=W.type;return Re===V?re(J,j,W.props.children,se,W.key):j!==null&&(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&Xo(Re)===j.type)?(j=v(j,W.props),Eu(j,W),j.return=J,j):(j=Nf(W.type,W.key,W.props,null,J.mode,se),Eu(j,W),j.return=J,j)}function X(J,j,W,se){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=Wp(W,J.mode,se),j.return=J,j):(j=v(j,W.children||[]),j.return=J,j)}function re(J,j,W,se,Re){return j===null||j.tag!==7?(j=$o(W,J.mode,se,Re),j.return=J,j):(j=v(j,W),j.return=J,j)}function oe(J,j,W){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Yp(""+j,J.mode,W),j.return=J,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return W=Nf(j.type,j.key,j.props,null,J.mode,W),Eu(W,j),W.return=J,W;case D:return j=Wp(j,J.mode,W),j.return=J,j;case x:return j=Xo(j),oe(J,j,W)}if(_e(j)||O(j))return j=$o(j,J.mode,W,null),j.return=J,j;if(typeof j.then=="function")return oe(J,Of(j),W);if(j.$$typeof===q)return oe(J,kf(J,j),W);Uf(J,j)}return null}function ee(J,j,W,se){var Re=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Re!==null?null:N(J,j,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return W.key===Re?B(J,j,W,se):null;case D:return W.key===Re?X(J,j,W,se):null;case x:return W=Xo(W),ee(J,j,W,se)}if(_e(W)||O(W))return Re!==null?null:re(J,j,W,se,null);if(typeof W.then=="function")return ee(J,j,Of(W),se);if(W.$$typeof===q)return ee(J,j,kf(J,W),se);Uf(J,W)}return null}function ne(J,j,W,se,Re){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return J=J.get(W)||null,N(j,J,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return J=J.get(se.key===null?W:se.key)||null,B(j,J,se,Re);case D:return J=J.get(se.key===null?W:se.key)||null,X(j,J,se,Re);case x:return se=Xo(se),ne(J,j,W,se,Re)}if(_e(se)||O(se))return J=J.get(W)||null,re(j,J,se,Re,null);if(typeof se.then=="function")return ne(J,j,W,Of(se),Re);if(se.$$typeof===q)return ne(J,j,W,kf(j,se),Re);Uf(j,se)}return null}function Se(J,j,W,se){for(var Re=null,ct=null,Ce=j,He=j=0,et=null;Ce!==null&&He<W.length;He++){Ce.index>He?(et=Ce,Ce=null):et=Ce.sibling;var ft=ee(J,Ce,W[He],se);if(ft===null){Ce===null&&(Ce=et);break}r&&Ce&&ft.alternate===null&&o(J,Ce),j=_(ft,j,He),ct===null?Re=ft:ct.sibling=ft,ct=ft,Ce=et}if(He===W.length)return u(J,Ce),st&&Zr(J,He),Re;if(Ce===null){for(;He<W.length;He++)Ce=oe(J,W[He],se),Ce!==null&&(j=_(Ce,j,He),ct===null?Re=Ce:ct.sibling=Ce,ct=Ce);return st&&Zr(J,He),Re}for(Ce=f(Ce);He<W.length;He++)et=ne(Ce,J,He,W[He],se),et!==null&&(r&&et.alternate!==null&&Ce.delete(et.key===null?He:et.key),j=_(et,j,He),ct===null?Re=et:ct.sibling=et,ct=et);return r&&Ce.forEach(function(io){return o(J,io)}),st&&Zr(J,He),Re}function Pe(J,j,W,se){if(W==null)throw Error(i(151));for(var Re=null,ct=null,Ce=j,He=j=0,et=null,ft=W.next();Ce!==null&&!ft.done;He++,ft=W.next()){Ce.index>He?(et=Ce,Ce=null):et=Ce.sibling;var io=ee(J,Ce,ft.value,se);if(io===null){Ce===null&&(Ce=et);break}r&&Ce&&io.alternate===null&&o(J,Ce),j=_(io,j,He),ct===null?Re=io:ct.sibling=io,ct=io,Ce=et}if(ft.done)return u(J,Ce),st&&Zr(J,He),Re;if(Ce===null){for(;!ft.done;He++,ft=W.next())ft=oe(J,ft.value,se),ft!==null&&(j=_(ft,j,He),ct===null?Re=ft:ct.sibling=ft,ct=ft);return st&&Zr(J,He),Re}for(Ce=f(Ce);!ft.done;He++,ft=W.next())ft=ne(Ce,J,He,ft.value,se),ft!==null&&(r&&ft.alternate!==null&&Ce.delete(ft.key===null?He:ft.key),j=_(ft,j,He),ct===null?Re=ft:ct.sibling=ft,ct=ft);return r&&Ce.forEach(function(QN){return o(J,QN)}),st&&Zr(J,He),Re}function It(J,j,W,se){if(typeof W=="object"&&W!==null&&W.type===V&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case w:e:{for(var Re=W.key;j!==null;){if(j.key===Re){if(Re=W.type,Re===V){if(j.tag===7){u(J,j.sibling),se=v(j,W.props.children),se.return=J,J=se;break e}}else if(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===x&&Xo(Re)===j.type){u(J,j.sibling),se=v(j,W.props),Eu(se,W),se.return=J,J=se;break e}u(J,j);break}else o(J,j);j=j.sibling}W.type===V?(se=$o(W.props.children,J.mode,se,W.key),se.return=J,J=se):(se=Nf(W.type,W.key,W.props,null,J.mode,se),Eu(se,W),se.return=J,J=se)}return A(J);case D:e:{for(Re=W.key;j!==null;){if(j.key===Re)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){u(J,j.sibling),se=v(j,W.children||[]),se.return=J,J=se;break e}else{u(J,j);break}else o(J,j);j=j.sibling}se=Wp(W,J.mode,se),se.return=J,J=se}return A(J);case x:return W=Xo(W),It(J,j,W,se)}if(_e(W))return Se(J,j,W,se);if(O(W)){if(Re=O(W),typeof Re!="function")throw Error(i(150));return W=Re.call(W),Pe(J,j,W,se)}if(typeof W.then=="function")return It(J,j,Of(W),se);if(W.$$typeof===q)return It(J,j,kf(J,W),se);Uf(J,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,j!==null&&j.tag===6?(u(J,j.sibling),se=v(j,W),se.return=J,J=se):(u(J,j),se=Yp(W,J.mode,se),se.return=J,J=se),A(J)):u(J,j)}return function(J,j,W,se){try{_u=0;var Re=It(J,j,W,se);return Ja=null,Re}catch(Ce){if(Ce===$a||Ce===Vf)throw Ce;var ct=Mi(29,Ce,null,J.mode);return ct.lanes=se,ct.return=J,ct}finally{}}}var ea=p_(!0),m_=p_(!1),qs=!1;function lm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function um(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Bs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function zs(r,o,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(pt&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=Rf(r),X0(r,null,u),o}return xf(r,f,o,u),Rf(r)}function Tu(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ft(r,u)}}function cm(r,o){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=A:_=_.next=A,u=u.next}while(u!==null);_===null?v=_=o:_=_.next=o}else v=_=o;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var fm=!1;function Su(){if(fm){var r=Ka;if(r!==null)throw r}}function bu(r,o,u,f){fm=!1;var v=r.updateQueue;qs=!1;var _=v.firstBaseUpdate,A=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var B=N,X=B.next;B.next=null,A===null?_=X:A.next=X,A=B;var re=r.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==A&&(N===null?re.firstBaseUpdate=X:N.next=X,re.lastBaseUpdate=B))}if(_!==null){var oe=v.baseState;A=0,re=X=B=null,N=_;do{var ee=N.lane&-536870913,ne=ee!==N.lane;if(ne?(Ze&ee)===ee:(f&ee)===ee){ee!==0&&ee===ja&&(fm=!0),re!==null&&(re=re.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Se=r,Pe=N;ee=o;var It=u;switch(Pe.tag){case 1:if(Se=Pe.payload,typeof Se=="function"){oe=Se.call(It,oe,ee);break e}oe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Pe.payload,ee=typeof Se=="function"?Se.call(It,oe,ee):Se,ee==null)break e;oe=E({},oe,ee);break e;case 2:qs=!0}}ee=N.callback,ee!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(X=re=ne,B=oe):re=re.next=ne,A|=ee;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;ne=N,N=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);re===null&&(B=oe),v.baseState=B,v.firstBaseUpdate=X,v.lastBaseUpdate=re,_===null&&(v.shared.lanes=0),$s|=A,r.lanes=A,r.memoizedState=oe}}function g_(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function y_(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)g_(u[r],o)}var Ya=z(null),Ff=z(0);function v_(r,o){r=cs,fe(Ff,r),fe(Ya,o),cs=r|o.baseLanes}function dm(){fe(Ff,cs),fe(Ya,Ya.current)}function hm(){cs=Ff.current,Q(Ya),Q(Ff)}var ki=z(null),nr=null;function Hs(r){var o=r.alternate;fe(nn,nn.current&1),fe(ki,r),nr===null&&(o===null||Ya.current!==null||o.memoizedState!==null)&&(nr=r)}function pm(r){fe(nn,nn.current),fe(ki,r),nr===null&&(nr=r)}function __(r){r.tag===22?(fe(nn,nn.current),fe(ki,r),nr===null&&(nr=r)):Gs()}function Gs(){fe(nn,nn.current),fe(ki,ki.current)}function Pi(r){Q(ki),nr===r&&(nr=null),Q(nn)}var nn=z(0);function qf(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Eg(u)||Tg(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ns=0,ze=null,wt=null,ln=null,Bf=!1,Wa=!1,ta=!1,zf=0,Au=0,Qa=null,B1=0;function Yt(){throw Error(i(321))}function mm(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Di(r[u],o[u]))return!1;return!0}function gm(r,o,u,f,v,_){return ns=_,ze=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,te.H=r===null||r.memoizedState===null?nE:Dm,ta=!1,_=u(f,v),ta=!1,Wa&&(_=T_(o,u,f,v)),E_(r),_}function E_(r){te.H=Iu;var o=wt!==null&&wt.next!==null;if(ns=0,ln=wt=ze=null,Bf=!1,Au=0,Qa=null,o)throw Error(i(300));r===null||un||(r=r.dependencies,r!==null&&Mf(r)&&(un=!0))}function T_(r,o,u,f){ze=r;var v=0;do{if(Wa&&(Qa=null),Au=0,Wa=!1,25<=v)throw Error(i(301));if(v+=1,ln=wt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}te.H=iE,_=o(u,f)}while(Wa);return _}function z1(){var r=te.H,o=r.useState()[0];return o=typeof o.then=="function"?wu(o):o,r=r.useState()[0],(wt!==null?wt.memoizedState:null)!==r&&(ze.flags|=1024),o}function ym(){var r=zf!==0;return zf=0,r}function vm(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function _m(r){if(Bf){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Bf=!1}ns=0,ln=wt=ze=null,Wa=!1,Au=zf=0,Qa=null}function li(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?ze.memoizedState=ln=r:ln=ln.next=r,ln}function rn(){if(wt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var o=ln===null?ze.memoizedState:ln.next;if(o!==null)ln=o,wt=r;else{if(r===null)throw ze.alternate===null?Error(i(467)):Error(i(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},ln===null?ze.memoizedState=ln=r:ln=ln.next=r}return ln}function Hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wu(r){var o=Au;return Au+=1,Qa===null&&(Qa=[]),r=f_(Qa,r,o),o=ze,(ln===null?o.memoizedState:ln.next)===null&&(o=o.alternate,te.H=o===null||o.memoizedState===null?nE:Dm),r}function Gf(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return wu(r);if(r.$$typeof===q)return Mn(r)}throw Error(i(438,String(r)))}function Em(r){var o=null,u=ze.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=ze.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Hf(),ze.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),f=0;f<r;f++)u[f]=P;return o.index++,u}function is(r,o){return typeof o=="function"?o(r):o}function jf(r){var o=rn();return Tm(o,wt,r)}function Tm(r,o,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var v=r.baseQueue,_=f.pending;if(_!==null){if(v!==null){var A=v.next;v.next=_.next,_.next=A}o.baseQueue=v=_,f.pending=null}if(_=r.baseState,v===null)r.memoizedState=_;else{o=v.next;var N=A=null,B=null,X=o,re=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(Ze&oe)===oe:(ns&oe)===oe){var ee=X.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===ja&&(re=!0);else if((ns&ee)===ee){X=X.next,ee===ja&&(re=!0);continue}else oe={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(N=B=oe,A=_):B=B.next=oe,ze.lanes|=ee,$s|=ee;oe=X.action,ta&&u(_,oe),_=X.hasEagerState?X.eagerState:u(_,oe)}else ee={lane:oe,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(N=B=ee,A=_):B=B.next=ee,ze.lanes|=oe,$s|=oe;X=X.next}while(X!==null&&X!==o);if(B===null?A=_:B.next=N,!Di(_,r.memoizedState)&&(un=!0,re&&(u=Ka,u!==null)))throw u;r.memoizedState=_,r.baseState=A,r.baseQueue=B,f.lastRenderedState=_}return v===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Sm(r){var o=rn(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,v=u.pending,_=o.memoizedState;if(v!==null){u.pending=null;var A=v=v.next;do _=r(_,A.action),A=A.next;while(A!==v);Di(_,o.memoizedState)||(un=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function S_(r,o,u){var f=ze,v=rn(),_=st;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=o();var A=!Di((wt||v).memoizedState,u);if(A&&(v.memoizedState=u,un=!0),v=v.queue,wm(w_.bind(null,f,v,r),[r]),v.getSnapshot!==o||A||ln!==null&&ln.memoizedState.tag&1){if(f.flags|=2048,Xa(9,{destroy:void 0},A_.bind(null,f,v,u,o),null),Rt===null)throw Error(i(349));_||(ns&127)!==0||b_(f,o,u)}return u}function b_(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=ze.updateQueue,o===null?(o=Hf(),ze.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function A_(r,o,u,f){o.value=u,o.getSnapshot=f,C_(o)&&I_(r)}function w_(r,o,u){return u(function(){C_(o)&&I_(r)})}function C_(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Di(r,u)}catch{return!0}}function I_(r){var o=Ko(r,2);o!==null&&Ei(o,r,2)}function bm(r){var o=li();if(typeof r=="function"){var u=r;if(r=u(),ta){le(!0);try{u()}finally{le(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:r},o}function x_(r,o,u,f){return r.baseState=u,Tm(r,wt,typeof f=="function"?f:is)}function H1(r,o,u,f,v){if(Jf(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};te.T!==null?u(!0):_.isTransition=!1,f(_),u=o.pending,u===null?(_.next=o.pending=_,R_(o,_)):(_.next=u.next,o.pending=u.next=_)}}function R_(r,o){var u=o.action,f=o.payload,v=r.state;if(o.isTransition){var _=te.T,A={};te.T=A;try{var N=u(v,f),B=te.S;B!==null&&B(A,N),N_(r,o,N)}catch(X){Am(r,o,X)}finally{_!==null&&A.types!==null&&(_.types=A.types),te.T=_}}else try{_=u(v,f),N_(r,o,_)}catch(X){Am(r,o,X)}}function N_(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){D_(r,o,f)},function(f){return Am(r,o,f)}):D_(r,o,u)}function D_(r,o,u){o.status="fulfilled",o.value=u,M_(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,R_(r,u)))}function Am(r,o,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,M_(o),o=o.next;while(o!==f)}r.action=null}function M_(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function k_(r,o){return o}function P_(r,o){if(st){var u=Rt.formState;if(u!==null){e:{var f=ze;if(st){if(Pt){t:{for(var v=Pt,_=tr;v.nodeType!==8;){if(!_){v=null;break t}if(v=ir(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Pt=ir(v.nextSibling),f=v.data==="F!";break e}}Us(f)}f=!1}f&&(o=u[0])}}return u=li(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k_,lastRenderedState:o},u.queue=f,u=Z_.bind(null,ze,f),f.dispatch=u,f=bm(!1),_=Nm.bind(null,ze,!1,f.queue),f=li(),v={state:o,dispatch:null,action:r,pending:null},f.queue=v,u=H1.bind(null,ze,v,_,u),v.dispatch=u,f.memoizedState=r,[o,u,!1]}function V_(r){var o=rn();return L_(o,wt,r)}function L_(r,o,u){if(o=Tm(r,o,k_)[0],r=jf(is)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=wu(o)}catch(A){throw A===$a?Vf:A}else f=o;o=rn();var v=o.queue,_=v.dispatch;return u!==o.memoizedState&&(ze.flags|=2048,Xa(9,{destroy:void 0},G1.bind(null,v,u),null)),[f,_,r]}function G1(r,o){r.action=o}function O_(r){var o=rn(),u=wt;if(u!==null)return L_(o,u,r);rn(),o=o.memoizedState,u=rn();var f=u.queue.dispatch;return u.memoizedState=r,[o,f,!1]}function Xa(r,o,u,f){return r={tag:r,create:u,deps:f,inst:o,next:null},o=ze.updateQueue,o===null&&(o=Hf(),ze.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,o.lastEffect=r),r}function U_(){return rn().memoizedState}function Kf(r,o,u,f){var v=li();ze.flags|=r,v.memoizedState=Xa(1|o,{destroy:void 0},u,f===void 0?null:f)}function $f(r,o,u,f){var v=rn();f=f===void 0?null:f;var _=v.memoizedState.inst;wt!==null&&f!==null&&mm(f,wt.memoizedState.deps)?v.memoizedState=Xa(o,_,u,f):(ze.flags|=r,v.memoizedState=Xa(1|o,_,u,f))}function F_(r,o){Kf(8390656,8,r,o)}function wm(r,o){$f(2048,8,r,o)}function j1(r){ze.flags|=4;var o=ze.updateQueue;if(o===null)o=Hf(),ze.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function q_(r){var o=rn().memoizedState;return j1({ref:o,nextImpl:r}),function(){if((pt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function B_(r,o){return $f(4,2,r,o)}function z_(r,o){return $f(4,4,r,o)}function H_(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function G_(r,o,u){u=u!=null?u.concat([r]):null,$f(4,4,H_.bind(null,o,r),u)}function Cm(){}function j_(r,o){var u=rn();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&mm(o,f[1])?f[0]:(u.memoizedState=[r,o],r)}function K_(r,o){var u=rn();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&mm(o,f[1]))return f[0];if(f=r(),ta){le(!0);try{r()}finally{le(!1)}}return u.memoizedState=[f,o],f}function Im(r,o,u){return u===void 0||(ns&1073741824)!==0&&(Ze&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=$E(),ze.lanes|=r,$s|=r,u)}function $_(r,o,u,f){return Di(u,o)?u:Ya.current!==null?(r=Im(r,u,f),Di(r,o)||(un=!0),r):(ns&42)===0||(ns&1073741824)!==0&&(Ze&261930)===0?(un=!0,r.memoizedState=u):(r=$E(),ze.lanes|=r,$s|=r,o)}function J_(r,o,u,f,v){var _=ce.p;ce.p=_!==0&&8>_?_:8;var A=te.T,N={};te.T=N,Nm(r,!1,o,u);try{var B=v(),X=te.S;if(X!==null&&X(N,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var re=q1(B,f);Cu(r,o,re,Oi(r))}else Cu(r,o,f,Oi(r))}catch(oe){Cu(r,o,{then:function(){},status:"rejected",reason:oe},Oi())}finally{ce.p=_,A!==null&&N.types!==null&&(A.types=N.types),te.T=A}}function K1(){}function xm(r,o,u,f){if(r.tag!==5)throw Error(i(476));var v=Y_(r).queue;J_(r,v,o,ge,u===null?K1:function(){return W_(r),u(f)})}function Y_(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:ge},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function W_(r){var o=Y_(r);o.next===null&&(o=r.alternate.memoizedState),Cu(r,o.next.queue,{},Oi())}function Rm(){return Mn(Hu)}function Q_(){return rn().memoizedState}function X_(){return rn().memoizedState}function $1(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Oi();r=Bs(u);var f=zs(o,r,u);f!==null&&(Ei(f,o,u),Tu(f,o,u)),o={cache:rm()},r.payload=o;return}o=o.return}}function J1(r,o,u){var f=Oi();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Jf(r)?eE(o,u):(u=$p(r,o,u,f),u!==null&&(Ei(u,r,f),tE(u,o,f)))}function Z_(r,o,u){var f=Oi();Cu(r,o,u,f)}function Cu(r,o,u,f){var v={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Jf(r))eE(o,v);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,N=_(A,u);if(v.hasEagerState=!0,v.eagerState=N,Di(N,A))return xf(r,o,v,0),Rt===null&&If(),!1}catch{}finally{}if(u=$p(r,o,v,f),u!==null)return Ei(u,r,f),tE(u,o,f),!0}return!1}function Nm(r,o,u,f){if(f={lane:2,revertLane:lg(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Jf(r)){if(o)throw Error(i(479))}else o=$p(r,u,f,2),o!==null&&Ei(o,r,2)}function Jf(r){var o=r.alternate;return r===ze||o!==null&&o===ze}function eE(r,o){Wa=Bf=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function tE(r,o,u){if((u&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,u|=f,o.lanes=u,Ft(r,u)}}var Iu={readContext:Mn,use:Gf,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt};Iu.useEffectEvent=Yt;var nE={readContext:Mn,use:Gf,useCallback:function(r,o){return li().memoizedState=[r,o===void 0?null:o],r},useContext:Mn,useEffect:F_,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Kf(4194308,4,H_.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Kf(4194308,4,r,o)},useInsertionEffect:function(r,o){Kf(4,2,r,o)},useMemo:function(r,o){var u=li();o=o===void 0?null:o;var f=r();if(ta){le(!0);try{r()}finally{le(!1)}}return u.memoizedState=[f,o],f},useReducer:function(r,o,u){var f=li();if(u!==void 0){var v=u(o);if(ta){le(!0);try{u(o)}finally{le(!1)}}}else v=o;return f.memoizedState=f.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},f.queue=r,r=r.dispatch=J1.bind(null,ze,r),[f.memoizedState,r]},useRef:function(r){var o=li();return r={current:r},o.memoizedState=r},useState:function(r){r=bm(r);var o=r.queue,u=Z_.bind(null,ze,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Cm,useDeferredValue:function(r,o){var u=li();return Im(u,r,o)},useTransition:function(){var r=bm(!1);return r=J_.bind(null,ze,r.queue,!0,!1),li().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var f=ze,v=li();if(st){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Rt===null)throw Error(i(349));(Ze&127)!==0||b_(f,o,u)}v.memoizedState=u;var _={value:u,getSnapshot:o};return v.queue=_,F_(w_.bind(null,f,_,r),[r]),f.flags|=2048,Xa(9,{destroy:void 0},A_.bind(null,f,_,u,o),null),u},useId:function(){var r=li(),o=Rt.identifierPrefix;if(st){var u=Dr,f=Nr;u=(f&~(1<<32-Ae(f)-1)).toString(32)+u,o="_"+o+"R_"+u,u=zf++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=B1++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Rm,useFormState:P_,useActionState:P_,useOptimistic:function(r){var o=li();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Nm.bind(null,ze,!0,u),u.dispatch=o,[r,o]},useMemoCache:Em,useCacheRefresh:function(){return li().memoizedState=$1.bind(null,ze)},useEffectEvent:function(r){var o=li(),u={impl:r};return o.memoizedState=u,function(){if((pt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Dm={readContext:Mn,use:Gf,useCallback:j_,useContext:Mn,useEffect:wm,useImperativeHandle:G_,useInsertionEffect:B_,useLayoutEffect:z_,useMemo:K_,useReducer:jf,useRef:U_,useState:function(){return jf(is)},useDebugValue:Cm,useDeferredValue:function(r,o){var u=rn();return $_(u,wt.memoizedState,r,o)},useTransition:function(){var r=jf(is)[0],o=rn().memoizedState;return[typeof r=="boolean"?r:wu(r),o]},useSyncExternalStore:S_,useId:Q_,useHostTransitionStatus:Rm,useFormState:V_,useActionState:V_,useOptimistic:function(r,o){var u=rn();return x_(u,wt,r,o)},useMemoCache:Em,useCacheRefresh:X_};Dm.useEffectEvent=q_;var iE={readContext:Mn,use:Gf,useCallback:j_,useContext:Mn,useEffect:wm,useImperativeHandle:G_,useInsertionEffect:B_,useLayoutEffect:z_,useMemo:K_,useReducer:Sm,useRef:U_,useState:function(){return Sm(is)},useDebugValue:Cm,useDeferredValue:function(r,o){var u=rn();return wt===null?Im(u,r,o):$_(u,wt.memoizedState,r,o)},useTransition:function(){var r=Sm(is)[0],o=rn().memoizedState;return[typeof r=="boolean"?r:wu(r),o]},useSyncExternalStore:S_,useId:Q_,useHostTransitionStatus:Rm,useFormState:O_,useActionState:O_,useOptimistic:function(r,o){var u=rn();return wt!==null?x_(u,wt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Em,useCacheRefresh:X_};iE.useEffectEvent=q_;function Mm(r,o,u,f){o=r.memoizedState,u=u(f,o),u=u==null?o:E({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var km={enqueueSetState:function(r,o,u){r=r._reactInternals;var f=Oi(),v=Bs(f);v.payload=o,u!=null&&(v.callback=u),o=zs(r,v,f),o!==null&&(Ei(o,r,f),Tu(o,r,f))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var f=Oi(),v=Bs(f);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=zs(r,v,f),o!==null&&(Ei(o,r,f),Tu(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Oi(),f=Bs(u);f.tag=2,o!=null&&(f.callback=o),o=zs(r,f,u),o!==null&&(Ei(o,r,u),Tu(o,r,u))}};function rE(r,o,u,f,v,_,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,_,A):o.prototype&&o.prototype.isPureReactComponent?!hu(u,f)||!hu(v,_):!0}function sE(r,o,u,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==r&&km.enqueueReplaceState(o,o.state,null)}function na(r,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(r=r.defaultProps){u===o&&(u=E({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function oE(r){Cf(r)}function aE(r){console.error(r)}function lE(r){Cf(r)}function Yf(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function uE(r,o,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Pm(r,o,u){return u=Bs(u),u.tag=3,u.payload={element:null},u.callback=function(){Yf(r,o)},u}function cE(r){return r=Bs(r),r.tag=3,r}function fE(r,o,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=f.value;r.payload=function(){return v(_)},r.callback=function(){uE(o,u,f)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){uE(o,u,f),typeof v!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var N=f.stack;this.componentDidCatch(f.value,{componentStack:N!==null?N:""})})}function Y1(r,o,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&Ga(o,u,v,!0),u=ki.current,u!==null){switch(u.tag){case 31:case 13:return nr===null?ad():u.alternate===null&&Wt===0&&(Wt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===Lf?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),sg(r,f,v)),!1;case 22:return u.flags|=65536,f===Lf?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),sg(r,f,v)),!1}throw Error(i(435,u.tag))}return sg(r,f,v),ad(),!1}if(st)return o=ki.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==Zp&&(r=Error(i(422),{cause:f}),gu(Xi(r,u)))):(f!==Zp&&(o=Error(i(423),{cause:f}),gu(Xi(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,f=Xi(f,u),v=Pm(r.stateNode,f,v),cm(r,v),Wt!==4&&(Wt=2)),!1;var _=Error(i(520),{cause:f});if(_=Xi(_,u),Vu===null?Vu=[_]:Vu.push(_),Wt!==4&&(Wt=2),o===null)return!0;f=Xi(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Pm(u.stateNode,f,r),cm(u,r),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Js===null||!Js.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=cE(v),fE(v,r,u,f),cm(u,v),!1}u=u.return}while(u!==null);return!1}var Vm=Error(i(461)),un=!1;function kn(r,o,u,f){o.child=r===null?m_(o,null,u,f):ea(o,r.child,u,f)}function dE(r,o,u,f,v){u=u.render;var _=o.ref;if("ref"in f){var A={};for(var N in f)N!=="ref"&&(A[N]=f[N])}else A=f;return Wo(o),f=gm(r,o,u,A,_,v),N=ym(),r!==null&&!un?(vm(r,o,v),rs(r,o,v)):(st&&N&&Qp(o),o.flags|=1,kn(r,o,f,v),o.child)}function hE(r,o,u,f,v){if(r===null){var _=u.type;return typeof _=="function"&&!Jp(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,pE(r,o,_,f,v)):(r=Nf(u.type,null,f,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!Hm(r,v)){var A=_.memoizedProps;if(u=u.compare,u=u!==null?u:hu,u(A,f)&&r.ref===o.ref)return rs(r,o,v)}return o.flags|=1,r=Xr(_,f),r.ref=o.ref,r.return=o,o.child=r}function pE(r,o,u,f,v){if(r!==null){var _=r.memoizedProps;if(hu(_,f)&&r.ref===o.ref)if(un=!1,o.pendingProps=f=_,Hm(r,v))(r.flags&131072)!==0&&(un=!0);else return o.lanes=r.lanes,rs(r,o,v)}return Lm(r,o,u,f,v)}function mE(r,o,u,f){var v=f.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,r!==null){for(f=o.child=r.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~_}else f=0,o.child=null;return gE(r,o,_,u,f)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Pf(o,_!==null?_.cachePool:null),_!==null?v_(o,_):dm(),__(o);else return f=o.lanes=536870912,gE(r,o,_!==null?_.baseLanes|u:u,u,f)}else _!==null?(Pf(o,_.cachePool),v_(o,_),Gs(),o.memoizedState=null):(r!==null&&Pf(o,null),dm(),Gs());return kn(r,o,v,u),o.child}function xu(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function gE(r,o,u,f,v){var _=om();return _=_===null?null:{parent:an._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},r!==null&&Pf(o,null),dm(),__(o),r!==null&&Ga(r,o,f,!0),o.childLanes=v,null}function Wf(r,o){return o=Xf({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function yE(r,o,u){return ea(o,r.child,null,u),r=Wf(o,o.pendingProps),r.flags|=2,Pi(o),o.memoizedState=null,r}function W1(r,o,u){var f=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(st){if(f.mode==="hidden")return r=Wf(o,f),o.lanes=536870912,xu(null,r);if(pm(o),(r=Pt)?(r=RT(r,tr),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ls!==null?{id:Nr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},u=e_(r),u.return=o,o.child=u,Dn=o,Pt=null)):r=null,r===null)throw Us(o);return o.lanes=536870912,null}return Wf(o,f)}var _=r.memoizedState;if(_!==null){var A=_.dehydrated;if(pm(o),v)if(o.flags&256)o.flags&=-257,o=yE(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(un||Ga(r,o,u,!1),v=(u&r.childLanes)!==0,un||v){if(f=Rt,f!==null&&(A=zn(f,u),A!==0&&A!==_.retryLane))throw _.retryLane=A,Ko(r,A),Ei(f,r,A),Vm;ad(),o=yE(r,o,u)}else r=_.treeContext,Pt=ir(A.nextSibling),Dn=o,st=!0,Os=null,tr=!1,r!==null&&i_(o,r),o=Wf(o,f),o.flags|=4096;return o}return r=Xr(r.child,{mode:f.mode,children:f.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Qf(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Lm(r,o,u,f,v){return Wo(o),u=gm(r,o,u,f,void 0,v),f=ym(),r!==null&&!un?(vm(r,o,v),rs(r,o,v)):(st&&f&&Qp(o),o.flags|=1,kn(r,o,u,v),o.child)}function vE(r,o,u,f,v,_){return Wo(o),o.updateQueue=null,u=T_(o,f,u,v),E_(r),f=ym(),r!==null&&!un?(vm(r,o,_),rs(r,o,_)):(st&&f&&Qp(o),o.flags|=1,kn(r,o,u,_),o.child)}function _E(r,o,u,f,v){if(Wo(o),o.stateNode===null){var _=qa,A=u.contextType;typeof A=="object"&&A!==null&&(_=Mn(A)),_=new u(f,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=km,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=f,_.state=o.memoizedState,_.refs={},lm(o),A=u.contextType,_.context=typeof A=="object"&&A!==null?Mn(A):qa,_.state=o.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(Mm(o,u,A,f),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&km.enqueueReplaceState(_,_.state,null),bu(o,f,_,v),Su(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){_=o.stateNode;var N=o.memoizedProps,B=na(u,N);_.props=B;var X=_.context,re=u.contextType;A=qa,typeof re=="object"&&re!==null&&(A=Mn(re));var oe=u.getDerivedStateFromProps;re=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(N||X!==A)&&sE(o,_,f,A),qs=!1;var ee=o.memoizedState;_.state=ee,bu(o,f,_,v),Su(),X=o.memoizedState,N||ee!==X||qs?(typeof oe=="function"&&(Mm(o,u,oe,f),X=o.memoizedState),(B=qs||rE(o,u,B,f,ee,X,A))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=X),_.props=f,_.state=X,_.context=A,f=B):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{_=o.stateNode,um(r,o),A=o.memoizedProps,re=na(u,A),_.props=re,oe=o.pendingProps,ee=_.context,X=u.contextType,B=qa,typeof X=="object"&&X!==null&&(B=Mn(X)),N=u.getDerivedStateFromProps,(X=typeof N=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==oe||ee!==B)&&sE(o,_,f,B),qs=!1,ee=o.memoizedState,_.state=ee,bu(o,f,_,v),Su();var ne=o.memoizedState;A!==oe||ee!==ne||qs||r!==null&&r.dependencies!==null&&Mf(r.dependencies)?(typeof N=="function"&&(Mm(o,u,N,f),ne=o.memoizedState),(re=qs||rE(o,u,re,f,ee,ne,B)||r!==null&&r.dependencies!==null&&Mf(r.dependencies))?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,ne,B),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,ne,B)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===r.memoizedProps&&ee===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ee===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ne),_.props=f,_.state=ne,_.context=B,f=re):(typeof _.componentDidUpdate!="function"||A===r.memoizedProps&&ee===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ee===r.memoizedState||(o.flags|=1024),f=!1)}return _=f,Qf(r,o),f=(o.flags&128)!==0,_||f?(_=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&f?(o.child=ea(o,r.child,null,v),o.child=ea(o,null,u,v)):kn(r,o,u,v),o.memoizedState=_.state,r=o.child):r=rs(r,o,v),r}function EE(r,o,u,f){return Jo(),o.flags|=256,kn(r,o,u,f),o.child}var Om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Um(r){return{baseLanes:r,cachePool:u_()}}function Fm(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Li),r}function TE(r,o,u){var f=o.pendingProps,v=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=r!==null&&r.memoizedState===null?!1:(nn.current&2)!==0),A&&(v=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,r===null){if(st){if(v?Hs(o):Gs(),(r=Pt)?(r=RT(r,tr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ls!==null?{id:Nr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},u=e_(r),u.return=o,o.child=u,Dn=o,Pt=null)):r=null,r===null)throw Us(o);return Tg(r)?o.lanes=32:o.lanes=536870912,null}var N=f.children;return f=f.fallback,v?(Gs(),v=o.mode,N=Xf({mode:"hidden",children:N},v),f=$o(f,v,u,null),N.return=o,f.return=o,N.sibling=f,o.child=N,f=o.child,f.memoizedState=Um(u),f.childLanes=Fm(r,A,u),o.memoizedState=Om,xu(null,f)):(Hs(o),qm(o,N))}var B=r.memoizedState;if(B!==null&&(N=B.dehydrated,N!==null)){if(_)o.flags&256?(Hs(o),o.flags&=-257,o=Bm(r,o,u)):o.memoizedState!==null?(Gs(),o.child=r.child,o.flags|=128,o=null):(Gs(),N=f.fallback,v=o.mode,f=Xf({mode:"visible",children:f.children},v),N=$o(N,v,u,null),N.flags|=2,f.return=o,N.return=o,f.sibling=N,o.child=f,ea(o,r.child,null,u),f=o.child,f.memoizedState=Um(u),f.childLanes=Fm(r,A,u),o.memoizedState=Om,o=xu(null,f));else if(Hs(o),Tg(N)){if(A=N.nextSibling&&N.nextSibling.dataset,A)var X=A.dgst;A=X,f=Error(i(419)),f.stack="",f.digest=A,gu({value:f,source:null,stack:null}),o=Bm(r,o,u)}else if(un||Ga(r,o,u,!1),A=(u&r.childLanes)!==0,un||A){if(A=Rt,A!==null&&(f=zn(A,u),f!==0&&f!==B.retryLane))throw B.retryLane=f,Ko(r,f),Ei(A,r,f),Vm;Eg(N)||ad(),o=Bm(r,o,u)}else Eg(N)?(o.flags|=192,o.child=r.child,o=null):(r=B.treeContext,Pt=ir(N.nextSibling),Dn=o,st=!0,Os=null,tr=!1,r!==null&&i_(o,r),o=qm(o,f.children),o.flags|=4096);return o}return v?(Gs(),N=f.fallback,v=o.mode,B=r.child,X=B.sibling,f=Xr(B,{mode:"hidden",children:f.children}),f.subtreeFlags=B.subtreeFlags&65011712,X!==null?N=Xr(X,N):(N=$o(N,v,u,null),N.flags|=2),N.return=o,f.return=o,f.sibling=N,o.child=f,xu(null,f),f=o.child,N=r.child.memoizedState,N===null?N=Um(u):(v=N.cachePool,v!==null?(B=an._currentValue,v=v.parent!==B?{parent:B,pool:B}:v):v=u_(),N={baseLanes:N.baseLanes|u,cachePool:v}),f.memoizedState=N,f.childLanes=Fm(r,A,u),o.memoizedState=Om,xu(r.child,f)):(Hs(o),u=r.child,r=u.sibling,u=Xr(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,r!==null&&(A=o.deletions,A===null?(o.deletions=[r],o.flags|=16):A.push(r)),o.child=u,o.memoizedState=null,u)}function qm(r,o){return o=Xf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Xf(r,o){return r=Mi(22,r,null,o),r.lanes=0,r}function Bm(r,o,u){return ea(o,r.child,null,u),r=qm(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function SE(r,o,u){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),nm(r.return,o,u)}function zm(r,o,u,f,v,_){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=f,A.tail=u,A.tailMode=v,A.treeForkCount=_)}function bE(r,o,u){var f=o.pendingProps,v=f.revealOrder,_=f.tail;f=f.children;var A=nn.current,N=(A&2)!==0;if(N?(A=A&1|2,o.flags|=128):A&=1,fe(nn,A),kn(r,o,f,u),f=st?mu:0,!N&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&SE(r,u,o);else if(r.tag===19)SE(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&qf(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),zm(o,!1,v,u,_,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&qf(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}zm(o,!0,u,null,_,f);break;case"together":zm(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function rs(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),$s|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Ga(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=Xr(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Xr(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Hm(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Mf(r)))}function Q1(r,o,u){switch(o.tag){case 3:jt(o,o.stateNode.containerInfo),Fs(o,an,r.memoizedState.cache),Jo();break;case 27:case 5:Fn(o);break;case 4:jt(o,o.stateNode.containerInfo);break;case 10:Fs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,pm(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Hs(o),o.flags|=128,null):(u&o.child.childLanes)!==0?TE(r,o,u):(Hs(o),r=rs(r,o,u),r!==null?r.sibling:null);Hs(o);break;case 19:var v=(r.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(Ga(r,o,u,!1),f=(u&o.childLanes)!==0),v){if(f)return bE(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),fe(nn,nn.current),f)break;return null;case 22:return o.lanes=0,mE(r,o,u,o.pendingProps);case 24:Fs(o,an,r.memoizedState.cache)}return rs(r,o,u)}function AE(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)un=!0;else{if(!Hm(r,u)&&(o.flags&128)===0)return un=!1,Q1(r,o,u);un=(r.flags&131072)!==0}else un=!1,st&&(o.flags&1048576)!==0&&n_(o,mu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(r=Xo(o.elementType),o.type=r,typeof r=="function")Jp(r)?(f=na(r,f),o.tag=1,o=_E(null,o,r,f,u)):(o.tag=0,o=Lm(null,o,r,f,u));else{if(r!=null){var v=r.$$typeof;if(v===$){o.tag=11,o=dE(null,o,r,f,u);break e}else if(v===I){o.tag=14,o=hE(null,o,r,f,u);break e}}throw o=Ie(r)||r,Error(i(306,o,""))}}return o;case 0:return Lm(r,o,o.type,o.pendingProps,u);case 1:return f=o.type,v=na(f,o.pendingProps),_E(r,o,f,v,u);case 3:e:{if(jt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));f=o.pendingProps;var _=o.memoizedState;v=_.element,um(r,o),bu(o,f,null,u);var A=o.memoizedState;if(f=A.cache,Fs(o,an,f),f!==_.cache&&im(o,[an],u,!0),Su(),f=A.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=EE(r,o,f,u);break e}else if(f!==v){v=Xi(Error(i(424)),o),gu(v),o=EE(r,o,f,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Pt=ir(r.firstChild),Dn=o,st=!0,Os=null,tr=!0,u=m_(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Jo(),f===v){o=rs(r,o,u);break e}kn(r,o,f,u)}o=o.child}return o;case 26:return Qf(r,o),r===null?(u=VT(o.type,null,o.pendingProps,null))?o.memoizedState=u:st||(u=o.type,r=o.pendingProps,f=pd(Oe.current).createElement(u),f[Mt]=o,f[tn]=r,Pn(f,u,r),qt(f),o.stateNode=f):o.memoizedState=VT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Fn(o),r===null&&st&&(f=o.stateNode=MT(o.type,o.pendingProps,Oe.current),Dn=o,tr=!0,v=Pt,Xs(o.type)?(Sg=v,Pt=ir(f.firstChild)):Pt=v),kn(r,o,o.pendingProps.children,u),Qf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&st&&((v=f=Pt)&&(f=IN(f,o.type,o.pendingProps,tr),f!==null?(o.stateNode=f,Dn=o,Pt=ir(f.firstChild),tr=!1,v=!0):v=!1),v||Us(o)),Fn(o),v=o.type,_=o.pendingProps,A=r!==null?r.memoizedProps:null,f=_.children,yg(v,_)?f=null:A!==null&&yg(v,A)&&(o.flags|=32),o.memoizedState!==null&&(v=gm(r,o,z1,null,null,u),Hu._currentValue=v),Qf(r,o),kn(r,o,f,u),o.child;case 6:return r===null&&st&&((r=u=Pt)&&(u=xN(u,o.pendingProps,tr),u!==null?(o.stateNode=u,Dn=o,Pt=null,r=!0):r=!1),r||Us(o)),null;case 13:return TE(r,o,u);case 4:return jt(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=ea(o,null,f,u):kn(r,o,f,u),o.child;case 11:return dE(r,o,o.type,o.pendingProps,u);case 7:return kn(r,o,o.pendingProps,u),o.child;case 8:return kn(r,o,o.pendingProps.children,u),o.child;case 12:return kn(r,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,Fs(o,o.type,f.value),kn(r,o,f.children,u),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,Wo(o),v=Mn(v),f=f(v),o.flags|=1,kn(r,o,f,u),o.child;case 14:return hE(r,o,o.type,o.pendingProps,u);case 15:return pE(r,o,o.type,o.pendingProps,u);case 19:return bE(r,o,u);case 31:return W1(r,o,u);case 22:return mE(r,o,u,o.pendingProps);case 24:return Wo(o),f=Mn(an),r===null?(v=om(),v===null&&(v=Rt,_=rm(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),o.memoizedState={parent:f,cache:v},lm(o),Fs(o,an,v)):((r.lanes&u)!==0&&(um(r,o),bu(o,null,null,u),Su()),v=r.memoizedState,_=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Fs(o,an,f)):(f=_.cache,Fs(o,an,f),f!==v.cache&&im(o,[an],u,!0))),kn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ss(r){r.flags|=4}function Gm(r,o,u,f,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(QE())r.flags|=8192;else throw Zo=Lf,am}else r.flags&=-16777217}function wE(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!qT(o))if(QE())r.flags|=8192;else throw Zo=Lf,am}function Zf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Hi():536870912,r.lanes|=o,nl|=o)}function Ru(r,o){if(!st)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Vt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=f,r.childLanes=u,o}function X1(r,o,u){var f=o.pendingProps;switch(Xp(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(o),null;case 1:return Vt(o),null;case 3:return u=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),ts(an),gt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Ha(o)?ss(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,em())),Vt(o),null;case 26:var v=o.type,_=o.memoizedState;return r===null?(ss(o),_!==null?(Vt(o),wE(o,_)):(Vt(o),Gm(o,v,null,f,u))):_?_!==r.memoizedState?(ss(o),Vt(o),wE(o,_)):(Vt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==f&&ss(o),Vt(o),Gm(o,v,r,f,u)),null;case 27:if(Xn(o),u=Oe.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Vt(o),null}r=me.current,Ha(o)?r_(o):(r=MT(v,f,u),o.stateNode=r,ss(o))}return Vt(o),null;case 5:if(Xn(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return Vt(o),null}if(_=me.current,Ha(o))r_(o);else{var A=pd(Oe.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof f.is=="string"?A.createElement("select",{is:f.is}):A.createElement("select"),f.multiple?_.multiple=!0:f.size&&(_.size=f.size);break;default:_=typeof f.is=="string"?A.createElement(v,{is:f.is}):A.createElement(v)}}_[Mt]=o,_[tn]=f;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(Pn(_,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ss(o)}}return Vt(o),Gm(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&ss(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(r=Oe.current,Ha(o)){if(r=o.stateNode,u=o.memoizedProps,f=null,v=Dn,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}r[Mt]=o,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||TT(r.nodeValue,u)),r||Us(o,!0)}else r=pd(r).createTextNode(f),r[Mt]=o,o.stateNode=r}return Vt(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(f=Ha(o),u!==null){if(r===null){if(!f)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Mt]=o}else Jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Vt(o),r=!1}else u=em(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(Pi(o),o):(Pi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Vt(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Ha(o),f!==null&&f.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Mt]=o}else Jo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Vt(o),v=!1}else v=em(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Pi(o),o):(Pi(o),null)}return Pi(o),(o.flags&128)!==0?(o.lanes=u,o):(u=f!==null,r=r!==null&&r.memoizedState!==null,u&&(f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==v&&(f.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),Zf(o,o.updateQueue),Vt(o),null);case 4:return gt(),r===null&&dg(o.stateNode.containerInfo),Vt(o),null;case 10:return ts(o.type),Vt(o),null;case 19:if(Q(nn),f=o.memoizedState,f===null)return Vt(o),null;if(v=(o.flags&128)!==0,_=f.rendering,_===null)if(v)Ru(f,!1);else{if(Wt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=qf(r),_!==null){for(o.flags|=128,Ru(f,!1),r=_.updateQueue,o.updateQueue=r,Zf(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)Z0(u,r),u=u.sibling;return fe(nn,nn.current&1|2),st&&Zr(o,f.treeForkCount),o.child}r=r.sibling}f.tail!==null&&he()>rd&&(o.flags|=128,v=!0,Ru(f,!1),o.lanes=4194304)}else{if(!v)if(r=qf(_),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,Zf(o,r),Ru(f,!0),f.tail===null&&f.tailMode==="hidden"&&!_.alternate&&!st)return Vt(o),null}else 2*he()-f.renderingStartTime>rd&&u!==536870912&&(o.flags|=128,v=!0,Ru(f,!1),o.lanes=4194304);f.isBackwards?(_.sibling=o.child,o.child=_):(r=f.last,r!==null?r.sibling=_:o.child=_,f.last=_)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=he(),r.sibling=null,u=nn.current,fe(nn,v?u&1|2:u&1),st&&Zr(o,f.treeForkCount),r):(Vt(o),null);case 22:case 23:return Pi(o),hm(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(Vt(o),o.subtreeFlags&6&&(o.flags|=8192)):Vt(o),u=o.updateQueue,u!==null&&Zf(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),r!==null&&Q(Qo),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ts(an),Vt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Z1(r,o){switch(Xp(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ts(an),gt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Xn(o),null;case 31:if(o.memoizedState!==null){if(Pi(o),o.alternate===null)throw Error(i(340));Jo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Pi(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Jo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Q(nn),null;case 4:return gt(),null;case 10:return ts(o.type),null;case 22:case 23:return Pi(o),hm(),r!==null&&Q(Qo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ts(an),null;case 25:return null;default:return null}}function CE(r,o){switch(Xp(o),o.tag){case 3:ts(an),gt();break;case 26:case 27:case 5:Xn(o);break;case 4:gt();break;case 31:o.memoizedState!==null&&Pi(o);break;case 13:Pi(o);break;case 19:Q(nn);break;case 10:ts(o.type);break;case 22:case 23:Pi(o),hm(),r!==null&&Q(Qo);break;case 24:ts(an)}}function Nu(r,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&r)===r){f=void 0;var _=u.create,A=u.inst;f=_(),A.destroy=f}u=u.next}while(u!==v)}}catch(N){At(o,o.return,N)}}function js(r,o,u){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var _=v.next;f=_;do{if((f.tag&r)===r){var A=f.inst,N=A.destroy;if(N!==void 0){A.destroy=void 0,v=o;var B=u,X=N;try{X()}catch(re){At(v,B,re)}}}f=f.next}while(f!==_)}}catch(re){At(o,o.return,re)}}function IE(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{y_(o,u)}catch(f){At(r,r.return,f)}}}function xE(r,o,u){u.props=na(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){At(r,o,f)}}function Du(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(v){At(r,o,v)}}function Mr(r,o){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){At(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){At(r,o,v)}else u.current=null}function RE(r){var o=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){At(r,r.return,v)}}function jm(r,o,u){try{var f=r.stateNode;TN(f,r.type,u,o),f[tn]=o}catch(v){At(r,r.return,v)}}function NE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Xs(r.type)||r.tag===4}function Km(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||NE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Xs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $m(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=An));else if(f!==4&&(f===27&&Xs(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for($m(r,o,u),r=r.sibling;r!==null;)$m(r,o,u),r=r.sibling}function ed(r,o,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(f!==4&&(f===27&&Xs(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(ed(r,o,u),r=r.sibling;r!==null;)ed(r,o,u),r=r.sibling}function DE(r){var o=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Pn(o,f,u),o[Mt]=r,o[tn]=u}catch(_){At(r,r.return,_)}}var os=!1,cn=!1,Jm=!1,ME=typeof WeakSet=="function"?WeakSet:Set,In=null;function eN(r,o){if(r=r.containerInfo,mg=Td,r=G0(r),Bp(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var A=0,N=-1,B=-1,X=0,re=0,oe=r,ee=null;t:for(;;){for(var ne;oe!==u||v!==0&&oe.nodeType!==3||(N=A+v),oe!==_||f!==0&&oe.nodeType!==3||(B=A+f),oe.nodeType===3&&(A+=oe.nodeValue.length),(ne=oe.firstChild)!==null;)ee=oe,oe=ne;for(;;){if(oe===r)break t;if(ee===u&&++X===v&&(N=A),ee===_&&++re===f&&(B=A),(ne=oe.nextSibling)!==null)break;oe=ee,ee=oe.parentNode}oe=ne}u=N===-1||B===-1?null:{start:N,end:B}}else u=null}u=u||{start:0,end:0}}else u=null;for(gg={focusedElem:r,selectionRange:u},Td=!1,In=o;In!==null;)if(o=In,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,In=r;else for(;In!==null;){switch(o=In,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=o,v=_.memoizedProps,_=_.memoizedState,f=u.stateNode;try{var Se=na(u.type,v);r=f.getSnapshotBeforeUpdate(Se,_),f.__reactInternalSnapshotBeforeUpdate=r}catch(Pe){At(u,u.return,Pe)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)_g(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":_g(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,In=r;break}In=o.return}}function kE(r,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:ls(r,u),f&4&&Nu(5,u);break;case 1:if(ls(r,u),f&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(A){At(u,u.return,A)}else{var v=na(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(A){At(u,u.return,A)}}f&64&&IE(u),f&512&&Du(u,u.return);break;case 3:if(ls(r,u),f&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{y_(r,o)}catch(A){At(u,u.return,A)}}break;case 27:o===null&&f&4&&DE(u);case 26:case 5:ls(r,u),o===null&&f&4&&RE(u),f&512&&Du(u,u.return);break;case 12:ls(r,u);break;case 31:ls(r,u),f&4&&LE(r,u);break;case 13:ls(r,u),f&4&&OE(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=uN.bind(null,u),RN(r,u))));break;case 22:if(f=u.memoizedState!==null||os,!f){o=o!==null&&o.memoizedState!==null||cn,v=os;var _=cn;os=f,(cn=o)&&!_?us(r,u,(u.subtreeFlags&8772)!==0):ls(r,u),os=v,cn=_}break;case 30:break;default:ls(r,u)}}function PE(r){var o=r.alternate;o!==null&&(r.alternate=null,PE(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&$i(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Bt=null,gi=!1;function as(r,o,u){for(u=u.child;u!==null;)VE(r,o,u),u=u.sibling}function VE(r,o,u){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(wi,u)}catch{}switch(u.tag){case 26:cn||Mr(u,o),as(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:cn||Mr(u,o);var f=Bt,v=gi;Xs(u.type)&&(Bt=u.stateNode,gi=!1),as(r,o,u),qu(u.stateNode),Bt=f,gi=v;break;case 5:cn||Mr(u,o);case 6:if(f=Bt,v=gi,Bt=null,as(r,o,u),Bt=f,gi=v,Bt!==null)if(gi)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(u.stateNode)}catch(_){At(u,o,_)}else try{Bt.removeChild(u.stateNode)}catch(_){At(u,o,_)}break;case 18:Bt!==null&&(gi?(r=Bt,IT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),cl(r)):IT(Bt,u.stateNode));break;case 4:f=Bt,v=gi,Bt=u.stateNode.containerInfo,gi=!0,as(r,o,u),Bt=f,gi=v;break;case 0:case 11:case 14:case 15:js(2,u,o),cn||js(4,u,o),as(r,o,u);break;case 1:cn||(Mr(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&xE(u,o,f)),as(r,o,u);break;case 21:as(r,o,u);break;case 22:cn=(f=cn)||u.memoizedState!==null,as(r,o,u),cn=f;break;default:as(r,o,u)}}function LE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{cl(r)}catch(u){At(o,o.return,u)}}}function OE(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cl(r)}catch(u){At(o,o.return,u)}}function tN(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new ME),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new ME),o;default:throw Error(i(435,r.tag))}}function td(r,o){var u=tN(r);o.forEach(function(f){if(!u.has(f)){u.add(f);var v=cN.bind(null,r,f);f.then(v,v)}})}function yi(r,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],_=r,A=o,N=A;e:for(;N!==null;){switch(N.tag){case 27:if(Xs(N.type)){Bt=N.stateNode,gi=!1;break e}break;case 5:Bt=N.stateNode,gi=!1;break e;case 3:case 4:Bt=N.stateNode.containerInfo,gi=!0;break e}N=N.return}if(Bt===null)throw Error(i(160));VE(_,A,v),Bt=null,gi=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)UE(o,r),o=o.sibling}var pr=null;function UE(r,o){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yi(o,r),vi(r),f&4&&(js(3,r,r.return),Nu(3,r),js(5,r,r.return));break;case 1:yi(o,r),vi(r),f&512&&(cn||u===null||Mr(u,u.return)),f&64&&os&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=pr;if(yi(o,r),vi(r),f&512&&(cn||u===null||Mr(u,u.return)),f&4){var _=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Ki]||_[Mt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(f),v.head.insertBefore(_,v.querySelector("head > title"))),Pn(_,f,u),_[Mt]=r,qt(_),f=_;break e;case"link":var A=UT("link","href",v).get(f+(u.href||""));if(A){for(var N=0;N<A.length;N++)if(_=A[N],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(N,1);break t}}_=v.createElement(f),Pn(_,f,u),v.head.appendChild(_);break;case"meta":if(A=UT("meta","content",v).get(f+(u.content||""))){for(N=0;N<A.length;N++)if(_=A[N],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(N,1);break t}}_=v.createElement(f),Pn(_,f,u),v.head.appendChild(_);break;default:throw Error(i(468,f))}_[Mt]=r,qt(_),f=_}r.stateNode=f}else FT(v,r.type,r.stateNode);else r.stateNode=OT(v,f,r.memoizedProps);else _!==f?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,f===null?FT(v,r.type,r.stateNode):OT(v,f,r.memoizedProps)):f===null&&r.stateNode!==null&&jm(r,r.memoizedProps,u.memoizedProps)}break;case 27:yi(o,r),vi(r),f&512&&(cn||u===null||Mr(u,u.return)),u!==null&&f&4&&jm(r,r.memoizedProps,u.memoizedProps);break;case 5:if(yi(o,r),vi(r),f&512&&(cn||u===null||Mr(u,u.return)),r.flags&32){v=r.stateNode;try{Wi(v,"")}catch(Se){At(r,r.return,Se)}}f&4&&r.stateNode!=null&&(v=r.memoizedProps,jm(r,v,u!==null?u.memoizedProps:v)),f&1024&&(Jm=!0);break;case 6:if(yi(o,r),vi(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(Se){At(r,r.return,Se)}}break;case 3:if(yd=null,v=pr,pr=md(o.containerInfo),yi(o,r),pr=v,vi(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{cl(o.containerInfo)}catch(Se){At(r,r.return,Se)}Jm&&(Jm=!1,FE(r));break;case 4:f=pr,pr=md(r.stateNode.containerInfo),yi(o,r),vi(r),pr=f;break;case 12:yi(o,r),vi(r);break;case 31:yi(o,r),vi(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,td(r,f)));break;case 13:yi(o,r),vi(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(id=he()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,td(r,f)));break;case 22:v=r.memoizedState!==null;var B=u!==null&&u.memoizedState!==null,X=os,re=cn;if(os=X||v,cn=re||B,yi(o,r),cn=re,os=X,vi(r),f&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||B||os||cn||ia(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){B=u=o;try{if(_=B.stateNode,v)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{N=B.stateNode;var oe=B.memoizedProps.style,ee=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;N.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Se){At(B,B.return,Se)}}}else if(o.tag===6){if(u===null){B=o;try{B.stateNode.nodeValue=v?"":B.memoizedProps}catch(Se){At(B,B.return,Se)}}}else if(o.tag===18){if(u===null){B=o;try{var ne=B.stateNode;v?xT(ne,!0):xT(B.stateNode,!1)}catch(Se){At(B,B.return,Se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,td(r,u))));break;case 19:yi(o,r),vi(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,td(r,f)));break;case 30:break;case 21:break;default:yi(o,r),vi(r)}}function vi(r){var o=r.flags;if(o&2){try{for(var u,f=r.return;f!==null;){if(NE(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,_=Km(r);ed(r,_,v);break;case 5:var A=u.stateNode;u.flags&32&&(Wi(A,""),u.flags&=-33);var N=Km(r);ed(r,N,A);break;case 3:case 4:var B=u.stateNode.containerInfo,X=Km(r);$m(r,X,B);break;default:throw Error(i(161))}}catch(re){At(r,r.return,re)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function FE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;FE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function ls(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)kE(r,o.alternate,o),o=o.sibling}function ia(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:js(4,o,o.return),ia(o);break;case 1:Mr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&xE(o,o.return,u),ia(o);break;case 27:qu(o.stateNode);case 26:case 5:Mr(o,o.return),ia(o);break;case 22:o.memoizedState===null&&ia(o);break;case 30:ia(o);break;default:ia(o)}r=r.sibling}}function us(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=r,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:us(v,_,u),Nu(4,_);break;case 1:if(us(v,_,u),f=_,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(X){At(f,f.return,X)}if(f=_,v=f.updateQueue,v!==null){var N=f.stateNode;try{var B=v.shared.hiddenCallbacks;if(B!==null)for(v.shared.hiddenCallbacks=null,v=0;v<B.length;v++)g_(B[v],N)}catch(X){At(f,f.return,X)}}u&&A&64&&IE(_),Du(_,_.return);break;case 27:DE(_);case 26:case 5:us(v,_,u),u&&f===null&&A&4&&RE(_),Du(_,_.return);break;case 12:us(v,_,u);break;case 31:us(v,_,u),u&&A&4&&LE(v,_);break;case 13:us(v,_,u),u&&A&4&&OE(v,_);break;case 22:_.memoizedState===null&&us(v,_,u),Du(_,_.return);break;case 30:break;default:us(v,_,u)}o=o.sibling}}function Ym(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&yu(u))}function Wm(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&yu(r))}function mr(r,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)qE(r,o,u,f),o=o.sibling}function qE(r,o,u,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:mr(r,o,u,f),v&2048&&Nu(9,o);break;case 1:mr(r,o,u,f);break;case 3:mr(r,o,u,f),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&yu(r)));break;case 12:if(v&2048){mr(r,o,u,f),r=o.stateNode;try{var _=o.memoizedProps,A=_.id,N=_.onPostCommit;typeof N=="function"&&N(A,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){At(o,o.return,B)}}else mr(r,o,u,f);break;case 31:mr(r,o,u,f);break;case 13:mr(r,o,u,f);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?mr(r,o,u,f):Mu(r,o):_._visibility&2?mr(r,o,u,f):(_._visibility|=2,Za(r,o,u,f,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Ym(A,o);break;case 24:mr(r,o,u,f),v&2048&&Wm(o.alternate,o);break;default:mr(r,o,u,f)}}function Za(r,o,u,f,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,A=o,N=u,B=f,X=A.flags;switch(A.tag){case 0:case 11:case 15:Za(_,A,N,B,v),Nu(8,A);break;case 23:break;case 22:var re=A.stateNode;A.memoizedState!==null?re._visibility&2?Za(_,A,N,B,v):Mu(_,A):(re._visibility|=2,Za(_,A,N,B,v)),v&&X&2048&&Ym(A.alternate,A);break;case 24:Za(_,A,N,B,v),v&&X&2048&&Wm(A.alternate,A);break;default:Za(_,A,N,B,v)}o=o.sibling}}function Mu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,f=o,v=f.flags;switch(f.tag){case 22:Mu(u,f),v&2048&&Ym(f.alternate,f);break;case 24:Mu(u,f),v&2048&&Wm(f.alternate,f);break;default:Mu(u,f)}o=o.sibling}}var ku=8192;function el(r,o,u){if(r.subtreeFlags&ku)for(r=r.child;r!==null;)BE(r,o,u),r=r.sibling}function BE(r,o,u){switch(r.tag){case 26:el(r,o,u),r.flags&ku&&r.memoizedState!==null&&BN(u,pr,r.memoizedState,r.memoizedProps);break;case 5:el(r,o,u);break;case 3:case 4:var f=pr;pr=md(r.stateNode.containerInfo),el(r,o,u),pr=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=ku,ku=16777216,el(r,o,u),ku=f):el(r,o,u));break;default:el(r,o,u)}}function zE(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Pu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];In=f,GE(f,r)}zE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)HE(r),r=r.sibling}function HE(r){switch(r.tag){case 0:case 11:case 15:Pu(r),r.flags&2048&&js(9,r,r.return);break;case 3:Pu(r);break;case 12:Pu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,nd(r)):Pu(r);break;default:Pu(r)}}function nd(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];In=f,GE(f,r)}zE(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:js(8,o,o.return),nd(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,nd(o));break;default:nd(o)}r=r.sibling}}function GE(r,o){for(;In!==null;){var u=In;switch(u.tag){case 0:case 11:case 15:js(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:yu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,In=f;else e:for(u=r;In!==null;){f=In;var v=f.sibling,_=f.return;if(PE(f),f===u){In=null;break e}if(v!==null){v.return=_,In=v;break e}In=_}}}var nN={getCacheForType:function(r){var o=Mn(an),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return Mn(an).controller.signal}},iN=typeof WeakMap=="function"?WeakMap:Map,pt=0,Rt=null,We=null,Ze=0,bt=0,Vi=null,Ks=!1,tl=!1,Qm=!1,cs=0,Wt=0,$s=0,ra=0,Xm=0,Li=0,nl=0,Vu=null,_i=null,Zm=!1,id=0,jE=0,rd=1/0,sd=null,Js=null,yn=0,Ys=null,il=null,fs=0,eg=0,tg=null,KE=null,Lu=0,ng=null;function Oi(){return(pt&2)!==0&&Ze!==0?Ze&-Ze:te.T!==null?lg():ni()}function $E(){if(Li===0)if((Ze&536870912)===0||st){var r=Ye;Ye<<=1,(Ye&3932160)===0&&(Ye=262144),Li=r}else Li=536870912;return r=ki.current,r!==null&&(r.flags|=32),Li}function Ei(r,o,u){(r===Rt&&(bt===2||bt===9)||r.cancelPendingCommit!==null)&&(rl(r,0),Ws(r,Ze,Li,!1)),Nt(r,u),((pt&2)===0||r!==Rt)&&(r===Rt&&((pt&2)===0&&(ra|=u),Wt===4&&Ws(r,Ze,Li,!1)),kr(r))}function JE(r,o,u){if((pt&6)!==0)throw Error(i(327));var f=!u&&(o&127)===0&&(o&r.expiredLanes)===0||je(r,o),v=f?oN(r,o):rg(r,o,!0),_=f;do{if(v===0){tl&&!f&&Ws(r,o,0,!1);break}else{if(u=r.current.alternate,_&&!rN(u)){v=rg(r,o,!1),_=!1;continue}if(v===2){if(_=o,r.errorRecoveryDisabledLanes&_)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var N=r;v=Vu;var B=N.current.memoizedState.isDehydrated;if(B&&(rl(N,A).flags|=256),A=rg(N,A,!1),A!==2){if(Qm&&!B){N.errorRecoveryDisabledLanes|=_,ra|=_,v=4;break e}_=_i,_i=v,_!==null&&(_i===null?_i=_:_i.push.apply(_i,_))}v=A}if(_=!1,v!==2)continue}}if(v===1){rl(r,0),Ws(r,o,0,!0);break}e:{switch(f=r,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ws(f,o,Li,!Ks);break e;case 2:_i=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=id+300-he(),10<v)){if(Ws(f,o,Li,!Ks),ke(f,0,!0)!==0)break e;fs=o,f.timeoutHandle=wT(YE.bind(null,f,u,_i,sd,Zm,o,Li,ra,nl,Ks,_,"Throttled",-0,0),v);break e}YE(f,u,_i,sd,Zm,o,Li,ra,nl,Ks,_,null,-0,0)}}break}while(!0);kr(r)}function YE(r,o,u,f,v,_,A,N,B,X,re,oe,ee,ne){if(r.timeoutHandle=-1,oe=o.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},BE(o,_,oe);var Se=(_&62914560)===_?id-he():(_&4194048)===_?jE-he():0;if(Se=zN(oe,Se),Se!==null){fs=_,r.cancelPendingCommit=Se(iT.bind(null,r,o,_,u,f,v,A,N,B,re,oe,null,ee,ne)),Ws(r,_,A,!X);return}}iT(r,o,_,u,f,v,A,N,B)}function rN(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],_=v.getSnapshot;v=v.value;try{if(!Di(_(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ws(r,o,u,f){o&=~Xm,o&=~ra,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var v=o;0<v;){var _=31-Ae(v),A=1<<_;f[_]=-1,v&=~A}u!==0&&ti(r,u,o)}function od(){return(pt&6)===0?(Ou(0),!1):!0}function ig(){if(We!==null){if(bt===0)var r=We.return;else r=We,es=Yo=null,_m(r),Ja=null,_u=0,r=We;for(;r!==null;)CE(r.alternate,r),r=r.return;We=null}}function rl(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,AN(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),fs=0,ig(),Rt=r,We=u=Xr(r.current,null),Ze=o,bt=0,Vi=null,Ks=!1,tl=je(r,o),Qm=!1,nl=Li=Xm=ra=$s=Wt=0,_i=Vu=null,Zm=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var v=31-Ae(f),_=1<<v;o|=r[v],f&=~_}return cs=o,If(),u}function WE(r,o){ze=null,te.H=Iu,o===$a||o===Vf?(o=d_(),bt=3):o===am?(o=d_(),bt=4):bt=o===Vm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Vi=o,We===null&&(Wt=1,Yf(r,Xi(o,r.current)))}function QE(){var r=ki.current;return r===null?!0:(Ze&4194048)===Ze?nr===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?r===nr:!1}function XE(){var r=te.H;return te.H=Iu,r===null?Iu:r}function ZE(){var r=te.A;return te.A=nN,r}function ad(){Wt=4,Ks||(Ze&4194048)!==Ze&&ki.current!==null||(tl=!0),($s&134217727)===0&&(ra&134217727)===0||Rt===null||Ws(Rt,Ze,Li,!1)}function rg(r,o,u){var f=pt;pt|=2;var v=XE(),_=ZE();(Rt!==r||Ze!==o)&&(sd=null,rl(r,o)),o=!1;var A=Wt;e:do try{if(bt!==0&&We!==null){var N=We,B=Vi;switch(bt){case 8:ig(),A=6;break e;case 3:case 2:case 9:case 6:ki.current===null&&(o=!0);var X=bt;if(bt=0,Vi=null,sl(r,N,B,X),u&&tl){A=0;break e}break;default:X=bt,bt=0,Vi=null,sl(r,N,B,X)}}sN(),A=Wt;break}catch(re){WE(r,re)}while(!0);return o&&r.shellSuspendCounter++,es=Yo=null,pt=f,te.H=v,te.A=_,We===null&&(Rt=null,Ze=0,If()),A}function sN(){for(;We!==null;)eT(We)}function oN(r,o){var u=pt;pt|=2;var f=XE(),v=ZE();Rt!==r||Ze!==o?(sd=null,rd=he()+500,rl(r,o)):tl=je(r,o);e:do try{if(bt!==0&&We!==null){o=We;var _=Vi;t:switch(bt){case 1:bt=0,Vi=null,sl(r,o,_,1);break;case 2:case 9:if(c_(_)){bt=0,Vi=null,tT(o);break}o=function(){bt!==2&&bt!==9||Rt!==r||(bt=7),kr(r)},_.then(o,o);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:c_(_)?(bt=0,Vi=null,tT(o)):(bt=0,Vi=null,sl(r,o,_,7));break;case 5:var A=null;switch(We.tag){case 26:A=We.memoizedState;case 5:case 27:var N=We;if(A?qT(A):N.stateNode.complete){bt=0,Vi=null;var B=N.sibling;if(B!==null)We=B;else{var X=N.return;X!==null?(We=X,ld(X)):We=null}break t}}bt=0,Vi=null,sl(r,o,_,5);break;case 6:bt=0,Vi=null,sl(r,o,_,6);break;case 8:ig(),Wt=6;break e;default:throw Error(i(462))}}aN();break}catch(re){WE(r,re)}while(!0);return es=Yo=null,te.H=f,te.A=v,pt=u,We!==null?0:(Rt=null,Ze=0,If(),Wt)}function aN(){for(;We!==null&&!di();)eT(We)}function eT(r){var o=AE(r.alternate,r,cs);r.memoizedProps=r.pendingProps,o===null?ld(r):We=o}function tT(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=vE(u,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=vE(u,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:_m(o);default:CE(u,o),o=We=Z0(o,cs),o=AE(u,o,cs)}r.memoizedProps=r.pendingProps,o===null?ld(r):We=o}function sl(r,o,u,f){es=Yo=null,_m(o),Ja=null,_u=0;var v=o.return;try{if(Y1(r,v,o,u,Ze)){Wt=1,Yf(r,Xi(u,r.current)),We=null;return}}catch(_){if(v!==null)throw We=v,_;Wt=1,Yf(r,Xi(u,r.current)),We=null;return}o.flags&32768?(st||f===1?r=!0:tl||(Ze&536870912)!==0?r=!1:(Ks=r=!0,(f===2||f===9||f===3||f===6)&&(f=ki.current,f!==null&&f.tag===13&&(f.flags|=16384))),nT(o,r)):ld(o)}function ld(r){var o=r;do{if((o.flags&32768)!==0){nT(o,Ks);return}r=o.return;var u=X1(o.alternate,o,cs);if(u!==null){We=u;return}if(o=o.sibling,o!==null){We=o;return}We=o=r}while(o!==null);Wt===0&&(Wt=5)}function nT(r,o){do{var u=Z1(r.alternate,r);if(u!==null){u.flags&=32767,We=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){We=r;return}We=r=u}while(r!==null);Wt=6,We=null}function iT(r,o,u,f,v,_,A,N,B){r.cancelPendingCommit=null;do ud();while(yn!==0);if((pt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=Kp,St(r,u,_,A,N,B),r===Rt&&(We=Rt=null,Ze=0),il=o,Ys=r,fs=u,eg=_,tg=v,KE=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,fN(Kt,function(){return lT(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=te.T,te.T=null,v=ce.p,ce.p=2,A=pt,pt|=4;try{eN(r,o,u)}finally{pt=A,ce.p=v,te.T=f}}yn=1,rT(),sT(),oT()}}function rT(){if(yn===1){yn=0;var r=Ys,o=il,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=te.T,te.T=null;var f=ce.p;ce.p=2;var v=pt;pt|=4;try{UE(o,r);var _=gg,A=G0(r.containerInfo),N=_.focusedElem,B=_.selectionRange;if(A!==N&&N&&N.ownerDocument&&H0(N.ownerDocument.documentElement,N)){if(B!==null&&Bp(N)){var X=B.start,re=B.end;if(re===void 0&&(re=X),"selectionStart"in N)N.selectionStart=X,N.selectionEnd=Math.min(re,N.value.length);else{var oe=N.ownerDocument||document,ee=oe&&oe.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Se=N.textContent.length,Pe=Math.min(B.start,Se),It=B.end===void 0?Pe:Math.min(B.end,Se);!ne.extend&&Pe>It&&(A=It,It=Pe,Pe=A);var J=z0(N,Pe),j=z0(N,It);if(J&&j&&(ne.rangeCount!==1||ne.anchorNode!==J.node||ne.anchorOffset!==J.offset||ne.focusNode!==j.node||ne.focusOffset!==j.offset)){var W=oe.createRange();W.setStart(J.node,J.offset),ne.removeAllRanges(),Pe>It?(ne.addRange(W),ne.extend(j.node,j.offset)):(W.setEnd(j.node,j.offset),ne.addRange(W))}}}}for(oe=[],ne=N;ne=ne.parentNode;)ne.nodeType===1&&oe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<oe.length;N++){var se=oe[N];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Td=!!mg,gg=mg=null}finally{pt=v,ce.p=f,te.T=u}}r.current=o,yn=2}}function sT(){if(yn===2){yn=0;var r=Ys,o=il,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=te.T,te.T=null;var f=ce.p;ce.p=2;var v=pt;pt|=4;try{kE(r,o.alternate,o)}finally{pt=v,ce.p=f,te.T=u}}yn=3}}function oT(){if(yn===4||yn===3){yn=0,Bi();var r=Ys,o=il,u=fs,f=KE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?yn=5:(yn=0,il=Ys=null,aT(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Js=null),Nn(u),o=o.stateNode,bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(wi,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=te.T,v=ce.p,ce.p=2,te.T=null;try{for(var _=r.onRecoverableError,A=0;A<f.length;A++){var N=f[A];_(N.value,{componentStack:N.stack})}}finally{te.T=o,ce.p=v}}(fs&3)!==0&&ud(),kr(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===ng?Lu++:(Lu=0,ng=r):Lu=0,Ou(0)}}function aT(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,yu(o)))}function ud(){return rT(),sT(),oT(),lT()}function lT(){if(yn!==5)return!1;var r=Ys,o=eg;eg=0;var u=Nn(fs),f=te.T,v=ce.p;try{ce.p=32>u?32:u,te.T=null,u=tg,tg=null;var _=Ys,A=fs;if(yn=0,il=Ys=null,fs=0,(pt&6)!==0)throw Error(i(331));var N=pt;if(pt|=4,HE(_.current),qE(_,_.current,A,u),pt=N,Ou(0,!1),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(wi,_)}catch{}return!0}finally{ce.p=v,te.T=f,aT(r,o)}}function uT(r,o,u){o=Xi(u,o),o=Pm(r.stateNode,o,2),r=zs(r,o,2),r!==null&&(Nt(r,2),kr(r))}function At(r,o,u){if(r.tag===3)uT(r,r,u);else for(;o!==null;){if(o.tag===3){uT(o,r,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Js===null||!Js.has(f))){r=Xi(u,r),u=cE(2),f=zs(o,u,2),f!==null&&(fE(u,f,o,r),Nt(f,2),kr(f));break}}o=o.return}}function sg(r,o,u){var f=r.pingCache;if(f===null){f=r.pingCache=new iN;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(u)||(Qm=!0,v.add(u),r=lN.bind(null,r,o,u),o.then(r,r))}function lN(r,o,u){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Rt===r&&(Ze&u)===u&&(Wt===4||Wt===3&&(Ze&62914560)===Ze&&300>he()-id?(pt&2)===0&&rl(r,0):Xm|=u,nl===Ze&&(nl=0)),kr(r)}function cT(r,o){o===0&&(o=Hi()),r=Ko(r,o),r!==null&&(Nt(r,o),kr(r))}function uN(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),cT(r,u)}function cN(r,o){var u=0;switch(r.tag){case 31:case 13:var f=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),cT(r,u)}function fN(r,o){return ei(r,o)}var cd=null,ol=null,og=!1,fd=!1,ag=!1,Qs=0;function kr(r){r!==ol&&r.next===null&&(ol===null?cd=ol=r:ol=ol.next=r),fd=!0,og||(og=!0,hN())}function Ou(r,o){if(!ag&&fd){ag=!0;do for(var u=!1,f=cd;f!==null;){if(r!==0){var v=f.pendingLanes;if(v===0)var _=0;else{var A=f.suspendedLanes,N=f.pingedLanes;_=(1<<31-Ae(42|r)+1)-1,_&=v&~(A&~N),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,pT(f,_))}else _=Ze,_=ke(f,f===Rt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||je(f,_)||(u=!0,pT(f,_));f=f.next}while(u);ag=!1}}function dN(){fT()}function fT(){fd=og=!1;var r=0;Qs!==0&&bN()&&(r=Qs);for(var o=he(),u=null,f=cd;f!==null;){var v=f.next,_=dT(f,o);_===0?(f.next=null,u===null?cd=v:u.next=v,v===null&&(ol=u)):(u=f,(r!==0||(_&3)!==0)&&(fd=!0)),f=v}yn!==0&&yn!==5||Ou(r),Qs!==0&&(Qs=0)}function dT(r,o){for(var u=r.suspendedLanes,f=r.pingedLanes,v=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var A=31-Ae(_),N=1<<A,B=v[A];B===-1?((N&u)===0||(N&f)!==0)&&(v[A]=gn(N,o)):B<=o&&(r.expiredLanes|=N),_&=~N}if(o=Rt,u=Ze,u=ke(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===o&&(bt===2||bt===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&fi(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||je(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(f!==null&&fi(f),Nn(u)){case 2:case 8:u=yt;break;case 32:u=Kt;break;case 268435456:u=zi;break;default:u=Kt}return f=hT.bind(null,r),u=ei(u,f),r.callbackPriority=o,r.callbackNode=u,o}return f!==null&&f!==null&&fi(f),r.callbackPriority=2,r.callbackNode=null,2}function hT(r,o){if(yn!==0&&yn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(ud()&&r.callbackNode!==u)return null;var f=Ze;return f=ke(r,r===Rt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(JE(r,f,o),dT(r,he()),r.callbackNode!=null&&r.callbackNode===u?hT.bind(null,r):null)}function pT(r,o){if(ud())return null;JE(r,o,!0)}function hN(){wN(function(){(pt&6)!==0?ei(De,dN):fT()})}function lg(){if(Qs===0){var r=ja;r===0&&(r=Je,Je<<=1,(Je&261888)===0&&(Je=256)),Qs=r}return Qs}function mT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ir(""+r)}function gT(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function pN(r,o,u,f,v){if(o==="submit"&&u&&u.stateNode===v){var _=mT((v[tn]||null).action),A=f.submitter;A&&(o=(o=A[tn]||null)?mT(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var N=new Fo("action","action",null,f,v);r.push({event:N,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Qs!==0){var B=A?gT(v,A):new FormData(v);xm(u,{pending:!0,data:B,method:v.method,action:_},null,B)}}else typeof _=="function"&&(N.preventDefault(),B=A?gT(v,A):new FormData(v),xm(u,{pending:!0,data:B,method:v.method,action:_},_,B))},currentTarget:v}]})}}for(var ug=0;ug<jp.length;ug++){var cg=jp[ug],mN=cg.toLowerCase(),gN=cg[0].toUpperCase()+cg.slice(1);hr(mN,"on"+gN)}hr($0,"onAnimationEnd"),hr(J0,"onAnimationIteration"),hr(Y0,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(M1,"onTransitionRun"),hr(k1,"onTransitionStart"),hr(P1,"onTransitionCancel"),hr(W0,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uu));function yT(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],v=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var A=f.length-1;0<=A;A--){var N=f[A],B=N.instance,X=N.currentTarget;if(N=N.listener,B!==_&&v.isPropagationStopped())break e;_=N,v.currentTarget=X;try{_(v)}catch(re){Cf(re)}v.currentTarget=null,_=B}else for(A=0;A<f.length;A++){if(N=f[A],B=N.instance,X=N.currentTarget,N=N.listener,B!==_&&v.isPropagationStopped())break e;_=N,v.currentTarget=X;try{_(v)}catch(re){Cf(re)}v.currentTarget=null,_=B}}}}function Qe(r,o){var u=o[ji];u===void 0&&(u=o[ji]=new Set);var f=r+"__bubble";u.has(f)||(vT(o,r,2,!1),u.add(f))}function fg(r,o,u){var f=0;o&&(f|=4),vT(u,r,f,o)}var dd="_reactListening"+Math.random().toString(36).slice(2);function dg(r){if(!r[dd]){r[dd]=!0,cr.forEach(function(u){u!=="selectionchange"&&(yN.has(u)||fg(u,!1,r),fg(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[dd]||(o[dd]=!0,fg("selectionchange",!1,o))}}function vT(r,o,u,f){switch($T(o)){case 2:var v=jN;break;case 8:v=KN;break;default:v=Ig}u=v.bind(null,o,u,r),v=void 0,!ou||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function hg(r,o,u,f,v){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var N=f.stateNode.containerInfo;if(N===v)break;if(A===4)for(A=f.return;A!==null;){var B=A.tag;if((B===3||B===4)&&A.stateNode.containerInfo===v)return;A=A.return}for(;N!==null;){if(A=hi(N),A===null)return;if(B=A.tag,B===5||B===6||B===26||B===27){f=_=A;continue e}N=N.parentNode}}f=f.return}cf(function(){var X=_,re=Ma(u),oe=[];e:{var ee=Q0.get(r);if(ee!==void 0){var ne=Fo,Se=r;switch(r){case"keypress":if(Uo(u)===0)break e;case"keydown":case"keyup":ne=_f;break;case"focusin":Se="focus",ne=Ms;break;case"focusout":Se="blur",ne=Ms;break;case"beforeblur":case"afterblur":ne=Ms;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=hf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Tf;break;case $0:case J0:case Y0:ne=Va;break;case W0:ne=La;break;case"scroll":case"scrollend":ne=ff;break;case"wheel":ne=bf;break;case"copy":case"cut":case"paste":ne=mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=fu;break;case"toggle":case"beforetoggle":ne=Ps}var Pe=(o&4)!==0,It=!Pe&&(r==="scroll"||r==="scrollend"),J=Pe?ee!==null?ee+"Capture":null:ee;Pe=[];for(var j=X,W;j!==null;){var se=j;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||J===null||(se=pi(j,J),se!=null&&Pe.push(Fu(j,se,W))),It)break;j=j.return}0<Pe.length&&(ee=new ne(ee,Se,null,u,re),oe.push({event:ee,listeners:Pe}))}}if((o&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",ee&&u!==Da&&(Se=u.relatedTarget||u.fromElement)&&(hi(Se)||Se[Ii]))break e;if((ne||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Se=u.relatedTarget||u.toElement,ne=X,Se=Se?hi(Se):null,Se!==null&&(It=a(Se),Pe=Se.tag,Se!==It||Pe!==5&&Pe!==27&&Pe!==6)&&(Se=null)):(ne=null,Se=X),ne!==Se)){if(Pe=df,se="onMouseLeave",J="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=fu,se="onPointerLeave",J="onPointerEnter",j="pointer"),It=ne==null?ee:wr(ne),W=Se==null?ee:wr(Se),ee=new Pe(se,j+"leave",ne,u,re),ee.target=It,ee.relatedTarget=W,se=null,hi(re)===X&&(Pe=new Pe(J,j+"enter",Se,u,re),Pe.target=W,Pe.relatedTarget=It,se=Pe),It=se,ne&&Se)t:{for(Pe=vN,J=ne,j=Se,W=0,se=J;se;se=Pe(se))W++;se=0;for(var Re=j;Re;Re=Pe(Re))se++;for(;0<W-se;)J=Pe(J),W--;for(;0<se-W;)j=Pe(j),se--;for(;W--;){if(J===j||j!==null&&J===j.alternate){Pe=J;break t}J=Pe(J),j=Pe(j)}Pe=null}else Pe=null;ne!==null&&_T(oe,ee,ne,Pe,!1),Se!==null&&It!==null&&_T(oe,It,Se,Pe,!0)}}e:{if(ee=X?wr(X):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var ct=L0;else if(mi(ee))if(O0)ct=R1;else{ct=I1;var Ce=C1}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?X&&ru(X.elementType)&&(ct=L0):ct=x1;if(ct&&(ct=ct(r,X))){Ho(oe,ct,u,re);break e}Ce&&Ce(r,ee,X),r==="focusout"&&X&&ee.type==="number"&&X.memoizedProps.value!=null&&Na(ee,"number",ee.value)}switch(Ce=X?wr(X):window,r){case"focusin":(mi(Ce)||Ce.contentEditable==="true")&&(Oa=Ce,zp=X,pu=null);break;case"focusout":pu=zp=Oa=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,j0(oe,u,re);break;case"selectionchange":if(D1)break;case"keydown":case"keyup":j0(oe,u,re)}var He;if(S)e:{switch(r){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Ke?vt(r,u)&&(et="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(et="onCompositionStart");et&&(Y&&u.locale!=="ko"&&(Ke||et!=="onCompositionStart"?et==="onCompositionEnd"&&Ke&&(He=xs()):(Ni=re,ka="value"in Ni?Ni.value:Ni.textContent,Ke=!0)),Ce=hd(X,et),0<Ce.length&&(et=new lu(et,r,null,u,re),oe.push({event:et,listeners:Ce}),He?et.data=He:(He=on(u),He!==null&&(et.data=He)))),(He=k?wn(r,u):Cn(r,u))&&(et=hd(X,"onBeforeInput"),0<et.length&&(Ce=new lu("onBeforeInput","beforeinput",null,u,re),oe.push({event:Ce,listeners:et}),Ce.data=He)),pN(oe,r,X,u,re)}yT(oe,o)})}function Fu(r,o,u){return{instance:r,listener:o,currentTarget:u}}function hd(r,o){for(var u=o+"Capture",f=[];r!==null;){var v=r,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=pi(r,u),v!=null&&f.unshift(Fu(r,v,_)),v=pi(r,o),v!=null&&f.push(Fu(r,v,_))),r.tag===3)return f;r=r.return}return[]}function vN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function _T(r,o,u,f,v){for(var _=o._reactName,A=[];u!==null&&u!==f;){var N=u,B=N.alternate,X=N.stateNode;if(N=N.tag,B!==null&&B===f)break;N!==5&&N!==26&&N!==27||X===null||(B=X,v?(X=pi(u,_),X!=null&&A.unshift(Fu(u,X,B))):v||(X=pi(u,_),X!=null&&A.push(Fu(u,X,B)))),u=u.return}A.length!==0&&r.push({event:o,listeners:A})}var _N=/\r\n?/g,EN=/\u0000|\uFFFD/g;function ET(r){return(typeof r=="string"?r:""+r).replace(_N,`
`).replace(EN,"")}function TT(r,o){return o=ET(o),ET(r)===o}function Ct(r,o,u,f,v,_){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Wi(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Wi(r,""+f);break;case"className":ws(r,"class",f);break;case"tabIndex":ws(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(r,u,f);break;case"style":lf(r,f,_);break;case"data":if(o!=="object"){ws(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Ir(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&Ct(r,o,"name",v.name,v,null),Ct(r,o,"formEncType",v.formEncType,v,null),Ct(r,o,"formMethod",v.formMethod,v,null),Ct(r,o,"formTarget",v.formTarget,v,null)):(Ct(r,o,"encType",v.encType,v,null),Ct(r,o,"method",v.method,v,null),Ct(r,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Ir(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=An);break;case"onScroll":f!=null&&Qe("scroll",r);break;case"onScrollEnd":f!=null&&Qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=Ir(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Qe("beforetoggle",r),Qe("toggle",r),As(r,"popover",f);break;case"xlinkActuate":Yi(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Yi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Yi(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Yi(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Yi(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Yi(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Yi(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":As(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Lp.get(u)||u,As(r,u,f))}}function pg(r,o,u,f,v,_){switch(u){case"style":lf(r,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?Wi(r,f):(typeof f=="number"||typeof f=="bigint")&&Wi(r,""+f);break;case"onScroll":f!=null&&Qe("scroll",r);break;case"onScrollEnd":f!=null&&Qe("scrollend",r);break;case"onClick":f!=null&&(r.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fr.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),_=r[tn]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(o,_,v),typeof f=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,f,v);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):As(r,u,f)}}}function Pn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",r),Qe("load",r);var f=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var A=u[_];if(A!=null)switch(_){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ct(r,o,_,A,u,null)}}v&&Ct(r,o,"srcSet",u.srcSet,u,null),f&&Ct(r,o,"src",u.src,u,null);return;case"input":Qe("invalid",r);var N=_=A=v=null,B=null,X=null;for(f in u)if(u.hasOwnProperty(f)){var re=u[f];if(re!=null)switch(f){case"name":v=re;break;case"type":A=re;break;case"checked":B=re;break;case"defaultChecked":X=re;break;case"value":_=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:Ct(r,o,f,re,u,null)}}Lo(r,_,N,B,X,A,v,!1);return;case"select":Qe("invalid",r),f=A=_=null;for(v in u)if(u.hasOwnProperty(v)&&(N=u[v],N!=null))switch(v){case"value":_=N;break;case"defaultValue":A=N;break;case"multiple":f=N;default:Ct(r,o,v,N,u,null)}o=_,u=A,r.multiple=!!f,o!=null?ut(r,!!f,o,!1):u!=null&&ut(r,!!f,u,!0);return;case"textarea":Qe("invalid",r),_=v=f=null;for(A in u)if(u.hasOwnProperty(A)&&(N=u[A],N!=null))switch(A){case"value":f=N;break;case"defaultValue":v=N;break;case"children":_=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:Ct(r,o,A,N,u,null)}Is(r,f,v,_);return;case"option":for(B in u)if(u.hasOwnProperty(B)&&(f=u[B],f!=null))switch(B){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ct(r,o,B,f,u,null)}return;case"dialog":Qe("beforetoggle",r),Qe("toggle",r),Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":Qe("load",r);break;case"video":case"audio":for(f=0;f<Uu.length;f++)Qe(Uu[f],r);break;case"image":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"embed":case"source":case"link":Qe("error",r),Qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(f=u[X],f!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ct(r,o,X,f,u,null)}return;default:if(ru(o)){for(re in u)u.hasOwnProperty(re)&&(f=u[re],f!==void 0&&pg(r,o,re,f,u,void 0));return}}for(N in u)u.hasOwnProperty(N)&&(f=u[N],f!=null&&Ct(r,o,N,f,u,null))}function TN(r,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,A=null,N=null,B=null,X=null,re=null;for(ne in u){var oe=u[ne];if(u.hasOwnProperty(ne)&&oe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":B=oe;default:f.hasOwnProperty(ne)||Ct(r,o,ne,null,f,oe)}}for(var ee in f){var ne=f[ee];if(oe=u[ee],f.hasOwnProperty(ee)&&(ne!=null||oe!=null))switch(ee){case"type":_=ne;break;case"name":v=ne;break;case"checked":X=ne;break;case"defaultChecked":re=ne;break;case"value":A=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ne!==oe&&Ct(r,o,ee,ne,f,oe)}}Cs(r,A,N,B,X,re,_,v);return;case"select":ne=A=N=ee=null;for(_ in u)if(B=u[_],u.hasOwnProperty(_)&&B!=null)switch(_){case"value":break;case"multiple":ne=B;default:f.hasOwnProperty(_)||Ct(r,o,_,null,f,B)}for(v in f)if(_=f[v],B=u[v],f.hasOwnProperty(v)&&(_!=null||B!=null))switch(v){case"value":ee=_;break;case"defaultValue":N=_;break;case"multiple":A=_;default:_!==B&&Ct(r,o,v,_,f,B)}o=N,u=A,f=ne,ee!=null?ut(r,!!u,ee,!1):!!f!=!!u&&(o!=null?ut(r,!!u,o,!0):ut(r,!!u,u?[]:"",!1));return;case"textarea":ne=ee=null;for(N in u)if(v=u[N],u.hasOwnProperty(N)&&v!=null&&!f.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Ct(r,o,N,null,f,v)}for(A in f)if(v=f[A],_=u[A],f.hasOwnProperty(A)&&(v!=null||_!=null))switch(A){case"value":ee=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&Ct(r,o,A,v,f,_)}Oo(r,ee,ne);return;case"option":for(var Se in u)if(ee=u[Se],u.hasOwnProperty(Se)&&ee!=null&&!f.hasOwnProperty(Se))switch(Se){case"selected":r.selected=!1;break;default:Ct(r,o,Se,null,f,ee)}for(B in f)if(ee=f[B],ne=u[B],f.hasOwnProperty(B)&&ee!==ne&&(ee!=null||ne!=null))switch(B){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Ct(r,o,B,ee,f,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in u)ee=u[Pe],u.hasOwnProperty(Pe)&&ee!=null&&!f.hasOwnProperty(Pe)&&Ct(r,o,Pe,null,f,ee);for(X in f)if(ee=f[X],ne=u[X],f.hasOwnProperty(X)&&ee!==ne&&(ee!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:Ct(r,o,X,ee,f,ne)}return;default:if(ru(o)){for(var It in u)ee=u[It],u.hasOwnProperty(It)&&ee!==void 0&&!f.hasOwnProperty(It)&&pg(r,o,It,void 0,f,ee);for(re in f)ee=f[re],ne=u[re],!f.hasOwnProperty(re)||ee===ne||ee===void 0&&ne===void 0||pg(r,o,re,ee,f,ne);return}}for(var J in u)ee=u[J],u.hasOwnProperty(J)&&ee!=null&&!f.hasOwnProperty(J)&&Ct(r,o,J,null,f,ee);for(oe in f)ee=f[oe],ne=u[oe],!f.hasOwnProperty(oe)||ee===ne||ee==null&&ne==null||Ct(r,o,oe,ee,f,ne)}function ST(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var v=u[f],_=v.transferSize,A=v.initiatorType,N=v.duration;if(_&&N&&ST(A)){for(A=0,N=v.responseEnd,f+=1;f<u.length;f++){var B=u[f],X=B.startTime;if(X>N)break;var re=B.transferSize,oe=B.initiatorType;re&&ST(oe)&&(B=B.responseEnd,A+=re*(B<N?1:(N-X)/(B-X)))}if(--f,o+=8*(_+A)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var mg=null,gg=null;function pd(r){return r.nodeType===9?r:r.ownerDocument}function bT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function AT(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function yg(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var vg=null;function bN(){var r=window.event;return r&&r.type==="popstate"?r===vg?!1:(vg=r,!0):(vg=null,!1)}var wT=typeof setTimeout=="function"?setTimeout:void 0,AN=typeof clearTimeout=="function"?clearTimeout:void 0,CT=typeof Promise=="function"?Promise:void 0,wN=typeof queueMicrotask=="function"?queueMicrotask:typeof CT<"u"?function(r){return CT.resolve(null).then(r).catch(CN)}:wT;function CN(r){setTimeout(function(){throw r})}function Xs(r){return r==="head"}function IT(r,o){var u=o,f=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(f===0){r.removeChild(v),cl(o);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")qu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,qu(u);for(var _=u.firstChild;_;){var A=_.nextSibling,N=_.nodeName;_[Ki]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=A}}else u==="body"&&qu(r.ownerDocument.body);u=v}while(u);cl(o)}function xT(r,o){var u=r;r=0;do{var f=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=f}while(u)}function _g(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":_g(u),$i(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function IN(r,o,u,f){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Ki])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=ir(r.nextSibling),r===null)break}return null}function xN(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=ir(r.nextSibling),r===null))return null;return r}function RT(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=ir(r.nextSibling),r===null))return null;return r}function Eg(r){return r.data==="$?"||r.data==="$~"}function Tg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function RN(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function ir(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Sg=null;function NT(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return ir(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function DT(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function MT(r,o,u){switch(o=pd(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function qu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);$i(r)}var rr=new Map,kT=new Set;function md(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ds=ce.d;ce.d={f:NN,r:DN,D:MN,C:kN,L:PN,m:VN,X:ON,S:LN,M:UN};function NN(){var r=ds.f(),o=od();return r||o}function DN(r){var o=Ji(r);o!==null&&o.tag===5&&o.type==="form"?W_(o):ds.r(r)}var al=typeof document>"u"?null:document;function PT(r,o,u){var f=al;if(f&&typeof o=="string"&&o){var v=Jt(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),kT.has(v)||(kT.add(v),r={rel:r,crossOrigin:u,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),Pn(o,"link",r),qt(o),f.head.appendChild(o)))}}function MN(r){ds.D(r),PT("dns-prefetch",r,null)}function kN(r,o){ds.C(r,o),PT("preconnect",r,o)}function PN(r,o,u){ds.L(r,o,u);var f=al;if(f&&r&&o){var v='link[rel="preload"][as="'+Jt(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Jt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Jt(u.imageSizes)+'"]')):v+='[href="'+Jt(r)+'"]';var _=v;switch(o){case"style":_=ll(r);break;case"script":_=ul(r)}rr.has(_)||(r=E({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),rr.set(_,r),f.querySelector(v)!==null||o==="style"&&f.querySelector(Bu(_))||o==="script"&&f.querySelector(zu(_))||(o=f.createElement("link"),Pn(o,"link",r),qt(o),f.head.appendChild(o)))}}function VN(r,o){ds.m(r,o);var u=al;if(u&&r){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Jt(f)+'"][href="'+Jt(r)+'"]',_=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ul(r)}if(!rr.has(_)&&(r=E({rel:"modulepreload",href:r},o),rr.set(_,r),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(zu(_)))return}f=u.createElement("link"),Pn(f,"link",r),qt(f),u.head.appendChild(f)}}}function LN(r,o,u){ds.S(r,o,u);var f=al;if(f&&r){var v=ii(f).hoistableStyles,_=ll(r);o=o||"default";var A=v.get(_);if(!A){var N={loading:0,preload:null};if(A=f.querySelector(Bu(_)))N.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},u),(u=rr.get(_))&&bg(r,u);var B=A=f.createElement("link");qt(B),Pn(B,"link",r),B._p=new Promise(function(X,re){B.onload=X,B.onerror=re}),B.addEventListener("load",function(){N.loading|=1}),B.addEventListener("error",function(){N.loading|=2}),N.loading|=4,gd(A,o,f)}A={type:"stylesheet",instance:A,count:1,state:N},v.set(_,A)}}}function ON(r,o){ds.X(r,o);var u=al;if(u&&r){var f=ii(u).hoistableScripts,v=ul(r),_=f.get(v);_||(_=u.querySelector(zu(v)),_||(r=E({src:r,async:!0},o),(o=rr.get(v))&&Ag(r,o),_=u.createElement("script"),qt(_),Pn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function UN(r,o){ds.M(r,o);var u=al;if(u&&r){var f=ii(u).hoistableScripts,v=ul(r),_=f.get(v);_||(_=u.querySelector(zu(v)),_||(r=E({src:r,async:!0,type:"module"},o),(o=rr.get(v))&&Ag(r,o),_=u.createElement("script"),qt(_),Pn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(v,_))}}function VT(r,o,u,f){var v=(v=Oe.current)?md(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ll(u.href),u=ii(v).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ll(u.href);var _=ii(v).hoistableStyles,A=_.get(r);if(A||(v=v.ownerDocument||v,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,A),(_=v.querySelector(Bu(r)))&&!_._p&&(A.instance=_,A.state.loading=5),rr.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},rr.set(r,u),_||FN(v,r,u,A.state))),o&&f===null)throw Error(i(528,""));return A}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ul(u),u=ii(v).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ll(r){return'href="'+Jt(r)+'"'}function Bu(r){return'link[rel="stylesheet"]['+r+"]"}function LT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function FN(r,o,u,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Pn(o,"link",u),qt(o),r.head.appendChild(o))}function ul(r){return'[src="'+Jt(r)+'"]'}function zu(r){return"script[async]"+r}function OT(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+Jt(u.href)+'"]');if(f)return o.instance=f,qt(f),f;var v=E({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),qt(f),Pn(f,"style",v),gd(f,u.precedence,r),o.instance=f;case"stylesheet":v=ll(u.href);var _=r.querySelector(Bu(v));if(_)return o.state.loading|=4,o.instance=_,qt(_),_;f=LT(u),(v=rr.get(v))&&bg(f,v),_=(r.ownerDocument||r).createElement("link"),qt(_);var A=_;return A._p=new Promise(function(N,B){A.onload=N,A.onerror=B}),Pn(_,"link",f),o.state.loading|=4,gd(_,u.precedence,r),o.instance=_;case"script":return _=ul(u.src),(v=r.querySelector(zu(_)))?(o.instance=v,qt(v),v):(f=u,(v=rr.get(_))&&(f=E({},u),Ag(f,v)),r=r.ownerDocument||r,v=r.createElement("script"),qt(v),Pn(v,"link",f),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,gd(f,u.precedence,r));return o.instance}function gd(r,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,_=v,A=0;A<f.length;A++){var N=f[A];if(N.dataset.precedence===o)_=N;else if(_!==v)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function bg(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Ag(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var yd=null;function UT(r,o,u){if(yd===null){var f=new Map,v=yd=new Map;v.set(u,f)}else v=yd,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var _=u[v];if(!(_[Ki]||_[Mt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=r+A;var N=f.get(A);N?N.push(_):f.set(A,[_])}}return f}function FT(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function qN(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function qT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function BN(r,o,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=ll(f.href),_=o.querySelector(Bu(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=vd.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=_,qt(_);return}_=o.ownerDocument||o,f=LT(f),(v=rr.get(v))&&bg(f,v),_=_.createElement("link"),qt(_);var A=_;A._p=new Promise(function(N,B){A.onload=N,A.onerror=B}),Pn(_,"link",f),u.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=vd.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var wg=0;function zN(r,o){return r.stylesheets&&r.count===0&&Ed(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var f=setTimeout(function(){if(r.stylesheets&&Ed(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&wg===0&&(wg=62500*SN());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ed(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>wg?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ed(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var _d=null;function Ed(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,_d=new Map,o.forEach(HN,r),_d=null,vd.call(r))}function HN(r,o){if(!(o.state.loading&4)){var u=_d.get(r);if(u)var f=u.get(null);else{u=new Map,_d.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var A=v[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),f=A)}f&&u.set(null,f)}v=o.instance,A=v.getAttribute("data-precedence"),_=u.get(A)||f,_===f&&u.set(null,v),u.set(A,v),this.count++,f=vd.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),_?_.parentNode.insertBefore(v,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var Hu={$$typeof:q,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function GN(r,o,u,f,v,_,A,N,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=en(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=en(0),this.hiddenUpdates=en(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function BT(r,o,u,f,v,_,A,N,B,X,re,oe){return r=new GN(r,o,u,A,B,X,re,oe,N),o=1,_===!0&&(o|=24),_=Mi(3,null,null,o),r.current=_,_.stateNode=r,o=rm(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:f,isDehydrated:u,cache:o},lm(_),r}function zT(r){return r?(r=qa,r):qa}function HT(r,o,u,f,v,_){v=zT(v),f.context===null?f.context=v:f.pendingContext=v,f=Bs(o),f.payload={element:u},_=_===void 0?null:_,_!==null&&(f.callback=_),u=zs(r,f,o),u!==null&&(Ei(u,r,o),Tu(u,r,o))}function GT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Cg(r,o){GT(r,o),(r=r.alternate)&&GT(r,o)}function jT(r){if(r.tag===13||r.tag===31){var o=Ko(r,67108864);o!==null&&Ei(o,r,67108864),Cg(r,67108864)}}function KT(r){if(r.tag===13||r.tag===31){var o=Oi();o=Gi(o);var u=Ko(r,o);u!==null&&Ei(u,r,o),Cg(r,o)}}var Td=!0;function jN(r,o,u,f){var v=te.T;te.T=null;var _=ce.p;try{ce.p=2,Ig(r,o,u,f)}finally{ce.p=_,te.T=v}}function KN(r,o,u,f){var v=te.T;te.T=null;var _=ce.p;try{ce.p=8,Ig(r,o,u,f)}finally{ce.p=_,te.T=v}}function Ig(r,o,u,f){if(Td){var v=xg(f);if(v===null)hg(r,o,f,Sd,u),JT(r,f);else if(JN(v,r,o,u,f))f.stopPropagation();else if(JT(r,f),o&4&&-1<$N.indexOf(r)){for(;v!==null;){var _=Ji(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=rt(_.pendingLanes);if(A!==0){var N=_;for(N.pendingLanes|=2,N.entangledLanes|=2;A;){var B=1<<31-Ae(A);N.entanglements[1]|=B,A&=~B}kr(_),(pt&6)===0&&(rd=he()+500,Ou(0))}}break;case 31:case 13:N=Ko(_,2),N!==null&&Ei(N,_,2),od(),Cg(_,2)}if(_=xg(f),_===null&&hg(r,o,f,Sd,u),_===v)break;v=_}v!==null&&f.stopPropagation()}else hg(r,o,f,null,u)}}function xg(r){return r=Ma(r),Rg(r)}var Sd=null;function Rg(r){if(Sd=null,r=hi(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Sd=r,null}function $T(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case De:return 2;case yt:return 8;case Kt:case $t:return 32;case zi:return 268435456;default:return 32}default:return 32}}var Ng=!1,Zs=null,eo=null,to=null,Gu=new Map,ju=new Map,no=[],$N="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JT(r,o){switch(r){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Gu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(o.pointerId)}}function Ku(r,o,u,f,v,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[v]},o!==null&&(o=Ji(o),o!==null&&jT(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function JN(r,o,u,f,v){switch(o){case"focusin":return Zs=Ku(Zs,r,o,u,f,v),!0;case"dragenter":return eo=Ku(eo,r,o,u,f,v),!0;case"mouseover":return to=Ku(to,r,o,u,f,v),!0;case"pointerover":var _=v.pointerId;return Gu.set(_,Ku(Gu.get(_)||null,r,o,u,f,v)),!0;case"gotpointercapture":return _=v.pointerId,ju.set(_,Ku(ju.get(_)||null,r,o,u,f,v)),!0}return!1}function YT(r){var o=hi(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,Kr(r.priority,function(){KT(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,Kr(r.priority,function(){KT(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function bd(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=xg(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Da=f,u.target.dispatchEvent(f),Da=null}else return o=Ji(u),o!==null&&jT(o),r.blockedOn=u,!1;o.shift()}return!0}function WT(r,o,u){bd(r)&&u.delete(o)}function YN(){Ng=!1,Zs!==null&&bd(Zs)&&(Zs=null),eo!==null&&bd(eo)&&(eo=null),to!==null&&bd(to)&&(to=null),Gu.forEach(WT),ju.forEach(WT)}function Ad(r,o){r.blockedOn===o&&(r.blockedOn=null,Ng||(Ng=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,YN)))}var wd=null;function QT(r){wd!==r&&(wd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wd===r&&(wd=null);for(var o=0;o<r.length;o+=3){var u=r[o],f=r[o+1],v=r[o+2];if(typeof f!="function"){if(Rg(f||u)===null)continue;break}var _=Ji(u);_!==null&&(r.splice(o,3),o-=3,xm(_,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function cl(r){function o(B){return Ad(B,r)}Zs!==null&&Ad(Zs,r),eo!==null&&Ad(eo,r),to!==null&&Ad(to,r),Gu.forEach(o),ju.forEach(o);for(var u=0;u<no.length;u++){var f=no[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<no.length&&(u=no[0],u.blockedOn===null);)YT(u),u.blockedOn===null&&no.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],_=u[f+1],A=v[tn]||null;if(typeof _=="function")A||QT(u);else if(A){var N=null;if(_&&_.hasAttribute("formAction")){if(v=_,A=_[tn]||null)N=A.formAction;else if(Rg(v)!==null)continue}else N=A.action;typeof N=="function"?u[f+1]=N:(u.splice(f,3),f-=3),QT(u)}}}function XT(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return v=A})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Dg(r){this._internalRoot=r}Cd.prototype.render=Dg.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,f=Oi();HT(u,f,r,o,null,null)},Cd.prototype.unmount=Dg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;HT(r.current,2,null,r,null,null),od(),o[Ii]=null}};function Cd(r){this._internalRoot=r}Cd.prototype.unstable_scheduleHydration=function(r){if(r){var o=ni();r={blockedOn:null,target:r,priority:o};for(var u=0;u<no.length&&o!==0&&o<no[u].priority;u++);no.splice(u,0,r),u===0&&YT(r)}};var ZT=e.version;if(ZT!=="19.2.0")throw Error(i(527,ZT,"19.2.0"));ce.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var WN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{wi=Id.inject(WN),bn=Id}catch{}}return Ju.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,f="",v=oE,_=aE,A=lE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=BT(r,1,!1,null,null,u,f,null,v,_,A,XT),r[Ii]=o.current,dg(r),new Dg(o)},Ju.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var f=!1,v="",_=oE,A=aE,N=lE,B=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(N=u.onRecoverableError),u.formState!==void 0&&(B=u.formState)),o=BT(r,1,!0,o,u??null,f,v,B,_,A,N,XT),o.context=zT(null),u=o.current,f=Oi(),f=Gi(f),v=Bs(f),v.callback=null,zs(u,v,f),u=f,o.current.lanes=u,Nt(o,u),kr(o),r[Ii]=o.current,dg(r),new Cd(o)},Ju.version="19.2.0",Ju}var uS;function sD(){if(uS)return Pg.exports;uS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Pg.exports=rD(),Pg.exports}var oD=sD();const aD=aC(oD),lD=()=>{};var cS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uD=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],c=t[n++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},cC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,c=l?t[s+1]:0,d=s+2<t.length,h=d?t[s+2]:0,y=a>>2,E=(a&3)<<4|c>>4;let T=(c&15)<<2|h>>6,w=h&63;d||(w=64,l||(T=64)),i.push(n[y],n[E],n[T],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const E=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||h==null||E==null)throw new cD;const T=a<<2|c>>4;if(i.push(T),h!==64){const w=c<<4&240|h>>2;if(i.push(w),E!==64){const D=h<<6&192|E;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fD=function(t){const e=uC(t);return cC.encodeByteArray(e,!0)},vh=function(t){return fD(t).replace(/\./g,"")},fC=function(t){try{return cC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=()=>dD().__FIREBASE_DEFAULTS__,pD=()=>{if(typeof process>"u"||typeof cS>"u")return;const t=cS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fC(t[1]);return e&&JSON.parse(e)},tp=()=>{try{return lD()||hD()||pD()||mD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dC=t=>{var e,n;return(n=(e=tp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hC=t=>{const e=dC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},pC=()=>{var t;return(t=tp())===null||t===void 0?void 0:t.config},mC=t=>{var e;return(e=tp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function av(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vh(JSON.stringify(n)),vh(JSON.stringify(l)),""].join(".")}const hc={};function yD(){const t={prod:[],emulator:[]};for(const e of Object.keys(hc))hc[e]?t.emulator.push(e):t.prod.push(e);return t}function vD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let fS=!1;function lv(t,e){if(typeof window>"u"||typeof document>"u"||!xo(window.location.host)||hc[t]===e||hc[t]||fS)return;hc[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=yD().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{fS=!0,l()},T}function y(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=vD(i),w=n("text"),D=document.getElementById(w)||document.createElement("span"),V=n("learnmore"),L=document.getElementById(V)||document.createElement("a"),H=n("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const q=T.element;c(q),y(L,V);const $=h();d(F,H),q.append(F,D,L,$),document.body.appendChild(q)}a?(D.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _D(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function ED(){var t;const e=(t=tp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AD(){const t=Qn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wD(){return!ED()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CD(){try{return typeof indexedDB=="object"}catch{return!1}}function ID(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="FirebaseError";class Hr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=xD,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hc.prototype.create)}}class Hc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?RD(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Hr(s,c,i)}}function RD(t,e){return t.replace(ND,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const ND=/\{\$([^}]+)}/g;function DD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ga(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const a=t[s],l=e[s];if(dS(a)&&dS(l)){if(!ga(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function dS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function ic(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MD(t,e){const n=new kD(t,e);return n.subscribe.bind(n)}class kD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");PD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Ug),s.error===void 0&&(s.error=Ug),s.complete===void 0&&(s.complete=Ug);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ug(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class Eo{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new gD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OD(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:LD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LD(t){return t===oa?void 0:t}function OD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tt||(tt={}));const FD={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},qD=tt.INFO,BD={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},zD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=BD[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uv{constructor(e){this.name=e,this._logLevel=qD,this._logHandler=zD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const HD=(t,e)=>e.some(n=>t instanceof n);let hS,pS;function GD(){return hS||(hS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jD(){return pS||(pS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yC=new WeakMap,oy=new WeakMap,vC=new WeakMap,Fg=new WeakMap,cv=new WeakMap;function KD(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(mo(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&yC.set(n,t)}).catch(()=>{}),cv.set(e,t),e}function $D(t){if(oy.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});oy.set(t,e)}let ay={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return oy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JD(t){ay=t(ay)}function YD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(qg(this),e,...n);return vC.set(i,e.sort?e.sort():[e]),mo(i)}:jD().includes(t)?function(...e){return t.apply(qg(this),e),mo(yC.get(this))}:function(...e){return mo(t.apply(qg(this),e))}}function WD(t){return typeof t=="function"?YD(t):(t instanceof IDBTransaction&&$D(t),HD(t,GD())?new Proxy(t,ay):t)}function mo(t){if(t instanceof IDBRequest)return KD(t);if(Fg.has(t))return Fg.get(t);const e=WD(t);return e!==t&&(Fg.set(t,e),cv.set(e,t)),e}const qg=t=>cv.get(t);function QD(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),c=mo(l);return i&&l.addEventListener("upgradeneeded",d=>{i(mo(l.result),d.oldVersion,d.newVersion,mo(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const XD=["get","getKey","getAll","getAllKeys","count"],ZD=["put","add","delete","clear"],Bg=new Map;function mS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bg.get(e))return Bg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=ZD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||XD.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,s?"readwrite":"readonly");let h=d.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&d.done]))[0]};return Bg.set(e,a),a}JD(t=>({...t,get:(e,n,i)=>mS(e,n)||t.get(e,n,i),has:(e,n)=>!!mS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(t2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function t2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ly="@firebase/app",gS="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new uv("@firebase/app"),n2="@firebase/app-compat",i2="@firebase/analytics-compat",r2="@firebase/analytics",s2="@firebase/app-check-compat",o2="@firebase/app-check",a2="@firebase/auth",l2="@firebase/auth-compat",u2="@firebase/database",c2="@firebase/data-connect",f2="@firebase/database-compat",d2="@firebase/functions",h2="@firebase/functions-compat",p2="@firebase/installations",m2="@firebase/installations-compat",g2="@firebase/messaging",y2="@firebase/messaging-compat",v2="@firebase/performance",_2="@firebase/performance-compat",E2="@firebase/remote-config",T2="@firebase/remote-config-compat",S2="@firebase/storage",b2="@firebase/storage-compat",A2="@firebase/firestore",w2="@firebase/ai",C2="@firebase/firestore-compat",I2="firebase",x2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="[DEFAULT]",R2={[ly]:"fire-core",[n2]:"fire-core-compat",[r2]:"fire-analytics",[i2]:"fire-analytics-compat",[o2]:"fire-app-check",[s2]:"fire-app-check-compat",[a2]:"fire-auth",[l2]:"fire-auth-compat",[u2]:"fire-rtdb",[c2]:"fire-data-connect",[f2]:"fire-rtdb-compat",[d2]:"fire-fn",[h2]:"fire-fn-compat",[p2]:"fire-iid",[m2]:"fire-iid-compat",[g2]:"fire-fcm",[y2]:"fire-fcm-compat",[v2]:"fire-perf",[_2]:"fire-perf-compat",[E2]:"fire-rc",[T2]:"fire-rc-compat",[S2]:"fire-gcs",[b2]:"fire-gcs-compat",[A2]:"fire-fst",[C2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[I2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,N2=new Map,cy=new Map;function yS(t,e){try{t.container.addComponent(e)}catch(n){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ya(t){const e=t.name;if(cy.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;cy.set(e,t);for(const n of _h.values())yS(n,t);for(const n of N2.values())yS(n,t);return!0}function np(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Si(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},go=new Hc("app","Firebase",D2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw go.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=x2;function _C(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:uy,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw go.create("bad-app-name",{appName:String(s)});if(n||(n=pC()),!n)throw go.create("no-options");const a=_h.get(s);if(a){if(ga(n,a.options)&&ga(i,a.config))return a;throw go.create("duplicate-app",{appName:s})}const l=new UD(s);for(const d of cy.values())l.addComponent(d);const c=new M2(n,i,l);return _h.set(s,c),c}function fv(t=uy){const e=_h.get(t);if(!e&&t===uy&&pC())return _C();if(!e)throw go.create("no-app",{appName:t});return e}function Lr(t,e,n){var i;let s=(i=R2[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(c.join(" "));return}ya(new Eo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="firebase-heartbeat-database",P2=1,Dc="firebase-heartbeat-store";let zg=null;function EC(){return zg||(zg=QD(k2,P2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(t=>{throw go.create("idb-open",{originalErrorMessage:t.message})})),zg}async function V2(t){try{const n=(await EC()).transaction(Dc),i=await n.objectStore(Dc).get(TC(t));return await n.done,i}catch(e){if(e instanceof Hr)ys.warn(e.message);else{const n=go.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(n.message)}}}async function vS(t,e){try{const i=(await EC()).transaction(Dc,"readwrite");await i.objectStore(Dc).put(e,TC(t)),await i.done}catch(n){if(n instanceof Hr)ys.warn(n.message);else{const i=go.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ys.warn(i.message)}}}function TC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=1024,O2=30;class U2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=_S();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>O2){const l=B2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ys.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_S(),{heartbeatsToSend:i,unsentEntries:s}=F2(this._heartbeatsCache.heartbeats),a=vh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ys.warn(n),""}}}function _S(){return new Date().toISOString().substring(0,10)}function F2(t,e=L2){const n=[];let i=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),ES(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ES(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class q2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CD()?ID().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await V2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return vS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return vS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ES(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}function B2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){ya(new Eo("platform-logger",e=>new e2(e),"PRIVATE")),ya(new Eo("heartbeat",e=>new U2(e),"PRIVATE")),Lr(ly,gS,t),Lr(ly,gS,"esm2017"),Lr("fire-js","")}z2("");function dv(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function SC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H2=SC,bC=new Hc("auth","Firebase",SC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new uv("@firebase/auth");function G2(t,...e){Eh.logLevel<=tt.WARN&&Eh.warn(`Auth (${Aa}): ${t}`,...e)}function Zd(t,...e){Eh.logLevel<=tt.ERROR&&Eh.error(`Auth (${Aa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,...e){throw pv(t,...e)}function Tr(t,...e){return pv(t,...e)}function hv(t,e,n){const i=Object.assign(Object.assign({},H2()),{[e]:n});return new Hc("auth","Firebase",i).create(e,{appName:t.name})}function gs(t){return hv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j2(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&lr(t,"argument-error"),hv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return bC.create(t,...e)}function Ve(t,e,...n){if(!t)throw pv(e,...n)}function ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zd(e),new Error(e)}function vs(t,e){t||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function K2(){return TS()==="http:"||TS()==="https:"}function TS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K2()||SD()||"connection"in navigator)?navigator.onLine:!0}function J2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,vs(n>e,"Short delay should be less than long delay!"),this.isMobile=_D()||bD()}get(){return $2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t,e){vs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Q2=new jc(3e4,6e4);function Ro(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function No(t,e,n,i,s={}){return wC(t,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=Gc(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return TD()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&xo(t.emulatorConfig.host)&&(h.credentials="include"),AC.fetch()(await CC(t,t.config.apiHost,n,c),h)})}async function wC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Y2),e);try{const s=new Z2(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw xd(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw xd(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw xd(t,"user-disabled",l);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw hv(t,y,h);lr(t,y)}}catch(s){if(s instanceof Hr)throw s;lr(t,"network-request-failed",{message:String(s)})}}async function Kc(t,e,n,i,s={}){const a=await No(t,e,n,i,s);return"mfaPendingCredential"in a&&lr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function CC(t,e,n,i){const s=`${e}${n}?${i}`,a=t,l=a.config.emulator?mv(t.config,s):`${t.config.apiScheme}://${s}`;return W2.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function X2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Tr(this.auth,"network-request-failed")),Q2.get())})}}function xd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Tr(t,e,i);return s.customData._tokenResponse=n,s}function SS(t){return t!==void 0&&t.enterprise!==void 0}class eM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return X2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tM(t,e){return No(t,"GET","/v2/recaptchaConfig",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t,e){return No(t,"POST","/v1/accounts:delete",e)}async function Th(t,e){return No(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iM(t,e=!1){const n=Ht(t),i=await n.getIdToken(e),s=gv(i);Ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:pc(Hg(s.auth_time)),issuedAtTime:pc(Hg(s.iat)),expirationTime:pc(Hg(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Hg(t){return Number(t)*1e3}function gv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Zd("JWT malformed, contained fewer than 3 sections"),null;try{const s=fC(n);return s?JSON.parse(s):(Zd("Failed to decode base64 JWT payload"),null)}catch(s){return Zd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function bS(t){const e=gv(t);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Hr&&rM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function rM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Mc(t,Th(n,{idToken:i}));Ve(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?IC(a.providerUserInfo):[],c=aM(t.providerData,l),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),y=d?h:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new dy(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(t,E)}async function oM(t){const e=Ht(t);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aM(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function IC(t){return t.map(e=>{var{providerId:n}=e,i=dv(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e){const n=await wC(t,{},async()=>{const i=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=await CC(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:i};return t.emulatorConfig&&xo(t.emulatorConfig.host)&&(d.credentials="include"),AC.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uM(t,e){return No(t,"POST","/v2/accounts:revokeToken",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const n=bS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:a}=await lM(e,n);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:a}=n,l=new bl;return i&&(Ve(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(Ve(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Ve(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,e){Ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,a=dv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new dy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iM(this,e)}reload(){return oM(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Mc(this,nM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,a,l,c,d,h,y;const E=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,D=(l=n.photoURL)!==null&&l!==void 0?l:void 0,V=(c=n.tenantId)!==null&&c!==void 0?c:void 0,L=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,H=(h=n.createdAt)!==null&&h!==void 0?h:void 0,F=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:q,emailVerified:$,isAnonymous:Z,providerData:G,stsTokenManager:I}=n;Ve(q&&I,e,"internal-error");const x=bl.fromJSON(this.name,I);Ve(typeof q=="string",e,"internal-error"),ro(E,e.name),ro(T,e.name),Ve(typeof $=="boolean",e,"internal-error"),Ve(typeof Z=="boolean",e,"internal-error"),ro(w,e.name),ro(D,e.name),ro(V,e.name),ro(L,e.name),ro(H,e.name),ro(F,e.name);const R=new vr({uid:q,auth:e,email:T,emailVerified:$,displayName:E,isAnonymous:Z,photoURL:D,phoneNumber:w,tenantId:V,stsTokenManager:x,createdAt:H,lastLoginAt:F});return G&&Array.isArray(G)&&(R.providerData=G.map(P=>Object.assign({},P))),L&&(R._redirectEventId=L),R}static async _fromIdTokenResponse(e,n,i=!1){const s=new bl;s.updateFromServerResponse(n);const a=new vr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Sh(a),a}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Ve(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?IC(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new bl;c.updateFromIdToken(i);const d=new vr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new Map;function ms(t){vs(t instanceof Function,"Expected a class definition");let e=AS.get(t);return e?(vs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xC.type="NONE";const wS=xC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t,e,n){return`firebase:${t}:${e}:${n}`}class Al{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=eh(this.userKey,s.apiKey,a),this.fullPersistenceKey=eh("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Th(this.auth,{idToken:e}).catch(()=>{});return n?vr._fromGetAccountInfoResponse(this.auth,n,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Al(ms(wS),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||ms(wS);const l=eh(i,e.config.apiKey,e.name);let c=null;for(const h of n)try{const y=await h._get(l);if(y){let E;if(typeof y=="string"){const T=await Th(e,{idToken:y}).catch(()=>{});if(!T)break;E=await vr._fromGetAccountInfoResponse(e,T,y)}else E=vr._fromJSON(e,y);h!==a&&(c=E),a=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Al(a,e,i):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new Al(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PC(e))return"Blackberry";if(VC(e))return"Webos";if(NC(e))return"Safari";if((e.includes("chrome/")||DC(e))&&!e.includes("edge/"))return"Chrome";if(kC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function RC(t=Qn()){return/firefox\//i.test(t)}function NC(t=Qn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DC(t=Qn()){return/crios\//i.test(t)}function MC(t=Qn()){return/iemobile/i.test(t)}function kC(t=Qn()){return/android/i.test(t)}function PC(t=Qn()){return/blackberry/i.test(t)}function VC(t=Qn()){return/webos/i.test(t)}function yv(t=Qn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cM(t=Qn()){var e;return yv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fM(){return AD()&&document.documentMode===10}function LC(t=Qn()){return yv(t)||kC(t)||VC(t)||PC(t)||/windows phone/i.test(t)||MC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t,e=[]){let n;switch(t){case"Browser":n=CS(Qn());break;case"Worker":n=`${CS(Qn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Aa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(t,e={}){return No(t,"GET","/v2/passwordPolicy",Ro(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=6;class mM{constructor(e){var n,i,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:pM,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IS(this),this.idTokenSubscription=new IS(this),this.beforeStateQueue=new dM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ms(n)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Al.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Th(this,{idToken:e}),i=await vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Si(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(gs(this));const n=e?Ht(e):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hM(this),n=new mM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await uM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ms(e)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await Al.create(this,[ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&G2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Do(t){return Ht(t)}class IS{constructor(e){this.auth=e,this.observer=null,this.addObserver=MD(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yM(t){ip=t}function UC(t){return ip.loadJS(t)}function vM(){return ip.recaptchaEnterpriseScript}function _M(){return ip.gapiScript}function EM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class TM{constructor(){this.enterprise=new SM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const bM="recaptcha-enterprise",FC="NO_RECAPTCHA";class AM{constructor(e){this.type=bM,this.auth=Do(e)}async verify(e="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{tM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new eM(d);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(d=>{c(d)})})}function s(a,l,c){const d=window.grecaptcha;SS(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(FC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TM().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!n&&SS(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=vM();d.length!==0&&(d+=c),UC(d).then(()=>{s(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function xS(t,e,n,i=!1,s=!1){const a=new AM(t);let l;if(s)l=FC;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function hy(t,e,n,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await xS(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await xS(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t,e){const n=np(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(ga(a,e??{}))return s;lr(s,"already-initialized")}return n.initialize({options:e})}function CM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ms);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function IM(t,e,n){const i=Do(t);Ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=qC(e),{host:l,port:c}=xM(e),d=c===null?"":`:${c}`,h={url:`${a}//${l}${d}/`},y=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ve(ga(h,i.config.emulator)&&ga(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,xo(l)?(av(`${a}//${l}${d}`),lv("Auth",!0)):RM()}function qC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xM(t){const e=qC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:RS(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:RS(l)}}}function RS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function NM(t,e){return No(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t,e){return Kc(t,"POST","/v1/accounts:signInWithPassword",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",Ro(t,e))}async function kM(t,e){return Kc(t,"POST","/v1/accounts:signInWithEmailLink",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends vv{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new kc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new kc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hy(e,n,"signInWithPassword",DM);case"emailLink":return MM(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hy(e,i,"signUpPassword",NM);case"emailLink":return kM(e,{idToken:n,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e){return Kc(t,"POST","/v1/accounts:signInWithIdp",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="http://localhost";class va extends vv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,a=dv(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new va(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return wl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,wl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wl(e,n)}buildRequest(){const e={requestUri:PM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LM(t){const e=nc(ic(t)).link,n=e?nc(ic(e)).deep_link_id:null,i=nc(ic(t)).deep_link_id;return(i?nc(ic(i)).link:null)||i||n||e||t}class _v{constructor(e){var n,i,s,a,l,c;const d=nc(ic(e)),h=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(i=d.oobCode)!==null&&i!==void 0?i:null,E=VM((s=d.mode)!==null&&s!==void 0?s:null);Ve(h&&y&&E,"argument-error"),this.apiKey=h,this.operation=E,this.code=y,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=LM(e);try{return new _v(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.providerId=Hl.PROVIDER_ID}static credential(e,n){return kc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=_v.parseLink(n);return Ve(i,"argument-error"),kc._fromEmailAndCode(e,i.code,i.tenantId)}}Hl.PROVIDER_ID="password";Hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Ev{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends $c{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return va._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return hs.credential(n,i)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends $c{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends $c{constructor(){super("twitter.com")}static credential(e,n){return va._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ao.credential(n,i)}catch{return null}}}ao.TWITTER_SIGN_IN_METHOD="twitter.com";ao.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e){return Kc(t,"POST","/v1/accounts:signUp",Ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const a=await vr._fromIdTokenResponse(e,i,s),l=NS(i);return new _a({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=NS(i);return new _a({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function NS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends Hr{constructor(e,n,i,s){var a;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new bh(e,n,i,s)}}function BC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(t,a,e,i):a})}async function UM(t,e,n=!1){const i=await Mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _a._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e,n=!1){const{auth:i}=t;if(Si(i.app))return Promise.reject(gs(i));const s="reauthenticate";try{const a=await Mc(t,BC(i,s,e,t),n);Ve(a.idToken,i,"internal-error");const l=gv(a.idToken);Ve(l,i,"internal-error");const{sub:c}=l;return Ve(t.uid===c,i,"user-mismatch"),_a._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&lr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(t,e,n=!1){if(Si(t.app))return Promise.reject(gs(t));const i="signIn",s=await BC(t,i,e),a=await _a._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(a.user),a}async function qM(t,e){return zC(Do(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t){const e=Do(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BM(t,e,n){if(Si(t.app))return Promise.reject(gs(t));const i=Do(t),l=await hy(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OM).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&HC(t),d}),c=await _a._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function zM(t,e,n){return Si(t.app)?Promise.reject(gs(t)):qM(Ht(t),Hl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&HC(t),i})}function HM(t,e,n,i){return Ht(t).onIdTokenChanged(e,n,i)}function GM(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}function jM(t,e,n,i){return Ht(t).onAuthStateChanged(e,n,i)}function KM(t){return Ht(t).signOut()}const Ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=1e3,JM=10;class jC extends GC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);fM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JM):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},$M)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jC.type="LOCAL";const YM=jC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC extends GC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KC.type="SESSION";const $C=KC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new rp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,a)),d=await WM(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const h=Tv("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(T.data.response);break;default:clearTimeout(y),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function XM(t){Or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function ZM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ek(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tk(){return JC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="firebaseLocalStorageDb",nk=1,wh="firebaseLocalStorage",WC="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sp(t,e){return t.transaction([wh],e?"readwrite":"readonly").objectStore(wh)}function ik(){const t=indexedDB.deleteDatabase(YC);return new Jc(t).toPromise()}function py(){const t=indexedDB.open(YC,nk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(wh,{keyPath:WC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(wh)?e(i):(i.close(),await ik(),e(await py()))})})}async function DS(t,e,n){const i=sp(t,!0).put({[WC]:e,value:n});return new Jc(i).toPromise()}async function rk(t,e){const n=sp(t,!1).get(e),i=await new Jc(n).toPromise();return i===void 0?null:i.value}function MS(t,e){const n=sp(t,!0).delete(e);return new Jc(n).toPromise()}const sk=800,ok=3;class QC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await py(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ok)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rp._getInstance(tk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ZM(),!this.activeServiceWorker)return;this.sender=new QM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ek()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await py();return await DS(e,Ah,"1"),await MS(e,Ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>DS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>rk(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>MS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=sp(s,!1).getAll();return new Jc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QC.type="LOCAL";const ak=QC;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t,e){return e?ms(e):(Ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv extends vv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lk(t){return zC(t.auth,new Sv(t),t.bypassAuthState)}function uk(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),FM(n,new Sv(t),t.bypassAuthState)}async function ck(t){const{auth:e,user:n}=t;return Ve(n,e,"internal-error"),UM(n,new Sv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lk;case"linkViaPopup":case"linkViaRedirect":return ck;case"reauthViaPopup":case"reauthViaRedirect":return uk;default:lr(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new jc(2e3,1e4);async function dk(t,e,n){if(Si(t.app))return Promise.reject(Tr(t,"operation-not-supported-in-this-environment"));const i=Do(t);j2(t,e,Ev);const s=XC(i,n);return new la(i,"signInViaPopup",e,s).executeNotNull()}class la extends ZC{constructor(e,n,i,s,a){super(e,n,s,a),this.provider=i,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=Tv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fk.get())};e()}}la.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="pendingRedirect",th=new Map;class pk extends ZC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const i=await mk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mk(t,e){const n=vk(e),i=yk(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function gk(t,e){th.set(t._key(),e)}function yk(t){return ms(t._redirectPersistence)}function vk(t){return eh(hk,t.config.apiKey,t.name)}async function _k(t,e,n=!1){if(Si(t.app))return Promise.reject(gs(t));const i=Do(t),s=XC(i,e),l=await new pk(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=600*1e3;class Tk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!eI(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Tr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ek&&this.cachedEventUids.clear(),this.cachedEventUids.has(kS(e))}saveEventToCache(e){this.cachedEventUids.add(kS(e)),this.lastProcessedEventTime=Date.now()}}function kS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Sk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e={}){return No(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wk=/^https?/;async function Ck(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bk(t);for(const n of e)try{if(Ik(n))return}catch{}lr(t,"unauthorized-domain")}function Ik(t){const e=fy(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!wk.test(n))return!1;if(Ak.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=new jc(3e4,6e4);function PS(){const t=Or().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Rk(t){return new Promise((e,n)=>{var i,s,a;function l(){PS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PS(),n(Tr(t,"network-request-failed"))},timeout:xk.get()})}if(!((s=(i=Or().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Or().gapi)===null||a===void 0)&&a.load)l();else{const c=EM("iframefcb");return Or()[c]=()=>{gapi.load?l():n(Tr(t,"network-request-failed"))},UC(`${_M()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw nh=null,e})}let nh=null;function Nk(t){return nh=nh||Rk(t),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new jc(5e3,15e3),Mk="__/auth/iframe",kk="emulator/auth/iframe",Pk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lk(t){const e=t.config;Ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mv(e,kk):`https://${t.config.authDomain}/${Mk}`,i={apiKey:e.apiKey,appName:t.name,v:Aa},s=Vk.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Gc(i).slice(1)}`}async function Ok(t){const e=await Nk(t),n=Or().gapi;return Ve(n,t,"internal-error"),e.open({where:document.body,url:Lk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pk,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=Tr(t,"network-request-failed"),c=Or().setTimeout(()=>{a(l)},Dk.get());function d(){Or().clearTimeout(c),s(i)}i.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Fk=500,qk=600,Bk="_blank",zk="http://localhost";class VS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hk(t,e,n,i=Fk,s=qk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const d=Object.assign(Object.assign({},Uk),{width:i.toString(),height:s.toString(),top:a,left:l}),h=Qn().toLowerCase();n&&(c=DC(h)?Bk:n),RC(h)&&(e=e||zk,d.scrollbars="yes");const y=Object.entries(d).reduce((T,[w,D])=>`${T}${w}=${D},`,"");if(cM(h)&&c!=="_self")return Gk(e||"",c),new VS(null);const E=window.open(e||"",c,y);Ve(E,t,"popup-blocked");try{E.focus()}catch{}return new VS(E)}function Gk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="__/auth/handler",Kk="emulator/auth/handler",$k=encodeURIComponent("fac");async function LS(t,e,n,i,s,a){Ve(t.config.authDomain,t,"auth-domain-config-required"),Ve(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Aa,eventId:s};if(e instanceof Ev){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",DD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))l[y]=E}if(e instanceof $c){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const d=await t._getAppCheckToken(),h=d?`#${$k}=${encodeURIComponent(d)}`:"";return`${Jk(t)}?${Gc(c).slice(1)}${h}`}function Jk({config:t}){return t.emulator?mv(t,Kk):`https://${t.authDomain}/${jk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="webStorageSupport";class Yk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$C,this._completeRedirectFn=_k,this._overrideRedirectResult=gk}async _openPopup(e,n,i,s){var a;vs((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await LS(e,n,i,fy(),s);return Hk(e,l,Tv())}async _openRedirect(e,n,i,s){await this._originValidation(e);const a=await LS(e,n,i,fy(),s);return XM(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(vs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Ok(e),i=new Tk(e);return n.register("authEvent",s=>(Ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gg,{type:Gg},s=>{var a;const l=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Gg];l!==void 0&&n(!!l),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ck(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return LC()||NC()||yv()}}const Wk=Yk;var OS="@firebase/auth",US="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zk(t){ya(new Eo("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Ve(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OC(t)},h=new gM(i,s,a,d);return CM(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ya(new Eo("auth-internal",e=>{const n=Do(e.getProvider("auth").getImmediate());return(i=>new Qk(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(OS,US,Xk(t)),Lr(OS,US,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=300,tP=mC("authIdTokenMaxAge")||eP;let FS=null;const nP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>tP)return;const s=n==null?void 0:n.token;FS!==s&&(FS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iP(t=fv()){const e=np(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wM(t,{popupRedirectResolver:Wk,persistence:[ak,YM,$C]}),i=mC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=nP(a.toString());GM(n,l,()=>l(n.currentUser)),HM(n,c=>l(c))}}const s=dC("auth");return s&&IM(n,`http://${s}`),n}function rP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Tr("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",rP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zk("Browser");var sP="firebase",oP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(sP,oP,"app");var qS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yo,tI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function R(){}R.prototype=x.prototype,I.D=x.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(P,M,O){for(var U=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)U[Ie-2]=arguments[Ie];return x.prototype[M].apply(P,U)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,x,R){R||(R=0);var P=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)P[M]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(M=0;16>M;++M)P[M]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=I.g[0],R=I.g[1],M=I.g[2];var O=I.g[3],U=x+(O^R&(M^O))+P[0]+3614090360&4294967295;x=R+(U<<7&4294967295|U>>>25),U=O+(M^x&(R^M))+P[1]+3905402710&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(R^O&(x^R))+P[2]+606105819&4294967295,M=O+(U<<17&4294967295|U>>>15),U=R+(x^M&(O^x))+P[3]+3250441966&4294967295,R=M+(U<<22&4294967295|U>>>10),U=x+(O^R&(M^O))+P[4]+4118548399&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(M^x&(R^M))+P[5]+1200080426&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(R^O&(x^R))+P[6]+2821735955&4294967295,M=O+(U<<17&4294967295|U>>>15),U=R+(x^M&(O^x))+P[7]+4249261313&4294967295,R=M+(U<<22&4294967295|U>>>10),U=x+(O^R&(M^O))+P[8]+1770035416&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(M^x&(R^M))+P[9]+2336552879&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(R^O&(x^R))+P[10]+4294925233&4294967295,M=O+(U<<17&4294967295|U>>>15),U=R+(x^M&(O^x))+P[11]+2304563134&4294967295,R=M+(U<<22&4294967295|U>>>10),U=x+(O^R&(M^O))+P[12]+1804603682&4294967295,x=R+(U<<7&4294967295|U>>>25),U=O+(M^x&(R^M))+P[13]+4254626195&4294967295,O=x+(U<<12&4294967295|U>>>20),U=M+(R^O&(x^R))+P[14]+2792965006&4294967295,M=O+(U<<17&4294967295|U>>>15),U=R+(x^M&(O^x))+P[15]+1236535329&4294967295,R=M+(U<<22&4294967295|U>>>10),U=x+(M^O&(R^M))+P[1]+4129170786&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^M&(x^R))+P[6]+3225465664&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^R&(O^x))+P[11]+643717713&4294967295,M=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(M^O))+P[0]+3921069994&4294967295,R=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(R^M))+P[5]+3593408605&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^M&(x^R))+P[10]+38016083&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^R&(O^x))+P[15]+3634488961&4294967295,M=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(M^O))+P[4]+3889429448&4294967295,R=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(R^M))+P[9]+568446438&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^M&(x^R))+P[14]+3275163606&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^R&(O^x))+P[3]+4107603335&4294967295,M=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(M^O))+P[8]+1163531501&4294967295,R=M+(U<<20&4294967295|U>>>12),U=x+(M^O&(R^M))+P[13]+2850285829&4294967295,x=R+(U<<5&4294967295|U>>>27),U=O+(R^M&(x^R))+P[2]+4243563512&4294967295,O=x+(U<<9&4294967295|U>>>23),U=M+(x^R&(O^x))+P[7]+1735328473&4294967295,M=O+(U<<14&4294967295|U>>>18),U=R+(O^x&(M^O))+P[12]+2368359562&4294967295,R=M+(U<<20&4294967295|U>>>12),U=x+(R^M^O)+P[5]+4294588738&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^M)+P[8]+2272392833&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^R)+P[11]+1839030562&4294967295,M=O+(U<<16&4294967295|U>>>16),U=R+(M^O^x)+P[14]+4259657740&4294967295,R=M+(U<<23&4294967295|U>>>9),U=x+(R^M^O)+P[1]+2763975236&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^M)+P[4]+1272893353&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^R)+P[7]+4139469664&4294967295,M=O+(U<<16&4294967295|U>>>16),U=R+(M^O^x)+P[10]+3200236656&4294967295,R=M+(U<<23&4294967295|U>>>9),U=x+(R^M^O)+P[13]+681279174&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^M)+P[0]+3936430074&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^R)+P[3]+3572445317&4294967295,M=O+(U<<16&4294967295|U>>>16),U=R+(M^O^x)+P[6]+76029189&4294967295,R=M+(U<<23&4294967295|U>>>9),U=x+(R^M^O)+P[9]+3654602809&4294967295,x=R+(U<<4&4294967295|U>>>28),U=O+(x^R^M)+P[12]+3873151461&4294967295,O=x+(U<<11&4294967295|U>>>21),U=M+(O^x^R)+P[15]+530742520&4294967295,M=O+(U<<16&4294967295|U>>>16),U=R+(M^O^x)+P[2]+3299628645&4294967295,R=M+(U<<23&4294967295|U>>>9),U=x+(M^(R|~O))+P[0]+4096336452&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~M))+P[7]+1126891415&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~R))+P[14]+2878612391&4294967295,M=O+(U<<15&4294967295|U>>>17),U=R+(O^(M|~x))+P[5]+4237533241&4294967295,R=M+(U<<21&4294967295|U>>>11),U=x+(M^(R|~O))+P[12]+1700485571&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~M))+P[3]+2399980690&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~R))+P[10]+4293915773&4294967295,M=O+(U<<15&4294967295|U>>>17),U=R+(O^(M|~x))+P[1]+2240044497&4294967295,R=M+(U<<21&4294967295|U>>>11),U=x+(M^(R|~O))+P[8]+1873313359&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~M))+P[15]+4264355552&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~R))+P[6]+2734768916&4294967295,M=O+(U<<15&4294967295|U>>>17),U=R+(O^(M|~x))+P[13]+1309151649&4294967295,R=M+(U<<21&4294967295|U>>>11),U=x+(M^(R|~O))+P[4]+4149444226&4294967295,x=R+(U<<6&4294967295|U>>>26),U=O+(R^(x|~M))+P[11]+3174756917&4294967295,O=x+(U<<10&4294967295|U>>>22),U=M+(x^(O|~R))+P[2]+718787259&4294967295,M=O+(U<<15&4294967295|U>>>17),U=R+(O^(M|~x))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(M+(U<<21&4294967295|U>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+O&4294967295}i.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var R=x-this.blockSize,P=this.B,M=this.h,O=0;O<x;){if(M==0)for(;O<=R;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<x;)if(P[M++]=I.charCodeAt(O++),M==this.blockSize){s(this,P),M=0;break}}else for(;O<x;)if(P[M++]=I[O++],M==this.blockSize){s(this,P),M=0;break}}this.h=M,this.o+=x},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var R=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=R&255,R/=256;for(this.u(I),I=Array(16),x=R=0;4>x;++x)for(var P=0;32>P;P+=8)I[R++]=this.g[x]>>>P&255;return I};function a(I,x){var R=c;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=x(I)}function l(I,x){this.h=x;for(var R=[],P=!0,M=I.length-1;0<=M;M--){var O=I[M]|0;P&&O==x||(R[M]=O,P=!1)}this.g=R}var c={};function d(I){return-128<=I&&128>I?a(I,function(x){return new l([x|0],0>x?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return L(h(-I));for(var x=[],R=1,P=0;I>=R;P++)x[P]=I/R|0,R*=4294967296;return new l(x,0)}function y(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return L(y(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(x,8)),P=E,M=0;M<I.length;M+=8){var O=Math.min(8,I.length-M),U=parseInt(I.substring(M,M+O),x);8>O?(O=h(Math.pow(x,O)),P=P.j(O).add(h(U))):(P=P.j(R),P=P.add(h(U)))}return P}var E=d(0),T=d(1),w=d(16777216);t=l.prototype,t.m=function(){if(V(this))return-L(this).m();for(var I=0,x=1,R=0;R<this.g.length;R++){var P=this.i(R);I+=(0<=P?P:4294967296+P)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(V(this))return"-"+L(this).toString(I);for(var x=h(Math.pow(I,6)),R=this,P="";;){var M=$(R,x).g;R=H(R,M.j(x));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=M,D(R))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function V(I){return I.h==-1}t.l=function(I){return I=H(this,I),V(I)?-1:D(I)?0:1};function L(I){for(var x=I.g.length,R=[],P=0;P<x;P++)R[P]=~I.g[P];return new l(R,~I.h).add(T)}t.abs=function(){return V(this)?L(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],P=0,M=0;M<=x;M++){var O=P+(this.i(M)&65535)+(I.i(M)&65535),U=(O>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);P=U>>>16,O&=65535,U&=65535,R[M]=U<<16|O}return new l(R,R[R.length-1]&-2147483648?-1:0)};function H(I,x){return I.add(L(x))}t.j=function(I){if(D(this)||D(I))return E;if(V(this))return V(I)?L(this).j(L(I)):L(L(this).j(I));if(V(I))return L(this.j(L(I)));if(0>this.l(w)&&0>I.l(w))return h(this.m()*I.m());for(var x=this.g.length+I.g.length,R=[],P=0;P<2*x;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<I.g.length;M++){var O=this.i(P)>>>16,U=this.i(P)&65535,Ie=I.i(M)>>>16,_e=I.i(M)&65535;R[2*P+2*M]+=U*_e,F(R,2*P+2*M),R[2*P+2*M+1]+=O*_e,F(R,2*P+2*M+1),R[2*P+2*M+1]+=U*Ie,F(R,2*P+2*M+1),R[2*P+2*M+2]+=O*Ie,F(R,2*P+2*M+2)}for(P=0;P<x;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=x;P<2*x;P++)R[P]=0;return new l(R,0)};function F(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function q(I,x){this.g=I,this.h=x}function $(I,x){if(D(x))throw Error("division by zero");if(D(I))return new q(E,E);if(V(I))return x=$(L(I),x),new q(L(x.g),L(x.h));if(V(x))return x=$(I,L(x)),new q(L(x.g),x.h);if(30<I.g.length){if(V(I)||V(x))throw Error("slowDivide_ only works with positive integers.");for(var R=T,P=x;0>=P.l(I);)R=Z(R),P=Z(P);var M=G(R,1),O=G(P,1);for(P=G(P,2),R=G(R,2);!D(P);){var U=O.add(P);0>=U.l(I)&&(M=M.add(R),O=U),P=G(P,1),R=G(R,1)}return x=H(I,M.j(x)),new q(M,x)}for(M=E;0<=I.l(x);){for(R=Math.max(1,Math.floor(I.m()/x.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=h(R),U=O.j(x);V(U)||0<U.l(I);)R-=P,O=h(R),U=O.j(x);D(O)&&(O=T),M=M.add(O),I=H(I,U)}return new q(M,I)}t.A=function(I){return $(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],P=0;P<x;P++)R[P]=this.i(P)&I.i(P);return new l(R,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],P=0;P<x;P++)R[P]=this.i(P)|I.i(P);return new l(R,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),R=[],P=0;P<x;P++)R[P]=this.i(P)^I.i(P);return new l(R,this.h^I.h)};function Z(I){for(var x=I.g.length+1,R=[],P=0;P<x;P++)R[P]=I.i(P)<<1|I.i(P-1)>>>31;return new l(R,I.h)}function G(I,x){var R=x>>5;x%=32;for(var P=I.g.length-R,M=[],O=0;O<P;O++)M[O]=0<x?I.i(O+R)>>>x|I.i(O+R+1)<<32-x:I.i(O+R);return new l(M,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tI=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=y,yo=l}).apply(typeof qS<"u"?qS:typeof self<"u"?self:typeof window<"u"?window:{});var Rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nI,rc,iI,ih,my,rI,sI,oI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,S,C){return m==Array.prototype||m==Object.prototype||(m[S]=C.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rd=="object"&&Rd];for(var S=0;S<m.length;++S){var C=m[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function s(m,S){if(S)e:{var C=i;m=m.split(".");for(var k=0;k<m.length-1;k++){var Y=m[k];if(!(Y in C))break e;C=C[Y]}m=m[m.length-1],k=C[m],S=S(k),S!=k&&S!=null&&e(C,m,{configurable:!0,writable:!0,value:S})}}function a(m,S){m instanceof String&&(m+="");var C=0,k=!1,Y={next:function(){if(!k&&C<m.length){var ie=C++;return{value:S(ie,m[ie]),done:!1}}return k=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(m){return m||function(){return a(this,function(S,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var S=typeof m;return S=S!="object"?S:m?Array.isArray(m)?"array":S:"null",S=="array"||S=="object"&&typeof m.length=="number"}function h(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function y(m,S,C){return m.call.apply(m.bind,arguments)}function E(m,S,C){if(!m)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,k),m.apply(S,Y)}}return function(){return m.apply(S,arguments)}}function T(m,S,C){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:E,T.apply(null,arguments)}function w(m,S){var C=Array.prototype.slice.call(arguments,1);return function(){var k=C.slice();return k.push.apply(k,arguments),m.apply(this,k)}}function D(m,S){function C(){}C.prototype=S.prototype,m.aa=S.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(k,Y,ie){for(var pe=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)pe[vt-2]=arguments[vt];return S.prototype[Y].apply(k,pe)}}function V(m){const S=m.length;if(0<S){const C=Array(S);for(let k=0;k<S;k++)C[k]=m[k];return C}return[]}function L(m,S){for(let C=1;C<arguments.length;C++){const k=arguments[C];if(d(k)){const Y=m.length||0,ie=k.length||0;m.length=Y+ie;for(let pe=0;pe<ie;pe++)m[Y+pe]=k[pe]}else m.push(k)}}class H{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(m){return/^[\s\xa0]*$/.test(m)}function q(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function $(m){return $[" "](m),m}$[" "]=function(){};var Z=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function G(m,S,C){for(const k in m)S.call(C,m[k],k,m)}function I(m,S){for(const C in m)S.call(void 0,m[C],C,m)}function x(m){const S={};for(const C in m)S[C]=m[C];return S}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,S){let C,k;for(let Y=1;Y<arguments.length;Y++){k=arguments[Y];for(C in k)m[C]=k[C];for(let ie=0;ie<R.length;ie++)C=R[ie],Object.prototype.hasOwnProperty.call(k,C)&&(m[C]=k[C])}}function M(m){var S=1;m=m.split(":");const C=[];for(;0<S&&m.length;)C.push(m.shift()),S--;return m.length&&C.push(m.join(":")),C}function O(m){c.setTimeout(()=>{throw m},0)}function U(){var m=xe;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class Ie{constructor(){this.h=this.g=null}add(S,C){const k=_e.get();k.set(S,C),this.h?this.h.next=k:this.g=k,this.h=k}}var _e=new H(()=>new te,m=>m.reset());class te{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ge=!1,xe=new Ie,Me=()=>{const m=c.Promise.resolve(void 0);ce=()=>{m.then(z)}};var z=()=>{for(var m;m=U();){try{m.h.call(m.g)}catch(C){O(C)}var S=_e;S.j(m),100>S.h&&(S.h++,m.next=S.g,S.g=m)}ge=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var me=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};c.addEventListener("test",C,S),c.removeEventListener("test",C,S)}catch{}return m})();function de(m,S){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,k=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget){if(Z){e:{try{$(S.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(S=null)}}else C=="mouseover"?S=m.fromElement:C=="mouseout"&&(S=m.toElement);this.relatedTarget=S,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Oe[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&de.aa.h.call(this)}}D(de,fe);var Oe={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),jt=0;function gt(m,S,C,k,Y){this.listener=m,this.proxy=null,this.src=S,this.type=C,this.capture=!!k,this.ha=Y,this.key=++jt,this.da=this.fa=!1}function Fn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Xn(m){this.src=m,this.g={},this.h=0}Xn.prototype.add=function(m,S,C,k,Y){var ie=m.toString();m=this.g[ie],m||(m=this.g[ie]=[],this.h++);var pe=Zn(m,S,k,Y);return-1<pe?(S=m[pe],C||(S.fa=!1)):(S=new gt(S,this.src,ie,!!k,Y),S.fa=C,m.push(S)),S};function mn(m,S){var C=S.type;if(C in m.g){var k=m.g[C],Y=Array.prototype.indexOf.call(k,S,void 0),ie;(ie=0<=Y)&&Array.prototype.splice.call(k,Y,1),ie&&(Fn(S),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Zn(m,S,C,k){for(var Y=0;Y<m.length;++Y){var ie=m[Y];if(!ie.da&&ie.listener==S&&ie.capture==!!C&&ie.ha==k)return Y}return-1}var En="closure_lm_"+(1e6*Math.random()|0),Tn={};function qn(m,S,C,k,Y){if(Array.isArray(S)){for(var ie=0;ie<S.length;ie++)qn(m,S[ie],C,k,Y);return null}return C=it(C),m&&m[we]?m.K(S,C,h(k)?!!k.capture:!1,Y):qi(m,S,C,!1,k,Y)}function qi(m,S,C,k,Y,ie){if(!S)throw Error("Invalid event type");var pe=h(Y)?!!Y.capture:!!Y,vt=Bi(m);if(vt||(m[En]=vt=new Xn(m)),C=vt.add(S,C,k,pe,ie),C.proxy)return C;if(k=Ai(),C.proxy=k,k.src=m,k.listener=C,m.addEventListener)me||(Y=pe),Y===void 0&&(Y=!1),m.addEventListener(S.toString(),k,Y);else if(m.attachEvent)m.attachEvent(fi(S.toString()),k);else if(m.addListener&&m.removeListener)m.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ai(){function m(C){return S.call(m.src,m.listener,C)}const S=di;return m}function Bn(m,S,C,k,Y){if(Array.isArray(S))for(var ie=0;ie<S.length;ie++)Bn(m,S[ie],C,k,Y);else k=h(k)?!!k.capture:!!k,C=it(C),m&&m[we]?(m=m.i,S=String(S).toString(),S in m.g&&(ie=m.g[S],C=Zn(ie,C,k,Y),-1<C&&(Fn(ie[C]),Array.prototype.splice.call(ie,C,1),ie.length==0&&(delete m.g[S],m.h--)))):m&&(m=Bi(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Zn(S,C,k,Y)),(C=-1<m?S[m]:null)&&ei(C))}function ei(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[we])mn(S.i,m);else{var C=m.type,k=m.proxy;S.removeEventListener?S.removeEventListener(C,k,m.capture):S.detachEvent?S.detachEvent(fi(C),k):S.addListener&&S.removeListener&&S.removeListener(k),(C=Bi(S))?(mn(C,m),C.h==0&&(C.src=null,S[En]=null)):Fn(m)}}}function fi(m){return m in Tn?Tn[m]:Tn[m]="on"+m}function di(m,S){if(m.da)m=!0;else{S=new de(S,this);var C=m.listener,k=m.ha||m.src;m.fa&&ei(m),m=C.call(k,S)}return m}function Bi(m){return m=m[En],m instanceof Xn?m:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(m){return typeof m=="function"?m:(m[he]||(m[he]=function(S){return m.handleEvent(S)}),m[he])}function De(){Q.call(this),this.i=new Xn(this),this.M=this,this.F=null}D(De,Q),De.prototype[we]=!0,De.prototype.removeEventListener=function(m,S,C,k){Bn(this,m,S,C,k)};function yt(m,S){var C,k=m.F;if(k)for(C=[];k;k=k.F)C.push(k);if(m=m.M,k=S.type||S,typeof S=="string")S=new fe(S,m);else if(S instanceof fe)S.target=S.target||m;else{var Y=S;S=new fe(k,m),P(S,Y)}if(Y=!0,C)for(var ie=C.length-1;0<=ie;ie--){var pe=S.g=C[ie];Y=Kt(pe,k,!0,S)&&Y}if(pe=S.g=m,Y=Kt(pe,k,!0,S)&&Y,Y=Kt(pe,k,!1,S)&&Y,C)for(ie=0;ie<C.length;ie++)pe=S.g=C[ie],Y=Kt(pe,k,!1,S)&&Y}De.prototype.N=function(){if(De.aa.N.call(this),this.i){var m=this.i,S;for(S in m.g){for(var C=m.g[S],k=0;k<C.length;k++)Fn(C[k]);delete m.g[S],m.h--}}this.F=null},De.prototype.K=function(m,S,C,k){return this.i.add(String(m),S,!1,C,k)},De.prototype.L=function(m,S,C,k){return this.i.add(String(m),S,!0,C,k)};function Kt(m,S,C,k){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();for(var Y=!0,ie=0;ie<S.length;++ie){var pe=S[ie];if(pe&&!pe.da&&pe.capture==C){var vt=pe.listener,on=pe.ha||pe.src;pe.fa&&mn(m.i,pe),Y=vt.call(on,k)!==!1&&Y}}return Y&&!k.defaultPrevented}function $t(m,S,C){if(typeof m=="function")C&&(m=T(m,C));else if(m&&typeof m.handleEvent=="function")m=T(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(m,S||0)}function zi(m){m.g=$t(()=>{m.g=null,m.i&&(m.i=!1,zi(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class jr extends Q{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:zi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(m){Q.call(this),this.h=m,this.g={}}D(Sn,Q);var wi=[];function bn(m){G(m.g,function(S,C){this.g.hasOwnProperty(C)&&ei(S)},m),m.g={}}Sn.prototype.N=function(){Sn.aa.N.call(this),bn(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=c.JSON.stringify,Ae=c.JSON.parse,be=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Ge(){}Ge.prototype.h=null;function Tt(m){return m.h||(m.h=m.i())}function Je(){}var Ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function at(){fe.call(this,"d")}D(at,fe);function rt(){fe.call(this,"c")}D(rt,fe);var ke={},je=null;function gn(){return je=je||new De}ke.La="serverreachability";function Hi(m){fe.call(this,ke.La,m)}D(Hi,fe);function en(m){const S=gn();yt(S,new Hi(S))}ke.STAT_EVENT="statevent";function Nt(m,S){fe.call(this,ke.STAT_EVENT,m),this.stat=S}D(Nt,fe);function St(m){const S=gn();yt(S,new Nt(S,m))}ke.Ma="timingevent";function ti(m,S){fe.call(this,ke.Ma,m),this.size=S}D(ti,fe);function Ft(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},S)}function zn(){this.g=!0}zn.prototype.xa=function(){this.g=!1};function Gi(m,S,C,k,Y,ie){m.info(function(){if(m.g)if(ie)for(var pe="",vt=ie.split("&"),on=0;on<vt.length;on++){var Ke=vt[on].split("=");if(1<Ke.length){var wn=Ke[0];Ke=Ke[1];var Cn=wn.split("_");pe=2<=Cn.length&&Cn[1]=="type"?pe+(wn+"="+Ke+"&"):pe+(wn+"=redacted&")}}else pe=null;else pe=ie;return"XMLHTTP REQ ("+k+") [attempt "+Y+"]: "+S+`
`+C+`
`+pe})}function Nn(m,S,C,k,Y,ie,pe){m.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+Y+"]: "+S+`
`+C+`
`+ie+" "+pe})}function ni(m,S,C,k){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Ci(m,C)+(k?" "+k:"")})}function Kr(m,S){m.info(function(){return"TIMEOUT: "+S})}zn.prototype.info=function(){};function Ci(m,S){if(!m.g)return S;if(!S)return null;try{var C=JSON.parse(S);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var k=C[m];if(!(2>k.length)){var Y=k[1];if(Array.isArray(Y)&&!(1>Y.length)){var ie=Y[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var pe=1;pe<Y.length;pe++)Y[pe]=""}}}}return le(C)}catch{return S}}var Mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ii;function ji(){}D(ji,Ge),ji.prototype.g=function(){return new XMLHttpRequest},ji.prototype.i=function(){return{}},Ii=new ji;function xi(m,S,C,k){this.j=m,this.i=S,this.l=C,this.R=k||1,this.U=new Sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vo}function Vo(){this.i=null,this.g="",this.h=!1}var ur={},Ki={};function $i(m,S,C){m.L=1,m.v=Oo(Jt(S)),m.m=C,m.P=!0,hi(m,null)}function hi(m,S){m.F=Date.now(),ii(m),m.A=Jt(m.v);var C=m.A,k=m.R;Array.isArray(k)||(k=[String(k)]),Jr(C.i,"t",k),m.C=0,C=m.j.J,m.h=new Vo,m.g=Tf(m.j,C?S:null,!m.m),0<m.O&&(m.M=new jr(T(m.Y,m,m.g),m.O)),S=m.U,C=m.g,k=m.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(wi[0]=Y.toString()),Y=wi);for(var ie=0;ie<Y.length;ie++){var pe=qn(C,Y[ie],k||S.handleEvent,!1,S.h||S);if(!pe)break;S.g[pe.key]=pe}S=m.H?x(m.H):{},m.m?(m.u||(m.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,S)):(m.u="GET",m.g.ea(m.A,m.u,null,S)),en(),Gi(m.i,m.u,m.A,m.l,m.R,m.m)}xi.prototype.ca=function(m){m=m.target;const S=this.M;S&&oi(m)==3?S.j():this.Y(m)},xi.prototype.Y=function(m){try{if(m==this.g)e:{const Cn=oi(this.g);var S=this.g.Ba();const Vs=this.g.Z();if(!(3>Cn)&&(Cn!=3||this.g&&(this.h.h||this.g.oa()||qo(this.g)))){this.J||Cn!=4||S==7||(S==8||0>=Vs?en(3):en(2)),cr(this);var C=this.g.Z();this.X=C;t:if(Ji(this)){var k=qo(this.g);m="";var Y=k.length,ie=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),fr(this);var pe="";break t}this.h.i=new c.TextDecoder}for(S=0;S<Y;S++)this.h.h=!0,m+=this.h.i.decode(k[S],{stream:!(ie&&S==Y-1)});k.length=0,this.h.g+=m,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=C==200,Nn(this.i,this.u,this.A,this.l,this.R,Cn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,on=this.g;if((vt=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(vt)){var Ke=vt;break t}}Ke=null}if(C=Ke)ni(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cr(this,C);else{this.o=!1,this.s=3,St(12),ri(this),fr(this);break e}}if(this.P){C=!0;let mi;for(;!this.J&&this.C<pe.length;)if(mi=wr(this,pe),mi==Ki){Cn==4&&(this.s=4,St(14),C=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(mi==ur){this.s=4,St(15),ni(this.i,this.l,pe,"[Invalid Chunk]"),C=!1;break}else ni(this.i,this.l,mi,null),Cr(this,mi);if(Ji(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Cn!=4||pe.length!=0||this.h.h||(this.s=1,St(16),C=!1),this.o=this.o&&C,!C)ni(this.i,this.l,pe,"[Invalid Chunked Response]"),ri(this),fr(this);else if(0<pe.length&&!this.W){this.W=!0;var wn=this.j;wn.g==this&&wn.ba&&!wn.M&&(wn.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),cu(wn),wn.M=!0,St(11))}}else ni(this.i,this.l,pe,null),Cr(this,pe);Cn==4&&ri(this),this.o&&!this.J&&(Cn==4?vf(this.j,this):(this.o=!1,ii(this)))}else df(this.g),C==400&&0<pe.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),ri(this),fr(this)}}}catch{}finally{}};function Ji(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function wr(m,S){var C=m.C,k=S.indexOf(`
`,C);return k==-1?Ki:(C=Number(S.substring(C,k)),isNaN(C)?ur:(k+=1,k+C>S.length?Ki:(S=S.slice(k,k+C),m.C=k+C,S)))}xi.prototype.cancel=function(){this.J=!0,ri(this)};function ii(m){m.S=Date.now()+m.I,qt(m,m.I)}function qt(m,S){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ft(T(m.ba,m),S)}function cr(m){m.B&&(c.clearTimeout(m.B),m.B=null)}xi.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Kr(this.i,this.A),this.L!=2&&(en(),St(17)),ri(this),this.s=2,fr(this)):qt(this,this.S-m)};function fr(m){m.j.G==0||m.J||vf(m.j,m)}function ri(m){cr(m);var S=m.M;S&&typeof S.ma=="function"&&S.ma(),m.M=null,bn(m.U),m.g&&(S=m.g,m.g=null,S.abort(),S.ma())}function Cr(m,S){try{var C=m.j;if(C.G!=0&&(C.g==m||As(C.h,m))){if(!m.K&&As(C.h,m)&&C.G==3){try{var k=C.Da.g.parse(S)}catch{k=null}if(Array.isArray(k)&&k.length==3){var Y=k;if(Y[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)ks(C),Ms(C);else break e;uu(C),St(18)}}else C.za=Y[1],0<C.za-C.T&&37500>Y[2]&&C.F&&C.v==0&&!C.C&&(C.C=Ft(T(C.Za,C),6e3));if(1>=of(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Wr(C,11)}else if((m.K||C.g==m)&&ks(C),!F(S))for(Y=C.Da.g.parse(S),S=0;S<Y.length;S++){let Ke=Y[S];if(C.T=Ke[0],Ke=Ke[1],C.G==2)if(Ke[0]=="c"){C.K=Ke[1],C.ia=Ke[2];const wn=Ke[3];wn!=null&&(C.la=wn,C.j.info("VER="+C.la));const Cn=Ke[4];Cn!=null&&(C.Aa=Cn,C.j.info("SVER="+C.Aa));const Vs=Ke[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(k=1.5*Vs,C.L=k,C.j.info("backChannelRequestTimeoutMs_="+k)),k=C;const mi=m.g;if(mi){const Ho=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ho){var ie=k.h;ie.g||Ho.indexOf("spdy")==-1&&Ho.indexOf("quic")==-1&&Ho.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(ws(ie,ie.h),ie.h=null))}if(k.D){const Qr=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qr&&(k.ya=Qr,ut(k.I,k.D,Qr))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),k=C;var pe=m;if(k.qa=Ef(k,k.J?k.ia:null,k.W),pe.K){Yi(k.h,pe);var vt=pe,on=k.L;on&&(vt.I=on),vt.B&&(cr(vt),ii(vt)),k.g=pe}else gf(k);0<C.i.length&&Va(C)}else Ke[0]!="stop"&&Ke[0]!="close"||Wr(C,7);else C.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Wr(C,7):au(C):Ke[0]!="noop"&&C.l&&C.l.ta(Ke),C.v=0)}}en(4)}catch{}}var kp=class{constructor(m,S){this.g=m,this.map=S}};function eu(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function of(m){return m.h?1:m.g?m.g.size:0}function As(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function ws(m,S){m.g?m.g.add(S):m.h=S}function Yi(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}eu.prototype.cancel=function(){if(this.i=si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function si(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const C of m.g.values())S=S.concat(C.D);return S}return V(m.i)}function af(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var S=[],C=m.length,k=0;k<C;k++)S.push(m[k]);return S}S=[],C=0;for(k in m)S[C++]=m[k];return S}function Pp(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var S=[];m=m.length;for(var C=0;C<m;C++)S.push(C);return S}S=[],C=0;for(const k in m)S[C++]=k;return S}}}function xa(m,S){if(m.forEach&&typeof m.forEach=="function")m.forEach(S,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,S,void 0);else for(var C=Pp(m),k=af(m),Y=k.length,ie=0;ie<Y;ie++)S.call(void 0,k[ie],C&&C[ie],m)}var nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(m,S){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var k=m[C].indexOf("="),Y=null;if(0<=k){var ie=m[C].substring(0,k);Y=m[C].substring(k+1)}else ie=m[C];S(ie,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function $r(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof $r){this.h=m.h,Cs(this,m.j),this.o=m.o,this.g=m.g,Lo(this,m.s),this.l=m.l;var S=m.i,C=new Ir;C.i=S.i,S.g&&(C.g=new Map(S.g),C.h=S.h),Na(this,C),this.m=m.m}else m&&(S=String(m).match(nu))?(this.h=!1,Cs(this,S[1]||"",!0),this.o=Is(S[2]||""),this.g=Is(S[3]||"",!0),Lo(this,S[4]),this.l=Is(S[5]||"",!0),Na(this,S[6]||"",!0),this.m=Is(S[7]||"")):(this.h=!1,this.i=new Ir(null,this.h))}$r.prototype.toString=function(){var m=[],S=this.j;S&&m.push(Wi(S,iu,!0),":");var C=this.g;return(C||S=="file")&&(m.push("//"),(S=this.o)&&m.push(Wi(S,iu,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(Wi(C,C.charAt(0)=="/"?ru:lf,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",Wi(C,Op)),m.join("")};function Jt(m){return new $r(m)}function Cs(m,S,C){m.j=C?Is(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function Lo(m,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);m.s=S}else m.s=null}function Na(m,S,C){S instanceof Ir?(m.i=S,uf(m.i,m.h)):(C||(S=Wi(S,Lp)),m.i=new Ir(S,m.h))}function ut(m,S,C){m.i.set(S,C)}function Oo(m){return ut(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Is(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Wi(m,S,C){return typeof m=="string"?(m=encodeURI(m).replace(S,Vp),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Vp(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var iu=/[#\/\?@]/g,lf=/[#\?:]/g,ru=/[#\?]/g,Lp=/[#\?@]/g,Op=/#/g;function Ir(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function An(m){m.g||(m.g=new Map,m.h=0,m.i&&Ra(m.i,function(S,C){m.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}t=Ir.prototype,t.add=function(m,S){An(this),this.i=null,m=Ri(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(S),this.h+=1,this};function Da(m,S){An(m),S=Ri(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Ma(m,S){return An(m),S=Ri(m,S),m.g.has(S)}t.forEach=function(m,S){An(this),this.g.forEach(function(C,k){C.forEach(function(Y){m.call(S,Y,k,this)},this)},this)},t.na=function(){An(this);const m=Array.from(this.g.values()),S=Array.from(this.g.keys()),C=[];for(let k=0;k<S.length;k++){const Y=m[k];for(let ie=0;ie<Y.length;ie++)C.push(S[k])}return C},t.V=function(m){An(this);let S=[];if(typeof m=="string")Ma(this,m)&&(S=S.concat(this.g.get(Ri(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)S=S.concat(m[C])}return S},t.set=function(m,S){return An(this),this.i=null,m=Ri(this,m),Ma(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=this.V(m),0<m.length?String(m[0]):S):S};function Jr(m,S,C){Da(m,S),0<C.length&&(m.i=null,m.g.set(Ri(m,S),V(C)),m.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(var C=0;C<S.length;C++){var k=S[C];const ie=encodeURIComponent(String(k)),pe=this.V(k);for(k=0;k<pe.length;k++){var Y=ie;pe[k]!==""&&(Y+="="+encodeURIComponent(String(pe[k]))),m.push(Y)}}return this.i=m.join("&")};function Ri(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function uf(m,S){S&&!m.j&&(An(m),m.i=null,m.g.forEach(function(C,k){var Y=k.toLowerCase();k!=Y&&(Da(this,k),Jr(this,Y,C))},m)),m.j=S}function su(m,S){const C=new zn;if(c.Image){const k=new Image;k.onload=w(pi,C,"TestLoadImage: loaded",!0,S,k),k.onerror=w(pi,C,"TestLoadImage: error",!1,S,k),k.onabort=w(pi,C,"TestLoadImage: abort",!1,S,k),k.ontimeout=w(pi,C,"TestLoadImage: timeout",!1,S,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=m}else S(!1)}function cf(m,S){const C=new zn,k=new AbortController,Y=setTimeout(()=>{k.abort(),pi(C,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:k.signal}).then(ie=>{clearTimeout(Y),ie.ok?pi(C,"TestPingServer: ok",!0,S):pi(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),pi(C,"TestPingServer: error",!1,S)})}function pi(m,S,C,k,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),k(C)}catch{}}function dr(){this.g=new be}function ou(m,S,C){const k=C||"";try{xa(m,function(Y,ie){let pe=Y;h(Y)&&(pe=le(Y)),S.push(k+ie+"="+encodeURIComponent(pe))})}catch(Y){throw S.push(k+"type="+encodeURIComponent("_badmap")),Y}}function xr(m){this.l=m.Ub||null,this.j=m.eb||!1}D(xr,Ge),xr.prototype.g=function(){return new Ni(this.l,this.j)},xr.prototype.i=(function(m){return function(){return m}})({});function Ni(m,S){De.call(this),this.D=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ni,De),t=Ni.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=S,this.readyState=1,xs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(S.body=m),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ka(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function ka(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Rr(this):xs(this),this.readyState==3&&ka(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Rr(this))},t.Qa=function(m){this.g&&(this.response=m,Rr(this))},t.ga=function(){this.g&&Rr(this)};function Rr(m){m.readyState=4,m.l=null,m.j=null,m.v=null,xs(m)}t.setRequestHeader=function(m,S){this.u.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=S.next();return m.join(`\r
`)};function xs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Uo(m){let S="";return G(m,function(C,k){S+=k,S+=":",S+=C,S+=`\r
`}),S}function Rs(m,S,C){e:{for(k in C){var k=!1;break e}k=!0}k||(C=Uo(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):ut(m,S,C))}function kt(m){De.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(kt,De);var Hn=/^https?$/i,Yr=["POST","PUT"];t=kt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,S,C,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ii.g(),this.v=this.o?Tt(this.o):Tt(Ii),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(ie){Fo(this,ie);return}if(m=C||"",C=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var Y in k)C.set(Y,k[Y]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const ie of k.keys())C.set(ie,k.get(ie));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(C.keys()).find(ie=>ie.toLowerCase()=="content-type"),Y=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Yr,S,void 0))||k||Y||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,pe]of C)this.g.setRequestHeader(ie,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pa(this),this.u=!0,this.g.send(m),this.u=!1}catch(ie){Fo(this,ie)}};function Fo(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.m=5,Ns(m),Ds(m)}function Ns(m){m.A||(m.A=!0,yt(m,"complete"),yt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,yt(this,"complete"),yt(this,"abort"),Ds(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ds(this,!0)),kt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ff(this):this.bb())},t.bb=function(){ff(this)};function ff(m){if(m.h&&typeof l<"u"&&(!m.v[1]||oi(m)!=4||m.Z()!=2)){if(m.u&&oi(m)==4)$t(m.Ea,0,m);else if(yt(m,"readystatechange"),oi(m)==4){m.h=!1;try{const pe=m.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var k;if(k=pe===0){var Y=String(m.D).match(nu)[1]||null;!Y&&c.self&&c.self.location&&(Y=c.self.location.protocol.slice(0,-1)),k=!Hn.test(Y?Y.toLowerCase():"")}C=k}if(C)yt(m,"complete"),yt(m,"success");else{m.m=6;try{var ie=2<oi(m)?m.g.statusText:""}catch{ie=""}m.l=ie+" ["+m.Z()+"]",Ns(m)}}finally{Ds(m)}}}}function Ds(m,S){if(m.g){Pa(m);const C=m.g,k=m.v[0]?()=>{}:null;m.g=null,m.v=null,S||yt(m,"ready");try{C.onreadystatechange=k}catch{}}}function Pa(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function oi(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),Ae(S)}};function qo(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function df(m){const S={};m=(m.g&&2<=oi(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<m.length;k++){if(F(m[k]))continue;var C=M(m[k]);const Y=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const ie=S[Y]||[];S[Y]=ie,ie.push(C)}I(S,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bo(m,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||S}function hf(m){this.Aa=0,this.i=[],this.j=new zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bo("baseRetryDelayMs",5e3,m),this.cb=Bo("retryDelaySeedMs",1e4,m),this.Wa=Bo("forwardChannelMaxRetries",2,m),this.wa=Bo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new eu(m&&m.concurrentRequestLimit),this.Da=new dr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hf.prototype,t.la=8,t.G=1,t.connect=function(m,S,C,k){St(0),this.W=m,this.H=S||{},C&&k!==void 0&&(this.H.OSID=C,this.H.OAID=k),this.F=this.X,this.I=Ef(this,null,this.W),Va(this)};function au(m){if(pf(m),m.G==3){var S=m.U++,C=Jt(m.I);if(ut(C,"SID",m.K),ut(C,"RID",S),ut(C,"TYPE","terminate"),zo(m,C),S=new xi(m,m.j,S),S.L=2,S.v=Oo(Jt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=S.v,C=!0),C||(S.g=Tf(S.j,null),S.g.ea(S.v)),S.F=Date.now(),ii(S)}fu(m)}function Ms(m){m.g&&(cu(m),m.g.cancel(),m.g=null)}function pf(m){Ms(m),m.u&&(c.clearTimeout(m.u),m.u=null),ks(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Va(m){if(!tu(m.h)&&!m.s){m.s=!0;var S=m.Ga;ce||Me(),ge||(ce(),ge=!0),xe.add(S,m),m.B=0}}function Up(m,S){return of(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=S.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ft(T(m.Ga,m,S),_f(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const Y=new xi(this,this.j,m);let ie=this.o;if(this.S&&(ie?(ie=x(ie),P(ie,this.S)):ie=this.S),this.m!==null||this.O||(Y.H=ie,ie=null),this.P)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var k=this.i[C];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(S+=k,4096<S){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=lu(this,Y,S),C=Jt(this.I),ut(C,"RID",m),ut(C,"CVER",22),this.D&&ut(C,"X-HTTP-Session-Id",this.D),zo(this,C),ie&&(this.O?S="headers="+encodeURIComponent(String(Uo(ie)))+"&"+S:this.m&&Rs(C,this.m,ie)),ws(this.h,Y),this.Ua&&ut(C,"TYPE","init"),this.P?(ut(C,"$req",S),ut(C,"SID","null"),Y.T=!0,$i(Y,C,null)):$i(Y,C,S),this.G=2}}else this.G==3&&(m?mf(this,m):this.i.length==0||tu(this.h)||mf(this))};function mf(m,S){var C;S?C=S.l:C=m.U++;const k=Jt(m.I);ut(k,"SID",m.K),ut(k,"RID",C),ut(k,"AID",m.T),zo(m,k),m.m&&m.o&&Rs(k,m.m,m.o),C=new xi(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),S&&(m.i=S.D.concat(m.i)),S=lu(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),ws(m.h,C),$i(C,k,S)}function zo(m,S){m.H&&G(m.H,function(C,k){ut(S,k,C)}),m.l&&xa({},function(C,k){ut(S,k,C)})}function lu(m,S,C){C=Math.min(m.i.length,C);var k=m.l?T(m.l.Na,m.l,m):null;e:{var Y=m.i;let ie=-1;for(;;){const pe=["count="+C];ie==-1?0<C?(ie=Y[0].g,pe.push("ofs="+ie)):ie=0:pe.push("ofs="+ie);let vt=!0;for(let on=0;on<C;on++){let Ke=Y[on].g;const wn=Y[on].map;if(Ke-=ie,0>Ke)ie=Math.max(0,Y[on].g-100),vt=!1;else try{ou(wn,pe,"req"+Ke+"_")}catch{k&&k(wn)}}if(vt){k=pe.join("&");break e}}}return m=m.i.splice(0,C),S.D=m,k}function gf(m){if(!m.g&&!m.u){m.Y=1;var S=m.Fa;ce||Me(),ge||(ce(),ge=!0),xe.add(S,m),m.v=0}}function uu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ft(T(m.Fa,m),_f(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,yf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ft(T(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Ms(this),yf(this))};function cu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function yf(m){m.g=new xi(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var S=Jt(m.qa);ut(S,"RID","rpc"),ut(S,"SID",m.K),ut(S,"AID",m.T),ut(S,"CI",m.F?"0":"1"),!m.F&&m.ja&&ut(S,"TO",m.ja),ut(S,"TYPE","xmlhttp"),zo(m,S),m.m&&m.o&&Rs(S,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=Oo(Jt(S)),C.m=null,C.P=!0,hi(C,m)}t.Za=function(){this.C!=null&&(this.C=null,Ms(this),uu(this),St(19))};function ks(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function vf(m,S){var C=null;if(m.g==S){ks(m),cu(m),m.g=null;var k=2}else if(As(m.h,S))C=S.D,Yi(m.h,S),k=1;else return;if(m.G!=0){if(S.o)if(k==1){C=S.m?S.m.length:0,S=Date.now()-S.F;var Y=m.B;k=gn(),yt(k,new ti(k,C)),Va(m)}else gf(m);else if(Y=S.s,Y==3||Y==0&&0<S.X||!(k==1&&Up(m,S)||k==2&&uu(m)))switch(C&&0<C.length&&(S=m.h,S.i=S.i.concat(C)),Y){case 1:Wr(m,5);break;case 4:Wr(m,10);break;case 3:Wr(m,6);break;default:Wr(m,2)}}}function _f(m,S){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*S}function Wr(m,S){if(m.j.info("Error code "+S),S==2){var C=T(m.fb,m),k=m.Xa;const Y=!k;k=new $r(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Cs(k,"https"),Oo(k),Y?su(k.toString(),C):cf(k.toString(),C)}else St(2);m.G=0,m.l&&m.l.sa(S),fu(m),pf(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function fu(m){if(m.G=0,m.ka=[],m.l){const S=si(m.h);(S.length!=0||m.i.length!=0)&&(L(m.ka,S),L(m.ka,m.i),m.h.i.length=0,V(m.i),m.i.length=0),m.l.ra()}}function Ef(m,S,C){var k=C instanceof $r?Jt(C):new $r(C);if(k.g!="")S&&(k.g=S+"."+k.g),Lo(k,k.s);else{var Y=c.location;k=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;var ie=new $r(null);k&&Cs(ie,k),S&&(ie.g=S),Y&&Lo(ie,Y),C&&(ie.l=C),k=ie}return C=m.D,S=m.ya,C&&S&&ut(k,C,S),ut(k,"VER",m.la),zo(m,k),k}function Tf(m,S,C){if(S&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Ca&&!m.pa?new kt(new xr({eb:C})):new kt(m.pa),S.Ha(m.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sf(){}t=Sf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function La(){}La.prototype.g=function(m,S){return new ai(m,S)};function ai(m,S){De.call(this),this.g=new hf(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(m?m["X-WebChannel-Client-Profile"]=S.va:m={"X-WebChannel-Client-Profile":S.va}),this.g.S=m,(m=S&&S.Sb)&&!F(m)&&(this.g.m=m),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.D=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Ps(this)}D(ai,De),ai.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ai.prototype.close=function(){au(this.g)},ai.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=le(m),m=C);S.i.push(new kp(S.Ya++,m)),S.G==3&&Va(S)},ai.prototype.N=function(){this.g.l=null,delete this.j,au(this.g),delete this.g,ai.aa.N.call(this)};function bf(m){at.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const C in S){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}D(bf,at);function Af(){rt.call(this),this.status=1}D(Af,rt);function Ps(m){this.g=m}D(Ps,Sf),Ps.prototype.ua=function(){yt(this.g,"a")},Ps.prototype.ta=function(m){yt(this.g,new bf(m))},Ps.prototype.sa=function(m){yt(this.g,new Af)},Ps.prototype.ra=function(){yt(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,ai.prototype.send=ai.prototype.o,ai.prototype.open=ai.prototype.m,ai.prototype.close=ai.prototype.close,oI=function(){return new La},sI=function(){return gn()},rI=ke,my={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,ih=Mt,tn.COMPLETE="complete",iI=tn,Je.EventType=Ye,Ye.OPEN="a",Ye.CLOSE="b",Ye.ERROR="c",Ye.MESSAGE="d",De.prototype.listen=De.prototype.K,rc=Je,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,nI=kt}).apply(typeof Rd<"u"?Rd:typeof self<"u"?self:typeof window<"u"?window:{});const BS="@firebase/firestore",zS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new uv("@firebase/firestore");function gl(){return Ea.logLevel}function Ee(t,...e){if(Ea.logLevel<=tt.DEBUG){const n=e.map(bv);Ea.debug(`Firestore (${Gl}): ${t}`,...n)}}function _s(t,...e){if(Ea.logLevel<=tt.ERROR){const n=e.map(bv);Ea.error(`Firestore (${Gl}): ${t}`,...n)}}function To(t,...e){if(Ea.logLevel<=tt.WARN){const n=e.map(bv);Ea.warn(`Firestore (${Gl}): ${t}`,...n)}}function bv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,aI(t,i,n)}function aI(t,e,n){let i=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw _s(i),new Error(i)}function Et(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||aI(e,s,i)}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Jn.UNAUTHENTICATED)))}shutdown(){}}class lP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class uP{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Et(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let a=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ca,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ca)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Et(typeof i.accessToken=="string",31837,{l:i}),new lI(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}}class cP{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fP{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new cP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Et(this.o===void 0,3512);const i=a=>{a.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Ee("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new HS(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=hP(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<n&&(i+=e.charAt(s[a]%62))}return i}}function $e(t,e){return t<e?-1:t>e?1:0}function gy(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return $e(i,s);{const a=uI(),l=pP(a.encode(GS(t,n)),a.encode(GS(e,n)));return l!==0?l:$e(i,s)}}n+=i>65535?2:1}return $e(t.length,e.length)}function GS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function pP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return $e(t[n],e[n]);return $e(t.length,e.length)}function Pl(t,e,n){return t.length===e.length&&t.every(((i,s)=>n(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="__name__";class Vr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Le(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Le(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const a=Vr.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return $e(e.length,n.length)}static compareSegments(e,n){const i=Vr.isNumericId(e),s=Vr.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Vr.extractNumericId(e).compare(Vr.extractNumericId(n)):gy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yo.fromString(e.substring(4,e.length-2))}}class Dt extends Vr{construct(e,n,i){return new Dt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((s=>s.length>0)))}return new Dt(n)}static emptyPath(){return new Dt([])}}const mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends Vr{construct(e,n,i){return new On(e,n,i)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jS}static keyField(){return new On([jS])}static fromServerFormat(e){const n=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Te(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Te(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Te(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new Te(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(n)}static emptyPath(){return new On([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Dt.fromString(e))}static fromName(e){return new Ne(Dt.fromString(e).popFirst(5))}static empty(){return new Ne(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t,e,n){if(!n)throw new Te(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gP(t,e,n,i){if(e===!0&&i===!0)throw new Te(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function KS(t){if(!Ne.isDocumentKey(t))throw new Te(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $S(t){if(Ne.isDocumentKey(t))throw new Te(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function op(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Le(12329,{type:typeof t})}function vo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=op(t);throw new Te(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yc(t,e){if(!fI(t))throw new Te(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Te(ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=-62135596800,YS=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*YS);return new Ut(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<JS)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YS}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yc(e,Ut._jsonSchema))return new Ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-JS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:hn("string",Ut._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Ut(0,0))}static max(){return new Ue(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function yP(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(i===1e9?new Ut(n+1,0):new Ut(n,i));return new So(s,Ne.empty(),e)}function vP(t){return new So(t.readTime,t.key,Pc)}class So{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new So(Ue.min(),Ne.empty(),Pc)}static max(){return new So(Ue.max(),Ne.empty(),Pc)}}function _P(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==EP)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,i)=>{n(e)}))}static reject(e){return new ue(((n,i)=>{i(e)}))}static waitFor(e){return new ue(((n,i)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&n()}),(d=>i(d)))})),l=!0,a===s&&n()}))}static or(e){let n=ue.resolve(!1);for(const i of e)n=n.next((s=>s?ue.resolve(s):i()));return n}static forEach(e,n){const i=[];return e.forEach(((s,a)=>{i.push(n.call(this,s,a))})),this.waitFor(i)}static mapArray(e,n){return new ue(((i,s)=>{const a=e.length,l=new Array(a);let c=0;for(let d=0;d<a;d++){const h=d;n(e[h]).next((y=>{l[h]=y,++c,c===a&&i(l)}),(y=>s(y)))}}))}static doWhile(e,n){return new ue(((i,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):i()};a()}))}}function SP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ap.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=-1;function lp(t){return t==null}function Ch(t){return t===0&&1/t==-1/0}function bP(t){return typeof t=="number"&&Number.isInteger(t)&&!Ch(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="";function AP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WS(e)),e=wP(t.get(n),e);return WS(e)}function wP(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case dI:n+="";break;default:n+=a}}return n}function WS(t){return t+dI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.comparator=e,this.root=n||Ln.EMPTY}insert(e,n){return new Gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new Gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nd(this.root,e,this.comparator,!0)}}class Nd{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??Ln.RED,this.left=s??Ln.EMPTY,this.right=a??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new Ln(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ln.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,n,i,s,a){return this}insert(e,n,i){return new Ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.comparator=e,this.data=new Gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new XS(this.data.getIterator())}getIteratorFrom(e){return new XS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new _n(this.comparator);return n.data=e,n}}class XS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new Ui([])}unionWith(e){let n=new _n(On.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ui(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new pI("Invalid base64 string: "+a):a}})(e);return new Un(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Un.EMPTY_BYTE_STRING=new Un("");const CP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(t){if(Et(!!t,39018),typeof t=="string"){let e=0;const n=CP.exec(t);if(Et(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:sn(t.seconds),nanos:sn(t.nanos)}}function sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ao(t){return typeof t=="string"?Un.fromBase64String(t):Un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="server_timestamp",gI="__type__",yI="__previous_value__",vI="__local_write_time__";function Cv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[gI])===null||n===void 0?void 0:n.stringValue)===mI}function up(t){const e=t.mapValue.fields[yI];return Cv(e)?up(e):e}function Vc(t){const e=bo(t.mapValue.fields[vI].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n,i,s,a,l,c,d,h,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=y}}const Ih="(default)";class Lc{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="__type__",xP="__max__",Dd={mapValue:{}},EI="__vector__",xh="value";function wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cv(t)?4:NP(t)?9007199254740991:RP(t)?10:11:Le(28295,{value:t})}function zr(t,e){if(t===e)return!0;const n=wo(t);if(n!==wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vc(t).isEqual(Vc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=bo(s.timestampValue),c=bo(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Ao(s.bytesValue).isEqual(Ao(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return sn(s.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return sn(s.integerValue)===sn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=sn(s.doubleValue),c=sn(a.doubleValue);return l===c?Ch(l)===Ch(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Pl(t.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(QS(l)!==QS(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!zr(l[d],c[d])))return!1;return!0})(t,e);default:return Le(52216,{left:t})}}function Oc(t,e){return(t.values||[]).find((n=>zr(n,e)))!==void 0}function Vl(t,e){if(t===e)return 0;const n=wo(t),i=wo(e);if(n!==i)return $e(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=sn(a.integerValue||a.doubleValue),d=sn(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return ZS(t.timestampValue,e.timestampValue);case 4:return ZS(Vc(t),Vc(e));case 5:return gy(t.stringValue,e.stringValue);case 6:return(function(a,l){const c=Ao(a),d=Ao(l);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),d=l.split("/");for(let h=0;h<c.length&&h<d.length;h++){const y=$e(c[h],d[h]);if(y!==0)return y}return $e(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=$e(sn(a.latitude),sn(l.latitude));return c!==0?c:$e(sn(a.longitude),sn(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return eb(t.arrayValue,e.arrayValue);case 10:return(function(a,l){var c,d,h,y;const E=a.fields||{},T=l.fields||{},w=(c=E[xh])===null||c===void 0?void 0:c.arrayValue,D=(d=T[xh])===null||d===void 0?void 0:d.arrayValue,V=$e(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0);return V!==0?V:eb(w,D)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Dd.mapValue&&l===Dd.mapValue)return 0;if(a===Dd.mapValue)return 1;if(l===Dd.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),h=l.fields||{},y=Object.keys(h);d.sort(),y.sort();for(let E=0;E<d.length&&E<y.length;++E){const T=gy(d[E],y[E]);if(T!==0)return T;const w=Vl(c[d[E]],h[y[E]]);if(w!==0)return w}return $e(d.length,y.length)})(t.mapValue,e.mapValue);default:throw Le(23264,{le:n})}}function ZS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=bo(t),i=bo(e),s=$e(n.seconds,i.seconds);return s!==0?s:$e(n.nanos,i.nanos)}function eb(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const a=Vl(n[s],i[s]);if(a)return a}return $e(n.length,i.length)}function Ll(t){return yy(t)}function yy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=bo(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ao(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=yy(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${yy(n.fields[l])}`;return s+"}"})(t.mapValue):Le(61005,{value:t})}function rh(t){switch(wo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=up(t);return e?16+rh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ao(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+rh(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let s=0;return Mo(i.fields,((a,l)=>{s+=a.length+rh(l)})),s})(t.mapValue);default:throw Le(13486,{value:t})}}function tb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vy(t){return!!t&&"integerValue"in t}function Iv(t){return!!t&&"arrayValue"in t}function nb(t){return!!t&&"nullValue"in t}function ib(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sh(t){return!!t&&"mapValue"in t}function RP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[_I])===null||n===void 0?void 0:n.stringValue)===EI}function mc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Mo(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=mc(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(n)}setAll(e){let n=On.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=c.popLast()}l?i[c.lastSegment()]=mc(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,s)}delete(e){const n=this.field(e.popLast());sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];sh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Mo(n,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new bi(mc(this.value))}}function TI(t){const e=[];return Mo(t.fields,((n,i)=>{const s=new On([n]);if(sh(i)){const a=TI(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Ui(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,i,s,a,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Yn(e,0,Ue.min(),Ue.min(),Ue.min(),bi.empty(),0)}static newFoundDocument(e,n,i,s){return new Yn(e,1,n,Ue.min(),i,s,0)}static newNoDocument(e,n){return new Yn(e,2,n,Ue.min(),Ue.min(),bi.empty(),0)}static newUnknownDocument(e,n){return new Yn(e,3,n,Ue.min(),Ue.min(),bi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.position=e,this.inclusive=n}}function rb(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?i=Ne.comparator(Ne.fromName(l.referenceValue),n.key):i=Vl(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function sb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n="asc"){this.field=e,this.dir=n}}function DP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{}class dn extends SI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new kP(e,n,i):n==="array-contains"?new LP(e,i):n==="in"?new OP(e,i):n==="not-in"?new UP(e,i):n==="array-contains-any"?new FP(e,i):new dn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new PP(e,i):new VP(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vl(n,this.value)):n!==null&&wo(this.value)===wo(n)&&this.matchesComparison(Vl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends SI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new br(e,n)}matches(e){return bI(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function bI(t){return t.op==="and"}function AI(t){return MP(t)&&bI(t)}function MP(t){for(const e of t.filters)if(e instanceof br)return!1;return!0}function _y(t){if(t instanceof dn)return t.field.canonicalString()+t.op.toString()+Ll(t.value);if(AI(t))return t.filters.map((e=>_y(e))).join(",");{const e=t.filters.map((n=>_y(n))).join(",");return`${t.op}(${e})`}}function wI(t,e){return t instanceof dn?(function(i,s){return s instanceof dn&&i.op===s.op&&i.field.isEqual(s.field)&&zr(i.value,s.value)})(t,e):t instanceof br?(function(i,s){return s instanceof br&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,l,c)=>a&&wI(l,s.filters[c])),!0):!1})(t,e):void Le(19439)}function CI(t){return t instanceof dn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ll(n.value)}`})(t):t instanceof br?(function(n){return n.op.toString()+" {"+n.getFilters().map(CI).join(" ,")+"}"})(t):"Filter"}class kP extends dn{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class PP extends dn{constructor(e,n){super(e,"in",n),this.keys=II("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class VP extends dn{constructor(e,n){super(e,"not-in",n),this.keys=II("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function II(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Ne.fromName(i.referenceValue)))}class LP extends dn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Iv(n)&&Oc(n.arrayValue,this.value)}}class OP extends dn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oc(this.value.arrayValue,n)}}class UP extends dn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oc(this.value.arrayValue,n)}}class FP extends dn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Oc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n=null,i=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Pe=null}}function ob(t,e=null,n=[],i=[],s=null,a=null,l=null){return new qP(t,e,n,i,s,a,l)}function xv(t){const e=Be(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>_y(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),lp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ll(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ll(i))).join(",")),e.Pe=n}return e.Pe}function Rv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sb(t.startAt,e.startAt)&&sb(t.endAt,e.endAt)}function Ey(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n=null,i=[],s=[],a=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function BP(t,e,n,i,s,a,l,c){return new Wc(t,e,n,i,s,a,l,c)}function Nv(t){return new Wc(t)}function ab(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xI(t){return t.collectionGroup!==null}function gc(t){const e=Be(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new _n(On.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Nh(a,i))})),n.has(On.keyField().canonicalString())||e.Te.push(new Nh(On.keyField(),i))}return e.Te}function Ur(t){const e=Be(t);return e.Ie||(e.Ie=zP(e,gc(t))),e.Ie}function zP(t,e){if(t.limitType==="F")return ob(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Nh(s.field,a)}));const n=t.endAt?new Rh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Rh(t.startAt.position,t.startAt.inclusive):null;return ob(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ty(t,e){const n=t.filters.concat([e]);return new Wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sy(t,e,n){return new Wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cp(t,e){return Rv(Ur(t),Ur(e))&&t.limitType===e.limitType}function RI(t){return`${xv(Ur(t))}|lt:${t.limitType}`}function yl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((s=>CI(s))).join(", ")}]`),lp(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((s=>Ll(s))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((s=>Ll(s))).join(",")),`Target(${i})`})(Ur(t))}; limitType=${t.limitType})`}function fp(t,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ne.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,s){for(const a of gc(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,d){const h=rb(l,c,d);return l.inclusive?h<=0:h<0})(i.startAt,gc(i),s)||i.endAt&&!(function(l,c,d){const h=rb(l,c,d);return l.inclusive?h>=0:h>0})(i.endAt,gc(i),s))})(t,e)}function HP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NI(t){return(e,n)=>{let i=!1;for(const s of gc(t)){const a=GP(s,e,n);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function GP(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(a,l,c){const d=l.data.field(a),h=c.data.field(a);return d!==null&&h!==null?Vl(d,h):Le(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Mo(this.inner,((n,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return hI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new Gt(Ne.comparator);function Es(){return jP}const DI=new Gt(Ne.comparator);function sc(...t){let e=DI;for(const n of t)e=e.insert(n.key,n);return e}function MI(t){let e=DI;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ua(){return yc()}function kI(){return yc()}function yc(){return new wa((t=>t.toString()),((t,e)=>t.isEqual(e)))}const KP=new Gt(Ne.comparator),$P=new _n(Ne.comparator);function nt(...t){let e=$P;for(const n of t)e=e.add(n);return e}const JP=new _n($e);function YP(){return JP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function PI(t){return{integerValue:""+t}}function WP(t,e){return bP(e)?PI(e):Dv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this._=void 0}}function QP(t,e,n){return t instanceof Dh?(function(s,a){const l={fields:{[gI]:{stringValue:mI},[vI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Cv(a)&&(a=up(a)),a&&(l.fields[yI]=a),{mapValue:l}})(n,e):t instanceof Uc?LI(t,e):t instanceof Fc?OI(t,e):(function(s,a){const l=VI(s,a),c=lb(l)+lb(s.Ee);return vy(l)&&vy(s.Ee)?PI(c):Dv(s.serializer,c)})(t,e)}function XP(t,e,n){return t instanceof Uc?LI(t,e):t instanceof Fc?OI(t,e):n}function VI(t,e){return t instanceof Mh?(function(i){return vy(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Dh extends dp{}class Uc extends dp{constructor(e){super(),this.elements=e}}function LI(t,e){const n=UI(e);for(const i of t.elements)n.some((s=>zr(s,i)))||n.push(i);return{arrayValue:{values:n}}}class Fc extends dp{constructor(e){super(),this.elements=e}}function OI(t,e){let n=UI(e);for(const i of t.elements)n=n.filter((s=>!zr(s,i)));return{arrayValue:{values:n}}}class Mh extends dp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function lb(t){return sn(t.integerValue||t.doubleValue)}function UI(t){return Iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZP(t,e){return t.field.isEqual(e.field)&&(function(i,s){return i instanceof Uc&&s instanceof Uc||i instanceof Fc&&s instanceof Fc?Pl(i.elements,s.elements,zr):i instanceof Mh&&s instanceof Mh?zr(i.Ee,s.Ee):i instanceof Dh&&s instanceof Dh})(t.transform,e.transform)}class eV{constructor(e,n){this.version=e,this.transformResults=n}}class Sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hp{}function FI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mv(t.key,Sr.none()):new Qc(t.key,t.data,Sr.none());{const n=t.data,i=bi.empty();let s=new _n(On.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new ko(t.key,i,new Ui(s.toArray()),Sr.none())}}function tV(t,e,n){t instanceof Qc?(function(s,a,l){const c=s.value.clone(),d=cb(s.fieldTransforms,a,l.transformResults);c.setAll(d),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof ko?(function(s,a,l){if(!oh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=cb(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(qI(s)),d.setAll(c),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function vc(t,e,n,i){return t instanceof Qc?(function(a,l,c,d){if(!oh(a.precondition,l))return c;const h=a.value.clone(),y=fb(a.fieldTransforms,d,l);return h.setAll(y),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof ko?(function(a,l,c,d){if(!oh(a.precondition,l))return c;const h=fb(a.fieldTransforms,d,l),y=l.data;return y.setAll(qI(a)),y.setAll(h),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(t,e,n,i):(function(a,l,c){return oh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function nV(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=VI(i.transform,s||null);a!=null&&(n===null&&(n=bi.empty()),n.set(i.field,a))}return n||null}function ub(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Pl(i,s,((a,l)=>ZP(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qc extends hp{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ko extends hp{constructor(e,n,i,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function qI(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function cb(t,e,n){const i=new Map;Et(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,c=e.data.field(a.field);i.set(a.field,XP(l,c,n[s]))}return i}function fb(t,e,n){const i=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);i.set(s.field,QP(a,l,e))}return i}class Mv extends hp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iV extends hp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&tV(a,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=vc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=vc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=kI();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=n.has(s.key)?null:c;const d=FI(l,c);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((n,i)=>ub(n,i)))&&Pl(this.baseMutations,e.baseMutations,((n,i)=>ub(n,i)))}}class kv{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Et(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=(function(){return KP})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new kv(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,lt;function aV(t){switch(t){case ae.OK:return Le(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Le(15467,{code:t})}}function BI(t){if(t===void 0)return _s("GRPC error has no .code"),ae.UNKNOWN;switch(t){case fn.OK:return ae.OK;case fn.CANCELLED:return ae.CANCELLED;case fn.UNKNOWN:return ae.UNKNOWN;case fn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case fn.INTERNAL:return ae.INTERNAL;case fn.UNAVAILABLE:return ae.UNAVAILABLE;case fn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case fn.NOT_FOUND:return ae.NOT_FOUND;case fn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case fn.ABORTED:return ae.ABORTED;case fn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case fn.DATA_LOSS:return ae.DATA_LOSS;default:return Le(39323,{code:t})}}(lt=fn||(fn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=new yo([4294967295,4294967295],0);function db(t){const e=uI().encode(t),n=new tI;return n.update(e),new Uint8Array(n.digest())}function hb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new yo([n,i],0),new yo([s,a],0)]}class Pv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new oc(`Invalid padding: ${n}`);if(i<0)throw new oc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new oc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=yo.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(yo.fromNumber(i)));return s.compare(lV)===1&&(s=new yo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=db(e),[i,s]=hb(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);if(!this.ye(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Pv(a,s,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=db(e),[i,s]=hb(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(i,s,a);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,i,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Xc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new pp(Ue.min(),s,new Gt($e),Es(),nt())}}class Xc{constructor(e,n,i,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Xc(i,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class zI{constructor(e,n){this.targetId=e,this.De=n}}class HI{constructor(e,n,i=Un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class pb{constructor(){this.ve=0,this.Ce=mb(),this.Fe=Un.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=nt(),n=nt(),i=nt();return this.Ce.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Le(38017,{changeType:a})}})),new Xc(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=mb()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class uV{constructor(e){this.We=e,this.Ge=new Map,this.ze=Es(),this.je=Md(),this.Je=Md(),this.He=new Gt($e)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const a=s.target;if(Ey(a))if(i===0){const l=new Ne(a.path);this.Xe(n,l,Yn.newNoDocument(l,Ue.min()))}else Et(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),d=c?this.ut(c,e,l):1;if(d!==0){this.rt(n);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;let l,c;try{l=Ao(i).toUint8Array()}catch(d){if(d instanceof pI)return To("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Pv(l,s,a)}catch(d){return To(d instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach((a=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,a,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((a,l)=>{const c=this.st(l);if(c){if(a.current&&Ey(c.target)){const d=new Ne(c.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,Yn.newNoDocument(d,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}}));let i=nt();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((d=>{const h=this.st(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.ze.forEach(((a,l)=>l.setReadTime(e)));const s=new pp(e,n,this.He,this.ze,i);return this.ze=Es(),this.je=Md(),this.Je=Md(),this.He=new Gt($e),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new pb,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new _n($e),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new _n($e),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new pb),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Md(){return new Gt(Ne.comparator)}function mb(){return new Gt(Ne.comparator)}const cV={asc:"ASCENDING",desc:"DESCENDING"},fV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dV={and:"AND",or:"OR"};class hV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function by(t,e){return t.useProto3Json||lp(e)?e:{value:e}}function kh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pV(t,e){return kh(t,e.toTimestamp())}function Fr(t){return Et(!!t,49232),Ue.fromTimestamp((function(n){const i=bo(n);return new Ut(i.seconds,i.nanos)})(t))}function Vv(t,e){return Ay(t,e).canonicalString()}function Ay(t,e){const n=(function(s){return new Dt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function jI(t){const e=Dt.fromString(t);return Et(WI(e),10190,{key:e.toString()}),e}function wy(t,e){return Vv(t.databaseId,e.path)}function jg(t,e){const n=jI(e);if(n.get(1)!==t.databaseId.projectId)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne($I(n))}function KI(t,e){return Vv(t.databaseId,e)}function mV(t){const e=jI(t);return e.length===4?Dt.emptyPath():$I(e)}function Cy(t){return new Dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $I(t){return Et(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gb(t,e,n){return{name:wy(t,e),fields:n.value.mapValue.fields}}function gV(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Le(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,y){return h.useProto3Json?(Et(y===void 0||typeof y=="string",58123),Un.fromBase64String(y||"")):(Et(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Un.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(h){const y=h.code===void 0?ae.UNKNOWN:BI(h.code);return new Te(y,h.message||"")})(l);n=new HI(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=jg(t,i.document.name),a=Fr(i.document.updateTime),l=i.document.createTime?Fr(i.document.createTime):Ue.min(),c=new bi({mapValue:{fields:i.document.fields}}),d=Yn.newFoundDocument(s,a,l,c),h=i.targetIds||[],y=i.removedTargetIds||[];n=new ah(h,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=jg(t,i.document),a=i.readTime?Fr(i.readTime):Ue.min(),l=Yn.newNoDocument(s,a),c=i.removedTargetIds||[];n=new ah([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=jg(t,i.document),a=i.removedTargetIds||[];n=new ah([],a,s,null)}else{if(!("filter"in e))return Le(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new oV(s,a),c=i.targetId;n=new zI(c,l)}}return n}function yV(t,e){let n;if(e instanceof Qc)n={update:gb(t,e.key,e.value)};else if(e instanceof Mv)n={delete:wy(t,e.key)};else if(e instanceof ko)n={update:gb(t,e.key,e.data),updateMask:CV(e.fieldMask)};else{if(!(e instanceof iV))return Le(16599,{Rt:e.type});n={verify:wy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof Dh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Uc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Mh)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Le(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:pV(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Le(27497)})(t,e.precondition)),n}function vV(t,e){return t&&t.length>0?(Et(e!==void 0,14353),t.map((n=>(function(s,a){let l=s.updateTime?Fr(s.updateTime):Fr(a);return l.isEqual(Ue.min())&&(l=Fr(a)),new eV(l,s.transformResults||[])})(n,e)))):[]}function _V(t,e){return{documents:[KI(t,e.path)]}}function EV(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=KI(t,s);const a=(function(h){if(h.length!==0)return YI(br.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((y=>(function(T){return{field:vl(T.field),direction:bV(T.dir)}})(y)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=by(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{Vt:n,parent:s}}function TV(t){let e=mV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Et(i===1,65062);const y=n.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];n.where&&(a=(function(E){const T=JI(E);return T instanceof br&&AI(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(E){return E.map((T=>(function(D){return new Nh(_l(D.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(E){let T;return T=typeof E=="object"?E.value:E,lp(T)?null:T})(n.limit));let d=null;n.startAt&&(d=(function(E){const T=!!E.before,w=E.values||[];return new Rh(w,T)})(n.startAt));let h=null;return n.endAt&&(h=(function(E){const T=!E.before,w=E.values||[];return new Rh(w,T)})(n.endAt)),BP(e,s,l,a,c,"F",d,h)}function SV(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JI(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_l(n.unaryFilter.field);return dn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=_l(n.unaryFilter.field);return dn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=_l(n.unaryFilter.field);return dn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=_l(n.unaryFilter.field);return dn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(t):t.fieldFilter!==void 0?(function(n){return dn.create(_l(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return br.create(n.compositeFilter.filters.map((i=>JI(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(n.compositeFilter.op))})(t):Le(30097,{filter:t})}function bV(t){return cV[t]}function AV(t){return fV[t]}function wV(t){return dV[t]}function vl(t){return{fieldPath:t.canonicalString()}}function _l(t){return On.fromServerFormat(t.fieldPath)}function YI(t){return t instanceof dn?(function(n){if(n.op==="=="){if(ib(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NAN"}};if(nb(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ib(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NOT_NAN"}};if(nb(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(n.field),op:AV(n.op),value:n.value}}})(t):t instanceof br?(function(n){const i=n.getFilters().map((s=>YI(s)));return i.length===1?i[0]:{compositeFilter:{op:wV(n.op),filters:i}}})(t):Le(54877,{filter:t})}function CV(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function WI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,i,s,a=Ue.min(),l=Ue.min(),c=Un.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.gt=e}}function xV(t){const e=TV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.Dn=new NV}addToCollectionParentIndex(e,n){return this.Dn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(So.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(So.min())}updateCollectionGroup(e,n,i){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class NV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new _n(Dt.comparator),a=!s.has(i);return this.index[n]=s.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new _n(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QI=41943040;class Ti{static withCacheSize(e){return new Ti(e,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(QI,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ol(0)}static ur(){return new Ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="LruGarbageCollector",DV=1048576;function _b([t,e],[n,i]){const s=$e(t,n);return s===0?$e(e,i):s}class MV{constructor(e){this.Tr=e,this.buffer=new _n(_b),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();_b(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ee(vb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kl(n)?Ee(vb,"Ignoring IndexedDB error during garbage collection: ",n):await jl(n)}await this.Rr(3e5)}))}}class PV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(ap.ue);const i=new MV(n);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(yb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yb):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,a,l,c,d,h;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,c=Date.now(),this.removeTargets(e,i,n)))).next((E=>(a=E,d=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),gl()<=tt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${E} documents in `+(h-d)+`ms
Total Duration: ${h-y}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function VV(t,e){return new PV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.changes=new wa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ue.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(i!==null&&vc(i.mutation,s,Ui.empty(),Ut.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,nt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=nt()){const s=ua();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,i).next((a=>{let l=sc();return a.forEach(((c,d)=>{l=l.insert(c,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=ua();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,nt())))}populateOverlays(e,n,i){const s=[];return i.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,s){let a=Es();const l=yc(),c=(function(){return yc()})();return n.forEach(((d,h)=>{const y=i.get(h.key);s.has(h.key)&&(y===void 0||y.mutation instanceof ko)?a=a.insert(h.key,h):y!==void 0?(l.set(h.key,y.mutation.getFieldMask()),vc(y.mutation,h,y.mutation.getFieldMask(),Ut.now())):l.set(h.key,Ui.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,y)=>l.set(h,y))),n.forEach(((h,y)=>{var E;return c.set(h,new OV(y,(E=l.get(h))!==null&&E!==void 0?E:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=yc();let s=new Gt(((l,c)=>l-c)),a=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((d=>{const h=n.get(d);if(h===null)return;let y=i.get(d)||Ui.empty();y=c.applyToLocalView(h,y),i.set(d,y);const E=(s.get(c.batchId)||nt()).add(d);s=s.insert(c.batchId,E)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,y=d.value,E=kI();y.forEach((T=>{if(!a.has(T)){const w=FI(n.get(T),i.get(T));w!==null&&E.set(T,w),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,E))}return ue.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,s){return(function(l){return Ne.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-a.size):ue.resolve(ua());let c=Pc,d=a;return l.next((h=>ue.forEach(h,((y,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),a.get(y)?ue.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{d=d.insert(y,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,nt()))).next((y=>({batchId:c,changes:MI(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((i=>{let s=sc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const a=n.collectionGroup;let l=sc();return this.indexManager.getCollectionParents(e,a).next((c=>ue.forEach(c,(d=>{const h=(function(E,T){return new Wc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((y=>{y.forEach(((E,T)=>{l=l.insert(E,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,s)))).next((l=>{a.forEach(((d,h)=>{const y=h.getKey();l.get(y)===null&&(l=l.insert(y,Yn.newInvalidDocument(y)))}));let c=sc();return l.forEach(((d,h)=>{const y=a.get(d);y!==void 0&&vc(y.mutation,h,Ui.empty(),Ut.now()),fp(n,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Fr(s.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:xV(s.bundledQuery),readTime:Fr(s.readTime)}})(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this.overlays=new Gt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ua();return ue.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((s,a)=>{this.wt(e,n,a)})),ue.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.kr.delete(i)),ue.resolve()}getOverlaysForCollection(e,n,i){const s=ua(),a=n.length+1,l=new Ne(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>i&&s.set(d.getKey(),d)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let a=new Gt(((h,y)=>h-y));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let y=a.get(h.largestBatchId);y===null&&(y=ua(),a=a.insert(h.largestBatchId,y)),y.set(h.getKey(),h)}}const c=ua(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,y)=>c.set(h,y))),!(c.size()>=s)););return ue.resolve(c)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new sV(n,i));let a=this.kr.get(n);a===void 0&&(a=nt(),this.kr.set(n,a)),this.kr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.qr=new _n(Rn.Qr),this.$r=new _n(Rn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new Rn(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Rn(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Ne(new Dt([])),i=new Rn(n,e),s=new Rn(n,e+1),a=[];return this.$r.forEachInRange([i,s],(l=>{this.Wr(l),a.push(l.key)})),a}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Dt([])),i=new Rn(n,e),s=new Rn(n,e+1);let a=nt();return this.$r.forEachInRange([i,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new Rn(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Rn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||$e(e.Hr,n.Hr)}static Ur(e,n){return $e(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new _n(Rn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new rV(a,n,i,s);this.mutationQueue.push(l);for(const c of s)this.Yr=this.Yr.add(new Rn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),a=s<0?0:s;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?wv:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Rn(n,0),s=new Rn(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,s],(l=>{const c=this.Zr(l.Hr);a.push(c)})),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new _n($e);return n.forEach((s=>{const a=new Rn(s,0),l=new Rn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],(c=>{i=i.add(c.Hr)}))})),ue.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let a=i;Ne.isDocumentKey(a)||(a=a.child(""));const l=new Rn(new Ne(a),0);let c=new _n($e);return this.Yr.forEachWhile((d=>{const h=d.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Hr)),!0)}),l),ue.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Et(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ue.forEach(n.mutations,(s=>{const a=new Rn(s.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new Rn(n,0),s=this.Yr.firstAfterOrEqual(i);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.ni=e,this.docs=(function(){return new Gt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),a=s?s.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ue.resolve(i?i.document.mutableCopy():Yn.newInvalidDocument(n))}getEntries(e,n){let i=Es();return n.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Yn.newInvalidDocument(s))})),ue.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let a=Es();const l=n.path,c=new Ne(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:y}}=d.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||_P(vP(y),i)<=0||(s.has(y.key)||fp(n,y))&&(a=a.insert(y.key,y.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,i,s){Le(9500)}ri(e,n){return ue.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new GV(this)}getSize(e){return ue.resolve(this.size)}}class GV extends LV{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)})),ue.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.persistence=e,this.ii=new wa((n=>xv(n)),Rv),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.si=0,this.oi=new Lv,this.targetCount=0,this._i=Ol.ar()}forEachTarget(e,n){return this.ii.forEach(((i,s)=>n(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),ue.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ol(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.hr(n),ue.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,i){let s=0;const a=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ue.waitFor(a).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return ue.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),ue.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return ue.resolve(i)}containsKey(e,n){return ue.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.ai={},this.overlays={},this.ui=new ap(0),this.ci=!1,this.ci=!0,this.li=new BV,this.referenceDelegate=e(this),this.hi=new jV(this),this.indexManager=new RV,this.remoteDocumentCache=(function(s){return new HV(s)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new IV(n),this.Ti=new FV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new zV(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){Ee("MemoryPersistence","Starting transaction:",e);const s=new KV(this.ui.next());return this.referenceDelegate.Ii(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,n){return ue.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class KV extends TP{constructor(e){super(),this.currentSequenceNumber=e}}class Ov{constructor(e){this.persistence=e,this.Ai=new Lv,this.Ri=null}static Vi(e){return new Ov(e)}get mi(){if(this.Ri)return this.Ri;throw Le(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),ue.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.mi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,(i=>{const s=Ne.fromPath(i);return this.fi(e,s).next((a=>{a||n.removeEntry(s,Ue.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return ue.or([()=>ue.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ph{constructor(e,n){this.persistence=e,this.gi=new wa((i=>AP(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=VV(this,n)}static Vi(e,n){return new Ph(e,n)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((s=>i+s))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return ue.forEach(this.gi,((i,s)=>this.Sr(e,i,s).next((a=>a?ue.resolve():n(s)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,a.removeEntry(l,Ue.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rh(e.data.value)),n}Sr(e,n,i){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ue.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=nt(),s=nt();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Uv(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return wD()?8:SP(Qn())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const a={result:null};return this.ps(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ys(e,n,s,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new $V;return this.ws(e,n,l).next((c=>{if(a.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>a.result))}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(gl()<=tt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(gl()<=tt.DEBUG&&Ee("QueryEngine","Query:",yl(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(gl()<=tt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(n))):ue.resolve())}ps(e,n){if(ab(n))return ue.resolve(null);let i=Ur(n);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Sy(n,null,"F"),i=Ur(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=nt(...a);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((d=>{const h=this.bs(n,c);return this.Ds(n,h,l,d.readTime)?this.ps(e,Sy(n,null,"F")):this.vs(e,h,n,d)}))))})))))}ys(e,n,i,s){return ab(n)||s.isEqual(Ue.min())?ue.resolve(null):this.gs.getDocuments(e,i).next((a=>{const l=this.bs(n,a);return this.Ds(n,l,i,s)?ue.resolve(null):(gl()<=tt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yl(n)),this.vs(e,l,n,yP(s,Pc)).next((c=>c)))}))}bs(e,n){let i=new _n(NI(e));return n.forEach(((s,a)=>{fp(e,a)&&(i=i.add(a))})),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,i){return gl()<=tt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",yl(n)),this.gs.getDocumentsMatchingQuery(e,n,So.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="LocalStore",YV=3e8;class WV{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Gt($e),this.Ms=new wa((a=>xv(a)),Rv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function QV(t,e,n,i){return new WV(t,e,n,i)}async function ZI(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let d=nt();for(const h of s){l.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}for(const h of a){c.push(h.batchId);for(const y of h.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(i,d).next((h=>({Bs:h,removedBatchIds:l,addedBatchIds:c})))}))}))}function XV(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,y){const E=h.batch,T=E.keys();let w=ue.resolve();return T.forEach((D=>{w=w.next((()=>y.getEntry(d,D))).next((V=>{const L=h.docVersions.get(D);Et(L!==null,48541),V.version.compareTo(L)<0&&(E.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),y.addEntry(V)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(d,E)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let d=nt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(i,s)))}))}function ex(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function ZV(t,e){const n=Be(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const c=[];e.targetChanges.forEach(((y,E)=>{const T=s.get(E);if(!T)return;c.push(n.hi.removeMatchingKeys(a,y.removedDocuments,E).next((()=>n.hi.addMatchingKeys(a,y.addedDocuments,E))));let w=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Un.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),s=s.insert(E,w),(function(V,L,H){return V.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=YV?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,w,y)&&c.push(n.hi.updateTargetData(a,w))}));let d=Es(),h=nt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,y))})),c.push(eL(a,l,e.documentUpdates).next((y=>{d=y.Ls,h=y.ks}))),!i.isEqual(Ue.min())){const y=n.hi.getLastRemoteSnapshotVersion(a).next((E=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(y)}return ue.waitFor(c).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(n.Fs=s,a)))}function eL(t,e,n){let i=nt(),s=nt();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let l=Es();return n.forEach(((c,d)=>{const h=a.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Ue.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):Ee(Fv,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ls:l,ks:s}}))}function tL(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function nL(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return n.hi.getTargetData(i,e).next((a=>a?(s=a,ue.resolve(s)):n.hi.allocateTargetId(i).next((l=>(s=new ho(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function Iy(t,e,n){const i=Be(t),s=i.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Kl(l))throw l;Ee(Fv,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function Eb(t,e,n){const i=Be(t);let s=Ue.min(),a=nt();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,h,y){const E=Be(d),T=E.Ms.get(y);return T!==void 0?ue.resolve(E.Fs.get(T)):E.hi.getTargetData(h,y)})(i,l,Ur(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((d=>{a=d}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:Ue.min(),n?a:nt()))).next((c=>(iL(i,HP(e),c),{documents:c,qs:a})))))}function iL(t,e,n){let i=t.xs.get(e)||Ue.min();n.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.xs.set(e,i)}class Tb{constructor(){this.activeTargetIds=YP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rL{constructor(){this.Fo=new Tb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Tb,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="ConnectivityMonitor";class bb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ee(Sb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ee(Sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=null;function xy(){return kd===null?kd=(function(){return 268435456+Math.round(2147483648*Math.random())})():kd++,"0x"+kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="RestConnection",oL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Ih?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,a){const l=xy(),c=this.Go(e,n.toUriEncodedString());Ee(Kg,`Sending RPC '${e}' ${l}:`,c,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,a);const{host:h}=new URL(c),y=xo(h);return this.jo(e,c,d,i,y).then((E=>(Ee(Kg,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw To(Kg,`RPC '${e}' ${l} failed with error: `,E,"url: ",c,"request:",i),E}))}Jo(e,n,i,s,a,l){return this.Wo(e,n,i,s,a)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Go(e,n){const i=oL[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class uL extends aL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,a){const l=xy();return new Promise(((c,d)=>{const h=new nI;h.setWithCredentials(!0),h.listenOnce(iI.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case ih.NO_ERROR:const E=h.getResponseJson();Ee(jn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case ih.TIMEOUT:Ee(jn,`RPC '${e}' ${l} timed out`),d(new Te(ae.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const T=h.getStatus();if(Ee(jn,`RPC '${e}' ${l} failed with status:`,T,"response text:",h.getResponseText()),T>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const D=w==null?void 0:w.error;if(D&&D.status&&D.message){const V=(function(H){const F=H.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(F)>=0?F:ae.UNKNOWN})(D.status);d(new Te(V,D.message))}else d(new Te(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new Te(ae.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{c_:e,streamId:l,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{Ee(jn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(s);Ee(jn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",y,i,15)}))}P_(e,n,i){const s=xy(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=oI(),c=sI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const y=a.join("");Ee(jn,`Creating RPC '${e}' stream ${s}: ${y}`,d);const E=l.createWebChannel(y,d);this.T_(E);let T=!1,w=!1;const D=new lL({Ho:L=>{w?Ee(jn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(T||(Ee(jn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),T=!0),Ee(jn,`RPC '${e}' stream ${s} sending:`,L),E.send(L))},Yo:()=>E.close()}),V=(L,H,F)=>{L.listen(H,(q=>{try{F(q)}catch($){setTimeout((()=>{throw $}),0)}}))};return V(E,rc.EventType.OPEN,(()=>{w||(Ee(jn,`RPC '${e}' stream ${s} transport opened.`),D.s_())})),V(E,rc.EventType.CLOSE,(()=>{w||(w=!0,Ee(jn,`RPC '${e}' stream ${s} transport closed`),D.__(),this.I_(E))})),V(E,rc.EventType.ERROR,(L=>{w||(w=!0,To(jn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),D.__(new Te(ae.UNAVAILABLE,"The operation could not be completed")))})),V(E,rc.EventType.MESSAGE,(L=>{var H;if(!w){const F=L.data[0];Et(!!F,16349);const q=F,$=(q==null?void 0:q.error)||((H=q[0])===null||H===void 0?void 0:H.error);if($){Ee(jn,`RPC '${e}' stream ${s} received error:`,$);const Z=$.status;let G=(function(R){const P=fn[R];if(P!==void 0)return BI(P)})(Z),I=$.message;G===void 0&&(G=ae.INTERNAL,I="Unknown error status: "+Z+" with message "+$.message),w=!0,D.__(new Te(G,I)),E.close()}else Ee(jn,`RPC '${e}' stream ${s} received:`,F),D.a_(F)}})),V(c,rI.STAT_EVENT,(L=>{L.stat===my.PROXY?Ee(jn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===my.NOPROXY&&Ee(jn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{D.o_()}),0),D}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function $g(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t){return new hV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,i=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="PersistentStream";class nx{constructor(e,n,i,s,a,l,c,d){this.Fi=e,this.w_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tx(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(_s(n.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.b_===n&&this.W_(i,s)}),(i=>{e((()=>{const s=new Te(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{i((()=>this.G_(s)))})),this.stream.onMessage((s=>{i((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ee(Ab,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(Ee(Ab,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cL extends nx{constructor(e,n,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=gV(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ue.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ue.min():l.readTime?Fr(l.readTime):Ue.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Cy(this.serializer),n.addTarget=(function(a,l){let c;const d=l.target;if(c=Ey(d)?{documents:_V(a,d)}:{query:EV(a,d).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=GI(a,l.resumeToken);const h=by(a,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Ue.min())>0){c.readTime=kh(a,l.snapshotVersion.toTimestamp());const h=by(a,l.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=SV(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Cy(this.serializer),n.removeTarget=e,this.k_(n)}}class fL extends nx{constructor(e,n,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=vV(e.writeResults,e.commitTime),i=Fr(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Cy(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>yV(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{}class hL extends dL{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,Ay(n,i),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(ae.UNKNOWN,a.toString())}))}Jo(e,n,i,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,Ay(n,i),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(ae.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class pL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_s(n),this._a=!1):Ee("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class mL{constructor(e,n,i,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{Ca(this)&&(Ee(Ta,"Restarting streams for network reachability change."),await(async function(d){const h=Be(d);h.Ia.add(4),await Zc(h),h.Aa.set("Unknown"),h.Ia.delete(4),await gp(h)})(this))}))})),this.Aa=new pL(i,s)}}async function gp(t){if(Ca(t))for(const e of t.da)await e(!0)}async function Zc(t){for(const e of t.da)await e(!1)}function ix(t,e){const n=Be(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Hv(n)?zv(n):$l(n).x_()&&Bv(n,e))}function qv(t,e){const n=Be(t),i=$l(n);n.Ta.delete(e),i.x_()&&rx(n,e),n.Ta.size===0&&(i.x_()?i.B_():Ca(n)&&n.Aa.set("Unknown"))}function Bv(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$l(t).H_(e)}function rx(t,e){t.Ra.$e(e),$l(t).Y_(e)}function zv(t){t.Ra=new uV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),$l(t).start(),t.Aa.aa()}function Hv(t){return Ca(t)&&!$l(t).M_()&&t.Ta.size>0}function Ca(t){return Be(t).Ia.size===0}function sx(t){t.Ra=void 0}async function gL(t){t.Aa.set("Online")}async function yL(t){t.Ta.forEach(((e,n)=>{Bv(t,e)}))}async function vL(t,e){sx(t),Hv(t)?(t.Aa.la(e),zv(t)):t.Aa.set("Unknown")}async function _L(t,e,n){if(t.Aa.set("Online"),e instanceof HI&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ta.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ta.delete(c),s.Ra.removeTarget(c))})(t,e)}catch(i){Ee(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vh(t,i)}else if(e instanceof ah?t.Ra.Ye(e):e instanceof zI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ue.min()))try{const i=await ex(t.localStore);n.compareTo(i)>=0&&await(function(a,l){const c=a.Ra.Pt(l);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const y=a.Ta.get(h);y&&a.Ta.set(h,y.withResumeToken(d.resumeToken,l))}})),c.targetMismatches.forEach(((d,h)=>{const y=a.Ta.get(d);if(!y)return;a.Ta.set(d,y.withResumeToken(Un.EMPTY_BYTE_STRING,y.snapshotVersion)),rx(a,d);const E=new ho(y.target,d,h,y.sequenceNumber);Bv(a,E)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){Ee(Ta,"Failed to raise snapshot:",i),await Vh(t,i)}}async function Vh(t,e,n){if(!Kl(e))throw e;t.Ia.add(1),await Zc(t),t.Aa.set("Offline"),n||(n=()=>ex(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ee(Ta,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await gp(t)}))}function ox(t,e){return e().catch((n=>Vh(t,n,e)))}async function yp(t){const e=Be(t),n=Co(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:wv;for(;EL(e);)try{const s=await tL(e.localStore,i);if(s===null){e.Pa.length===0&&n.B_();break}i=s.batchId,TL(e,s)}catch(s){await Vh(e,s)}ax(e)&&lx(e)}function EL(t){return Ca(t)&&t.Pa.length<10}function TL(t,e){t.Pa.push(e);const n=Co(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function ax(t){return Ca(t)&&!Co(t).M_()&&t.Pa.length>0}function lx(t){Co(t).start()}async function SL(t){Co(t).na()}async function bL(t){const e=Co(t);for(const n of t.Pa)e.X_(n.mutations)}async function AL(t,e,n){const i=t.Pa.shift(),s=kv.from(i,e,n);await ox(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await yp(t)}async function wL(t,e){e&&Co(t).Z_&&await(async function(i,s){if((function(l){return aV(l)&&l!==ae.ABORTED})(s.code)){const a=i.Pa.shift();Co(i).N_(),await ox(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await yp(i)}})(t,e),ax(t)&&lx(t)}async function wb(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),Ee(Ta,"RemoteStore received new credentials");const i=Ca(n);n.Ia.add(3),await Zc(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await gp(n)}async function CL(t,e){const n=Be(t);e?(n.Ia.delete(2),await gp(n)):e||(n.Ia.add(2),await Zc(n),n.Aa.set("Unknown"))}function $l(t){return t.Va||(t.Va=(function(n,i,s){const a=Be(n);return a.ia(),new cL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:gL.bind(null,t),e_:yL.bind(null,t),n_:vL.bind(null,t),J_:_L.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),Hv(t)?zv(t):t.Aa.set("Unknown")):(await t.Va.stop(),sx(t))}))),t.Va}function Co(t){return t.ma||(t.ma=(function(n,i,s){const a=Be(n);return a.ia(),new fL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:SL.bind(null,t),n_:wL.bind(null,t),ea:bL.bind(null,t),ta:AL.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await yp(t)):(await t.ma.stop(),t.Pa.length>0&&(Ee(Ta,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){const l=Date.now()+i,c=new Gv(e,n,l,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jv(t,e){if(_s("AsyncQueue",`${e}: ${t}`),Kl(t))return new Te(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{static emptySet(e){return new Cl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=sc(),this.sortedSet=new Gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Cl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.fa=new Gt(Ne.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Le(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Ul{constructor(e,n,i,s,a,l,c,d,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,a){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Ul(e,n,Cl.emptySet(n),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class xL{constructor(){this.queries=Ib(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=Be(n),a=s.queries;s.queries=Ib(),a.forEach(((l,c)=>{for(const d of c.wa)d.onError(i)}))})(this,new Te(ae.ABORTED,"Firestore shutting down"))}}function Ib(){return new wa((t=>RI(t)),cp)}async function RL(t,e){const n=Be(t);let i=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(i=2):(a=new IL,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=jv(l,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Kv(n)}async function NL(t,e){const n=Be(t),i=e.query;let s=3;const a=n.queries.get(i);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function DL(t,e){const n=Be(t);let i=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const c of l.wa)c.Ca(s)&&(i=!0);l.ya=s}}i&&Kv(n)}function ML(t,e,n){const i=Be(t),s=i.queries.get(e);if(s)for(const a of s.wa)a.onError(n);i.queries.delete(e)}function Kv(t){t.Da.forEach((e=>{e.next()}))}var Ry,xb;(xb=Ry||(Ry={})).Fa="default",xb.Cache="cache";class kL{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ul(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ry.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.key=e}}class cx{constructor(e){this.key=e}}class PL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=nt(),this.mutatedKeys=nt(),this.Xa=NI(e),this.eu=new Cl(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Cb,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const T=s.get(y),w=fp(this.query,E)?E:null,D=!!T&&this.mutatedKeys.has(T.key),V=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let L=!1;T&&w?T.data.isEqual(w.data)?D!==V&&(i.track({type:3,doc:w}),L=!0):this.iu(T,w)||(i.track({type:2,doc:w}),L=!0,(d&&this.Xa(w,d)>0||h&&this.Xa(w,h)<0)&&(c=!0)):!T&&w?(i.track({type:0,doc:w}),L=!0):T&&!w&&(i.track({type:1,doc:T}),L=!0,(d||h)&&(c=!0)),L&&(w?(l=l.add(w),a=V?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{eu:l,ru:i,Ds:c,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((y,E)=>(function(w,D){const V=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{At:L})}};return V(w)-V(D)})(y.type,E.type)||this.Xa(y.doc,E.doc))),this.su(i),s=s!=null&&s;const c=n&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,h=d!==this.Ya;return this.Ya=d,l.length!==0||h?{snapshot:new Ul(this.query,e.eu,a,l,e.mutatedKeys,d===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Cb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=nt(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new cx(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new ux(i))})),n}uu(e){this.Ha=e.qs,this.Za=nt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ul.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const $v="SyncEngine";class VL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class LL{constructor(e){this.key=e,this.lu=!1}}class OL{constructor(e,n,i,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new wa((c=>RI(c)),cp),this.Tu=new Map,this.Iu=new Set,this.du=new Gt(Ne.comparator),this.Eu=new Map,this.Au=new Lv,this.Ru={},this.Vu=new Map,this.mu=Ol.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function UL(t,e,n=!0){const i=gx(t);let s;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await fx(i,e,n,!0),s}async function FL(t,e){const n=gx(t);await fx(n,e,!0,!1)}async function fx(t,e,n,i){const s=await nL(t.localStore,Ur(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let c;return i&&(c=await qL(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&ix(t.remoteStore,s),c}async function qL(t,e,n,i,s){t.gu=(E,T,w)=>(async function(V,L,H,F){let q=L.view.nu(H);q.Ds&&(q=await Eb(V.localStore,L.query,!1).then((({documents:I})=>L.view.nu(I,q))));const $=F&&F.targetChanges.get(L.targetId),Z=F&&F.targetMismatches.get(L.targetId)!=null,G=L.view.applyChanges(q,V.isPrimaryClient,$,Z);return Nb(V,L.targetId,G._u),G.snapshot})(t,E,T,w);const a=await Eb(t.localStore,e,!0),l=new PL(e,a.qs),c=l.nu(a.documents),d=Xc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,d);Nb(t,n,h._u);const y=new VL(e,n,l);return t.Pu.set(e,y),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function BL(t,e,n){const i=Be(t),s=i.Pu.get(e),a=i.Tu.get(s.targetId);if(a.length>1)return i.Tu.set(s.targetId,a.filter((l=>!cp(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Iy(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),n&&qv(i.remoteStore,s.targetId),Ny(i,s.targetId)})).catch(jl)):(Ny(i,s.targetId),await Iy(i.localStore,s.targetId,!0))}async function zL(t,e){const n=Be(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),qv(n.remoteStore,i.targetId))}async function HL(t,e,n){const i=WL(t);try{const s=await(function(l,c){const d=Be(l),h=Ut.now(),y=c.reduce(((w,D)=>w.add(D.key)),nt());let E,T;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let D=Es(),V=nt();return d.Os.getEntries(w,y).next((L=>{D=L,D.forEach(((H,F)=>{F.isValidDocument()||(V=V.add(H))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,D))).next((L=>{E=L;const H=[];for(const F of c){const q=nV(F,E.get(F.key).overlayedDocument);q!=null&&H.push(new ko(F.key,q,TI(q.value.mapValue),Sr.exists(!0)))}return d.mutationQueue.addMutationBatch(w,h,H,c)})).next((L=>{T=L;const H=L.applyToLocalDocumentSet(E,V);return d.documentOverlayCache.saveOverlays(w,L.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:MI(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,d){let h=l.Ru[l.currentUser.toKey()];h||(h=new Gt($e)),h=h.insert(c,d),l.Ru[l.currentUser.toKey()]=h})(i,s.batchId,n),await ef(i,s.changes),await yp(i.remoteStore)}catch(s){const a=jv(s,"Failed to persist write");n.reject(a)}}async function dx(t,e){const n=Be(t);try{const i=await ZV(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Eu.get(a);l&&(Et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?Et(l.lu,14607):s.removedDocuments.size>0&&(Et(l.lu,42227),l.lu=!1))})),await ef(n,i,e)}catch(i){await jl(i)}}function Rb(t,e,n){const i=Be(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const d=Be(l);d.onlineState=c;let h=!1;d.queries.forEach(((y,E)=>{for(const T of E.wa)T.va(c)&&(h=!0)})),h&&Kv(d)})(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GL(t,e,n){const i=Be(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),a=s&&s.key;if(a){let l=new Gt(Ne.comparator);l=l.insert(a,Yn.newNoDocument(a,Ue.min()));const c=nt().add(a),d=new pp(Ue.min(),new Map,new Gt($e),l,c);await dx(i,d),i.du=i.du.remove(a),i.Eu.delete(e),Jv(i)}else await Iy(i.localStore,e,!1).then((()=>Ny(i,e,n))).catch(jl)}async function jL(t,e){const n=Be(t),i=e.batch.batchId;try{const s=await XV(n.localStore,e);px(n,i,null),hx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ef(n,s)}catch(s){await jl(s)}}async function KL(t,e,n){const i=Be(t);try{const s=await(function(l,c){const d=Be(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let y;return d.mutationQueue.lookupMutationBatch(h,c).next((E=>(Et(E!==null,37113),y=E.keys(),d.mutationQueue.removeMutationBatch(h,E)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,y,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,y))).next((()=>d.localDocuments.getDocuments(h,y)))}))})(i.localStore,e);px(i,e,n),hx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await ef(i,s)}catch(s){await jl(s)}}function hx(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function px(t,e,n){const i=Be(t);let s=i.Ru[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function Ny(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||mx(t,i)}))}function mx(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(qv(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Jv(t))}function Nb(t,e,n){for(const i of n)i instanceof ux?(t.Au.addReference(i.key,e),$L(t,i)):i instanceof cx?(Ee($v,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||mx(t,i.key)):Le(19791,{yu:i})}function $L(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(Ee($v,"New document in limbo: "+n),t.Iu.add(i),Jv(t))}function Jv(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne(Dt.fromString(e)),i=t.mu.next();t.Eu.set(i,new LL(n)),t.du=t.du.insert(n,i),ix(t.remoteStore,new ho(Ur(Nv(n.path)),i,"TargetPurposeLimboResolution",ap.ue))}}async function ef(t,e,n){const i=Be(t),s=[],a=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,d)=>{l.push(i.gu(d,e,n).then((h=>{var y;if((h||n)&&i.isPrimaryClient){const E=h?!h.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(d.targetId,E?"current":"not-current")}if(h){s.push(h);const E=Uv.Es(d.targetId,h);a.push(E)}})))})),await Promise.all(l),i.hu.J_(s),await(async function(d,h){const y=Be(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(h,(T=>ue.forEach(T.Is,(w=>y.persistence.referenceDelegate.addReference(E,T.targetId,w))).next((()=>ue.forEach(T.ds,(w=>y.persistence.referenceDelegate.removeReference(E,T.targetId,w)))))))))}catch(E){if(!Kl(E))throw E;Ee(Fv,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const w=y.Fs.get(T),D=w.snapshotVersion,V=w.withLastLimboFreeSnapshotVersion(D);y.Fs=y.Fs.insert(T,V)}}})(i.localStore,a))}async function JL(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){Ee($v,"User change. New user:",e.toKey());const i=await ZI(n.localStore,e);n.currentUser=e,(function(a,l){a.Vu.forEach((c=>{c.forEach((d=>{d.reject(new Te(ae.CANCELLED,l))}))})),a.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ef(n,i.Bs)}}function YL(t,e){const n=Be(t),i=n.Eu.get(e);if(i&&i.lu)return nt().add(i.key);{let s=nt();const a=n.Tu.get(e);if(!a)return s;for(const l of a){const c=n.Pu.get(l);s=s.unionWith(c.view.tu)}return s}}function gx(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GL.bind(null,e),e.hu.J_=DL.bind(null,e.eventManager),e.hu.pu=ML.bind(null,e.eventManager),e}function WL(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KL.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return QV(this.persistence,new JV,e.initialUser,this.serializer)}Du(e){return new XI(Ov.Vi,this.serializer)}bu(e){return new rL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class QL extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Et(this.persistence.referenceDelegate instanceof Ph,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new kV(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new XI((i=>Ph.Vi(i,n)),this.serializer)}}class Dy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Rb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JL.bind(null,this.syncEngine),await CL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xL})()}createDatastore(e){const n=mp(e.databaseInfo.databaseId),i=(function(a){return new uL(a)})(e.databaseInfo);return(function(a,l,c,d){return new hL(a,l,c,d)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,s,a,l,c){return new mL(i,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Rb(this.syncEngine,n,0)),(function(){return bb.C()?new bb:new sL})())}createSyncEngine(e,n){return(function(s,a,l,c,d,h,y){const E=new OL(s,a,l,c,d,h);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const a=Be(s);Ee(Ta,"RemoteStore shutting down."),a.Ia.add(5),await Zc(a),a.Ea.shutdown(),a.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dy.provider={build:()=>new Dy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="FirestoreClient";class ZL{constructor(e,n,i,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Jn.UNAUTHENTICATED,this.clientId=Av.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{Ee(Io,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Ee(Io,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=jv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Jg(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(Io,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async s=>{i.isEqual(s)||(await ZI(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>{To("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{Ee("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{To("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function Db(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eO(t);Ee(Io,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>wb(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,s)=>wb(e.remoteStore,s))),t._onlineComponents=e}async function eO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(Io,"Using user provided OfflineComponentProvider");try{await Jg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await Jg(t,new Lh)}}else Ee(Io,"Using default OfflineComponentProvider"),await Jg(t,new QL(void 0));return t._offlineComponents}async function yx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(Io,"Using user provided OnlineComponentProvider"),await Db(t,t._uninitializedComponentsProvider._online)):(Ee(Io,"Using default OnlineComponentProvider"),await Db(t,new Dy))),t._onlineComponents}function tO(t){return yx(t).then((e=>e.syncEngine))}async function Mb(t){const e=await yx(t),n=e.eventManager;return n.onListen=UL.bind(null,e.syncEngine),n.onUnlisten=BL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zL.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="firestore.googleapis.com",Pb=!0;class Vb{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_x,this.ssl=Pb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Pb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DV)throw new Te(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vp{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new aP;switch(i.type){case"firstParty":return new fP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=kb.get(n);i&&(Ee("ComponentProvider","Removing Datastore"),kb.delete(n),i.terminate())})(this),Promise.resolve()}}function nO(t,e,n,i={}){var s;t=vo(t,vp);const a=xo(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;a&&(av(`https://${d}`),lv("Firestore",!0)),l.host!==_x&&l.host!==d&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:d,ssl:a,emulatorOptions:i});if(!ga(h,c)&&(t._setSettings(h),i.mockUserToken)){let y,E;if(typeof i.mockUserToken=="string")y=i.mockUserToken,E=Jn.MOCK_USER;else{y=gC(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Te(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Jn(T)}t._authCredentials=new lP(new lI(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jl(this.firestore,e,this._query)}}class pn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Yc(n,pn._jsonSchema))return new pn(e,i||null,new Ne(Dt.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:hn("string",pn._jsonSchemaVersion),referencePath:hn("string")};class _o extends Jl{constructor(e,n,i){super(e,n,Nv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ne(e))}withConverter(e){return new _o(this.firestore,e,this._path)}}function Yl(t,e,...n){if(t=Ht(t),cI("collection","path",e),t instanceof vp){const i=Dt.fromString(e,...n);return $S(i),new _o(t,null,i)}{if(!(t instanceof pn||t instanceof _o))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Dt.fromString(e,...n));return $S(i),new _o(t.firestore,null,i)}}function tf(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=Av.newId()),cI("doc","path",e),t instanceof vp){const i=Dt.fromString(e,...n);return KS(i),new pn(t,null,new Ne(i))}{if(!(t instanceof pn||t instanceof _o))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Dt.fromString(e,...n));return KS(i),new pn(t.firestore,t instanceof _o?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="AsyncQueue";class Ob{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tx(this,"async_queue_retry"),this.oc=()=>{const i=$g();i&&Ee(Lb,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=$g();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=$g();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new ca;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Kl(e))throw e;Ee(Lb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,_s("INTERNAL UNHANDLED ERROR: ",Ub(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Gv.createAndSchedule(this,e,n,i,(a=>this.lc(a)));return this.ec.push(s),s}ac(){this.tc&&Le(47125,{hc:Ub(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Ub(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Fl extends vp{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Ob,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ob(e),this._firestoreClient=void 0,await e}}}function iO(t,e){const n=typeof t=="object"?t:fv(),i=typeof t=="string"?t:Ih,s=np(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=hC("firestore");a&&nO(s,...a)}return s}function Ex(t){if(t._terminated)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rO(t),t._firestoreClient}function rO(t){var e,n,i;const s=t._freezeSettings(),a=(function(c,d,h,y){return new IP(c,d,h,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,vx(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ZL(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new or(Un.fromBase64String(e))}catch(n){throw new Te(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new or(Un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yc(e,or._jsonSchema))return or.fromBase64String(e.bytes)}}or._jsonSchemaVersion="firestore/bytes/1.0",or._jsonSchema={type:hn("string",or._jsonSchemaVersion),bytes:hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qr._jsonSchemaVersion}}static fromJSON(e){if(Yc(e,qr._jsonSchema))return new qr(e.latitude,e.longitude)}}qr._jsonSchemaVersion="firestore/geoPoint/1.0",qr._jsonSchema={type:hn("string",qr._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yc(e,Br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Br(e.vectorValues);throw new Te(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Br._jsonSchemaVersion="firestore/vectorValue/1.0",Br._jsonSchema={type:hn("string",Br._jsonSchemaVersion),vectorValues:hn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=/^__.*__$/;class oO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qc(e,this.data,n,this.fieldTransforms)}}class Tx{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ko(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Sx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ec:t})}}class Wv{constructor(e,n,i,s,a,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Wv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Oh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Sx(this.Ec)&&sO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class aO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||mp(e)}Dc(e,n,i,s=!1){return new Wv({Ec:e,methodName:n,bc:i,path:On.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qv(t){const e=t._freezeSettings(),n=mp(t._databaseId);return new aO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lO(t,e,n,i,s,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);Xv("Data must be an object, but it was:",l,i);const c=bx(i,l);let d,h;if(a.merge)d=new Ui(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const E of a.mergeFields){const T=My(e,E,n);if(!l.contains(T))throw new Te(ae.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);wx(y,T)||y.push(T)}d=new Ui(y),h=l.fieldTransforms.filter((E=>d.covers(E.field)))}else d=null,h=l.fieldTransforms;return new oO(new bi(c),d,h)}class Ep extends Yv{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ep}}function uO(t,e,n,i){const s=t.Dc(1,e,n);Xv("Data must be an object, but it was:",s,i);const a=[],l=bi.empty();Mo(i,((d,h)=>{const y=Zv(e,d,n);h=Ht(h);const E=s.gc(y);if(h instanceof Ep)a.push(y);else{const T=nf(h,E);T!=null&&(a.push(y),l.set(y,T))}}));const c=new Ui(a);return new Tx(l,c,s.fieldTransforms)}function cO(t,e,n,i,s,a){const l=t.Dc(1,e,n),c=[My(e,i,n)],d=[s];if(a.length%2!=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)c.push(My(e,a[T])),d.push(a[T+1]);const h=[],y=bi.empty();for(let T=c.length-1;T>=0;--T)if(!wx(h,c[T])){const w=c[T];let D=d[T];D=Ht(D);const V=l.gc(w);if(D instanceof Ep)h.push(w);else{const L=nf(D,V);L!=null&&(h.push(w),y.set(w,L))}}const E=new Ui(h);return new Tx(y,E,l.fieldTransforms)}function fO(t,e,n,i=!1){return nf(n,t.Dc(i?4:3,e))}function nf(t,e){if(Ax(t=Ht(t)))return Xv("Unsupported field value:",e,t),bx(t,e);if(t instanceof Yv)return(function(i,s){if(!Sx(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,s){const a=[];let l=0;for(const c of i){let d=nf(c,s.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(t,e)}return(function(i,s){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return WP(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Ut.fromDate(i);return{timestampValue:kh(s.serializer,a)}}if(i instanceof Ut){const a=new Ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kh(s.serializer,a)}}if(i instanceof qr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof or)return{bytesValue:GI(s.serializer,i._byteString)};if(i instanceof pn){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Vv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Br)return(function(l,c){return{mapValue:{fields:{[_I]:{stringValue:EI},[xh]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw c.wc("VectorValues must only contain numeric values.");return Dv(c.serializer,h)}))}}}}}})(i,s);throw s.wc(`Unsupported field value: ${op(i)}`)})(t,e)}function bx(t,e){const n={};return hI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mo(t,((i,s)=>{const a=nf(s,e.Vc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Ax(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof qr||t instanceof or||t instanceof pn||t instanceof Yv||t instanceof Br)}function Xv(t,e,n){if(!Ax(n)||!fI(n)){const i=op(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function My(t,e,n){if((e=Ht(e))instanceof _p)return e._internalPath;if(typeof e=="string")return Zv(t,e);throw Oh("Field path arguments must be of type string or ",t,!1,void 0,n)}const dO=new RegExp("[~\\*/\\[\\]]");function Zv(t,e,n){if(e.search(dO)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _p(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Oh(t,e,n,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new Te(ae.INVALID_ARGUMENT,c+t+d)}function wx(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n,i,s,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ix("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hO extends Cx{data(){return super.data()}}function Ix(t,e){return typeof e=="string"?Zv(t,e):e instanceof _p?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e0{}class mO extends e0{}function t0(t,e,...n){let i=[];e instanceof e0&&i.push(e),i=i.concat(n),(function(a){const l=a.filter((d=>d instanceof i0)).length,c=a.filter((d=>d instanceof n0)).length;if(l>1||l>0&&c>0)throw new Te(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)t=s._apply(t);return t}class n0 extends mO{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new n0(e,n,i)}_apply(e){const n=this._parse(e);return xx(e._query,n),new Jl(e.firestore,e.converter,Ty(e._query,n))}_parse(e){const n=Qv(e.firestore);return(function(a,l,c,d,h,y,E){let T;if(h.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Bb(E,y);const D=[];for(const V of E)D.push(qb(d,a,V));T={arrayValue:{values:D}}}else T=qb(d,a,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Bb(E,y),T=fO(c,l,E,y==="in"||y==="not-in");return dn.create(h,y,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class i0 extends e0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new i0(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const d of c)xx(l,d),l=Ty(l,d)})(e._query,n),new Jl(e.firestore,e.converter,Ty(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function qb(t,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new Te(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xI(e)&&n.indexOf("/")!==-1)throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Dt.fromString(n));if(!Ne.isDocumentKey(i))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return tb(t,new Ne(i))}if(n instanceof pn)return tb(t,n._key);throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(n)}.`)}function Bb(t,e){if(!Array.isArray(t)||t.length===0)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xx(t,e){const n=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Te(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gO{convertValue(e,n="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Mo(e,((s,a)=>{i[s]=this.convertValue(a,n)})),i}convertVectorValue(e){var n,i,s;const a=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[xh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map((l=>sn(l.doubleValue)));return new Br(a)}convertGeoPoint(e){return new qr(sn(e.latitude),sn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=up(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){const n=bo(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Dt.fromString(e);Et(WI(i),9688,{name:e});const s=new Lc(i.get(1),i.get(3)),a=new Ne(i.popFirst(5));return s.isEqual(n)||_s(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends Cx{constructor(e,n,i,s,a,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Ix("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:hn("string",fa._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class lh extends fa{data(e={}){return super.data(e)}}class Il{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ac(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new lh(this._firestore,this._userDataWriter,i.key,i,new ac(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const d=new lh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ac(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new lh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ac(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,y=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:vO(c.type),doc:d,oldIndex:h,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Av.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function vO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:t})}}Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:hn("string",Il._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};class Rx extends gO{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function _O(t,e,n,...i){t=vo(t,pn);const s=vo(t.firestore,Fl),a=Qv(s);let l;return l=typeof(e=Ht(e))=="string"||e instanceof _p?cO(a,"updateDoc",t._key,e,n,i):uO(a,"updateDoc",t._key,e),a0(s,[l.toMutation(t._key,Sr.exists(!0))])}function r0(t){return a0(vo(t.firestore,Fl),[new Mv(t._key,Sr.none())])}function s0(t,e){const n=vo(t.firestore,Fl),i=tf(t),s=yO(t.converter,e);return a0(n,[lO(Qv(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Sr.exists(!1))]).then((()=>i))}function o0(t,...e){var n,i,s;t=Ht(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Fb(e[l])||(a=e[l++]);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Fb(e[l])){const E=e[l];e[l]=(n=E.next)===null||n===void 0?void 0:n.bind(E),e[l+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[l+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let d,h,y;if(t instanceof pn)h=vo(t.firestore,Fl),y=Nv(t._key.path),d={next:E=>{e[l]&&e[l](EO(h,t,E))},error:e[l+1],complete:e[l+2]};else{const E=vo(t,Jl);h=vo(E.firestore,Fl),y=E._query;const T=new Rx(h);d={next:w=>{e[l]&&e[l](new Il(h,T,E,w))},error:e[l+1],complete:e[l+2]},pO(t._query)}return(function(T,w,D,V){const L=new XL(V),H=new kL(w,L,D);return T.asyncQueue.enqueueAndForget((async()=>RL(await Mb(T),H))),()=>{L.Ou(),T.asyncQueue.enqueueAndForget((async()=>NL(await Mb(T),H)))}})(Ex(h),y,c,d)}function a0(t,e){return(function(i,s){const a=new ca;return i.asyncQueue.enqueueAndForget((async()=>HL(await tO(i),s,a))),a.promise})(Ex(t),e)}function EO(t,e,n){const i=n.docs.get(e._key),s=new Rx(t);return new fa(t,s,e._key,i,new ac(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Gl=s})(Aa),ya(new Eo("firestore",((i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new Fl(new uP(i.getProvider("auth-internal")),new dP(l,i.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Te(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(h.options.projectId,y)})(l,s),l);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Lr(BS,zS,e),Lr(BS,zS,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="firebasestorage.googleapis.com",Dx="storageBucket",TO=120*1e3,SO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends Hr{constructor(e,n,i=0){super(Yg(e),`Firebase Storage: ${n} (${Yg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xt||(Xt={}));function Yg(t){return"storage/"+t}function l0(){const t="An unknown error occurred, please check the error payload for server response.";return new Zt(Xt.UNKNOWN,t)}function bO(t){return new Zt(Xt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function AO(t){return new Zt(Xt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zt(Xt.UNAUTHENTICATED,t)}function CO(){return new Zt(Xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IO(t){return new Zt(Xt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function xO(){return new Zt(Xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RO(){return new Zt(Xt.CANCELED,"User canceled the upload/download.")}function NO(t){return new Zt(Xt.INVALID_URL,"Invalid URL '"+t+"'.")}function DO(t){return new Zt(Xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function MO(){return new Zt(Xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dx+"' property when initializing the app?")}function kO(){return new Zt(Xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function PO(){return new Zt(Xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VO(t){return new Zt(Xt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ky(t){return new Zt(Xt.INVALID_ARGUMENT,t)}function Mx(){return new Zt(Xt.APP_DELETED,"The Firebase app was deleted.")}function LO(t){return new Zt(Xt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _c(t,e){return new Zt(Xt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yu(t){throw new Zt(Xt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Fi.makeFromUrl(e,n)}catch{return new Fi(e,"")}if(i.path==="")return i;throw DO(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function h($){$.path_=decodeURIComponent($.path)}const y="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",w=new RegExp(`^https?://${E}/${y}/b/${s}/o${T}`,"i"),D={bucket:1,path:3},V=n===Nx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",H=new RegExp(`^https?://${V}/${s}/${L}`,"i"),q=[{regex:c,indices:d,postModify:a},{regex:w,indices:D,postModify:h},{regex:H,indices:{bucket:1,path:2},postModify:h}];for(let $=0;$<q.length;$++){const Z=q[$],G=Z.regex.exec(e);if(G){const I=G[Z.indices.bucket];let x=G[Z.indices.path];x||(x=""),i=new Fi(I,x),Z.postModify(i);break}}if(i==null)throw NO(e);return i}}class OO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t,e,n){let i=1,s=null,a=null,l=!1,c=0;function d(){return c===2}let h=!1;function y(...L){h||(h=!0,e.apply(null,L))}function E(L){s=setTimeout(()=>{s=null,t(w,d())},L)}function T(){a&&clearTimeout(a)}function w(L,...H){if(h){T();return}if(L){T(),y.call(null,L,...H);return}if(d()||l){T(),y.call(null,L,...H);return}i<64&&(i*=2);let q;c===1?(c=2,q=0):q=(i+Math.random())*1e3,E(q)}let D=!1;function V(L){D||(D=!0,T(),!h&&(s!==null?(L||(c=2),clearTimeout(s),E(0)):L||(c=1)))}return E(0),a=setTimeout(()=>{l=!0,V(!0)},n),V}function FO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){return t!==void 0}function BO(t){return typeof t=="object"&&!Array.isArray(t)}function u0(t){return typeof t=="string"||t instanceof String}function zb(t){return c0()&&t instanceof Blob}function c0(){return typeof Blob<"u"}function Hb(t,e,n,i){if(i<e)throw ky(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw ky(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function kx(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var da;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(da||(da={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n,i,s,a,l,c,d,h,y,E,T=!0,w=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=y,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,V)=>{this.resolve_=D,this.reject_=V,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Pd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===da.NO_ERROR,d=a.getStatus();if(!c||zO(d,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===da.ABORT;i(!1,new Pd(!1,null,y));return}const h=this.successCodes_.indexOf(d)!==-1;i(!0,new Pd(h,a))})},n=(i,s)=>{const a=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());qO(d)?a(d):a()}catch(d){l(d)}else if(c!==null){const d=l0();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(s.canceled){const d=this.appDelete_?Mx():RO();l(d)}else{const d=xO();l(d)}};this.canceled_?n(!1,new Pd(!1,null,!0)):this.backoffId_=UO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function GO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $O(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JO(t,e,n,i,s,a,l=!0,c=!1){const d=kx(t.urlParams),h=t.url+d,y=Object.assign({},t.headers);return KO(y,e),GO(y,n),jO(y,a),$O(y,i),new HO(h,t.method,y,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WO(...t){const e=YO();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(c0())return new Blob(t);throw new Zt(Xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){if(typeof atob>"u")throw VO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wg{constructor(e,n){this.data=e,this.contentType=n||null}}function Px(t,e){switch(t){case _r.RAW:return new Wg(Vx(e));case _r.BASE64:case _r.BASE64URL:return new Wg(Lx(t,e));case _r.DATA_URL:return new Wg(e4(e),t4(e))}throw l0()}function Vx(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,l=t.charCodeAt(++n);i=65536|(a&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function ZO(t){let e;try{e=decodeURIComponent(t)}catch{throw _c(_r.DATA_URL,"Malformed data URL.")}return Vx(e)}function Lx(t,e){switch(t){case _r.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw _c(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case _r.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw _c(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XO(e)}catch(s){throw s.message.includes("polyfill")?s:_c(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class Ox{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _c(_r.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=n4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function e4(t){const e=new Ox(t);return e.base64?Lx(_r.BASE64,e.rest):ZO(e.rest)}function t4(t){return new Ox(t).contentType}function n4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){let i=0,s="";zb(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(zb(this.data_)){const i=this.data_,s=QO(i,e,n);return s===null?null:new lo(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new lo(i,!0)}}static getBlob(...e){if(c0()){const n=e.map(i=>i instanceof lo?i.data_:i);return new lo(WO.apply(null,n))}else{const n=e.map(l=>u0(l)?Px(_r.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const s=new Uint8Array(i);let a=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)s[a++]=l[c]}),new lo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){let e;try{e=JSON.parse(t)}catch{return null}return BO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function r4(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Fx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t,e){return e}class ui{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||s4}}let Vd=null;function o4(t){return!u0(t)||t.length<2?t:Fx(t)}function qx(){if(Vd)return Vd;const t=[];t.push(new ui("bucket")),t.push(new ui("generation")),t.push(new ui("metageneration")),t.push(new ui("name","fullPath",!0));function e(a,l){return o4(l)}const n=new ui("name");n.xform=e,t.push(n);function i(a,l){return l!==void 0?Number(l):l}const s=new ui("size");return s.xform=i,t.push(s),t.push(new ui("timeCreated")),t.push(new ui("updated")),t.push(new ui("md5Hash",null,!0)),t.push(new ui("cacheControl",null,!0)),t.push(new ui("contentDisposition",null,!0)),t.push(new ui("contentEncoding",null,!0)),t.push(new ui("contentLanguage",null,!0)),t.push(new ui("contentType",null,!0)),t.push(new ui("metadata","customMetadata",!0)),Vd=t,Vd}function a4(t,e){function n(){const i=t.bucket,s=t.fullPath,a=new Fi(i,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function l4(t,e,n){const i={};i.type="file";const s=n.length;for(let a=0;a<s;a++){const l=n[a];i[l.local]=l.xform(i,e[l.server])}return a4(i,t),i}function Bx(t,e,n){const i=Ux(e);return i===null?null:l4(t,i,n)}function u4(t,e,n,i){const s=Ux(e);if(s===null||!u0(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(h=>{const y=t.bucket,E=t.fullPath,T="/b/"+l(y)+"/o/"+l(E),w=f0(T,n,i),D=kx({alt:"media",token:h});return w+D})[0]}function c4(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class zx{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){if(!t)throw l0()}function f4(t,e){function n(i,s){const a=Bx(t,s,e);return Hx(a!==null),a}return n}function d4(t,e){function n(i,s){const a=Bx(t,s,e);return Hx(a!==null),u4(a,s,t.host,t._protocol)}return n}function Gx(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=CO():s=wO():n.getStatus()===402?s=AO(t.bucket):n.getStatus()===403?s=IO(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function h4(t){const e=Gx(t);function n(i,s){let a=e(i,s);return i.getStatus()===404&&(a=bO(t.path)),a.serverResponse=s.serverResponse,a}return n}function p4(t,e,n){const i=e.fullServerUrl(),s=f0(i,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,c=new zx(s,a,d4(t,n),l);return c.errorHandler=h4(e),c}function m4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function g4(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=m4(null,e)),i}function y4(t,e,n,i,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let q="";for(let $=0;$<2;$++)q=q+Math.random().toString().slice(2);return q}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const h=g4(e,i,s),y=c4(h,n),E="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,T=`\r
--`+d+"--",w=lo.getBlob(E,i,T);if(w===null)throw kO();const D={name:h.fullPath},V=f0(a,t.host,t._protocol),L="POST",H=t.maxUploadRetryTime,F=new zx(V,L,f4(t,n),H);return F.urlParams=D,F.headers=l,F.body=w.uploadData(),F.errorHandler=Gx(e),F}class v4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=da.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=da.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=da.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s,a){if(this.sent_)throw Yu("cannot .send() more than once");if(xo(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _4 extends v4{initXhr(){this.xhr_.responseType="text"}}function jx(){return new _4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this._service=e,n instanceof Fi?this._location=n:this._location=Fi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sa(e,n)}get root(){const e=new Fi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fx(this._location.path)}get storage(){return this._service}get parent(){const e=i4(this._location.path);if(e===null)return null;const n=new Fi(this._location.bucket,e);return new Sa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw LO(e)}}function E4(t,e,n){t._throwIfRoot("uploadBytes");const i=y4(t.storage,t._location,qx(),new lo(e,!0),n);return t.storage.makeRequestWithTokens(i,jx).then(s=>({metadata:s,ref:t}))}function T4(t,e,n=_r.RAW,i){t._throwIfRoot("uploadString");const s=Px(n,e),a=Object.assign({},i);return a.contentType==null&&s.contentType!=null&&(a.contentType=s.contentType),E4(t,s.data,a)}function S4(t){t._throwIfRoot("getDownloadURL");const e=p4(t.storage,t._location,qx());return t.storage.makeRequestWithTokens(e,jx).then(n=>{if(n===null)throw PO();return n})}function b4(t,e){const n=r4(t._location.path,e),i=new Fi(t._location.bucket,n);return new Sa(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){return/^[A-Za-z]+:\/\//.test(t)}function w4(t,e){return new Sa(t,e)}function Kx(t,e){if(t instanceof d0){const n=t;if(n._bucket==null)throw MO();const i=new Sa(n,n._bucket);return e!=null?Kx(i,e):i}else return e!==void 0?b4(t,e):t}function C4(t,e){if(e&&A4(e)){if(t instanceof d0)return w4(t,e);throw ky("To use ref(service, url), the first argument must be a Storage instance.")}else return Kx(t,e)}function Gb(t,e){const n=e==null?void 0:e[Dx];return n==null?null:Fi.makeFromBucketSpec(n,t)}function I4(t,e,n,i={}){t.host=`${e}:${n}`;const s=xo(e);s&&(av(`https://${t.host}/b`),lv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:gC(a,t.app.options.projectId))}class d0{constructor(e,n,i,s,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=Nx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TO,this._maxUploadRetryTime=SO,this._requests=new Set,s!=null?this._bucket=Fi.makeFromBucketSpec(s,this._host):this._bucket=Gb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fi.makeFromBucketSpec(this._url,e):this._bucket=Gb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sa(this,e)}_makeRequest(e,n,i,s,a=!0){if(this._deleted)return new OO(Mx());{const l=JO(e,this._appId,i,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const jb="@firebase/storage",Kb="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="storage";function x4(t,e,n,i){return t=Ht(t),T4(t,e,n,i)}function R4(t){return t=Ht(t),S4(t)}function N4(t,e){return t=Ht(t),C4(t,e)}function D4(t=fv(),e){t=Ht(t);const i=np(t,$x).getImmediate({identifier:e}),s=hC("storage");return s&&M4(i,...s),i}function M4(t,e,n,i={}){I4(t,e,n,i)}function k4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new d0(n,i,s,e,Aa)}function P4(){ya(new Eo($x,k4,"PUBLIC").setMultipleInstances(!0)),Lr(jb,Kb,""),Lr(jb,Kb,"esm2017")}P4();const V4={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},h0=_C(V4),lc=iP(h0),L4=new hs,Gr=iO(h0),O4=D4(h0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let U4,F4;function q4(){return{geminiUrl:U4,vertexUrl:F4}}function B4(t,e,n,i){var s,a;if(!(t!=null&&t.baseUrl)){const l=q4();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ss{}function ve(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function g(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const y=d[h];g(y,e.slice(a+1),n[h])}else for(const h of d)g(h,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];g(d[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in t){const l=t[a];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function z4(t,e){for(const[n,i]of Object.entries(e)){const s=n.split("."),a=i.split("."),l=new Set;let c=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){c=d;break}if(c!==-1&&a.length>c)for(let d=c;d<a.length;d++){const h=a[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}Py(t,s,a,0,l)}}function Py(t,e,n,i,s){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])Py(d,e,n,i+1,s)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),d={};for(const h of c)d[h]=l[h];for(const[h,y]of Object.entries(d)){const E=[];for(const T of n.slice(i))T==="*"?E.push(h):E.push(T);g(l,E,y)}for(const h of c)delete l[h]}}else{const l=t;a in l&&Py(l[a],e,n,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H4(t){const e={},n=p(t,["operationName"]);n!=null&&g(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function G4(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],K4(l)),e}function j4(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],$4(l)),e}function K4(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>J4(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function $4(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Y4(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function J4(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],tU(n)),e}function Y4(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],nU(n)),e}function W4(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function Q4(t){const e={},n=p(t,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function X4(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],Z4(l)),e}function Z4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function Jx(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],eU(l)),e}function eU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function tU(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],p0(i));const s=p(t,["encoding"]);return s!=null&&g(e,["mimeType"],s),e}function nU(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],p0(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $b;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($b||($b={}));var Jb;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Jb||(Jb={}));var Yb;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Yb||(Yb={}));var qe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(qe||(qe={}));var Wb;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Wb||(Wb={}));var Qb;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Qb||(Qb={}));var Xb;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Xb||(Xb={}));var Zb;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Zb||(Zb={}));var eA;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(eA||(eA={}));var tA;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tA||(tA={}));var nA;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(nA||(nA={}));var iA;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(iA||(iA={}));var rA;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(rA||(rA={}));var sA;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(sA||(sA={}));var oA;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(oA||(oA={}));var aA;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(aA||(aA={}));var lA;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(lA||(lA={}));var uA;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uA||(uA={}));var Uh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Uh||(Uh={}));var cA;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cA||(cA={}));var fA;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fA||(fA={}));var dA;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dA||(dA={}));var Vy;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Vy||(Vy={}));var hA;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(hA||(hA={}));var pA;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(pA||(pA={}));var mA;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(mA||(mA={}));var gA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gA||(gA={}));var yA;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(yA||(yA={}));var vA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(vA||(vA={}));var _A;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_A||(_A={}));var EA;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(EA||(EA={}));var TA;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(TA||(TA={}));var SA;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(SA||(SA={}));var bA;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bA||(bA={}));var AA;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(AA||(AA={}));var wA;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(wA||(wA={}));var CA;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(CA||(CA={}));var IA;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(IA||(IA={}));var xA;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(xA||(xA={}));var RA;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(RA||(RA={}));var NA;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(NA||(NA={}));var DA;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(DA||(DA={}));var MA;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(MA||(MA={}));var kA;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(kA||(kA={}));var PA;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(PA||(PA={}));var VA;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(VA||(VA={}));var LA;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LA||(LA={}));var OA;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(OA||(OA={}));var UA;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(UA||(UA={}));var FA;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(FA||(FA={}));var qA;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(qA||(qA={}));var BA;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(BA||(BA={}));var Tl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Tl||(Tl={}));class Ly{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wu{get text(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const E=[];for(const T of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[w,D]of Object.entries(T))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(D!==null||D!==void 0)&&E.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const E of(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[T,w]of Object.entries(E))T!=="inlineData"&&(w!==null||w!==void 0)&&y.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,s,a,l,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,s,a,l,c,d,h;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(d=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class zA{}class HA{}class iU{}class rU{}class sU{}class oU{}class GA{}class jA{}class KA{}class aU{}class Fh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Fh;let s;const a=e;return n?s=j4(a):s=G4(a),Object.assign(i,s),i}}class $A{}class JA{}class YA{}class lU{}class uU{}class cU{}class m0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new m0,a=X4(e);return Object.assign(i,a),i}}class fU{}class dU{}class hU{}class WA{}class pU{get text(){var e,n,i;let s="",a=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,n,i;let s="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class mU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class g0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new g0,a=Jx(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ht(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Yx(t,e){const n=ht(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Wx(t){return Array.isArray(t)?t.map(e=>qh(e)):[qh(t)]}function qh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Qx(t){const e=qh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xx(t){const e=qh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QA(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Zx(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>QA(e)):[QA(t)]}function Oy(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function XA(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ZA(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Wn(t){if(t==null)throw new Error("ContentUnion is required");return Oy(t)?t:{role:"user",parts:Zx(t)}}function y0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Wn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Wn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Wn(n)):[Wn(e)]}function ar(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(XA(t)||ZA(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Wn(t)]}const e=[],n=[],i=Oy(t[0]);for(const s of t){const a=Oy(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(XA(s)||ZA(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:Zx(n)}),e}function gU(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(qe).includes(n[0].toUpperCase())?n[0].toUpperCase():qe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(qe).includes(i.toUpperCase())?i.toUpperCase():qe.TYPE_UNSPECIFIED})}}function xl(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&gU(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(qe).includes(c.toUpperCase())?c.toUpperCase():qe.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=xl(c);else if(i.includes(l)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(xl(h))}e[l]=d}else if(s.includes(l)){const d={};for(const[h,y]of Object.entries(c))d[h]=xl(y);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function v0(t){return xl(t)}function _0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function E0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Wl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=xl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=xl(e.response));return t}function Ql(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function yU(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function bs(t,e){if(typeof e!="string")throw new Error("name must be a string");return yU(t,e,"cachedContents")}function eR(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Po(t){return p0(t)}function vU(t){return t!=null&&typeof t=="object"&&"name"in t}function _U(t){return t!=null&&typeof t=="object"&&"video"in t}function EU(t){return t!=null&&typeof t=="object"&&"uri"in t}function tR(t){var e;let n;if(vU(t)&&(n=t.name),!(EU(t)&&(n=t.uri,n===void 0))&&!(_U(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function nR(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function iR(t){for(const e of["models","tunedModels","publisherModels"])if(TU(t,e))return t[e];return[]}function TU(t,e){return t!==null&&typeof t=="object"&&e in t}function SU(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function bU(t,e={}){const n=[],i=new Set;for(const s of t){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=SU(s,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function rR(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function AU(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function sR(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Xl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function oR(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wU(t){const e={},n=p(t,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>n6(l))),g(e,["inlinedResponses"],a)}const s=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["inlinedEmbedContentResponses"],a)}return e}function CU(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const s=p(t,["bigqueryDestination","outputUri"]);return s!=null&&g(e,["bigqueryUri"],s),e}function IU(t){const e={},n=p(t,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&g(e,["bigqueryDestination","outputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function uh(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["metadata","state"]);s!=null&&g(e,["state"],oR(s));const a=p(t,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const l=p(t,["metadata","endTime"]);l!=null&&g(e,["endTime"],l);const c=p(t,["metadata","updateTime"]);c!=null&&g(e,["updateTime"],c);const d=p(t,["metadata","model"]);d!=null&&g(e,["model"],d);const h=p(t,["metadata","output"]);return h!=null&&g(e,["dest"],wU(sR(h))),e}function Uy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["state"]);s!=null&&g(e,["state"],oR(s));const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["createTime"]);l!=null&&g(e,["createTime"],l);const c=p(t,["startTime"]);c!=null&&g(e,["startTime"],c);const d=p(t,["endTime"]);d!=null&&g(e,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(e,["updateTime"],h);const y=p(t,["model"]);y!=null&&g(e,["model"],y);const E=p(t,["inputConfig"]);E!=null&&g(e,["src"],xU(E));const T=p(t,["outputConfig"]);T!=null&&g(e,["dest"],CU(sR(T)));const w=p(t,["completionStats"]);return w!=null&&g(e,["completionStats"],w),e}function xU(t){const e={},n=p(t,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const s=p(t,["bigquerySource","inputUri"]);return s!=null&&g(e,["bigqueryUri"],s),e}function RU(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(n,["fileName"],i);const s=p(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>t6(t,l))),g(n,["requests","requests"],a)}return n}function NU(t){const e={},n=p(t,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const s=p(t,["bigqueryUri"]);if(s!=null&&g(e,["bigquerySource","inputUri"],s),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function DU(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function MU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function kU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function PU(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],VU(i));const s=p(t,["tokenCount"]);s!=null&&g(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>w)),g(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function VU(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["citations"],i)}return e}function aR(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>u6(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function LU(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function OU(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["dest"]);return e!==void 0&&s!=null&&g(e,["outputConfig"],IU(AU(s))),n}function ew(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["src"]);s!=null&&g(n,["batch","inputConfig"],RU(t,rR(t,s)));const a=p(e,["config"]);return a!=null&&LU(a,n),n}function UU(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],ht(t,i));const s=p(e,["src"]);s!=null&&g(n,["inputConfig"],NU(rR(t,s)));const a=p(e,["config"]);return a!=null&&OU(a,n),n}function FU(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function qU(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["src"]);s!=null&&g(n,["batch","inputConfig"],$U(t,s));const a=p(e,["config"]);return a!=null&&FU(a,n),n}function BU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function zU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function HU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function GU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);return a!=null&&g(e,["error"],a),e}function jU(t,e){const n={},i=p(e,["contents"]);if(i!=null){let a=y0(t,i);Array.isArray(a)&&(a=a.map(l=>l)),g(n,["requests[]","request","content"],a)}const s=p(e,["config"]);return s!=null&&(g(n,["_self"],KU(s,n)),z4(n,{"requests[].*":"requests[].request.*"})),n}function KU(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function $U(t,e){const n={},i=p(e,["fileName"]);i!=null&&g(n,["file_name"],i);const s=p(e,["inlinedRequests"]);return s!=null&&g(n,["requests"],jU(t,s)),n}function JU(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function YU(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],aR(Wn(s)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const D=p(e,["frequencyPenalty"]);D!=null&&g(i,["frequencyPenalty"],D);const V=p(e,["seed"]);V!=null&&g(i,["seed"],V);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],v0(H));const F=p(e,["responseJsonSchema"]);if(F!=null&&g(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let O=q;Array.isArray(O)&&(O=O.map(U=>c6(U))),g(n,["safetySettings"],O)}const $=p(e,["tools"]);if(n!==void 0&&$!=null){let O=Ql($);Array.isArray(O)&&(O=O.map(U=>f6(Wl(U)))),g(n,["tools"],O)}const Z=p(e,["toolConfig"]);if(n!==void 0&&Z!=null&&g(n,["toolConfig"],Z),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&g(n,["cachedContent"],bs(t,G));const I=p(e,["responseModalities"]);I!=null&&g(i,["responseModalities"],I);const x=p(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const R=p(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],_0(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=p(e,["thinkingConfig"]);P!=null&&g(i,["thinkingConfig"],P);const M=p(e,["imageConfig"]);return M!=null&&g(i,["imageConfig"],M),i}function WU(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>PU(h))),g(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function QU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function XU(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],Xl(t,i)),n}function ZU(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function e6(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function t6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["request","model"],ht(t,i));const s=p(e,["contents"]);if(s!=null){let c=ar(s);Array.isArray(c)&&(c=c.map(d=>aR(d))),g(n,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&g(n,["metadata"],a);const l=p(e,["config"]);return l!=null&&g(n,["request","generationConfig"],YU(t,l,p(n,["request"],{}))),n}function n6(t){const e={},n=p(t,["response"]);n!=null&&g(e,["response"],WU(n));const i=p(t,["error"]);return i!=null&&g(e,["error"],i),e}function i6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);if(e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function r6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);e!==void 0&&s!=null&&g(e,["_query","pageToken"],s);const a=p(t,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),n}function s6(t){const e={},n=p(t,["config"]);return n!=null&&i6(n,e),e}function o6(t){const e={},n=p(t,["config"]);return n!=null&&r6(n,e),e}function a6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>uh(l))),g(e,["batchJobs"],a)}return e}function l6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Uy(l))),g(e,["batchJobs"],a)}return e}function u6(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],JU(a));const l=p(t,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],DU(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function c6(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function f6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],ZU(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],e6(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ts;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ts||(Ts={}));class Ia{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d6 extends Ss{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Ia(Ts.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=ew(this.apiClient,e),i=n._url,s=ve("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const y of d){const E=Object.assign({},y);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=T,E.request=w}h.push(E)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=UU(this.apiClient,e);return c=ve("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Uy(y))}else{const h=ew(this.apiClient,e);return c=ve("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>uh(y))}}async createEmbeddingsInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qU(this.apiClient,e);return a=ve("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>uh(d))}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=XU(this.apiClient,e);return c=ve("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Uy(y))}else{const h=QU(this.apiClient,e);return c=ve("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>uh(y))}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=kU(this.apiClient,e);l=ve("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=MU(this.apiClient,e);l=ve("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=o6(e);return c=ve("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=l6(y),T=new WA;return Object.assign(T,E),T})}else{const h=s6(e);return c=ve("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=a6(y),T=new WA;return Object.assign(T,E),T})}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=zU(this.apiClient,e);return c=ve("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>GU(y))}else{const h=BU(this.apiClient,e);return c=ve("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>HU(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h6(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function tw(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>P6(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function p6(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&g(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let y=ar(l);Array.isArray(y)&&(y=y.map(E=>tw(E))),g(e,["contents"],y)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],tw(Wn(c)));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let y=d;Array.isArray(y)&&(y=y.map(E=>V6(E))),g(e,["tools"],y)}const h=p(t,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],h),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function m6(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);e!==void 0&&s!=null&&g(e,["expireTime"],s);const a=p(t,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let E=ar(l);Array.isArray(E)&&(E=E.map(T=>T)),g(e,["contents"],E)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&g(e,["systemInstruction"],Wn(c));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let E=d;Array.isArray(E)&&(E=E.map(T=>L6(T))),g(e,["tools"],E)}const h=p(t,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const y=p(t,["kmsKeyName"]);return e!==void 0&&y!=null&&g(e,["encryption_spec","kmsKeyName"],y),n}function g6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],Yx(t,i));const s=p(e,["config"]);return s!=null&&p6(s,n),n}function y6(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["model"],Yx(t,i));const s=p(e,["config"]);return s!=null&&m6(s,n),n}function v6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function _6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function E6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function T6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function S6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function b6(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function A6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function w6(t,e){const n={},i=p(e,["name"]);return i!=null&&g(n,["_url","name"],bs(t,i)),n}function C6(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function I6(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function x6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function R6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function N6(t){const e={},n=p(t,["config"]);return n!=null&&x6(n,e),e}function D6(t){const e={},n=p(t,["config"]);return n!=null&&R6(n,e),e}function M6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function k6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function P6(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],S6(a));const l=p(t,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],h6(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function V6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],C6(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],I6(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function L6(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>b6(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function O6(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&g(e,["expireTime"],s),n}function U6(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const s=p(t,["expireTime"]);return e!==void 0&&s!=null&&g(e,["expireTime"],s),n}function F6(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],bs(t,i));const s=p(e,["config"]);return s!=null&&O6(s,n),n}function q6(t,e){const n={},i=p(e,["name"]);i!=null&&g(n,["_url","name"],bs(t,i));const s=p(e,["config"]);return s!=null&&U6(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B6 extends Ss{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ia(Ts.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=y6(this.apiClient,e);return c=ve("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=g6(this.apiClient,e);return c=ve("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=w6(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=A6(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=_6(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=T6(y),T=new JA;return Object.assign(T,E),T})}else{const h=v6(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=E6(y),T=new JA;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=q6(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=F6(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=D6(e);return c=ve("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=k6(y),T=new YA;return Object.assign(T,E),T})}else{const h=N6(e);return c=ve("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=M6(y),T=new YA;return Object.assign(T,E),T})}}}function nw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ot(t){return this instanceof Ot?(this.v=t,this):new Ot(t)}function Rl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(w){return function(D){return Promise.resolve(D).then(w,E)}}function c(w,D){i[w]&&(s[w]=function(V){return new Promise(function(L,H){a.push([w,V,L,H])>1||d(w,V)})},D&&(s[w]=D(s[w])))}function d(w,D){try{h(i[w](D))}catch(V){T(a[0][3],V)}}function h(w){w.value instanceof Ot?Promise.resolve(w.value.v).then(y,E):T(a[0][2],w)}function y(w){d("next",w)}function E(w){d("throw",w)}function T(w,D){w(D),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Ec(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof nw=="function"?nw(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(c,d){l=t[a](l),s(c,d,l.done,l.value)})}}function s(a,l,c,d){Promise.resolve(d).then(function(h){a({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z6(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:lR(n)}function lR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function H6(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iw(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let a=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),a&&!lR(t[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class G6{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new j6(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class j6{constructor(e,n,i,s={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),H6(a)}async sendMessage(e){var n;await this.sendPromise;const i=Wn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,c;const d=await s,h=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=d.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];y!=null&&(T=(c=y.slice(E))!==null&&c!==void 0?c:[]);const w=h?[h]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=Wn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?iw(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return Rl(this,arguments,function*(){var l,c,d,h;const y=[];try{for(var E=!0,T=Ec(e),w;w=yield Ot(T.next()),l=w.done,!l;E=!0){h=w.value,E=!1;const D=h;if(z6(D)){const V=(s=(i=D.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;V!==void 0&&y.push(V)}yield yield Ot(D)}}catch(D){c={error:D}}finally{try{!E&&!l&&(d=T.return)&&(yield Ot(d.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,y)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(a=>a.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...iw(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Tp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K6(t){const e={},n=p(t,["file"]);return n!=null&&g(e,["file"],n),e}function $6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function J6(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],tR(n)),e}function Y6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function W6(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","file"],tR(n)),e}function Q6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function X6(t){const e={},n=p(t,["config"]);return n!=null&&Q6(n,e),e}function Z6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e3 extends Ss{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ia(Ts.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=X6(e);return a=ve("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=Z6(d),y=new fU;return Object.assign(y,h),y})}}async createInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=K6(e);return a=ve("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=$6(d),y=new dU;return Object.assign(y,h),y})}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=W6(e);return a=ve("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=J6(e);return a=ve("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=Y6(d),y=new hU;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ch(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function t3(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>g3(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function n3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function i3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function r3(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const w=p(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const D=p(t,["responseModalities"]);D!=null&&g(e,["responseModalities"],D);const V=p(t,["responseSchema"]);V!=null&&g(e,["responseSchema"],V);const L=p(t,["routingConfig"]);L!=null&&g(e,["routingConfig"],L);const H=p(t,["seed"]);H!=null&&g(e,["seed"],H);const F=p(t,["speechConfig"]);F!=null&&g(e,["speechConfig"],uR(F));const q=p(t,["stopSequences"]);q!=null&&g(e,["stopSequences"],q);const $=p(t,["temperature"]);$!=null&&g(e,["temperature"],$);const Z=p(t,["thinkingConfig"]);Z!=null&&g(e,["thinkingConfig"],Z);const G=p(t,["topK"]);G!=null&&g(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&g(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function s3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function o3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function a3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],E0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const D=p(t,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],t3(Wn(D)));const V=p(t,["tools"]);if(e!==void 0&&V!=null){let G=Ql(V);Array.isArray(G)&&(G=G.map(I=>v3(Wl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],y3(L));const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&g(e,["setup","realtimeInputConfig"],q);const $=p(t,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const Z=p(t,["proactivity"]);return e!==void 0&&Z!=null&&g(e,["setup","proactivity"],Z),n}function l3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],r3(i));const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],uR(E0(E)));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const D=p(t,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],Wn(D));const V=p(t,["tools"]);if(e!==void 0&&V!=null){let G=Ql(V);Array.isArray(G)&&(G=G.map(I=>_3(Wl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],L);const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&g(e,["setup","realtimeInputConfig"],q);const $=p(t,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const Z=p(t,["proactivity"]);return e!==void 0&&Z!=null&&g(e,["setup","proactivity"],Z),n}function u3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],ht(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],a3(s,n)),n}function c3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],ht(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],l3(s,n)),n}function f3(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function d3(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["weightedPrompts"],i)}return e}function h3(t){const e={},n=p(t,["media"]);if(n!=null){let h=Wx(n);Array.isArray(h)&&(h=h.map(y=>ch(y))),g(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],ch(Xx(i)));const s=p(t,["audioStreamEnd"]);s!=null&&g(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&g(e,["video"],ch(Qx(a)));const l=p(t,["text"]);l!=null&&g(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function p3(t){const e={},n=p(t,["media"]);if(n!=null){let h=Wx(n);Array.isArray(h)&&(h=h.map(y=>y)),g(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&g(e,["audio"],Xx(i));const s=p(t,["audioStreamEnd"]);s!=null&&g(e,["audioStreamEnd"],s);const a=p(t,["video"]);a!=null&&g(e,["video"],Qx(a));const l=p(t,["text"]);l!=null&&g(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&g(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&g(e,["activityEnd"],d),e}function m3(t){const e={},n=p(t,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&g(e,["serverContent"],i);const s=p(t,["toolCall"]);s!=null&&g(e,["toolCall"],s);const a=p(t,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const l=p(t,["usageMetadata"]);l!=null&&g(e,["usageMetadata"],E3(l));const c=p(t,["goAway"]);c!=null&&g(e,["goAway"],c);const d=p(t,["sessionResumptionUpdate"]);return d!=null&&g(e,["sessionResumptionUpdate"],d),e}function g3(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],n3(a));const l=p(t,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],ch(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function y3(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uR(t){const e={},n=p(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function v3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],s3(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],o3(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function _3(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>i3(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function E3(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const s=p(t,["candidatesTokenCount"]);s!=null&&g(e,["responseTokenCount"],s);const a=p(t,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const l=p(t,["thoughtsTokenCount"]);l!=null&&g(e,["thoughtsTokenCount"],l);const c=p(t,["totalTokenCount"]);c!=null&&g(e,["totalTokenCount"],c);const d=p(t,["promptTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(D=>D)),g(e,["promptTokensDetails"],w)}const h=p(t,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(D=>D)),g(e,["cacheTokensDetails"],w)}const y=p(t,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(D=>D)),g(e,["responseTokensDetails"],w)}const E=p(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(D=>D)),g(e,["toolUsePromptTokensDetails"],w)}const T=p(t,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T3(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function S3(t){const e={},n=p(t,["content"]);n!=null&&g(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],b3(i));const s=p(t,["tokenCount"]);s!=null&&g(e,["tokenCount"],s);const a=p(t,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(t,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&g(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&g(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>w)),g(e,["safetyRatings"],T)}const E=p(t,["urlContextMetadata"]);return E!=null&&g(e,["urlContextMetadata"],E),e}function b3(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),g(e,["citations"],i)}return e}function A3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["contents"]);if(s!=null){let a=ar(s);Array.isArray(a)&&(a=a.map(l=>l)),g(n,["contents"],a)}return n}function w3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["tokensInfo"],s)}return e}function C3(t){const e={},n=p(t,["values"]);n!=null&&g(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&g(e,["statistics"],I3(i)),e}function I3(t){const e={},n=p(t,["truncated"]);n!=null&&g(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Sp(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>M5(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function x3(t){const e={},n=p(t,["controlType"]);n!=null&&g(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function R3(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function N3(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],Wn(i));const s=p(t,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>pR(c))),g(e,["tools"],l)}const a=p(t,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],_5(a)),n}function D3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["contents"]);if(s!=null){let l=ar(s);Array.isArray(l)&&(l=l.map(c=>Sp(c))),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&R3(a),n}function M3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["contents"]);if(s!=null){let l=ar(s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&N3(a,n),n}function k3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const s=p(t,["cachedContentTokenCount"]);return s!=null&&g(e,["cachedContentTokenCount"],s),e}function P3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function V3(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],ht(t,i)),n}function L3(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],ht(t,i)),n}function O3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function U3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function F3(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const w=p(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const D=p(t,["outputMimeType"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","mimeType"],D);const V=p(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","compressionQuality"],V);const L=p(t,["addWatermark"]);e!==void 0&&L!=null&&g(e,["parameters","addWatermark"],L);const H=p(t,["labels"]);e!==void 0&&H!=null&&g(e,["labels"],H);const F=p(t,["editMode"]);e!==void 0&&F!=null&&g(e,["parameters","editMode"],F);const q=p(t,["baseSteps"]);return e!==void 0&&q!=null&&g(e,["parameters","editConfig","baseSteps"],q),n}function q3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>U5(d))),g(n,["instances[0]","referenceImages"],c)}const l=p(e,["config"]);return l!=null&&F3(l,n),n}function B3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>bp(a))),g(e,["generatedImages"],s)}return e}function z3(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["requests[]","title"],s);const a=p(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function H3(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const s=p(t,["title"]);e!==void 0&&s!=null&&g(e,["instances[]","title"],s);const a=p(t,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const l=p(t,["mimeType"]);e!==void 0&&l!=null&&g(e,["instances[]","mimeType"],l);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&g(e,["parameters","autoTruncate"],c),n}function G3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["contents"]);if(s!=null){let c=y0(t,s);Array.isArray(c)&&(c=c.map(d=>d)),g(n,["requests[]","content"],c)}const a=p(e,["config"]);a!=null&&z3(a,n);const l=p(e,["model"]);return l!==void 0&&g(n,["requests[]","model"],ht(t,l)),n}function j3(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["contents"]);if(s!=null){let l=y0(t,s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["instances[]","content"],l)}const a=p(e,["config"]);return a!=null&&H3(a,n),n}function K3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&g(e,["metadata"],s),e}function $3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>C3(l))),g(e,["embeddings"],a)}const s=p(t,["metadata"]);return s!=null&&g(e,["metadata"],s),e}function J3(t){const e={},n=p(t,["endpoint"]);n!=null&&g(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function Y3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function W3(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&g(e,["description"],n);const i=p(t,["name"]);i!=null&&g(e,["name"],i);const s=p(t,["parameters"]);s!=null&&g(e,["parameters"],s);const a=p(t,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(t,["response"]);l!=null&&g(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&g(e,["responseJsonSchema"],c),e}function Q3(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],Sp(Wn(s)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const D=p(e,["frequencyPenalty"]);D!=null&&g(i,["frequencyPenalty"],D);const V=p(e,["seed"]);V!=null&&g(i,["seed"],V);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],v0(H));const F=p(e,["responseJsonSchema"]);if(F!=null&&g(i,["responseJsonSchema"],F),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let O=q;Array.isArray(O)&&(O=O.map(U=>F5(U))),g(n,["safetySettings"],O)}const $=p(e,["tools"]);if(n!==void 0&&$!=null){let O=Ql($);Array.isArray(O)&&(O=O.map(U=>j5(Wl(U)))),g(n,["tools"],O)}const Z=p(e,["toolConfig"]);if(n!==void 0&&Z!=null&&g(n,["toolConfig"],Z),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=p(e,["cachedContent"]);n!==void 0&&G!=null&&g(n,["cachedContent"],bs(t,G));const I=p(e,["responseModalities"]);I!=null&&g(i,["responseModalities"],I);const x=p(e,["mediaResolution"]);x!=null&&g(i,["mediaResolution"],x);const R=p(e,["speechConfig"]);if(R!=null&&g(i,["speechConfig"],_0(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=p(e,["thinkingConfig"]);P!=null&&g(i,["thinkingConfig"],P);const M=p(e,["imageConfig"]);return M!=null&&g(i,["imageConfig"],M),i}function X3(t,e,n){const i={},s=p(e,["systemInstruction"]);n!==void 0&&s!=null&&g(n,["systemInstruction"],Wn(s));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const c=p(e,["topK"]);c!=null&&g(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&g(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&g(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&g(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&g(i,["presencePenalty"],w);const D=p(e,["frequencyPenalty"]);D!=null&&g(i,["frequencyPenalty"],D);const V=p(e,["seed"]);V!=null&&g(i,["seed"],V);const L=p(e,["responseMimeType"]);L!=null&&g(i,["responseMimeType"],L);const H=p(e,["responseSchema"]);H!=null&&g(i,["responseSchema"],v0(H));const F=p(e,["responseJsonSchema"]);F!=null&&g(i,["responseJsonSchema"],F);const q=p(e,["routingConfig"]);q!=null&&g(i,["routingConfig"],q);const $=p(e,["modelSelectionConfig"]);$!=null&&g(i,["modelConfig"],$);const Z=p(e,["safetySettings"]);if(n!==void 0&&Z!=null){let te=Z;Array.isArray(te)&&(te=te.map(ce=>ce)),g(n,["safetySettings"],te)}const G=p(e,["tools"]);if(n!==void 0&&G!=null){let te=Ql(G);Array.isArray(te)&&(te=te.map(ce=>pR(Wl(ce)))),g(n,["tools"],te)}const I=p(e,["toolConfig"]);n!==void 0&&I!=null&&g(n,["toolConfig"],I);const x=p(e,["labels"]);n!==void 0&&x!=null&&g(n,["labels"],x);const R=p(e,["cachedContent"]);n!==void 0&&R!=null&&g(n,["cachedContent"],bs(t,R));const P=p(e,["responseModalities"]);P!=null&&g(i,["responseModalities"],P);const M=p(e,["mediaResolution"]);M!=null&&g(i,["mediaResolution"],M);const O=p(e,["speechConfig"]);O!=null&&g(i,["speechConfig"],hR(_0(O)));const U=p(e,["audioTimestamp"]);U!=null&&g(i,["audioTimestamp"],U);const Ie=p(e,["thinkingConfig"]);Ie!=null&&g(i,["thinkingConfig"],Ie);const _e=p(e,["imageConfig"]);return _e!=null&&g(i,["imageConfig"],_e),i}function rw(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["contents"]);if(s!=null){let l=ar(s);Array.isArray(l)&&(l=l.map(c=>Sp(c))),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],Q3(t,a,n)),n}function sw(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["contents"]);if(s!=null){let l=ar(s);Array.isArray(l)&&(l=l.map(c=>c)),g(n,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(n,["generationConfig"],X3(t,a,n)),n}function ow(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>S3(h))),g(e,["candidates"],d)}const s=p(t,["modelVersion"]);s!=null&&g(e,["modelVersion"],s);const a=p(t,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(t,["responseId"]);l!=null&&g(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&g(e,["usageMetadata"],c),e}function aw(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(y=>y)),g(e,["candidates"],h)}const s=p(t,["createTime"]);s!=null&&g(e,["createTime"],s);const a=p(t,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(t,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const c=p(t,["responseId"]);c!=null&&g(e,["responseId"],c);const d=p(t,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function Z3(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&g(e,["parameters","aspectRatio"],s);const a=p(t,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&g(e,["parameters","includeSafetyAttributes"],d);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const y=p(t,["language"]);e!==void 0&&y!=null&&g(e,["parameters","language"],y);const E=p(t,["outputMimeType"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","mimeType"],E);const T=p(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=p(t,["imageSize"]);if(e!==void 0&&w!=null&&g(e,["parameters","sampleImageSize"],w),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function e5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["negativePrompt"]);e!==void 0&&s!=null&&g(e,["parameters","negativePrompt"],s);const a=p(t,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&g(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&g(e,["parameters","includeSafetyAttributes"],E);const T=p(t,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const w=p(t,["language"]);e!==void 0&&w!=null&&g(e,["parameters","language"],w);const D=p(t,["outputMimeType"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","mimeType"],D);const V=p(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&g(e,["parameters","outputOptions","compressionQuality"],V);const L=p(t,["addWatermark"]);e!==void 0&&L!=null&&g(e,["parameters","addWatermark"],L);const H=p(t,["labels"]);e!==void 0&&H!=null&&g(e,["labels"],H);const F=p(t,["imageSize"]);e!==void 0&&F!=null&&g(e,["parameters","sampleImageSize"],F);const q=p(t,["enhancePrompt"]);return e!==void 0&&q!=null&&g(e,["parameters","enhancePrompt"],q),n}function t5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&Z3(a,n),n}function n5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["config"]);return a!=null&&e5(a,n),n}function i5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>m5(l))),g(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&g(e,["positivePromptSafetyAttributes"],fR(s)),e}function r5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>bp(l))),g(e,["generatedImages"],a)}const s=p(t,["positivePromptSafetyAttributes"]);return s!=null&&g(e,["positivePromptSafetyAttributes"],dR(s)),e}function s5(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=p(t,["durationSeconds"]);if(e!==void 0&&s!=null&&g(e,["parameters","durationSeconds"],s),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=p(t,["resolution"]);e!==void 0&&l!=null&&g(e,["parameters","resolution"],l);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&g(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(t,["negativePrompt"]);e!==void 0&&d!=null&&g(e,["parameters","negativePrompt"],d);const h=p(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=p(t,["lastFrame"]);e!==void 0&&y!=null&&g(e,["instances[0]","lastFrame"],Ap(y));const E=p(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(w=>rF(w))),g(e,["instances[0]","referenceImages"],T)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function o5(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=p(t,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const l=p(t,["durationSeconds"]);e!==void 0&&l!=null&&g(e,["parameters","durationSeconds"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&g(e,["parameters","aspectRatio"],d);const h=p(t,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const y=p(t,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const E=p(t,["pubsubTopic"]);e!==void 0&&E!=null&&g(e,["parameters","pubsubTopic"],E);const T=p(t,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const w=p(t,["enhancePrompt"]);e!==void 0&&w!=null&&g(e,["parameters","enhancePrompt"],w);const D=p(t,["generateAudio"]);e!==void 0&&D!=null&&g(e,["parameters","generateAudio"],D);const V=p(t,["lastFrame"]);e!==void 0&&V!=null&&g(e,["instances[0]","lastFrame"],Ar(V));const L=p(t,["referenceImages"]);if(e!==void 0&&L!=null){let q=L;Array.isArray(q)&&(q=q.map($=>sF($))),g(e,["instances[0]","referenceImages"],q)}const H=p(t,["mask"]);e!==void 0&&H!=null&&g(e,["instances[0]","mask"],iF(H));const F=p(t,["compressionQuality"]);return e!==void 0&&F!=null&&g(e,["parameters","compressionQuality"],F),n}function a5(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],f5(l)),e}function l5(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],d5(l)),e}function u5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],Ap(a));const l=p(e,["video"]);l!=null&&g(n,["instances[0]","video"],mR(l));const c=p(e,["source"]);c!=null&&h5(c,n);const d=p(e,["config"]);return d!=null&&s5(d,n),n}function c5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["prompt"]);s!=null&&g(n,["instances[0]","prompt"],s);const a=p(e,["image"]);a!=null&&g(n,["instances[0]","image"],Ar(a));const l=p(e,["video"]);l!=null&&g(n,["instances[0]","video"],gR(l));const c=p(e,["source"]);c!=null&&p5(c,n);const d=p(e,["config"]);return d!=null&&o5(d,n),n}function f5(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>y5(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function d5(t){const e={},n=p(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>v5(l))),g(e,["generatedVideos"],a)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const s=p(t,["raiMediaFilteredReasons"]);return s!=null&&g(e,["raiMediaFilteredReasons"],s),e}function h5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Ap(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],mR(a)),n}function p5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Ar(s));const a=p(t,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],gR(a)),n}function m5(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],A5(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const s=p(t,["_self"]);return s!=null&&g(e,["safetyAttributes"],fR(s)),e}function bp(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["image"],cR(n));const i=p(t,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const s=p(t,["_self"]);s!=null&&g(e,["safetyAttributes"],dR(s));const a=p(t,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function g5(t){const e={},n=p(t,["_self"]);n!=null&&g(e,["mask"],cR(n));const i=p(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["labels"],s)}return e}function y5(t){const e={},n=p(t,["video"]);return n!=null&&g(e,["video"],tF(n)),e}function v5(t){const e={},n=p(t,["_self"]);return n!=null&&g(e,["video"],nF(n)),e}function _5(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const s=p(t,["audioTimestamp"]);s!=null&&g(e,["audioTimestamp"],s);const a=p(t,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(t,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&g(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&g(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(t,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const E=p(t,["presencePenalty"]);E!=null&&g(e,["presencePenalty"],E);const T=p(t,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const w=p(t,["responseMimeType"]);w!=null&&g(e,["responseMimeType"],w);const D=p(t,["responseModalities"]);D!=null&&g(e,["responseModalities"],D);const V=p(t,["responseSchema"]);V!=null&&g(e,["responseSchema"],V);const L=p(t,["routingConfig"]);L!=null&&g(e,["routingConfig"],L);const H=p(t,["seed"]);H!=null&&g(e,["seed"],H);const F=p(t,["speechConfig"]);F!=null&&g(e,["speechConfig"],hR(F));const q=p(t,["stopSequences"]);q!=null&&g(e,["stopSequences"],q);const $=p(t,["temperature"]);$!=null&&g(e,["temperature"],$);const Z=p(t,["thinkingConfig"]);Z!=null&&g(e,["thinkingConfig"],Z);const G=p(t,["topK"]);G!=null&&g(e,["topK"],G);const I=p(t,["topP"]);if(I!=null&&g(e,["topP"],I),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function E5(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],ht(t,i)),n}function T5(t,e){const n={},i=p(e,["model"]);return i!=null&&g(n,["_url","name"],ht(t,i)),n}function S5(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function b5(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function A5(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&g(e,["imageBytes"],Po(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function cR(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],Po(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ap(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&g(e,["bytesBase64Encoded"],Po(n));const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Ar(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Po(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function w5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&g(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],nR(t,c)),i}function C5(t,e,n){const i={},s=p(e,["pageSize"]);n!==void 0&&s!=null&&g(n,["_query","pageSize"],s);const a=p(e,["pageToken"]);n!==void 0&&a!=null&&g(n,["_query","pageToken"],a);const l=p(e,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&g(n,["_url","models_url"],nR(t,c)),i}function I5(t,e){const n={},i=p(e,["config"]);return i!=null&&w5(t,i,n),n}function x5(t,e){const n={},i=p(e,["config"]);return i!=null&&C5(t,i,n),n}function R5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=iR(s);Array.isArray(a)&&(a=a.map(l=>Fy(l))),g(e,["models"],a)}return e}function N5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["_self"]);if(s!=null){let a=iR(s);Array.isArray(a)&&(a=a.map(l=>qy(l))),g(e,["models"],a)}return e}function D5(t){const e={},n=p(t,["maskMode"]);n!=null&&g(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const s=p(t,["maskDilation"]);return s!=null&&g(e,["dilation"],s),e}function Fy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);s!=null&&g(e,["description"],s);const a=p(t,["version"]);a!=null&&g(e,["version"],a);const l=p(t,["_self"]);l!=null&&g(e,["tunedModelInfo"],K5(l));const c=p(t,["inputTokenLimit"]);c!=null&&g(e,["inputTokenLimit"],c);const d=p(t,["outputTokenLimit"]);d!=null&&g(e,["outputTokenLimit"],d);const h=p(t,["supportedGenerationMethods"]);h!=null&&g(e,["supportedActions"],h);const y=p(t,["temperature"]);y!=null&&g(e,["temperature"],y);const E=p(t,["maxTemperature"]);E!=null&&g(e,["maxTemperature"],E);const T=p(t,["topP"]);T!=null&&g(e,["topP"],T);const w=p(t,["topK"]);w!=null&&g(e,["topK"],w);const D=p(t,["thinking"]);return D!=null&&g(e,["thinking"],D),e}function qy(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["displayName"]);i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);s!=null&&g(e,["description"],s);const a=p(t,["versionId"]);a!=null&&g(e,["version"],a);const l=p(t,["deployedModels"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(T=>J3(T))),g(e,["endpoints"],E)}const c=p(t,["labels"]);c!=null&&g(e,["labels"],c);const d=p(t,["_self"]);d!=null&&g(e,["tunedModelInfo"],$5(d));const h=p(t,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const y=p(t,["checkpoints"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(T=>T)),g(e,["checkpoints"],E)}return e}function M5(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],Y3(a));const l=p(t,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],T3(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function k5(t){const e={},n=p(t,["productImage"]);return n!=null&&g(e,["image"],Ar(n)),e}function P5(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const s=p(t,["baseSteps"]);e!==void 0&&s!=null&&g(e,["parameters","baseSteps"],s);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=p(t,["seed"]);e!==void 0&&l!=null&&g(e,["parameters","seed"],l);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const h=p(t,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const E=p(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E);const T=p(t,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const w=p(t,["labels"]);return e!==void 0&&w!=null&&g(e,["labels"],w),n}function V5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["source"]);s!=null&&O5(s,n);const a=p(e,["config"]);return a!=null&&P5(a,n),n}function L5(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>bp(s))),g(e,["generatedImages"],i)}return e}function O5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["personImage"]);e!==void 0&&s!=null&&g(e,["instances[0]","personImage","image"],Ar(s));const a=p(t,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>k5(c))),g(e,["instances[0]","productImages"],l)}return n}function U5(t){const e={},n=p(t,["referenceImage"]);n!=null&&g(e,["referenceImage"],Ar(n));const i=p(t,["referenceId"]);i!=null&&g(e,["referenceId"],i);const s=p(t,["referenceType"]);s!=null&&g(e,["referenceType"],s);const a=p(t,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],D5(a));const l=p(t,["controlImageConfig"]);l!=null&&g(e,["controlImageConfig"],x3(l));const c=p(t,["styleImageConfig"]);c!=null&&g(e,["styleImageConfig"],c);const d=p(t,["subjectImageConfig"]);return d!=null&&g(e,["subjectImageConfig"],d),e}function fR(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&g(e,["contentType"],s),e}function dR(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&g(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const s=p(t,["contentType"]);return s!=null&&g(e,["contentType"],s),e}function F5(t){const e={},n=p(t,["category"]);if(n!=null&&g(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function q5(t){const e={},n=p(t,["image"]);return n!=null&&g(e,["image"],Ar(n)),e}function B5(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const s=p(t,["maxPredictions"]);e!==void 0&&s!=null&&g(e,["parameters","maxPredictions"],s);const a=p(t,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const l=p(t,["maskDilation"]);e!==void 0&&l!=null&&g(e,["parameters","maskDilation"],l);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&g(e,["parameters","binaryColorThreshold"],c);const d=p(t,["labels"]);return e!==void 0&&d!=null&&g(e,["labels"],d),n}function z5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["source"]);s!=null&&G5(s,n);const a=p(e,["config"]);return a!=null&&B5(a,n),n}function H5(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>g5(s))),g(e,["generatedMasks"],i)}return e}function G5(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const s=p(t,["image"]);e!==void 0&&s!=null&&g(e,["instances[0]","image"],Ar(s));const a=p(t,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],q5(a)),n}function hR(t){const e={},n=p(t,["languageCode"]);n!=null&&g(e,["languageCode"],n);const i=p(t,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function j5(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],S5(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],b5(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function pR(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let E=n;Array.isArray(E)&&(E=E.map(T=>W3(T))),g(e,["functionDeclarations"],E)}const i=p(t,["retrieval"]);i!=null&&g(e,["retrieval"],i);const s=p(t,["googleSearchRetrieval"]);s!=null&&g(e,["googleSearchRetrieval"],s);const a=p(t,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(t,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const c=p(t,["enterpriseWebSearch"]);c!=null&&g(e,["enterpriseWebSearch"],c);const d=p(t,["googleMaps"]);d!=null&&g(e,["googleMaps"],d);const h=p(t,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(t,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function K5(t){const e={},n=p(t,["baseModel"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&g(e,["updateTime"],s),e}function $5(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&g(e,["createTime"],i);const s=p(t,["updateTime"]);return s!=null&&g(e,["updateTime"],s),e}function J5(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function Y5(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const s=p(t,["description"]);e!==void 0&&s!=null&&g(e,["description"],s);const a=p(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),n}function W5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","name"],ht(t,i));const s=p(e,["config"]);return s!=null&&J5(s,n),n}function Q5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["config"]);return s!=null&&Y5(s,n),n}function X5(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&g(e,["parameters","safetySetting"],s);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const l=p(t,["includeRaiReason"]);e!==void 0&&l!=null&&g(e,["parameters","includeRaiReason"],l);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&g(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","compressionQuality"],d);const h=p(t,["enhanceInputImage"]);e!==void 0&&h!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=p(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const E=p(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(t,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const w=p(t,["mode"]);return e!==void 0&&w!=null&&g(e,["parameters","mode"],w),n}function Z5(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["_url","model"],ht(t,i));const s=p(e,["image"]);s!=null&&g(n,["instances[0]","image"],Ar(s));const a=p(e,["upscaleFactor"]);a!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=p(e,["config"]);return l!=null&&X5(l,n),n}function eF(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>bp(a))),g(e,["generatedImages"],s)}return e}function tF(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Po(i));const s=p(t,["encoding"]);return s!=null&&g(e,["mimeType"],s),e}function nF(t){const e={},n=p(t,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Po(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function iF(t){const e={},n=p(t,["image"]);n!=null&&g(e,["_self"],Ar(n));const i=p(t,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function rF(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Ap(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function sF(t){const e={},n=p(t,["image"]);n!=null&&g(e,["image"],Ar(n));const i=p(t,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function mR(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["encodedVideo"],Po(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["encoding"],s),e}function gR(t){const e={},n=p(t,["uri"]);n!=null&&g(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],Po(i));const s=p(t,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oF="Content-Type",aF="X-Server-Timeout",lF="User-Agent",By="x-goog-api-client",uF="1.29.1",cF=`google-genai-sdk/${uF}`,fF="v1beta1",dF="v1beta",lw=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class hF{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:fF,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:dF,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(n))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,s){if(n&&n.timeout||s){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return n&&n.extraBody!==null&&pF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await uw(s),new Ly(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await uw(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Rl(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:d}=yield Ot(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(d,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const T=JSON.parse(JSON.stringify(E.error)),w=T.status,D=T.code,V=`got status: ${w}. ${JSON.stringify(E)}`;if(D>=400&&D<600)throw new Tp({message:V,status:D})}}catch(E){if(E.name==="ApiError")throw E}l+=h;let y=l.match(lw);for(;y;){const E=y[1];try{const T=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ot(new Ly(T)),l=l.slice(y[0].length),y=l.match(lw)}catch(T){throw new Error(`exception parsing stream chunk ${E}. ${T}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=cF+" "+this.clientOptions.userAgentExtra;return e[lF]=n,e[By]=n,e[oF]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(aF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const d={file:s},h=this.getFileName(e),y=ve("upload/v1beta/files",d._url),E=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,d,n==null?void 0:n.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,n,i){var s;const a=this.clientOptions.uploader,l=await a.stat(n),c=String(l.size),d=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(n),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(h,c,d,y,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,s,a,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function uw(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Tp({message:s,status:n}):new Error(s)}}function pF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],y=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?c[d]=i(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mF="mcp_used/unknown";let gF=!1;function yR(t){for(const e of t)if(yF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return gF}function vR(t){var e;const n=(e=t[By])!==null&&e!==void 0?e:"";t[By]=(n+` ${mF}`).trimStart()}function yF(t){return t!==null&&typeof t=="object"&&t instanceof T0}function vF(t,e=100){return Rl(this,arguments,function*(){let i,s=0;for(;s<e;){const a=yield Ot(t.listTools({cursor:i}));for(const l of a.tools)yield yield Ot(l),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class T0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new T0(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const y of this.mcpClients)try{for(var c=!0,d=(n=void 0,Ec(vF(y))),h;h=await d.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const E=s;l.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=y}}catch(E){n={error:E}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),bU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _F(t,e,n){const i=new mU;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class EF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=bF(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const y=new Promise(q=>{h=q}),E=e.callbacks,T=function(){h({})},w=this.apiClient,D={onopen:T,onmessage:q=>{_F(w,E.onmessage,q)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(q){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(q){}},V=this.webSocketFactory.create(d,SF(l),D);V.connect(),await y;const F={setup:{model:ht(this.apiClient,e.model)}};return V.send(JSON.stringify(F)),new TF(V,this.apiClient)}}class TF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=d3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=f3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Tl.PLAY)}pause(){this.sendPlaybackControl(Tl.PAUSE)}stop(){this.sendPlaybackControl(Tl.STOP)}resetContext(){this.sendPlaybackControl(Tl.RESET_CONTEXT)}close(){this.conn.close()}}function SF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function bF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function wF(t,e,n){const i=new pU;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const a=JSON.parse(s);if(t.isVertexAI()){const l=m3(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class CF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new EF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&yR(e.config.tools)&&vR(E);const T=NF(E);if(this.apiClient.isVertexAI())y=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const R=this.apiClient.getApiKey();let P="BidiGenerateContent",M="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",M="access_token"),y=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${P}?${M}=${R}`}let w=()=>{};const D=new Promise(R=>{w=R}),V=e.callbacks,L=function(){var R;(R=V==null?void 0:V.onopen)===null||R===void 0||R.call(V),w({})},H=this.apiClient,F={onopen:L,onmessage:R=>{wF(H,V.onmessage,R)},onerror:(n=V==null?void 0:V.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=V==null?void 0:V.onclose)!==null&&i!==void 0?i:function(R){}},q=this.webSocketFactory.create(y,RF(T),F);q.connect(),await D;let $=ht(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const R=this.apiClient.getProject(),P=this.apiClient.getLocation();$=`projects/${R}/locations/${P}/`+$}let Z={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Uh.AUDIO]}:e.config.responseModalities=[Uh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],I=[];for(const R of G)if(this.isCallableTool(R)){const P=R;I.push(await P.tool())}else I.push(R);I.length>0&&(e.config.tools=I);const x={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Z=c3(this.apiClient,x):Z=u3(this.apiClient,x),delete Z.config,q.send(JSON.stringify(Z)),new xF(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const IF={turnComplete:!0};class xF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ar(n.turns),e.isVertexAI()||(i=i.map(s=>Sp(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(AF)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},IF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:p3(e)}:n={realtimeInput:h3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function RF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function NF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cw=10;function fw(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Nl(l)){s=!0;break}if(!s)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Nl(t){return"callTool"in t&&typeof t.callTool=="function"}function DF(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Nl(s)))!==null&&i!==void 0?i:!1}function dw(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,s)=>{if(Nl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(s)}),n}function hw(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MF extends Ss{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,a,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!DF(n)||fw(n.config))return await this.generateContentInternal(d);const h=dw(n);if(h.length>0){const V=h.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let y,E;const T=ar(d.contents),w=(a=(s=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:cw;let D=0;for(;D<w&&(y=await this.generateContentInternal(d),!(!y.functionCalls||y.functionCalls.length===0));){const V=y.candidates[0].content,L=[];for(const H of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Nl(H)){const q=await H.callTool(y.functionCalls);L.push(...q)}D++,E={role:"user",parts:L},d.contents=ar(d.contents),d.contents.push(V),d.contents.push(E),hw(d.config)&&(T.push(V),T.push(E))}return hw(d.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),fw(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}const i=dw(n);if(i.length>0){const s=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${s}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let a;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Ia(Ts.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var i,s,a,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>Nl(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&yR(e.config.tools)){const d=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),vR(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,s;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Nl(l)){const c=l,d=await c.tool();for(const h of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,c)}}return a}async processAfcStream(e){var n,i,s;const a=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:cw;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,y,E){var T,w;return Rl(this,arguments,function*(){for(var D,V,L,H;c<a;){l&&(c++,l=!1);const Z=yield Ot(h.processParamsMaybeAddMcpUsage(E)),G=yield Ot(h.generateContentStreamInternal(Z)),I=[],x=[];try{for(var F=!0,q=(V=void 0,Ec(G)),$;$=yield Ot(q.next()),D=$.done,!D;F=!0){H=$.value,F=!1;const R=H;if(yield yield Ot(R),R.candidates&&(!((T=R.candidates[0])===null||T===void 0)&&T.content)){x.push(R.candidates[0].content);for(const P of(w=R.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<a&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(P.functionCall.name)){const M=yield Ot(y.get(P.functionCall.name).callTool([P.functionCall]));I.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(R){V={error:R}}finally{try{!F&&!D&&(L=q.return)&&(yield Ot(L.call(q)))}finally{if(V)throw V.error}}if(I.length>0){l=!0;const R=new Wu;R.candidates=[{content:{role:"user",parts:I}}],yield yield Ot(R);const P=[];P.push(...x),P.push({role:"user",parts:I});const M=ar(E.contents).concat(P);E.contents=M}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=sw(this.apiClient,e);return c=ve("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=aw(y),T=new Wu;return Object.assign(T,E),T})}else{const h=rw(this.apiClient,e);return c=ve("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=ow(y),T=new Wu;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=sw(this.apiClient,e);return c=ve("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(E){return Rl(this,arguments,function*(){var T,w,D,V;try{for(var L=!0,H=Ec(E),F;F=yield Ot(H.next()),T=F.done,!T;L=!0){V=F.value,L=!1;const q=V,$=aw(yield Ot(q.json()));$.sdkHttpResponse={headers:q.headers};const Z=new Wu;Object.assign(Z,$),yield yield Ot(Z)}}catch(q){w={error:q}}finally{try{!L&&!T&&(D=H.return)&&(yield Ot(D.call(H)))}finally{if(w)throw w.error}}})})}else{const h=rw(this.apiClient,e);return c=ve("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(E){return Rl(this,arguments,function*(){var T,w,D,V;try{for(var L=!0,H=Ec(E),F;F=yield Ot(H.next()),T=F.done,!T;L=!0){V=F.value,L=!1;const q=V,$=ow(yield Ot(q.json()));$.sdkHttpResponse={headers:q.headers};const Z=new Wu;Object.assign(Z,$),yield yield Ot(Z)}}catch(q){w={error:q}}finally{try{!L&&!T&&(D=H.return)&&(yield Ot(D.call(H)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=j3(this.apiClient,e);return c=ve("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=$3(y),T=new zA;return Object.assign(T,E),T})}else{const h=G3(this.apiClient,e);return c=ve("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=K3(y),T=new zA;return Object.assign(T,E),T})}}async generateImagesInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=n5(this.apiClient,e);return c=ve("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=r5(y),T=new HA;return Object.assign(T,E),T})}else{const h=t5(this.apiClient,e);return c=ve("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=i5(y),T=new HA;return Object.assign(T,E),T})}}async editImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=q3(this.apiClient,e);return a=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=B3(d),y=new iU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Z5(this.apiClient,e);return a=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=eF(d),y=new rU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=V5(this.apiClient,e);return a=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=L5(d),y=new sU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=z5(this.apiClient,e);return a=ve("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=H5(d),y=new oU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=T5(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>qy(y))}else{const h=E5(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Fy(y))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=x5(this.apiClient,e);return c=ve("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=N5(y),T=new GA;return Object.assign(T,E),T})}else{const h=I5(this.apiClient,e);return c=ve("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=R5(y),T=new GA;return Object.assign(T,E),T})}}async update(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Q5(this.apiClient,e);return c=ve("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>qy(y))}else{const h=W5(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Fy(y))}}async delete(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=L3(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=U3(y),T=new jA;return Object.assign(T,E),T})}else{const h=V3(this.apiClient,e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=O3(y),T=new jA;return Object.assign(T,E),T})}}async countTokens(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=M3(this.apiClient,e);return c=ve("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=P3(y),T=new KA;return Object.assign(T,E),T})}else{const h=D3(this.apiClient,e);return c=ve("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=k3(y),T=new KA;return Object.assign(T,E),T})}}async computeTokens(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=A3(this.apiClient,e);return a=ve("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>{const h=w3(d),y=new aU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=c5(this.apiClient,e);return c=ve("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>{const E=l5(y),T=new Fh;return Object.assign(T,E),T})}else{const h=u5(this.apiClient,e);return c=ve("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const E=a5(y),T=new Fh;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kF extends Ss{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Q4(e);return c=ve("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l}else{const h=W4(e);return c=ve("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=H4(e);return a=ve("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PF(t){const e={},n=p(t,["data"]);if(n!=null&&g(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function VF(t){const e={},n=p(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>HF(a))),g(e,["parts"],s)}const i=p(t,["role"]);return i!=null&&g(e,["role"],i),e}function LF(t,e,n){const i={},s=p(e,["expireTime"]);n!==void 0&&s!=null&&g(n,["expireTime"],s);const a=p(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&g(n,["newSessionExpireTime"],a);const l=p(e,["uses"]);n!==void 0&&l!=null&&g(n,["uses"],l);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&g(n,["bidiGenerateContentSetup"],zF(t,c));const d=p(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&g(n,["fieldMask"],d),i}function OF(t,e){const n={},i=p(e,["config"]);return i!=null&&g(n,["config"],LF(t,i,n)),n}function UF(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function FF(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function qF(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function BF(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const s=p(t,["responseModalities"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig","responseModalities"],s);const a=p(t,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(t,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(t,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const E=p(t,["speechConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","speechConfig"],E0(E));const T=p(t,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const w=p(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],w);const D=p(t,["systemInstruction"]);e!==void 0&&D!=null&&g(e,["setup","systemInstruction"],VF(Wn(D)));const V=p(t,["tools"]);if(e!==void 0&&V!=null){let G=Ql(V);Array.isArray(G)&&(G=G.map(I=>jF(Wl(I)))),g(e,["setup","tools"],G)}const L=p(t,["sessionResumption"]);e!==void 0&&L!=null&&g(e,["setup","sessionResumption"],GF(L));const H=p(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&g(e,["setup","inputAudioTranscription"],H);const F=p(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&g(e,["setup","outputAudioTranscription"],F);const q=p(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&g(e,["setup","realtimeInputConfig"],q);const $=p(t,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const Z=p(t,["proactivity"]);return e!==void 0&&Z!=null&&g(e,["setup","proactivity"],Z),n}function zF(t,e){const n={},i=p(e,["model"]);i!=null&&g(n,["setup","model"],ht(t,i));const s=p(e,["config"]);return s!=null&&g(n,["config"],BF(s,n)),n}function HF(t){const e={},n=p(t,["functionCall"]);n!=null&&g(e,["functionCall"],n);const i=p(t,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const s=p(t,["executableCode"]);s!=null&&g(e,["executableCode"],s);const a=p(t,["fileData"]);a!=null&&g(e,["fileData"],UF(a));const l=p(t,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const c=p(t,["inlineData"]);c!=null&&g(e,["inlineData"],PF(c));const d=p(t,["text"]);d!=null&&g(e,["text"],d);const h=p(t,["thought"]);h!=null&&g(e,["thought"],h);const y=p(t,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const E=p(t,["videoMetadata"]);return E!=null&&g(e,["videoMetadata"],E),e}function GF(t){const e={},n=p(t,["handle"]);if(n!=null&&g(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jF(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(E=>E)),g(e,["functionDeclarations"],y)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(t,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const s=p(t,["computerUse"]);s!=null&&g(e,["computerUse"],s);const a=p(t,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(t,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=p(t,["googleMaps"]);c!=null&&g(e,["googleMaps"],FF(c));const d=p(t,["googleSearch"]);d!=null&&g(e,["googleSearch"],qF(d));const h=p(t,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${n}.${a}`);e.push(...s)}else e.push(n)}return e.join(",")}function $F(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const a=KF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];a&&d.push(a),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class JF extends Ss{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=OF(this.apiClient,e);a=ve("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=$F(c,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YF(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function WF(t){const e={},n=p(t,["config"]);return n!=null&&YF(n,e),e}function QF(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function XF(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&QF(i,e),e}function ZF(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function eq(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["customMetadata"],a)}const s=p(t,["chunkingConfig"]);return e!==void 0&&s!=null&&g(e,["chunkingConfig"],s),n}function tq(t){const e={},n=p(t,["name"]);n!=null&&g(e,["name"],n);const i=p(t,["metadata"]);i!=null&&g(e,["metadata"],i);const s=p(t,["done"]);s!=null&&g(e,["done"],s);const a=p(t,["error"]);a!=null&&g(e,["error"],a);const l=p(t,["response"]);return l!=null&&g(e,["response"],iq(l)),e}function nq(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&g(e,["fileName"],i);const s=p(t,["config"]);return s!=null&&eq(s,e),e}function iq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&g(e,["parent"],i);const s=p(t,["documentName"]);return s!=null&&g(e,["documentName"],s),e}function rq(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function sq(t){const e={},n=p(t,["config"]);return n!=null&&rq(n,e),e}function oq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["fileSearchStores"],a)}return e}function aq(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const s=p(t,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=p(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),g(e,["customMetadata"],c)}const l=p(t,["chunkingConfig"]);return e!==void 0&&l!=null&&g(e,["chunkingConfig"],l),n}function lq(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&aq(i,e),e}function uq(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cq(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function fq(t){const e={},n=p(t,["name"]);n!=null&&g(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&cq(i,e),e}function dq(t){const e={},n=p(t,["name"]);return n!=null&&g(e,["_url","name"],n),e}function hq(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const s=p(t,["pageToken"]);return e!==void 0&&s!=null&&g(e,["_query","pageToken"],s),n}function pq(t){const e={},n=p(t,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&hq(i,e),e}function mq(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const s=p(t,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gq extends Ss{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ia(Ts.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dq(e);return a=ve("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=fq(e);s=ve("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pq(e);return a=ve("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=mq(d),y=new lU;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yq extends Ss{constructor(e,n=new gq(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Ia(Ts.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WF(e);return a=ve("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ZF(e);return a=ve("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=XF(e);s=ve("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=sq(e);return a=ve("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=oq(d),y=new uU;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lq(e);return a=ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=uq(d),y=new cU;return Object.assign(y,h),y})}}async importFile(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nq(e);return a=ve("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{const h=tq(d),y=new m0;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vq(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function _q(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function Eq(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=p(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&g(e,["displayName"],s),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(t,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(t,["learningRateMultiplier"]);if(l!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&g(e,["tuningTask","hyperparameters","batchSize"],c);const d=p(t,["learningRate"]);if(e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","learningRate"],d),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Tq(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec"],pw(w))}else if(s==="PREFERENCE_TUNING"){const w=p(t,["validationDataset"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec"],pw(w))}const a=p(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const l=p(t,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=p(t,["epochCount"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(d==="PREFERENCE_TUNING"){const w=p(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=p(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let y=p(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(y==="PREFERENCE_TUNING"){const w=p(t,["adapterSize"]);e!==void 0&&w!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=p(t,["labels"]);e!==void 0&&E!=null&&g(e,["labels"],E);const T=p(t,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function Sq(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&g(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&kq(a);const l=p(t,["config"]);return l!=null&&Eq(l,n),n}function bq(t,e){const n={},i=p(t,["baseModel"]);i!=null&&g(n,["baseModel"],i);const s=p(t,["preTunedModel"]);s!=null&&g(n,["preTunedModel"],s);const a=p(t,["trainingDataset"]);a!=null&&Pq(a,n,e);const l=p(t,["config"]);return l!=null&&Tq(l,n,e),n}function Aq(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function wq(t,e){const n={},i=p(t,["name"]);return i!=null&&g(n,["_url","name"],i),n}function Cq(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function Iq(t,e,n){const i={},s=p(t,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(t,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function xq(t,e){const n={},i=p(t,["config"]);return i!=null&&Cq(i,n),n}function Rq(t,e){const n={},i=p(t,["config"]);return i!=null&&Iq(i,n),n}function Nq(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&g(n,["nextPageToken"],s);const a=p(t,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>_R(c))),g(n,["tuningJobs"],l)}return n}function Dq(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["nextPageToken"]);s!=null&&g(n,["nextPageToken"],s);const a=p(t,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>zy(c))),g(n,["tuningJobs"],l)}return n}function Mq(t,e){const n={},i=p(t,["name"]);i!=null&&g(n,["model"],i);const s=p(t,["name"]);return s!=null&&g(n,["endpoint"],s),n}function kq(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),g(n,["examples","examples"],s)}return n}function Pq(t,e,n){const i={};let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function _R(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["state"]);a!=null&&g(n,["state"],eR(a));const l=p(t,["createTime"]);l!=null&&g(n,["createTime"],l);const c=p(t,["tuningTask","startTime"]);c!=null&&g(n,["startTime"],c);const d=p(t,["tuningTask","completeTime"]);d!=null&&g(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const y=p(t,["description"]);y!=null&&g(n,["description"],y);const E=p(t,["baseModel"]);E!=null&&g(n,["baseModel"],E);const T=p(t,["_self"]);return T!=null&&g(n,["tunedModel"],Mq(T)),n}function zy(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["state"]);a!=null&&g(n,["state"],eR(a));const l=p(t,["createTime"]);l!=null&&g(n,["createTime"],l);const c=p(t,["startTime"]);c!=null&&g(n,["startTime"],c);const d=p(t,["endTime"]);d!=null&&g(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&g(n,["updateTime"],h);const y=p(t,["error"]);y!=null&&g(n,["error"],y);const E=p(t,["description"]);E!=null&&g(n,["description"],E);const T=p(t,["baseModel"]);T!=null&&g(n,["baseModel"],T);const w=p(t,["tunedModel"]);w!=null&&g(n,["tunedModel"],w);const D=p(t,["preTunedModel"]);D!=null&&g(n,["preTunedModel"],D);const V=p(t,["supervisedTuningSpec"]);V!=null&&g(n,["supervisedTuningSpec"],V);const L=p(t,["preferenceOptimizationSpec"]);L!=null&&g(n,["preferenceOptimizationSpec"],L);const H=p(t,["tuningDataStats"]);H!=null&&g(n,["tuningDataStats"],H);const F=p(t,["encryptionSpec"]);F!=null&&g(n,["encryptionSpec"],F);const q=p(t,["partnerModelTuningSpec"]);q!=null&&g(n,["partnerModelTuningSpec"],q);const $=p(t,["customBaseModel"]);$!=null&&g(n,["customBaseModel"],$);const Z=p(t,["experiment"]);Z!=null&&g(n,["experiment"],Z);const G=p(t,["labels"]);G!=null&&g(n,["labels"],G);const I=p(t,["outputUri"]);I!=null&&g(n,["outputUri"],I);const x=p(t,["pipelineJob"]);x!=null&&g(n,["pipelineJob"],x);const R=p(t,["serviceAccount"]);R!=null&&g(n,["serviceAccount"],R);const P=p(t,["tunedModelDisplayName"]);P!=null&&g(n,["tunedModelDisplayName"],P);const M=p(t,["veoTuningSpec"]);return M!=null&&g(n,["veoTuningSpec"],M),n}function Vq(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const s=p(t,["name"]);s!=null&&g(n,["name"],s);const a=p(t,["metadata"]);a!=null&&g(n,["metadata"],a);const l=p(t,["done"]);l!=null&&g(n,["done"],l);const c=p(t,["error"]);return c!=null&&g(n,["error"],c),n}function pw(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const s=p(t,["vertexDatasetResource"]);return s!=null&&g(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lq extends Ss{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ia(Ts.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:Vy.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=wq(e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>zy(y))}else{const h=Aq(e);return c=ve("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>_R(y))}}async listInternal(e){var n,i,s,a;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Rq(e);return c=ve("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=Dq(y),T=new $A;return Object.assign(T,E),T})}else{const h=xq(e);return c=ve("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=Nq(y),T=new $A;return Object.assign(T,E),T})}}async cancel(e){var n,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const d=_q(e);l=ve("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=vq(e);l=ve("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=bq(e,e);return a=ve("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>zy(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Sq(e);return a=ve("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:d.headers},y})),s.then(d=>Vq(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oq{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Uq=1024*1024*8,Fq=3,qq=1e3,Bq=2,Bh="x-goog-upload-status";async function zq(t,e,n){var i;const s=await ER(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Bh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Hq(t,e,n){var i;const s=await ER(t,e,n),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[Bh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=Jx(a),c=new g0;return Object.assign(c,l),c}async function ER(t,e,n){var i,s;let a=0,l=0,c=new Ly(new Response),d="upload";for(a=t.size;l<a;){const h=Math.min(Uq,a-l),y=t.slice(l,l+h);l+h>=a&&(d+=", finalize");let E=0,T=qq;for(;E<Fq&&(c=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[Bh]));)E++,await jq(T),T=T*Bq;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[Bh])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function Gq(t){return{size:t.size,type:t.type}}function jq(t){return new Promise(e=>setTimeout(e,t))}class Kq{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zq(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Hq(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Gq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $q{create(e,n,i){return new Jq(e,n,i)}}class Jq{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mw="x-goog-api-key";class Yq{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(mw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(mw,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wq="gl-node/";class Qq{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=B4(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new Yq(this.apiKey);this.apiClient=new hF({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Wq+"web",uploader:new Kq,downloader:new Oq}),this.models=new MF(this.apiClient),this.live=new CF(this.apiClient,s,new $q),this.batches=new d6(this.apiClient),this.chats=new G6(this.models,this.apiClient),this.caches=new B6(this.apiClient),this.files=new e3(this.apiClient),this.operations=new kF(this.apiClient),this.authTokens=new JF(this.apiClient),this.tunings=new Lq(this.apiClient),this.fileSearchStores=new yq(this.apiClient)}}const TR={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},wp=new Qq({apiKey:TR.geminiApiKey});async function Xq(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets. Chaque objet du tableau doit correspondre  une image et contenir les champs : "analysis", "category", "color", et "material".`},n=t.map(s=>({inlineData:{data:s,mimeType:"image/jpeg"}})),i=await wp.models.generateContent({model:"gemini-flash-latest",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{items:{type:qe.ARRAY,description:"Un tableau d'analyses pour chaque vtement.",items:{type:qe.OBJECT,properties:{analysis:{type:qe.STRING,description:"La description concise du vtement."},category:{type:qe.STRING,description:'La catgorie du vtement parmi "Hauts", "Bas", "Chaussures", ou "Accessoires".',enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:qe.STRING,description:"La couleur principale du vtement."},material:{type:qe.STRING,description:"La matire principale du vtement."}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const s=JSON.parse(i.text),a=["Hauts","Bas","Chaussures","Accessoires"];return s.items.forEach(l=>{a.includes(l.category)||(console.warn(`Catgorie invalide reue de l'IA: ${l.category}, fallback sur "Accessoires"`),l.category="Accessoires")}),s.items}catch(s){throw console.error("Erreur de parsing de la rponse de l'IA pour l'analyse par lot:",s),console.error("Rponse reue:",i.text),new Error("L'IA a renvoy une rponse d'analyse malforme.")}}function Zq(t){return t&&t.name&&Array.isArray(t.itemIds)}async function e9(t,e,n,i){const s=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!s.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category}, Couleur: ${T.color}, Mat: ${T.material})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=i?`
**RGLE D'ANCRAGE : Chaque tenue DOIT imprativement inclure l'article ou l'ensemble suivant : "${Zq(i)?i.name:i.analysis} (ID: ${i.id})". C'est la pice matresse.**
`:"",y=`
    Tu es un styliste de mode expert. Ta mission est de crer des tenues pertinentes, compltes et harmonieuses.

    Contexte de l'utilisateur : "${n}"
    
    Vtements et Ensembles disponibles (utilise leur ID, Cat, Couleur, Mat) :
    ${d}
    ${h}

    ---
    RGLES DE STYLE (CRITIQUES) :
    Ce sont des rgles impratives.
    1. **Montre :** Chaque tenue DOIT inclure une montre (Cat: "Accessoires"). Choisis la plus adapte au style de la tenue. Si aucune montre n'est disponible, n'en invente pas.
    2. **Mto (Veste) :** Le "Contexte" inclut la mto. Si la temprature est infrieure  20C, la tenue DOIT inclure une veste, un manteau, ou un gilet (Cat: "Hauts").
    3. **Pull Col V :** Si tu inclus un pull  col en "V" (Cat: "Hauts"), tu DOIS imprativement le superposer avec une chemise  col boutonn (Cat: "Hauts") en dessous.
    4. **Pull Col Zipp :** Si tu inclus un pull  col zipp (Cat: "Hauts"), tu DOIS imprativement le superposer avec une chemise ou un t-shirt (Cat: "Hauts") en dessous.

    ---
    RGLES DE STYLE (GNRALES) :
    1. **Cohrence :** Une tenue doit tre complte et logique. Elle doit inclure au moins un "Hauts" et un "Bas". Si des "Chaussures" pertinentes existent, inclus-les.
    2. **Harmonie :** Assure-toi que les couleurs et les matires de la tenue sont bien assorties.
    3. **Varit :** Les 3 tenues proposes doivent tre distinctes les unes des autres.

    ---
    RGLES DE FORMAT (OBLIGATOIRES) :
    1. Base-toi **uniquement** sur les vtements et ensembles lists ci-dessus.
    2. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    3. Les articles marqus comme "(Ensemble)" sont insparables.

    Cre 3 tenues distinctes. Pour chaque tenue, fournis :
    1. Un "titre" court et accrocheur.
    2. Une "description" brve du style et *pourquoi* elle est adapte au contexte et respecte les rgles.
    3. Une liste "vetements" d'objets, o chaque objet contient "id" et "description" de l'article ou de l'ensemble utilis.

    Rponds en franais.
  `,E=await wp.models.generateContent({model:"gemini-flash-latest",contents:y,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{tenues:{type:qe.ARRAY,description:"La liste des suggestions de tenues.",items:{type:qe.OBJECT,properties:{titre:{type:qe.STRING,description:"Le nom de la tenue."},description:{type:qe.STRING,description:"Une brve description du style de la tenue."},vetements:{type:qe.ARRAY,description:"La liste des objets vtements composant la tenue.",items:{type:qe.OBJECT,properties:{id:{type:qe.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:qe.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{return JSON.parse(E.text).tenues}catch(T){throw console.error("Erreur de parsing JSON de la rponse Gemini:",T),console.error("Rponse reue:",E.text),new Error("L'IA a renvoy une rponse malforme.")}}async function t9(t,e){const n=t.map(a=>`${a.category}: ${a.analysis}, couleur ${a.color}, matire ${a.material}`).join(`
`),i=`Tu es un expert en mode et stylisme. Analyse cette garde-robe et suggre des pices stratgiques  acheter pour la rendre plus versatile et polyvalente.

GARDE-ROBE ACTUELLE (${t.length} pices):
${n}

Analyse la garde-robe et identifie:
1. Les points forts de cette garde-robe
2. Les manques ou gaps  combler
3. Les pices  acheter pour maximiser la polyvalence

Suggre 3-5 pices maximum en priorisant les basiques polyvalents.`,s=await wp.models.generateContent({model:"gemini-flash-latest",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{summary:{type:qe.STRING,description:"Rsum gnral de la garde-robe (2-3 phrases)"},strengths:{type:qe.ARRAY,items:{type:qe.STRING},description:"Liste des points forts"},gaps:{type:qe.ARRAY,items:{type:qe.STRING},description:"Liste des manques"},suggestions:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{category:{type:qe.STRING},description:{type:qe.STRING},reason:{type:qe.STRING},priority:{type:qe.STRING,enum:["high","medium","low"]},estimatedPrice:{type:qe.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}});try{return JSON.parse(s.text)}catch(a){throw console.error("Erreur:",a),a}}async function n9(t,e,n,i){const s=new Set((e||[]).flatMap(E=>E.itemIds)),l=t.filter(E=>!s.has(E.id)).map(E=>`- ${E.analysis} (ID: ${E.id}, Cat: ${E.category}, Couleur: ${E.color}, Mat: ${E.material})`).join(`
`),c=e.map(E=>`- ${E.name} (Ensemble, ID: ${E.id})`).join(`
`),d=[l,c].filter(Boolean).join(`
`),h=`
    Tu es un styliste de voyage. Ta mission est de crer une valise optimise.

    Dtails du voyage :
    - Dure : ${n} jour(s)
    - Contexte / Mto : "${i}"

    Vtements et Ensembles disponibles (utilise leur ID, Cat, Couleur, Mat) :
    ${d}
    
    RGLES :
    1. Cre une liste "valise" polyvalente et minimale. Vise la "mix-and-match" (articles qui vont ensemble).
    2. Ne slectionne QUE des articles de la liste fournie.
    3. Pour chaque article que tu slectionnes, tu DOIS fournir son ID exact et sa description.
    4. Les articles marqus comme "(Ensemble)" sont insparables.
    5. Prends en compte le Contexte/Mto pour la slection.

    Rponds avec un "titre", un "resume" (explique la stratgie de la valise), et la liste "valise".
    La liste "valise" doit contenir des objets, o chaque objet contient "id" et "description".
    `,y=await wp.models.generateContent({model:"gemini-flash-latest",contents:h,config:{responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{titre:{type:qe.STRING,description:"Le nom du plan de valise."},resume:{type:qe.STRING,description:"Un bref rsum de la stratgie de la valise."},valise:{type:qe.ARRAY,description:"La liste des objets vtements  emporter.",items:{type:qe.OBJECT,properties:{id:{type:qe.STRING,description:"L'ID de l'article ou de l'ensemble."},description:{type:qe.STRING,description:"La description de l'article."}},required:["id","description"]}}},required:["titre","resume","valise"]}}});try{return JSON.parse(y.text)}catch(E){throw console.error("Erreur de parsing JSON:",E),new Error("L'IA a renvoy une rponse malforme.")}}const i9=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),r9=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),gw=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),s9=()=>b.jsxs("svg",{className:"animate-spin h-8 w-8 text-gold",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),b0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),yw=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),SR=()=>b.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),o9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),a9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),l9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),u9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),c9=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),bR=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Cp=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),A0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f9=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),d9=()=>b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[b.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),b.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),w0=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Ip=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),h9=({theme:t,toggleTheme:e,children:n})=>b.jsx("header",{className:"bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 z-50",children:b.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[b.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",b.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),b.jsxs("div",{className:"flex items-center gap-4",children:[n,b.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?b.jsx(r9,{}):b.jsx(i9,{})})]})]})}),vw=({user:t})=>{var w,D,V;const[e,n]=K.useState(""),[i,s]=K.useState(""),[a,l]=K.useState(!1),[c,d]=K.useState(!1),h=K.useRef(null);K.useEffect(()=>{const L=H=>{h.current&&!h.current.contains(H.target)&&d(!1)};return c&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[c]);const y=async()=>{try{await dk(lc,L4)}catch(L){console.error("Erreur de connexion Google:",L)}},E=async L=>{L.preventDefault();try{a?await BM(lc,e,i):await zM(lc,e,i)}catch(H){console.error("Erreur d'authentification:",H)}},T=async()=>{try{await KM(lc)}catch(L){console.error("Erreur de dconnexion:",L)}};return t?b.jsxs("div",{className:"relative",ref:h,children:[b.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[b.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:(((w=t.displayName)==null?void 0:w[0])||((D=t.email)==null?void 0:D[0])||"U").toUpperCase()}),b.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((V=t.email)==null?void 0:V.split("@")[0])})]}),c&&b.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[b.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[b.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email})]}),b.jsxs("button",{onClick:T,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",b.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a?"Crez votre compte":"Bienvenue"})]}),b.jsxs("button",{onClick:y,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group",children:[b.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[b.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),b.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),b.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),b.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),b.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]}),b.jsxs("div",{className:"relative my-6",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),b.jsx("div",{className:"relative flex justify-center text-sm",children:b.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),b.jsxs("form",{onSubmit:E,className:"space-y-4",children:[b.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:L=>n(L.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),b.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:L=>s(L.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),b.jsx("button",{type:"submit",className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold",children:a?"Crer mon compte":"Se connecter"})]}),b.jsx("button",{onClick:()=>l(!a),className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:a?"Dj un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})]})},p9=({onAnalyze:t,isAnalyzing:e})=>{const n=K.useRef(null),[i,s]=K.useState([]),[a,l]=K.useState(!1),[c,d]=K.useState(!1);K.useEffect(()=>{const F=()=>d(window.innerWidth<1024);return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),K.useEffect(()=>()=>{i.forEach(F=>URL.revokeObjectURL(F.preview))},[i]);const h=F=>{const q=F.map($=>({id:`${$.name}-${$.lastModified}-${Math.random()}`,file:$,preview:URL.createObjectURL($)}));s($=>[...$,...q])},y=F=>{F.target.files&&(h(Array.from(F.target.files)),F.target.value="")},E=()=>{var F;e||(F=n.current)==null||F.click()},T=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!0))},w=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1))},D=F=>{c||(F.preventDefault(),F.stopPropagation())},V=F=>{c||(F.preventDefault(),F.stopPropagation(),l(!1),F.dataTransfer.files&&F.dataTransfer.files.length>0&&(h(Array.from(F.dataTransfer.files)),F.dataTransfer.clearData()))},L=F=>{const q=i.find($=>$.id===F);q&&URL.revokeObjectURL(q.preview),s($=>$.filter(Z=>Z.id!==F))},H=()=>{i.length>0&&!e&&(t(i.map(F=>F.file)),s([]))};return b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:w,onDragOver:D,onDrop:V,children:[b.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),b.jsxs("div",{onClick:E,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[b.jsx("input",{type:"file",ref:n,onChange:y,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),b.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?b.jsxs(b.Fragment,{children:[b.jsx(s9,{}),b.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:b.jsx(gw,{})}),b.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),b.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",b.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),a&&!c&&b.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[b.jsx("div",{className:"text-black transform-gpu scale-110",children:b.jsx(gw,{})}),b.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&b.jsxs("div",{className:"mt-8",children:[b.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),b.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(F=>b.jsxs("div",{className:"relative group aspect-square",children:[b.jsx("img",{src:F.preview,alt:F.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),b.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),b.jsx("button",{onClick:()=>L(F.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:b.jsx(b0,{})})]},F.id))}),b.jsxs("button",{onClick:H,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(S0,{}),"Analyser les ",i.length," article(s)"]})]})]})},m9=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:s,isSet:a,isFavorite:l})=>b.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[b.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),b.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${s?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),s?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:b.jsx(A0,{})}):l?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:b.jsx(Ip,{})}):a?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:b.jsx(Cp,{})}):null,b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:b.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),b.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:b.jsx(b0,{})})]}),g9={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},y9=({clothingItems:t,clothingSets:e=[],onItemClick:n,onDeleteItem:i,onCreateSet:s})=>{const[a,l]=K.useState("Hauts"),[c,d]=K.useState(g9),[h,y]=K.useState(!1),[E,T]=K.useState(new Set),w=K.useMemo(()=>e||[],[e]),D=K.useMemo(()=>new Set(w.flatMap(M=>M.itemIds||[])),[w]),V=t.length,L=[{name:"Hauts",icon:o9},{name:"Bas",icon:a9},{name:"Chaussures",icon:l9},{name:"Accessoires",icon:u9}],H=M=>{h?T(O=>{const U=new Set(O);return U.has(M.id)?U.delete(M.id):U.add(M.id),U}):n(M)},F=(M,O)=>{M.stopPropagation(),E.has(O)&&T(U=>{const Ie=new Set(U);return Ie.delete(O),Ie}),i(O)},q=K.useMemo(()=>t.filter(M=>{if(!(M.category===a))return!1;const U=a?c[a]:{color:"Toutes",material:"Toutes"},Ie=U.color==="Toutes"||M.color===U.color,_e=U.material==="Toutes"||M.material===U.material;return Ie&&_e}),[t,a,c]),$=K.useMemo(()=>{if(!a)return[];const M=t.filter(O=>O.category===a).map(O=>O.color);return["Toutes",...Array.from(new Set(M))]},[t,a]),Z=K.useMemo(()=>{if(!a)return[];const M=t.filter(O=>O.category===a).map(O=>O.material);return["Toutes",...Array.from(new Set(M))]},[t,a]),G=M=>{a&&d(O=>({...O,[a]:{...O[a],color:M}}))},I=M=>{a&&d(O=>({...O,[a]:{...O[a],material:M}}))},x=M=>{l(a===M?null:M)},R=()=>{y(!h),T(new Set)},P=()=>{if(E.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const M=window.prompt("Donnez un nom  cet ensemble :");M&&(s(M,Array.from(E)),R())};return V===0?b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[b.jsx(yw,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),b.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-8",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(yw,{className:"w-8 h-8 text-gold"}),b.jsxs("div",{children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[b.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),b.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[V," vtement",V>1?"s":""]})]})]}),h?b.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[b.jsx("button",{onClick:R,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),b.jsxs("button",{onClick:P,disabled:E.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",E.size,")"]})]}):b.jsxs("button",{onClick:R,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[b.jsx(Cp,{}),"Crer un ensemble"]})]}),h&&b.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[b.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),b.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),b.jsx("div",{className:"space-y-6",children:L.map(({name:M,icon:O})=>{const U=t.filter(_e=>_e.category===M),Ie=a===M;return b.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[b.jsxs("button",{onClick:()=>x(M),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(O,{className:"w-5 h-5 text-gold"}),b.jsx("span",{className:"font-semibold text-lg",children:M}),b.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",U.length,")"]})]}),b.jsx(c9,{className:`w-5 h-5 transition-transform ${Ie?"rotate-180":""}`})]}),Ie&&b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"flex flex-wrap gap-4",children:[b.jsxs("div",{className:"flex-1 min-w-[200px]",children:[b.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),b.jsx("select",{value:c[M].color,onChange:_e=>G(_e.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:$.map(_e=>b.jsx("option",{value:_e,children:_e},_e))})]}),b.jsxs("div",{className:"flex-1 min-w-[200px]",children:[b.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),b.jsx("select",{value:c[M].material,onChange:_e=>I(_e.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:Z.map(_e=>b.jsx("option",{value:_e,children:_e},_e))})]})]}),q.length>0?b.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:q.map(_e=>b.jsx(m9,{imageSrc:_e.imageSrc,analysis:_e.analysis,onClick:()=>H(_e),onRemove:te=>F(te,_e.id),isSelected:E.has(_e.id),isSet:D.has(_e.id),isFavorite:_e.isFavorite},_e.id))}):b.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},M)})})]})},AR=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:s,weatherError:a})=>{const[l,c]=vn.useState(""),d=y=>{y.preventDefault(),n(l||"Casual")},h=["Casual","Soire chic","Travail (formel)"];return b.jsxs("div",{children:[b.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[s&&b.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",s," "]}),a&&b.jsx("p",{className:"text-sm font-medium text-red-500",children:a}),!s&&!a&&b.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),b.jsx("form",{onSubmit:d,children:b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),b.jsx("div",{className:"flex justify-center gap-2 mb-4",children:h.map(y=>b.jsx("button",{type:"button",onClick:()=>c(y),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===y?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:y},y))}),b.jsx("input",{id:"occasion",type:"text",value:l,onChange:y=>c(y.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),b.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(S0,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},zh=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:s})=>{const[a,l]=K.useState(null);K.useEffect(()=>{if(!a)return;const d=h=>{h.key==="Escape"&&l(null)};return window.addEventListener("keydown",d),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",d),document.body.style.overflow="auto"}},[a]);const c=d=>{const{id:h,description:y}=d;let E=e.find(w=>w.id===h);if(E)return E;let T=n.find(w=>w.id===h);if(T)return T;if(E=e.find(w=>w.analysis===h),E||(E=e.find(w=>w.analysis===y),E))return E};return b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"mt-10 space-y-8",children:t.map((d,h)=>{const y=i.some(E=>E.titre===d.titre&&E.description===d.description);return b.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:d.titre}),b.jsx("button",{onClick:()=>s(d),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":y?"Retirer des favoris":"Ajouter aux favoris",children:y?b.jsx(Ip,{className:"w-6 h-6 text-gold"}):b.jsx(w0,{className:"w-6 h-6"})})]}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:d.description}),b.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:d.vetements.map((E,T)=>{const w=c(E),D=w?w.imageSrc:null;return b.jsx("button",{onClick:()=>D&&l(D),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100",disabled:!D,"aria-label":`Agrandir l'image de : ${E.description}`,children:D?b.jsx("img",{src:D,alt:E.description,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:b.jsx(SR,{})})},T)})}),b.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:d.vetements.map((E,T)=>b.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:E.description},T))})]},h)})}),a&&b.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>l(null),role:"dialog","aria-modal":"true",children:b.jsxs("div",{className:"relative",onClick:d=>d.stopPropagation(),children:[b.jsx("img",{src:a,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),b.jsx("button",{onClick:()=>l(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:b.jsx(bR,{})})]})})]})},v9=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:s,onRemoveSet:a,onDelete:l})=>{const[c,d]=K.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[h,y]=K.useState(!1),E=e.find(L=>L.itemIds.includes(t.id));K.useEffect(()=>{d({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),K.useEffect(()=>{const L=H=>{H.key==="Escape"&&n()};return document.body.style.overflow="hidden",window.addEventListener("keydown",L),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",L)}},[n]);const T=L=>{const{name:H,value:F}=L.target;d(q=>({...q,[H]:F}))},w=L=>{L.preventDefault(),i({...t,...c}),y(!0),setTimeout(()=>{y(!1)},2e3)},D=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},V=L=>{L.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return b.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:L=>L.stopPropagation(),children:[b.jsxs("div",{className:"relative",children:[b.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),b.jsx("button",{onClick:V,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?b.jsx(Ip,{className:"w-6 h-6 text-red-500"}):b.jsx(w0,{className:"w-6 h-6"})}),b.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:b.jsx(bR,{})})]}),b.jsxs("form",{onSubmit:w,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[b.jsxs("div",{className:"space-y-4 flex-grow",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),b.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),b.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(L=>b.jsx("option",{value:L,children:L},L))})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),b.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),b.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),E&&b.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),b.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:E.name,children:E.name})]}),b.jsxs("button",{type:"button",onClick:()=>{a(E.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[b.jsx(f9,{}),b.jsx("span",{children:"Dissocier"})]})]})]}),b.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[b.jsxs("button",{type:"button",onClick:D,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[b.jsx(b0,{}),"Supprimer"]}),b.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[b.jsxs("button",{type:"button",onClick:()=>s(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[b.jsx(S0,{}),"Crer une tenue"]}),b.jsx("button",{type:"submit",disabled:h,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${h?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:h?b.jsxs(b.Fragment,{children:[b.jsx(A0,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},wR=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[s,a]=K.useState(3),[l,c]=K.useState(""),d=h=>{h.preventDefault();const y=l||"";y.trim()&&s>0&&n(s,y)};return b.jsxs("form",{onSubmit:d,className:"space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-end",children:[b.jsxs("div",{className:"sm:col-span-1",children:[b.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),b.jsx("input",{id:"days",type:"number",value:s,onChange:h=>a(parseInt(h.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),b.jsxs("div",{className:"sm:col-span-2",children:[b.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),b.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:h=>c(h.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),b.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||s<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[b.jsx(d9,{}),i?"Prparation...":"Gnrer la valise"]})]})},CR=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=s=>{const{id:a,description:l}=s;let c=e.find(h=>h.id===a);if(c)return c;let d=n.find(h=>h.id===a);if(d)return d;if(c=e.find(h=>h.analysis===a),c||(c=e.find(h=>h.analysis===l),c))return c};return b.jsx("div",{className:"mt-10",children:b.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[b.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),b.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((s,a)=>{const l=i(s),c=l?l.imageSrc:null;return b.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:s.description,children:[c?b.jsx("img",{src:c,alt:s.description,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:b.jsx(SR,{})}),b.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:b.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:s.description})})]},a)})}),b.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((s,a)=>b.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:s.description},a))})]})})},_9=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,s]=K.useState(!1),a=l=>{const c=Array.from(l.target.files||[]);c.length>0&&(t(c),s(!1))};return b.jsxs(b.Fragment,{children:[!n&&b.jsx("button",{onClick:()=>s(!0),disabled:e,className:"md:hidden fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-full shadow-2xl hover:shadow-gold/50 transition-all duration-300 flex items-center justify-center z-40 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95","aria-label":"Ajouter un vtement",children:e?b.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):b.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})}),i&&b.jsx("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",onClick:()=>s(!1),children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black w-full rounded-t-3xl p-6 pb-8 animate-slide-up",onClick:l=>l.stopPropagation(),children:[b.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mb-6"}),b.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Ajouter un vtement"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:a,className:"hidden"}),b.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gold/10 to-gold-dark/10 hover:from-gold/20 hover:to-gold-dark/20 border-2 border-gold/30 rounded-xl transition-all cursor-pointer active:scale-98",children:[b.jsx("div",{className:"w-12 h-12 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:b.jsxs("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-semibold",children:"Appareil Photo"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]})]}),b.jsxs("label",{className:"block",children:[b.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a,className:"hidden"}),b.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl transition-all cursor-pointer active:scale-98",children:[b.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-semibold",children:"Galerie"}),b.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choisir depuis vos photos"})]})]})]})]}),b.jsx("button",{onClick:()=>s(!1),className:"w-full mt-4 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Annuler"})]})})]})},E9=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:s,isAnalyzingWardrobe:a,clothingCount:l,favoriteOutfitCount:c})=>b.jsxs("div",{className:"space-y-4 pb-24",children:[b.jsxs("div",{className:"text-center py-6",children:[b.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[b.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),b.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&b.jsx("button",{onClick:t,disabled:a,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:a?b.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):b.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),b.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),b.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:b.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),b.jsx("div",{className:"px-4 pt-6",children:b.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[b.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),b.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[b.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),b.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),b.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[b.jsx("div",{className:"text-green-500",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),b.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),b.jsxs("button",{onClick:s,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[b.jsxs("div",{className:"text-red-500",children:[b.jsx(w0,{})," "]}),b.jsx("p",{className:"text-2xl font-bold",children:c}),b.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),T9=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return b.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:b.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(s=>{const a=t===s.id;return b.jsxs("button",{onClick:()=>e(s.id),className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${a?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[b.jsxs("div",{className:"relative",children:[s.icon,s.count!==null&&s.count>0&&b.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${a?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:s.count})]}),b.jsx("span",{className:`text-xs font-medium ${a?"font-bold":""}`,children:s.label})]},s.id)})})})},S9=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return b.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[b.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),b.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:b.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),b.jsxs("div",{className:"p-6 space-y-6",children:[b.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[b.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),b.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[b.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),b.jsx("div",{className:"grid gap-2",children:t.strengths.map((s,a)=>b.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[b.jsx("span",{className:"text-green-500 mt-0.5",children:""}),b.jsx("span",{children:s})]},a))})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[b.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),b.jsx("div",{className:"grid gap-2",children:t.gaps.map((s,a)=>b.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[b.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),b.jsx("span",{children:s})]},a))})]}),b.jsxs("div",{children:[b.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[b.jsx("span",{children:""})," Pices recommandes"]}),b.jsx("div",{className:"grid gap-4",children:t.suggestions.map((s,a)=>b.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[b.jsxs("div",{className:"flex justify-between items-start mb-3",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"font-bold text-lg",children:s.description}),b.jsx("p",{className:"text-sm text-gray-500",children:s.category})]}),b.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[s.priority]}`,children:i[s.priority]})]}),b.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[b.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",s.reason]}),s.estimatedPrice&&b.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.estimatedPrice]})]},a))})]})]})]})})};var b9=A9()?K.useLayoutEffect:K.useEffect;function A9(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function w9(){var t=K.useState(Object.create(null)),e=t[1];return K.useCallback(function(){e(Object.create(null))},[])}var C9=lC(),I9=function(e){var n=e.children,i=e.type,s=i===void 0?"reach-portal":i,a=K.useRef(null),l=K.useRef(null),c=w9();return b9(function(){if(a.current){var d=a.current.ownerDocument;return l.current=d==null?void 0:d.createElement(s),d.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[s,c]),l.current?C9.createPortal(n,l.current):K.createElement("span",{ref:a})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ye=function(){return ye=Object.assign||function(e){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye.apply(this,arguments)};function C0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function ot(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function Lt(t,e,n){if(arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var xt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(xt||(xt={}));var ql;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(ql||(ql={}));var Hy=xt.Start,I0=xt.Stop,rf=xt.Raise,xp=xt.Send,IR=xt.Cancel,x9=xt.NullEvent,x0=xt.Assign;xt.After;xt.DoneState;var xR=xt.Log,R9=xt.Init,Gy=xt.Invoke;xt.ErrorExecution;var _w=xt.ErrorPlatform,N9=xt.ErrorCustom,RR=xt.Update,D9=xt.Choose,M9=xt.Pure,NR=".",Ew={},jy="xstate.guard",k9="",Ld;function R0(t,e,n){n===void 0&&(n=NR);var i=Tc(t,n),s=Tc(e,n);return _t(s)?_t(i)?s===i:!1:_t(i)?i in s:Object.keys(i).every(function(a){return a in s?R0(i[a],s[a]):!1})}function DR(t){try{return _t(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Ky(t,e){try{return Zl(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function P9(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function Tc(t,e){if(P9(t))return t.value;if(Zl(t))return Hh(t);if(typeof t!="string")return t;var n=Ky(t,e);return Hh(n)}function Hh(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function uc(t,e){for(var n={},i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];n[a]=e(t[a],a,t,s)}return n}function Tw(t,e,n){var i,s,a={};try{for(var l=ot(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];n(h)&&(a[d]=e(h,d,t))}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}var V9=function(t){return function(e){var n,i,s=e;try{for(var a=ot(t),l=a.next();!l.done;l=a.next()){var c=l.value;s=s[c]}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}};function L9(t,e){return function(n){var i,s,a=n;try{for(var l=ot(t),c=l.next();!c.done;c=l.next()){var d=c.value;a=a[e][d]}}catch(h){i={error:h}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}}function fh(t){if(!t)return[[]];if(_t(t))return[[t]];var e=zt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:fh(t[n]).map(function(s){return[n].concat(s)})}));return e}function zt(t){var e;return(e=[]).concat.apply(e,Lt([],dt(t),!1))}function MR(t){return Zl(t)?t:[t]}function gr(t){return t===void 0?[]:MR(t)}function Gh(t,e,n){var i,s;if(mt(t))return t(e,n.data);var a={};try{for(var l=ot(Object.keys(t)),c=l.next();!c.done;c=l.next()){var d=c.value,h=t[d];mt(h)?a[d]=h(e,n.data):a[d]=h}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return a}function O9(t){return/^(done|error)\./.test(t)}function Sw(t){return!!(t instanceof Promise||t!==null&&(mt(t)||typeof t=="object")&&mt(t.then))}function U9(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function F9(t,e){var n,i,s=dt([[],[]],2),a=s[0],l=s[1];try{for(var c=ot(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}function kR(t,e){return uc(t.states,function(n,i){if(n){var s=(_t(e)?void 0:e[i])||(n?n.current:void 0);if(s)return{current:s,states:kR(n,s)}}})}function q9(t,e){return{current:e,states:kR(t,e)}}function bw(t,e,n,i){var s=t&&n.reduce(function(a,l){var c,d,h=l.assignment,y={state:i,action:l,_event:e},E={};if(mt(h))E=h(a,e.data,y);else try{for(var T=ot(Object.keys(h)),w=T.next();!w.done;w=T.next()){var D=w.value,V=h[D];E[D]=mt(V)?V(a,e.data,y):V}}catch(L){c={error:L}}finally{try{w&&!w.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}return Object.assign({},a,E)},t);return s}var B9=function(){};function Zl(t){return Array.isArray(t)}function mt(t){return typeof t=="function"}function _t(t){return typeof t=="string"}function PR(t,e){if(t)return _t(t)?{type:jy,name:t,predicate:e?e[t]:void 0}:mt(t)?{type:jy,name:t.name,predicate:t}:t}function z9(t){try{return"subscribe"in t&&mt(t.subscribe)}catch{return!1}}var uo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();Ld={},Ld[uo]=function(){return this},Ld[Symbol.observable]=function(){return this};function Bl(t){return!!t&&"__xstatenode"in t}function H9(t){return!!t&&typeof t.send=="function"}function Rp(t,e){return _t(t)||typeof t=="number"?ye({type:t},e):t}function Vn(t,e){if(!_t(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Rp(t);return ye({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function fl(t,e){var n=MR(e).map(function(i){return typeof i>"u"||typeof i=="string"||Bl(i)?{target:i,event:t}:ye(ye({},i),{event:t})});return n}function G9(t){if(!(t===void 0||t===k9))return gr(t)}function VR(t,e,n,i,s){var a=t.options.guards,l={state:s,cond:e,_event:i};if(e.type===jy)return((a==null?void 0:a[e.name])||e.predicate)(n,i.data,l);var c=a==null?void 0:a[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function LR(t){return typeof t=="string"?{type:t}:t}function dh(t,e,n){var i=function(){},s=typeof t=="object",a=s?t:null;return{next:((s?t.next:t)||i).bind(a),error:((s?t.error:e)||i).bind(a),complete:((s?t.complete:n)||i).bind(a)}}function Od(t,e){return"".concat(t,":invocation[").concat(e,"]")}function $y(t){return(t.type===rf||t.type===xp&&t.to===ql.Internal)&&typeof t.delay!="number"}var Dl=Vn({type:R9});function Jy(t,e){return e&&e[t]||void 0}function qc(t,e){var n;if(_t(t)||typeof t=="number"){var i=Jy(t,e);mt(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(mt(t))n={type:t.name||t.toString(),exec:t};else{var i=Jy(t.type,e);if(mt(i))n=ye(ye({},t),{exec:i});else if(i){var s=i.type||t.type;n=ye(ye(ye({},i),t),{type:s})}else n=t}return n}var co=function(t,e){if(!t)return[];var n=Zl(t)?t:[t];return n.map(function(i){return qc(i,e)})};function N0(t){var e=qc(t);return ye(ye({id:_t(t)?t:e.id},e),{type:e.type})}function j9(t,e){return{type:rf,event:typeof t=="function"?t:Rp(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function K9(t,e,n,i){var s={_event:n},a=Vn(mt(t.event)?t.event(e,n.data,s):t.event),l;if(_t(t.delay)){var c=i&&i[t.delay];l=mt(c)?c(e,n.data,s):c}else l=mt(t.delay)?t.delay(e,n.data,s):t.delay;return ye(ye({},t),{type:rf,_event:a,delay:l})}function $9(t,e){return{to:e?e.to:void 0,type:xp,event:mt(t)?t:Rp(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:mt(t)?t.name:DR(t)}}function J9(t,e,n,i){var s={_event:n},a=Vn(mt(t.event)?t.event(e,n.data,s):t.event),l;if(_t(t.delay)){var c=i&&i[t.delay];l=mt(c)?c(e,n.data,s):c}else l=mt(t.delay)?t.delay(e,n.data,s):t.delay;var d=mt(t.to)?t.to(e,n.data,s):t.to;return ye(ye({},t),{to:d,_event:a,event:a.data,delay:l})}var Y9=function(t,e,n){return ye(ye({},t),{value:_t(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},W9=function(t){return{type:IR,sendId:t}};function Q9(t){var e=N0(t);return{type:xt.Start,activity:e,exec:void 0}}function X9(t){var e=mt(t)?t:N0(t);return{type:xt.Stop,activity:e,exec:void 0}}function Z9(t,e,n){var i=mt(t.activity)?t.activity(e,n.data):t.activity,s=typeof i=="string"?{id:i}:i,a={type:xt.Stop,activity:s};return a}var eB=function(t){return{type:x0,assignment:t}};function tB(t,e){var n=e?"#".concat(e):"";return"".concat(xt.After,"(").concat(t,")").concat(n)}function Ud(t,e){var n="".concat(xt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function hh(t,e){var n="".concat(xt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function cc(t,e){var n="".concat(xt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var nB=function(t){var e,n,i=[];try{for(var s=ot(t),a=s.next();!a.done;a=s.next())for(var l=a.value,c=0;c<l.actions.length;){if(l.actions[c].type===x0){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(d){e={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i};function jh(t,e,n,i,s,a,l){l===void 0&&(l=!1);var c=l?[]:nB(s),d=c.length?bw(n,i,c,e):n,h=l?[n]:void 0,y=[];function E(D,V){var L;switch(V.type){case rf:{var H=K9(V,d,i,t.options.delays);return a&&typeof H.delay=="number"&&a(H,d,i),H}case xp:var F=J9(V,d,i,t.options.delays);return a&&F.to!==ql.Internal&&(D==="entry"?y.push(F):a(F,d,i)),F;case xR:{var q=Y9(V,d,i);return a==null||a(q,d,i),q}case D9:{var $=V,Z=(L=$.conds.find(function(te){var ce=PR(te.cond,t.options.guards);return!ce||VR(t,ce,d,i,a?void 0:e)}))===null||L===void 0?void 0:L.actions;if(!Z)return[];var G=dt(jh(t,e,d,i,[{type:D,actions:co(gr(Z),t.options.actions)}],a,l),2),I=G[0],x=G[1];return d=x,h==null||h.push(d),I}case M9:{var Z=V.get(d,i.data);if(!Z)return[];var R=dt(jh(t,e,d,i,[{type:D,actions:co(gr(Z),t.options.actions)}],a,l),2),P=R[0],M=R[1];return d=M,h==null||h.push(d),P}case I0:{var q=Z9(V,d,i);return a==null||a(q,n,i),q}case x0:{d=bw(d,i,[V],a?void 0:e),h==null||h.push(d);break}default:var O=qc(V,t.options.actions),U=O.exec;if(a)a(O,d,i);else if(U&&h){var Ie=h.length-1,_e=ye(ye({},O),{exec:function(te){for(var ce=[],ge=1;ge<arguments.length;ge++)ce[ge-1]=arguments[ge];U.apply(void 0,Lt([h[Ie]],dt(ce),!1))}});O=_e}return O}}function T(D){var V,L,H=[];try{for(var F=ot(D.actions),q=F.next();!q.done;q=F.next()){var $=q.value,Z=E(D.type,$);Z&&(H=H.concat(Z))}}catch(G){V={error:G}}finally{try{q&&!q.done&&(L=F.return)&&L.call(F)}finally{if(V)throw V.error}}return y.forEach(function(G){a(G,d,i)}),y.length=0,H}var w=zt(s.map(T));return[w,d]}var El=function(t,e){var n=e(t);return n};function OR(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[uo]=function(){return this},e}function iB(t,e,n,i){var s,a=LR(t.src),l=(s=e==null?void 0:e.options.services)===null||s===void 0?void 0:s[a.type],c=t.data?Gh(t.data,n,i):void 0,d=l?UR(l,t.id,c):OR(t.id);return d.meta=t,d}function UR(t,e,n){var i=OR(e);if(i.deferred=!0,Bl(t)){var s=i.state=El(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return s}}return i}function rB(t){try{return typeof t.send=="function"}catch{return!1}}function sB(t){return rB(t)&&"id"in t}function oB(t){var e;return ye((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[uo]=function(){return this},e),t)}var Kh=function(t){return t.type==="atomic"||t.type==="final"};function FR(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Bc(t){return FR(t).filter(function(e){return e.type!=="history"})}function qR(t){var e=[t];return Kh(t)?e:e.concat(zt(Bc(t).map(qR)))}function fc(t,e){var n,i,s,a,l,c,d,h,y=new Set(t),E=Yy(y),T=new Set(e);try{for(var w=ot(T),D=w.next();!D.done;D=w.next())for(var V=D.value,L=V.parent;L&&!T.has(L);)T.add(L),L=L.parent}catch(R){n={error:R}}finally{try{D&&!D.done&&(i=w.return)&&i.call(w)}finally{if(n)throw n.error}}var H=Yy(T);try{for(var F=ot(T),q=F.next();!q.done;q=F.next()){var V=q.value;if(V.type==="compound"&&(!H.get(V)||!H.get(V).length))E.get(V)?E.get(V).forEach(function(P){return T.add(P)}):V.initialStateNodes.forEach(function(P){return T.add(P)});else if(V.type==="parallel")try{for(var $=(l=void 0,ot(Bc(V))),Z=$.next();!Z.done;Z=$.next()){var G=Z.value;T.has(G)||(T.add(G),E.get(G)?E.get(G).forEach(function(P){return T.add(P)}):G.initialStateNodes.forEach(function(P){return T.add(P)}))}}catch(P){l={error:P}}finally{try{Z&&!Z.done&&(c=$.return)&&c.call($)}finally{if(l)throw l.error}}}}catch(R){s={error:R}}finally{try{q&&!q.done&&(a=F.return)&&a.call(F)}finally{if(s)throw s.error}}try{for(var I=ot(T),x=I.next();!x.done;x=I.next())for(var V=x.value,L=V.parent;L&&!T.has(L);)T.add(L),L=L.parent}catch(R){d={error:R}}finally{try{x&&!x.done&&(h=I.return)&&h.call(I)}finally{if(d)throw d.error}}return T}function BR(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(Kh(i))return i.key}else return{}}var s={};return n.forEach(function(a){s[a.key]=BR(a,e)}),s}function Yy(t){var e,n,i=new Map;try{for(var s=ot(t),a=s.next();!a.done;a=s.next()){var l=a.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}function aB(t,e){var n=fc([t],e);return BR(t,Yy(n))}function dc(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function lB(t){return Lt([],dt(new Set(zt(Lt([],dt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function ph(t,e){return e.type==="compound"?Bc(e).some(function(n){return n.type==="final"&&dc(t,n)}):e.type==="parallel"?Bc(e).every(function(n){return ph(t,n)}):!1}function uB(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function Aw(t){return new Set(zt(t.map(function(e){return e.tags})))}function zR(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(_t(t)||_t(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(s){return zR(t[s],e[s])})}function cB(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function fB(t,e){var n=t.exec,i=ye(ye({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var sr=(function(){function t(e){var n=this,i;this.actions=[],this.activities=Ew,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Ew,this.meta=uB(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return lB(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=Dl;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=Dl;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),_t(e))return[e];var s=Object.keys(e);return s.concat.apply(s,Lt([],dt(s.map(function(a){return i.toStrings(e[a],n).map(function(l){return a+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=C0(e,["configuration","transitions","tags","machine"]);return ye(ye({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return R0(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;B9(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(s){return s.target!==void 0||s.actions.length})},t})(),dB={deferEvents:!1},ww=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ye(ye({},dB),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),Qg=new Map,hB=0,Qu={bookId:function(){return"x:".concat(hB++)},register:function(t,e){return Qg.set(t,e),t},get:function(t){return Qg.get(t)},free:function(t){Qg.delete(t)}};function D0(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function pB(){var t=D0();if(t&&"__xstate__"in t)return t.__xstate__}function mB(t){if(D0()){var e=pB();e&&e.register(t)}}function gB(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,s=[],a=!1,l=function(){if(!a){for(a=!0;s.length>0;){var h=s.shift();n=t.transition(n,h,d),i.forEach(function(y){return y.next(n)})}a=!1}},c=oB({id:e.id,send:function(h){s.push(h),l()},getSnapshot:function(){return n},subscribe:function(h,y,E){var T=dh(h,y,E);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),d={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(d):n,c}var yB={sync:!1,autoForward:!1},xn;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(xn||(xn={}));var vB=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=xn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(y,E){if(Zl(y))return i.batch(y),i.state;var T=Vn(Rp(y,E));if(i.status===xn.Stopped)return i.state;if(i.status!==xn.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var w=i._nextState(T);i.update(w,T)}),i._state},this.sendTo=function(y,E,T){var w=i.parent&&(E===ql.Parent||i.parent.id===E),D=w?i.parent:_t(E)?E===ql.Internal?i:i.children.get(E)||Qu.get(E):H9(E)?E:void 0;if(!D){if(!w)throw new Error("Unable to send event to child '".concat(E,"' from service '").concat(i.id,"'."));return}if("machine"in D){if(i.status!==xn.Stopped||i.parent!==D||i.state.done){var V=ye(ye({},y),{name:y.name===N9?"".concat(cc(i.id)):y.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([D,V]):D.send(V)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([D,y.data]):D.send(y.data)},this._exec=function(y,E,T,w){w===void 0&&(w=i.machine.options.actions);var D=y.exec||Jy(y.type,w),V=mt(D)?D:D?D.exec:y.exec;if(V)try{return V(E,T.data,i.machine.config.predictableActionArguments?{action:y,_event:T}:{action:y,state:i.state,_event:T})}catch(Ie){throw i.parent&&i.parent.send({type:"xstate.error",data:Ie}),Ie}switch(y.type){case rf:{var L=y;i.defer(L);break}case xp:var H=y;if(typeof H.delay=="number"){i.defer(H);return}else H.to?i.sendTo(H._event,H.to,T===Dl):i.send(H._event);break;case IR:i.cancel(y.sendId);break;case Hy:{if(i.status!==xn.Running)return;var F=y.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[F.id||F.type])break;if(F.type===xt.Invoke){var q=LR(F.src),$=i.machine.options.services?i.machine.options.services[q.type]:void 0,Z=F.id,G=F.data,I="autoForward"in F?F.autoForward:!!F.forward;if(!$)return;var x=G?Gh(G,E,T):void 0;if(typeof $=="string")return;var R=mt($)?$(E,T.data,{data:x,src:q,meta:F.meta}):$;if(!R)return;var P=void 0;Bl(R)&&(R=x?R.withContext(x):R,P={autoForward:I}),i.spawn(R,Z,P)}else i.spawnActivity(F);break}case I0:{i.stopChild(y.activity.id);break}case xR:var M=y,O=M.label,U=M.value;O?i.logger(O,U):i.logger(U);break}};var s=ye(ye({},t.defaultOptions),n),a=s.clock,l=s.logger,c=s.parent,d=s.id,h=d!==void 0?d:e.id;this.id=h,this.logger=l,this.clock=a,this.parent=c,this.options=s,this.scheduler=new ww({deferEvents:this.options.deferEvents}),this.sessionId=Qu.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:El(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,s;try{for(var a=ot(e.actions),l=a.next();!l.done;l=a.next()){var c=l.value;this.exec(c,e,n)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,s,a,l,c,d,h,y,E=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===Dl)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(R){E.state.children[R.id]=R}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var w=ot(this.eventListeners),D=w.next();!D.done;D=w.next()){var V=D.value;V(e.event)}}catch(R){i={error:R}}finally{try{D&&!D.done&&(s=w.return)&&s.call(w)}finally{if(i)throw i.error}}try{for(var L=ot(this.listeners),H=L.next();!H.done;H=L.next()){var V=H.value;V(e,e.event)}}catch(R){a={error:R}}finally{try{H&&!H.done&&(l=L.return)&&l.call(L)}finally{if(a)throw a.error}}try{for(var F=ot(this.contextListeners),q=F.next();!q.done;q=F.next()){var $=q.value;$(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(R){c={error:R}}finally{try{q&&!q.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(this.state.done){var Z=e.configuration.find(function(R){return R.type==="final"&&R.parent===E.machine}),G=Z&&Z.doneData?Gh(Z.doneData,e.context,n):void 0;this._doneEvent=hh(this.id,G);try{for(var I=ot(this.doneListeners),x=I.next();!x.done;x=I.next()){var V=x.value;V(this._doneEvent)}}catch(R){h={error:R}}finally{try{x&&!x.done&&(y=I.return)&&y.call(I)}finally{if(h)throw h.error}}this._stop(),this._stopChildren(),Qu.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===xn.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var s=this,a=dh(e,n,i);this.listeners.add(a.next),this.status!==xn.NotStarted&&a.next(this.state);var l=function(){s.doneListeners.delete(l),s.stopListeners.delete(l),a.complete()};return this.status===xn.Stopped?a.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){s.listeners.delete(a.next),s.doneListeners.delete(l),s.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===xn.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===xn.Running)return this;this.machine._init(),Qu.register(this.sessionId,this),this.initialized=!0,this.status=xn.Running;var i=e===void 0?this.initialState:El(this,function(){return cB(e)?n.machine.resolveState(e):n.machine.resolveState(sr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,Dl)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){mt(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,s,a,l,c,d,h,y;try{for(var E=ot(this.listeners),T=E.next();!T.done;T=E.next()){var w=T.value;this.listeners.delete(w)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=E.return)&&n.call(E)}finally{if(e)throw e.error}}try{for(var D=ot(this.stopListeners),V=D.next();!V.done;V=D.next()){var w=V.value;w(),this.stopListeners.delete(w)}}catch(I){i={error:I}}finally{try{V&&!V.done&&(s=D.return)&&s.call(D)}finally{if(i)throw i.error}}try{for(var L=ot(this.contextListeners),H=L.next();!H.done;H=L.next()){var w=H.value;this.contextListeners.delete(w)}}catch(I){a={error:I}}finally{try{H&&!H.done&&(l=L.return)&&l.call(L)}finally{if(a)throw a.error}}try{for(var F=ot(this.doneListeners),q=F.next();!q.done;q=F.next()){var w=q.value;this.doneListeners.delete(w)}}catch(I){c={error:I}}finally{try{q&&!q.done&&(d=F.return)&&d.call(F)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=xn.Stopped,this._initialState=void 0;try{for(var $=ot(Object.keys(this.delayedEventsMap)),Z=$.next();!Z.done;Z=$.next()){var G=Z.value;this.clock.clearTimeout(this.delayedEventsMap[G])}}catch(I){h={error:I}}finally{try{Z&&!Z.done&&(y=$.return)&&y.call($)}finally{if(h)throw h.error}}this.scheduler.clear(),this.scheduler=new ww({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var s=Vn({type:"xstate.stop"}),a=El(e,function(){var l=zt(Lt([],dt(e.state.configuration),!1).sort(function(E,T){return T.order-E.order}).map(function(E){return co(E.onExit,e.machine.options.actions)})),c=dt(jh(e.machine,e.state,e.state.context,s,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],h=c[1],y=new sr({value:e.state.value,context:h,_event:s,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(E){return!$y(E)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return y.changed=!0,y});e.update(a,s),e._stopChildren(),Qu.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===xn.NotStarted&&this.options.deferEvents)){if(this.status!==xn.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,a,l=n.state,c=!1,d=[],h=function(w){var D=Vn(w);n.forward(D),l=El(n,function(){return n.machine.transition(l,D,void 0,i||void 0)}),d.push.apply(d,Lt([],dt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(V){return fB(V,l)})),!1)),c=c||!!l.changed};try{for(var y=ot(e),E=y.next();!E.done;E=y.next()){var T=E.value;h(T)}}catch(w){s={error:w}}finally{try{E&&!E.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}l.changed=c,l.actions=d,n.update(l,Vn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=Vn(e);if(s.name.indexOf(_w)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(_w)===0}))throw s.data.data;var a=El(this,function(){return i.machine.transition(i.state,s,void 0,n||void 0)});return a},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var s=ot(this.forwardTo),a=s.next();!a.done;a=s.next()){var l=a.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),mt(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==xn.Running)return UR(e,n);if(Sw(e))return this.spawnPromise(Promise.resolve(e),n);if(mt(e))return this.spawnCallback(e,n);if(sB(e))return this.spawnActor(e,n);if(z9(e))return this.spawnObservable(e,n);if(Bl(e))return this.spawnMachine(e,ye(ye({},i),{id:n}));if(U9(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var s=new t(e,ye(ye({},this.options),{parent:this,id:n.id||e.id})),a=ye(ye({},yB),n);a.sync&&s.onTransition(function(c){i.send(RR,{state:c,id:s.id})});var l=s;return this.children.set(s.id,l),a.autoForward&&this.forwardTo.add(s.id),s.onDone(function(c){i.removeChild(s.id),i.send(Vn(c,{origin:s.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=gB(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,s=this,a=!1,l;e.then(function(d){a||(l=d,s.removeChild(n),s.send(Vn(hh(n,d),{origin:n})))},function(d){if(!a){s.removeChild(n);var h=cc(n,d);try{s.send(Vn(h,{origin:n}))}catch{s.devTools&&s.devTools.send(h,s.state),s.machine.strict&&s.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(d,h,y){var E=dh(d,h,y),T=!1;return e.then(function(w){T||(E.next(w),!T&&E.complete())},function(w){T||E.error(w)}),{unsubscribe:function(){return T=!0}}},stop:function(){a=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[uo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,s=this,a=!1,l=new Set,c=new Set,d,h=function(T){d=T,c.forEach(function(w){return w(T)}),!a&&s.send(Vn(T,{origin:n}))},y;try{y=e(h,function(T){l.add(T)})}catch(T){this.send(cc(n,T))}if(Sw(y))return this.spawnPromise(y,n);var E=(i={id:n,send:function(T){return l.forEach(function(w){return w(T)})},subscribe:function(T){var w=dh(T);return c.add(w.next),{unsubscribe:function(){c.delete(w.next)}}},stop:function(){a=!0,mt(y)&&y()},toJSON:function(){return{id:n}},getSnapshot:function(){return d}},i[uo]=function(){return this},i);return this.children.set(n,E),E},t.prototype.spawnObservable=function(e,n){var i,s=this,a,l=e.subscribe(function(d){a=d,s.send(Vn(d,{origin:n}))},function(d){s.removeChild(n),s.send(Vn(cc(n,d),{origin:n}))},function(){s.removeChild(n),s.send(Vn(hh(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(d,h,y){return e.subscribe(d,h,y)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:n}}},i[uo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[uo]=function(){return this},i))},t.prototype.attachDev=function(){var e=D0();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ye(ye({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ye({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}mB(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[uo]=function(){return this},t.prototype.getSnapshot=function(){return this.status===xn.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=HR,t})();function HR(t,e){var n=new vB(t,e);return n}function _B(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Fd(t){return ye(ye({type:Gy},t),{toJSON:function(){t.onDone,t.onError;var e=C0(t,["onDone","onError"]);return ye(ye({},e),{type:Gy,src:_B(t.src)})}})}var qd="",Wy="#",Xg="*",dl={},hl=function(t){return t[0]===Wy},EB=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},TB=(function(){function t(e,n,i,s){i===void 0&&(i="context"in e?e.context:void 0);var a=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(EB(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:NR),this.id=this.config.id||Lt([this.machine.key],dt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?uc(this.config.states,function(h,y){var E,T=new t(h,{},void 0,{parent:a,key:y});return Object.assign(a.idMap,ye((E={},E[T.id]=T,E),T.idMap)),T}):dl;var c=0;function d(h){var y,E;h.order=c++;try{for(var T=ot(FR(h)),w=T.next();!w.done;w=T.next()){var D=w.value;d(D)}}catch(V){y={error:V}}finally{try{w&&!w.done&&(E=T.return)&&E.call(T)}finally{if(y)throw y.error}}}d(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(h){var y=h.event;return y===qd}):qd in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=gr(this.config.entry||this.config.onEntry).map(function(h){return qc(h)}),this.onExit=gr(this.config.exit||this.config.onExit).map(function(h){return qc(h)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=gr(this.config.invoke).map(function(h,y){var E,T;if(Bl(h)){var w=Od(a.id,y);return a.machine.options.services=ye((E={},E[w]=h,E),a.machine.options.services),Fd({src:w,id:w})}else if(_t(h.src)){var w=h.id||Od(a.id,y);return Fd(ye(ye({},h),{id:w,src:h.src}))}else if(Bl(h.src)||mt(h.src)){var w=h.id||Od(a.id,y);return a.machine.options.services=ye((T={},T[w]=h.src,T),a.machine.options.services),Fd(ye(ye({id:w},h),{src:w}))}else{var D=h.src;return Fd(ye(ye({id:Od(a.id,y)},h),{src:D}))}}),this.activities=gr(this.config.activities).concat(this.invoke).map(function(h){return N0(h)}),this.transition=this.transition.bind(this),this.tags=gr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||qR(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,s=i.actions,a=i.activities,l=i.guards,c=i.services,d=i.delays;return new t(this.config,{actions:ye(ye({},s),e.actions),activities:ye(ye({},a),e.activities),guards:ye(ye({},l),e.guards),services:ye(ye({},c),e.services),delays:ye(ye({},d),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return mt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:uc(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===qd,i=this.transitions.filter(function(s){var a=s.eventType===e;return n?a:a||s.eventType===Xg});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(a,l){var c=mt(a)?"".concat(e.id,":delay[").concat(l,"]"):a,d=tB(c,e.id);return e.onEntry.push($9(d,{delay:a})),e.onExit.push(W9(d)),d},s=Zl(n)?n.map(function(a,l){var c=i(a.delay,l);return ye(ye({},a),{event:c})}):zt(Object.keys(n).map(function(a,l){var c=n[a],d=_t(c)?{target:c}:c,h=isNaN(+a)?a:+a,y=i(h,l);return gr(d).map(function(E){return ye(ye({},E),{event:y,delay:h})})}));return s.map(function(a){var l=a.delay;return ye(ye({},e.formatTransition(a)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var s=e instanceof sr?e.value:Tc(e,this.delimiter);if(_t(s)){var a=this.getStateNode(s).initial;return a!==void 0?this.getStateNodes((n={},n[s]=a,n)):[this,this.states[s]]}var l=Object.keys(s),c=[this];return c.push.apply(c,Lt([],dt(zt(l.map(function(d){return i.getStateNode(d).getStateNodes(s[d])}))),!1)),c},t.prototype.handles=function(e){var n=DR(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof sr?e:sr.create(e),i=Array.from(fc([],this.getStateNodes(n.value)));return new sr(ye(ye({},n),{value:this.resolve(n.value),configuration:i,done:ph(i,this),tags:Aw(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var s=this.getStateNode(e),a=s.next(n,i);return!a||!a.transitions.length?this.next(n,i):a},t.prototype.transitionCompoundNode=function(e,n,i){var s=Object.keys(e),a=this.getStateNode(s[0]),l=a._transition(e[s[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var s,a,l={};try{for(var c=ot(Object.keys(e)),d=c.next();!d.done;d=c.next()){var h=d.value,y=e[h];if(y){var E=this.getStateNode(h),T=E._transition(y,n,i);T&&(l[h]=T)}}}catch(H){s={error:H}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}var w=Object.keys(l).map(function(H){return l[H]}),D=zt(w.map(function(H){return H.transitions})),V=w.some(function(H){return H.transitions.length>0});if(!V)return this.next(n,i);var L=zt(Object.keys(l).map(function(H){return l[H].configuration}));return{transitions:D,exitSet:zt(w.map(function(H){return H.exitSet})),configuration:L,source:n,actions:zt(Object.keys(l).map(function(H){return l[H].actions}))}},t.prototype._transition=function(e,n,i){return _t(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Vn(n))},t.prototype.next=function(e,n){var i,s,a=this,l=n.name,c=[],d=[],h;try{for(var y=ot(this.getCandidates(l)),E=y.next();!E.done;E=y.next()){var T=E.value,w=T.cond,D=T.in,V=e.context,L=D?_t(D)&&hl(D)?e.matches(Tc(this.getStateNodeById(D).path,this.delimiter)):R0(Tc(D,this.delimiter),V9(this.path.slice(0,-2))(e.value)):!0,H=!1;try{H=!w||VR(this.machine,w,V,n,e)}catch($){throw new Error("Unable to evaluate guard '".concat(w.name||w.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat($.message))}if(H&&L){T.target!==void 0&&(d=T.target),c.push.apply(c,Lt([],dt(T.actions),!1)),h=T;break}}}catch($){i={error:$}}finally{try{E&&!E.done&&(s=y.return)&&s.call(y)}finally{if(i)throw i.error}}if(h){if(!d.length)return{transitions:[h],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var F=zt(d.map(function($){return a.getRelativeStateNodes($,e.historyValue)})),q=!!h.internal;return{transitions:[h],exitSet:q?[]:zt(d.map(function($){return a.getPotentiallyReenteringNodes($)})),configuration:F,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,s=e;i&&i!==s;)n.push(i),i=i.parent;return i!==s?[]:(n.push(s),n)},t.prototype.getActions=function(e,n,i,s,a,l,c){var d,h,y,E,T=this,w=l?fc([],this.getStateNodes(l.value)):[],D=new Set;try{for(var V=ot(Array.from(e).sort(function(M,O){return M.order-O.order})),L=V.next();!L.done;L=V.next()){var H=L.value;(!dc(w,H)||dc(i.exitSet,H)||H.parent&&D.has(H.parent))&&D.add(H)}}catch(M){d={error:M}}finally{try{L&&!L.done&&(h=V.return)&&h.call(V)}finally{if(d)throw d.error}}try{for(var F=ot(w),q=F.next();!q.done;q=F.next()){var H=q.value;(!dc(e,H)||dc(i.exitSet,H.parent))&&i.exitSet.push(H)}}catch(M){y={error:M}}finally{try{q&&!q.done&&(E=F.return)&&E.call(F)}finally{if(y)throw y.error}}i.exitSet.sort(function(M,O){return O.order-M.order});var $=Array.from(D).sort(function(M,O){return M.order-O.order}),Z=new Set(i.exitSet),G=zt($.map(function(M){var O=[];if(M.type!=="final")return O;var U=M.parent;if(!U.parent)return O;O.push(Ud(M.id,M.doneData),Ud(U.id,M.doneData?Gh(M.doneData,s,a):void 0));var Ie=U.parent;return Ie.type==="parallel"&&Bc(Ie).every(function(_e){return ph(i.configuration,_e)})&&O.push(Ud(Ie.id)),O})),I=$.map(function(M){var O=M.onEntry,U=M.activities.map(function(Ie){return Q9(Ie)});return{type:"entry",actions:co(c?Lt(Lt([],dt(O),!1),dt(U),!1):Lt(Lt([],dt(U),!1),dt(O),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:G.map(function(M){return j9(M)})}),x=Array.from(Z).map(function(M){return{type:"exit",actions:co(Lt(Lt([],dt(M.onExit),!1),dt(M.activities.map(function(O){return X9(O)})),!1),T.machine.options.actions)}}),R=x.concat({type:"transition",actions:co(i.actions,this.machine.options.actions)}).concat(I);if(n){var P=co(zt(Lt([],dt(e),!1).sort(function(M,O){return O.order-M.order}).map(function(M){return M.onExit})),this.machine.options.actions).filter(function(M){return!$y(M)});return R.concat({type:"stop",actions:P})}return R},t.prototype.transition=function(e,n,i,s){e===void 0&&(e=this.initialState);var a=Vn(n),l;if(e instanceof sr)l=i===void 0?e:this.resolveState(sr.from(e,i));else{var c=_t(e)?this.resolve(Hh(this.getResolvedPath(e))):this.resolve(e),d=i??this.machine.context;l=this.resolveState(sr.from(c,d))}if(this.strict&&!this.events.includes(a.name)&&!O9(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var h=this._transition(l.value,l,a)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},y=fc([],this.getStateNodes(l.value)),E=h.configuration.length?fc(y,h.configuration):y;return h.configuration=Lt([],dt(E),!1),this.resolveTransition(h,l,l.context,s,a)},t.prototype.resolveRaisedTransition=function(e,n,i,s){var a,l=e.actions;return e=this.transition(e,n,void 0,s),e._event=i,e.event=i.data,(a=e.actions).unshift.apply(a,Lt([],dt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,s,a){var l,c,d,h,y=this;a===void 0&&(a=Dl);var E=e.configuration,T=!n||e.transitions.length>0,w=T?e.configuration:n?n.configuration:[],D=ph(w,this),V=T?aB(this.machine,E):void 0,L=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,H=this.getActions(new Set(w),D,e,i,a,n,s),F=n?ye({},n.activities):{};try{for(var q=ot(H),$=q.next();!$.done;$=q.next()){var Z=$.value;try{for(var G=(d=void 0,ot(Z.actions)),I=G.next();!I.done;I=G.next()){var x=I.value;x.type===Hy?F[x.activity.id||x.activity.type]=x:x.type===I0&&(F[x.activity.id||x.activity.type]=!1)}}catch(me){d={error:me}}finally{try{I&&!I.done&&(h=G.return)&&h.call(G)}finally{if(d)throw d.error}}}}catch(me){l={error:me}}finally{try{$&&!$.done&&(c=q.return)&&c.call(q)}finally{if(l)throw l.error}}var R=dt(jh(this,n,i,a,H,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),P=R[0],M=R[1],O=dt(F9(P,$y),2),U=O[0],Ie=O[1],_e=P.filter(function(me){var de;return me.type===Hy&&((de=me.activity)===null||de===void 0?void 0:de.type)===Gy}),te=_e.reduce(function(me,de){return me[de.activity.id]=iB(de.activity,y.machine,M,a),me},n?ye({},n.children):{}),ce=new sr({value:V||n.value,context:M,_event:a,_sessionid:n?n._sessionid:null,historyValue:V?L?q9(L,V):void 0:n?n.historyValue:void 0,history:!V||e.source?n:void 0,actions:V?Ie:[],activities:V?F:n?n.activities:{},events:[],configuration:w,transitions:e.transitions,children:te,done:D,tags:Aw(w),machine:this}),ge=i!==M;ce.changed=a.name===RR||ge;var xe=ce.history;xe&&delete xe.history;var Me=!D&&(this._transient||E.some(function(me){return me._transient}));if(!T&&(!Me||a.name===qd))return ce;var z=ce;if(!D)for(Me&&(z=this.resolveRaisedTransition(z,{type:x9},a,s));U.length;){var Q=U.shift();z=this.resolveRaisedTransition(z,Q._event,a,s)}var fe=z.changed||(xe?!!z.actions.length||ge||typeof xe.value!=typeof z.value||!zR(z.value,xe.value):void 0);return z.changed=fe,z.history=xe,z},t.prototype.getStateNode=function(e){if(hl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=hl(e)?e.slice(Wy.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&hl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=Ky(e,this.delimiter).slice(),i=this;n.length;){var s=n.shift();if(!s.length)break;i=i.getStateNode(s)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||dl;switch(this.type){case"parallel":return uc(this.initialStateValue,function(a,l){return a?i.getStateNode(l).resolve(e[l]||a):dl});case"compound":if(_t(e)){var s=this.getStateNode(e);return s.type==="parallel"||s.type==="compound"?(n={},n[e]=s.initialStateValue,n):e}return Object.keys(e).length?uc(e,function(a,l){return a?i.getStateNode(l).resolve(a):dl}):this.initialStateValue||{};default:return e||dl}},t.prototype.getResolvedPath=function(e){if(hl(e)){var n=this.machine.idMap[e.slice(Wy.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return Ky(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Tw(this.states,function(i){return i.initialStateValue||dl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Kh(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;_t(n.target)?e=hl(n.target)?Hh(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Kh(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=fh(this.initialStateValue);return zt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=dt(e),i=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var a=this.getStateNode(i);if(a.type==="history")return a.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Tw(this.states,function(n,i){if(!e)return n.historyValue();var s=_t(e)?void 0:e[i];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var s=this.target;return s?zt(fh(s).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var a=L9(i.path,"states")(e).current;return _t(a)?[i.getStateNode(a)]:zt(fh(a).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=zt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,s;if(this.__cache.events)return this.__cache.events;var a=this.states,l=new Set(this.ownEvents);if(a)try{for(var c=ot(Object.keys(a)),d=c.next();!d.done;d=c.next()){var h=d.value,y=a[h];if(y.states)try{for(var E=(i=void 0,ot(y.events)),T=E.next();!T.done;T=E.next()){var w=T.value;l.add("".concat(w))}}catch(D){i={error:D}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}}}catch(D){e={error:D}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!_t(i))return i;var s=i[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(i.slice(1));var a=s?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(a);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(a)})},t.prototype.formatTransition=function(e){var n=this,i=G9(e.target),s="internal"in e?e.internal:i?i.some(function(d){return _t(d)&&d[0]===n.delimiter}):!0,a=this.machine.options.guards,l=this.resolveTarget(i),c=ye(ye({},e),{actions:co(gr(e.actions)),cond:PR(e.cond,a),target:l,source:this,internal:s,eventType:e.event,toJSON:function(){return ye(ye({},c),{target:c.target?c.target.map(function(d){return"#".concat(d.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var a=this.config.on,l=Xg,c=a[l],d=c===void 0?[]:c,h=C0(a,[typeof l=="symbol"?l:l+""]);s=zt(Object.keys(h).map(function(F){var q=fl(F,h[F]);return q}).concat(fl(Xg,d)))}var y=this.config.always?fl("",this.config.always):[],E=this.config.onDone?fl(String(Ud(this.id)),this.config.onDone):[],T=zt(this.invoke.map(function(F){var q=[];return F.onDone&&q.push.apply(q,Lt([],dt(fl(String(hh(F.id)),F.onDone)),!1)),F.onError&&q.push.apply(q,Lt([],dt(fl(String(cc(F.id)),F.onError)),!1)),q})),w=this.after,D=zt(Lt(Lt(Lt(Lt([],dt(E),!1),dt(T),!1),dt(s),!1),dt(y),!1).map(function(F){return gr(F).map(function(q){return i.formatTransition(q)})}));try{for(var V=ot(w),L=V.next();!L.done;L=V.next()){var H=L.value;D.push(H)}}catch(F){e={error:F}}finally{try{L&&!L.done&&(n=V.return)&&n.call(V)}finally{if(e)throw e.error}}return D},t})();function SB(t,e,n){return n===void 0&&(n=t.context),new TB(t,e,n)}var bB=eB,Qy;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(Qy||(Qy={}));var Sc=K.useLayoutEffect;function Cw(t){var e=K.useRef();return e.current||(e.current={v:t()}),e.current.v}var AB=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},wB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function CB(t,e){var n,i,s=AB([[],[]],2),a=s[0],l=s[1];try{for(var c=wB(t),d=c.next();!d.done;d=c.next()){var h=d.value;e(h)?a.push(h):l.push(h)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,l]}var Xu=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},Iw=function(t,e,n){if(n||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))};function xw(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function IB(t){var e=K.useRef([]),n=K.useRef([]);Sc(function(){var i=t.subscribe(function(s){var a,l;if(s.actions.length){var c=s.actions.filter(function(E){return typeof E.exec=="function"&&"__effect"in E.exec}),d=Xu(CB(c,function(E){return E.exec.__effect===Qy.Effect}),2),h=d[0],y=d[1];(a=e.current).push.apply(a,Iw([],Xu(h.map(function(E){return[E,s]})),!1)),(l=n.current).push.apply(l,Iw([],Xu(y.map(function(E){return[E,s]})),!1))}});return function(){i.unsubscribe()}},[]),Sc(function(){for(;n.current.length;){var i=Xu(n.current.shift(),2),s=i[0],a=i[1];xw(s,a)}}),K.useEffect(function(){for(;e.current.length;){var i=Xu(e.current.shift(),2),s=i[0],a=i[1];xw(s,a)}})}var bc=function(){return bc=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},bc.apply(this,arguments)},xB=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function RB(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function NB(t,e,n){e===void 0&&(e={});var i=Cw(function(){return typeof t=="function"?t():t}),s=e.context,a=e.guards,l=e.actions,c=e.activities,d=e.services,h=e.delays,y=e.state,E=xB(e,["context","guards","actions","activities","services","delays","state"]),T=Cw(function(){var w={context:s,guards:a,actions:l,activities:c,services:d,delays:h},D=i.withConfig(w,function(){return bc(bc({},i.context),s)});return HR(D,bc({deferEvents:!0},E))});return Sc(function(){var w;return n&&(w=T.subscribe(RB(n))),function(){w==null||w.unsubscribe()}},[n]),Sc(function(){return T.start(y?sr.create(y):void 0),function(){T.stop()}},[]),Sc(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,a),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,d),Object.assign(T.machine.options.delays,h)},[l,a,c,d,h]),IB(T),T}var DB=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a};function MB(t,e){e===void 0&&(e={});var n=K.useCallback(function(c){var d=c.changed===void 0&&Object.keys(c.children).length;(c.changed||d)&&l(c)},[]),i=NB(t,e,n),s=DB(K.useState(function(){var c=i.machine.initialState;return e.state?sr.create(e.state):c}),2),a=s[0],l=s[1];return[a,i.send,i]}function Qt(){return Qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qt.apply(null,arguments)}function Ml(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const Xe={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(Xe.str(t)||Xe.num(t))return t===e;if(Xe.obj(t)&&Xe.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return Xe.und(n)?t===e:!0}};function kB(t,e){return n=>(Xe.arr(n)?n:Object.keys(n)).reduce((i,s)=>{const a=s;return i[a]=t(a),i},t)}function PB(){const t=K.useState(!1),e=t[1];return K.useCallback(()=>e(i=>!i),[])}function sa(t,e){return Xe.und(t)||Xe.nul(t)?e:t}function Bd(t){return Xe.und(t)?[]:Xe.arr(t)?t:[t]}function Sl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Xe.fun(t)?t(...n):t}function VB(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,Ml(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Zg(t){const e=VB(t);if(Xe.und(e))return Qt({to:e},t);const n=Object.keys(t).reduce((i,s)=>Xe.und(e[s])?Qt({},i,{[s]:t[s]}):i,{});return Qt({to:e},n)}function LB(t,e){return e&&(Xe.fun(e)?e(t):Xe.obj(e)&&(e.current=t)),t}class yr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class Xy extends yr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof yr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof yr&&e.removeChild(this))}}class GR extends yr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof yr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof yr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const s=this.payload[i];e&&!(s instanceof yr)||(n[i]=s instanceof yr?s[e?"getAnimatedValue":"getValue"]():s)}return n}getAnimatedValue(){return this.getValue(!0)}}let M0;function OB(t,e){M0={fn:t,transform:e}}let jR;function UB(t){jR=t}let KR=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,$h;function FB(t){$h=t}let $R=()=>Date.now(),qB=t=>t.current,JR;function BB(t){JR=t}class zB extends GR{constructor(e,n){super(),this.update=void 0,this.payload=e.style?Qt({},e,{style:JR(e.style)}):e,this.update=n,this.attach()}}const HB=t=>Xe.fun(t)&&!(t.prototype instanceof vn.Component),GB=t=>K.forwardRef((n,i)=>{const s=PB(),a=K.useRef(!0),l=K.useRef(null),c=K.useRef(null),d=K.useCallback(T=>{const w=l.current,D=()=>{let V=!1;c.current&&(V=M0.fn(c.current,l.current.getAnimatedValue())),(!c.current||V===!1)&&s()};l.current=new zB(T,D),w&&w.detach()},[]);K.useEffect(()=>()=>{a.current=!1,l.current&&l.current.detach()},[]),K.useImperativeHandle(i,()=>qB(c)),d(n);const h=l.current.getValue();h.scrollTop,h.scrollLeft;const y=Ml(h,["scrollTop","scrollLeft"]),E=HB(t)?void 0:T=>c.current=LB(T,i);return vn.createElement(t,Qt({},y,{ref:E}))});let Ac=!1;const ha=new Set,YR=()=>{if(!Ac)return!1;let t=$R();for(let e of ha){let n=!1;for(let i=0;i<e.configs.length;i++){let s=e.configs[i],a,l;for(let c=0;c<s.animatedValues.length;c++){let d=s.animatedValues[c];if(d.done)continue;let h=s.fromValues[c],y=s.toValues[c],E=d.lastPosition,T=y instanceof yr,w=Array.isArray(s.initialVelocity)?s.initialVelocity[c]:s.initialVelocity;if(T&&(y=y.getValue()),s.immediate){d.setValue(y),d.done=!0;continue}if(typeof h=="string"||typeof y=="string"){d.setValue(y),d.done=!0;continue}if(s.duration!==void 0)E=h+s.easing((t-d.startTime)/s.duration)*(y-h),a=t>=d.startTime+s.duration;else if(s.decay)E=h+w/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-d.startTime))),a=Math.abs(d.lastPosition-E)<.1,a&&(y=E);else{l=d.lastTime!==void 0?d.lastTime:t,w=d.lastVelocity!==void 0?d.lastVelocity:s.initialVelocity,t>l+64&&(l=t);let D=Math.floor(t-l);for(let F=0;F<D;++F){let q=-s.tension*(E-y),$=-s.friction*w,Z=(q+$)/s.mass;w=w+Z*1/1e3,E=E+w*1/1e3}let V=s.clamp&&s.tension!==0?h<y?E>y:E<y:!1,L=Math.abs(w)<=s.precision,H=s.tension!==0?Math.abs(y-E)<=s.precision:!0;a=V||L&&H,d.lastVelocity=w,d.lastTime=t}T&&!s.toValues[c].done&&(a=!1),a?(d.value!==y&&(E=y),d.done=!0):n=!0,d.setValue(E),d.lastPosition=E}e.props.onFrame&&(e.values[s.name]=s.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(ha.delete(e),e.stop(!0))}return ha.size?KR(YR):Ac=!1,Ac},jB=t=>{ha.has(t)||ha.add(t),Ac||(Ac=!0,KR(YR))},KB=t=>{ha.has(t)&&ha.delete(t)};function Jh(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return Jh({range:t,output:e,extrapolate:n});if($h&&typeof t.output[0]=="string")return $h(t);const i=t,s=i.output,a=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",d=i.easing||(h=>h);return h=>{const y=JB(h,a);return $B(h,a[y],a[y+1],s[y],s[y+1],d,l,c,i.map)}}function $B(t,e,n,i,s,a,l,c,d){let h=d?d(t):t;if(h<e){if(l==="identity")return h;l==="clamp"&&(h=e)}if(h>n){if(c==="identity")return h;c==="clamp"&&(h=n)}return i===s?i:e===n?t<=e?i:s:(e===-1/0?h=-h:n===1/0?h=h-e:h=(h-e)/(n-e),h=a(h),i===-1/0?h=-h:s===1/0?h=h+i:h=h*(s-i)+i,h)}function JB(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class zl extends Xy{constructor(e,n,i,s){super(),this.calc=void 0,this.payload=e instanceof Xy&&!(e instanceof zl)?e.getPayload():Array.isArray(e)?e:[e],this.calc=Jh(n,i,s)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=Jh(e,n,i)}interpolate(e,n,i){return new zl(this,e,n,i)}}const pl=(t,e,n)=>t&&new zl(t,e,n),YB={default:{tension:170,friction:26}};function WR(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>WR(n,e))}class Zy extends yr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,s){s===void 0&&(s=!0),n.value=i,s&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&WR(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new zl(this,e,n,i)}}class WB extends Xy{constructor(e){super(),this.payload=e.map(n=>new Zy(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,s)=>this.payload[s].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new zl(this,e,n)}}let QB=0,XB=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=QB++}update(e){if(!e)return this;const n=Zg(e),i=n.delay,s=i===void 0?0:i,a=n.to,l=Ml(n,["delay","to"]);if(Xe.arr(a)||Xe.fun(a))this.queue.push(Qt({},l,{delay:s,to:a}));else if(a){let c={};Object.entries(a).forEach(d=>{let h=d[0],y=d[1];const E=Qt({to:{[h]:y},delay:Sl(s,h)},l),T=c[E.delay]&&c[E.delay].to;c[E.delay]=Qt({},c[E.delay],E,{to:Qt({},T,E.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,d)=>c.delay-d.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(s=>{let a=s.from,l=a===void 0?{}:a,c=s.to,d=c===void 0?{}:c;Xe.obj(l)&&(this.merged=Qt({},l,this.merged)),Xe.obj(d)&&(this.merged=Qt({},this.merged,d))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((s,a)=>{let l=s.delay,c=Ml(s,["delay"]);const d=y=>{a===i.length-1&&n===this.guid&&y&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let h=Xe.arr(c.to)||Xe.fun(c.to);l?setTimeout(()=>{n===this.guid&&(h?this.runAsync(c,d):this.diff(c).start(d))},l):h?this.runAsync(c,d):this.diff(c).start(d)})}else Xe.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),jB(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&KB(this),this}runAsync(e,n){var i=this;e.delay;let s=Ml(e,["delay"]);const a=this.local;let l=Promise.resolve(void 0);if(Xe.arr(s.to))for(let c=0;c<s.to.length;c++){const d=c,h=Qt({},s,Zg(s.to[d]));Xe.arr(h.config)&&(h.config=h.config[d]),l=l.then(()=>{if(a===this.guid)return new Promise(y=>this.diff(h).start(y))})}else if(Xe.fun(s.to)){let c=0,d;l=l.then(()=>s.to(h=>{const y=Qt({},s,Zg(h));if(Xe.arr(y.config)&&(y.config=y.config[c]),c++,a===this.guid)return d=new Promise(E=>this.diff(y).start(E))},function(h){return h===void 0&&(h=!0),i.stop(h)}).then(()=>d))}l.then(n)}diff(e){this.props=Qt({},this.props,e);let n=this.props,i=n.from,s=i===void 0?{}:i,a=n.to,l=a===void 0?{}:a,c=n.config,d=c===void 0?{}:c,h=n.reverse,y=n.attach,E=n.reset,T=n.immediate;if(h){var w=[l,s];s=w[0],l=w[1]}this.merged=Qt({},s,this.merged,l),this.hasChanged=!1;let D=y&&y(this);if(this.animations=Object.entries(this.merged).reduce((V,L)=>{let H=L[0],F=L[1],q=V[H]||{};const $=Xe.num(F),Z=Xe.str(F)&&!F.startsWith("#")&&!/\d/.test(F)&&!jR[F],G=Xe.arr(F),I=!$&&!G&&!Z;let x=Xe.und(s[H])?F:s[H],R=$||G||Z?F:1,P=Sl(d,H);D&&(R=D.animations[H].parent);let M=q.parent,O=q.interpolation,U=Bd(D?R.getPayload():R),Ie,_e=F;I&&(_e=$h({range:[0,1],output:[F,F]})(1));let te=O&&O.getValue();const ge=!Xe.und(M)&&q.animatedValues.some(Q=>!Q.done),xe=!Xe.equ(_e,te),Me=!Xe.equ(_e,q.previous),z=!Xe.equ(P,q.config);if(E||Me&&xe||z){if($||Z)M=O=q.parent||new Zy(x);else if(G)M=O=q.parent||new WB(x);else if(I){let Q=q.interpolation&&q.interpolation.calc(q.parent.value);Q=Q!==void 0&&!E?Q:x,q.parent?(M=q.parent,M.setValue(0,!1)):M=new Zy(0);const fe={output:[Q,F]};q.interpolation?(O=q.interpolation,q.interpolation.updateConfig(fe)):O=M.interpolate(fe)}return U=Bd(D?R.getPayload():R),Ie=Bd(M.getPayload()),E&&!I&&M.setValue(x,!1),this.hasChanged=!0,Ie.forEach(Q=>{Q.startPosition=Q.value,Q.lastPosition=Q.value,Q.lastVelocity=ge?Q.lastVelocity:void 0,Q.lastTime=ge?Q.lastTime:void 0,Q.startTime=$R(),Q.done=!1,Q.animatedStyles.clear()}),Sl(T,H)&&M.setValue(I?R:F,!1),Qt({},V,{[H]:Qt({},q,{name:H,parent:M,interpolation:O,animatedValues:Ie,toValues:U,previous:_e,config:P,fromValues:Bd(M.getValue()),immediate:Sl(T,H),initialVelocity:sa(P.velocity,0),clamp:sa(P.clamp,!1),precision:sa(P.precision,.01),tension:sa(P.tension,170),friction:sa(P.friction,26),mass:sa(P.mass,1),duration:P.duration,easing:sa(P.easing,Q=>Q),decay:P.decay})})}else return xe?V:(I&&(M.setValue(1,!1),O.updateConfig({output:[_e,_e]})),M.done=!0,this.hasChanged=!0,Qt({},V,{[H]:Qt({},V[H],{previous:_e})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let V in this.animations)this.interpolations[V]=this.animations[V].interpolation,this.values[V]=this.animations[V].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const ZB=(t,e)=>{const n=K.useRef(!1),i=K.useRef(),s=Xe.fun(e),a=K.useMemo(()=>{i.current&&(i.current.map(E=>E.destroy()),i.current=void 0);let y;return[new Array(t).fill().map((E,T)=>{const w=new XB,D=s?Sl(e,T,w):e[T];return T===0&&(y=D.ref),w.update(D),y||w.start(),w}),y]},[t]),l=a[0],c=a[1];i.current=l,K.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(y=>new Promise(E=>y.start(E)))),stop:y=>i.current.forEach(E=>E.stop(y)),get controllers(){return i.current}}));const d=K.useMemo(()=>y=>i.current.map((E,T)=>{E.update(s?Sl(y,T,E):y[T]),c||E.start()}),[t]);K.useEffect(()=>{n.current?s||d(e):c||i.current.forEach(y=>y.start())}),K.useEffect(()=>(n.current=!0,()=>i.current.forEach(y=>y.destroy())),[]);const h=i.current.map(y=>y.getValues());return s?[h,d,y=>i.current.forEach(E=>E.pause(y))]:h},ez=t=>{const e=Xe.fun(t),n=ZB(1,e?t:[t]),i=n[0],s=n[1],a=n[2];return e?[i[0],s,a]:i};class tz extends GR{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof yr)&&(e=M0.transform(e)),this.payload=e}}const Yh={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Er="[-+]?\\d*\\.?\\d+",Wh=Er+"%";function Np(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const nz=new RegExp("rgb"+Np(Er,Er,Er)),iz=new RegExp("rgba"+Np(Er,Er,Er,Er)),rz=new RegExp("hsl"+Np(Er,Wh,Wh)),sz=new RegExp("hsla"+Np(Er,Wh,Wh,Er)),oz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,az=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,lz=/^#([0-9a-fA-F]{6})$/,uz=/^#([0-9a-fA-F]{8})$/;function cz(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=lz.exec(t))?parseInt(e[1]+"ff",16)>>>0:Yh.hasOwnProperty(t)?Yh[t]:(e=nz.exec(t))?(ml(e[1])<<24|ml(e[2])<<16|ml(e[3])<<8|255)>>>0:(e=iz.exec(t))?(ml(e[1])<<24|ml(e[2])<<16|ml(e[3])<<8|Dw(e[4]))>>>0:(e=oz.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=uz.exec(t))?parseInt(e[1],16)>>>0:(e=az.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=rz.exec(t))?(Rw(Nw(e[1]),zd(e[2]),zd(e[3]))|255)>>>0:(e=sz.exec(t))?(Rw(Nw(e[1]),zd(e[2]),zd(e[3]))|Dw(e[4]))>>>0:null}function ey(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Rw(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i,a=ey(s,i,t+1/3),l=ey(s,i,t),c=ey(s,i,t-1/3);return Math.round(a*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function ml(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Nw(t){return(parseFloat(t)%360+360)%360/360}function Dw(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function zd(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Mw(t){let e=cz(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,s=(e&65280)>>>8,a=(e&255)/255;return`rgba(${n}, ${i}, ${s}, ${a})`}const Hd=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,fz=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,dz=new RegExp(`(${Object.keys(Yh).join("|")})`,"g"),hz=t=>{const e=t.output.map(s=>s.replace(fz,Mw)).map(s=>s.replace(dz,Mw)),n=e[0].match(Hd).map(()=>[]);e.forEach(s=>{s.match(Hd).forEach((a,l)=>n[l].push(+a))});const i=e[0].match(Hd).map((s,a)=>Jh(Qt({},t,{output:n[a]})));return s=>{let a=0;return e[0].replace(Hd,()=>i[a++](s)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,d,h,y)=>`rgba(${Math.round(c)}, ${Math.round(d)}, ${Math.round(h)}, ${y})`)}};let wc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const pz=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),mz=["Webkit","Ms","Moz","O"];wc=Object.keys(wc).reduce((t,e)=>(mz.forEach(n=>t[pz(n,e)]=t[e]),t),wc);function gz(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(wc.hasOwnProperty(t)&&wc[t])?e+"px":(""+e).trim()}const kw={};BB(t=>new tz(t));FB(hz);UB(Yh);OB((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const s=e.style,a=e.children,l=e.scrollTop,c=e.scrollLeft,d=Ml(e,["style","children","scrollTop","scrollLeft"]),h=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),a!==void 0&&(t.textContent=a);for(let y in s)if(s.hasOwnProperty(y)){var n=y.indexOf("--")===0,i=gz(y,s[y],n);y==="float"&&(y="cssFloat"),n?t.style.setProperty(y,i):t.style[y]=i}for(let y in d){const E=h?y:kw[y]||(kw[y]=y.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(E)<"u"&&t.setAttribute(E,d[y])}return}else return!1},t=>t);const yz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],vz=kB(GB),_z=vz(yz);function Pw(t,e){return t.map(function(n,i){return n+e[i]})}function QR(t,e){return t.map(function(n,i){return n-e[i]})}function ev(t){return Math.hypot.apply(Math,t)}function Ez(t,e,n){var i=ev(e),s=i===0?0:1/i,a=n===0?0:1/n,l=a*i,c=e.map(function(y){return a*y}),d=e.map(function(y){return s*y}),h=ev(t);return{velocities:c,velocity:l,distance:h,direction:d}}function tv(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function Tz(t,e,n){return Math.max(e,Math.min(t,n))}function Sz(t,e){return Math.pow(t,e*5)}function Vw(t,e,n){return e===0||Math.abs(e)===1/0?Sz(t,n):t*e*n/(e+n*t)}function Cc(t,e,n,i){return i===void 0&&(i=.15),i===0?Tz(t,e,n):t<e?-Vw(e-t,n-e,i)+e:t>n?+Vw(t-n,n-e,i)+n:t}function bz(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Az(t,e,n){return e&&bz(t.prototype,e),t}function ci(){return ci=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ci.apply(this,arguments)}function XR(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function wz(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Gd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cz(t,e){if(t){if(typeof t=="string")return Lw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lw(t,e)}}function Lw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Dp(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=Cz(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function ZR(){}function e1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?ZR:e.length===1?e[0]:function(){for(var i,s=Dp(e),a;!(a=s()).done;){var l=a.value;i=l.apply(this,arguments)||i}return i}}function fo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function jd(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function k0(t,e){t===void 0&&(t={});for(var n={},i=0,s=Object.entries(e);i<s.length;i++){var a=s[i],l=a[0],c=a[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=k0(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var Iz=180,xz=.15,Rz=.5,Nz=60,Dz={threshold:function(e){return e===void 0&&(e=0),fo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return fo(xz);case!1:return fo(0);default:return fo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:fo(e)}},t1=ci({},Dz,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(E){return t1.bounds(e(E))};var n=e,i=n.left,s=i===void 0?-1/0:i,a=n.right,l=a===void 0?1/0:a,c=n.top,d=c===void 0?-1/0:c,h=n.bottom,y=h===void 0?1/0:h;return[[s,l],[d,y]]}}),Mz=typeof window<"u"&&window.document&&window.document.createElement,kz={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=Mz?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,s=i===void 0?!0:i,a=n.capture,l=a===void 0?!1:a;return{passive:s,capture:l}}},Pz=ci({},t1,{threshold:function(e,n,i){var s=i.filterTaps,a=s===void 0?!1:s,l=i.lockDirection,c=l===void 0?!1:l,d=i.axis,h=d===void 0?void 0:d,y=fo(e,a?3:c||h?1:0);return this.filterTaps=a||y[0]+y[1]>0,y},swipeVelocity:function(e){return e===void 0&&(e=Rz),fo(e)},swipeDistance:function(e){return e===void 0&&(e=Nz),fo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return Iz;case!1:return 0;default:return e}}});function Vz(t){return t===void 0&&(t={}),k0(t,kz)}function Lz(t){return t===void 0&&(t={}),k0(t,Pz)}function Oz(t){var e=t.domTarget,n=t.eventOptions,i=t.window,s=t.enabled,a=wz(t,["domTarget","eventOptions","window","enabled"]),l=Vz({domTarget:e,eventOptions:n,window:i,enabled:s});return l.drag=Lz(a),l}function Zu(t){return ci({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:ZR,canceled:!1,memo:void 0,args:void 0},t)}function n1(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Zu({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=Zu({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:s,scroll:a}}var aa=new Map,Uz=(function(){function t(n,i){var s=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(a,l){var c;l===void 0&&(l=140),clearTimeout(s.controller.timeouts[s.stateKey]);for(var d=arguments.length,h=new Array(d>2?d-2:0),y=2;y<d;y++)h[y-2]=arguments[y];s.controller.timeouts[s.stateKey]=(c=window).setTimeout.apply(c,[a,l].concat(h))},this.clearTimeout=function(){clearTimeout(s.controller.timeouts[s.stateKey])},this.fireGestureHandler=function(a){if(a===void 0&&(a=!1),s.state._blocked)return s.debounced||(s.state._active=!1,s.clean()),null;if(!a&&!s.state.intentional&&!s.config.triggerAllEvents)return null;if(s.state.intentional){var l=s.state.active,c=s.state._active;s.state.active=c,s.state.first=c&&!l,s.state.last=l&&!c,s.controller.state.shared[s.ingKey]=c}var d=ci({},s.controller.state.shared,s.state,s.mapStateValues(s.state)),h=s.handler(d);return s.state.memo=h!==void 0?h:s.state.memo,s.state._active||s.clean(),d}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,s){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var s=this.config,a=s.initial,l=s.bounds,c=s.rubberband,d=s.threshold,h=this.state,y=h._bounds,E=h._initial,T=h._active,w=h._intentional,D=h.lastOffset,V=h.movement,L=this.getInternalMovement(i,this.state),H=w[0]===!1?Ow(L[0],d[0]):w[0],F=w[1]===!1?Ow(L[1],d[1]):w[1],q=this.checkIntentionality([H,F],L);if(q._blocked)return ci({},q,{_movement:L,delta:[0,0]});var $=q._intentional,Z=L,G,I;if($[0]!==!1&&w[0]===!1&&(I=jd(a,this.state),G=jd(l,this.state),E[0]=I[0],y[0]=G[0]),$[1]!==!1&&w[1]===!1){var x,R;I=(x=I)!=null?x:jd(a,this.state),G=(R=G)!=null?R:jd(l,this.state),E[1]=I[1],y[1]=G[1]}var P=[$[0]!==!1?L[0]-$[0]:E[0],$[1]!==!1?L[1]-$[1]:E[1]],M=Pw(P,D),O=T?c:[0,0];return P=Uw(y,Pw(P,E),O),ci({},q,{intentional:$[0]!==!1||$[1]!==!1,_initial:E,_movement:Z,movement:P,values:i,offset:Uw(y,M,O),delta:QR(P,V)})},e.clean=function(){this.clearTimeout()},Az(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function Ow(t,e){return Math.abs(t)>=e?tv(t)*e:!1}function Uw(t,e,n){var i=e[0],s=e[1],a=n[0],l=n[1],c=t[0],d=c[0],h=c[1],y=t[1],E=y[0],T=y[1];return[Cc(i,d,h,a),Cc(s,E,T,l)]}function ty(t,e,n){var i=t.state,s=t.args,a=e.timeStamp,l=e.type,c=i.values,d=n?0:a-i.startTime;return{_lastEventType:l,event:e,timeStamp:a,elapsedTime:d,args:s,previous:c}}function Fz(t,e,n){var i=t.state.offset,s=n.timeStamp;return ci({},n1()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:s})}function qz(t,e){return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return t.call.apply(t,[this,ci({},e,{event:n})].concat(s))}}var Bz=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];for(var c=Dp(n.classes),d;!(d=c()).done;){var h=d.value;new h(n,a).addBindings(i)}for(var y=0,E=Object.entries(n.nativeRefs);y<E.length;y++){var T=E[y],w=T[0],D=T[1];nv(i,w,qz(D,ci({},n.state.shared,{args:a})))}return n.config.domTarget?jz(n,i):Kz(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=r1(n.config),s=n.config.eventOptions;i&&sf(i,i1(n.domListeners),s),Object.values(n.timeouts).forEach(clearTimeout),zz(n)},this.state=n1(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function zz(t){var e=t.config,n=e.window,i=e.eventOptions,s=t.windowListeners;if(n){for(var a in s){var l=s[a];sf(n,l,i)}t.windowListeners={}}}function Hz(t,e){var n=t.config,i=t.windowListeners;n.window&&(sf(n.window,i[e],n.eventOptions),delete i[e])}function Gz(t,e,n){var i=t.config,s=t.windowListeners;n===void 0&&(n=[]),i.window&&(sf(i.window,s[e],i.eventOptions),s1(i.window,s[e]=n,i.eventOptions))}function jz(t,e){var n=t.config,i=t.domListeners,s=r1(n);if(!s)throw new Error("domTarget must be defined");var a=n.eventOptions;sf(s,i1(i),a);for(var l=0,c=Object.entries(e);l<c.length;l++){var d=c[l],h=d[0],y=d[1],E=h.slice(2).toLowerCase();i.push([E,e1.apply(void 0,y)])}s1(s,i,a)}function Kz(t,e){for(var n=t.config,i={},s=n.eventOptions.capture?"Capture":"",a=0,l=Object.entries(e);a<l.length;a++){var c=l[a],d=c[0],h=c[1],y=Array.isArray(h)?h:[h],E=d+s;i[E]=e1.apply(void 0,y)}return i}function i1(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function r1(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function nv(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function s1(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Dp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.addEventListener(l,c,n)}}function sf(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=Dp(e),s;!(s=i()).done;){var a=s.value,l=a[0],c=a[1];t.removeEventListener(l,c,n)}}function $z(t,e,n){n===void 0&&(n={});var i=Yz(t),s=vn.useMemo(function(){return new Bz(i)},[]);return s.config=e,s.handlers=t,s.nativeRefs=n,vn.useEffect(s.effect,[]),s.config.domTarget?Jz:s.bind}function Jz(){}function Yz(t){var e=new Set;return t.drag&&e.add(aa.get("drag")),t.wheel&&e.add(aa.get("wheel")),t.scroll&&e.add(aa.get("scroll")),t.move&&e.add(aa.get("move")),t.pinch&&e.add(aa.get("pinch")),t.hover&&e.add(aa.get("hover")),e}var Wz=(function(t){XR(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(s,a){return QR(s,a.initial)},n.checkIntentionality=function(s,a){if(s[0]===!1&&s[1]===!1)return{_intentional:s,axis:this.state.axis};var l=a.map(Math.abs),c=l[0],d=l[1],h=this.state.axis||(c>d?"x":c<d?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:s,_blocked:!1,axis:h}:h?this.config.axis&&h!==this.config.axis?{_intentional:s,_blocked:!0,axis:h}:(s[h==="x"?1:0]=!1,{_intentional:s,_blocked:!1,axis:h}):{_intentional:[!1,!1],_blocked:!1,axis:h}},n.getKinematics=function(s,a){var l=this.getMovement(s);if(!l._blocked){var c=a.timeStamp-this.state.timeStamp;Object.assign(l,Ez(l.movement,l.delta,c))}return l},n.mapStateValues=function(s){return{xy:s.values,vxvy:s.velocities}},e})(Uz);function o1(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function Fw(t){var e="buttons"in t?t.buttons:0,n=o1(t),i=n&&n.length||0,s=i>0||e>0,a=t.shiftKey,l=t.altKey,c=t.metaKey,d=t.ctrlKey;return{touches:i,down:s,buttons:e,shiftKey:a,altKey:l,metaKey:c,ctrlKey:d}}function qw(t){var e=o1(t),n=e?e[0]:t,i=n.clientX,s=n.clientY;return[i,s]}var Qz=3,Xz=220,Zz=(function(t){XR(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(s){!i.enabled||i.state._active||(Gz(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:s.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in s&&typeof s.persist=="function"&&s.persist(),i.setTimeout(i.startDrag.bind(Gd(i)),i.config.delay,s)):i.startDrag(s))},i.onDragChange=function(s){if(!i.state.canceled&&s.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(s));return}var a=Fw(s);if(!a.down){i.onDragEnd(s);return}i.updateSharedState(a);var l=qw(s),c=i.getKinematics(l,s),d=ty(Gd(i),s),h=i.state._isTap,y=ev(c._movement);h&&y>=Qz&&(h=!1),i.updateGestureState(ci({},d,c,{_isTap:h})),i.fireGestureHandler()}},i.onDragEnd=function(s){if(s.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var a=i.state._isTap,l=i.state.velocities,c=l[0],d=l[1],h=i.state.movement,y=h[0],E=h[1],T=i.state._intentional,w=T[0],D=T[1],V=i.config.swipeVelocity,L=V[0],H=V[1],F=i.config.swipeDistance,q=F[0],$=F[1],Z=ci({},ty(Gd(i),s),i.getMovement(i.state.values)),G=[0,0];Z.elapsedTime<Xz&&(w!==!1&&Math.abs(c)>L&&Math.abs(y)>q&&(G[0]=tv(c)),D!==!1&&Math.abs(d)>H&&Math.abs(E)>$&&(G[1]=tv(d))),i.updateGestureState(ci({},Z,{tap:a,swipe:G})),i.fireGestureHandler(a===!0)}},i.clean=function(){t.prototype.clean.call(Gd(i)),i.state._delayedEvent=!1,Hz(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(s){i.state._isTap||s.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(s){var a=qw(s);this.updateSharedState(Fw(s)),this.updateGestureState(ci({},Fz(this,a,s),ty(this,s,!0),{_pointerId:s.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},n.addBindings=function(s){if(nv(s,"onPointerDown",this.onDragStart),this.config.filterTaps){var a=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";nv(s,a,this.onClick)}},e})(Wz);function eH(t,e){var n,i=[],s,a=!1;function l(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return a&&n===this&&e(d,i)||(s=t.apply(this,d),a=!0,n=this,i=d),s}return l}function mh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!mh(t[i],e[i]))return!1;return!0}var a;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;for(a=t.entries();!(i=a.next()).done;)if(!mh(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(i=a.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(s[i]==="_owner"&&t.$$typeof)&&!mh(t[s[i]],e[s[i]]))return!1;return!0}return t!==t&&e!==e}function tH(t,e){try{return mh(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function nH(t,e){e===void 0&&(e={}),aa.set("drag",Zz);var n=K.useRef();return n.current||(n.current=eH(Oz,tH)),$z({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var a1=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Qh=a1.join(","),l1=typeof Element>"u",ba=l1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,iv=!l1&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},u1=function(e,n,i){var s=Array.prototype.slice.apply(e.querySelectorAll(Qh));return n&&ba.call(e,Qh)&&s.unshift(e),s=s.filter(i),s},c1=function t(e,n,i){for(var s=[],a=Array.from(e);a.length;){var l=a.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),d=c.length?c:l.children,h=t(d,!0,i);i.flatten?s.push.apply(s,h):s.push({scope:l,candidates:h})}else{var y=ba.call(l,Qh);y&&i.filter(l)&&(n||!e.includes(l))&&s.push(l);var E=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(E&&T){var w=t(E===!0?l.children:E.children,!0,i);i.flatten?s.push.apply(s,w):s.push({scope:l,candidates:w})}else a.unshift.apply(a,l.children)}}return s},f1=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},iH=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},d1=function(e){return e.tagName==="INPUT"},rH=function(e){return d1(e)&&e.type==="hidden"},sH=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},oH=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},aH=function(e){if(!e.name)return!0;var n=e.form||iv(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=i(window.CSS.escape(e.name));else try{s=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=oH(s,e.form);return!a||a===e},lH=function(e){return d1(e)&&e.type==="radio"},uH=function(e){return lH(e)&&!aH(e)},Bw=function(e){var n=e.getBoundingClientRect(),i=n.width,s=n.height;return i===0&&s===0},cH=function(e,n){var i=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=ba.call(e,"details>summary:first-of-type"),l=a?e.parentElement:e;if(ba.call(l,"details:not([open]) *"))return!0;var c=iv(e).host,d=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof s=="function"){for(var h=e;e;){var y=e.parentElement,E=iv(e);if(y&&!y.shadowRoot&&s(y)===!0)return Bw(e);e.assignedSlot?e=e.assignedSlot:!y&&E!==e.ownerDocument?e=E.host:e=y}e=h}if(d)return!e.getClientRects().length}else if(i==="non-zero-area")return Bw(e);return!1},fH=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var s=n.children.item(i);if(s.tagName==="LEGEND")return ba.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},Xh=function(e,n){return!(n.disabled||rH(n)||cH(n,e)||sH(n)||fH(n))},rv=function(e,n){return!(uH(n)||f1(n)<0||!Xh(e,n))},dH=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},hH=function t(e){var n=[],i=[];return e.forEach(function(s,a){var l=!!s.scope,c=l?s.scope:s,d=f1(c,l),h=l?t(s.candidates):c;d===0?l?n.push.apply(n,h):n.push(c):i.push({documentOrder:a,tabIndex:d,item:s,isScope:l,content:h})}),i.sort(iH).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(n)},pH=function(e,n){n=n||{};var i;return n.getShadowRoot?i=c1([e],n.includeContainer,{filter:rv.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:dH}):i=u1(e,n.includeContainer,rv.bind(null,n)),hH(i)},mH=function(e,n){n=n||{};var i;return n.getShadowRoot?i=c1([e],n.includeContainer,{filter:Xh.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=u1(e,n.includeContainer,Xh.bind(null,n)),i},Kd=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ba.call(e,Qh)===!1?!1:rv(n,e)},gH=a1.concat("iframe").join(","),ny=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ba.call(e,gH)===!1?!1:Xh(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function zw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Hw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zw(Object(n),!0).forEach(function(i){yH(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zw(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gw=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var s=t.indexOf(n);s===-1||t.splice(s,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),vH=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},_H=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},EH=function(e){return e.key==="Tab"||e.keyCode===9},jw=function(e){return setTimeout(e,0)},Kw=function(e,n){var i=-1;return e.every(function(s,a){return n(s)?(i=a,!1):!0}),i},ec=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return typeof e=="function"?e.apply(void 0,i):e},$d=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},TH=function(e,n){var i=(n==null?void 0:n.document)||document,s=Hw({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(G,I,x){return G&&G[I]!==void 0?G[I]:s[x||I]},d=function(G){return a.containerGroups.findIndex(function(I){var x=I.container,R=I.tabbableNodes;return x.contains(G)||R.find(function(P){return P===G})})},h=function(G){var I=s[G];if(typeof I=="function"){for(var x=arguments.length,R=new Array(x>1?x-1:0),P=1;P<x;P++)R[P-1]=arguments[P];I=I.apply(void 0,R)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(G,"` was specified but was not a node, or did not return a node"))}var M=I;if(typeof I=="string"&&(M=i.querySelector(I),!M))throw new Error("`".concat(G,"` as selector refers to no known node"));return M},y=function(){var G=h("initialFocus");if(G===!1)return!1;if(G===void 0)if(d(i.activeElement)>=0)G=i.activeElement;else{var I=a.tabbableGroups[0],x=I&&I.firstTabbableNode;G=x||h("fallbackFocus")}if(!G)throw new Error("Your focus-trap needs to have at least one focusable element");return G},E=function(){if(a.containerGroups=a.containers.map(function(G){var I=pH(G,s.tabbableOptions),x=mH(G,s.tabbableOptions);return{container:G,tabbableNodes:I,focusableNodes:x,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,O=x.findIndex(function(U){return U===P});if(!(O<0))return M?x.slice(O+1).find(function(U){return Kd(U,s.tabbableOptions)}):x.slice(0,O).reverse().find(function(U){return Kd(U,s.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(G){return G.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function Z(G){if(G!==!1&&G!==i.activeElement){if(!G||!G.focus){Z(y());return}G.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=G,vH(G)&&G.select()}},w=function(G){var I=h("setReturnFocus",G);return I||(I===!1?!1:G)},D=function(G){var I=$d(G);if(!(d(I)>=0)){if(ec(s.clickOutsideDeactivates,G)){l.deactivate({returnFocus:s.returnFocusOnDeactivate&&!ny(I,s.tabbableOptions)});return}ec(s.allowOutsideClick,G)||G.preventDefault()}},V=function(G){var I=$d(G),x=d(I)>=0;x||I instanceof Document?x&&(a.mostRecentlyFocusedNode=I):(G.stopImmediatePropagation(),T(a.mostRecentlyFocusedNode||y()))},L=function(G){var I=$d(G);E();var x=null;if(a.tabbableGroups.length>0){var R=d(I),P=R>=0?a.containerGroups[R]:void 0;if(R<0)G.shiftKey?x=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:x=a.tabbableGroups[0].firstTabbableNode;else if(G.shiftKey){var M=Kw(a.tabbableGroups,function(ce){var ge=ce.firstTabbableNode;return I===ge});if(M<0&&(P.container===I||ny(I,s.tabbableOptions)&&!Kd(I,s.tabbableOptions)&&!P.nextTabbableNode(I,!1))&&(M=R),M>=0){var O=M===0?a.tabbableGroups.length-1:M-1,U=a.tabbableGroups[O];x=U.lastTabbableNode}}else{var Ie=Kw(a.tabbableGroups,function(ce){var ge=ce.lastTabbableNode;return I===ge});if(Ie<0&&(P.container===I||ny(I,s.tabbableOptions)&&!Kd(I,s.tabbableOptions)&&!P.nextTabbableNode(I))&&(Ie=R),Ie>=0){var _e=Ie===a.tabbableGroups.length-1?0:Ie+1,te=a.tabbableGroups[_e];x=te.firstTabbableNode}}}else x=h("fallbackFocus");x&&(G.preventDefault(),T(x))},H=function(G){if(_H(G)&&ec(s.escapeDeactivates,G)!==!1){G.preventDefault(),l.deactivate();return}if(EH(G)){L(G);return}},F=function(G){var I=$d(G);d(I)>=0||ec(s.clickOutsideDeactivates,G)||ec(s.allowOutsideClick,G)||(G.preventDefault(),G.stopImmediatePropagation())},q=function(){if(a.active)return Gw.activateTrap(l),a.delayInitialFocusTimer=s.delayInitialFocus?jw(function(){T(y())}):T(y()),i.addEventListener("focusin",V,!0),i.addEventListener("mousedown",D,{capture:!0,passive:!1}),i.addEventListener("touchstart",D,{capture:!0,passive:!1}),i.addEventListener("click",F,{capture:!0,passive:!1}),i.addEventListener("keydown",H,{capture:!0,passive:!1}),l},$=function(){if(a.active)return i.removeEventListener("focusin",V,!0),i.removeEventListener("mousedown",D,!0),i.removeEventListener("touchstart",D,!0),i.removeEventListener("click",F,!0),i.removeEventListener("keydown",H,!0),l};return l={get active(){return a.active},get paused(){return a.paused},activate:function(G){if(a.active)return this;var I=c(G,"onActivate"),x=c(G,"onPostActivate"),R=c(G,"checkCanFocusTrap");R||E(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=i.activeElement,I&&I();var P=function(){R&&E(),q(),x&&x()};return R?(R(a.containers.concat()).then(P,P),this):(P(),this)},deactivate:function(G){if(!a.active)return this;var I=Hw({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},G);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,$(),a.active=!1,a.paused=!1,Gw.deactivateTrap(l);var x=c(I,"onDeactivate"),R=c(I,"onPostDeactivate"),P=c(I,"checkCanReturnFocus"),M=c(I,"returnFocus","returnFocusOnDeactivate");x&&x();var O=function(){jw(function(){M&&T(w(a.nodeFocusedBeforeActivation)),R&&R()})};return M&&P?(P(w(a.nodeFocusedBeforeActivation)).then(O,O),this):(O(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,$(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,E(),q(),this)},updateContainerElements:function(G){var I=[].concat(G).filter(Boolean);return a.containers=I.map(function(x){return typeof x=="string"?i.querySelector(x):x}),a.active&&E(),this}},l.updateContainerElements(e),l};function SH(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var P0=!1;if(typeof window<"u"){var $w={get passive(){P0=!0}};window.addEventListener("testPassive",null,$w),window.removeEventListener("testPassive",null,$w)}var h1=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),po=[],Zh=!1,p1=-1,Ic=void 0,xc=void 0,m1=function(e){return po.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},ep=function(e){var n=e||window.event;return m1(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},bH=function(e){if(xc===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(xc=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}Ic===void 0&&(Ic=document.body.style.overflow,document.body.style.overflow="hidden")},AH=function(){xc!==void 0&&(document.body.style.paddingRight=xc,xc=void 0),Ic!==void 0&&(document.body.style.overflow=Ic,Ic=void 0)},wH=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},CH=function(e,n){var i=e.targetTouches[0].clientY-p1;return m1(e.target)?!1:n&&n.scrollTop===0&&i>0||wH(n)&&i<0?ep(e):(e.stopPropagation(),!0)},IH=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!po.some(function(s){return s.targetElement===e})){var i={targetElement:e,options:n||{}};po=[].concat(SH(po),[i]),h1?(e.ontouchstart=function(s){s.targetTouches.length===1&&(p1=s.targetTouches[0].clientY)},e.ontouchmove=function(s){s.targetTouches.length===1&&CH(s,e)},Zh||(document.addEventListener("touchmove",ep,P0?{passive:!1}:void 0),Zh=!0)):bH(n)}},xH=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}po=po.filter(function(n){return n.targetElement!==e}),h1?(e.ontouchstart=null,e.ontouchmove=null,Zh&&po.length===0&&(document.removeEventListener("touchmove",ep,P0?{passive:!1}:void 0),Zh=!1)):po.length||AH()},pa=[],RH=function(){return pa.some(function(t){return t.activeTargets.length>0})},NH=function(){return pa.some(function(t){return t.skippedTargets.length>0})},Jw="ResizeObserver loop completed with undelivered notifications.",DH=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:Jw}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=Jw),window.dispatchEvent(t)},zc;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(zc||(zc={}));var ma=function(t){return Object.freeze(t)},MH=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,ma(this)}return t})(),g1=(function(){function t(e,n,i,s){return this.x=e,this.y=n,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ma(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,s=e.top,a=e.right,l=e.bottom,c=e.left,d=e.width,h=e.height;return{x:n,y:i,top:s,right:a,bottom:l,left:c,width:d,height:h}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),V0=function(t){return t instanceof SVGElement&&"getBBox"in t},y1=function(t){if(V0(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var s=t,a=s.offsetWidth,l=s.offsetHeight;return!(a||l||t.getClientRects().length)},Yw=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},kH=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Rc=typeof window<"u"?window:{},Jd=new WeakMap,Ww=/auto|scroll/,PH=/^tb|vertical/,VH=/msie|trident/i.test(Rc.navigator&&Rc.navigator.userAgent),Pr=function(t){return parseFloat(t||"0")},kl=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new MH((n?e:t)||0,(n?t:e)||0)},Qw=ma({devicePixelContentBoxSize:kl(),borderBoxSize:kl(),contentBoxSize:kl(),contentRect:new g1(0,0,0,0)}),v1=function(t,e){if(e===void 0&&(e=!1),Jd.has(t)&&!e)return Jd.get(t);if(y1(t))return Jd.set(t,Qw),Qw;var n=getComputedStyle(t),i=V0(t)&&t.ownerSVGElement&&t.getBBox(),s=!VH&&n.boxSizing==="border-box",a=PH.test(n.writingMode||""),l=!i&&Ww.test(n.overflowY||""),c=!i&&Ww.test(n.overflowX||""),d=i?0:Pr(n.paddingTop),h=i?0:Pr(n.paddingRight),y=i?0:Pr(n.paddingBottom),E=i?0:Pr(n.paddingLeft),T=i?0:Pr(n.borderTopWidth),w=i?0:Pr(n.borderRightWidth),D=i?0:Pr(n.borderBottomWidth),V=i?0:Pr(n.borderLeftWidth),L=E+h,H=d+y,F=V+w,q=T+D,$=c?t.offsetHeight-q-t.clientHeight:0,Z=l?t.offsetWidth-F-t.clientWidth:0,G=s?L+F:0,I=s?H+q:0,x=i?i.width:Pr(n.width)-G-Z,R=i?i.height:Pr(n.height)-I-$,P=x+L+Z+F,M=R+H+$+q,O=ma({devicePixelContentBoxSize:kl(Math.round(x*devicePixelRatio),Math.round(R*devicePixelRatio),a),borderBoxSize:kl(P,M,a),contentBoxSize:kl(x,R,a),contentRect:new g1(E,d,x,R)});return Jd.set(t,O),O},_1=function(t,e,n){var i=v1(t,n),s=i.borderBoxSize,a=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case zc.DEVICE_PIXEL_CONTENT_BOX:return l;case zc.BORDER_BOX:return s;default:return a}},LH=(function(){function t(e){var n=v1(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=ma([n.borderBoxSize]),this.contentBoxSize=ma([n.contentBoxSize]),this.devicePixelContentBoxSize=ma([n.devicePixelContentBoxSize])}return t})(),E1=function(t){if(y1(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},OH=function(){var t=1/0,e=[];pa.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(h){var y=new LH(h.target),E=E1(h.target);c.push(y),h.lastReportedSize=_1(h.target,h.observedBox),E<t&&(t=E)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var s=i[n];s()}return t},Xw=function(t){pa.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(s){s.isActive()&&(E1(s.target)>t?n.activeTargets.push(s):n.skippedTargets.push(s))})})},UH=function(){var t=0;for(Xw(t);RH();)t=OH(),Xw(t);return NH()&&DH(),t>0},iy,T1=[],FH=function(){return T1.splice(0).forEach(function(t){return t()})},qH=function(t){if(!iy){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return FH()}).observe(n,i),iy=function(){n.textContent="".concat(e?e--:e++)}}T1.push(t),iy()},BH=function(t){qH(function(){requestAnimationFrame(t)})},gh=0,zH=function(){return!!gh},HH=250,GH={attributes:!0,characterData:!0,childList:!0,subtree:!0},Zw=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],eC=function(t){return t===void 0&&(t=0),Date.now()+t},ry=!1,jH=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=HH),!ry){ry=!0;var i=eC(e);BH(function(){var s=!1;try{s=UH()}finally{if(ry=!1,e=i-eC(),!zH())return;s?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,GH)};document.body?n():Rc.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Zw.forEach(function(n){return Rc.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Zw.forEach(function(n){return Rc.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),sv=new jH,tC=function(t){!gh&&t>0&&sv.start(),gh+=t,!gh&&sv.stop()},KH=function(t){return!V0(t)&&!kH(t)&&getComputedStyle(t).display==="inline"},$H=(function(){function t(e,n){this.target=e,this.observedBox=n||zc.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=_1(this.target,this.observedBox,!0);return KH(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),JH=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),Yd=new WeakMap,nC=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},Wd=(function(){function t(){}return t.connect=function(e,n){var i=new JH(e,n);Yd.set(e,i)},t.observe=function(e,n,i){var s=Yd.get(e),a=s.observationTargets.length===0;nC(s.observationTargets,n)<0&&(a&&pa.push(s),s.observationTargets.push(new $H(n,i&&i.box)),tC(1),sv.schedule())},t.unobserve=function(e,n){var i=Yd.get(e),s=nC(i.observationTargets,n),a=i.observationTargets.length===1;s>=0&&(a&&pa.splice(pa.indexOf(i),1),i.observationTargets.splice(s,1),tC(-1))},t.disconnect=function(e){var n=this,i=Yd.get(e);i.observationTargets.slice().forEach(function(s){return n.unobserve(e,s.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),YH=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Wd.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Yw(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Wd.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Yw(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Wd.unobserve(this,e)},t.prototype.disconnect=function(){Wd.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function $n(){return $n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$n.apply(this,arguments)}function yh(t,e){if(t==null)return{};var n,i,s={},a=Object.keys(t);for(i=0;i<a.length;i++)e.indexOf(n=a[i])>=0||(s[n]=t[n]);return s}var Nc=typeof window<"u"?K.useLayoutEffect:K.useEffect;function tc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function Qd(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var WH={box:"border-box"};function sy(t,e){var n=e.label,i=e.enabled,s=e.resizeSourceRef,a=K.useState(0),l=a[0],c=a[1];K.useDebugValue(n+": "+l);var d=K.useCallback(function(h){c(h[0].borderBoxSize[0].blockSize),s.current="element"},[s]);return Nc(function(){if(t.current&&i){var h=new YH(d);return h.observe(t.current,WH),function(){h.disconnect()}}},[t,d,i]),i?l:0}function Kn(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var iC={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},rC={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},QH=SB({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:$n({},iC,rC)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:$n({},iC,rC)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:$n({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[bB({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(Kn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(Kn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(Kn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(Kn()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(Kn()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(Kn()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(Kn()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(Kn()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(Kn()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(Kn()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(Kn()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(Kn()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(Kn()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(Kn()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(Kn()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(Kn()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),XH=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],ZH=["velocity"],e8=["onRest","config"],S1=YB.default,t8=S1.tension,Xd=S1.friction,n8=vn.forwardRef(function(t,e){var n=t.children,i=t.sibling,s=t.className,a=t.footer,l=t.header,c=t.open,d=t.initialState,h=t.lastSnapRef,y=t.initialFocusRef,E=t.onDismiss,T=t.maxHeight,w=t.defaultSnap,D=w===void 0?r8:w,V=t.snapPoints,L=V===void 0?s8:V,H=t.blocking,F=H===void 0||H,q=t.scrollLocking,$=q===void 0||q,Z=t.style,G=t.onSpringStart,I=t.onSpringCancel,x=t.onSpringEnd,R=t.reserveScrollBarGap,P=R===void 0?F:R,M=t.expandOnContentDrag,O=M!==void 0&&M,U=yh(t,XH),Ie=(function(){var le=K.useState(!1),Ae=le[0],be=le[1],Ge=K.useState({}),Tt=Ge[0],Je=Ge[1],Ye=K.useCallback(function(at){return Je(function(rt){var ke;return $n({},rt,((ke={})[at]=!1,ke))}),function(){Je(function(rt){var ke;return $n({},rt,((ke={})[at]=!0,ke))})}},[]);return K.useEffect(function(){var at=Object.values(Tt);at.length!==0&&at.every(Boolean)&&be(!0)},[Tt]),{ready:Ae,registerReady:Ye}})(),_e=Ie.ready,te=Ie.registerReady,ce=K.useRef(!1),ge=K.useRef(G),xe=K.useRef(I),Me=K.useRef(x);K.useEffect(function(){ge.current=G,xe.current=I,Me.current=x},[I,G,x]);var z,Q,fe=ez(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),me=fe[0],de=fe[1],Oe=K.useRef(null),we=K.useRef(null),jt=K.useRef(null),gt=K.useRef(null),Fn=K.useRef(null),Xn=K.useRef(null),mn=K.useRef(0),Zn=K.useRef(),En=K.useRef(!1),Tn=(z=K.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),Q=K.useRef(z==null?void 0:z.matches),K.useDebugValue(Q.current?"reduce":"no-preference"),K.useEffect(function(){var le=function(Ae){Q.current=Ae.matches};return z==null||z.addListener(le),function(){return z==null?void 0:z.removeListener(le)}},[z]),Q),qn=(function(le){var Ae=le.targetRef,be=le.enabled,Ge=le.reserveScrollBarGap,Tt=K.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return K.useDebugValue(be?"Enabled":"Disabled"),K.useEffect(function(){if(!be)return Tt.current.deactivate(),void(Tt.current={activate:function(){},deactivate:function(){}});var Je=Ae.current,Ye=!1;Tt.current={activate:function(){Ye||(Ye=!0,IH(Je,{allowTouchMove:function(at){return at.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:Ge}))},deactivate:function(){Ye&&(Ye=!1,xH(Je))}}},[be,Ae,Ge]),Tt})({targetRef:we,enabled:_e&&$,reserveScrollBarGap:P}),qi=(function(le){var Ae=le.targetRef,be=le.enabled,Ge=K.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return K.useDebugValue(be?"Enabled":"Disabled"),K.useEffect(function(){if(!be)return Ge.current.deactivate(),void(Ge.current={activate:function(){},deactivate:function(){}});var Tt=Ae.current,Je=!1,Ye=[],at=[];Ge.current={activate:function(){if(!Je){Je=!0;var rt=Tt.parentNode;document.querySelectorAll("body > *").forEach(function(ke){if(ke!==rt){var je=ke.getAttribute("aria-hidden");je!==null&&je!=="false"||(Ye.push(je),at.push(ke),ke.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Je&&(Je=!1,at.forEach(function(rt,ke){var je=Ye[ke];je===null?rt.removeAttribute("aria-hidden"):rt.setAttribute("aria-hidden",je)}),Ye=[],at=[])}}},[Ae,be]),Ge})({targetRef:Oe,enabled:_e&&F}),Ai=(function(le){var Ae=le.targetRef,be=le.fallbackRef,Ge=le.initialFocusRef,Tt=le.enabled,Je=K.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return K.useDebugValue(Tt?"Enabled":"Disabled"),K.useEffect(function(){if(!Tt)return Je.current.deactivate(),void(Je.current={activate:function(){},deactivate:function(){}});var Ye=be.current,at=TH(Ae.current,{onActivate:void 0,initialFocus:Ge?function(){return(Ge==null?void 0:Ge.current)||Ye}:void 0,fallbackFocus:Ye,escapeDeactivates:!1,clickOutsideDeactivates:!1}),rt=!1;Je.current={activate:function(){try{return rt?Promise.resolve():(rt=!0,Promise.resolve(at.activate()).then(function(){return Promise.resolve(new Promise(function(ke){return setTimeout(function(){return ke(void 0)},0)})).then(function(){})}))}catch(ke){return Promise.reject(ke)}},deactivate:function(){rt&&(rt=!1,at.deactivate())}}},[Tt,be,Ge,Ae]),Je})({targetRef:Oe,fallbackRef:Xn,initialFocusRef:y||void 0,enabled:_e&&F&&y!==!1}),Bn=(function(le){var Ae=le.getSnapPoints,be=le.heightRef,Ge=le.lastSnapRef,Tt=le.ready,Je=(function(Nt){var St=Nt.contentRef,ti=Nt.controlledMaxHeight,Ft=Nt.footerEnabled,zn=Nt.footerRef,Gi=Nt.headerEnabled,Nn=Nt.headerRef,ni=Nt.registerReady,Kr=Nt.resizeSourceRef,Ci=K.useMemo(function(){return ni("contentHeight")},[ni]),Mt=(function(ur,Ki,$i){var hi=K.useMemo(function(){return Ki("maxHeight")},[Ki]),Ji=K.useState(function(){return Qd(ur)||typeof window<"u"?window.innerHeight:0}),wr=Ji[0],ii=Ji[1],qt=wr>0,cr=K.useRef(0);return K.useDebugValue(ur?"controlled":"auto"),K.useEffect(function(){qt&&hi()},[qt,hi]),Nc(function(){if(ur)return ii(Qd(ur)),void($i.current="maxheightprop");var fr=function(){cr.current||(cr.current=requestAnimationFrame(function(){ii(window.innerHeight),$i.current="window",cr.current=0}))};return window.addEventListener("resize",fr),ii(window.innerHeight),$i.current="window",hi(),function(){window.removeEventListener("resize",fr),cancelAnimationFrame(cr.current)}},[ur,hi,$i]),wr})(ti,ni,Kr),tn=sy(Nn,{label:"headerHeight",enabled:Gi,resizeSourceRef:Kr}),Ii=sy(St,{label:"contentHeight",enabled:!0,resizeSourceRef:Kr}),ji=sy(zn,{label:"footerHeight",enabled:Ft,resizeSourceRef:Kr}),xi=Math.min(Mt-tn-ji,Ii)+tn+ji;K.useDebugValue("minHeight: "+xi);var Vo=Ii>0;return K.useEffect(function(){Vo&&Ci()},[Vo,Ci]),{maxHeight:Mt,minHeight:xi,headerHeight:tn,footerHeight:ji}})({contentRef:le.contentRef,controlledMaxHeight:le.controlledMaxHeight,footerEnabled:le.footerEnabled,footerRef:le.footerRef,headerEnabled:le.headerEnabled,headerRef:le.headerRef,registerReady:le.registerReady,resizeSourceRef:le.resizeSourceRef}),Ye=Je.maxHeight,at=Je.minHeight,rt=Je.headerHeight,ke=Je.footerHeight,je=(function(Nt,St){var ti=[].concat(Nt).map(Qd).reduce(function(Nn,ni){return Nn.add(tc(ni,0,St)),Nn},new Set),Ft=Array.from(ti),zn=Math.min.apply(Math,Ft);if(Number.isNaN(zn))throw new TypeError("minSnap is NaN");var Gi=Math.max.apply(Math,Ft);if(Number.isNaN(Gi))throw new TypeError("maxSnap is NaN");return{snapPoints:Ft,minSnap:zn,maxSnap:Gi}})(Tt?Ae({height:be.current,footerHeight:ke,headerHeight:rt,minHeight:at,maxHeight:Ye}):[0],Ye),gn=je.snapPoints,Hi=je.minSnap,en=je.maxSnap;return K.useDebugValue("minSnap: "+Hi+", maxSnap:"+en),{minSnap:Hi,maxSnap:en,findSnap:function(Nt){var St=Qd(typeof Nt=="function"?Nt({footerHeight:ke,headerHeight:rt,height:be.current,minHeight:at,maxHeight:Ye,snapPoints:gn,lastSnap:Ge.current}):Nt);return gn.reduce(function(ti,Ft){return Math.abs(Ft-St)<Math.abs(ti-St)?Ft:ti},Hi)},maxHeight:Ye}})({contentRef:jt,controlledMaxHeight:T,footerEnabled:!!a,footerRef:Fn,getSnapPoints:L,headerEnabled:l!==!1,headerRef:gt,heightRef:mn,lastSnapRef:h,ready:_e,registerReady:te,resizeSourceRef:Zn}),ei=Bn.minSnap,fi=Bn.maxSnap,di=Bn.maxHeight,Bi=Bn.findSnap,he=K.useRef(di),it=K.useRef(ei),De=K.useRef(fi),yt=K.useRef(Bi),Kt=K.useRef(0);Nc(function(){he.current=di,De.current=fi,it.current=ei,yt.current=Bi,Kt.current=Bi(D)},[Bi,D,di,fi,ei]);var $t=K.useCallback(function(le){var Ae=le.onRest,be=le.config,Ge=(be=be===void 0?{}:be).velocity,Tt=Ge===void 0?1:Ge,Je=yh(be,ZH),Ye=yh(le,e8);return new Promise(function(at){return de($n({},Ye,{config:$n({velocity:Tt},Je,{mass:1,tension:t8,friction:Math.max(Xd,Xd+(Xd-Xd*Tt))}),onRest:function(){var rt=[].slice.call(arguments);at.apply(void 0,rt),Ae==null||Ae.apply(void 0,rt)}}))})},[de]),zi=MB(QH,{devTools:!1,actions:{onOpenCancel:K.useCallback(function(){return xe.current==null?void 0:xe.current({type:"OPEN"})},[]),onSnapCancel:K.useCallback(function(le){return xe.current==null?void 0:xe.current({type:"SNAP",source:le.snapSource})},[]),onCloseCancel:K.useCallback(function(){return xe.current==null?void 0:xe.current({type:"CLOSE"})},[]),onResizeCancel:K.useCallback(function(){return xe.current==null?void 0:xe.current({type:"RESIZE",source:Zn.current})},[]),onOpenEnd:K.useCallback(function(){return Me.current==null?void 0:Me.current({type:"OPEN"})},[]),onSnapEnd:K.useCallback(function(le,Ae){return Me.current==null?void 0:Me.current({type:"SNAP",source:le.snapSource})},[]),onResizeEnd:K.useCallback(function(){return Me.current==null?void 0:Me.current({type:"RESIZE",source:Zn.current})},[])},context:{initialState:d},services:{onSnapStart:K.useCallback(function(le,Ae){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"SNAP",source:Ae.payload.source||"custom"}))}catch(be){return Promise.reject(be)}},[]),onOpenStart:K.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseStart:K.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeStart:K.useCallback(function(){try{return Promise.resolve(ge.current==null?void 0:ge.current({type:"RESIZE",source:Zn.current}))}catch(le){return Promise.reject(le)}},[]),onSnapEnd:K.useCallback(function(le,Ae){try{return Promise.resolve(Me.current==null?void 0:Me.current({type:"SNAP",source:le.snapSource}))}catch(be){return Promise.reject(be)}},[]),onOpenEnd:K.useCallback(function(){try{return Promise.resolve(Me.current==null?void 0:Me.current({type:"OPEN"}))}catch(le){return Promise.reject(le)}},[]),onCloseEnd:K.useCallback(function(){try{return Promise.resolve(Me.current==null?void 0:Me.current({type:"CLOSE"}))}catch(le){return Promise.reject(le)}},[]),onResizeEnd:K.useCallback(function(){try{return Promise.resolve(Me.current==null?void 0:Me.current({type:"RESIZE",source:Zn.current}))}catch(le){return Promise.reject(le)}},[]),renderVisuallyHidden:K.useCallback(function(le,Ae){try{return Promise.resolve($t({y:Kt.current,ready:0,maxHeight:he.current,maxSnap:De.current,minSnap:Kt.current,immediate:!0})).then(function(){})}catch(be){return Promise.reject(be)}},[$t]),activate:K.useCallback(function(le,Ae){try{return ce.current=!0,Promise.resolve(Promise.all([qn.current.activate(),Ai.current.activate(),qi.current.activate()])).then(function(){})}catch(be){return Promise.reject(be)}},[qi,Ai,qn]),deactivate:K.useCallback(function(){try{return qn.current.deactivate(),Ai.current.deactivate(),qi.current.deactivate(),ce.current=!1,Promise.resolve()}catch(le){return Promise.reject(le)}},[qi,Ai,qn]),openImmediately:K.useCallback(function(){try{return mn.current=Kt.current,Promise.resolve($t({y:Kt.current,ready:1,maxHeight:he.current,maxSnap:De.current,minSnap:Kt.current,immediate:!0})).then(function(){})}catch(le){return Promise.reject(le)}},[$t]),openSmoothly:K.useCallback(function(){try{return Promise.resolve($t({y:0,ready:1,maxHeight:he.current,maxSnap:De.current,minSnap:Kt.current,immediate:!0})).then(function(){return mn.current=Kt.current,Promise.resolve($t({y:Kt.current,ready:1,maxHeight:he.current,maxSnap:De.current,minSnap:Kt.current,immediate:Tn.current})).then(function(){})})}catch(le){return Promise.reject(le)}},[$t,Tn]),snapSmoothly:K.useCallback(function(le,Ae){try{var be=yt.current(le.y);return mn.current=be,h.current=be,Promise.resolve($t({y:be,ready:1,maxHeight:he.current,maxSnap:De.current,minSnap:it.current,immediate:Tn.current,config:{velocity:le.velocity}})).then(function(){})}catch(Ge){return Promise.reject(Ge)}},[$t,h,Tn]),resizeSmoothly:K.useCallback(function(){try{var le=yt.current(mn.current);return mn.current=le,h.current=le,Promise.resolve($t({y:le,ready:1,maxHeight:he.current,maxSnap:De.current,minSnap:it.current,immediate:Zn.current!=="element"||Tn.current})).then(function(){})}catch(Ae){return Promise.reject(Ae)}},[$t,h,Tn]),closeSmoothly:K.useCallback(function(le,Ae){try{return $t({minSnap:mn.current,immediate:!0}),mn.current=0,Promise.resolve($t({y:0,maxHeight:he.current,maxSnap:De.current,immediate:Tn.current})).then(function(){return Promise.resolve($t({ready:0,immediate:!0})).then(function(){})})}catch(be){return Promise.reject(be)}},[$t,Tn])}}),jr=zi[0],Sn=zi[1];K.useEffect(function(){_e&&Sn(c?"OPEN":"CLOSE")},[c,Sn,_e]),Nc(function(){(di||fi||ei)&&Sn("RESIZE")},[di,fi,ei,Sn]),K.useEffect(function(){return function(){qn.current.deactivate(),Ai.current.deactivate(),qi.current.deactivate()}},[qi,Ai,qn]),K.useImperativeHandle(e,function(){return{snapTo:function(le,Ae){var be=Ae===void 0?{}:Ae,Ge=be.velocity,Tt=Ge===void 0?1:Ge,Je=be.source,Ye=Je===void 0?"custom":Je;Sn("SNAP",{payload:{y:yt.current(le),velocity:Tt,source:Ye}})},get height(){return mn.current}}},[Sn]),K.useEffect(function(){var le=we.current,Ae=function(Ge){En.current&&Ge.preventDefault()},be=function(Ge){le.scrollTop<0&&(requestAnimationFrame(function(){le.style.overflow="hidden",le.scrollTop=0,le.style.removeProperty("overflow")}),Ge.preventDefault())};return O&&(le.addEventListener("scroll",Ae),le.addEventListener("touchmove",Ae),le.addEventListener("touchstart",be)),function(){le.removeEventListener("scroll",Ae),le.removeEventListener("touchmove",Ae),le.removeEventListener("touchstart",be)}},[O,we]);var wi=nH(function(le){var Ae=le.args,be=(Ae=Ae===void 0?[]:Ae)[0],Ge=(be=be===void 0?{}:be).closeOnTap,Tt=Ge!==void 0&&Ge,Je=be.isContentDragging,Ye=Je!==void 0&&Je,at=le.cancel,rt=le.direction[1],ke=le.down,je=le.first,gn=le.last,Hi=le.memo,en=Hi===void 0?me.y.getValue():Hi,Nt=le.tap,St=le.velocity,ti=-1*le.movement[1];if(!ce.current)return at(),en;if(E&&Tt&&Nt)return at(),setTimeout(function(){return E()},0),en;if(Nt)return en;var Ft=en+ti,zn=ti*St,Gi=Math.max(it.current,Math.min(De.current,Ft+2*zn));if(!ke&&E&&rt>0&&Ft+zn<it.current/2)return at(),E(),en;var Nn=ke?E||it.current!==De.current?Cc(Ft,E?0:it.current,De.current,.55):Ft<it.current?Cc(Ft,it.current,2*De.current,.55):Cc(Ft,it.current/2,De.current,.55):Gi;return O&&Ye?(Nn>=De.current&&(Nn=De.current),en===De.current&&we.current.scrollTop>0&&(Nn=De.current),En.current=Nn<De.current):En.current=!1,je&&Sn("DRAG"),gn?(Sn("SNAP",{payload:{y:Nn,velocity:St>.05?St:1,source:"dragging"}}),en):(de({y:Nn,ready:1,maxHeight:he.current,maxSnap:De.current,minSnap:it.current,immediate:!0,config:{velocity:St}}),en)},{filterTaps:!0});if(Number.isNaN(De.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(it.current))throw new TypeError("minSnapRef is NaN!!");var bn=(function(le){var Ae,be=le.spring,Ge=pl([be.y,be.maxHeight],function(ke,je){return Math.round(tc(je-ke,0,16))+"px"}),Tt=pl([be.y,be.minSnap,be.maxSnap],function(ke,je,gn){return tc(ke,je,gn)+"px"}),Je=pl([be.y,be.minSnap,be.maxSnap],function(ke,je,gn){return ke<je?je-ke+"px":ke>gn?gn-ke+"px":"0px"}),Ye=pl([be.y,be.maxSnap],function(ke,je){return ke>=je?Math.ceil(ke-je):0}),at=pl([be.y,be.minSnap],function(ke,je){if(!je)return 0;var gn=Math.max(je/2-45,0);return tc((ke-gn)*(1/(Math.min(je/2+45,je)-gn)+0),0,1)}),rt=pl([be.y,be.minSnap],function(ke,je){return je?tc(ke/je,0,1):0});return(Ae={})["--rsbs-content-opacity"]=at,Ae["--rsbs-backdrop-opacity"]=rt,Ae["--rsbs-antigap-scale-y"]=Ye,Ae["--rsbs-overlay-translate-y"]=Je,Ae["--rsbs-overlay-rounded"]=Ge,Ae["--rsbs-overlay-h"]=Tt,Ae})({spring:me});return vn.createElement(_z.div,$n({},U,{"data-rsbs-root":!0,"data-rsbs-state":i8.find(jr.matches),"data-rsbs-is-blocking":F,"data-rsbs-is-dismissable":!!E,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!a,className:s,ref:Oe,style:$n({},bn,Z,{opacity:me.ready})}),i,F&&vn.createElement("div",$n({key:"backdrop","data-rsbs-backdrop":!0},wi({closeOnTap:!0}))),vn.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:Xn,onKeyDown:function(le){le.key==="Escape"&&(le.stopPropagation(),E&&E())}},l!==!1&&vn.createElement("div",$n({key:"header","data-rsbs-header":!0,ref:gt},wi()),l),vn.createElement("div",$n({key:"scroll","data-rsbs-scroll":!0,ref:we},O?wi({isContentDragging:!0}):{}),vn.createElement("div",{"data-rsbs-content":!0,ref:jt},n)),a&&vn.createElement("div",$n({key:"footer",ref:Fn,"data-rsbs-footer":!0},wi()),a)))}),i8=["closed","opening","open","closing","dragging","snapping","resizing"];function r8(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function s8(t){return t.minHeight}var o8=["onSpringStart","onSpringEnd","skipInitialTransition"],Mp=K.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,s=t.skipInitialTransition,a=yh(t,o8),l=K.useState(!1),c=l[0],d=l[1],h=K.useRef(),y=K.useRef(null),E=K.useRef(s&&a.open?"OPEN":"CLOSED");Nc(function(){if(a.open)return cancelAnimationFrame(h.current),d(!0),function(){E.current="CLOSED"}},[a.open]);var T=K.useCallback(function(D){return Promise.resolve(n==null?void 0:n(D)).then(function(){D.type==="OPEN"&&cancelAnimationFrame(h.current)})},[n]),w=K.useCallback(function(D){return Promise.resolve(i==null?void 0:i(D)).then(function(){D.type==="CLOSE"&&(h.current=requestAnimationFrame(function(){return d(!1)}))})},[i]);return c?vn.createElement(I9,{"data-rsbs-portal":!0},vn.createElement(n8,$n({},a,{lastSnapRef:y,ref:e,initialState:E.current,onSpringStart:T,onSpringEnd:w}))):null});const a8=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,suggestedOutfits:a,onClose:l,weatherInfo:c,weatherError:d,favoriteOutfits:h,onToggleFavorite:y})=>{const E=document.documentElement.classList.contains("dark"),T=K.useRef(null);return K.useEffect(()=>{!s&&a.length>0&&T.current&&T.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[s,a.length]),b.jsx(Mp,{open:t,onDismiss:l,className:E?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crateur de Tenues"}),b.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:w})=>w*.65,snapPoints:({minHeight:w,maxHeight:D})=>[w,D*.65,D*.85],children:b.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[b.jsx(AR,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:s,weatherInfo:c,weatherError:d}),s&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[b.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),b.jsx("div",{ref:T,children:a.length>0&&b.jsx(zh,{outfits:a,allClothingItems:e,allClothingSets:n,favoriteOutfits:h,onToggleFavorite:y})})]})})},l8=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s,vacationPlan:a,onCreateSet:l,onClose:c})=>{const d=document.documentElement.classList.contains("dark");return b.jsx(Mp,{open:t,onDismiss:c,className:d?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Planificateur de Valise"}),b.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:h})=>h*.6,snapPoints:({maxHeight:h})=>[h*.55,h*.85],children:b.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[b.jsx(wR,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:s}),s&&b.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[b.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),b.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),a&&b.jsx(CR,{plan:a,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},u8=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:s})=>{const[a,l]=K.useState(new Set),c=new Set(n.flatMap(w=>w.itemIds)),h=e.filter(w=>!c.has(w.id)).reduce((w,D)=>(w[D.category]||(w[D.category]=[]),w[D.category].push(D),w),{}),y=w=>{l(D=>{const V=new Set(D);return V.has(w)?V.delete(w):V.add(w),V})},E=()=>{if(a.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const w=window.prompt("Donnez un nom  cet ensemble :");w&&s(w,Array.from(a))},T=document.documentElement.classList.contains("dark");return b.jsx(Mp,{open:t,onDismiss:i,className:T?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Crer un ensemble"}),b.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:a.size>0&&b.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:b.jsxs("button",{onClick:E,disabled:a.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[b.jsx(Cp,{}),"Lier ",a.size," article",a.size>1?"s":""]})}),defaultSnap:({maxHeight:w})=>w*.6,snapPoints:({maxHeight:w})=>[w*.6,w*.85],children:b.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[b.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),b.jsx("div",{className:"space-y-4",children:Object.keys(h).map(w=>h[w].length>0&&b.jsxs("div",{children:[b.jsx("h3",{className:"font-semibold text-lg mb-2",children:w}),b.jsx("div",{className:"grid grid-cols-3 gap-3",children:h[w].map(D=>{const V=a.has(D.id);return b.jsxs("button",{onClick:()=>y(D.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:V?"#D4AF37":"transparent"},children:[V&&b.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:b.jsx(A0,{})}),b.jsx("div",{className:"aspect-square",children:b.jsx("img",{src:D.imageSrc,alt:D.analysis,className:"w-full h-full object-cover"})}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),b.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:D.analysis})]},D.id)})})]},w))})]})})},c8=(t,e)=>{const n=Yl(Gr,"users",t,"items"),i=t0(n);return o0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (items listener):",a)})},f8=async(t,e)=>{try{const n=Yl(Gr,"users",t,"items");return(await s0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},sC=async(t,e,n)=>{try{const i=tf(Gr,"users",t,"items",e);await _O(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},oC=async(t,e)=>{try{const n=tf(Gr,"users",t,"items",e);await r0(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},d8=(t,e)=>{const n=Yl(Gr,"users",t,"favoriteOutfits"),i=t0(n);return o0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (favoriteOutfits listener):",a)})},h8=async(t,e)=>{try{const n=Yl(Gr,"users",t,"favoriteOutfits");return(await s0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},p8=async(t,e)=>{try{const n=tf(Gr,"users",t,"favoriteOutfits",e);await r0(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},m8=(t,e)=>{const n=Yl(Gr,"users",t,"sets"),i=t0(n);return o0(i,a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));e(l)},a=>{console.error("Erreur (sets listener):",a)})},g8=async(t,e)=>{try{const n=Yl(Gr,"users",t,"sets");return(await s0(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},y8=async(t,e)=>{try{const n=tf(Gr,"users",t,"sets",e);await r0(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},v8=async(t,e,n)=>{try{const i=N4(O4,`users/${t}/clothing/${n}.jpg`);return await x4(i,e,"data_url"),await R4(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},b1=K.createContext(void 0),_8=({children:t,user:e})=>{const[n,i]=K.useState([]),[s,a]=K.useState([]),[l,c]=K.useState([]),[d,h]=K.useState(!1);K.useEffect(()=>{if(e){const F=c8(e.uid,Z=>{i(Z)}),q=m8(e.uid,Z=>{a(Z)}),$=d8(e.uid,Z=>{c(Z)});return()=>{F(),q(),$()}}else i([]),a([]),c([])},[e]);const y=K.useCallback(async F=>{if(!(F.length===0||!e)){h(!0);try{const q=F.map(x=>new Promise((R,P)=>{const M=new FileReader;M.onload=()=>R(M.result),M.onerror=P,M.readAsDataURL(x)})),$=await Promise.all(q),Z=$.map(x=>x.split(",")[1]),G=await Xq(Z),I=Math.min(G.length,F.length);for(let x=0;x<I;x++){const R=G[x];let P="";try{P=await f8(e.uid,R);const M=await v8(e.uid,$[x],P);await sC(e.uid,P,{imageSrc:M})}catch(M){if(console.error(`chec de cration/upload pour ${F[x].name}.`,M),P){console.log(`Tentative de suppression de l'article orphelin: ${P}`);try{await oC(e.uid,P),console.log(`Article orphelin ${P} supprim avec succs.`)}catch(O){console.error(`chec de la suppression de l'article orphelin ${P}:`,O)}}}}}catch(q){console.error("Erreur lors de l'analyse par lot:",q)}finally{h(!1)}}},[e]),E=K.useCallback(async F=>{if(e)try{await oC(e.uid,F)}catch(q){console.error("Erreur suppression item:",q)}},[e]),T=K.useCallback(async F=>{if(e)try{await sC(e.uid,F.id,F)}catch(q){console.error("Erreur mise  jour item:",q)}},[e]),w=K.useCallback(async F=>{if(e)try{const{id:q,...$}=F;await h8(e.uid,$)}catch(q){console.error("Erreur ajout favori:",q)}},[e]),D=K.useCallback(async F=>{if(e)try{await p8(e.uid,F)}catch(q){console.error("Erreur suppression favori:",q)}},[e]),V=K.useCallback(async(F,q)=>{var G;if(!e)return;const $=((G=n.find(I=>I.id===q[0]))==null?void 0:G.imageSrc)||"",Z={name:F,itemIds:q,imageSrc:$};try{await g8(e.uid,Z)}catch(I){console.error("Erreur cration set:",I)}},[e,n]),L=K.useCallback(async F=>{if(e)try{await y8(e.uid,F)}catch(q){console.error("Erreur suppression set:",q)}},[e]),H={clothingItems:n,clothingSets:s,favoriteOutfits:l,isAnalyzing:d,analyzeClothingItems:y,deleteClothingItem:E,updateClothingItem:T,createClothingSet:V,deleteClothingSet:L,addFavoriteOutfit:w,deleteFavoriteOutfit:D};return b.jsx(b1.Provider,{value:H,children:t})},E8=()=>{const t=K.useContext(b1);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},T8=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:s,onToggleFavorite:a})=>{const l=document.documentElement.classList.contains("dark");return b.jsx(Mp,{open:t,onDismiss:e,className:l?"dark":"",header:b.jsxs("div",{className:"flex items-center justify-between w-full",children:[b.jsx("h2",{className:"text-xl font-bold text-raisin-black",children:" Tenues Favorites"}),b.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:c})=>c*.8,snapPoints:({minHeight:c,maxHeight:d})=>[c,d*.8,d*.9],children:b.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:s.length>0?b.jsx(zh,{outfits:s,allClothingItems:n,allClothingSets:i,favoriteOutfits:s,onToggleFavorite:a}):b.jsxs("div",{className:"text-center py-12",children:[b.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),b.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},S8=()=>{const[t,e]=K.useState(null),[n,i]=K.useState(null),[s,a]=K.useState([]),[l,c]=K.useState(!1),[d,h]=K.useState(null),[y,E]=K.useState(!1),[T,w]=K.useState(null),[D,V]=K.useState(!1),[L,H]=K.useState("home"),[F,q]=K.useState(!1),[$,Z]=K.useState(!1),[G,I]=K.useState(!1),[x,R]=K.useState(!1),[P,M]=K.useState(null),[O,U]=K.useState(null),{clothingItems:Ie,clothingSets:_e,isAnalyzing:te,analyzeClothingItems:ce,deleteClothingItem:ge,createClothingSet:xe,updateClothingItem:Me,deleteClothingSet:z,favoriteOutfits:Q,addFavoriteOutfit:fe,deleteFavoriteOutfit:me}=E8(),de=vn.useMemo(()=>(Ie||[]).sort((it,De)=>(De.isFavorite?1:0)-(it.isFavorite?1:0)),[Ie]),Oe=K.useCallback(he=>{const it=Q.find(De=>De.titre===he.titre&&De.description===he.description);it?me(it.id):fe(he)},[Q,fe,me]),we=vn.useMemo(()=>_e||[],[_e]),jt=vn.useMemo(()=>new Set(we.flatMap(he=>he.itemIds||[])),[we]);K.useEffect(()=>{const he=async it=>{const De=it.coords.latitude,yt=it.coords.longitude,Kt=TR.openWeatherApiKey,$t=`https://api.openweathermap.org/data/2.5/weather?lat=${De}&lon=${yt}&appid=${Kt}&units=metric&lang=fr`;try{const zi=await fetch($t);if(!zi.ok)throw new Error("Impossible de rcuprer la mto.");const jr=await zi.json(),Sn=`${Math.round(jr.main.temp)}C, ${jr.weather[0].description},  ${jr.name}`;M(Sn),U(null)}catch{U("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(he,()=>U("Activez la golocalisation pour la mto.")):U("Golocalisation non supporte.")},[]);const gt=K.useCallback(async(he,it)=>{if(de.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const De=P?`Mto actuelle : ${P}. Occasion : ${he}`:`Occasion : ${he}`;try{const yt=await e9(de,we,De,it);a(yt)}catch(yt){i(yt instanceof Error?yt.message:"Erreur inconnue")}finally{c(!1)}},[de,we,P]),Fn=K.useCallback(async(he,it)=>{if(de.length===0){i("Veuillez d'abord ajouter des vtements.");return}E(!0),i(null);try{const De=await n9(de,we,he,it);h(De)}catch(De){i(De instanceof Error?De.message:"Erreur inconnue")}finally{E(!1)}},[de,we]),Xn=K.useCallback(async()=>{if(de.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}V(!0),i(null);try{const he=await t9(de,we);w(he)}catch(he){i(he instanceof Error?he.message:"Erreur inconnue")}finally{V(!1)}},[de,we]),mn=K.useCallback(()=>q(!0),[]),Zn=K.useCallback(()=>Z(!0),[]),En=he=>e(he),Tn=()=>e(null),qn=he=>{ge(he).catch(i),e(null)},qi=he=>{Me(he).catch(i),e(he)},Ai=he=>{const it=`Focus sur l'article : ${he.analysis}`;gt(it,he),e(null),window.innerWidth<768&&q(!0)},Bn=K.useCallback((he,it)=>{xe(he,it).catch(i)},[xe]),ei=K.useCallback(he=>{z(he).catch(i)},[z]),fi={hauts:de.filter(he=>he.category==="Hauts").length,bas:de.filter(he=>he.category==="Bas").length,chaussures:de.filter(he=>he.category==="Chaussures").length,accessoires:de.filter(he=>he.category==="Accessoires").length},di=L==="home"?[]:de.filter(he=>L==="hauts"?he.category==="Hauts":L==="bas"?he.category==="Bas":L==="chaussures"?he.category==="Chaussures":L==="accessoires"?he.category==="Accessoires":!1),Bi=F||$||G||!!t||!!T;return b.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&b.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8",role:"alert",children:[b.jsx("strong",{className:"font-bold",children:"Erreur: "}),b.jsx("span",{className:"block sm:inline",children:n})]}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[b.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[de.length>=3&&b.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),b.jsx("button",{onClick:Xn,disabled:D,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:D?"Analyse...":"Analyser ma garde-robe"})]}),b.jsx("div",{className:"hidden md:block",children:b.jsx(p9,{onAnalyze:ce,isAnalyzing:te})}),b.jsx("div",{className:"hidden md:block",children:b.jsx(y9,{clothingItems:de,clothingSets:we,onItemClick:En,onDeleteItem:qn,onCreateSet:Bn})}),b.jsxs("div",{className:"md:hidden",children:[L==="home"&&b.jsx(E9,{onAnalyzeWardrobe:Xn,onScrollToOutfits:mn,onScrollToVacation:Zn,onStartSetCreation:()=>I(!0),onShowFavorites:()=>R(!0),isAnalyzingWardrobe:D,clothingCount:de.length,favoriteOutfitCount:Q.length}),L!=="home"&&b.jsxs("div",{className:"pb-24",children:[b.jsxs("div",{className:"text-center py-6 px-4",children:[b.jsx("h2",{className:"text-2xl font-bold mb-2 capitalize",children:L}),b.jsxs("p",{className:"text-sm text-gray-500",children:[di.length," vtement",di.length>1?"s":""]})]}),di.length>0?b.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:di.map(he=>b.jsxs("div",{onClick:()=>En(he),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[he.isFavorite?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:b.jsx(Ip,{})}):jt.has(he.id)?b.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:b.jsx(Cp,{})}):null,b.jsx("div",{className:"aspect-square",children:b.jsx("img",{src:he.imageSrc,alt:he.analysis,className:"w-full h-full object-cover"})}),b.jsxs("div",{className:"p-3",children:[b.jsx("p",{className:"text-sm font-medium line-clamp-2",children:he.analysis}),b.jsx("p",{className:"text-xs text-gray-500 mt-1",children:he.color})]})]},he.id))}):b.jsx("div",{className:"text-center py-12 px-4",children:b.jsx("p",{className:"text-gray-500",children:"Aucun vtement dans cette catgorie"})})]})]})]}),b.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[b.jsx("div",{id:"outfit-generator",children:b.jsx(AR,{clothingItems:de,clothingSets:we,onGenerate:gt,isGenerating:l,weatherInfo:P,weatherError:O})}),s.length>0&&b.jsx(zh,{outfits:s,allClothingItems:de,allClothingSets:we,favoriteOutfits:Q,onToggleFavorite:Oe}),Q.length>0&&b.jsxs("div",{className:"mt-10",children:[b.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Mes Tenues Favorites"}),b.jsx(zh,{outfits:Q,allClothingItems:de,allClothingSets:we,favoriteOutfits:Q,onToggleFavorite:Oe})]}),b.jsx("div",{id:"vacation-planner",children:b.jsx(wR,{clothingItems:de,clothingSets:we,onGeneratePlan:Fn,isGenerating:y})}),d&&b.jsx(CR,{plan:d,allClothingItems:de,allClothingSets:we,onCreateSet:Bn})]})]}),t&&b.jsx(v9,{item:t,clothingSets:we,onClose:Tn,onUpdate:qi,onGenerateFrom:Ai,onRemoveSet:ei,onDelete:qn}),T&&b.jsx(S9,{analysis:T,onClose:()=>w(null)}),b.jsx(_9,{onFilesSelected:ce,isAnalyzing:te,isOtherModalOpen:Bi}),b.jsx(T9,{activeTab:L,onTabChange:H,counts:fi}),b.jsx(a8,{open:F,clothingItems:de,clothingSets:we,onGenerate:gt,isGenerating:l,suggestedOutfits:s,onClose:()=>q(!1),weatherInfo:P,weatherError:O,favoriteOutfits:Q,onToggleFavorite:Oe}),b.jsx(l8,{open:$,clothingItems:de,clothingSets:we,onGeneratePlan:Fn,isGenerating:y,vacationPlan:d,onCreateSet:Bn,onClose:()=>Z(!1)}),b.jsx(u8,{open:G,clothingItems:de,clothingSets:we,onClose:()=>I(!1),onCreateSet:(he,it)=>{Bn(he,it),I(!1)}}),b.jsx(T8,{open:x,onClose:()=>R(!1),allClothingItems:de,allClothingSets:we,favoriteOutfits:Q,onToggleFavorite:Oe})]})},b8=()=>{const[t,e]=K.useState(null),[n,i]=K.useState("dark");K.useEffect(()=>{const a=jM(lc,l=>{e(l)});return()=>a()},[]),K.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const s=()=>{i(a=>a==="light"?"dark":"light")};return b.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?b.jsxs(b.Fragment,{children:[b.jsx(h9,{theme:n,toggleTheme:s,children:b.jsx(vw,{user:t})}),b.jsx(_8,{user:t,children:b.jsx(S8,{})})]}):b.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:b.jsx(vw,{user:t})})})},A1=document.getElementById("root");if(!A1)throw new Error("L'lment root est introuvable dans le DOM");const A8=aD.createRoot(A1);A8.render(b.jsx(vn.StrictMode,{children:b.jsx(b8,{})}));
